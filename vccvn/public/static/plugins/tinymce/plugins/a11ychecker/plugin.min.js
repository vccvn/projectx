/* Ephox Accessibility Checker Plugin
 *
 * Copyright 2010-2017 Ephox Corporation.  All rights reserved.
 *
 * Version: 2.2.1-114
 */

!function(l){"use strict";var e,n,t,r,o,i,x=function(e){var n=e,t=function(){return n};return{get:t,set:function(e){n=e},clone:function(){return x(t())}}},a=function(){},g=function(e){return function(){return e}},u=function(e){return e},c=g(!1),s=g(!0),f=function(){return d},d=(e=function(e){return e.isNone()},r={fold:function(e,n){return e()},is:c,isSome:c,isNone:s,getOr:t=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:t,orThunk:n,map:f,each:a,bind:f,exists:c,forall:s,filter:f,equals:e,equals_:e,toArray:function(){return[]},toString:g("none()")},Object.freeze&&Object.freeze(r),r),p=function(t){var e=g(t),n=function(){return o},r=function(e){return e(t)},o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:s,isNone:c,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return p(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?o:d},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(c,function(e){return n(t,e)})}};return o},k={some:p,none:f,from:function(e){return null==e?d:p(e)}},m=function(e){return parseInt(e,10)},h=function(e,n){var t=e-n;return 0===t?0:0<t?1:-1},v=function(e,n,t){return{major:e,minor:n,patch:t}},y=function(e){var n=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(e);return n?v(m(n[1]),m(n[2]),m(n[3])):v(0,0,0)},w=function(e,n){return!!e&&-1===function(e,n){var t=h(e.major,n.major);if(0!==t)return t;var r=h(e.minor,n.minor);if(0!==r)return r;var o=h(e.patch,n.patch);return 0!==o?o:0}(y([(t=e).majorVersion,t.minorVersion].join(".").split(".").slice(0,3).join(".")),y(n));var t},b=(o=l.window,i="error",function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=o.console;t&&i in t&&t[i].apply(t,e)}),D={requestAnimationFrame:function(e,n){for(var t=l.window.requestAnimationFrame,r=["ms","moz","webkit"],o=0;o<r.length&&!t;o++)t=l.window[r[o]+"RequestAnimationFrame"];t||(t=function(e){l.window.setTimeout(e,0)}),t(e,n)},setEditorTimeout:function(e,n,t){l.window.setTimeout(function(){e.removed||n()},t||0)}},T=function(n){return function(e){return function(e){if(null===e)return"null";var n=typeof e;return"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(e)===n}},N=T("string"),A=T("array"),R=T("boolean"),S=T("function"),I=T("number"),E=Array.prototype.slice,O=Array.prototype.indexOf,C=Array.prototype.push,_=function(e,n){return t=e,r=n,-1<O.call(t,r);var t,r},M=function(e,n){for(var t=e.length,r=new Array(t),o=0;o<t;o++){var i=e[o];r[o]=n(i,o)}return r},H=function(e,n){for(var t=0,r=e.length;t<r;t++){n(e[t],t)}},G=function(e,n){for(var t=[],r=0,o=e.length;r<o;r++){var i=e[r];n(i,r)&&t.push(i)}return t},P=function(e,n,t){return H(e,function(e){t=n(t,e)}),t},U=function(e,n){for(var t=0,r=e.length;t<r;t++){var o=e[t];if(n(o,t))return k.some(o)}return k.none()},L=function(e){for(var n=[],t=0,r=e.length;t<r;++t){if(!A(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e);C.apply(n,e[t])}return n},W=function(e,n){return L(M(e,n))},q=function(e,n){for(var t=0,r=e.length;t<r;++t){if(!0!==n(e[t],t))return!1}return!0},B=(S(Array.from)&&Array.from,function(e,n,t){return 0!=(e.compareDocumentPosition(n)&t)}),V=function(e,n){return B(e,n,l.Node.DOCUMENT_POSITION_PRECEDING)},j=function(e,n){return B(e,n,l.Node.DOCUMENT_POSITION_CONTAINED_BY)},F=function(n,e,t){return W(e,function(e){return"I1"===e.id?e.check(n,t)?[{rule:e,element:n}]:[]:e.check(n)?[{rule:e,element:n}]:[]})},z=function(e,n){for(var t=[],r=function(e,n){for(var t=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(n(a,o)?t:r).push(a)}return{pass:t,fail:r}}(n.rules,function(e){return e.walkable}),o=r.pass,i=r.fail,a=l.document.createTreeWalker(e,l.NodeFilter.SHOW_ELEMENT,null,!1);a.nextNode();)t=t.concat(F(a.currentNode,o,n.allowDecorativeImages));var u,c=(u=e,W(i,function(n){return M(n.check(u),function(e){return{rule:n,element:e}})}));return(t=t.concat(c)).sort(function(e,n){return t=e.element,r=n.element,t===r?0:V(t,r)?1:-1;var t,r}),t};var Y,X={html4:g("html4"),html5:g("html5")},K={a:g("a"),aa:g("aa"),aaa:g("aaa")},$={error:g("error"),warning:g("warning"),info:g("info")},J=function(e,n){return e.matches?e.matches(n):e.webkitMatchesSelector?e.webkitMatchesSelector(n):e.mozMatchesSelector?e.mozMatchesSelector(n):!!e.msMatchesSelector&&e.msMatchesSelector(n)},Q={id:"D1",wcag:"1.3.1",severity:$.warning(),desckey:"a11y.d1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return!!J(e,"p")&&q(e.childNodes,function(e){return/^(b|strong)$/i.test(e.nodeName)})},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Z={id:"D2",wcag:"1.3.1",severity:$.error(),desckey:"a11y.d2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(e){var t,n=e.querySelectorAll("h1, h2, h3, h4, h5, h6"),r=[];return H(n,function(e){var n=parseInt(e.tagName.slice(1),10);t&&1<n-t&&r.push(e),t=n}),r},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},ee={id:"D3",wcag:"2.4.4",severity:$.error(),desckey:"a11y.d3.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-refs.html",walkable:!1,check:function(e){return G(e.querySelectorAll("a + a"),function(e){return e.href===e.previousSibling.href})},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},ne=function(e){var n=e.nodeName,t=function(e){for(var n=e.nextSibling;null!==n&&("#text"===n.nodeName||"BR"===n.nodeName);)n=n.nextSibling;return n}(e);return null!==t&&t.nodeName===n&&t},te=function(e,n){for(var t=ne(e),r=n(e)?[e]:[];!1!==t&&n(t);)r.push(t),t=ne(t);return r},re=function(e,n){for(var t=-1,r=0;r<e.length;r++)if(e[r]===n){t=r;break}return t},oe=function(e,n){for(var t=e.querySelectorAll("p,h1,h2,h3,h4,h5,h6"),r=[],o=0;o<t.length;){var i=t[o],a=te(i,n);if(1<a.length){r.push(a[0]);var u=a[a.length-1],c=re(t,u);o=-1===c?o+1:c}else o++}return r},ie=function(e){return e.textContent.match(/^\s{0,}([a-z1-9]|i+)\s{0,}[.)-]/gim)},ae={id:"D4o",wcag:"1.3.1",severity:$.error(),desckey:"a11y.d4.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(e){return oe(e,ie)},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},ue=function(e){return e.textContent.match(/^\s{0,}(\*|-)\s{0,}/gim)},ce={id:"D4u",wcag:"1.3.1",severity:$.error(),desckey:"a11y.d4.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(e){return oe(e,ue)},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},se=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:g(e)}},le={fromHtml:function(e,n){var t=(n||l.document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw l.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return se(t.childNodes[0])},fromTag:function(e,n){var t=(n||l.document).createElement(e);return se(t)},fromText:function(e,n){var t=(n||l.document).createTextNode(e);return se(t)},fromDom:se,fromPoint:function(e,n,t){var r=e.dom();return k.from(r.elementFromPoint(n,t)).map(se)}},fe=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(n.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+t.length+" arguments");var r={};return H(n,function(e,n){r[e]=g(t[n])}),r}},de=Object.keys,pe=Object.hasOwnProperty,me=function(e,n){for(var t=de(e),r=0,o=t.length;r<o;r++){var i=t[r];n(e[i],i)}},he=function(t){return function(e,n){t[n]=e}},ve=function(e,n){var t,r,o,i,a={},u={};return t=e,r=n,o=he(a),i=he(u),me(t,function(e,n){(r(e,n)?o:i)(e,n)}),{t:a,f:u}},ye=function(e){return t=function(e){return e},r=[],me(e,function(e,n){r.push(t(e,n))}),r;var t,r},ge=function(e,n){return pe.call(e,n)},we=function(e){return e.slice(0).sort()},be=function(n,e){if(!A(e))throw new Error("The "+n+" fields must be an array. Was: "+e+".");H(e,function(e){if(!N(e))throw new Error("The value "+e+" in the "+n+" fields was not a string.")})},xe=function(o,i){var t,a=o.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return be("required",o),be("optional",i),t=we(a),U(t,function(e,n){return n<t.length-1&&e===t[n+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}),function(n){var t=de(n);q(o,function(e){return _(t,e)})||function(e,n){throw new Error("All required keys ("+we(e).join(", ")+") were not specified. Specified keys were: "+we(n).join(", ")+".")}(o,t);var e=G(t,function(e){return!_(a,e)});0<e.length&&function(e){throw new Error("Unsupported keys for object: "+we(e).join(", "))}(e);var r={};return H(o,function(e){r[e]=g(n[e])}),H(i,function(e){r[e]=g(Object.prototype.hasOwnProperty.call(n,e)?k.some(n[e]):k.none())}),r}},ke=fe("red","green","blue","alpha"),De={rgbaColour:ke,white:function(){return ke(255,255,255,1)}},Te=function(e,n){return(Math.max(e,n)+.05)/(Math.min(e,n)+.05)},Ne=function(e){var n=function(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)},t=e.red()/255,r=e.green()/255,o=e.blue()/255;return.2126*n(t)+.7152*n(r)+.0722*n(o)},Ae=function(e,n){var t=e.alpha()+n.alpha()*(1-e.alpha()),r=(e.red()*e.alpha()+n.red()*n.alpha()*(1-e.alpha()))/t,o=(e.green()*e.alpha()+n.green()*n.alpha()*(1-e.alpha()))/t,i=(e.blue()*e.alpha()+n.blue()*n.alpha()*(1-e.alpha()))/t;return De.rgbaColour(Math.ceil(r),Math.ceil(o),Math.ceil(i),t)},Re=function(e){var n=function(e,n,t,r){var o=parseInt(e,10),i=parseInt(n,10),a=parseInt(t,10),u=parseFloat(r);return k.some(De.rgbaColour(o,i,a,u))};if("transparent"===e)return n(0,0,0,0);var t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(null!==t)return n(t[1],t[2],t[3],1);var r=e.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/);return null!==r?n(r[1],r[2],r[3],r[4]):k.none()},Se=(l.Node.ATTRIBUTE_NODE,l.Node.CDATA_SECTION_NODE,l.Node.COMMENT_NODE,l.Node.DOCUMENT_NODE),Ie=(l.Node.DOCUMENT_TYPE_NODE,l.Node.DOCUMENT_FRAGMENT_NODE,l.Node.ELEMENT_NODE),Ee=l.Node.TEXT_NODE,Oe=(l.Node.PROCESSING_INSTRUCTION_NODE,l.Node.ENTITY_REFERENCE_NODE,l.Node.ENTITY_NODE,l.Node.NOTATION_NODE,void 0!==l.window?l.window:Function("return this;")()),Ce=function(e,n){return function(e,n){for(var t=null!=n?n:Oe,r=0;r<e.length&&null!=t;++r)t=t[e[r]];return t}(e.split("."),n)},_e=function(e,n){var t=Ce(e,n);if(null==t)throw new Error(e+" not available on this browser");return t},Me=function(e){var n,t=Ce("ownerDocument.defaultView",e);return(n=t,_e("HTMLElement",n)).prototype.isPrototypeOf(e)},He=function(e){return Me(e.dom())},Ge=(Y=Ee,function(e){return e.dom().nodeType===Y}),Pe=function(e){var n=e.dom().body;if(null==n)throw new Error("Body is not available yet");return le.fromDom(n)},Ue=function(){return(Ue=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};var Le,We=function(){return qe(0,0)},qe=function(e,n){return{major:e,minor:n}},Be={nu:qe,detect:function(e,n){var t=String(n).toLowerCase();return 0===e.length?We():function(e,n){var t=function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.test(n))return r}}(e,n);if(!t)return{major:0,minor:0};var r=function(e){return Number(n.replace(t,"$"+e))};return qe(r(1),r(2))}(e,t)},unknown:We},Ve="Firefox",je=function(e,n){return function(){return n===e}},Fe=function(e){var n=e.current;return{current:n,version:e.version,isEdge:je("Edge",n),isChrome:je("Chrome",n),isIE:je("IE",n),isOpera:je("Opera",n),isFirefox:je(Ve,n),isSafari:je("Safari",n)}},ze={unknown:function(){return Fe({current:void 0,version:Be.unknown()})},nu:Fe,edge:g("Edge"),chrome:g("Chrome"),ie:g("IE"),opera:g("Opera"),firefox:g(Ve),safari:g("Safari")},Ye="Windows",Xe="Android",Ke="Solaris",$e="FreeBSD",Je="ChromeOS",Qe=function(e,n){return function(){return n===e}},Ze=function(e){var n=e.current;return{current:n,version:e.version,isWindows:Qe(Ye,n),isiOS:Qe("iOS",n),isAndroid:Qe(Xe,n),isOSX:Qe("OSX",n),isLinux:Qe("Linux",n),isSolaris:Qe(Ke,n),isFreeBSD:Qe($e,n),isChromeOS:Qe(Je,n)}},en={unknown:function(){return Ze({current:void 0,version:Be.unknown()})},nu:Ze,windows:g(Ye),ios:g("iOS"),android:g(Xe),linux:g("Linux"),osx:g("OSX"),solaris:g(Ke),freebsd:g($e),chromeos:g(Je)},nn=function(e,n){var t=String(n).toLowerCase();return U(e,function(e){return e.search(t)})},tn=function(e,t){return nn(e,t).map(function(e){var n=Be.detect(e.versionRegexes,t);return{current:e.name,version:n}})},rn=function(e,t){return nn(e,t).map(function(e){var n=Be.detect(e.versionRegexes,t);return{current:e.name,version:n}})},on=function(e,n){return-1!==e.indexOf(n)},an=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,un=function(n){return function(e){return on(e,n)}},cn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return on(e,"edge/")&&on(e,"chrome")&&on(e,"safari")&&on(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,an],search:function(e){return on(e,"chrome")&&!on(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return on(e,"msie")||on(e,"trident")}},{name:"Opera",versionRegexes:[an,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:un("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:un("firefox")},{name:"Safari",versionRegexes:[an,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(on(e,"safari")||on(e,"mobile/"))&&on(e,"applewebkit")}}],sn=[{name:"Windows",search:un("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return on(e,"iphone")||on(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:un("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:un("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:un("linux"),versionRegexes:[]},{name:"Solaris",search:un("sunos"),versionRegexes:[]},{name:"FreeBSD",search:un("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:un("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ln={browsers:g(cn),oses:g(sn)},fn=x(function(e,n){var t,r,o,i,a,u,c,s,l,f,d,p,m=ln.browsers(),h=ln.oses(),v=tn(m,e).fold(ze.unknown,ze.nu),y=rn(h,e).fold(en.unknown,en.nu);return{browser:v,os:y,deviceType:(r=v,o=e,i=n,a=(t=y).isiOS()&&!0===/ipad/i.test(o),u=t.isiOS()&&!a,c=t.isiOS()||t.isAndroid(),s=c||i("(pointer:coarse)"),l=a||!u&&c&&i("(min-device-width:768px)"),f=u||c&&!l,d=r.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),p=!f&&!l&&!d,{isiPad:g(a),isiPhone:g(u),isTablet:g(l),isPhone:g(f),isTouch:g(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:g(d),isDesktop:g(p)})}}(l.navigator.userAgent,function(e){return l.window.matchMedia(e).matches})),dn=Ie,pn=Se,mn=function(e,n){var t=e.dom();if(t.nodeType!==dn)return!1;var r=t;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},hn=function(e){return e.nodeType!==dn&&e.nodeType!==pn||0===e.childElementCount},vn=function(e,n){var t=void 0===n?l.document:n.dom();return hn(t)?k.none():k.from(t.querySelector(e)).map(le.fromDom)},yn=function(e,n){return e.dom()===n.dom()},gn=(fn.get().browser.isIE(),function(e,n,t){!function(e,n,t){if(!(N(t)||R(t)||I(t)))throw l.console.error("Invalid call to Attr.set. Key ",n,":: Value ",t,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,t+"")}(e.dom(),n,t)}),wn=function(e,n){var t=e.dom().getAttribute(n);return null===t?void 0:t},bn=function(e,n){var t=e.dom();return!(!t||!t.hasAttribute)&&t.hasAttribute(n)},xn=function(e,n){e.dom().removeAttribute(n)},kn=function(e,n){var t,r,o=e.dom(),i=l.window.getComputedStyle(o).getPropertyValue(n),a=""!==i||null!=(r=Ge(t=e)?t.dom().parentNode:t.dom())&&r.ownerDocument.body.contains(r)?i:Dn(o,n);return null===a?void 0:a},Dn=function(e,n){return void 0!==(t=e).style&&S(t.style.getPropertyValue)?e.style.getPropertyValue(n):"";var t},Tn=function(e){return le.fromDom(e.dom().ownerDocument)},Nn=function(e){return k.from(e.dom().parentNode).map(le.fromDom)},An=function(e){return M(e.dom().childNodes,le.fromDom)},Rn=function(e){return n=0,t=e.dom().childNodes,k.from(t[n]).map(le.fromDom);var n,t},Sn=(fe("element","offset"),function(e,n){var t=parseFloat(kn(e,"opacity"));return t<1?De.rgbaColour(n.red(),n.green(),n.blue(),n.alpha()*t):n}),In=function(e){var n=Tn(e),t=Pe(n),r=[e].concat(function(e,n){for(var t=S(n)?n:c,r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=le.fromDom(i);if(o.push(a),!0===t(a))break;r=i}return o}(e,function(e){return yn(e,t)})),o=P(r,function(t,r){if(1===t.alpha())return t;var e=kn(r,"background-color");return Re(e).bind(function(e){var n=Sn(r,e);return 0<n.alpha()?k.some(Ae(t,n)):k.none()}).getOr(t)},De.rgbaColour(0,0,0,0));return o.alpha()<1?Ae(o,De.white()):o},En=function(r,o){var e=kn(r,"color");return Re(e).bind(function(e){var n=Sn(r,e),t=n.alpha()<1?Ae(n,o):n;return k.some(t)})},On=function(e){var r=In(e);return En(e,r).map(function(e){var n=Ne(r),t=Ne(e);return Te(t,n)})},Cn=function(e,n){return On(e).filter(function(e){return e<n}).isSome()},_n=function(e){var n=An(e);return 0<G(n,function(e){return Ge(e)&&0<(n=e,n.dom().nodeValue).trim().length;var n}).length},Mn={id:"D5c",wcag:"1.4.3",severity:$.error(),desckey:"a11y.d5c.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(e){var n=le.fromDom(e);return _n(n)&&Cn(n,7)},levels:[K.aaa()],htmlversions:[X.html4(),X.html5()]},Hn=function(e){var n=kn(e,"font-size"),t=new RegExp(".*px").test(n),r=n.match(/(\d*\.?\d*)(.*)/);return t&&null!==r?k.some(Number(r[1])):k.none()},Gn=function(e){var n,t,r=!("bold"!==(t=kn(e,"font-weight"))&&"bolder"!==t)||!!/^[0-9]*$/.test(n=t)&&700<=parseInt(n,10),o=Tn(e),i=Pe(o),a=Hn(i);return Hn(e).fold(c,function(n){return a.fold(function(){return 24<=n||r&&19<=n},function(e){return 1.5*e<=n||r&&1.2*e<=n})})},Pn={id:"D5a",wcag:"1.4.3",severity:$.error(),desckey:"a11y.d5a.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(e){var n=le.fromDom(e);return _n(n)&&Gn(n)&&Cn(n,3)},levels:[K.aa()],htmlversions:[X.html4(),X.html5()]},Un={id:"D5b",wcag:"1.4.3",severity:$.error(),desckey:"a11y.d5b.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(e){var n=le.fromDom(e);return _n(n)&&!Gn(n)&&Cn(n,4.5)},levels:[K.aa()],htmlversions:[X.html4(),X.html5()]},Ln=function(e,n){return t=function(e){return mn(e,n)},G(An(e),t);var t},Wn=function(e,n){return t=n,o=void 0===(r=e)?l.document:r.dom(),hn(o)?[]:M(o.querySelectorAll(t),le.fromDom);var t,r,o},qn={id:"H93",wcag:"4.1.1",severity:$.error(),desckey:"a11y.h93.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/ensure-compat-parses.html",walkable:!1,check:function(e){var n=le.fromDom(e),t=Wn(n,"*[id]"),r=P(t,function(e,n){var t,r,o=wn(n,"id");if(void 0===o)return e;if(ge(e.problems,o))return e;if(ge(e.ids,o)){var i=e.ids[o];return Ue(Ue({},e),{problems:Ue(Ue({},e.problems),(t={},t[o]=i,t))})}return Ue(Ue({},e),{ids:Ue(Ue({},e.ids),(r={},r[o]=n.dom(),r))})},{ids:{},problems:{}});return ye(r.problems)},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Bn={id:"I1",wcag:"1.1.1",severity:$.error(),desckey:"a11y.i1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/text-equiv-all.html",walkable:!0,check:function(e,n){var t=e.hasAttribute("alt"),r=t&&""===e.getAttribute("alt").trim(),o=e.hasAttribute("role")&&"presentation"===e.getAttribute("role");return J(e,"img")&&(!t||(n?t&&r&&!o||t&&!r&&o:r||o))},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Vn={id:"I2",wcag:"1.1.1",severity:$.error(),desckey:"a11y.i2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/text-equiv-all.html",walkable:!0,check:function(e){return J(e,"img[alt][src]")&&e.src.split("/").pop()===e.alt.split("/").pop()},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},jn={id:"T1",wcag:"1.3.1",severity:$.error(),desckey:"a11y.t1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){if(J(e,"table")){var n=e.querySelector("caption");return!n||J(n,":empty")}return!1},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Fn={id:"T2",wcag:"1.3.1",severity:$.warning(),desckey:"a11y.t2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return J(e,"table")&&(e.querySelector("[rowspan]")||e.querySelector("[colspan]"))&&!e.hasAttribute("summary")},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4()]},zn={id:"T3",wcag:"1.3.1",severity:$.error(),desckey:"a11y.t3.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return J(e,"table")&&e.hasAttribute("summary")&&0<e.querySelectorAll("caption").length&&e.getAttribute("summary")===e.querySelector("caption").innerHTML},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Yn={id:"T4b",wcag:"1.3.1",severity:$.error(),desckey:"a11y.t4b.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return"table"===e.nodeName.toLowerCase()&&0===e.querySelectorAll("th").length},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Xn={id:"T4c",wcag:"1.3.1",severity:$.error(),desckey:"a11y.t4c.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return"th"===e.nodeName.toLowerCase()&&(t=!1===(n=e).hasAttribute("scope"),r=!1===/row|col|rowgroup|colgroup/i.test(n.getAttribute("scope")),t||r);var n,t,r},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Kn=function(e,n){return 0===e.querySelectorAll(n).length},$n={id:"T4a",wcag:"1.3.1",severity:$.error(),desckey:"a11y.t4a.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return"table"===e.nodeName.toLowerCase()&&(Kn(n=e,"tr")||Kn(n,"td"));var n},levels:[K.a(),K.aa(),K.aaa()],htmlversions:[X.html4(),X.html5()]},Jn={all:g([Q,Z,ee,ae,ce,Pn,Un,Mn,qn,Bn,Vn,jn,Fn,zn,Xn,$n,Yn])},Qn=function(){return Jn.all().slice()},Zn=function(e){var n=e.getParam("a11y_advanced_options",!1,"boolean");return e.getParam("a11ychecker_allow_decorative_images",n,"boolean")},et=[K.a(),K.aa(),K.aaa()],nt=[X.html4(),X.html5()],tt={"a11y.d1.description":"This paragraph looks like a heading. If it is a heading, please select a heading level.","a11y.d1.repair.block.h1":"Heading 1","a11y.d1.repair.block.h2":"Heading 2","a11y.d1.repair.block.h3":"Heading 3","a11y.d1.repair.block.h4":"Heading 4","a11y.d1.repair.block.h5":"Heading 5","a11y.d1.repair.block.h6":"Heading 6","a11y.d1.repair.info":"Select a heading level:","a11y.d2.description":"Headings must be applied in sequential order. For example: Heading 1 should be followed by Heading 2, not Heading 3.","a11y.d3.description":"Adjacent links with the same URL should be merged into one link","a11y.d4.description":"The selected text appears to be a list. Lists should be formatted using a list tag.","a11y.d5a.description":"Large text must have a contrast ratio of at least 3:1","a11y.d5b.description":"Text must have a contrast ratio of at least 4.5:1","a11y.d5c.description":"Text must have a contrast ratio of at least 7:1","a11y.h93.description":"ID attribute must be unique","a11y.h93.repair.info":"Make ID unique","a11y.h93.repair.deduplicate.others":"Keep this ID and remove all others","a11y.h93.repair.deduplicate.this":"Remove this ID","a11y.h93.repair.deduplicate.all":"Remove all IDs","a11y.i1.description.decorativeAllowed":"Images must be marked as decorative or have an alternative text description","a11y.i1.description.decorativeNotAllowed":"Images must have an alternative text description. Decorative images are not allowed.","a11y.i1.repair.errors.duplicate":"Alternative text cannot be the same as the filename","a11y.i1.repair.errors.empty":"Alternative text cannot be empty","a11y.i1.repair.info.decorativeAllowed":"Or provide alternative text:","a11y.i1.repair.info.decorativeNotAllowed":"Provide alternative text:","a11y.i1.repair.checkboxlabel":"Make image decorative:","a11y.i1.repair.checkboxtext":"Image is decorative","a11y.i2.description":"Alternative text must not be the same as the image filename","a11y.i2.repair.info":"Provide alternative text:","a11y.t1.description":"Tables must have captions","a11y.t1.repair.errors.duplicate":"Table caption cannot be the same as the table summary","a11y.t1.repair.errors.empty":"Caption cannot be empty","a11y.t1.repair.info":"Provide caption:","a11y.t2.description":"Complex tables should have summaries","a11y.t2.repair.errors.duplicate":"Table summary cannot be the same as the table caption","a11y.t2.repair.errors.empty":"Summary cannot be empty","a11y.t2.repair.info":"Provide table summary:","a11y.t3.description":"Table caption and summary cannot have the same value","a11y.t4a.description":"Table elements must contain TR and TD tags","a11y.t4b.description":"Tables must have at least one header cell","a11y.t4b.repair.info":"Choose table header:","a11y.t4c.description":"Table headers must be applied to a row or a column","a11y.t4c.repair.header.col":"Header Column","a11y.t4c.repair.header.row":"Header Row","a11y.t4c.repair.info":"Select header scope:","a11y.t4c.repair.scope.col":"Column","a11y.t4c.repair.scope.colgroup":"Column Group","a11y.t4c.repair.scope.row":"Row","a11y.t4c.repair.scope.rowgroup":"Row Group","a11y.widget.counter":"Issue {0} of {1}","a11y.widget.ignore":"Ignore","a11y.widget.issue.none":"No accessibility issues detected","a11y.widget.next":"Next Issue","a11y.widget.previous":"Previous Issue","a11y.widget.repair":"Repair Issue","a11y.widget.title":"Accessibility Checker","a11y.widget.help.title":"Click for more info",error:"Error",warning:"Warning",info:"Info",success:"Success"},rt=function(e){return tt[e]},ot=function(e){return Array.isArray(e)?tinymce.translate([rt(e[0])].concat(e.slice(1))):tinymce.translate(rt(e))},it=function(e,n,t){var r=wn(e,n).concat(" ",t);at(e,n,r)},at=function(e,n,t){gn(e,n,t)},ut=function(e,n){return bn(e,n)?wn(e,n).split(" "):[]},ct=function(e,n,t){(bn(e,n)?it:at)(e,n,t)},st=function(n,t){Nn(n).each(function(e){e.dom().insertBefore(t.dom(),n.dom())})},lt=function(e,n){var t;(t=e,k.from(t.dom().nextSibling).map(le.fromDom)).fold(function(){Nn(e).each(function(e){ft(e,n)})},function(e){st(e,n)})},ft=function(e,n){e.dom().appendChild(n.dom())},dt=function(n,e){H(e,function(e){ft(n,e)})},pt=function(e){e.dom().textContent="",H(An(e),function(e){mt(e)})},mt=function(e){var n=e.dom();null!==n.parentNode&&n.parentNode.removeChild(n)},ht=function(e){var n,t=An(e);0<t.length&&(n=e,H(t,function(e){st(n,e)})),mt(e)},vt=function(e){return vn(e)},yt=function(e,n){return t=function(e){return mn(e,n)},U(e.dom().childNodes,function(e){return t(le.fromDom(e))}).map(le.fromDom);var t},gt=function(e,n){return vn(n,e)},wt=function(e){return vt(e).isSome()},bt=(Le="ephox-foam".replace(/\./g,"-"),{resolve:function(e){return Le+"-"+e}}),xt=bt.resolve("styles"),kt="#"+xt,Dt={resolve:bt.resolve,injectStyles:function(e){if(!wt(kt)){var n=le.fromTag("link");gn(n,"id",xt),gn(n,"rel","stylesheet"),gn(n,"href",e);var t=vt("head").getOrDie("Head element could not be found.");ft(t,n)}},removeStyles:function(){if(wt(kt)){var e=vt("head").getOrDie("Head element could not be found."),n=gt(e,kt).getOrDie("The style element could not be removed");mt(n)}}},Tt=function(e,n,t){gn(e,n,t)},Nt=function(e,t,n,r,o,i){H(e,function(n){var e=At(n.severity,r,o,i).toArray().concat([t]);H(e,function(e){gn(n.element,e,1)})}),k.from(e[0]).each(function(e){Tt(e.element,n,e.severity)})},At=function(e,n,t,r){switch(e){case"info":return k.some(n);case"warning":return k.some(t);case"error":return k.some(r);default:return k.none()}},Rt=function(e,n,t,r){var o=Wn(e,"["+n+"]");H(o,function(e){xn(e,n)}),Tt(t,n,r)},St=function(e,t,r,o,i,a){var n=Wn(e,"["+t+"]");H(n,function(n){H([t,r,o,i,a],function(e){xn(n,e)}),It(n,t,r)})},It=function(e,n,t){xn(e,n),xn(e,t)},Et=function(r){var o=r.editor();return{start:function(e){Nt(e,r.violation(),r.current(),r.info(),r.warn(),r.error())},moveTo:function(e,n){var t=le.fromDom(o.getBody());Rt(t,r.current(),e,n)},stop:function(){var e=le.fromDom(o.getBody());St(e,r.violation(),r.current(),r.info(),r.warn(),r.error())},exclude:function(e){It(e,r.violation(),r.current())}}},Ot="data-"+Dt.resolve("a11y-current-violation"),Ct="data-"+Dt.resolve("a11y-violation"),_t="data-"+Dt.resolve("a11y-severity-info"),Mt="data-"+Dt.resolve("a11y-severity-warn"),Ht="data-"+Dt.resolve("a11y-severity-error"),Gt="data-"+Dt.resolve("accessibility-ignore"),Pt=xe(["editor","violation","current","info","warn","error"],[]),Ut={configure:function(n){n.on("init",function(e){H([Gt,Ct,_t,Mt,Ht,Ot],function(e){n.serializer.addTempAttr(e)})})},ignoreAttr:g(Gt),manager:function(e){return Et(Pt({editor:e,violation:Ct,current:Ot,info:_t,warn:Mt,error:Ht}))}},Lt=function(r){var e,n,t,o,i,a=(e=r.getParam("a11ychecker_level","","string"),_(et,e)?e:K.aa()),u=(n=r.getParam("a11ychecker_html_version","","string"),_(nt,n)?n:X.html4()),c=(t=a,o=u,i=Qn(),{rules:G(i,function(e){return _(e.levels,t)&&_(e.htmlversions,o)}),allowDecorativeImages:Zn(r)});Ut.configure(r);var s,l=x(!1),f=(s=c,{audit:function(e){return z(e,s)}}),d=Ut.manager(r),p=Ut.ignoreAttr(),m=[],h=0,v=function(){return l.set(!0),m=y(),h=0,d.start(m),w()},y=function(){var t,e=f.audit(r.getBody()),n=(t=r,M(e,function(e){var n=e.rule;return{id:n.id.toUpperCase(),description:"I1"!==n.id?n.desckey:Zn(t)?n.desckey+".decorativeAllowed":n.desckey+".decorativeNotAllowed",element:le.fromDom(e.element),url:n.url,severity:n.severity}}));return G(n,function(n){var e=n.element,t=ut(e,p);return q(t,function(e){return n.id!==e})})},g=function(e){return h=(h+=e)<0?h+m.length:h%m.length,d.moveTo(m[h].element,m[h].severity),r.selection.scrollIntoView(m[h].element.dom()),{summaryLabel:ot(["a11y.widget.counter",h+1,m.length]),issue:m[h],index:h+1}},w=function(){return 0<m.length?k.some(g(0)):k.none()},b=function(){d.stop(),l.set(!1),h=0,m=[]};return{scan:v,stepIssue:g,getIssues:function(){return m.slice(0)},getCurrent:w,getReport:function(){var e=l.get();try{return e||v(),M(m,function(e){return{severity:e.severity,url:e.url,description:ot(e.description),element:e.element.dom()}})}finally{e||b()}},resolveCurrent:function(e){return e&&ct(m[h].element,p,m[h].id),m=y(),w()},clear:b,isAuditing:function(){return l.get()}}},Wt={getInitialHtml:function(){return'<div role="presentation"></div><div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div>'},buildHtml:function(e,n){return'<div style="white-space:normal;">'+e+(n?'<button aria-label="Show specification details" role="button" style="display:inline;" tabindex="-1"><i class="mce-ico mce-i-help"></i><button>':"")+"</div>"},setSeverity:function(e,n){e.classes.remove("error"),e.classes.remove("warning"),e.classes.remove("success"),e.classes.add(n)}};function qt(u){var c,n={},o=x(null),s=function(e,n,t){return Math.min(Math.max(e,n),t)},e=function(){var e,n,t,r,o=u.getBody();if(o&&c&&!0===c.state.get("visible")){var i=u.inline?u.getElement():u.getContentAreaContainer(),a=("BODY"===(r=o).nodeName&&(r=r.parentNode),r.scrollHeight>r.clientHeight?-25:-10);c.moveRel(i,"tr-tr"),c.moveBy(a,10),n=10,t=(e=c).layoutRect(),e.moveTo(s(t.x,0,l.window.innerWidth-t.w),s(t.y,n,l.window.innerHeight-t.h-n))}};return{actions:n,open:function(){(c=tinymce.ui.Factory.create("window",{title:"Accessibility Checker",spacing:5,padding:10,minWidth:300,layout:"flex",direction:"column",align:"stretch",items:[{type:"label",name:"index",text:"Index",padding:"0 0 5 0"},{type:"widget",classes:"widget infobox has-help",name:"description",onpostrender:function(e){e.control.getEl().innerHTML=Wt.getInitialHtml()},onclick:function(e){if(o.get()){e.stopPropagation(),e.preventDefault();var n=o.get();n&&l.window.open(n)}}},{type:"container",layout:"flex",direction:"column",align:"stretch",name:"repairer",padding:"5 0 5 0",items:[]},{type:"label",name:"validation",hidden:!0,classes:"error"},{type:"container",name:"footer",layout:"flex",direction:"row",spacing:3,items:[{type:"button",name:"repair",text:ot("a11y.widget.repair"),onclick:"repair"},{type:"button",text:ot("a11y.widget.ignore"),onclick:"ignore"},{type:"spacer",flex:1},{type:"button",text:ot("a11y.widget.previous"),onclick:"prev"},{type:"button",text:ot("a11y.widget.next"),autofocus:!0,subtype:"primary",onclick:"next"}]},{type:"container",name:"closer",layout:"flex",direction:"row",hidden:!0,items:[{type:"spacer",flex:1},{type:"button",subtype:"primary",name:"close",text:"Close",onclick:function(){c.close()}}]}]})).on("submit",function(e){e.preventDefault(),n.repair()}),c.modal=!1,c.on("open",function(){e()}),c.on("close",function(){n.close()}),c.on("execute",function(e){n[e.action]()}),u.on("remove",function(){c&&c.close()}),c.renderTo().reflow(),c.moveTo(0,0)},close:function(){c&&(c.close(),c=null)},reposition:e,find:function(e){return c.find(e)},setIndexText:function(e){c.find("#index").show().text(e)},hideIndex:function(){c.find("#index").hide()},setDescriptionText:function(e,n,t){var r=c.find("#description")[0].show();Wt.setSeverity(r,n),o.set(t),r.getEl().firstChild.innerHTML=Wt.buildHtml(e,t),r.updateLayoutRect(),r.reflow(),D.setEditorTimeout(u,function(){r.getEl().lastChild.textContent=e})},setRepairerChildren:function(e){var n;(n=c.find("#repairer")[0]).items().remove(),n.append(e),n.renderNew()},hideFooter:function(){c.find("#footer").hide()},showCloser:function(){var e=c.find("#closer")[0];e.show(),e.focus()},hideRepairer:function(){c.find("#repairer").hide()},showRepairer:function(){c.find("#repairer").show()},hideRepairButton:function(){c.find("#repair").hide()},showRepairButton:function(){c.find("#repair").show()},disableUi:function(e){c.find(e).disabled(!0)},enableUi:function(e){c.find(e).disabled(!1)},setValidationInformation:function(e){c.find("#validation").show().text(e)},hideValidation:function(){c.find("#validation").hide()},retrieveInputValue:function(e){return c.find("#"+e).value()}}}var Bt=function(t){return{is:function(e){return t===e},isValue:s,isError:c,getOr:g(t),getOrThunk:g(t),getOrDie:g(t),or:function(e){return Bt(t)},orThunk:function(e){return Bt(t)},fold:function(e,n){return n(t)},map:function(e){return Bt(e(t))},mapError:function(e){return Bt(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOption:function(){return k.some(t)}}},Vt=function(t){return{is:c,isValue:c,isError:s,getOr:u,getOrThunk:function(e){return e()},getOrDie:function(){return e=String(t),function(){throw new Error(e)}();var e},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,n){return e(t)},map:function(e){return Vt(t)},mapError:function(e){return Vt(e(t))},each:a,bind:function(e){return Vt(t)},exists:c,forall:s,toOption:k.none}},jt={value:Bt,error:Vt,fromOption:function(e,n){return e.fold(function(){return Vt(n)},Bt)}},Ft=function(e){return n=e,t=!0,le.fromDom(n.dom().cloneNode(t));var n,t},zt=function(e,n,t){var r=Tn(e),o=le.fromTag(t[n],r.dom()),i=An(e),a=M(i,Ft);dt(o,a);var u=Wn(o,"b,strong");return H(u,ht),st(e,o),mt(e),jt.value(o)},Yt=function(e){var n=le.fromDom(e.dom().previousSibling);if(n){var t=An(e);dt(n,t),mt(e)}return jt.value(n)},Xt=function(n,e,t,r){var o=t[e],i="all"===o||"this"===o;if("all"===o||"others"===o){var a=wn(n,"id"),u=r.getBody(),c=le.fromDom(u),s=Wn(c,'*[id="'+a+'"]'),l=G(s,function(e){return!yn(e,n)});H(l,function(e){xn(e,"id")})}return i&&xn(n,"id"),jt.value(n)},Kt=function(e,n){return jt.error(n(e))},$t=function(e,n,t,r,o){return n===t?Kt(r,o):jt.value(e)},Jt=function(e,n,t,r,o,i){return 0===n.length?Kt(r,i):$t(e,n,t,r,i)},Qt=function(e){var n=e.split("/");return 0<n.length?n.pop():""},Zt=function(e,n,t,r,o,i){var a,u,c,s=(a=e,u="src",k.from(wn(a,u))).map(Qt).getOr(""),l=t[n+"_textinput"];return t[n+"_checkbox"]?(gn(c=e,"alt",""),gn(c,"role","presentation"),jt.value(c)):Jt(e,l,s,r,o,i).map(function(e){return gn(e,"alt",l),"presentation"===wn(e,"role")&&xn(e,"role"),e})},er=function(e){return e.dom().innerHTML},nr=function(e,n){var t,r,o=Tn(e).dom(),i=le.fromDom(o.createDocumentFragment()),a=(t=n,(r=(o||l.document).createElement("div")).innerHTML=t,An(le.fromDom(r)));dt(i,a),pt(e),ft(e,i)},tr=function(o,i,a,e,n,t){var r=wn(o,"summary");return Jt(o,a[i],r,e,n,t).map(function(e){var n,t,r=yt(o,"caption").fold(function(){return le.fromTag("caption")},function(e){return pt(e),e});return nr(r,a[i]),t=r,Rn(n=e).fold(function(){ft(n,t)},function(e){n.dom().insertBefore(t.dom(),e.dom())}),e})},rr=function(n,t,r,e,o,i){var a=gt(n,"caption").filter(He).map(er).getOr("");return Jt(n,r[t],a,e,o,i).map(function(e){return gn(n,"summary",r[t]),e})},or=function(e,n,t){var r=[];if("row"===t[n]){var o=le.fromDom(e.dom().rows[0]);r=Ln(o,"td")}else"col"===t[n]&&H(e.dom().rows,function(e){yt(le.fromDom(e),"td").each(function(e){r.push(e)})});return H(r,function(n){var t=le.fromTag("th");H(n.dom().attributes,function(e){gn(t,e.name,wn(n,e.name))}),t.dom().innerHTML=n.dom().innerHTML,lt(n,t),mt(n)}),jt.value(e)},ir=function(e,n,t){return gn(e,"scope",t[n]),jt.value(e)},ar=function(e,n){return{type:"label",forName:e,text:n}},ur=function(e,n,t){return{type:"listbox",name:e,values:M(n,function(e){return{text:t(e.text),value:e.value}})}},cr=function(e,n){return{type:"textbox",name:e,value:n}},sr=function(e,n){return{type:"checkbox",name:e,text:n}},lr=xe(["ui","repair","handler"],[]),fr=function(e,n){var t=e.id,r="#"+t+"_textinput",o=n.find(r)[0],i="#"+t+"_checkbox",a=n.find(i)[0],u=function(){!0===a.value()?(n.disableUi(r),n.enableUi("#repair")):(n.enableUi(r),0<o.value().length?(n.enableUi("#repair"),n.enableUi(i)):(n.enableUi(i),n.disableUi("#repair")))};o.on("input",u),a.on("change",u),u()},dr=function(e,n,t,r){var o,i=wn(r,"alt"),a=[ar(n+"_textinput_label",t((o="a11y.i1.repair.info",e?o+".decorativeAllowed":o+".decorativeNotAllowed"))),cr(n+"_textinput",i)];return e?L([[ar(n+"_checkbox_label",t("a11y.i1.repair.checkboxlabel")),sr(n+"_checkbox",t("a11y.i1.repair.checkboxtext"))],a]):a},pr=function(e,n,t,r,o){var i,a,u=((i={})[r+"_textinput"]=n.retrieveInputValue(r+"_textinput"),i),c=e?((a={})[r+"_checkbox"]=n.retrieveInputValue(r+"_checkbox"),a):{},s=Ue(Ue({},u),c);return Zt(t,r,s,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",o)};function mr(o,i){var a,u,c,s=(c=Zn(u=o),{H93:k.some(lr({ui:k.some(function(e,n){return[ar("H93_selectbox_label",e("a11y.h93.repair.info")),ur("H93_selectbox",[{text:"a11y.h93.repair.deduplicate.others",value:"others"},{text:"a11y.h93.repair.deduplicate.this",value:"this"},{text:"a11y.h93.repair.deduplicate.all",value:"all"}],e)]}),repair:function(e,n,t,r){var o=t.retrieveInputValue("H93_selectbox");return Xt(e,n,{H93:o},u)},handler:k.none()})),I1:k.some(lr({ui:k.some(function(e,n){return dr(c,"I1",e,n)}),repair:function(e,n,t,r){return pr(c,t,e,n,r)},handler:c?k.some(fr):k.none()})),I2:k.some(lr({ui:k.some(function(e,n){return dr(c,"I2",e,n)}),repair:function(e,n,t,r){return pr(c,t,e,n,r)},handler:c?k.some(fr):k.none()})),T1:k.some(lr({ui:k.some(function(e,n){return[ar("table-caption",e("a11y.t1.repair.info")),cr("table-caption","")]}),repair:function(e,n,t,r){var o=t.retrieveInputValue("table-caption");return tr(e,n,{T1:o},"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",r)},handler:k.none()})),T2:k.some(lr({ui:k.some(function(e,n){return[ar("table-summary",e("a11y.t2.repair.info")),cr("table-summary","")]}),repair:function(e,n,t,r){var o=t.retrieveInputValue("table-summary");return rr(e,n,{T2:o},"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate",r)},handler:k.none()})),T3:k.some(lr({ui:k.some(function(e,n){var t=yt(n,"caption").fold(function(){return""},function(e){return e.dom().innerHTML});return[ar("table-caption",e("a11y.t1.repair.info")),cr("table-caption",t)]}),repair:function(e,n,t,r){var o=t.retrieveInputValue("table-caption");return tr(e,n,{T3:o},"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",r)},handler:k.none()})),T4A:k.none(),T4B:k.some(lr({ui:k.some(function(e,n){return[ar("table-headers",e("a11y.t4b.repair.info")),ur("table-headers",[{text:"a11y.t4c.repair.header.row",value:"row"},{text:"a11y.t4c.repair.header.col",value:"col"}],e)]}),repair:function(e,n,t,r){var o=t.retrieveInputValue("table-headers");return or(e,n,{T4B:o})},handler:k.none()})),T4C:k.some(lr({ui:k.some(function(e,n){return[ar("scope-type",e("a11y.t4c.repair.info")),ur("scope-type",[{text:"a11y.t4c.repair.scope.row",value:"row"},{text:"a11y.t4c.repair.scope.col",value:"col"},{text:"a11y.t4c.repair.scope.rowgroup",value:"rowgroup"},{text:"a11y.t4c.repair.scope.colgroup",value:"colgroup"}],e)]}),repair:function(e,n,t,r){var o=t.retrieveInputValue("scope-type");return ir(e,n,{T4C:o})},handler:k.none()})),D1:k.some(lr({ui:k.some(function(e,n){return[ar("heading-type",e("a11y.d1.repair.info")),ur("heading-type",[{text:"a11y.d1.repair.block.h1",value:"h1"},{text:"a11y.d1.repair.block.h2",value:"h2"},{text:"a11y.d1.repair.block.h3",value:"h3"},{text:"a11y.d1.repair.block.h4",value:"h4"},{text:"a11y.d1.repair.block.h5",value:"h5"},{text:"a11y.d1.repair.block.h6",value:"h6"}],e)]}),repair:function(e,n,t,r){var o=t.retrieveInputValue("heading-type");return zt(e,n,{D1:o})},handler:k.none()})),D2:k.none(),D3:k.some(lr({ui:k.none(),repair:function(e,n,t,r){return Yt(e)},handler:k.none()}))}),e=function(){t(),i.scan().fold(function(){return d()},function(e){return r(e.issue,e.index)})},n=function(){a&&a.close()},t=function(){(a=qt(o)).actions.close=function(){i.clear()},a.actions.ignore=function(){f(!0)},a.actions.prev=h,a.actions.next=v,a.open()},l=function(){a&&a.reposition()},r=function(n,e){a.hideValidation();var t,r="https://www.tiny.cloud/docs-4x/plugins/a11ychecker/#"+n.id;a.setIndexText(ot(["a11y.widget.counter",e,i.getIssues().length])),a.setDescriptionText(ot(n.description),n.severity,r),(t=n.id,void 0!==s[t]?s[t]:k.none()).fold(p,function(e){return m(e,n)}),l(),o.selection.scrollIntoView(n.element.dom())},f=function(e){i.resolveCurrent(e).fold(function(){return d()},function(e){r(e.issue,e.index)}),l()},d=function(){a.hideIndex(),a.hideRepairer(),a.hideValidation(),a.hideFooter(),a.showCloser(),a.setDescriptionText(ot("a11y.widget.issue.none"),"success")},p=function(){a.hideRepairer(),a.hideRepairButton()},m=function(e,r){e.ui().fold(p,function(e,n,t){a.setRepairerChildren(e(ot,r.element)),a.showRepairer()}),a.showRepairButton(),e.handler().each(function(e){return e(r,a)}),a.actions.repair=function(){o.undoManager.transact(function(){e.repair()(r.element,r.id,a,ot).fold(function(e){a.setValidationInformation(e),l()},function(){return f(!1)})})}},h=function(){var e=i.stepIssue(-1);r(e.issue,e.index)},v=function(){var e=i.stepIssue(1);r(e.issue,e.index)};return{toggleAuditing:function(){i.isAuditing()?n():e()},startAuditing:e,stopAuditing:n,positionDialog:l}}var hr=function(e,n){var t=n.ui.registry.getAll().icons;return k.from(t[e]).orThunk(function(){return k.from(t["temporary-placeholder"])}).getOr("!not found!")},vr=function(e,n,t,r,o){var i,a,u,c=ot(t),s=ot(n);return'<div class="accessibility-issue__description"><div><div><div class="tox-icon">'+hr("info"===t?"info":"warning",e)+"</div><h2>"+c+"</h2></div><p>"+s+"</p></div><div>"+(i=r,a=e,u='<a href="'+o+'" title="'+ot("a11y.widget.help.title")+'" class="tox-button tox-button--naked tox-button--icon" target="_blank" data-alloy-tabstop="true" tabindex="-1"><div class="tox-icon">'+hr(i,a)+"</div></a>","help"===i?u:'<div class="tox-icon">'+hr(i,a)+"</div>")+"</div></div>"};function yr(n,e){return{title:"Accessibility Checker",body:{type:"panel",items:[{type:"panel",classes:["tox-accessibility-issue","accessibility-issue--success"],items:[{type:"htmlpanel",html:vr(e,"a11y.widget.issue.none","success","checkmark"),preset:"presentation"}]}]},buttons:[{type:"submit",name:"ok",text:"OK",primary:!0}],onSubmit:function(e){n.clear(),e.close()},onCancel:function(){n.clear()}}}var gr,wr,br=function(e,n,t,r){return{type:"selectbox",label:n,name:e,items:M(t,function(e){return{text:r(e.text),value:e.value}})}},xr=function(e,n){return{type:"input",name:e,label:n}},kr=function(e,n,t){return{type:"label",label:n,items:[{type:"checkbox",name:e,label:t}]}},Dr=function(e){return{type:"htmlpanel",html:'<div class="tox-form__group--error">'+e+"</div>"}},Tr=function(e,n,t){e.redial(n),e.focus(t)};(wr=gr||(gr={})).Next="next",wr.Prev="prev",wr.Ignore="ignore",wr.Ok="ok",wr.Repair="repair";var Nr=function(e,u,c,o,s){var l=e.issue,f=e.summaryLabel,i=function(o,n,i){var e,t,r="warning"===(e=l.severity)?"warn":e,a=n.fold(function(){return[]},function(e){return[{type:"panel",classes:["accessibility-issue__repair"],items:n.map(function(e){return e.items}).getOr([])}]});return{title:"Accessibility Checker",body:{type:"panel",classes:["tox-accessibility-issue","accessibility-issue--"+r],items:function(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var r=Array(e),o=0;for(n=0;n<t;n++)for(var i=arguments[n],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}([{type:"panel",classes:["accessibility-issue__header"],items:[{type:"htmlpanel",html:"<h1>"+f+"</h1>",preset:"presentation"},{type:"button",name:gr.Prev,text:"Prev",icon:"action-prev",borderless:!0},{type:"button",name:gr.Next,text:"Next",icon:"action-next",borderless:!0}]},{type:"htmlpanel",html:vr(s,l.description,l.severity,"help",(t=l.id,"https://www.tiny.cloud/docs/plugins/a11ychecker/#"+t)),preset:"presentation"}],a)},buttons:[{type:"custom",name:gr.Ignore,text:"Ignore"},{type:"custom",name:gr.Repair,text:"Repair",disabled:i,primary:!0}],initialData:Ue({},n.map(function(e){return e.initialData}).getOr({})),onAction:function(n,e){var t=e.name;e.value;if(t===gr.Next||t===gr.Prev){var r=u.stepIssue(t===gr.Next?1:-1);Tr(n,Nr(r,u,c,k.none(),s),t)}else t===gr.Ignore?u.resolveCurrent(!0).fold(function(){Tr(n,yr(u,s),gr.Ok)},function(e){Tr(n,Nr(e,u,c,k.none(),s),gr.Ignore)}):t===gr.Repair&&(i||o.each(function(e){e.repair(l.element,l.id,ve(n.getData(),function(e,n){return t=n,r=l.id,o=t,a=0,""===(i=r)||!(o.length<i.length)&&o.substr(a,a+i.length)===i;var t,r,o,i,a}).t,function(e){e.fold(function(e){Tr(n,Nr({issue:l,summaryLabel:f},u,c,k.some(e),s),gr.Repair)},function(){u.resolveCurrent(!1).fold(function(){u.scan().fold(function(){Tr(n,yr(u,s),gr.Ok)},function(e){Tr(n,Nr(e,u,c,k.none(),s),gr.Ignore)})},function(e){Tr(n,Nr(e,u,c,k.none(),s),gr.Ignore)})})})}))},onChange:function(n){o.each(function(e){e.onChange.each(function(e){return e(n,n.getData(),l)}),e.shouldDisableRepair.each(function(e){e(n.getData(),l)?(n.disable(gr.Repair),i=!0):(n.enable(gr.Repair),i=!1)})})},onCancel:function(){u.clear()}}};return c(l.id).fold(function(){return i(k.none(),k.none(),!0)},function(e){var n,r,t=(n=e,r=l,o.fold(function(){return n.ui.map(function(e){return e(r.id,r.element)})},function(t){return n.ui.map(function(e){var n=e(r.id,r.element);return{items:n.items.concat([Dr(t)]),initialData:n.initialData}})}));return i(k.some(e),t,e.shouldDisableRepair.bind(function(n){return t.map(function(e){return n(e.initialData,l)})}).getOr(!1))})},Ar=function(e){return e+"_checkbox"},Rr=function(e){return e+"_textinput"},Sr=function(e,n){var t=n.id,r=!0===e[Ar(t)],o=0<e[Rr(t)].length;return!r&&!o},Ir=function(e,n,t){var r=t.id,o=Ar(r),i=Rr(r);!0===n[o]?(e.disable(i),e.enable(gr.Repair)):(e.enable(i),0<n[i].length?(e.enable(gr.Repair),e.enable(o)):(e.enable(o),e.disable(gr.Repair)))},Er=function(e,n){var t,r=xr(Rr(n),ot((t="a11y.i1.repair.info",e?t+".decorativeAllowed":t+".decorativeNotAllowed")));return e?[kr(Ar(n),ot("a11y.i1.repair.checkboxlabel"),ot("a11y.i1.repair.checkboxtext")),r]:[r]},Or=function(e,n,t){var r,o,i=wn(e,"alt"),a=n?((r={})[Ar(t)]=!1,r):{},u=((o={})[Rr(t)]=i||"",o);return Ue(Ue({},u),a)},Cr=function(c,s){var l=x(k.none()),e=function(){var n,t,r,o,i,a,u,e=(n=function(e){return c.windowManager.open(e,{inline:"toolbar",ariaAttrs:!0})},t=s,a=Zn(i=c),u={H93:k.some({ui:k.some(function(e,n){var t;return{items:[br(e,ot("a11y.h93.repair.info"),[{text:"a11y.h93.repair.deduplicate.others",value:"others"},{text:"a11y.h93.repair.deduplicate.this",value:"this"},{text:"a11y.h93.repair.deduplicate.all",value:"all"}],ot)],initialData:(t={},t[e]="",t)}}),repair:function(e,n,t,r){i.undoManager.transact(function(){r(Xt(e,n,t,i))})},shouldDisableRepair:k.none(),onChange:k.none()}),I1:k.some({ui:k.some(function(e,n){return{items:Er(a,e),initialData:Or(n,a,e)}}),repair:function(e,n,t,r){i.undoManager.transact(function(){r(Zt(e,n,t,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",ot))})},shouldDisableRepair:a?k.some(Sr):k.none(),onChange:a?k.some(Ir):k.none()}),I2:k.some({ui:k.some(function(e,n){return{items:Er(a,e),initialData:Or(n,a,e)}}),repair:function(e,n,t,r){i.undoManager.transact(function(){r(Zt(e,n,t,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",ot))})},shouldDisableRepair:a?k.some(Sr):k.none(),onChange:a?k.some(Ir):k.none()}),T1:k.some({ui:k.some(function(e,n){var t;return{items:[xr(e,ot("a11y.t1.repair.info"))],initialData:(t={},t[e]="",t)}}),repair:function(e,n,t,r){i.undoManager.transact(function(){r(tr(e,n,t,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",ot))})},shouldDisableRepair:k.none(),onChange:k.none()}),T2:k.some({ui:k.some(function(e,n){var t;return{items:[xr(e,ot("a11y.t2.repair.info"))],initialData:(t={},t[e]="",t)}}),repair:function(e,n,t,r){i.undoManager.transact(function(){r(rr(e,n,t,"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate",ot))})},shouldDisableRepair:k.none(),onChange:k.none()}),T3:k.some({ui:k.some(function(e,n){var t,r=yt(n,"caption").fold(function(){return""},function(e){return e.dom().innerHTML});return{items:[xr(e,ot("a11y.t1.repair.info"))],initialData:(t={},t[e]=r,t)}}),repair:function(e,n,t,r){i.undoManager.transact(function(){r(tr(e,n,t,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",ot))})},shouldDisableRepair:k.none(),onChange:k.none()}),T4A:k.none(),T4B:k.some({ui:k.some(function(e,n){var t;return{items:[br(e,ot("a11y.t4b.repair.info"),[{text:"a11y.t4c.repair.header.row",value:"row"},{text:"a11y.t4c.repair.header.col",value:"col"}],ot)],initialData:(t={},t[e]="",t)}}),repair:function(e,n,t,r){i.undoManager.transact(function(){r(or(e,n,t))})},shouldDisableRepair:k.none(),onChange:k.none()}),T4C:k.some({ui:k.some(function(e,n){var t;return{items:[br(e,ot("a11y.t4c.repair.info"),[{text:"a11y.t4c.repair.scope.row",value:"row"},{text:"a11y.t4c.repair.scope.col",value:"col"},{text:"a11y.t4c.repair.scope.rowgroup",value:"rowgroup"},{text:"a11y.t4c.repair.scope.colgroup",value:"colgroup"}],ot)],initialData:(t={},t[e]="",t)}}),repair:function(e,n,t,r){i.undoManager.transact(function(){r(ir(e,n,t))})},shouldDisableRepair:k.none(),onChange:k.none()}),D1:k.some({ui:k.some(function(e,n){var t;return{items:[br(e,ot("a11y.d1.repair.info"),[{text:"a11y.d1.repair.block.h1",value:"h1"},{text:"a11y.d1.repair.block.h2",value:"h2"},{text:"a11y.d1.repair.block.h3",value:"h3"},{text:"a11y.d1.repair.block.h4",value:"h4"},{text:"a11y.d1.repair.block.h5",value:"h5"},{text:"a11y.d1.repair.block.h6",value:"h6"}],ot)],initialData:(t={},t[e]="",t)}}),repair:function(e,n,t,r){i.undoManager.transact(function(){r(zt(e,n,t))})},shouldDisableRepair:k.none(),onChange:k.none()}),D2:k.none(),D3:k.some({ui:k.none(),repair:function(e,n,t,r){i.undoManager.transact(function(){r(Yt(e))})},shouldDisableRepair:k.none(),onChange:k.none()})},r=function(e){return u.hasOwnProperty(e)?u[e]:k.none()},o=c,t.scan().fold(function(){return n(yr(t,o))},function(e){return n(Nr(e,t,r,k.none(),o))}));l.set(k.some(e))},n=function(){l.get().each(function(e){e.close(),s.clear()}),l.set(k.none())};return c.ui.registry.addButton("a11ycheck",{tooltip:ot("a11y.widget.title"),icon:"accessibility-check",onAction:e}),c.ui.registry.addMenuItem("a11ycheck",{icon:"accessibility-check",text:ot("a11y.widget.title"),onAction:e}),function(){l.get().fold(e,n)}},_r=function(n,e){if(w(tinymce,"4.3.13"))return b('The "a11ychecker" plugin requires at least 4.3.13 version of TinyMCE.'),function(){};var t,r,o,i=Lt(n),a=n.a11ychecker_css_url,u=a||e+"/css/annotations.css";return w(tinymce,"5.0.0")?(o=mr(r=n,i),r.addButton("a11ycheck",{tooltip:ot("a11y.widget.title"),icon:"a11y",onclick:o.toggleAuditing}),r.addMenuItem("a11ycheck",{context:"tools",icon:"a11y",text:ot("a11y.widget.title"),onclick:o.toggleAuditing}),r.on("ResizeWindow",function(){D.requestAnimationFrame(function(){o.positionDialog()})}),r.on("ScrollWindow",function(){o.positionDialog()}),r.on("ResizeEditor",function(){o.positionDialog()}),r.on("click",function(){o.stopAuditing()}),r.on("keydown",function(){o.stopAuditing()}),t=o.toggleAuditing):t=Cr(n,i),n.on("init",function(e){n.dom.loadCSS(u)}),n.on("remove",function(e){1===tinymce.editors.length&&Dt.removeStyles()}),{getReport:i.getReport,toggleaudit:t}};tinymce.PluginManager.requireLangPack("a11ychecker","ar,bg_BG,ca,cs,da,de,el,es,eu,fa,fi,fr_FR,he_IL,hr,hu_HU,id,it,ja,kk,ko_KR,nb_NO,nl,pl,pt_PT,pt_BR,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,zh_TW,zh_CN"),tinymce.PluginManager.add("a11ychecker",_r)}(window);