!function($){"use strict";var CosticFramework;(function(){function init(){CosticShortcuts(),setActiveMenuItem(),customToggleActions(),draggableElements(".ms-sortable",".ms-draggable","enable",!1),sortableLists(),$(".ms-quick-bar").length>0&&(quickBarToggle(),quickBarConfigure(),quickBarPopulate()),customScrollbar(),tooltipsInit(),resetPopperPositioning(),initRoundedProgress(),notesMemberAppend(),notesMemberRemove(),deletableItem(),addTaskBlockQB(),addTaskBlockApp(),addTask(),confirmTask(),taskComplete(),starRating(),formValidation(),emailCheckAll(),emailFlag(),initDatePickers()}function CosticShortcuts(){var quickBarItems=document.getElementsByClassName("ms-quick-bar-item");$("body").on("keyup",(function(e){27==e.keyCode&&quickBarReset(),e.altKey&&81==e.keyCode&&$(".ms-configure-qa").trigger("click"),e.altKey&&49==e.keyCode&&$(quickBarItems[0]).find("a:first-child").trigger("click"),e.altKey&&50==e.keyCode&&$(quickBarItems[1]).find("a:first-child").trigger("click"),e.altKey&&51==e.keyCode&&$(quickBarItems[2]).find("a:first-child").trigger("click"),e.altKey&&52==e.keyCode&&$(quickBarItems[3]).find("a:first-child").trigger("click"),e.altKey&&53==e.keyCode&&$(quickBarItems[4]).find("a:first-child").trigger("click"),e.altKey&&54==e.keyCode&&$(quickBarItems[5]).find("a:first-child").trigger("click")}))}function checkReffererProtocol(){return"http:"==location.protocol||"https:"==location.protocol}function storeToLocal(key,items){localStorage[key]=JSON.stringify(items)}function getFromLocal(key){return localStorage[key]?JSON.parse(localStorage[key]):[]}$(window).on("load",(function(){$("#preloader-wrap").addClass("loaded")}));var activeMenuItem=function($item){$item.addClass("active"),$item.parents(".collapse").prev().addClass("active"),$item.parents(".collapse").length&&$item.closest(".collapse").addClass("show"),$item.parent().children(".collapse").length&&$item.parent().children(".collapse").addClass("show")};function getDataFromSearch(str){var data={};return str.split("&").map((function(p){var a=t.split("=");a.length>1&&(data[a.shift()]=a.join("="))})),data}function setActiveMenuItem(){var p=location.pathname.split("/").slice(-1)[0].replace(/^\/|\/$/g,""),current=location.href.split("#")[0];$(".ms-main-aside .menu-item a",$("#ms-side-nav")).each((function(){var $this=$(this);if(""===p||"index.html"===p||"/"===p||"home"===p)-1!==$this.attr("href").indexOf("index.html")&&activeMenuItem($this);else{var href=$this.attr("href").split("#")[0],hh=href.split("?"),cc=current.split("?");if(hh.length<2)cc.length<2?href!=current&&-1===cc[0].indexOf(href+"/")||activeMenuItem($this):hh[0]!=cc[0]&&-1===cc[0].indexOf(href+"/")||activeMenuItem($this);else if(cc.length>2){if(cc[0]==hh[0]){var cd=getDataFromSearch(cc[1]),hd=getDataFromSearch(hh[1]),s=!0;for(const key in hd)if(hd.hasOwnProperty(key)&&!cd.hasOwnProperty(key)){s=!1;break}s&&activeMenuItem($this)}}else cc[0]}}))}function customToggleActions(){$(".ms-toggler").bind("click",(function(){var target=$(this).data("target"),toggleType;switch($(this).data("toggle")){case"slideLeft":$(target).toggleClass("ms-aside-open"),$(".ms-aside-overlay.ms-overlay-left").toggleClass("d-block"),$("body").toggleClass("ms-aside-left-open");break;case"slideRight":$(target).toggleClass("ms-aside-open"),$(".ms-aside-overlay.ms-overlay-right").toggleClass("d-block");break;case"slideDown":$(target).toggleClass("ms-slide-down");break;case"hideQuickBar":quickBarReset();break;default:return}}))}function draggableElements(elemToSort,elemToDrag,stateSort,stateDrag){$(elemToSort).sortable({scroll:!1,placeholder:"ui-state-highlight",start:function(e,ui){ui.placeholder.height(ui.item.height()),ui.placeholder.width(ui.item.width())}}),$(elemToSort).sortable(stateSort),$(elemToDrag).draggable({opacity:.75,connectToSortable:elemToSort,containment:"parent",revert:"invalid",disabled:stateDrag}),$(elemToSort).disableSelection()}function sortableLists(){$(".ms-sortable-list").sortable({opacity:.75,connectWith:".ms-sortable-list",placeholder:"ui-state-highlight",start:function(e,ui){ui.placeholder.height(ui.item.height())}}).disableSelection()}function quickBarToggle(){$(".ms-quick-bar-list").on("click",".ms-has-qa",(function(){0==isConfigureMode()&&($(".ms-quick-bar").addClass("ms-quick-bar-open"),$(".ms-quick-bar-title").text($(this).data("title")))}))}function isConfigureMode(){return $(".ms-quick-bar-list").hasClass("ms-qa-configure-mode")}function quickBarReset(){$(".ms-quick-bar").removeClass("ms-quick-bar-open"),$(".ms-quick-bar-item > a").removeClass("active show"),$(".ms-quick-bar-item > a").attr("aria-selected","false"),$(".ms-quick-bar > .tab-content .tab-pane").removeClass("active show")}function animateRoundedProgress(rpb){$(rpb).hasClass("animated")||($(rpb).css("stroke-dashoffset",358.141563-358.141563/100*$(rpb).attr("aria-valuenow")),$(rpb).addClass("animated"))}function initRoundedProgress(){var roundedProgress;$(".progress-cicle").each((function(){animateRoundedProgress(this)}))}function quickBarConfigure(){var stateSort,stateDrag;draggableElements(".ms-quick-bar-list",".ms-has-qa","disable",!0),$(".ms-configure-qa").on("click",(function(e){e.preventDefault(),$(".ms-quick-bar-item a").removeAttr("data-toggle"),quickBarReset(),$(".ms-quick-bar-list").toggleClass("ms-qa-configure-mode"),stateSort=$(".ms-quick-bar-list").hasClass("ms-qa-configure-mode")?"enable":"disable",stateDrag="disable"==stateSort,"disable"==stateSort&&($(".ms-quick-bar-item a").attr("data-toggle","tab"),quickBarSaveLocal()),draggableElements(".ms-quick-bar-list",".ms-has-qa",stateSort,stateDrag)}))}function quickBarSaveLocal(){var quickBarLayout;checkReffererProtocol()&&storeToLocal("quickbar_layout",$(".ms-quick-bar-list")[0].innerHTML)}function quickBarPopulate(){if(checkReffererProtocol()){var localQuickBar=getFromLocal("quickbar_layout");localQuickBar.length>0&&($(".ms-quick-bar-list")[0].innerHTML=localQuickBar)}}function customScrollbar(){if($(".ms-scrollable").length>0&&$(".ms-scrollable").each((function(){var ps=new PerfectScrollbar($(this)[0],{maxScrollbarLength:700,wheelPropagation:!0})})),$(".ms-aside-scrollable").length>0){var psAside=new PerfectScrollbar($(".ms-aside-scrollable")[0],{maxScrollbarLength:700,wheelPropagation:!0,wheelSpeed:.5});$(".ms-main-aside").on("click",".has-chevron",(function(){psAside.update()}))}}function tooltipsInit(){$("body").tooltip({selector:'[data-toggle="tooltip"]',trigger:"hover",template:'<div class="tooltip" role="tooltip"><div class="tooltip-inner"></div></div>'})}function resetPopperPositioning(){Popper.Defaults.modifiers.computeStyle.gpuAcceleration=!1}function notesMemberAppend(){$(".ms-members-list").on("click","a",(function(){var memberSrc=$(this).find("img").attr("src");$(this).closest(".ms-card-footer").prev().find(".ms-note-members").append('<li class="ms-deletable"> <img src="'+memberSrc+'" alt="member"> </li>')}))}function notesMemberRemove(){$(".ms-note-members").on("click",".ms-deletable",(function(){$(this).remove()}))}function deletableItem(){$("body").on("click",".ms-delete-trigger",(function(){$(this).closest(".ms-deletable").slideUp("slow",(function(){$(this).closest(".ms-deletable").remove()}))}))}function addTaskBlockQB(){$(".ms-add-task-block").on("submit",(function(e){e.preventDefault(),$(".ms-quickbar-container .ms-todo-list").prepend('<div class="ms-card ms-qa-card ms-deletable"> <div class="ms-card-header clearfix"><h6 class="ms-card-title">'+$("#task-block").val()+'</h6> <button data-toggle="tooltip" data-placement="left" title="Add a Task to this block" class="ms-add-task-to-block ms-btn-icon float-right"><i class="material-icons">add</i> </button> </div> <div class="ms-card-body"> <ul class="ms-list ms-task-block"> </ul></div><div class="ms-card-footer clearfix"><a href="#" class="text-disabled mr-2"> <i class="flaticon-archive"> </i> Archive </a><a href="#" class="text-disabled ms-delete-trigger float-right"><i class="flaticon-trash"> </i> Delete </a> </div> </div>')}))}function addTaskBlockApp(){$(".ms-add-task-block-2").on("submit",(function(e){e.preventDefault(),$(".ms-todo-list").prepend('<div class="col-xl-4 col-md-6 col-sm-12 ms-deletable"> <div class="ms-card"> <div class="ms-card-header clearfix"><h6 class="ms-card-title">'+$("#task-block-2").val()+'</h6> <button data-toggle="tooltip" data-placement="left" title="Add a Task to this block" class="ms-add-task-to-block ms-btn-icon float-right"><i class="material-icons">add</i> </button> </div> <div class="ms-card-body"> <ul class="ms-list ms-task-block"> </ul></div><div class="ms-card-footer clearfix"><a href="#" class="text-disabled mr-2"> <i class="flaticon-archive"> </i> Archive </a><a href="#" class="text-disabled ms-delete-trigger float-right"><i class="flaticon-trash"> </i> Delete </a> </div> </div> </div>')}))}function addTask(){$(".ms-todo-list").on("click",".ms-add-task-to-block",(function(){var taskBlock=$(this).parent().next().find(".ms-task-block");taskBlock.append('<li class="ms-list-item ms-to-do-task ms-deletable"><label class="ms-checkbox-wrap ms-todo-complete" for=""><input type="checkbox" name="" value=""><i class="ms-checkbox-check"></i></label><form class="ms-confirm-task-form"> <input type="text" class="ms-task-input ms-task-edit"/><button type="submit" class="close"><i class="material-icons fs-16 ms-confirm-trigger">check</i></button></form></li>'),taskBlock.find(".ms-task-edit").focus()}))}function confirmTask(){$(".ms-todo-list").on("submit",".ms-confirm-task-form",(function(e){e.preventDefault();var confirmBtn=$(this).find("i"),taskInput=$(this).find(".ms-task-input");confirmBtn.removeClass("material-icons fs-14 ms-confirm-trigger"),confirmBtn.addClass(""),confirmBtn.text(""),$(this).replaceWith("<span>"+taskInput.val()+'</span><button class="close"><i class="flaticon-trash ms-delete-trigger"> </i></button>')}))}function taskComplete(){$(".ms-todo-list").on("click",".ms-todo-complete",(function(){$(this).parent().toggleClass("task-complete")}))}function starRating(){$(".ms-star-rating").on("click",".ms-rating-item",(function(){$(this).prevAll().removeClass("rated"),$(this).addClass("rated"),$(this).nextAll().addClass("rated")}))}function formValidation(){window.addEventListener("load",(function(){var forms=document.getElementsByClassName("needs-validation"),validation=Array.prototype.filter.call(forms,(function(form){form.addEventListener("submit",(function(event){!1===form.checkValidity()&&(event.preventDefault(),event.stopPropagation()),form.classList.add("was-validated")}),!1)}))}),!1)}function emailCheckAll(){$(".ms-email-check-all").on("click",(function(){$(".ms-email input").not(this).prop("checked",this.checked)}))}function emailFlag(){$(".ms-email-content").on("click",".ms-pin-email",(function(){$(this).closest(".ms-email").toggleClass("pinned")}))}function initDatePickers(){$(".datepicker").each((function(){$(this).datepicker()}))}return{init:init}})().init()}(jQuery);