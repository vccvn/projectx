function SlugInput(selector){this.$el=$(selector),this.$check=this.$el.find('input[type="checkbox"]'),this.$input=this.$el.find("#"+this.$el.data("id")),this.$ajaxInput=$(this.$el.data("ajax-param-selectors")),this.$source=$("#"+this.$el.data("source-id")),this.getSlugInputName=this.$el.data("ajax-get-name"),this.checkSlugInputName=this.$el.data("ajax-check-name"),this.$message=null,this.isCustom=!1,this.sourceValue="",this.inputValue="",this.getSlugValue="",this.checkingValue="",this.message="",this.urls={get:this.$el.data("get-slug-url"),check:this.$el.data("check-slug-url")};var self=this;this.createMessageTag=function(){var id="input-"+this.$el.data("id")+"-message-alert";return $("#"+id).length?$("#"+id):(this.$el.after('<div class=" input-message-alert" id="'+id+'"></div>'),$("#"+id))},this.init=function(){this.$message=this.createMessageTag(),this.$check.on("change click",(function(){self.check()})),this.$source.length&&this.$source.on("change mouseup keyup",(function(){self.checkSource()})),this.$input.on("change mouseup keyup",(function(){if(!self.isCustom)return!1;self.checkSlug()})),this.check()},this.enable=function(){this.$input.prop("readonly",!1)},this.disable=function(){this.$input.prop("readonly",!0)},this.check=function(){this.$check.is(":checked")?(this.isCustom=!0,this.enable()):(this.isCustom=!1,this.disable(),this.getSlugValue="",this.checkSource(),this.message.length&&this.$message.html(""))},this.checkSource=function(){return!this.isCustom&&(self.$source.val()!=self.sourceValue?(self.sourceValue=self.$source.val(),setTimeout((function(){self.checkSource()}),200),!1):void(self.$source.val()!=self.getSlugValue&&(self.getSlugValue=self.$source.val(),this.getSlug(self.getSlugValue))))},this.getSlug=function(str){if(this.isCustom)return!1;var data=this.getFormData();data[this.getSlugInputName]=str,ajaxRequest(this.urls.get,"GET",data,(function(rs){if(rs.status){if(!self.isCustom){if(str!=self.getSlugValue)return self.getSlug(self.getSlugValue);self.$input.val(rs.data)}}else cl(rs.message)}))},this.checkSlug=function(){return!!this.isCustom&&(self.$input.val()!=self.checkingValue?(self.checkingValue=self.$input.val(),setTimeout((function(){self.checkSlug()}),200),!1):void(self.$input.val()!=self.inputValue&&(self.inputValue=self.$input.val(),this.checkSlugValue(self.inputValue))))},this.checkSlugValue=function(str){if(!this.isCustom)return!1;var data=this.getFormData();data[this.checkSlugInputName]=str,ajaxRequest(this.urls.check,"POST",data,(function(rs){if(self.showMessage(rs.message,rs.status),self.message=rs.message,self.isCustom&&str!=self.inputValue)return self.checkSlugValue(self.inputValue)}))},this.getFormData=function(){var data={};return this.$ajaxInput.length&&this.$ajaxInput.each((function(i,e){data[$(e).attr("name")]=$(e).val()})),data},this.showMessage=function(message,status){this.$message.removeClass("form-control-feedback").removeClass("text-danger").removeClass("text-success").addClass(status?"text-success":"text-danger").html(message)}}App.slugInput={list:{},add:function(selector){var $el=$(selector);if($el.length){let $select=new SlugInput($el[0]);$select.init(),this.list[$el.data("id")]=$select}},getTag:function(id){return id&&void 0!==this.list[id]?this.list[id]:null},getData:function(id){var tag=this.getTag(id);return tag?tag.getData():[]}},$((function(){var $cs=$(".crazy-slug");$cs.length&&$cs.each((function(i,el){App.slugInput.add(el)}))}));