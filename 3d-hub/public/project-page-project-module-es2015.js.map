{"version":3,"sources":["./src/app/_store/project/model.ts","./src/app/project-page/_store/index.ts","./src/app/project-page/header/header.component.ts","./src/app/project-page/header/header.component.html","./src/app/_3D/services/project-editor.service.ts","./src/app/project-page/project-routing.module.ts","./src/app/_store/project/index.ts","./src/app/project-page/workspace/workspace.component.ts","./src/app/project-page/workspace/workspace.component.html","./src/app/project-page/project.module.ts","./src/app/project-page/_store/effects.ts","./src/app/_store/project/table.ts","./src/app/project-page/_store/services.ts","./src/app/_store/project/service.ts","./src/app/project-page/_store/reducers.ts"],"names":[],"mappings":"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","file":"project-page-project-module-es2015.js","sourcesContent":["export enum EProjectStatus {\r\n    draft = 'draft',\r\n    published = 'published',\r\n}\r\n\r\n\r\nexport interface ProjectModel {\r\n\r\n    id: number,\r\n    name: string,\r\n    category_id?: number,\r\n    description?: string,\r\n    status?: string,\r\n    allow_custom?:boolean,\r\n    thumbnail?: string\r\n    renderer?: any\r\n    scene?:any\r\n    \r\n    composer?: {\r\n        [x: string]: any\r\n    }\r\n    \r\n    shadow?: any\r\n    camera?:any\r\n    control?:any\r\n    lights?: any[],\r\n    // objects\r\n    objects?: any[]\r\n    // objects\r\n    meshes?: any[]\r\n    [x: string]: any\r\n\r\n\r\n}\r\n","export * from './reducers';\r\n// export * from './actions';\r\nexport * from './effects';\r\n// export * from './selectors';\r\nexport * from './services';\r\n// export * from './item';\r\n// export * from './category';\r\n","import { Component, ChangeDetectorRef, ElementRef, ViewChild, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { AppEditorStorageService } from '@app/_3D/services/app-editor-storage.service';\r\nimport { getConfig } from '@app/_core/config';\r\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\r\nimport { Subject, Observable } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'app-header',\r\n    templateUrl: './header.component.html',\r\n    styleUrls: ['./header.component.scss'],\r\n})\r\nexport class HeaderComponent extends BaseComponent implements OnInit {\r\n    @ViewChild('inputElement', { static: false }) inputElement?: ElementRef;\r\n\r\n    @Output() clickSave = new EventEmitter<any>();\r\n\r\n    renderData$: Observable<Blob>;\r\n    renderLoading$: Observable<boolean>;\r\n\r\n    isVisible = false;\r\n    data: any;\r\n    percent = 0;\r\n    renderLoading = true;\r\n\r\n    downloadUrl: string = 'javascript:void(0);';\r\n    downloadAvailable: boolean = false;\r\n\r\n\r\n    mode: string = 'list';\r\n\r\n    isInited: boolean = false;\r\n    \r\n    \r\n    logo = getConfig('urls.logo_url');\r\n    link = getConfig('urls.logo_link');\r\n\r\n    constructor(\r\n        private storage: AppEditorStorageService,\r\n        private cd: ChangeDetectorRef\r\n    ) {\r\n        super();\r\n\r\n    }\r\n\r\n    initFirst() {\r\n        if (!this.isInited) {\r\n            this.storage.subcribe('project', (data) => {\r\n                if (data && data.download_source_url) {\r\n                    this.downloadAvailable = true;\r\n                    this.downloadUrl = data.download_source_url;\r\n                }\r\n            }, true);\r\n            this.storage.subcribe('editorMode', mode => {\r\n                this.mode = mode;\r\n                this.cd.detectChanges();\r\n            }, true);\r\n            // window['hdStorage'] = this.storage;\r\n            this.isInited = true;\r\n        }\r\n\r\n    }\r\n\r\n    download(event: Event) {\r\n        if (!this.downloadAvailable) {\r\n            event.preventDefault();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    save(event) {\r\n        // console.log(this.editor.data);\r\n        this.clickSave.emit(true);\r\n    }\r\n\r\n    handleOk(): void {\r\n        this.isVisible = false;\r\n    }\r\n\r\n    handleCancel(): void {\r\n        this.isVisible = false;\r\n    }\r\n\r\n    onClickUndo() {\r\n        // this.editor.historyManager.undo();\r\n    }\r\n    onClickRedo() {\r\n        // this.editor.historyManager.redo();\r\n    }\r\n}","<div class=\"group-first\">\r\n\t<a href=\"{link}\" target=\"_blank\">\r\n\t\t<img class=\"logo\" src=\"{{logo}}\" alt=\"Cretip logo\" />\r\n\t</a>\r\n\t\r\n\t<div class=\"group-center\">\r\n\t\t<button class=\"btn btn-ghost btn-icon\" nz-button nzType=\"text\" (click)=\"onClickUndo()\">\r\n\t\t\t<img src=\"/assets/icons/new-design/header/undo.svg\" />\r\n\t\t</button>\r\n\t\t<button class=\"btn btn-ghost btn-icon mr-auto\" nz-button nzType=\"text\" (click)=\"onClickRedo()\">\r\n\t\t\t<img src=\"/assets/icons/new-design/header/redo.svg\" />\r\n\t\t</button>\r\n\t\t<button class=\"btn btn-ghost btn-icon hidden invisble\" nz-button nzType=\"text\" (click)=\"save($event)\">\r\n\t\t\t<img src=\"/assets/icons/new-design/header/save.svg\" />\r\n\t\t\t<span>Save</span>\r\n\t\t</button>\r\n\t</div>\r\n\r\n\t\r\n</div>\r\n\r\n<div class=\"group-last\">\r\n\t\r\n\t<button class=\"btn btn-primary btn-icon\" nz-button nzType=\"text\" (click)=\"save($event)\">\r\n\t\t<img src=\"/assets/icons/new-design/header/save.svg\" />\r\n\t\t<span>Save</span>\r\n\t</button>\r\n","import { Injectable } from '@angular/core';\nimport ClientEditorEngine from '../engines/client-editor.engine';\nimport ProjectEditor from '../libs/project-editor';\nimport { AppEditorService } from './app-editor.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ProjectEditorService extends AppEditorService {\n    engineClass = ClientEditorEngine;\n    editorClass = ProjectEditor;\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { WorkspaceComponent } from './workspace/workspace.component';\nimport { HeaderComponent } from './header/header.component';\n\n\n\nexport const ENTRIES_COMPONENTS = [];\n\n\nexport const COMPONENTS = [\n  WorkspaceComponent,\n  HeaderComponent\n  \n];\n\nconst routes: Routes = [\n  {\n    path: '',\n    children: [\n      {\n        path: ':id/edit',\n        component: WorkspaceComponent,\n      },\n      {\n        path: ':id/create',\n        component: WorkspaceComponent,\n      },\n      {\n        path: ':id/update',\n        component: WorkspaceComponent,\n      },\n      {\n        path: '**',\n        redirectTo: '0/update',\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [RouterModule],\n})\nexport class ProjectRoutingModule { }\n","export * from './model';\r\nexport * from './service';\r\n","import { Component, NgZone, OnInit, ChangeDetectorRef, ViewEncapsulation, ElementRef, AfterViewInit, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, Router, NavigationEnd } from '@angular/router';\r\nimport { TransparentBase64Image } from '@app/_3D/libs/three.libs';\r\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\r\nimport { assignValue, assignWithout, copyByList, degreeToRadians, inArray, isBoolean, isEmpty, Str } from '@app/_core/helpers/utils';\r\nimport { MeshGeometryService } from '@app/_shared/components/panels/mesh-geometry/mesh-geometry.service';\r\nimport { PanelLightService } from '@app/_shared/components/panels/panel-light/panel-light.service';\r\nimport { PanelModelObjectService } from '@app/_shared/components/panels/panel-model-object/panel-model-object.service';\r\nimport { EditorToolbarService } from '@app/_shared/components/viewport/editor-toolbar/editor-toolbar.service';\r\nimport { VectorControlsService } from '@app/_shared/components/viewport/vector-controls/vector-controls.service';\r\nimport { ViewportService } from '@app/_shared/components/viewport/viewport.service';\r\nimport { AppEditorStorageService } from '@app/_3D/services/app-editor-storage.service';\r\nimport { ModalConfirmService } from '@app/_shared/services/modal-confirm.service';\r\nimport { CategoryService } from '@app/_store/category';\r\nimport { ItemService, ItemTableService } from '@app/_store/item';\r\nimport { ProjectModel, ProjectService } from '@app/_store/project';\r\nimport { getBlankAppData } from '@app/_3D/store/data.type';\r\nimport { TemplateModel, TemplateService } from '@app/_store/template';\r\nimport { ClientEditToolbarService } from '@app/_shared/components/viewport/client-edit-toolbar/client-edit-toolbar.service';\r\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\r\nimport { ProjectEditorService } from '@app/_3D/services/project-editor.service';\r\nimport { A } from '@app/_core/helpers/html-elements';\r\nimport { runTask } from '@app/_core/tasks';\r\nimport { getConfig } from '@app/_core/config';\r\n\r\nlet _id = 0;\r\n\r\n@Component({\r\n    selector: 'app-workspace',\r\n    templateUrl: './workspace.component.html',\r\n    styleUrls: ['../../../styles/design/_index.scss', './workspace.component.scss'],\r\n    encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class WorkspaceComponent extends BaseComponent implements OnInit, AfterViewInit, OnDestroy {\r\n    isInited: boolean = false;\r\n    id: number = 0;\r\n    mode: string = 'create';\r\n    editMode : string = 'update';\r\n    isLoading: boolean = true;\r\n    app: ProjectEditorService = null;\r\n    urlPath: string = null;\r\n    projects: ProjectModel[] = [];\r\n    templates: TemplateModel[] = [];\r\n    project: ProjectModel = null;\r\n    template: TemplateModel = null;\r\n    defaultThumbnail: string = TransparentBase64Image;\r\n    lockSidebar: boolean = false;\r\n    isLockEventListenner: boolean = true;\r\n    workspaceKey: string = \"projectWorkspace\";\r\n    subEventService: AppEditorEventService;\r\n    downloadBtn = A(\".download\", {target: \"_blank\", href: \"\", download: \"screenshot.png\"});\r\n\r\n    engineEvent: any = {\r\n        \"load.success\": e => e.tasks == 0 && this.hideLoading(),\r\n        \"load.fail\": e => e.tasks == 0 && this.hideLoading(),\r\n        \"object.load.starting\": () => this.showLoading(),\r\n        \"object.load.completed\": () => {\r\n            this.hideLoading()\r\n            runTask('loading.complete');\r\n        },\r\n        \"loadmore.progress\": e => runTask(\"loading.progress\", [e.percent])\r\n    };\r\n    appinit: (e) => any = e => {\r\n        this.app.engine.setControlEngine(this.vectorControls.engine);\r\n        this.app.editor.detachLight();\r\n    };\r\n\r\n    appBeforeInit: (e) => any = e => {\r\n        this.app.engine.on(this.engineEvent);\r\n    }\r\n\r\n    constructor(\r\n        public cd: ChangeDetectorRef, \r\n        public elemRef: ElementRef, \r\n        public activatedRoute: ActivatedRoute, \r\n        public router: Router, \r\n        public editor: ProjectEditorService, \r\n        public events: AppEditorEventService, \r\n        public storage: AppEditorStorageService, \r\n        public geoService: MeshGeometryService, \r\n        public toolbar: ClientEditToolbarService, \r\n        public confirmService: ModalConfirmService, \r\n        public panelModelService: PanelModelObjectService, \r\n        public panelLightService: PanelLightService, \r\n        public editorToolbar: EditorToolbarService, \r\n        public viewportService: ViewportService, \r\n        public vectorControls: VectorControlsService, \r\n        public categoryService: CategoryService, \r\n        public itemService: ItemService, \r\n        public projectService: ProjectService, \r\n        public templateService: TemplateService\r\n        \r\n    ) {\r\n        super();\r\n        this.subEventService = this.events.sub(this.workspaceKey);\r\n        this.editor.events = this.subEventService;\r\n        this.app = this.editor;\r\n        this.toolbar = toolbar.sub(this.workspaceKey);\r\n        this.viewportService = viewportService.sub(this.workspaceKey);\r\n        this.vectorControls = vectorControls.sub(this.workspaceKey);\r\n        this.editorToolbar = editorToolbar.sub(this.workspaceKey)\r\n\r\n\r\n        \r\n        \r\n        // window['projectWorkspace'] = this;\r\n    }\r\n\r\n    initOnce() {\r\n        // this.events = this.events.sub(this.workspaceKey);\r\n        this.moduleKey = this.workspaceKey;\r\n        this.storage.assign('project', this.project, project => this.project = project);\r\n        this.storage.assign('mode', this.mode, mode => this.mode = mode);\r\n        this.storage.assign('editMode', this.editMode, mode => this.editMode = mode);\r\n        // window['wpStorage'] = this.storage;\r\n\r\n\r\n        this.viewportService.emit({\r\n            type: 'app.set',\r\n            app: this.app\r\n        }, true)\r\n        // quan ly khac\r\n\r\n        this.router.events.subscribe((val) => {\r\n            // see also \r\n            // console.log(val instanceof NavigationEnd)\r\n\r\n        });\r\n\r\n        \r\n        this.registerEventService(this.app, {\r\n            \"editor.update.mesh.props\": e => this.geoService.updateProps(e.data),\r\n            \"editor.update.model.props\": e => this.panelModelService.updateProps(e.data),\r\n            \"editor.update.light.props\": e => this.panelLightService.updateProps(e.data),\r\n            \"editor.update.light.props.target\": e => this.panelLightService.updateTargetProps(e.data),\r\n            \"editor.attach:object\": e => this.toolbar.show(\"object\", e.secret_key),\r\n            \"editor.attach:mesh\": e => this.toolbar.show(\"mesh\", e.secret_key),\r\n            \"editor.attach:light\": e => this.toolbar.show(\"light\", e.secret_key),\r\n            \"editor.delete:light\": e => this.doAction({ action: \"delete\", type: \"light\", secret_key: e.secret_key }),\r\n            \"editor.delete:object\": e => this.doAction({ action: \"delete\", type: \"object\", secret_key: e.secret_key }),\r\n            \"editor.detach\": e => this.onDetach(),\r\n            \"light.showform\": e => this.showLight(e.data),\r\n            beforeinit: this.appBeforeInit,\r\n            init: this.appinit\r\n\r\n        })\r\n        this.registerEventService(this.events, {\r\n            \"modelitem.drop.confirm\": e => this.dropModelItem(e.data),\r\n            \"template.import\": e => this.importTemplate(e.template),\r\n            \"app.loading.show\": e => this.showLoading(),\r\n            \"app.loading.hide\": e => this.hideLoading()\r\n        })\r\n\r\n        this.registerEventService(this.toolbar, {\r\n            \"mode.select\": e => this.app.emit({ type: \"toolbar.change:mode\", mode: e.mode }),\r\n            \"action\": e => this.doAction(e.data)\r\n        });\r\n\r\n\r\n        this.registerEventService(document, {\r\n            'pointerup': e => this.events.emit(e),\r\n            'pointermove': e => this.events.emit(e)\r\n        })\r\n\r\n        this.registerEventService(document, {\r\n            'pointerup': e => this.subEventService.emit(e),\r\n            'pointermove': e => this.subEventService.emit(e)\r\n        });\r\n\r\n\r\n        // this.checkDemoData()\r\n    }\r\n\r\n    onInit() {\r\n        this.isLockEventListenner = false;\r\n        this.activeEventServiceRegistered(this.app);\r\n        // this.activeEventServiceRegistered(this.app.engine);\r\n        this.activeEventServiceRegistered(this.events);\r\n        this.activeEventServiceRegistered(this.toolbar);\r\n        this.activeEventServiceRegistered(document);\r\n\r\n        if (this.app.engine) {\r\n            this.app.engine.on(this.engineEvent);\r\n        }\r\n        this.vectorControls.emit({\r\n            type: \"show\",\r\n            value: true\r\n        }, null, true);\r\n\r\n        this.editorToolbar.show({\r\n            saveView: e => this.app.saveCurrentCameraPosition(),\r\n            saveThumbnail: e => this.saveThumbnail(),\r\n            exportImage: e => this.exportImage()\r\n        })\r\n\r\n\r\n        this.preload();\r\n\r\n\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    onDestroy() {\r\n        this.isLockEventListenner = true;\r\n        this.deactiveEventServiceRegistered(this.app);\r\n        // this.activeEventServiceRegistered(this.app.engine);\r\n        this.deactiveEventServiceRegistered(this.events);\r\n        this.deactiveEventServiceRegistered(this.toolbar);\r\n        this.deactiveEventServiceRegistered(document);\r\n\r\n        this.vectorControls.emit({\r\n            type: \"show\",\r\n            value: false\r\n        }, null, true);\r\n\r\n        this.editorToolbar.hide();\r\n\r\n\r\n        if (this.app.engine) {\r\n            this.app.engine.off(this.engineEvent);\r\n        }\r\n    }\r\n\r\n    showLoading() {\r\n        if (!this.isFocus) return false;\r\n        this.viewportService.emit(\"show:loading\", null, true);\r\n        this.events.emit(\"show:sidebar-lock\");\r\n    }\r\n    hideLoading() {\r\n        if (!this.isFocus) return false;\r\n        this.viewportService.emit(\"hide:loading\", true, true);\r\n        this.events.emit(\"hide:sidebar-lock\");\r\n    }\r\n\r\n    initUpdate() {\r\n        if (!this.isFocus) return false;\r\n        this.id = +this.activatedRoute.snapshot.paramMap.get(\"id\");\r\n        if (this.id > 0) {\r\n            this.loadProject(this.id);\r\n\r\n        }\r\n        else {\r\n            this.storage.editorMode = 'notfound';\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n    initCreate() {\r\n        if (!this.isFocus) return false;\r\n        this.storage.mode = 'create';\r\n        let data = getBlankAppData();\r\n        this.setProjectData(data);\r\n        // console.log(\"create\", data);\r\n        this.isLoading = false;\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    preload() {\r\n        if (!this.isFocus) return false;\r\n        this.secret_id = this.activatedRoute.snapshot.paramMap.get(\"id\");\r\n        if (this.secret_id == getConfig('data.project.secret_id')) {\r\n            let data = getConfig('data.project');\r\n            this.storage.project = data;\r\n            this.lazyLoadProject(data.data);\r\n            this.isLoading = false;\r\n            this.storage.mode = 'update';\r\n            this.storage.editMode = getConfig('mode')\r\n            this.cd.detectChanges();\r\n\r\n        } else {\r\n            this.storage.mode = 'notfound';\r\n            this.isLoading = false;\r\n        }\r\n\r\n    }\r\n\r\n    importTemplate(template: TemplateModel) {\r\n        if (!this.isFocus) return false;\r\n        this.showLoading();\r\n        setTimeout(() => this.app.importTemplate(template.data), 100);\r\n\r\n    }\r\n\r\n    clickSave(event) {\r\n        if (!this.isFocus) return false;\r\n        if (this.mode == \"update\") {\r\n            this.project.data = this.app.data;\r\n            this.projectService.update(this.project).subscribe(rs => {\r\n                // lam gi do\r\n            });\r\n        } else if (this.mode == \"create\") {\r\n            this.project.data = this.app.data;\r\n            this.projectService.create(this.project).subscribe(rs => {\r\n                this.id = rs.data.id;\r\n                this.mode = \"update\";\r\n                this.app.data.id = this.id;\r\n\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    loadProject(id: number) {\r\n        if (!this.isFocus) return false;\r\n        this.showLoading();\r\n        // var project = this.projectTable.find(id);\r\n        // if (project && !isEmpty(project)) {\r\n        //     this.storage.editorMode = 'update';\r\n        //     this.storage.project = project;\r\n        //     this.isLoading = false;\r\n        //     this.hideLoading();\r\n        //     this.lazyLoadProject(project as ProjectModel);\r\n        //     this.cd.detectChanges();\r\n        // } else {\r\n            this.projectService.get(this.id).subscribe(data => {\r\n                this.storage.project = data;\r\n                this.isLoading = false;\r\n                this.hideLoading();\r\n                this.lazyLoadProject(data);\r\n                this.storage.mode = 'update';\r\n                this.cd.detectChanges();\r\n            }, error => {\r\n                this.storage.mode = 'notfound';\r\n                this.hideLoading();\r\n                this.cd.detectChanges();\r\n            });\r\n        // }\r\n\r\n    }\r\n\r\n    lazyLoadProject(project) {\r\n        let preData = assignWithout({}, project, ['objects', 'meshes', 'models', 'scene']);\r\n        preData.scene = assignWithout({}, project.scene, ['foregrounds', 'background']);\r\n        this.setProjectData(preData);\r\n        runTask('loading.progress', [20]);\r\n        setTimeout(() => {\r\n            if (!project.objects || !project.objects.length) {\r\n                setTimeout(() => {\r\n                    runTask('loading.progress', [50]);\r\n                    setTimeout(() => {\r\n                        runTask('loading.progress', [100]);\r\n                        setTimeout(() => {\r\n                            runTask('loading.complete', [project]);\r\n                        }, 1000);\r\n                    }, 1000);\r\n                }, 500);\r\n            }\r\n            else {\r\n                this.showLoading();\r\n            }\r\n\r\n        }, 11);\r\n        setTimeout(() => {\r\n            this.setProjectData(project);\r\n        }, 25);\r\n    }\r\n\r\n\r\n\r\n\r\n    setProjectData(data: ProjectModel) {\r\n        if (!this.isFocus) return false;\r\n        this.app.setProject(data);\r\n    }\r\n\r\n\r\n    saveThumbnail() {\r\n        if (!this.isFocus) return false;\r\n        this.app.editor.unselect();\r\n        this.showLoading();\r\n        setTimeout(() => {\r\n            this.app.capture(image => {\r\n                this.project.thumbnail = image;\r\n                this.projectService.updateThumbnail({\r\n                    id: this.project.id,\r\n                    thumbnail: this.project.thumbnail\r\n                } as ProjectModel).subscribe(rs => {\r\n                    this.hideLoading();\r\n                }, e => {\r\n                    this.hideLoading();\r\n                });\r\n            });\r\n\r\n        }, 1000);\r\n    }\r\n\r\n    \r\n    exportImage() {\r\n        if (!this.isFocus) return false;\r\n        this.app.editor.unselect();\r\n        this.showLoading();\r\n        setTimeout(() => {\r\n            this.app.capture(image => {\r\n                this.downloadBtn.attr(\"href\", image); \r\n                this.downloadBtn.el.click();\r\n                this.hideLoading();\r\n            });\r\n            \r\n        }, 2000);\r\n        \r\n    }\r\n\r\n    \r\n\r\n\r\n\r\n    onMeshAttach(data) {\r\n        if (!this.isFocus) return false;\r\n        this.geoService.open(data, e => {\r\n            let d: any = {};\r\n            if (inArray(['props', 'geometry', 'material'], e.key)) {\r\n                d[e.key] = e.data[e.key];\r\n                switch (e.key) {\r\n                    case \"props\":\r\n\r\n                        break;\r\n                    case \"geometry\":\r\n\r\n                        break;\r\n\r\n                    case \"material\":\r\n\r\n                        break;\r\n\r\n\r\n                    default:\r\n                        break;\r\n                }\r\n                this.events.emit({\r\n                    type: \"mesh.setting.update\",\r\n                    secret_key: data.secret_key,\r\n                    data: d\r\n                });\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    closeAllPanel() {\r\n        if (!this.isFocus) return false;\r\n        // this.toolbar.hide();\r\n        this.geoService.close();\r\n        this.panelModelService.close();\r\n        this.panelLightService.close();\r\n    }\r\n\r\n    onDetach() {\r\n        if (!this.isFocus) return false;\r\n        this.toolbar.hide();\r\n        this.closeAllPanel();\r\n\r\n    }\r\n\r\n    showLight(data) {\r\n        if (!this.isFocus) return false;\r\n        this.panelLightService.open(data, e => {\r\n            let update: any = {};\r\n            // if(e.type==\"params\"){\r\n            update[e.type] = {};\r\n            update[e.type][e.name] = e.value;\r\n\r\n            // }\r\n            this.app.updateLightDataAndScene(e.secret_key, update);\r\n        })\r\n    }\r\n\r\n    doAction(data) {\r\n        if (!this.isFocus) return false;\r\n        if (data.action == \"delete\") {\r\n            var title = inArray(['object', 'mesh'], data.type) ? \"Are you sure delete this object?\" : \"Are you sure delete this light?\";\r\n            this.confirmService.showDeleteConfirm(title, () => {\r\n                if (inArray(['object', 'mesh'], data.type)) {\r\n                    this.app.emit({\r\n                        type: \"toolbar.delete:object\",\r\n                        secret_key: data.secret_key,\r\n                        success: () => this.onDetach()\r\n                    })\r\n                }\r\n                else if (data.type == \"light\") {\r\n                    this.app.deleteLight(data.secret_key, () => this.onDetach());\r\n                }\r\n            })\r\n        }\r\n        else if (data.action == \"edit\") {\r\n            let ed = this.app.getEditObjectData(data.secret_key);\r\n            if (ed != null) {\r\n                if (ed.type == \"mesh\") {\r\n                    this.closeAllPanel();\r\n                    this.geoService.open(ed, e => {\r\n                        let d: any = {};\r\n                        if (inArray(['props', 'geometry', 'material'], e.key)) {\r\n                            d[e.key] = e.data[e.key];\r\n                            switch (e.key) {\r\n                                case \"props\":\r\n\r\n                                    break;\r\n                                case \"geometry\":\r\n\r\n                                    break;\r\n\r\n                                case \"material\":\r\n\r\n                                    break;\r\n\r\n\r\n                                default:\r\n                                    break;\r\n                            }\r\n                            this.events.emit({\r\n                                type: \"mesh.setting.update\",\r\n                                secret_key: data.secret_key,\r\n                                data: d\r\n                            });\r\n                        }\r\n\r\n                    });\r\n                } else if (ed.type == \"model\") {\r\n                    this.closeAllPanel();\r\n                    let obj = this.app.engine.getObject(data.secret_key).object;\r\n                    ed.object = obj;\r\n\r\n                    this.panelModelService.open(ed, e => {\r\n                        if (e.type == \"material\") {\r\n                            this.app.updateModelMeshMaterial(e.secret_key, e.name, e.data);\r\n                        }\r\n                        else if (e.type == \"props\") {\r\n                            let props: any = {};\r\n                            props[e.key] = e.data[e.key];\r\n                            this.app.updateObjectSettingDataAndScene(e.secret_key, { props: props }, { props: true })\r\n                        }\r\n\r\n                    });\r\n                }\r\n                else if (ed.type == \"light\") {\r\n                    this.showLight(ed.data);\r\n                }\r\n            }\r\n        }\r\n        else if (data.action == 'download') {\r\n            let model = this.app.getObject(data.secret_key);\r\n\r\n\r\n            if (model.type == \"model\" && model.data.download_source_url != \"\") {\r\n                const link = document.createElement('a');\r\n                link.setAttribute('target', '_blank');\r\n                link.setAttribute('href', model.data.download_source_url);\r\n                link.setAttribute('download', model.data.name + \".zip\");\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                link.remove();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    dropModelItem(data) {\r\n        if (!this.isFocus) return false;\r\n        this.confirmService.showConfirm({\r\n            title: \"Drop Item confirm\",\r\n            content: \"Item's size is bigger than size of Scene. Do you want to continue?\"\r\n        }, d => {\r\n            this.showLoading();\r\n            this.events.emit({\r\n                type: 'item.dropped',\r\n                item: data.item,\r\n                success: (dat) => {\r\n                    this.events.emit('viewport.droppable.hide');\r\n                    var size = data.item.size;\r\n                    this.app.updateSceneSizeAndFloorAndGridNyChildren(2);\r\n                    // this.app.updateSceneSizeSetting()\r\n                    if (this.app.data.scene.floor.above) {\r\n                        data.position.y = this.app.data.scene.floor.props.position.y + size.y / 2;\r\n                    } else {\r\n                        data.position.y = size.y / 2;\r\n                    }\r\n                    this.app.updateObjectSettingDataAndScene(dat.secret_key, {\r\n                        props: {\r\n                            position: data.position\r\n                        }\r\n                    }, { props: true })\r\n\r\n\r\n                    var sceneData = this.app.getRealSceneSize();\r\n                    var x = sceneData.size.x;\r\n                    var y = sceneData.size.y;\r\n                    var z = sceneData.size.z;\r\n                    var fov = this.app.engine.camera.fov;\r\n                    var tan = Math.tan(degreeToRadians(fov / 2));\r\n                    var ds = (z / 2) + ((x > y ? x : y) / 2) / tan;\r\n                    var dz = ds * 1.5;\r\n                    var far = this.app.engine.camera.far > dz ? this.app.engine.camera.far : dz;\r\n                    var near = this.app.engine.camera.near;\r\n                    if (z >= 50) {\r\n                        near = 1;\r\n                    }\r\n                    else if (z > 20) {\r\n                        near = 0.5;\r\n                    }\r\n                    else if (z > 10) {\r\n                        near = 0.1;\r\n                    }\r\n                    if (near < this.app.engine.camera.near) near = this.app.engine.camera.near;\r\n\r\n\r\n                    this.app.updateCameraSetting({\r\n                        far: far,\r\n                        near: near,\r\n                        position: {\r\n                            z: ds * 1.5,\r\n                            y: y / 2,\r\n                            x: 0\r\n                        },\r\n                        settings: {\r\n                            position: {\r\n                                type: \"custom\",\r\n                                custom: {\r\n                                    z: ds * 1.5,\r\n                                    y: y / 2,\r\n                                    x: 0\r\n                                }\r\n                            }\r\n                        }\r\n                    }, true);\r\n\r\n                }\r\n            })\r\n        }, () => {\r\n            this.events.emit('viewport.droppable.hide');\r\n        });\r\n    }\r\n\r\n    nzCollapsedChange(event) {\r\n        if (!this.isFocus) return false;\r\n        this.app.updateCanvasSize();\r\n    }\r\n\r\n\r\n    ngAfterViewInit(): void {\r\n        if (!this.isFocus) return;\r\n        this.app.updateCanvasSize();\r\n    }\r\n\r\n}\r\n","<ng-container *ngIf=\"__show__; then thenTemplate; else elseTemplate\"></ng-container>\r\n<ng-template #thenTemplate>\r\n\r\n    <nz-layout>\r\n        <nz-header>\r\n            <app-header (clickSave)=\"clickSave($event)\"></app-header>\r\n        </nz-header>\r\n        <nz-content>\r\n            <ng-container *ngIf=\"isLoading; then loadingTemplate; else editorTemplate\"></ng-container>\r\n            <ng-template #loadingTemplate>\r\n                <div class=\"alert\">\r\n                    <h3>Vui lòng chờ giây lát</h3>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template #editorTemplate>\r\n                <ng-container *ngIf=\"mode=='notfound'; then notFoundTemplate; else editorTemplate\"></ng-container>\r\n                <ng-template #notFoundTemplate>\r\n                    <div class=\"alert not-found\">\r\n                        template Not Found\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template #editorTemplate>\r\n                    <nz-layout class=\"inner-layout\">\r\n                        <nz-sider nzWidth=\"380px\" nzTheme=\"dark\" (nzCollapsedChange)=\"nzCollapsedChange($event)\">\r\n                            <app-project-sidebar></app-project-sidebar>\r\n                        </nz-sider>\r\n                        <nz-content class=\"nz-layout-content\">\r\n                            <section id=\"content\">\r\n                                <app-client-viewport></app-client-viewport>\r\n                            </section>\r\n                        </nz-content>\r\n                    </nz-layout>\r\n                </ng-template>\r\n            </ng-template>\r\n        </nz-content>\r\n    </nz-layout>\r\n    <dragging-item></dragging-item>\r\n    <dragging-geometry></dragging-geometry>\r\n    <modal-image-library [app]=\"app\"></modal-image-library>\r\n    <panel-mesh-geometry></panel-mesh-geometry>\r\n    <panel-model-object></panel-model-object>\r\n    <panel-light></panel-light>\r\n    <app-panel-mesh-customize></app-panel-mesh-customize>\r\n    <app-sidebar-lock></app-sidebar-lock>\r\n\r\n</ng-template>\r\n<ng-template #elseTemplate>\r\n\r\n</ng-template>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\n\nimport { SharedModule } from '../_shared/shared.module';\nimport { AppUIModule } from '../app-ui.module';\nimport { AuthModule } from '../auth/auth.module';\n\nimport { ProjectRoutingModule, COMPONENTS, ENTRIES_COMPONENTS } from './project-routing.module';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport { reducers, effects, services } from './_store';\nimport { NzCollapseModule } from 'ng-zorro-antd/collapse';\n\n@NgModule({\n  declarations: [...COMPONENTS, ...ENTRIES_COMPONENTS],\n  imports: [\n    DragDropModule,\n    AuthModule,\n    CommonModule,\n    AppUIModule,\n    SharedModule,\n    ProjectRoutingModule,\n    StoreModule.forFeature('projectStore', reducers),\n    EffectsModule.forFeature(effects),\n    NzCollapseModule,\n  ],\n  entryComponents: ENTRIES_COMPONENTS,\n  providers: [...services],\n})\nexport class ProjectModule {}\n","// import { CollectionEffects } from './collection/effects';\r\n\r\nexport const effects: any[] = [\r\n  // CollectionEffects,\r\n  \r\n];\r\n","import { Injectable } from '@angular/core';\nimport { DbTableColumns } from '@app/_core/helpers/local-db';\nimport { LostDbTableService } from '@app/_core/services/lost-db-table.service';\nimport { LostDbService } from '@app/_core/services/lost-db.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ProjectTableService extends LostDbTableService {\n    name: string = 'projects';\n    columns: DbTableColumns = {\n        id: {\n            type: \"number\",\n            autoIncrement: true\n        },\n        name: {\n            type: \"string\",\n            required: true,\n        },\n        category_id: {\n            type: \"number\",\n            defVal: 0\n        },\n        description: {\n            type: \"string\",\n            defVal: \"\"\n        },\n        status: {\n            type: \"string\",\n            defVal: \"draft\"\n        },\n        allow_custom: {\n            type: \"boolean\",\n            defVal: false\n        },\n        thumbnail: {\n            type: \"string\",\n            defVal: \"\"\n        },\n        renderer: {\n            type: \"object\",\n            defVal: {}\n        },\n        scene: {\n            type: \"object\",\n            defVal: {}\n        },\n\n        composer: {\n            type: \"object\",\n            defVal: {}\n        },\n        shadow: {\n            type: \"object\",\n            defVal: {}\n        },\n        camera: {\n            type: \"object\",\n            defVal: {}\n        },\n        control: {\n            type: \"object\",\n            defVal: {}\n        },\n        lights: {\n            type: \"array\",\n            defVal: []\n        },\n        // objects\n        objects: {\n            type: \"array\",\n            defVal: []\n        },\n        // objects\n        meshes: {\n            type: \"array\",\n            defVal: []\n        }\n\n    }\n    constructor(private dbService: LostDbService) {\n        super(dbService);\n        this.init();\n    }\n}\n","import { CategoryService } from \"@app/_store/category\";\r\nimport { ProjectService } from \"@app/_store/project\";\r\nimport { ProjectTableService } from \"@app/_store/project/table\";\r\n\r\nexport const services = [\r\n  ProjectService,\r\n  CategoryService,\r\n  ProjectTableService,\r\n];\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@app/_core/services/http.service';\r\nimport { Observable } from 'rxjs';\r\nimport { CategoryResultsModel } from '../category';\r\n\r\nimport { ProjectModel } from './model';\r\nimport { ProjectResultModel, ProjectResultsModel } from './results.model';\r\n\r\nconst API_CUSTOMERS_URL = 'projects';\r\n\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ProjectService {\r\n    results: ProjectResultsModel;\r\n\r\n    constructor(private httpService: HttpService) { }\r\n\r\n\r\n    getAll(params: {}): Observable<ProjectResultsModel> {\r\n        return this.httpService.get(API_CUSTOMERS_URL + \"/list\", params);\r\n    }\r\n\r\n    // get(key): Observable<ProjectResultModel> {\r\n    //   return this.httpService.get(`${API_CUSTOMERS_URL}/${key}.json`);\r\n    // }\r\n\r\n    get(key): Observable<ProjectModel> {\r\n        return this.httpService.get(`${API_CUSTOMERS_URL}/detail/${key}`);\r\n    }\r\n\r\n    getByCategories(params: {}): Observable<CategoryResultsModel> {\r\n        return this.httpService.get(API_CUSTOMERS_URL + \"/categories\", params);\r\n    }\r\n    create(model: ProjectModel): Observable<ProjectResultModel> {\r\n        return this.httpService.post(API_CUSTOMERS_URL + \"/create\", model);\r\n    }\r\n\r\n    update(model: ProjectModel): Observable<ProjectResultModel> {\r\n        const key = model.id;\r\n        // return this.httpService.patch(`${API_CUSTOMERS_URL}/${key}.json`, model);\r\n        // return this.httpService.patch(`${API_CUSTOMERS_URL}/actions.json`, model);\r\n        return this.httpService.put(`${API_CUSTOMERS_URL}/update/${key}`, model);\r\n    }\r\n\r\n\r\n    updateThumbnail(model: ProjectModel): Observable<ProjectResultModel> {\r\n        const key = model.id;\r\n        // return this.httpService.patch(`${API_CUSTOMERS_URL}/${key}.json`, model);\r\n        // return this.httpService.patch(`${API_CUSTOMERS_URL}/actions.json`, model);\r\n        return this.httpService.put(`${API_CUSTOMERS_URL}/thumbnail/${key}`, model);\r\n    }\r\n\r\n\r\n\r\n    delete(key): Observable<ProjectResultModel> {\r\n        // return this.httpService.delete(`${API_CUSTOMERS_URL}/${key}`);\r\n        return this.httpService.delete(`${API_CUSTOMERS_URL}/delete/${key}`);\r\n    }\r\n\r\n    search(query: { tag?: string; key?: string; collectionCode?: string }) {\r\n        return this.httpService.get(`${API_CUSTOMERS_URL}/list`, query);\r\n    }\r\n\r\n\r\n    searchNounProject(query: { tag?: string; key?: string; collectionCode?: string }) {\r\n        return this.httpService.get(`${API_CUSTOMERS_URL}/search/nounproject`, query);\r\n    }\r\n\r\n    render(params) {\r\n        return this.httpService.download(`projects/render`, params);\r\n    }\r\n\r\n    getProjectData(url) {\r\n        return this.httpService.getOut(url);\r\n    }\r\n\r\n    useProject(ProjectId): Observable<ProjectResultModel> {\r\n        return this.httpService.post(`${API_CUSTOMERS_URL}/${ProjectId}/use`, {}, false);\r\n    }\r\n}\r\n","import { ActionReducerMap, createFeatureSelector } from '@ngrx/store';\r\nexport interface ItemState {\r\n}\r\n\r\nexport const reducers: ActionReducerMap<ItemState> = {\r\n};\r\n\r\nexport const selectContainerState = createFeatureSelector<ItemState>('itemStore');\r\n"],"sourceRoot":"webpack:///"}