{"version":3,"sources":["webpack:///src/app/_shared/components/inputs/inp-select/inp-select.component.ts","webpack:///src/app/_shared/components/inputs/inp-select/inp-select.component.html","webpack:///src/app/_shared/components/input-groups/base-inp-group/base-inp-group.component.ts","webpack:///src/app/_core/interceptors/error.interceptor.ts","webpack:///src/app/auth/store/auth.actions.ts","webpack:///src/app/_shared/components/viewport/object-toolbar/object-toolbar.component.ts","webpack:///src/app/_shared/components/viewport/object-toolbar/object-toolbar.component.html","webpack:///src/app/_shared/components/transparent-img/transparent-img.component.ts","webpack:///src/app/_shared/components/transparent-img/transparent-img.component.html","webpack:///src/app/_core/services/local-storage.service.ts","webpack:///src/app/_3D/engines/editor.engine.ts","webpack:///src/app/_3D/services/app-storage.service.ts","webpack:///src/app/_store/images/model.ts","webpack:///src/app/_shared/pipes/array-reverse.pipe.ts","webpack:///src/app/_shared/components/modals/modal-export-image/modal-export-image.component.ts","webpack:///src/app/_shared/components/modals/modal-export-image/modal-export-image.component.html","webpack:///src/app/_shared/components/inputs/inp-color/inp-color.component.ts","webpack:///src/app/_shared/components/inputs/inp-color/inp-color.component.html","webpack:///src/app/_3D/store/data.type.ts","webpack:///src/app/_core/config.ts","webpack:///src/app/_shared/components/input-groups/inp-textarea-group/inp-textarea-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-textarea-group/inp-textarea-group.component.html","webpack:///src/app/_shared/components/inputs/inp-switch/inp-switch.component.ts","webpack:///src/app/_shared/components/inputs/inp-switch/inp-switch.component.html","webpack:///src/app/_shared/components/panels/mesh-geometry/mesh-geometry-tab-geometry/mesh-geometry-tab-geometry.component.ts","webpack:///src/app/_shared/components/panels/mesh-geometry/mesh-geometry-tab-geometry/mesh-geometry-tab-geometry.component.html","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-model/model-search/model-search.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-model/model-search/model-search.component.html","webpack:///src/app/_shared/components/editor/sidebar/sidebar-lock/sidebar-lock.service.ts","webpack:///src/app/_3D/threejs/jsm/controls/FlyControls.js","webpack:///src/app/_shared/components/editor/drag-drop/droppable-area/droppable-area.component.ts","webpack:///src/app/_shared/components/editor/drag-drop/droppable-area/droppable-area.component.html","webpack:///src/app/_shared/components/input-groups/inp-radio-group/inp-radio-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-radio-group/inp-radio-group.component.html","webpack:///src/app/_3D/services/app-3d.service.ts","webpack:///src/app/_shared/components/panels/panel-model-object/panel-model-object.component.ts","webpack:///src/app/_shared/components/panels/panel-model-object/panel-model-object.component.html","webpack:///src/app/_core/services/index.ts","webpack:///src/app/_shared/components/inputs/inp-texture/inp-texture.component.ts","webpack:///src/app/_shared/components/inputs/inp-texture/inp-texture.component.html","webpack:///src/app/_store/index.ts","webpack:///src/app/auth/auth-routing.module.ts","webpack:///src/app/_core/services/rest.service.ts","webpack:///src/app/_shared/components/panels/panel-light/panel-light-tab-properties/panel-light-tab-properties.component.ts","webpack:///src/app/_shared/components/panels/panel-light/panel-light-tab-properties/panel-light-tab-properties.component.html","webpack:///src/app/_core/services/storage.service.ts","webpack:///src/app/_shared/components/viewport/client-viewport.service.ts","webpack:///src/app/_shared/components/panels/mesh-geometry/mesh-geometry-tab-material/mesh-geometry-tab-material.component.ts","webpack:///src/app/_shared/components/panels/mesh-geometry/mesh-geometry-tab-material/mesh-geometry-tab-material.component.html","webpack:///src/app/auth/models/user.ts","webpack:///src/app/_shared/components/editor/tabs/tab-controls/tab-control/tab-control.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-controls/tab-control/tab-control.component.html","webpack:///src/app/_core/services/http.service.ts","webpack:///src/app/_store/template/model.ts","webpack:///src/app/_store/reducers/index.ts","webpack:///src/environments/environment.ts","webpack:///src/app/_3D/services/app-editor.service.ts","webpack:///src/app/_shared/components/upload/upload.component.ts","webpack:///src/app/_shared/components/upload/upload.component.html","webpack:///src/app/_shared/components/panels/mesh-geometry/mesh-geometry.component.ts","webpack:///src/app/_shared/components/panels/mesh-geometry/mesh-geometry.component.html","webpack:///src/app/_shared/components/editor/sidebar/viewer-sidebar/viewer-sidebar.component.ts","webpack:///src/app/_shared/components/editor/sidebar/viewer-sidebar/viewer-sidebar.component.html","webpack:///src/app/auth/store/index.ts","webpack:///src/app/auth/layout/layout.component.ts","webpack:///src/app/auth/layout/layout.component.html","webpack:///src/app/_3D/services/event-emitter.ts","webpack:///src/app/_3D/traits/renderer.ts","webpack:///src/app/_3D/libs/animation-loop.ts","webpack:///src/app/_core/guards/authorization.guard.ts","webpack:///src/app/_3D/modules/postprocessing.esm.js","webpack:///src/app/_shared/components/panels/panel-model-object/panel-model-object-tab-meshes/panel-model-object-tab-meshes.component.ts","webpack:///src/app/_shared/components/panels/panel-model-object/panel-model-object-tab-meshes/panel-model-object-tab-meshes.component.html","webpack:///src/app/_shared/components/viewport/editor-toolbar/editor-toolbar.component.ts","webpack:///src/app/_shared/components/viewport/editor-toolbar/editor-toolbar.component.html","webpack:///src/app/_core/services/permissions.service.ts","webpack:///src/app/_shared/components/panels/panel-model-object/panel-model-object.service.ts","webpack:///src/app/_3D/threejs/jsm/controls/DragControls.js","webpack:///src/app/_shared/components/editor/sidebar/sidebar-lock/sidebar-lock.component.ts","webpack:///src/app/_shared/components/editor/sidebar/sidebar-lock/sidebar-lock.component.html","webpack:///src/app/_shared/components/input-groups/inp-text-group/inp-text-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-text-group/inp-text-group.component.html","webpack:///src/app/_shared/components/panels/mesh-geometry/mesh-geometry-tab-properties/mesh-geometry-tab-properties.component.ts","webpack:///src/app/_shared/components/panels/mesh-geometry/mesh-geometry-tab-properties/mesh-geometry-tab-properties.component.html","webpack:///src/app/_store/item/index.ts","webpack:///src/app/_core/guards/index.ts","webpack:///src/app/_shared/components/editor/tabs/tab-scene/tab-scene-settings/tab-scene-settings.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-scene/tab-scene-settings/tab-scene-settings.component.html","webpack:///src/app/auth/models/index.ts","webpack:///src/app/_core/directives/can-access.directive.ts","webpack:///src/app/_core/helpers/utils.ts","webpack:///src/app/auth/auth.component.ts","webpack:///src/app/auth/auth.component.html","webpack:///src/app/_3D/libs/editor.ts","webpack:///src/app/_store/images/index.ts","webpack:///src/app/_shared/components/inputs/inp-rotation/inp-rotation.component.ts","webpack:///src/app/_shared/components/inputs/inp-rotation/inp-rotation.component.html","webpack:///src/app/_3D/libs/three.libs.ts","webpack:///src/app/_3D/traits/scene.ts","webpack:///src/app/auth/services/auth.service.ts","webpack:///src/app/_3D/modules/dynamic-shadows.ts","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-model/model-list/model-list.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-model/model-list/model-list.component.html","webpack:///src/app/auth/store/auth.effects.ts","webpack:///src/app/_shared/directives/debounce-input.directive.ts","webpack:///src/app/_3D/threejs/jsm/controls/PointerLockControls.js","webpack:///src/app/_store/form/input.data.ts","webpack:///src/app/_core/services/startup.service.ts","webpack:///src/app/_3D/libs/models.ts","webpack:///src/app/_store/item/table.ts","webpack:///src/app/_shared/components/inputs/inp-textarea/inp-textarea.component.ts","webpack:///src/app/_shared/components/inputs/inp-textarea/inp-textarea.component.html","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-object.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-object.component.html","webpack:///src/app/_3D/traits/camera.ts","webpack:///src/app/_shared/components/panels/panel-light/panel-light.component.ts","webpack:///src/app/_shared/components/panels/panel-light/panel-light.component.html","webpack:///src/app/_3D/modules/composer.ts","webpack:///src/app/_shared/components/input-groups/inp-select-group/inp-select-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-select-group/inp-select-group.component.html","webpack:///src/app/_shared/components/viewport/vector-controls/vector-controls.component.ts","webpack:///src/app/_shared/components/viewport/vector-controls/vector-controls.component.html","webpack:///src/app/_3D/services/app-editor-storage.service.ts","webpack:///src/app/_shared/components/panels/panel-mesh-customize/panel-mesh-customize.component.ts","webpack:///src/app/_shared/components/panels/panel-mesh-customize/panel-mesh-customize.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/_shared/components/editor/tabs/tab-template-create-form/tab-template-create-form.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-template-create-form/tab-template-create-form.component.html","webpack:///src/app/_shared/components/collapses/collapse-mesh-material/collapse-mesh-material.component.ts","webpack:///src/app/_shared/components/collapses/collapse-mesh-material/collapse-mesh-material.component.html","webpack:///src/app/_shared/components/editor/tabs/tab-light/tab-light.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-light/tab-light.component.html","webpack:///src/app/_shared/components/editor/tabs/tab-template/template-list/template-list.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-template/template-list/template-list.component.html","webpack:///src/app/_3D/libs/event-dispatcher.ts","webpack:///src/app/_3D/traits/lights.ts","webpack:///src/app/_shared/components/input-groups/inp-range-group/inp-range-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-range-group/inp-range-group.component.html","webpack:///src/app/_core/node_modules/tslib/tslib.es6.js","webpack:///src/app/src/css/layout/bounds.ts","webpack:///src/app/_core/node_modules/src/Util.ts","webpack:///src/app/_core/node_modules/src/Trie.ts","webpack:///src/app/_core/node_modules/src/linebreak-trie.ts","webpack:///src/app/_core/node_modules/src/LineBreak.ts","webpack:///src/app/src/css/syntax/tokenizer.ts","webpack:///src/app/src/css/syntax/parser.ts","webpack:///src/app/src/css/types/length.ts","webpack:///src/app/src/css/types/length-percentage.ts","webpack:///src/app/src/css/types/angle.ts","webpack:///src/app/src/css/types/color.ts","webpack:///src/app/src/css/property-descriptors/background-clip.ts","webpack:///src/app/src/css/property-descriptors/background-color.ts","webpack:///src/app/src/css/types/functions/gradient.ts","webpack:///src/app/src/css/types/functions/linear-gradient.ts","webpack:///src/app/src/css/types/functions/-prefix-linear-gradient.ts","webpack:///src/app/src/css/types/functions/-webkit-gradient.ts","webpack:///src/app/src/css/types/functions/radial-gradient.ts","webpack:///src/app/src/css/types/functions/-prefix-radial-gradient.ts","webpack:///src/app/src/css/types/image.ts","webpack:///src/app/src/css/property-descriptors/background-image.ts","webpack:///src/app/src/css/property-descriptors/background-origin.ts","webpack:///src/app/src/css/property-descriptors/background-position.ts","webpack:///src/app/src/css/property-descriptors/background-repeat.ts","webpack:///src/app/src/css/property-descriptors/background-size.ts","webpack:///src/app/src/css/property-descriptors/border-color.ts","webpack:///src/app/src/css/property-descriptors/border-radius.ts","webpack:///src/app/src/css/property-descriptors/border-style.ts","webpack:///src/app/src/css/property-descriptors/border-width.ts","webpack:///src/app/src/css/property-descriptors/color.ts","webpack:///src/app/src/css/property-descriptors/direction.ts","webpack:///src/app/src/css/property-descriptors/display.ts","webpack:///src/app/src/css/property-descriptors/float.ts","webpack:///src/app/src/css/property-descriptors/letter-spacing.ts","webpack:///src/app/src/css/property-descriptors/line-break.ts","webpack:///src/app/src/css/property-descriptors/line-height.ts","webpack:///src/app/src/css/property-descriptors/list-style-image.ts","webpack:///src/app/src/css/property-descriptors/list-style-position.ts","webpack:///src/app/src/css/property-descriptors/list-style-type.ts","webpack:///src/app/src/css/property-descriptors/margin.ts","webpack:///src/app/src/css/property-descriptors/overflow.ts","webpack:///src/app/src/css/property-descriptors/overflow-wrap.ts","webpack:///src/app/src/css/property-descriptors/padding.ts","webpack:///src/app/src/css/property-descriptors/text-align.ts","webpack:///src/app/src/css/property-descriptors/position.ts","webpack:///src/app/src/css/property-descriptors/text-shadow.ts","webpack:///src/app/src/css/property-descriptors/text-transform.ts","webpack:///src/app/src/css/property-descriptors/transform.ts","webpack:///src/app/src/css/property-descriptors/transform-origin.ts","webpack:///src/app/src/css/property-descriptors/visibility.ts","webpack:///src/app/src/css/property-descriptors/word-break.ts","webpack:///src/app/src/css/property-descriptors/z-index.ts","webpack:///src/app/src/css/types/time.ts","webpack:///src/app/src/css/property-descriptors/opacity.ts","webpack:///src/app/src/css/property-descriptors/text-decoration-color.ts","webpack:///src/app/src/css/property-descriptors/text-decoration-line.ts","webpack:///src/app/src/css/property-descriptors/font-family.ts","webpack:///src/app/src/css/property-descriptors/font-size.ts","webpack:///src/app/src/css/property-descriptors/font-weight.ts","webpack:///src/app/src/css/property-descriptors/font-variant.ts","webpack:///src/app/src/css/property-descriptors/font-style.ts","webpack:///src/app/src/core/bitwise.ts","webpack:///src/app/src/css/property-descriptors/content.ts","webpack:///src/app/src/css/property-descriptors/counter-increment.ts","webpack:///src/app/src/css/property-descriptors/counter-reset.ts","webpack:///src/app/src/css/property-descriptors/duration.ts","webpack:///src/app/src/css/property-descriptors/quotes.ts","webpack:///src/app/src/css/property-descriptors/box-shadow.ts","webpack:///src/app/src/css/property-descriptors/paint-order.ts","webpack:///src/app/src/css/property-descriptors/webkit-text-stroke-color.ts","webpack:///src/app/src/css/property-descriptors/webkit-text-stroke-width.ts","webpack:///src/app/src/css/index.ts","webpack:///src/app/src/core/debugger.ts","webpack:///src/app/src/dom/element-container.ts","webpack:///src/app/_core/node_modules/src/grapheme-break-trie.ts","webpack:///src/app/_core/node_modules/text-segmentation/node_modules/src/Util.ts","webpack:///src/app/_core/node_modules/text-segmentation/node_modules/src/Trie.ts","webpack:///src/app/_core/node_modules/text-segmentation/node_modules/utrie/node_modules/src/index.ts","webpack:///src/app/_core/node_modules/src/GraphemeBreak.ts","webpack:///src/app/src/core/features.ts","webpack:///src/app/src/css/layout/text.ts","webpack:///src/app/src/dom/text-container.ts","webpack:///src/app/src/dom/replaced-elements/image-element-container.ts","webpack:///src/app/src/dom/replaced-elements/canvas-element-container.ts","webpack:///src/app/src/dom/replaced-elements/svg-element-container.ts","webpack:///src/app/src/dom/elements/li-element-container.ts","webpack:///src/app/src/dom/elements/ol-element-container.ts","webpack:///src/app/src/dom/replaced-elements/input-element-container.ts","webpack:///src/app/src/dom/elements/select-element-container.ts","webpack:///src/app/src/dom/elements/textarea-element-container.ts","webpack:///src/app/src/dom/replaced-elements/iframe-element-container.ts","webpack:///src/app/src/dom/node-parser.ts","webpack:///src/app/src/css/types/functions/counter.ts","webpack:///src/app/src/dom/document-cloner.ts","webpack:///src/app/src/core/cache-storage.ts","webpack:///src/app/src/render/path.ts","webpack:///src/app/src/render/vector.ts","webpack:///src/app/src/render/bezier-curve.ts","webpack:///src/app/src/render/bound-curves.ts","webpack:///src/app/src/render/effects.ts","webpack:///src/app/src/render/stacking-context.ts","webpack:///src/app/src/render/border.ts","webpack:///src/app/src/render/box-sizing.ts","webpack:///src/app/src/render/background.ts","webpack:///src/app/src/core/util.ts","webpack:///src/app/src/render/font-metrics.ts","webpack:///src/app/src/render/renderer.ts","webpack:///src/app/src/render/canvas/canvas-renderer.ts","webpack:///src/app/src/render/canvas/foreignobject-renderer.ts","webpack:///src/app/src/core/logger.ts","webpack:///src/app/src/core/context.ts","webpack:///src/app/src/index.ts","webpack:///src/app/_shared/components/inputs/inp-text/inp-text.component.ts","webpack:///src/app/_shared/components/inputs/inp-text/inp-text.component.html","webpack:///src/app/_shared/components/form-group/prop-inputs/prop-inputs.component.ts","webpack:///src/app/_shared/components/form-group/prop-inputs/prop-inputs.component.html","webpack:///src/app/_3D/traits/object-manager.ts","webpack:///src/app/_core/services/lost-db-table.service.ts","webpack:///src/app/_core/helpers/event-manager.ts","webpack:///src/app/auth/store/auth.selectors.ts","webpack:///src/app/_shared/components/editor/tabs/tab-light/tab-lights/tab-lights.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-light/tab-lights/tab-lights.component.html","webpack:///src/app/_core/services/lost-db.service.ts","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-model/tab-model.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-model/tab-model.component.html","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-geometry/tab-geometry.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-geometry/tab-geometry.component.html","webpack:///src/app/auth/auth.module.ts","webpack:///src/app/_core/services/event-manager.service.ts","webpack:///src/app/_store/template/service.ts","webpack:///src/app/app.module.ts","webpack:///src/app/_shared/components/editor/tabs/tab-light/light-item/light-item.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-light/light-item/light-item.component.html","webpack:///src/app/_3D/services/app-editor-event.service.ts","webpack:///src/app/_shared/components/inputs/inp-number/inp-number.component.ts","webpack:///src/app/_shared/components/inputs/inp-number/inp-number.component.html","webpack:///src/app/_3D/traits/floor.ts","webpack:///src/app/_shared/components/editor/tabs/tab-project-setting/tab-project-setting.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-project-setting/tab-project-setting.component.html","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-model/model-item/model-item.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-model/model-item/model-item.component.html","webpack:///src/app/_shared/shared-services.ts","webpack:///src/app/_shared/components/editor/tabs/tab-scene/tab-foreground/tab-foreground.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-scene/tab-foreground/tab-foreground.component.html","webpack:///src/app/_shared/components/viewport/editor-toolbar/editor-toolbar.service.ts","webpack:///src/app/auth/services/index.ts","webpack:///src/app/_shared/components/viewport/canvas-layer/canvas-layer.component.ts","webpack:///src/app/_shared/components/editor/sidebar/project-sidebar/project-sidebar.component.ts","webpack:///src/app/_shared/components/editor/sidebar/project-sidebar/project-sidebar.component.html","webpack:///src/app/auth/login/login.component.ts","webpack:///src/app/auth/login/login.component.html","webpack:///src/app/_3D/engines/controls.engine.ts","webpack:///src/app/_shared/components/panels/panel-model-object/panel-model-object-tab-properties/panel-model-object-tab-properties.component.ts","webpack:///src/app/_shared/components/panels/panel-model-object/panel-model-object-tab-properties/panel-model-object-tab-properties.component.html","webpack:///src/app/_shared/components/editor/tabs/tab-template/template-item/template-item.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-template/template-item/template-item.component.html","webpack:///src/app/_core/helpers/dom.ts","webpack:///src/app/_shared/components/viewport/vector-controls/vector-controls.service.ts","webpack:///src/app/_shared/components/editor/tabs/tab-scene/tab-scene.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-scene/tab-scene.component.html","webpack:///src/app/_core/interceptors/index.ts","webpack:///src/app/_core/helpers/local-db.ts","webpack:///src/app/_shared/components/inputs/inp-range/inp-range.component.ts","webpack:///src/app/_shared/components/inputs/inp-range/inp-range.component.html","webpack:///src/app/_core/interceptors/jwt.interceptor.ts","webpack:///src/app/_core/services/menu/menu.service.ts","webpack:///src/app/_store/images/service.ts","webpack:///src/app/_shared/components/editor/tabs/tab-scene/tab-background/tab-background.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-scene/tab-background/tab-background.component.html","webpack:///src/app/_shared/shared.type.ts","webpack:///src/app/_3D/modules/loader.ts","webpack:///src/app/_shared/components/panels/mesh-geometry/mesh-geometry.service.ts","webpack:///src/app/_shared/components/inputs/select-box/select-box.component.ts","webpack:///src/app/_shared/components/inputs/select-box/select-box.component.html","webpack:///src/app/_shared/components/panels/panel-light/panel-light.service.ts","webpack:///src/app/_shared/components/input-groups/inp-number-group/inp-number-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-number-group/inp-number-group.component.html","webpack:///src/app/_shared/components/viewport/client-edit-toolbar/client-edit-toolbar.service.ts","webpack:///src/app/_store/template/index.ts","webpack:///src/app/_shared/shared.module.ts","webpack:///src/app/_core/services/menu/menu.model.ts","webpack:///src/app/_shared/components/modals/image-library/image-library.component.ts","webpack:///src/app/_shared/components/modals/image-library/image-library.component.html","webpack:///src/app/app-ui.module.ts","webpack:///src/app/_shared/components/viewport/loading-layer/loading-layer.component.ts","webpack:///src/app/_shared/components/viewport/loading-layer/loading-layer.component.html","webpack:///src/app/_shared/components/viewport/foreground-layer/foreground-layer-item/foreground-layer-item.component.ts","webpack:///src/app/_shared/components/viewport/foreground-layer/foreground-layer-item/foreground-layer-item.component.html","webpack:///src/app/_shared/components/editor/sidebar/template-sidebar/sidebar.component.ts","webpack:///src/app/_shared/components/editor/sidebar/template-sidebar/sidebar.component.html","webpack:///src/app/_shared/components/viewport/viewport.service.ts","webpack:///src/app/_shared/components/editor/tabs/tab-template/tab-template.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-template/tab-template.component.html","webpack:///src/app/_shared/components/input-groups/inp-rotation-group/inp-rotation-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-rotation-group/inp-rotation-group.component.html","webpack:///src/app/_shared/components/viewport/client-viewport.component.ts","webpack:///src/app/_shared/components/viewport/client-viewport.component.html","webpack:///src/app/_shared/components/editor/tabs/tab-light/tab-shadow/tab-shadow.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-light/tab-shadow/tab-shadow.component.html","webpack:///src/app/_shared/components/form-group/material-inputs/material-inputs.component.ts","webpack:///src/app/_shared/components/form-group/material-inputs/material-inputs.component.html","webpack:///src/app/_store/item/service.ts","webpack:///src/app/_shared/components/viewport/viewport.component.ts","webpack:///src/app/_shared/components/viewport/viewport.component.html","webpack:///src/app/_shared/components/editor/drag-drop/dragging-geometry/dragging-geometry.component.ts","webpack:///src/app/_shared/components/editor/drag-drop/dragging-geometry/dragging-geometry.component.html","webpack:///src/app/_3D/traits/controls.ts","webpack:///src/app/_3D/threejs/jsm/controls/TransformControls.js","webpack:///src/app/_shared/components/inputs/inp-radio/inp-radio.component.ts","webpack:///src/app/_shared/components/inputs/inp-radio/inp-radio.component.html","webpack:///src/app/_shared/pipes/thumbnail.pipe.ts","webpack:///src/app/_3D/libs/composer.effects.ts","webpack:///src/app/_3D/modules/object-image.ts","webpack:///src/app/_shared/components/input-groups/inp-texture-group/inp-texture-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-texture-group/inp-texture-group.component.html","webpack:///src/app/_shared/components/input-groups/inp-color-group/inp-color-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-color-group/inp-color-group.component.html","webpack:///src/app/_core/helpers/es5.class.ts","webpack:///src/app/_shared/components/inputs/base-input/base-input.component.ts","webpack:///src/app/auth/models/role.ts","webpack:///src/app/_shared/components/editor/tabs/tab-scene/tab-foreground/foreground-item/foreground-item.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-scene/tab-foreground/foreground-item/foreground-item.component.html","webpack:///src/app/auth/store/auth.reducer.ts","webpack:///src/app/_shared/directives/scrollable.directive.ts","webpack:///src/app/_shared/components/viewport/object-toolbar/object-toolbar.service.ts","webpack:///src/app/_shared/components/input-groups/inp-switch-group/inp-switch-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-switch-group/inp-switch-group.component.html","webpack:///src/app/_shared/components/input-groups/inp-vector3-group/inp-vector3-group.component.ts","webpack:///src/app/_shared/components/input-groups/inp-vector3-group/inp-vector3-group.component.html","webpack:///src/app/_shared/components/base/base.component.ts","webpack:///src/app/_store/item/model.ts","webpack:///src/app/_core/guards/un-auth.guard.ts","webpack:///src/app/_shared/components/modals/image-library/image-library-item/image-library-item.component.ts","webpack:///src/app/_shared/components/modals/image-library/image-library-item/image-library-item.component.html","webpack:///src/app/_3D/traits/grid-helper.ts","webpack:///src/app/_shared/components/editor/tabs/tab-project-info/tab-project-info.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-project-info/tab-project-info.component.html","webpack:///src/app/_3D/threejs/jsm/controls/FirstPersonControls.js","webpack:///src/app/_shared/components/editor/tabs/tab-setting/tab-info/tab-info.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-setting/tab-info/tab-info.component.html","webpack:///src/app/_core/guards/auth.guard.ts","webpack:///src/app/_core/services/setting/setting.service.ts","webpack:///src/app/_shared/components/editor/tabs/tab-controls/tab-controls.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-controls/tab-controls.component.html","webpack:///src/app/_3D/threejs/jsm/controls/OrbitControls.js","webpack:///src/app/_3D/engines/app.emgine.ts","webpack:///src/app/_shared/directives/string-template-outlet.directive.ts","webpack:///src/app/app-routing.module.ts","webpack:///src/app/_3D/libs/props.ts","webpack:///src/app/_shared/components/modals/image-library/image-library.service.ts","webpack:///src/app/_store/form/index.ts","webpack:///src/app/_shared/components/viewport/item-viewport.component.ts","webpack:///src/app/_core/helpers/local-storage.ts","webpack:///src/app/_shared/components/collapses/collapse-base/collapse-base.component.ts","webpack:///src/app/_shared/components/viewport/mask-layer/mask-layer.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-setting/tab-setting.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-setting/tab-setting.component.html","webpack:///src/app/_3D/engines/moving.engine.ts","webpack:///src/app/_shared/components/editor/tabs/tab-controls/tab-camera/tab-camera.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-controls/tab-camera/tab-camera.component.html","webpack:///src/app/_shared/components/viewport/droppable-layer/droppable-layer.component.ts","webpack:///src/app/_shared/components/viewport/droppable-layer/droppable-layer.component.html","webpack:///src/app/_shared/components/viewport/client-edit-toolbar/client-edit-toolbar.component.ts","webpack:///src/app/_shared/components/viewport/client-edit-toolbar/client-edit-toolbar.component.html","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-geometry/geometry-item/geometry-item.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-object/tab-geometry/geometry-item/geometry-item.component.html","webpack:///src/app/_shared/components/editor/drag-drop/dragging-item/dragging-item.component.ts","webpack:///src/app/_shared/components/editor/drag-drop/dragging-item/dragging-item.component.html","webpack:///src/app/_shared/services/modal-confirm.service.ts","webpack:///src/app/_shared/components/viewport/foreground-layer/foreground-layer.component.ts","webpack:///src/app/_shared/components/viewport/foreground-layer/foreground-layer.component.html","webpack:///src/app/_shared/components/inputs/vector3/vector3.component.ts","webpack:///src/app/_shared/components/inputs/vector3/vector3.component.html","webpack:///src/main.ts","webpack:///src/app/_shared/components/panels/panel-light/panel-light-tab-params/panel-light-tab-params.component.ts","webpack:///src/app/_shared/components/panels/panel-light/panel-light-tab-params/panel-light-tab-params.component.html","webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/_shared/components/editor/tabs/tab-viewer-scene/tab-viewer-scene.component.ts","webpack:///src/app/_shared/components/editor/tabs/tab-viewer-scene/tab-viewer-scene.component.html"],"names":["InpSelectComponent","cd","fullwidth","_options","changes","options","syncFromParent","hasValue","map","value","Object","prototype","hasOwnProperty","call","push","label","s","splice","key","String","length","opt","onChange","BaseInpGroupComponent","name","placeholder","valueType","config","attach","hasAttach","old","subcribe","defaultValues","event","JSON","stringify","emitChange","emit","ov","self","onInpValChange","type","checkList","configProps","indexOf","p","checkattach","ErrorInterceptor","authenticationService","router","request","next","handle","pipe","err","status","logout","navigate","error","message","statusText","AuthActionTypes","Login","payload","LOGIN","LoginSuccess","LOGIN_SUCCESS","LoginFailure","LOGIN_FAILURE","menuButtons","text","icon","isActive","ObjectToolbarComponent","events","title","currentMode","show","buttons","btnList","light","object","mesh","secret_key","currentType","registerEventService","subEvents","e","showMenu","data","mode","reset","changeMode","setButtons","slice","filter","btn","a","action","TransparentImgComponent","LocalStorageService","__storage__","set","get","remove","EditorEngine","uses","Mesh","Geometry","Material","Light","Composer","Shadows","inited","$controlEngine","setData","composer","lights","addLights","models","addModels","meshes","addMeshes","objects","addObjects","grids","addGrids","cameras","addCameras","floor","addFloor","controls","addControls","constructor","Loader","focusIn","on","canChangeCamera","document","addEventListener","controlEngine","refresh","renew","updateSettings","scene","updateSceneSettings","background","setBackground","updateSceneFloorSetting","size","shadow","updateShadowSettings","control","updateControlSettings","camera","updateMainCameraSettings","data_","resetObjects","resetLights","startup","shadows","initScene","setMainCamera","createRenderer","renderer","enabled","updateProjectionMatrix","setMainControl","ready","autoRenderStatus","setTimeout","render","setControlEngine","setMainEngine","changeCameraByControlEngine","mainPosition","position","ctrlPosition","mainX","x","mainY","y","mainZ","z","ctrlX","ctrlY","ctrlZ","mainDistance","Math","sqrt","pow","ctrlDistance","ratio","lookAt","highPerformance","controlCanTurnOffShadow","startDeactiveShadowTimer","AppStorageService","EImageStatus","ReversePipe","Array","isArray","reverse","ModalExportImageComponent","oldTitle","isVisible","isConfirmLoading","containerStyle","onDone","onCancel","listType","oldListType","activeEventServiceRegistered","deactiveEventServiceRegistered","callback","cancel","params","done","showModal","images","firstLoad","result","image","index","array","selected","window","alert","handleCancel","InpColorComponent","elemRef","transparentBase64Image","isColor","getHexString","$three","color","inp","parent","nativeElement","querySelector","alpha","editor","layout","popup","editorFormat","cancelButton","hex","substr","onOpen","onClose","CameraDefaultSettings","fov","near","far","autofit","settings","face","custom","rotation","ControlDefaultSetting","autoUpdateScene","maxDistance","enableDamping","dampingFactor","enableRotate","enableZoom","enablePan","constraint","smoothZoom","zoomDampingFactor","smoothZoomSpeed","Object3DPropDefaultData","castShadow","receiveShadow","scale","LightPropDefaultData","visible","up","ShadowSettingDefaultData","pcss","FloorDefaultData","enableGrid","enableAxes","width","height","material","props","above","SceneSizeDefaultData","depth","RendererDefaultData","antialias","shadowMap","autoStart","outputEncoding","AppDefaultData","foregrounds","BlankData","id","category_id","description","thumbnail","allow_custom","minDistance","intensity","mapSize","left","right","top","bottom","darkness","bias","radius","getBlankAppData","getBlankProjectData","FacePosKeyValues","front","back","ft","bt","lt","rt","lft","lbt","rft","rbt","fb","bb","lb","rb","lfb","lbb","rfb","rbb","CameraDefaultFacePositions","NO_VALUE","rand","__CONFIG__","urls","assets","view","getConfig","getElement","elem","undefined","c","split","i","k","InpTextareaGroupComponent","minRows","maxRows","inpInit","InpSwitchComponent","detectChanges","emitAfter","onChangeState","MeshGeometryTabGeometryComponent","inputs","onUpdate","ModelSearchComponent","SidebarLockService","_changeEvent","FlyControls","domElement","console","warn","movementSpeed","rollSpeed","dragToLook","autoForward","scope","EPS","lastQuaternion","lastPosition","tmpQuaternion","mouseStatus","moveState","down","forward","pitchUp","pitchDown","yawLeft","yawRight","rollLeft","rollRight","moveVector","rotationVector","keydown","altKey","code","movementSpeedMultiplier","updateMovementVector","updateRotationVector","keyup","mousedown","button","mousemove","container","getContainerDimensions","halfWidth","halfHeight","pageX","offset","pageY","mouseup","update","delta","moveMult","rotMult","translateX","translateY","translateZ","normalize","quaternion","multiply","distanceToSquared","dot","dispatchEvent","copy","offsetWidth","offsetHeight","offsetLeft","offsetTop","innerWidth","innerHeight","dispose","removeEventListener","contextmenu","_mousedown","_mousemove","_mouseup","_keydown","_keyup","bind","preventDefault","DroppableAreaComponent","InpRadioGroupComponent","DEFAULT_VALUE","App3DService","root","engineOptions","_engine","storageKey","canTransferEventToControls","engineClass","onError","engine","capture","imgS","Image","crossOrigin","onload","cancasDom","canvas","el","ctx","getContext","clearRect","taskTotal","checkTask","toDataURL","drawImage","fg","url","opacity","img","posX","posY","outWidth","outHeight","outRatio","save","globalAlpha","restore","onerror","src","setOptions","init","getEventList","stt","transferEventListenner","Engine","updateCanvasSize","log","model","object3DModel","vectors","vprops","obj","modelSettings","v","addMeshSettings","setting","settingDefaultData","sid","slug","editable","defineProperty","configurable","enumerable","writable","objMesh","j","meshMaterial","settingMaterial","materialInputs","mat","getMaterialInputs","materialType","editableList","_type","replace","toLowerCase","_material","_settings","ignore","addInput","materialProps","isArrayEditAble","prop","inputType","inputOptions","isEditAble","outputWidth","min","max","step","vl","TabIndex","propDefault","PanelModelObjectComponent","service","hasTitle","isShow","btnDoneText","onUpdateHandle","onDoneHandle","secretKey","prevTab","Meshes","currentTab","meshFormGroup","isInited","app","_service","hide","isFocus","checkNoChanges","display","btnDone","change","setDefaultSettingData","asyncSettings","initProps","o","getObject","__ref__","m","__parent_key__","updateData","emitUpdateMaterial","updateDAta","services","InpTextureComponent","libraryService","outputImage","modalCancelSelect","onCloseLibrary","get2DMap","file","path","format","extension","LoadEnv","envMap","texture","open","onSelectImage","source","chooseTexture","routes","component","canActivate","children","COMPONENTS","AuthRoutingModule","forChild","RestService","http","toart","translateService","baseUrl","baseUrlForm","apiUrl","errMsg","strError","instant","res","strSuccessful","strNiceJob","success","paramsIn","showSuccess","keys","forEach","append","headers","getHeader","displaySuccessMessage","handleError","body","headersIn","toString","put","patch","post","getHeaderDownload","responseType","getHeaderForm","observe","getHeaderUpload","accept","Accept","PanelLightTabPropertiesComponent","hasShadow","hasTarget","hasShadowCamera","defData","finalData","emitUpdate","ignoreKeys","SECRET_KEY","StorageService","__data","__listenners","__checks","onCheck","ret","setValue","returnData","$value","_value","$change","onchange","check","$check","assign","jsonValue","rs","__dispatchChange","newValue","oldValue","fn","take","pk","__keyAvailable","val","__checkChange","fns","callIfHasValue","exists","cb","ClientViewportService","MeshGeometryTabMaterialComponent","User","TabControlComponent","isChangeSubEvents","getControlSetting","updateControlSetting","HttpService","getLaravelHeader","ETemplateStatus","reducers","routerReducer","getRouterState","metaReducers","production","CustomRouterStateSerializer","routerState","route","firstChild","queryParams","environment","domain","ggKeygKey","allowLocalhostAsSecureOrigin","osKey","workflow","AppEditorService","editorClass","itemDropable","geometryDropable","addItemMode","addItemPosition","eventHandlers","checkItemDragHover","checkItemDropped","checkGeometryDragHover","checkGeometryDropped","addMesh","deleteMesh","updateMeshSettingDataAndScene","showPanelLight","addDraggablePosition","item","removeDraggablePosition","setDefaultData","start","_editor","eventData","resetAddItemPosition","_events","setEngine","EC","addControlEvent","appDataObject","__parent__key__","engineDataObject","objectType","getLight","changeObjectDataByEditor","changeLightDataByEditor","changeLightTargetDataByEditor","executeCommand","deleteObject","updateDropAreaAreas","pos","setDragMoveItem","removeDragMoveItem","propKeys","arrKeys","syncCameraProps","cam","sceneData","t","box","setFromObject","sizeKey","sizeData","boxData","posKey","x0","abs","x1","y0","y1","z0","z1","getRealSceneSize","updateSceneSizeSetting","getFloorSetting","d","updateMeshDataAndView","updateObjectDataAndView","updateMeshSettingProp","propType","updateObjectSettingProp","updateLightDataAndView","updateLightSettingProp","target","updateLightTargetDataAndView","updateLightTargetSettingProp","showDroppableLayer","isHover","dropable","checkArea","checkDroppablePosition","addObjectModelItem","complete","progress","setAppData","li","lightObj","l","ref","getMesh","getModelSettingData","onSuccess","onProgress","addItemToTemplateSettingWorkspace","lightTemp","getLightTemplateData","addLight","Error","meshData","lightData","attachLight","updateObjectSettings","geometry","updateMeshesSettings","meshIndex","updateMeshMaterial","updateLightProps","removeObject","removeLight","camPos","camRot","saveData","__support","answer","UploadFileComponent","restService","fileListChange","quantity","fileTypes","sizeFile","previewVisible","showUploadList","showPreviewIcon","showRemoveIcon","hidePreviewIconInNonImage","handlePreview","previewImage","thumbUrl","customReq","formData","FormData","upload","subscribe","emitFileListValue","showError","beforeUpload","observer","typeOk","includes","join","fileSize","handleRemove","fileList","f","messsage","MeshGeometryComponent","materialConfig","geometryConfig","geoInputs","setMesh","cfg","inpType","iType","spin","valur","updateKey","ViewerSidebarComponent","loadedTemplate","loadedObject","hideLightHelpers","showLightHelpers","detachLight","onChangeTab","LayoutAuthComponent","EventEmitter","_listeners","_dispatchedEvents","handler","fnt","handleParams","trim","args","apply","dispatch","listener","parseEventHandler","listeners","handleDispatchedEvents","listenerArray","stopImmediatePropagation","addDispatchedEvent","array1","fnAdded","arguments","Renderer","aspect","fps","wrapper","animationTasks","autoRenderMode","autoRenderTimerStatus","autoRenderTimerStart","autoRenderCountdown","autoRenderTimerMilisecond","autoRenderDistance","controlChangeAnimateStatus","deactiveShadowStatus","deactiveShadowTimeMstart","deactiveShadowTimeMilisecond","deactiveShadowTimeMilisecondHP","deactiveShadowTimeCountdown","wheelAnimationStatus","wheelAnimationTimeMstart","wheelAnimationTimeMilisecond","wheelAnimationTimeCountdown","autoRenderQueueTask","inWrapper","pointerPosition","pointerStart","lastAnimateData","currentAnimateData","controlCanUpdate","animation","boots","renderBoot","getInstanceID","animate","controlChangingByFPSStatus","timeoutAnimate","currentTime","controlChangeAnimate","activeShadowAfter","cond","deactiveShadowMode","controlEnableDamping","deactiveCompleteHandle","wheelAnimation","showSceneHelper","sceneHelper","hideGridHelper","imageCaptured","getImageByCustomSceneAndCamera","showGridHelper","opts","parse","setPixelRatio","devicePixelRatio","setSize","toneMapping","toneMappingExposure","rect","getBoundingClientRect","oldEnabled","oldPcss","active","deactive","has","add","autoRefresh","autoAnimate","move","startChangeAnimate","end","startWheelAnimate","setWrapper","wrapperElement","appendChild","getCanvas","Number","getElementById","w","clientWidth","h","clientHeight","autoResize","windowResize","updateWrapperSize","startAnimateTimer","timer","checkDistance","off","onComplete","Animation","tasks","taskCount","isRunning","isShowLog","_id","tasklist","requestAnimationFrame","animationContainers","registerAnimationTask","AnimationLoop","AuthorizationGuard","permissionsService","state","pageFormRoot","pathFromRoot","routeConfig","checkAuthorizationSync","ColorChannel","RED","GREEN","BLUE","ALPHA","Disposable","fragmentShader","vertexShader","AdaptiveLuminanceMaterial","defines","MIP_LEVEL_1X1","uniforms","previousLuminanceBuffer","currentLuminanceBuffer","minLuminance","deltaTime","tau","depthWrite","depthTest","toneMapped","fragmentShader$1","BokehMaterial","fill","foreground","PASS","kernel64","kernel16","inputBuffer","cocBuffer","texelSize","FOREGROUND","generateKernel","GOLDEN_ANGLE","points64","Float32Array","points16","i64","i16","theta","r","u","cos","sin","fragmentShader$2","CircleOfConfusionMaterial","DEPTH_PACKING","depthBuffer","focusDistance","focalLength","cameraNear","cameraFar","adoptCameraSettings","toFixed","needsUpdate","PERSPECTIVE_CAMERA","fragmentShaderColor","vertexShader$1","ColorEdgesMaterial","LOCAL_CONTRAST_ADAPTATION_FACTOR","EDGE_THRESHOLD","factor","threshold","fragmentShader$3","vertexShader$2","ConvolutionMaterial","halfTexelSize","kernel","setTexelSize","kernelSize","KernelSize","LARGE","kernelPresets","multiplyScalar","VERY_SMALL","SMALL","MEDIUM","VERY_LARGE","HUGE","fragmentShader$4","CopyMaterial","fragmentShader$5","vertexShader$3","DepthComparisonMaterial","depthTexture","morphTargets","skinning","fragmentShader$6","vertexShader$4","DepthDownsamplingMaterial","normalBuffer","fragmentShader$7","DepthMaskMaterial","DEPTH_PACKING_0","DEPTH_PACKING_1","depthBuffer0","depthBuffer1","fragmentShaderDepth","fragmentShaderLuma","EdgeDetectionMaterial","EdgeDetectionMode","COLOR","DEPTH_THRESHOLD","setEdgeDetectionMode","DEPTH","LUMA","EDGE_DETECTION_MODE","fragmentTemplate","vertexTemplate","EffectMaterial","shaderParts","dithering","ENCODE_OUTPUT","resolution","time","setShaderParts","setDefines","setUniforms","Section","FRAGMENT_HEAD","FRAGMENT_MAIN_UV","FRAGMENT_MAIN_IMAGE","VERTEX_HEAD","VERTEX_MAIN_SUPPORT","entries","entry","fragmentShader$8","GodRaysMaterial","lightPosition","SAMPLES_INT","SAMPLES_FLOAT","density","decay","weight","exposure","clampMax","fragmentShader$9","LuminanceMaterial","colorOutput","luminanceRange","useRange","smoothing","range","useThreshold","THRESHOLD","RANGE","fragmentShader$a","MaskMaterial","maskTexture","strength","colorChannel","maskFunction","MaskFunction","DISCARD","COLOR_CHANNEL","MASK_FUNCTION","INVERTED","inverted","MULTIPLY","MULTIPLY_RGB_SET_ALPHA","fragmentShader$b","vertexShader$5","OutlineMaterial","OutlineEdgesMaterial","fragmentShader$c","vertexShader$6","SMAAWeightsMaterial","MAX_SEARCH_STEPS_INT","MAX_SEARCH_STEPS_FLOAT","MAX_SEARCH_STEPS_DIAG_INT","MAX_SEARCH_STEPS_DIAG_FLOAT","CORNER_ROUNDING","CORNER_ROUNDING_NORM","AREATEX_MAX_DISTANCE","AREATEX_MAX_DISTANCE_DIAG","AREATEX_PIXEL_SIZE","AREATEX_SUBTEX_SIZE","SEARCHTEX_SIZE","SEARCHTEX_PACKED_SIZE","areaTexture","searchTexture","steps","rounding","DISABLE_DIAG_DETECTION","DISABLE_CORNER_DETECTION","fragmentShader$d","vertexShader$7","SSAOMaterial","SPIRAL_TURNS","RADIUS","RADIUS_SQ","DISTANCE_SCALING","normalDepthBuffer","noiseTexture","inverseProjectionMatrix","projectionMatrix","distanceCutoff","proximityCutoff","noiseScale","minRadiusScale","fade","AUTO_SIZE","Resizer","resizable","base","round","dummyCamera","getFullscreenTriangle","vertices","uvs","setAttribute","addAttribute","Pass","screen","rtt","needsSwap","needsDepthTexture","getFullscreenMaterial","frustumCulled","depthPacking","outputBuffer","stencilTest","frameBufferType","BlurPass","resolutionScale","renderTargetA","minFilter","magFilter","stencilBuffer","renderTargetB","clone","convolutionMaterial","ditheredConvolutionMaterial","getKernel","lastRT","destRT","setFullscreenMaterial","setRenderTarget","renderToScreen","ClearMaskPass","stencil","buffers","setLocked","setTest","ClearPass","overrideClearColor","overrideClearAlpha","clearAlpha","getClearAlpha","hasOverrideClearColor","hasOverrideClearAlpha","getClearColor","setClearColor","setClearAlpha","clear","workaroundEnabled","OverrideMaterialManager","originalMaterials","Map","materialInstanced","materialSkinning","setMaterial","disposeMaterials","shadowMapEnabled","meshCount","traverse","node","isMesh","isInstancedMesh","isSkinnedMesh","overrideMaterial","RenderPass","clearPass","overrideMaterialManager","manager","renderTarget","DepthPass","renderPass","getClearPass","DepthDownsamplingPass","DOWNSAMPLE_NORMALS","generateMipmaps","capabilities","isWebGL2","BlendFunction","SKIP","ADD","AVERAGE","COLOR_BURN","COLOR_DODGE","DARKEN","DIFFERENCE","EXCLUSION","LIGHTEN","DIVIDE","NEGATION","NORMAL","OVERLAY","REFLECT","SCREEN","SOFT_LIGHT","SUBTRACT","addBlendFunction","alphaBlendFunction","averageBlendFunction","colorBurnBlendFunction","colorDodgeBlendFunction","darkenBlendFunction","differenceBlendFunction","exclusionBlendFunction","lightenBlendFunction","multiplyBlendFunction","divideBlendFunction","negationBlendFunction","normalBlendFunction","overlayBlendFunction","reflectBlendFunction","screenBlendFunction","softLightBlendFunction","subtractBlendFunction","blendFunctions","BlendMode","blendFunction","Effect","attributes","EffectAttribute","NONE","extensions","blendMode","setChanged","CONVOLUTION","WebGLExtension","DERIVATIVES","FRAG_DEPTH","DRAW_BUFFERS","SHADER_TEXTURE_LOD","findSubstrings","regExp","string","substrings","exec","prefixSubstrings","prefix","strings","prefixed","substring","charAt","toUpperCase","RegExp","integrateEffect","effect","blendModes","functionRegExp","varyingRegExp","shaders","getFragmentShader","getVertexShader","mainImageExists","mainUvExists","varyings","names","transformedUv","readDepth","concat","from","blendOpacity","getBlendFunction","EffectPass","effects","sort","b","skipRendering","minTime","maxTime","POSITIVE_INFINITY","encodeOutput","maxFragmentUniforms","maxVertexUniforms","maxVaryings","blendRegExp","Set","getAttributes","values","getShaderCode","getDepthTexture","updateMaterial","verifyResources","setDepthTexture","recompile","initialize","handleEvent","MaskPass","inverse","context","writeValue","clearValue","setMask","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","NormalPass","morphNormals","SavePass","resize","ShaderPass","input","uniform","setInput","EffectComposer","multisampling","autoClear","createBuffer","enableExtensions","copyPass","passes","autoRenderToScreen","samples","buffer","getExtension","updateDOM","oldRenderer","oldSize","getSize","newSize","parentNode","equals","removeChild","pass","getDrawingBufferSize","getContextAttributes","drawingBufferSize","createDepthTexture","removed","reducer","depthTextureRequired","reduce","deleteDepthTexture","NOTEQUAL","updateStyle","Initializable","Resizable","Selection","iterable","layer","currentLayer","layers","disable","enable","fragmentShader$e","BloomEffect","luminanceThreshold","luminanceSmoothing","blurPass","luminancePass","luminanceMaterial","fragmentShader$f","BokehEffect","focus","dof","aperture","maxBlur","fragmentShader$g","BrightnessContrastEffect","brightness","contrast","fragmentShader$h","ColorAverageEffect","fragmentShader$i","ColorDepthEffect","bits","setBitDepth","fragmentShader$j","vertexShader$8","ChromaticAberrationEffect","fragmentShader$k","DepthEffect","fragmentShader$l","DepthOfFieldEffect","bokehScale","renderTargetMasked","renderTargetNear","renderTargetFar","renderTargetCoC","renderTargetCoCBlurred","cocPass","cocMaterial","circleOfConfusionMaterial","maskPass","maskMaterial","bokehNearBasePass","bokehNearFillPass","bokehFarBasePass","bokehFarFillPass","viewDistance","distance","distanceTo","farBaseUniforms","farFillUniforms","nearBaseUniforms","nearFillUniforms","calculateFocusDistance","resizables","initializables","fragmentShader$m","DotScreenEffect","angle","PI","setAngle","fragmentShader$n","GammaCorrectionEffect","gamma","getNoise","channels","Uint8Array","random","NoiseTexture","fragmentShader$o","tag","randomFloat","low","high","GlitchEffect","chromaticAberrationOffset","delay","duration","columns","perturbationMap","dtSize","setPerturbationMap","generatePerturbationMap","breakPoint","seed","distortion","GlitchMode","SPORADIC","currentMap","getPerturbationMap","wrapS","wrapT","trigger","DISABLED","CONSTANT_WILD","CONSTANT_MILD","fragmentShader$p","GodRaysEffect","lightSource","blur","transparent","lightScene","screenPosition","renderTargetLight","renderPassLight","depthMaskPass","godRaysPass","godRaysMaterial","matrixAutoUpdate","updateWorldMatrix","matrix","matrixWorld","setFromMatrixPosition","project","fragmentShader$q","GridEffect","lineWidth","fragmentShader$r","HueSaturationEffect","hue","saturation","setHue","addScalar","divideScalar","fragmentShader$s","NoiseEffect","premultiply","fragmentShader$t","vertexShader$9","OutlineEffect","patternTexture","edgeStrength","pulseSpeed","visibleEdgeColor","hiddenEdgeColor","xRay","setBlendFunction","setPatternTexture","renderTargetMask","renderTargetOutline","renderTargetBlurredOutline","depthPass","outlinePass","selection","setVertexShader","pulse","mask","setVisible","fragmentShader$u","PixelationEffect","granularity","divide","setGranularity","fragmentShader$v","RealisticBokehEffect","fStop","luminanceGain","fringe","rings","showFocus","manualDoF","pentagon","parseInt","fragmentShader$w","ScanlineEffect","fragmentShader$x","vertexShader$a","HALF_PI","v$1","ab","ShockWaveEffect","epicenter","speed","maxRadius","waveSize","amplitude","uniformActive","getWorldDirection","sub","angleTo","SelectiveBloomEffect","blackoutPass","backgroundPass","backgroundScene","renderTargetSelection","ignoreBackground","fragmentShader$y","SepiaEffect","searchImageDataURL","areaImageDataURL","fragmentShader$z","vertexShader$b","SMAAEffect","searchImage","areaImage","preset","SMAAPreset","HIGH","edgeDetectionMode","renderTargetEdges","renderTargetWeights","edgeDetectionPass","setAttributes","weightsPass","flipY","applyPreset","edgeDetectionMaterial","setEdgeDetectionThreshold","setOrthogonalSearchSteps","weightsMaterial","LOW","diagonalDetection","cornerRounding","setDiagonalSearchSteps","setCornerRounding","ULTRA","fragmentShader$A","NOISE_TEXTURE_SIZE","SSAOEffect","distanceScaling","depthAwareUpsampling","distanceThreshold","distanceFalloff","rangeThreshold","rangeFalloff","luminanceInfluence","renderTargetAO","ssaoPass","NORMAL_DEPTH","setDistanceCutoff","setProximityCutoff","ssaoMaterial","falloff","getInverse","fragmentShader$B","vertexShader$c","TextureEffect","aspectCorrection","currentTexture","previousEncoding","encoding","uvTransform","g","rgba","swizzle","updateMatrix","fragmentShader$C","ToneMappingEffect","adaptive","middleGrey","maxLuminance","averageLuminance","adaptationRate","renderTargetLuminance","renderTargetAdapted","renderTargetPrevious","savePass","adaptiveLuminancePass","exponent","ceil","log2","fragmentShader$D","VignetteEffect","eskil","createCanvas","createElementNS","imageData","createImageData","putImageData","RawImageData","workerProgram","generate","disableCache","workerURL","URL","createObjectURL","Blob","worker","Worker","Promise","resolve","reject","searchImageData","areaImageData","toCanvas","localStorage","setItem","revokeObjectURL","postMessage","SMAAImageLoader","onLoad","externalManager","internalManager","itemStart","cachedURLs","getItem","promise","then","itemEnd","itemError","Vector2","Box2","b0","b1","ORTHOGONAL_SIZE","DIAGONAL_SIZE","DIAGONAL_SAMPLES","SMOOTH_MAX_DISTANCE","orthogonalSubsamplingOffsets","diagonalSubsamplingOffsets","orthogonalEdges","diagonalEdges","lerp","saturate","smoothArea","a1","a2","b1X","b1Y","b2X","b2Y","calculateOrthogonalArea","p1","p2","dX","dY","x2","y2","sign","trunc","calculateOrthogonalAreaForPattern","pattern","o1","o2","isInsideArea","xm","ym","calculateDiagonalAreaForPixel","pX","pY","offsetX","offsetY","calculateDiagonalArea","e1","e2","calculateDiagonalAreaForPattern","generatePatterns","patterns","orthogonal","assemble","edges","dstData","dstWidth","edge","srcData","srcWidth","SMAAAreaImageData","Uint8ClampedArray","orthogonalPatternSize","diagonalPatternSize","orthogonalPatterns","diagonalPatterns","bilinear","lerp$1","deltaLeft","deltaRight","SMAASearchImageData","croppedWidth","croppedHeight","croppedData","PanelModelObjectTabMeshesComponent","onUpdateTitle","_s","EditorToolbarComponent","showBtns","showButtons","hideButtons","list","hasShow","arg","PermissionsService","settingService","WORKFLOW_EVENTS","freeze","userRoles","roles","doCheckAuthorization","paths","currentObject","findEntry","PanelModelObjectService","_plane","_raycaster","_pointer","_offset","_intersection","_worldPosition","_inverseMatrix","DragControls","_objects","_camera","_domElement","style","touchAction","_selected","_hovered","_intersections","activate","onPointerMove","onPointerDown","onPointerCancel","deactivate","cursor","getObjects","updatePointer","setFromCamera","ray","intersectPlane","applyMatrix4","pointerType","intersectObjects","setFromNormalAndCoplanarPoint","normal","transformGroup","invert","clientX","clientY","SidebarLockComponent","InpTextGroupComponent","onChangeValue","MeshGeometryTabPropertiesComponent","onInputChange","TabSceneSettingsComponent","library","cfm","sceneSize","initSize","initFloor","getSceneSizeSetting","updateSize","updateFloorPosition","updateFloor","CanAccessDirective","templateRef","viewContainer","workflowEvents","applyPermission","permission$","checkAuthorization","authorized","createEmbeddedView","unsubscribe","global","addToGlobal","arr","div","createElement","varArgs","TypeError","to","nextSource","nextKey","isFunction","nodeType","isCallable","variable","getType","isString","isNaN","isNull","isObject","isNumber","parseFloat","isFloat","isInteger","isBoolean","isFormData","isEmail","email","re","test","isEmpty","emptyFunc","newObj","create","emptyObject","merge","dst","srclength","srcObj","copyArray","combine","sth","lst","ls","tl","objectKeys","objectValues","isProperty","isMethod","isisMethod","eval","checkType","inArray","cutWithout","oldObj","copyWithout","copyByList","checkAllElementType","types","checked","temp","nO","combineTwoArray","arrayArr","arrayAny","newArr","any","combineElenentsToArrList","arrayList","results","str","combineElenentsJoinStringList","deliniter","arr1","arr2","minOf","NaN","n","maxOf","abc","_instanceof","Symbol","hasInstance","_classCallCheck","instance","Constructor","_defineProperties","descriptor","_createClass","protoProps","staticProps","_defineProperty","absolultely","t2","objectHasKey","objectHasProperty","ks","kv","arrayJoin","addToTarget","getEl","delimiter","tpo","tpk","Num","currency","convertedArray","Str","html_char_raw","html_char_enc","urlcode","unicode","js","vi","en","upper","lower","clearUnicode","isSN","replaceByObj","replaceByArr","sts","txt","preg_replace","escapeRegExp","find","charList","st","sp","camelToSlug","joinKey","upperToWord","urlencode","urldecode","template","tpl","convertTextObject","ucfirst","first","ucword","htmlentities","formSlug","slugToCamel","objectKey","orderCharList","compare","str1","str2","i1n","i2n","s1l","s2l","c1","c2","date","lang","Date","dl","ml","utc","getTime","getTimezoneOffset","ms","getMilliseconds","Y","getFullYear","H","getHours","getMinutes","getMonth","getSeconds","getDate","getDay","getTimeStamp","assignValue","objData","s13","arrData","sk","ak","assignWithout","il","field","assignIfNotExists","objectAssignKeyValue","resolveValue","resolveStt","objectAssign","rgbToHex","rgb","colorToHex","red","green","blue","invertHexColor","hexTripletColor","Queue","work","properties","timeDelay","stepCount","resolved","rejected","cancelled","stopped","timeId","turn","count","methods","clearTimeout","run","comtext","stop","runtask","restart","addThen","addCatch","getData","method","args2","queueTask","getArguments","JsonToBase64","encodeURIComponent","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","byteNumbers","charCodeAt","byteArray","blob","resizeImage","resizeWidth","resizeHeight","imgTag","imageWidth","imageHeight","zoomWidth","zoomHeight","imageRatio","resizeRatio","Element","degreeToRadians","degrees","radianToDegrees","radians","getObjectPropDepth","pop","getInputCfg","AuthComponent","Editor__","$dynamicCreateMode","$control","$engine","$selected","$pickers","$currentLight","$currentObject","$currentTargetControl","animationStatus","animationTimeStart","animationTimeCount","poiterDowsStatus","isHoldObject","hasDroppablePosition","moving","movingRaycaster","dragMoveColRows","setup","restoreShadow","selectionBox","pickers","attachObjects","targets","targetControlObjects","helpers","currentLight","currentTargetControl","raycaster","pointer","onUpPosition","onDownPosition","isTargetControlObject","updateLightTargetByTargetControlObject","isLight","updateHelperByLight","updateHelperByObject","turnOffShadow","enableControl","keyCode","setTranslationSnap","setRotationSnap","setScaleSnap","addObject","addMeshByObject","removeMeshByObject","pointerDownPos","pointerUpPos","lastPointerUpTime","pointerDownStatus","changeCameraByMain","addEventDefault","onPointerUp","deleteAttach","selectObjectByPointer","setEngineData","__parent_id__","helper","isSkeletonHelper","targetControl","select","removeHelper","detach","getHelper","child","dropbyPositionY","removeLightTargetControlObject","lightHelperStatus","closestObjectInScene","isSczene","sobj","uuid","closestLightInScene","isScene","userData","attachObject","closestLightTargetControlInScene","selectMeshByPointer","intersects","targetIntersects","attachLightTargetControl","detactLightTargetControl","lightIntersects","pickerIntersects","detachObject","currentLightt","selectById","getObjectById","selectByUuid","deselect","focusById","isSelected","object3D","getLightTargetControlObject","side","circle","isCamera","isPointLight","isDirectionalLight","isSpotLight","isHemisphereLight","skeleton","bones","isGroup","picker","unselect","command","setSpace","space","degToRad","setMode","showX","showY","showZ","itemSize","itemShadowObject","areaObjects","shadowPosY","dropPreviewCustomObject","dropPosY","initDropPos","checkMovingEngine","floorPositionY","addItemAboveFloor","xStart","xEnd","zStart","zEnd","colRow","areaWidth","areaDepth","areaHeight","boxOrigin","xC","zC","zz","itemPosition","customObject","planeWidth","planeDepth","isAdded","plane","py","area","updateCamera","closestAreaScene","Editor","InpRotationComponent","degreSymbol","canSync","formatterX","parserX","formatterY","parserY","formatterZ","parserZ","vector","updateVector","$event","THREE","Geometries","Materials","LoaderLib","LightLib","getGeometry","Props","boxbuffer","parseParams","widthSegments","heightSegments","depthSegments","geo","BoxBufferGeometry","BoxGeometry","circlebuffer","segments","thetaStart","thetaLength","CircleBufferGeometry","CircleGeometry","conebuffer","radialSegments","openEnded","ConeBufferGeometry","cone","ConeGeometry","cylinderbuffer","radiusTop","radiusBottom","CylinderBufferGeometry","cylinder","CylinderGeometry","dodecahedronbuffer","detail","DodecahedronBufferGeometry","dodecahedron","DodecahedronGeometry","thresholdAngle","EdgesGeometry","extrudebuffer","shape","Shape","p0","moveTo","point","lineTo","ExtrudeBufferGeometry","extrude","ExtrudeGeometry","icosahedronbuffer","IcosahedronBufferGeometry","icosahedron","IcosahedronGeometry","octahedronbuffer","OctahedronBufferGeometry","octahedron","OctahedronGeometry","planebuffer","PlaneBufferGeometry","PlaneGeometry","ringbuffer","innerRadius","outerRadius","thetaSegments","phiSegments","RingBufferGeometry","ring","RingGeometry","points","curveSegments","ShapeGeometry","shapebuffer","ShapeBufferGeometry","spherebuffer","phiStart","phiLength","SphereBufferGeometry","sphere","SphereGeometry","tetrahedronbuffer","TetrahedronBufferGeometry","tetrahedron","TetrahedronGeometry","textbuffer","font","TextBufferGeometry","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","TextGeometry","torusbuffer","tube","tubularSegments","arc","TorusBufferGeometry","tobe","torus","TorusGeometry","torusknotbuffer","q","TorusKnotBufferGeometry","torusknot","TorusKnotGeometry","instances","propTypes","boundingBox","boundingSphere","drawRange","groups","morphAttributes","morphTargetsRelative","instancedbuffer","instanceCount","intenceConfig","parameters","sideOptions","FrontSide","BackSide","DoubleSide","getMaterial","ignoreFlipY","getTypeProps","tp","parseColor","___params","setProperties","lo","load","defProps","typ","ts","ti","tis","addPropType","def","propGroup","parseProps","typeVal","createColor","parseType","getDetectedProps","detectProps","getPropData","getMaps","getColors","getCloneMaps","getMaterialType","availableInputs","__default","__linebasic","linewidth","linecap","linejoin","parseColorIntVal","LineBasicMaterial","__linedashed","dashSize","gapSize","LineDashedMaterial","__basic","MeshBasicMaterial","__depth","MeshDepthMaterial","__distance","MeshDistanceMaterial","__lambert","MeshLambertMaterial","__matcap","MeshMatcapMaterial","__normal","MeshNormalMaterial","__phong","MeshPhongMaterial","__physical","MeshPhysicalMaterial","__standard","MeshStandardMaterial","__toon","MeshToonMaterial","__points","PointsMaterial","__shadow","ShadowMaterial","basic","lambert","phong","physical","standard","shadowSide","bumpMap","addons","bumpScale","normalMap","normalMapType","normalScale","alphaMap","alphaTest","aoMap","aoMapIntensity","blendDst","blendDstAlpha","blendEquation","blendEquationAlpha","blendSrc","blendSrcAlpha","blending","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","clearcoatRoughnessMap","clipIntersection","clipShadows","clippingPlanes","colorWrite","depthFunc","displacementBias","displacementMap","displacementScale","emissive","emissiveIntensity","emissiveMap","envMapIntensity","farDistance","flatShading","fog","gradientMap","lightMap","lightMapIntensity","matcap","metalness","metalnessMap","nearDistance","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","precision","premultipliedAlpha","referencePosition","reflectivity","refractionRatio","roughness","roughnessMap","shininess","sizeAttenuation","specular","specularMap","stencilFail","stencilFunc","stencilFuncMask","stencilRef","stencilWrite","stencilWriteMask","stencilZFail","stencilZPass","transmission","transmissionMap","version","vertexColors","vertexTangents","wireframe","wireframeLinecap","wireframeLinejoin","wireframeLinewidth","toon","getEditableProps","InstancedMesh","SkinnedMesh","geometryOptions","item_type","cubeMaterials","item_params","item_args","files","loadOpt","attrs","materials","op","tc","propertyTypes","customDepthMaterial","customDistanceMaterial","matrixWorldNeedsUpdate","modelViewMatrix","normalMatrix","onAfterRender","onBeforeRender","renderOrder","loadingCount","setParent","progressing","loader","getLoader","ps","setDRACOLoader","dracoLoader","setDecoderPath","roughnessMipmapper","setMaterialNeedsUpdate","traverseChild","materialNeedsUpdate","useRoughnessMipmapper","gi","ct","loadArgs","modelData","succ","isObject3D","xhr","pro","msg","pc","loaded","total","loadWithMaterials","loaders","setPath","loadFont","FontLoader","pmremGenerator","PMREMGenerator","compileEquirectangularShader","setDataType","UnsignedByteType","fromEquirectangular","gltf","fbx","TextureLoader","cubetexture","CubeTextureLoader","stl","mtl","svg","tds","udf","getConfigData","la","lightProps","parseProperties","inputProps","outputProps","setable","checkBefore","tv","getLightProperties","lightType","lightPropertyTypes","object3d","getShadowPropTypes","shadowPropertyTypes","lightConfigData","keywords","ambientlight","ambientlightprobe","directionallight","hemispherelight","hemispherelightprobe","pointlight","rectarealight","spotlight","lightprobe","sh","groundColor","power","penumbra","autoUpdate","mapPass","normalBias","output","inpCfg","checkedValues","addCheckedItem","parseObject","isGeometry","isMaterial","hsl","element","parseString","parseArray","parseThree","fp","shift","exp","argms","defVal","Color","convertSRGBToLinear","totalSRGBToLinear","re2","getObjectAnimateHandler","origin","parseData","toJSON","TransparentBase64Image","Scene","sceneSettings","getScene","cmt","env","addSimpleEnv","fogExp2","axesHelper","addAxesHelper","setScene","fromScene","setBackgroundCokor","addToScene","removeFromScene","getSceneSize","AuthenticationService","ADMIN","AGENCY","AFFILIATE","user","password","setUser","PLANE_WIDTH","PLANE_HEIGHT","CAMERA_HEIGHT","position_x","position_y","position_z","rotation_x","rotation_y","rotation_z","blur_plane","showWireframe","originShader","isAssigned","deployed","_ShaderChunk","shadowmap_pars_fragment","DynamicShadows","defaultProps","frustrum","shadowLights","lightShadowList","cloneLightShadowList","shader","bootstrap","pcssInit","turnOffPcss","refreshShadows","turnOnPcss","light_intensity","clone_intensity","getPCSS","removeMesh","cloneLightShadows","setAllLightProps","setAllCloneLightProps","lightID","cloneLightID","setAllLightIntensityNyPercentage","percentage","setCloneLightIntensityNyPercentage","updateLightShadows","updateMeshShadows","objectDAta","floorObject","inScene","_parent","updateShaderChunk","updateList","dashed","sprite","cube","equirect","distanceRGBA","keyArr","updateAllMaterial","getCurrentFragment","ModelListComponent","clickMore","clickItem","AuthEffects","actions$","login$","login","loginSuccess$","DebounceInputDirective","defaultDebounceTime","debounceEmit","updateChange","changeInput","_euler","_vector","_lockEvent","_unlockEvent","_PI_2","PointerLockControls","isLocked","minPolarAngle","maxPolarAngle","onMouseMove","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","setFromQuaternion","setFromEuler","onPointerlockChange","ownerDocument","pointerLockElement","onPointerlockError","connect","disconnect","getDirection","direction","applyQuaternion","moveForward","setFromMatrixColumn","crossVectors","addScaledVector","moveRight","lock","requestPointerLock","unlock","exitPointerLock","PriVacyStatusLabels","draft","published","PriVacyStatusOptions","StartupService","httpClient","menuService","langData","appData","setTranslation","setDefaultLang","setApp","setPaths","setupMenu","menu","myMenu","menuItems","buildMenuItem","group","childrenItem","i18n","iconCode","link","menuDefault","myRoleData","hasAdminRole","webMenu","Models","getMeshFromObject","loadModel","option","loadParams","parseModel","ot","trans","lv","getCenter","dimensions","pivot","centerPivot","$type","getModel","getModelAndConvertToAppObjectData","__trans","animations","sizeA","ItemTableService","dbService","autoIncrement","required","download_source_url","load_options","InpTextareaComponent","_old","TabObjectComponent","loadedChange","loadedPhoto","loadedElement","loadedBackground","caculateFacePos","checkFacePos","posRefs","powVal","Camera","cameraList","bootCamera","setCameraPosition","setCameraRotation","disabled","changeCameraLookFace","distence","posSetting","addCamera","getCamera","ctlopt","pars","cubeRenderTarget","lookat","getAddedCamera","changeCamera","PanelLightComponent","Params","paramFormGroup","lightShadow","shadowTemp","defPos","accessName","accNs","updateName","mkObjMap","ns","clearColor","texturePass","texturePassOpacity","texturePass2","texturePass2Opacity","cubeTexturePass","cubeTexturePassOpacity","clock","addPass","addEffect","effectOptions","effectParams","effect_type","effect_options","getDelta","cubeTexturePassP","gui","stats","genCubeUrls","postfix","InpSelectGroupComponent","faceOpts","VectorControlsComponent","css","faceOptions","currentFace","initCanvas","innerHTML","setCanvasWrapper","AppEditorStorageService","PanelMeshCustomizeComponent","showPanel","hidemeshpanel","hidePanel","asyncMeshSetting","__inputs__","updateModelMeshMaterial","AppComponent","angulartics2Mixpanel","startTracking","setUsername","username","TabTemplateCreateFormComponent","templateService","storage","searchStatus","categories","searchResults","isSearching","hasResult","info","asyncForm","categoryOptions","privacyStatusOptions","showForm","syncInfo","updateCategories","explore","search","getByCategories","cate","parseItemList","templates","getAll","parseItem","cat","updateInfo","isLayout","endLoading","CollapseMeshMaterialComponent","updateInputs","toggle","TabLightComponent","height50","TemplateListComponent","EventDispatcher","$_listeners","$_dispatchedEvents","setDefaultEventOptions","hasEventListener","Lights","lightTypes","$lights","addLightObject","removeLightObject","lightOptions","objectData","cvalue","addFlare","lensflare","lightTemplateData","InpRangeGroupComponent","valChange","extendStatics","setPrototypeOf","__proto__","__extends","__","__assign","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","__generator","_","sent","trys","ops","verb","iterator","__spreadArray","pack","ar","toCodePoints","fromCodePoint","chars","lookup","decode","polyUint16Array","polyUint32Array","UTRIE2_SHIFT_2","UTRIE2_SHIFT_1","UTRIE2_INDEX_SHIFT","UTRIE2_SHIFT_1_2","UTRIE2_LSCP_INDEX_2_OFFSET","UTRIE2_DATA_BLOCK_LENGTH","UTRIE2_DATA_MASK","UTRIE2_LSCP_INDEX_2_LENGTH","UTRIE2_INDEX_2_BMP_LENGTH","UTRIE2_UTF8_2B_INDEX_2_OFFSET","UTRIE2_UTF8_2B_INDEX_2_LENGTH","UTRIE2_INDEX_1_OFFSET","UTRIE2_OMITTED_BMP_INDEX_1_LENGTH","UTRIE2_INDEX_2_BLOCK_LENGTH","UTRIE2_INDEX_2_MASK","slice16","slice32","createTrieFromBase64","Trie","base64","CR","LF","ZWJ","RI","BREAK_NOT_ALLOWED","BREAK_ALLOWED","UnicodeTrie","SPACE","colorType","angleType","transform","loadSerializedSVG","InpTextComponent","PropInputsComponent","ObjectManager","$meshes","$models","$objects","draggablePanel","floorStatus","downloadLink","objectLoadingCount","objectLoadingTotal","pendingModels","pendingObjects","objectManagerBoot","addObjectData","updateHandler","parseUpdateHandler","propList","removeObjectData","addSettingModelItem","custom_file","optionData","ob","_secret_key","addModel","hd","addGrid","addGroup","currentLoad","percent","groupData","getObj","main","textures","materialIndex","settingData","cast","receive","setMeshData","paramData","inb","ism","isn","hasInd","meshName","isSn","isNi","updateType","onlyProp","getObjectSize","getDownloadLinkElement","downloadUrl","filename","href","download","click","exportItemAsGltf","gltfExporter","trs","onlyVisible","truncateDrawRange","binary","maxTextureSize","Infinity","raw","ArrayBuffer","saveArrayBuffer","saveString","webkitURL","LostDbTableService","dbname","primaryKey","database","useDatabase","createIfNotExists","col","table","foreinKey","localKey","row","addColumn","modifyTable","dropColumn","insert","condition","orderBy","limit","getLastInsertID","lii","lastInsertID","EventManager","getIsAuthenticating","isAuthenticating","TabLightsComponent","confirmService","lightTemplates","changeHeight","loadLight","getLightList","addLightByTemplate","showDeleteConfirm","deleteLight","attachLightInEditor","LostDbService","db","tables","tableName","close","tb","getTable","defaultValue","defTypeVals","number","ty","defval","isTableExists","parseColumns","columnName","column","parseColumn","$id","dhk","parseColumnData","maskTable","isN","selectColumns","ca","isCondFunc","isCondObj","masks","whereStt","orderByList","order","TabModelComponent","itemService","hasMoreResult","hasMoreCategories","searchData","categoryData","current_page","page_total","items","page","TabGeometryComponent","geoService","geometries","onAddSuccess","AuthModule","forFeature","EventManagerService","__subServices","removeSub","listenner","API_CUSTOMERS_URL","TemplateService","httpService","query","getOut","TemplateId","I18nHttpLoaderFactory","StartupServiceFactory","startupService","APPINIT_PROVIDES","provide","useFactory","deps","multi","AppModule","useClass","forRoot","runtimeChecks","strictStateImmutability","strictActionImmutability","instrument","appId","autoRegister","autoResubscribe","notificationClickHandlerMatch","notificationClickHandlerAction","notifyButton","register","LightItemComponent","clickLight","clickDelete","onClick","onClickDelete","AppEditorEventService","InpNumberComponent","Floor","enableFloor","aboveFloor","floorSettings","inits","bootFloor","updateFloorSetting","updateFloorObject","updateGridHelper","gridHelperObject","divisions","gridHelper","GridHelper","axesHelperObject","updateAxesHelper","ss","AxesHelper","showAxesHelper","hideAxesHelper","floorParams","__floorObject","materialOptions","removeFloor","TabProjectSettingComponent","ModelItemComponent","curTime","onDragStart","evt","itemElement","SHARE_SERVICES","TabForegroundComponent","appEvents","loadForeground","emitRefresh","getForegrounds","addForeground","onLibraryModalCancel","addForegroundData","updateForegroundData","deleteForeground","EditorToolbarService","keyListenners","onClickHandle","btns","bk","listen","CanvasLayerComponent","app3D","canvas3D","appStatus","elementStatus","setCanvas","TabIndex2","ProjectSidebarComponent","isInit","LoginComponent","store","formBuilder","submitted","loginForm","remember","isAuthenticating$","valid","actionPayload","onSubmit","ControlsEngine","$data","$options","$Mesh","$Geometry","$Material","$Light","$Composer","$mainEngine","mainEngine","controlData","ControlSyncEngine","getControlEngine","PanelModelObjectTabPropertiesComponent","doAfterViewInit","TemplateItemComponent","importTemplate","$document","simpleTags","domEvents","allEvents","htmlTags","inputTypes","inputTags","$window","$root","oneTimeData","isset","stopCallChildrenTask","curremtCallChildrenMethodID","closest","selector","finder","isDom","isQuery","els","querySelectorAll","closestList","findLength","parents","getParentNodes","parentLength","Dom","static$isDomClass","$el","const$isDom","$tagName","$className","$children","$parent","$__transmissionEventListeners","$__transmissionStatus","$__canSetChildren","$__dynamicSync","$__dynamicAttrs","$_pendingContents","$___show___","$___parentNode___","$___markcomment___","$__dataTypes__","$__syncOnChange__","$__dataSync__","__setBootData__","__boot__","__transmissionEventListeners","fromChildren","fromParent","fromSiblings","__dynamicAttrs","_pendingContents","__canSetChildren","__dataTypes__","__init__","getDefaultSelector","__dynamicSync","attr","dyna1micAttrs","camelKey","slugKey","__changeAccessorValue__","___assignDynamicProperties___","___show___","_show","vpt","opc","getCssProp","setCssProp","___markcomment___","insertBefore","___parentNode___","createComment","tagName","className","previous","defineProperties","__toData__","onSet$id","onSet$className","removeClass","addClass","onSet$children","onSetChildren","onGet$children","getChildren","returnValue","onSet$parent","onSetParent","becomeAChild","setElement","const$getDefaultSelector","final$setElement","unshift","addDynamicAttr","dataTypeAttrs","setDataTypeAttribute","contents","content","final$setup","final$setDataTypeAttribute","sync","isObjectData","isArrayData","isPrimitive","__dataSync__","__addChangeEvent__","__syncOnChange__","value2","__PARENT__","keyOf","vlchange","final$addDynamicAttr","__addSetGetValue__","instanceID","handleInfo","getTreeMethod","callChildrenMethod","passed","isDomEvent","addDomEvent","addEvent","hasEvent","evs","ev","removeEvent","triggerEvent","unbind","const$fn","const$getTreeMethod","is","elm","ell","ele","ee","getProp","all","setProp","removeProp","propVal","getAttribute","innerText","getHtml","isGlobalOrRoot","setHtml","html","setContent","ava","attrData","dataRaw","kk","classlist","mapFunc","classList","classname","hasClass","contains","const$append","isDomClass","isDomQuery","const$prepend","const$appendTo","domEl","const$prependTo","prepend","hasDomChild","chl","removeDomChild","final$removeChild","removeDomEl","ch","final$remove","final$setContent","final$stopTransmission","__transmissionStatus","final$receiveFromParent","receiveFromParent","channel","sentId","stopTransmission","stopPropagation","listFn","mt","mtfs","__sendToChildren__","final$__sendToChildren__","final$sendToChildren","final$onParentTransmission","onParentTransmission","final$onParentData","final$receiveFromChildren","fnList","sendToParent","final$sendToParent","receiveFromChildren","final$onChildrenTransmission","onChildrenTransmission","final$onChildrenData","final$callParentMethod","onChildrenCallMethod","final$cpm","cpm","callParentMethod","final$parentCall","final$callParent","final$onChildrenCallMethod","final$callChildrenMethod","__callChildrenMethod__","final$ccm","final$childrenCall","final$callChildren","final$__callChildrenMethod__","instanceId","onCallMethodFromParent","final$onCallMethodFromParent","final$stopCallChildrenMethod","final$sendToSiblings","sibling","onReceiveFromSiblings","final$onReceiveFromSiblings","final$callSiblingMethod","final$callSiblings","callSiblingMethod","final$siblingCall","final$csm","getElementArgsData","rules","hasTag","getDomInf","isElement","isDefault","final$getRootElement","getRootElement","final$moveTo","moveIn","final$moveChild","moveChild","receiveDomEl","final$moveIn","oldparent","static$toString","static$withParent","contentf","inf","isSimple","isArrayContent","isTwoContent","biddingAttrs","addAttrValue","cnt","htmlObject","csk","f2","isEvent","cssKey","ck","cv","attrObj","removeAttribute","childrenContents","tn","createEl","boot","parseAttrs","changeTagName","addEv","attachEvent","documentReady","readyState","other","contentMode","attrMode","fail","obj2","isHtmlTag","make","eventHandler","evCallback","task","getEvents","getEventData","eventName","isDomBasicEvent","HTMLElement","getTree","elementStop","isHTML","checkHtmlStr","secret_id","VectorControlsService","TabSceneComponent","loadedForeground","defaultTypeValues","LocalDB","isUpdate","isA","isO","cols","columnCount","cl","colCfg","updateDatabase","rowData","parseTableRowData","InpRangeComponent","JwtInterceptor","auth","accessToken","setHeaders","Authorization","MenuService","change$","resume","imgListTypes","ImageService","pageCount","ImageId","TabBackgroundComponent","bgOptions","appEvent","getBackgroundSetting","updateBackground","updateBackgroundData","FG_POSKEYS","xy","FG_REPEAT","repeat","no","FG_BGSIZES","auto","contain","cover","FG_DEFAULT_DATA","MeshGeometryService","SelectBoxComponent","PanelLightService","InpNumberGroupComponent","ClientEditToolbarService","SharedModule","menuData","childs","ImageLibraryComponent","imageService","lastUrl","lastParams","getImages","appendImageFiles","proccessHDRThumbnail","ANT_MODULES","AppUIModule","useValue","preventDuplicates","LoadingLayerComponent","ForegroundLayerItemComponent","zIndex","updateEvent","setStyle","bgImageUrl","TemplateSidebarComponent","ViewportService","TabTemplateComponent","InpRotationGroupComponent","rotateCallnack","ClientViewportComponent","toolbar","droppable","isLoad","appTem","subToolbar","pointerup","transferEvent","moduleKey","hasChangeApp","deregisterAllEventService","checkPointerPosition","toDataUrl","TabShadowComponent","getShadowSetting","updateShadowSetting","updateSetting","MaterialInputsComponent","setType","changeType","ItemService","ItemId","ViewportComponent","THUMBNAIL_ASSDT_URL","DraggingGeometryComponent","isDragging","viewportBounding","currentPos","geometryType","draggingStyle","previewSecretKey","previewObject","dragStart","updatePoistion","dragEnd","onMove","createGeometryPreview","removeGeometryPreview","initEvents","hideDraggingIten","dropGeometry","meshEngineData","getMeshEngineData","meshSettingData","fixSize","eo","io","Controls","controlList","controlChangingStatus","controlDoActionAfter","controlActionTimeout","controlCheckTimer","controlEffectTimer","controlActionTimeoutID","controlActionWaiting","maskLayer","controlChangingByFPSID","controlBoot","getControl","__id","addControl","dfo","instructions","fontSize","blocker","orbit","getAddedControl","cameraOrtho","ortho","cameraPersp","persp","isPerspectiveCamera","randomFoV","randomZoom","zoom","setCurrentConttrolProp","_tempVector","_tempVector2","_tempQuaternion","_unit","X","Z","_mouseDownEvent","_mouseUpEvent","_objectChangeEvent","TransformControls","_gizmo","TransformControlsGizmo","TransformControlsPlane","propName","propValue","worldPosition","worldPositionStart","worldQuaternion","worldQuaternionStart","cameraPosition","cameraQuaternion","pointStart","pointEnd","rotationAxis","rotationAngle","eye","_startNorm","_endNorm","_cameraScale","_parentPosition","_parentQuaternion","_parentQuaternionInv","_parentScale","_worldScaleStart","_worldQuaternionInv","_worldScale","_positionStart","_quaternionStart","_scaleStart","_getPointer","getPointer","_onPointerDown","_onPointerHover","onPointerHover","_onPointerMove","_onPointerUp","updateMatrixWorld","decompose","dragging","intersect","intersectObjectWithRay","axis","planeIntersect","translationSnap","scaleSnap","ROTATION_SPEED","cross","rotationSnap","setFromAxisAngle","isTransformControls","pointerHover","setPointerCapture","pointerId","pointerDown","pointerMove","releasePointerCapture","pointerUp","includeInvisible","allIntersections","intersectObject","_tempEuler","_alignVector","_zeroVector","_lookAtMatrix","_tempQuaternion2","_identityQuaternion","_dirVector","_tempMatrix","_unitX","_unitY","_unitZ","_v1","_v2","_v3","gizmoMaterial","gizmoLineMaterial","matInvisible","matHelper","matRed","setHex","matGreen","matBlue","matRedTransparent","matGreenTransparent","matBlueTransparent","matWhiteTransparent","matYellowTransparent","matYellow","matGray","arrowGeometry","translate","scaleHandleGeometry","lineGeometry","lineGeometry2","rotateY","rotateX","TranslateHelperGeometry","gizmoTranslate","XYZ","XY","YZ","XZ","pickerTranslate","helperTranslate","START","END","DELTA","gizmoRotate","XYZE","E","helperRotate","AXIS","pickerRotate","gizmoScale","pickerScale","helperScale","setupGizmo","gizmoMap","gizmo","tempGeometry","force","handles","isOrthographicCamera","tan","setFromRotationMatrix","AXIS_HIDE_TRESHOLD","PLANE_HIDE_TRESHOLD","atan2","multiplyQuaternions","_color","_opacity","some","isTransformControlsGizmo","isTransformControlsPlane","InpRadioComponent","ThumbnailPipe","quanlity","ComposerEffects","effectPass","getEffect","ek","bloom","eff","aaaaa","bl","be","bokeh","bke","brightnesscontrast","bc","brctr","bce","chromaticaberration","cma","cmabe","coloraverage","cla","colordepth","cde","de","depthoffield","dofe","dotscreen","ds","dse","gammacorrection","gc","gce","glitch","ge","godrays","gr","gre","grid","huesaturation","hs","hse","noise","ne","outline","ol","oe","pixelation","px","pe","realisticbokeh","rbe","smaa","smaae","ssao","ssaoe","scanline","se","selectivebloom","sb","sbe","sepia","shockwave","sw","swe","te","tonemapping","tm","tme","vignette","ve","deploy","Object2Image","O2i","WIDTH","HEIGHT","colorManagement","ambient","pointLight","directionallight2","getImage","center","rad","cropWidth","cropHeight","minImg","minCrop","dataURL","isJPEG","imgDom","InpTextureGroupComponent","InpColorGroupComponent","typeEnable","NORETURN_VALUE","getArgs","_interface","objectCreated","createConstructor","checkFn","esc","definePropertyGroup","groupConfig","createClass","isGlobal","createClass$","$class","$isGlobal","hasClassName","commited","$constants","$props","$dynamics","$boots","$inits","$calls","$classData","constructs","constants","accessorMethods","calls","__contructs","ES5Class","checkConstructorCalled","stdParent","cn","__instance","__parent","__parents","iof","caller","checkCreateNewInstanceByStaticConstructorCall","newInstance","classContructor","copyContructs","__contruct","__class","addConstructor","parentConstructor","args1","pConstructor","commit","__update__properties__","__addAccessorValue","parentOpt","$ignore","__type","inherit","superClass","_parents","_extends","superContructs","getContructs","superExtends","getExtends","superInits","getInits","superContants","getConstants","superUses","getUses","superProps","getProps","superMethods","getMethods","superAccessorMethods","getAccessorMethods","superParents","getParents","superStatic","getStatic","bms","getBootMethods","addBootMethod","ims","getInitMethods","addInitMethod","cln","exts","isConst","throwConstError","traits","assignUses","assignPropMethod","std","mts","__addMethod","__addAccessorKey","parseDataProps","isInstance","pa","getParent","getIntances","removeBootMethod","resetBootMethods","removeInitMethod","valu","withData","createInstance","resetInitMethods","noReturn","updateProperties","override","__callStatic","__instance__id__","__addAccessorValue__","isExists","da","oldVal","addConstValue","kl","pre","dynamicCreateMode","_class","BaseInputComponent","pendingStatus","Boolean","Role","ForegroundItemComponent","repeatOptions","sizeOptions","posimg","toggleActive","initialState","errorMessage","isAuthenticated","selectAuthState","ScrollableDirective","scrollBottom","scrollTop","scrollDown","scrollHeight","ObjectToolbarService","InpSwitchGroupComponent","InpVector3GroupComponent","btnCenter","vectorCallback","BaseComponent","emitter","eventServiceContainers","__show__","__refresh_expire__","__refresh_status__","viewInited","onBoot","onChangeSubEvents","initOnce","initFirst","onInit","destroy","onDestroy","afterViewInit","onAfterViewInit","__refresh__callback__","disptch","dp","listennerParams","__parseEventHandler","__handleDispatchedEvents","__addDispatchedEvent","__addEventListener","__removeEventListener","__dispatchEvent","EItemStatus","ItemDefaultData","UnAuthGuard","ImageLibraryItemComponent","radials","circles","color1","color2","divisionsl","colorCenterLine","colorGrid","handlerData","updateHandlerData","TabProjectInfoComponent","_lookDirection","_spherical","_target","FirstPersonControls","lookSpeed","lookVertical","activeLook","heightSpeed","heightCoef","heightMin","heightMax","constrainVertical","verticalMin","verticalMax","mouseDragOn","autoSpeedFactor","mouseX","mouseY","moveBackward","moveLeft","viewHalfX","viewHalfY","lat","lon","handleResize","onMouseDown","onMouseUp","onKeyDown","moveUp","moveDown","onKeyUp","isVector3","setOrientation","targetPosition","clamp","heightDelta","actualMoveSpeed","actualLookSpeed","verticalLookRatio","phi","mapLinear","setFromSphericalCoords","_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown","_onKeyUp","setFromVector3","radToDeg","TabEditorInfoComponent","AuthGuard","LAYOUT","USER","APP","ROLES","PATHS","SettingService","notify$","removeItem","layoutIn","fixed","collapsed","boxed","rolesIn","pathsIn","appIn","year","userIn","refeshToken","expiresIn","asObservable","TabControlsComponent","_startEvent","_endEvent","OrbitControls","minZoom","maxZoom","minAzimuthAngle","maxAzimuthAngle","zoomSpeed","rotateSpeed","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","position0","zoom0","_domElementKeyEvents","getPolarAngle","spherical","getAzimuthalAngle","getDistance","listenToKeyEvents","saveState","STATE","quat","setFromUnitVectors","quatInverse","twoPI","rotateLeft","getAutoRotationAngle","sphericalDelta","isFinite","makeSafe","panOffset","setFromSpherical","zoomChanged","onContextMenu","onMouseWheel","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","rotateUp","panLeft","objectMatrix","panUp","pan","deltaX","deltaY","targetDistance","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","handleTouchStartRotate","handleTouchStartPan","handleTouchStartDolly","dx","dy","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","getSecondPointerPosition","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleTouchEnd","addPointer","onTouchStart","onTouchMove","onTouchEnd","removePointer","mouseAction","ctrlKey","metaKey","shiftKey","trackPointer","DOLLY_ROTATE","passive","MapControls","AppEngine","createScene","viewport","addForegrounds","StringTemplateOutletDirective","defaultTemplate","inputTemplate","inputViewRef","defaultViewRef","isTemplate","updateView","loadChildren","ItemModule","TemplateModule","ProjectModule","redirectTo","AppRoutingModule","enableTracing","relativeLinkResolution","preloadingStrategy","ImageLibraryService","callb","ItemViewportComponent","LocalStorageEngine","namespace","verison","__namespace","__verison","__init","__getNamespaceData","__addAccessors","__setNamespaceData","__updateNamespaceData","Storage","LS","CollapseBaseComponent","MaskLayerComponent","TabEditorSettingComponent","MovingEngine","checkCamera","getMovingEngine","TabCameraComponent","editorToolbar","posOptions","faceMatrix","saveCurrentCameraPosition","costom","getCameraSetting","initCamera","cps","updateEngine","updateCameraSetting","emitUpdateSettings","updateCameraProperties","DroppableLayerComponent","ClientEditToolbarComponent","moreMenu","more","GeometryItemComponent","DraggingItemComponent","canMove","isLoading","cssEffect","mousePosition","viewportPointerPosition","addMode","addPosition","updateDropElem","dropCenter","updateViewportPointerPosition","dragElement","dropItem","dropItemAnimate","addModelTiem","updateObjectSettingDataAndScene","ModalConfirmService","modal","onOkHandle","onCancelHandle","defaultTexts","del","ok","conf","onOk","nzTitle","nzContent","btnOkType","nzOkType","nzOkText","btnOkText","isDanger","nzOkDanger","nzCancelText","btnCancelText","nzOnOk","onclickOk","nzOnCancel","onClickCancel","confirm","ForegroundLayerComponent","loadForegrounds","Vector3Component","bootstrapModule","PanelLightTabParamsComponent","webpackEmptyAsyncContext","req","module","exports","TabViewerSceneComponent"],"mappings":"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AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;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","file":"main-es5.js","sourcesContent":["import { ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { isArray, isNumber, isObject, isString } from '@app/_core/helpers/utils';\nimport { BaseInputComponent } from '../base-input/base-input.component';\n\n@Component({\n    selector: 'inp-select',\n    templateUrl: './inp-select.component.html',\n    styleUrls: ['./inp-select.component.scss']\n})\nexport class InpSelectComponent extends BaseInputComponent implements OnInit, OnChanges {\n    @Input() fullwidth: boolean = false;\n    @Input() options: any;\n    _options: Array<{ label: string, value: string }> = [];\n    constructor(private cd: ChangeDetectorRef) {\n        super();\n    }\n\n\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.options) {\n            this.syncFromParent();\n        }\n\n    }\n\n\n    ngOnInit(): void {\n        this.syncFromParent();\n\n    }\n\n    syncFromParent() {\n        let hasValue = false;\n        if (isArray(this.options)) {\n            this._options = [];\n            \n            this.options.map((value) => {\n                if (isObject(value)) {\n                    if (Object.prototype.hasOwnProperty.call(value, 'value') && Object.prototype.hasOwnProperty.call(value, 'label')) {\n                        this._options.push(value);\n                    }\n                } else if (isString(value) || isNumber(value)) {\n                    this._options.push({\n                        value: value,\n                        label: value\n                    });\n                }\n            });\n            \n\n        } else if (isObject(this.options)) {\n            let s = false;\n            this._options.splice(0);\n            for (const key in this.options) {\n                if (Object.prototype.hasOwnProperty.call(this.options, key)) {\n                    const value = this.options[key];\n                    if (isObject(value)) {\n                        if (Object.prototype.hasOwnProperty.call(value, 'value') && Object.prototype.hasOwnProperty.call(value, 'label')) {\n                            this._options.push(value);\n                        }\n                    } else if (isString(value)) {\n                        s = true;\n                        this._options.push({\n                            value: key,\n                            label: value\n                        });\n                    }\n                }\n            }\n            if (s) {\n                this.value = String(this.value);\n            }\n        }\n        if(this._options.length){\n            this._options.map(opt => {\n                if(opt.value == this.value) hasValue = true;\n            })\n            if(!hasValue){\n                this.value = this._options[0].value;\n            }\n        }\n        \n    }\n    \n}\n","<nz-select [(ngModel)]=\"value\" (ngModelChange)=\"onChange($event)\" [class.width-100]=\"fullwidth\">\n    <nz-option *ngFor=\"let p of _options\" [nzValue]=\"p.value\" [nzLabel]=\"p.label\"></nz-option>\n</nz-select>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { assignValue, isArray, isEmpty, isObject } from '@app/_core/helpers/utils';\nimport { InpEvent } from '@app/_shared/shared.type';\nimport { BaseComponent } from '../../base/base.component';\n\n@Component({\n    template: ''\n})\nexport abstract class BaseInpGroupComponent extends BaseComponent {\n    @Input() name: string = '';\n    @Input() value: any = \"\";\n    @Input() label: string = '';\n    @Input() placeholder: string = '';\n    @Input() valueType: string = null;\n    @Input() config: {\n        label: string,\n        name: string,\n        value: any,\n        [key: string]: any\n    } = null;\n    @Input() attach: {\n        label?: string,\n        name?: string,\n        value?: any,\n        [key: string]: any\n    } = null;\n\n    hasAttach: boolean = false;\n\n    old: any = '';\n\n    @Output() subcribe = new EventEmitter<InpEvent>();\n\n    defaultValues: {\n        label: string,\n        name: string,\n        value: any,\n        [key: string]: any\n    } = {\n            name: \"\",\n            label: \"\",\n            value: \"\",\n            placeholder: \"\"\n        }\n\n\n\n\n    onChange(event) {\n        if (isObject(event) && Object.prototype.hasOwnProperty.call(event, 'value')) {\n            this.value = event.value;\n        }\n        if (isObject(this.old) && isObject(this.value)) {\n            if (JSON.stringify(this.old) !== JSON.stringify(this.value)) {\n                this.emitChange();\n            }\n        } else if (this.old !== this.value) {\n            this.emitChange();\n        }\n\n    }\n    onAttachChange(event) {\n        this.subcribe.emit({\n            name: event.name,\n            value: event.value\n        });\n\n    }\n\n    emitChange() {\n        var ov = isObject(this.value) ? assignValue({}, this.value) : this.value;\n        var self: any = this;\n        var old = this.old;\n        if (typeof self.onInpValChange == \"function\") {\n            self.onInpValChange(ov);\n        }\n        this.subcribe.emit({\n            name: this.name,\n            value: ov,\n            old: old\n        });\n        this.old = ov;\n    }\n\n    set val(value) {\n        this.value = value;\n        this.onChange({ type: \"change\", value: value });\n    }\n\n    inpInit() {\n        var self: any = this;\n        var checkList = ['name', 'label', 'value', \"placeholder\", \"valueType\"];\n\n        if (this.config && isObject(this.config) && !isEmpty(this.config)) {\n            if (typeof self.configProps != \"undefined\" && isArray(self.configProps)) {\n                self.configProps.map(s => checkList.indexOf(s) == -1 ? checkList.push(s) : s);\n            }\n            checkList.map(p => {\n                if (Object.prototype.hasOwnProperty.call(self, p)) {\n                    if (Object.prototype.hasOwnProperty.call(this.config, p)) {\n                        if (self[p] === this.defaultValues[p]) {\n                            self[p] = this.config[p];\n                        }\n                    }\n                }\n            });\n\n            if (!this.label) {\n                this.label = this.name;\n            }\n            if (this.config.attach && isObject(this.config.attach) && !isEmpty(this.config.attach)) {\n                if (!isObject(this.attach)) this.attach = {}\n                var checkattach = ['name', 'label', 'value', \"placeholder\", 'min', 'max', 'step'];\n                checkattach.map(p => {\n                    if (Object.prototype.hasOwnProperty.call(this.attach, p)) {\n                        if (Object.prototype.hasOwnProperty.call(this.config.attach, p)) {\n                            if (this.attach[p] === this.defaultValues[p]) {\n                                this.attach[p] = this.config.attach[p];\n                            }\n                        }\n                    } else {\n                        if (Object.prototype.hasOwnProperty.call(this.config.attach, p)) {\n                            this.attach[p] = this.config.attach[p];\n                        }\n                    }\n\n                });\n\n\n            }\n\n        }\n        if (!isEmpty(this.attach)) {\n            this.hasAttach = true;\n        }\n    }\n\n}\n\n\n\n","import { Injectable } from '@angular/core';\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { Observable, throwError, of } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { AuthenticationService } from '../../auth/services';\r\n\r\n@Injectable()\r\nexport class ErrorInterceptor implements HttpInterceptor {\r\n  constructor(private authenticationService: AuthenticationService, private router: Router) {}\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    return next.handle(request).pipe(\r\n      catchError((err) => {\r\n        if ([401].indexOf(err.status) !== -1) {\r\n          // auto logout if 401 Unauthorized or 403 Forbidden response returned from api\r\n          this.authenticationService.logout();\r\n\r\n          // tslint:disable-next-line: deprecation\r\n          this.router.navigate(['/auth/login']);\r\n        }\r\n        const error = err.message || err.name || err.statusText;\r\n        return throwError(err.error);\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Action } from '@ngrx/store';\r\n\r\nexport enum AuthActionTypes {\r\n  LOGIN = '[Auth] Login',\r\n  LOGIN_SUCCESS = '[Auth] Login Success',\r\n  LOGIN_FAILURE = '[Auth] Login Failure',\r\n}\r\n\r\nexport class Login implements Action {\r\n  readonly type = AuthActionTypes.LOGIN;\r\n  constructor(public payload: { email: string; password: string }) {}\r\n}\r\nexport class LoginSuccess implements Action {\r\n  readonly type = AuthActionTypes.LOGIN_SUCCESS;\r\n  constructor(public payload: any) {}\r\n}\r\nexport class LoginFailure implements Action {\r\n  readonly type = AuthActionTypes.LOGIN_FAILURE;\r\n  constructor(public payload: any) {}\r\n}\r\n\r\nexport type AuthActions = Login | LoginSuccess | LoginFailure;\r\n","import { Component, OnInit } from '@angular/core';\nimport { assignValue, inArray } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '../../base/base.component';\nimport { ObjectToolbarService } from './object-toolbar.service';\n\ninterface MenuBtn {\n    name: string,\n    text: string,\n    title?: string,\n    icon?: string,\n    isActive?: boolean\n}\n\nlet menuButtons: MenuBtn[] = [\n    { name: \"translate\", text: \"Di chuyển\", icon: \"fullscreen\", isActive: false },\n    { name: \"rotate\", text: \"Xoay\", icon: \"transaction\", isActive: false },\n    { name: \"scale\", text: \"Kéo giãn\", icon: \"expand\", isActive: false },\n    { name: \"download\", text: \"Tải tài nguyên\", icon: \"download\", isActive: false },\n    { name: \"edit\", text: \"Chỉnh sửa\", icon: \"edit\", isActive: false },\n    { name: \"delete\", text: \"Xóa\", icon: \"delete\", isActive: false },\n]\n\n@Component({\n    selector: 'viewport-object-toolbar',\n    templateUrl: './object-toolbar.component.html',\n    styleUrls: ['./object-toolbar.component.scss']\n})\nexport class ObjectToolbarComponent extends BaseComponent implements OnInit {\n\n    title: string = '';\n    currentMode: string = '';\n    show: boolean = false;\n\n    buttons: MenuBtn[] = [];\n    btnList = {\n        light: [\"translate\", \"rotate\", \"edit\", \"delete\"],\n        object: [\"translate\", \"rotate\", \"scale\", \"edit\", 'download', \"delete\"],\n        mesh: [\"translate\", \"rotate\", \"scale\", \"edit\", \"delete\"]\n    }\n    secret_key: string = \"\";\n\n    currentType: string = \"\";\n\n    constructor(private events: ObjectToolbarService) {\n        super();\n        \n    }\n\n    onChangeSubEvents(){\n        this.registerEventService(this.subEvents, {\n            \"show\": e => this.showMenu(e.data.secret_key, e.data.type, e.data.mode),\n            \"hide\": e => this.reset(),\n            \"mode.change\": e => this.changeMode(e.mode),\n        });\n    }\n\n    onInit(): void {\n        // this.activeEventServiceRegistered(this.service);\n    }\n    onDestroy(){\n        // this.deactiveEventServiceRegistered(this.service);\n    }\n\n    showMenu(key:string, type:string, mode?:string) {\n        this.reset();\n        this.secret_key = key;\n        this.currentType = type;\n        if (typeof this.btnList[type] != \"undefined\") {\n            this.show = true;\n            if (mode && inArray([\"translate\", \"rotate\", \"scale\"], mode)) {\n                this.currentMode = mode;\n            }\n            this.setButtons();\n        }\n    }\n\n    changeMode(mode: string) {\n        this.currentMode = mode;\n        this.setButtons();\n    }\n    setButtons() {\n        this.buttons = menuButtons.slice(0)\n            .filter(btn => this.btnList[this.currentType].indexOf(btn.name) !== -1)\n            .map(btn => {\n                var a: MenuBtn = assignValue({}, btn);\n                if (a.name == this.currentMode) {\n                    a.isActive = true;\n                }\n                return a;\n            })\n    }\n\n    reset() {\n        this.show = false;\n        this.buttons = [];\n        this.secret_key = \"\";\n    }\n\n    onBtnClick(mode) {\n        if (inArray([\"translate\", \"rotate\", \"scale\"], mode)) {\n            this.currentMode = mode;\n            this.buttons.map(btn => btn.isActive = btn.name == mode);\n            this.subEvents.emit({\n                type: \"mode.select\",\n                mode: mode\n            })\n        }\n        else {\n            this.subEvents.emit({\n                type: \"action\",\n                data: {\n                    action: mode,\n                    type: this.currentType,\n                    secret_key: this.secret_key\n                }\n\n            })\n        }\n    }\n}\n","<div class=\"menu-buttons\" *ngIf=\"show\">\n    <div class=\"btn\" *ngFor=\"let btn of buttons; let i=index\" title=\"{{btn.text}}\" [class.active]=\"btn.isActive\" (click)=\"onBtnClick(btn.name)\">\n        <i nz-icon nzType=\"{{btn.icon}}\" nzTheme=\"outline\"></i>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-transparent-img',\n  templateUrl: './transparent-img.component.html',\n  styleUrls: ['./transparent-img.component.scss']\n})\nexport class TransparentImgComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>transparent-img works!</p>\n","import { Injectable } from '@angular/core';\nimport LocalStorageEngine from \"../helpers/local-storage\";\n@Injectable({\n    providedIn: 'root'\n})\nexport class LocalStorageService {\n    key = \"__storage__service__\";\n    __storage__: LocalStorageEngine\n    constructor() {\n        this.__storage__ = new LocalStorageEngine(this.key);\n     }\n    /**\n     * set gia tri vao storage\n     * @param {string} key chuoi khoa de truy cap\n     * @param {*} value gia tri\n     * @returns {this}\n     */\n    set(key:any, value:any) {\n        return this.__storage__.set(key, value);\n    }\n    /**\n     * Lấy giá trị từ storage\n     * @param {string} key chuoi khoa de truy cap\n     * @returns {*}\n     */\n    get(key:any):any {\n        return this.__storage__.get(key);\n    }\n    /**\n     * Xóa giá trị\n     * @param {string} key \n     */\n    remove(key:any):boolean {\n        return this.__storage__.remove(key);\n    }\n}\n","import createClass from '@app/_core/helpers/es5.class';\r\nimport { assignValue, isArray, isEmpty, isNumber, isObject, isString } from '@app/_core/helpers/utils';\r\n\r\n\r\nimport Scene from '../traits/scene';\r\nimport Camera from '../traits/camera';\r\nimport Renderer from '../traits/renderer';\r\nimport Controls from '../traits/controls';\r\nimport GridHelper from '../traits/grid-helper';\r\nimport Lights from '../traits/lights';\r\nimport ObjectManager from '../traits/object-manager';\r\nimport {EventDispatcher} from '../libs/event-dispatcher';\r\n\r\n\r\n\r\nimport { Geometries, LightLib, LoaderLib, Materials, Meshes } from '../libs/three.libs';\r\n\r\nimport Models from '../libs/models';\r\n\r\n\r\nimport Loader from '../modules/loader'\r\nimport Composer from '../modules/composer'\r\nimport DynamicShadows from '../modules/dynamic-shadows'\r\nimport { EngineClass, EngineInstance } from './engine.doc';\r\nimport { Floor } from '../traits/floor';\r\n\r\nexport interface EditorEngineInstance extends EngineInstance {\r\n    setData(data:any): any\r\n\r\n}\r\nexport interface EditorEngineClass extends EngineClass {\r\n    setData(data:any): any\r\n    new(data: any): EditorEngineInstance\r\n    (data:any): EditorEngineInstance\r\n}\r\n\r\n\r\nconst EditorEngine = createClass(\"EditorEngine\")\r\n.uses(\r\n    Scene, \r\n    Camera, \r\n    Renderer, \r\n    Controls, \r\n    Models, \r\n    Lights, \r\n    ObjectManager, \r\n    Floor,\r\n    EventDispatcher, \r\n    GridHelper\r\n)({\r\n    data: {},\r\n    options: {},\r\n\r\n    Mesh: {},\r\n    Geometry: {},\r\n    Material: {},\r\n    Light: {},\r\n    Composer: {},\r\n    Shadows: {},\r\n    inited: false,\r\n    $controlEngine: null,\r\n\r\n    setData: function(data?:any){\r\n        if (data.composer && !isEmpty(data.composer)) {\r\n            this.composer = new Composer(this, data.composer);\r\n        }\r\n        if (data.lights && isArray(data.lights)) {\r\n            this.addLights(data.lights);\r\n        }\r\n        if (data.models && isArray(data.models)) {\r\n            this.addModels(data.models);\r\n        }\r\n        if (data.meshes && isArray(data.meshes)) {\r\n            this.addMeshes(data.meshes);\r\n        }\r\n        if (data.objects && (isArray(data.objects) || isObject(data.objects))) {\r\n            this.addObjects(data.objects);\r\n        }else{\r\n            this.emit(\"object.load.completed\");\r\n        }\r\n        if (data.grids && isArray(data.grids)) {\r\n            this.addGrids(data.grids);\r\n        }\r\n        if (data.cameras && isArray(data.cameras)) {\r\n            this.addCameras(data.cameras);\r\n        }\r\n        if (data.floor && isArray(data.floor)) {\r\n            this.addFloor(data.floor);\r\n        }\r\n        if (data.controls && isArray(data.controls)) {\r\n            this.addControls(data.controls);\r\n        }\r\n        \r\n        this.emit('setdata', data);\r\n        \r\n        \r\n    },\r\n\r\n    /**\r\n     * Hàm khởi tạo\r\n     * @param {Dom} viewport \r\n     * @param {*} data \r\n     */\r\n    constructor: function (data?:any) {\r\n        if (data && isObject(data)) {\r\n            this.data = data;\r\n        }\r\n        this.Geometry = Geometries;\r\n        this.Material = Materials;\r\n        this.Mesh = Meshes;\r\n        this.Light = LightLib;\r\n        this.Loader = new Loader(this);\r\n        \r\n        \r\n        var self = this;\r\n        \r\n        var focusIn = false;\r\n        this.on('pointerdown', function(e){\r\n            self.canChangeCamera = false\r\n            focusIn = true;\r\n        }, false)\r\n        document.addEventListener('pointerup', function(e){\r\n            if(focusIn){\r\n                self.canChangeCamera = true\r\n                focusIn = false;\r\n            }\r\n            \r\n        }, false);\r\n\r\n        this.on(\"object.added\", function(e){\r\n            if(isObject(self.controlEngine) && self.controlEngine.refresh){\r\n                self.controlEngine.refresh();\r\n            }\r\n        })\r\n    },\r\n\r\n    renew: function(data){\r\n        this.data = assignValue({}, data);\r\n        this.inited = false;\r\n        this.emit({\r\n            type: \"renew\"\r\n        })\r\n    },\r\n\r\n    updateSettings: function(){\r\n        if (this.data) {\r\n            var data = this.data;\r\n            if (isObject(data.scene)) {\r\n                var scene = data.scene;\r\n                this.updateSceneSettings(scene);\r\n                if (isObject(scene.background) && !isEmpty(scene.background))\r\n                    this.setBackground(scene.background);\r\n                if (isObject(scene.floor) && !isEmpty(scene.floor))\r\n                    this.updateSceneFloorSetting(scene.floor);\r\n                if (isObject(scene.size) && !isEmpty(scene.size))\r\n                    this.updateSceneSettings(scene.size);\r\n            }\r\n            if(isObject(data.shadow))\r\n                this.updateShadowSettings(data.shadow);\r\n            if(isObject(data.control))\r\n                this.updateControlSettings(data.control);\r\n            if(isObject(data.camera))\r\n                this.updateMainCameraSettings(data.camera, true);\r\n        }\r\n\r\n    },\r\n\r\n    reset: function (data_) {\r\n        if (isObject(data_)) this.data = assignValue({}, data_);\r\n        this.resetObjects();\r\n        this.resetLights();\r\n\r\n        this.updateSettings();   \r\n        this.setData(this.data);\r\n\r\n        this.emit({\r\n            type: \"reset\"\r\n        })\r\n    },\r\n\r\n\r\n    startup: function startup( data?:any) {\r\n        if (this.inited) return this;\r\n\r\n\r\n        if (data && isObject(data)) {\r\n            this.data = data;\r\n        }\r\n        this.Shadows = new DynamicShadows(this, this.data.shadow || this.data.shadows || {});\r\n        this.emit('startup', this.data);\r\n\r\n        this.initScene(this.data.scene || {});\r\n        this.setMainCamera(this.data.camera || {});\r\n        this.createRenderer(this.data.renderer || {}, this.data.shadow?this.data.shadow.enabled:true);\r\n        \r\n        this.camera.updateProjectionMatrix();\r\n        this.setMainControl(this.data.control || {});\r\n\r\n        this.updateSettings();\r\n        var self = this;\r\n        this.inited = true;\r\n        // this.Shadows.init();\r\n        self.ready();\r\n        if (!this.autoRenderStatus) {\r\n            setTimeout(function () {\r\n                self.render();\r\n            }, 500);\r\n        }\r\n    \r\n        \r\n        return this;\r\n\r\n    },\r\n    canChangeCamera: true,\r\n\r\n    setControlEngine: function(controlEngine){\r\n        if(!isObject(controlEngine)||this.controlEngine == controlEngine) return false;\r\n        this.controlEngine = controlEngine;\r\n        controlEngine.setMainEngine(this);\r\n        var self = this;\r\n        controlEngine.on(\"controls.change.camera\", function(e){\r\n            self.changeCameraByControlEngine(e.camera);\r\n        });\r\n        controlEngine.refresh();\r\n        setTimeout(() => {\r\n            controlEngine.refresh();\r\n        }, 10000);\r\n    },\r\n    changeCameraByControlEngine: function(camera){\r\n        if(this.canChangeCamera){\r\n            var mainPosition = this.camera.position;\r\n            var ctrlPosition = camera.position;\r\n            var mainX = mainPosition.x, mainY = mainPosition.y, mainZ = mainPosition.z;\r\n            var ctrlX = ctrlPosition.x, ctrlY = ctrlPosition.y, ctrlZ = ctrlPosition.z;\r\n            var mainDistance = Math.sqrt(\r\n                Math.pow(mainX, 2) + Math.pow(mainY, 2) + Math.pow(mainZ, 2)\r\n            );\r\n            var ctrlDistance = Math.sqrt(\r\n                Math.pow(ctrlX, 2) + Math.pow(ctrlY, 2) + Math.pow(ctrlZ, 2)\r\n            );\r\n            var ratio = mainDistance / ctrlDistance;\r\n            \r\n            mainPosition.x = ctrlPosition.x*ratio;\r\n            mainPosition.y = ctrlPosition.y*ratio;\r\n            mainPosition.z = ctrlPosition.z*ratio;\r\n            this.camera.lookAt(0, 0, 0);\r\n            if (this.control.highPerformance && this.controlCanTurnOffShadow) {\r\n                \r\n                this.startDeactiveShadowTimer(500, \"control\");\r\n            }\r\n            this.refresh();\r\n\r\n        }\r\n    }\r\n}) as EditorEngineClass\r\nexport default EditorEngine;\r\nexport {EditorEngine};\r\n","\r\nimport { Injectable } from '@angular/core';\r\nimport { StorageService } from '@app/_core/services/storage.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AppStorageService extends StorageService {\r\n    constructor(){\r\n        super();\r\n    }\r\n}","export enum EImageStatus {\r\n    draft = 'draft',\r\n    published = 'published',\r\n}\r\n\r\n\r\nexport interface ImageModel {\r\n\r\n    id: number,\r\n    owner_id: number,\r\n    upload_by: number,\r\n    sid: string,\r\n    privacy: string,\r\n    date_path: string,\r\n    filename: string,\r\n    original_filename: string,\r\n    filetype: string,\r\n    mime: string,\r\n    size: number,\r\n    extension: string,\r\n    title: string,\r\n    description: string,\r\n    created_at: string,\r\n    updated_at: string,\r\n    url: string,\r\n    thumbnail: string,\r\n    size_unit:string,\r\n    source: string,\r\n\r\n    [x:string]:any\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({ name: 'reverse' })\r\nexport class ReversePipe implements PipeTransform {\r\n  transform(value) {\r\n    if (!Array.isArray(value)) {\r\n      return [];\r\n    }\r\n    return value.slice().reverse();\r\n  }\r\n}\r\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { App3DService } from '@app/_3D/services/app-3d.service';\nimport { assignValue, inArray, isObject } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '../../base/base.component';\n\n@Component({\n    selector: 'app-modal-export-image',\n    templateUrl: './modal-export-image.component.html',\n    styleUrls: ['./modal-export-image.component.scss']\n})\nexport class ModalExportImageComponent extends BaseComponent implements OnInit {\n\n    @Input() app: App3DService;\n    title: string = \"Image Library\";\n    oldTitle: string = \"Image Library\";\n\n    isVisible = false;\n    isConfirmLoading = false;\n\n    containerStyle: string = '';\n    onDone: (...args: any[]) => any = null;\n\n    onCancel: (...args: any[]) => any = null;\n\n    listType: string = \"list\";\n    oldListType: string = \"list\";\n\n\n\n\n    constructor(\n        private cd: ChangeDetectorRef\n    ) {\n        super();\n        // this.registerEventService(events, {\n        //     open: e => this.show(e.config, e.callback, e.cancel)\n        // });\n    }\n\n\n    onInit() {\n        this.activeEventServiceRegistered(this.events);\n    }\n    onDestroy() {\n        this.deactiveEventServiceRegistered(this.events);\n    }\n\n    show(config, callback?: any, cancel?: any) {\n        this.onDone = null;\n        this.onCancel = null;\n        if (isObject(config)) {\n            if (config.title) this.title = config.title;\n            if (isObject(config.params)) assignValue(this.params, config.params);\n\n            if (typeof callback == \"function\") {\n                this.onDone = callback;\n            }\n            else if (typeof config.done == \"function\") {\n                this.onDone = config.done;\n            }\n            if (typeof cancel == \"function\") {\n                this.onCancel = cancel;\n            }\n\n            else if (typeof config.cancel == \"function\") {\n                this.onCancel = config.cancel;\n            }\n\n        }\n        this.showModal();\n    }\n\n    showModal(): void {\n        this.isVisible = true;\n        if (this.images.length == 0) {\n            this.firstLoad();\n        } else if (this.listType != this.oldListType) {\n            this.images = [];\n            this.firstLoad();\n        }\n    }\n\n\n\n    handleOk(): void {\n        let result = null;\n        if (this.mode != \"many\") {\n            this.images.map((image, index, array) => {\n                if (image.selected) {\n                    result = image;\n                    image.selected = false;\n                }\n            });\n            if (!result) return window.alert(\"Vui lòng chọn ảnh\");\n\n        } else {\n            result = [];\n            this.images.map((image, index, array) => {\n                if (image.selected) {\n                    result.push(image);\n                    image.selected = false;\n                }\n            });\n            if (!result.length) return window.alert(\"Vui lòng chọn ảnh\");\n\n        }\n\n\n        this.isConfirmLoading = true;\n        setTimeout(() => {\n            if (typeof this.onDone == \"function\") {\n                this.onDone(result);\n            }\n\n            this.isVisible = false;\n            this.oldListType = this.listType;\n            this.isConfirmLoading = false;\n        }, 1000);\n    }\n\n    handleCancel(): void {\n        this.isVisible = false;\n        this.oldListType = this.listType;\n        if (typeof this.onCancel == \"function\") {\n            this.onCancel();\n        }\n    }\n\n}\n","<nz-modal [(nzVisible)]=\"isVisible\" [nzTitle]=\"modalTitle\" [nzContent]=\"modalContent\" [nzFooter]=\"modalFooter\" (nzOnCancel)=\"handleCancel()\" [nzWidth]=\"1200\">\n\n    <ng-template #modalTitle>{{title}}</ng-template>\n\n    <ng-template #modalContent>\n        <div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\" class=\"input-group\">\n            <div nz-col class=\"gutter-row\" [nzSpan]=\"6\">\n\n            </div>\n            <div nz-col class=\"gutter-row\" [nzSpan]=\"18\">\n                <div class=\"inner-box text-right\">\n                    <div class=\"frame\">\n                        <div class=\"viewport-container\" [style]=\"containerStyle\">\n                            <div class=\"preview-canvas-containers\">\n\n                            </div>\n        \n                            <foreground-layer></foreground-layer>\n                        </div>\n                    </div>\n                    \n                </div>\n            </div>\n\n        </div>\n    </ng-template>\n\n    <ng-template #modalFooter>\n        <button nz-button nzType=\"primary\" (click)=\"handleOk()\" [nzLoading]=\"isConfirmLoading\">{{'Choose' | translate}}</button>\n        <button nz-button nzType=\"default\" (click)=\"handleCancel()\">{{'Cancel' | translate}}</button>\n    </ng-template>\n</nz-modal>","import { AfterViewInit, Component, ElementRef, OnInit } from '@angular/core';\nimport { BaseInputComponent } from '../base-input/base-input.component';\nimport Picker from 'vanilla-picker';\nimport { isObject } from '@app/_core/helpers/utils';\nimport { TransparentBase64Image } from '@app/_3D/libs/three.libs';\n@Component({\n    selector: 'inp-color',\n    templateUrl: './inp-color.component.html',\n    styleUrls: ['./inp-color.component.scss']\n})\nexport class InpColorComponent extends BaseInputComponent implements OnInit, AfterViewInit {\n    transparentBase64Image = TransparentBase64Image;\n    constructor(private elemRef: ElementRef) {\n        super();\n    }\n\n    ngOnInit(): void {\n    }\n\n    ngAfterViewInit(): void {\n        this.value = this.value && isObject(this.value) ?(\n            this.value.isColor ? \"#\" + this.value.getHexString(): (\n                this.value.$three==\"color\"?this.value.color:\"#000\"\n            )\n        ) : this.value as any;\n        var self = this;\n        // self.elemRef.nativeElement.style.backgroundColor = vl;\n        var inp = new Picker({\n            parent: this.elemRef.nativeElement.querySelector(\".output-color\"),\n            color: this.value,\n            alpha: false,\n            editor: true,\n            layout: 'default',\n            popup: 'bottom',\n            editorFormat: 'hex', // or 'rgb', 'hsl'\n            cancelButton: false,\n\n            // defaultColor: vl,\n\n            onChange: function (color) { },\n            onDone: function (color) {\n                var hex = color.hex.substr(0, 7);\n                self.value = hex;\n                self.emit();\n            },\n            onOpen: function (color) { },\n            onClose: function (color) { }\n        });\n\n    }\n\n\n\n}\n","<div class=\"output output-color\" [style.background]=\"value\">\n    <img src=\"{{transparentBase64Image}}\" alt=\"{{value}}\" class=\"thumb\">\n</div>","import { assignValue } from \"@app/_core/helpers/utils\";\r\nimport { FG_ITEM } from \"@app/_shared/shared.type.js\";\r\n\r\nimport * as THREE from 'three';\r\ntype fn = (...args: any[]) => any;\r\ntype Float = number;\r\ntype Integer = number;\r\n\r\ndeclare class Raycaster {\r\n    constructor(origin: Vector3, direction: Vector3, near: Float, far: Float)\r\n\r\n}\r\n\r\ndeclare class Matrix4 {\r\n\r\n}\r\n\r\ndeclare class Euler {\r\n    constructor(x: Float, y: Float, z: Float, order: String)\r\n    order: String\r\n    x: Float\r\n    y: Float\r\n    z: Float\r\n    copy(euler: Euler): Euler\r\n    clone(): Euler\r\n    equals(euler: Euler): Boolean\r\n    fromArray(array: any[]): Euler\r\n    reorder(newOrder: String): Euler\r\n    set(x: Float, y: Float, z: Float, order: String): Euler\r\n    setFromRotationMatrix(m: Matrix4, order: String): Euler\r\n    setFromQuaternion(q: Quaternion, order: String): Euler\r\n    setFromVector3(vector: Vector3, order: String): Euler\r\n    toArray(array: any[], offset: Integer): any[]\r\n    toVector3(optionalResult: Vector3): Vector3\r\n}\r\n\r\nexport interface Vector3 {\r\n    x: number\r\n    y: number\r\n    z: number\r\n}\r\nexport interface SizeIn3D {\r\n    width: number\r\n    height: number\r\n    depth: number\r\n}\r\nexport interface Vector2 {\r\n    x: number\r\n    y: number\r\n}\r\n\r\nexport interface Color {\r\n    r: number\r\n    g: number\r\n    b: number\r\n    set(...args: any[]): this\r\n\r\n    setScalar(scalar: number): this\r\n\r\n    setHex(hex: string): this\r\n    setRGB(r: number, g: number, b: number): this\r\n\r\n    setHSL(h, s, l): this\r\n\r\n    setStyle(style): this\r\n\r\n    setColorName(style): this\r\n    clone(): Color\r\n    copy(color): this\r\n\r\n    getHex(): number\r\n\r\n    getHexString(): string\r\n\r\n    getHSL(target): any\r\n\r\n    getStyle(): string\r\n    [x: string]: any\r\n\r\n}\r\n\r\nexport interface Texture {\r\n    image?: any,\r\n    flipY?: boolean\r\n    [x: string]: any\r\n}\r\n\r\nexport interface MeshMaterial {\r\n    type?: string\r\n    color?: string | number | Color\r\n    map?: Texture\r\n    bumpMap?: Texture\r\n    bumpScale?: number\r\n    normalMap?: Texture\r\n    normalMapType?: number\r\n    normalScale?: any\r\n    side?: number\r\n    opacity?: number\r\n    transparent?: boolean\r\n    visible?: boolean\r\n    [x: string]: any\r\n}\r\n\r\nexport interface Quaternion {\r\n    x: number\r\n    y: number\r\n    z: number\r\n    w: number\r\n}\r\n\r\nexport interface EventDispatcher {\r\n    addEventListener(type: String, listener: fn): null\r\n    hasEventListener(type: String, listener: fn): Boolean\r\n    removeEventListener(type: String, listener: fn): null\r\n    dispatchEvent(event: Object): null\r\n}\r\n\r\nexport interface Object3D extends EventDispatcher {\r\n    animations: any\r\n    castShadow: boolean\r\n    children: Object3D\r\n    customDepthMaterial: MeshMaterial\r\n    customDistanceMaterial: MeshMaterial\r\n    frustumCulled: boolean\r\n    id: number\r\n    layers: any\r\n    matrix: any\r\n    matrixAutoUpdate: Boolean\r\n    matrixWorld: any\r\n    matrixWorldNeedsUpdate: Boolean\r\n\r\n    modelViewMatrix: any\r\n    name: String\r\n    normalMatrix: any\r\n    onAfterRender: Function\r\n    onBeforeRender: Function\r\n    parent: Object3D\r\n    position: Vector3\r\n    quaternion: any\r\n    receiveShadow: boolean\r\n    renderOrder: Number\r\n    rotation: any\r\n    scale: Vector3\r\n    up: Vector3\r\n    userData: Object\r\n    uuid: String\r\n    visible: Boolean\r\n\r\n\r\n    add(object: Object3D, ...objects: Object3D[]): this\r\n    applyMatrix4(matrix: any): null\r\n    applyQuaternion(quaternion: Quaternion): this\r\n\r\n    attach(object: Object3D): this\r\n\r\n    clone(recursive: Boolean): Object3D\r\n\r\n    copy(object: Object3D, recursive: Boolean): this\r\n    getObjectById(id: number): Object3D\r\n    getObjectByName(name: String): Object3D\r\n    getObjectByProperty(name: String, value: any): Object3D\r\n    getWorldPosition(target: Vector3): Vector3\r\n    getWorldQuaternion(target: Quaternion): Quaternion\r\n    getWorldScale(target: Vector3): Vector3\r\n    getWorldDirection(target: Vector3): Vector3\r\n    localToWorld(vector: Vector3): Vector3\r\n    lookAt(vector: Vector3): null\r\n    lookAt(x: number, y: number, z: number): null\r\n    raycast(raycaster: Raycaster, intersects: Object3D[]): Object3D[]\r\n\r\n    Abstract(): any\r\n\r\n    remove(object: Object3D, ...objects: Object3D[]): this\r\n    removeFromParent(): this\r\n    clear(): this\r\n\r\n    rotateOnAxis(axis: Vector3, angle: number): this\r\n\r\n    rotateOnWorldAxis(axis: Vector3, angle: Float): this\r\n\r\n    rotateX(rad: Float): this\r\n\r\n    rotateY(rad: Float): this\r\n\r\n    rotateZ(rad: Float): this\r\n\r\n    setRotationFromAxisAngle(axis: Vector3, angle: Float): null\r\n\r\n    setRotationFromEuler(euler: Euler): null\r\n\r\n    setRotationFromMatrix(m: Matrix4): null\r\n\r\n    setRotationFromQuaternion(q: Quaternion): null\r\n\r\n    toJSON(meta: Object): Object\r\n\r\n    translateOnAxis(axis: Vector3, distance: Float): this\r\n\r\n    translateX(distance: Float): this\r\n\r\n    translateY(distance: Float): this\r\n\r\n    translateZ(distance: Float): this\r\n\r\n    traverse(callback: Function): null\r\n\r\n    traverseVisible(callback: Function): null\r\n\r\n    traverseAncestors(callback: Function): null\r\n\r\n    updateMatrix(): null\r\n\r\n    updateMatrixWorld(force: Boolean): null\r\n\r\n    updateWorldMatrix(updateParents: Boolean, updateChildren: Boolean): null\r\n\r\n    worldToLocal(vector: Vector3): Vector3\r\n}\r\n\r\nexport interface ThreeMesh {\r\n    castShadow: boolean,\r\n    children: Object3D,\r\n    customDepthMaterial: MeshMaterial,// 'Material',\r\n    customDistanceMaterial: MeshMaterial,// 'Material',\r\n    frustumCulled: boolean,\r\n    id: number,// 'Integer',\r\n    layers: any,// 'Layers',\r\n    matrix: any,\r\n    material: MeshMaterial,// 'Material',\r\n    matrixAutoUpdate: boolean,\r\n    matrixWorld: any,// 'Matrix4',\r\n    matrixWorldNeedsUpdate: boolean,\r\n    modelViewMatrix: any,// 'Matrix4',\r\n    name: string,// 'String',\r\n    normalMatrix: any,// 'Matrix3',\r\n    onAfterRender: () => any,// 'Function',\r\n    onBeforeRender: () => any,// 'Function',\r\n    parent: Object3D,// 'Object3D',\r\n    position: Vector3,\r\n    quaternion: any,// 'Quaternion',\r\n    receiveShadow: boolean,\r\n    renderOrder: number,\r\n    rotation: Vector3,\r\n    scale: Vector3,\r\n    up: Vector3,\r\n    userData: any,\r\n    uuid: string,// 'String',\r\n    visible: boolean\r\n}\r\nexport interface CameraSetting {\r\n    fov?: number,\r\n    near?: number\r\n    far?: number\r\n    position?: {\r\n        x: number\r\n        y: number\r\n        z: number\r\n    },\r\n    autofit?: boolean\r\n    settings?: {\r\n        [x: string]: any\r\n    }\r\n    [x: string]: any\r\n}\r\n\r\nexport const CameraDefaultSettings: CameraSetting = {\r\n    fov: 45,\r\n    near: 0.001,\r\n    far: 10,\r\n    position: {\r\n        x: 0,\r\n        y: 0,\r\n        z: 2\r\n    },\r\n\r\n    autofit: true,\r\n    settings: {\r\n        position: {\r\n            type: \"default\",\r\n            face: \"front\",\r\n            custom: {\r\n                x: 0,\r\n                y: 0,\r\n                z: 2\r\n            }\r\n        },\r\n        rotation: {\r\n\r\n        }\r\n    }\r\n};\r\nexport interface ControlSetting {\r\n\r\n    type?: string\r\n    autoUpdateScene?: boolean,\r\n    maxDistance?: number,\r\n    minDistance?: number,\r\n    enableDamping?: true,\r\n    dampingFactor?: number,\r\n    enablePan?: boolean,\r\n    enabled?: boolean,\r\n    enableRotate?: boolean,\r\n    enableZoom?: boolean,\r\n    highPerformance?: boolean,\r\n    [x: string]: any\r\n    settings?: {\r\n        enabled: boolean\r\n        [x: string]: any\r\n    }\r\n\r\n}\r\nexport const ControlDefaultSetting: ControlSetting = {\r\n    type: \"orbit\",\r\n    autoUpdateScene: true,\r\n    maxDistance: 1200,\r\n    enableDamping: true,\r\n    dampingFactor: 0.1,\r\n    enableRotate: false,\r\n    enableZoom: false,\r\n    enablePan: false,\r\n    enabled: true,\r\n    highPerformance: true,\r\n    constraint: {\r\n        smoothZoom: true,\r\n        zoomDampingFactor: 0.2,\r\n        smoothZoomSpeed: 5\r\n    },\r\n    settings: {\r\n        enabled: true\r\n    }\r\n}\r\n\r\n\r\nexport interface Object3DPropDataModel {\r\n    name?: string,\r\n    castShadow: boolean,\r\n    receiveShadow: boolean,\r\n    scale: {\r\n        x: number,\r\n        y: number,\r\n        z: number\r\n    },\r\n    rotation: {\r\n        x: number,\r\n        y: number,\r\n        z: number\r\n    },\r\n    position: {\r\n        x: number,\r\n        y: number,\r\n        z: number\r\n    }\r\n};\r\n\r\n\r\nexport const Object3DPropDefaultData: Object3DPropDataModel = {\r\n    name: \"\",\r\n    castShadow: false,\r\n    receiveShadow: false,\r\n    scale: {\r\n        x: 1,\r\n        y: 1,\r\n        z: 1\r\n    },\r\n    rotation: {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0\r\n    },\r\n    position: {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0\r\n    }\r\n};\r\n\r\n\r\nexport interface ShadowMap {\r\n    mapSize?: {\r\n        width: number,\r\n        height: number\r\n    },\r\n    camera?: {\r\n        near?: number,\r\n        far?: number,\r\n        left?: number,\r\n        right?: number,\r\n        top?: number,\r\n        bottom?: number\r\n    },\r\n    darkness?: number,\r\n    bias?: number,\r\n    radius?: number\r\n}\r\n\r\nexport interface LightProps {\r\n    castShadow?: boolean,\r\n    visible?: boolean,\r\n    scale?: {\r\n        x: number,\r\n        y: number,\r\n        z: number\r\n    },\r\n    rotation?: {\r\n        x: number,\r\n        y: number,\r\n        z: number\r\n    },\r\n    position: {\r\n        x: number,\r\n        y: number,\r\n        z: number\r\n    },\r\n    up?: {\r\n        x: number,\r\n        y: number,\r\n        z: number\r\n    },\r\n    shadow?: ShadowMap,\r\n    target?: {\r\n        position: {\r\n            x: number,\r\n            y: number,\r\n            z: number\r\n        }\r\n    }\r\n}\r\nexport const LightPropDefaultData: LightProps = {\r\n    visible: true,\r\n    position: {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0\r\n    },\r\n    up: {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0\r\n    },\r\n    rotation: {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0\r\n    }\r\n\r\n};\r\n\r\n\r\nexport interface ShadowSetting {\r\n    enabled?: boolean\r\n    pcss?: boolean\r\n    [x: string]: any\r\n}\r\n\r\nexport const ShadowSettingDefaultData = {\r\n    enabled: true,\r\n    pcss: false,\r\n    type: THREE.PCFShadowMap\r\n}\r\n\r\nexport interface BackgroundSetting {\r\n    type?: string,\r\n    color?: string | number | Color,\r\n    texture?: string | {\r\n        format?: string,\r\n        type?: string,\r\n        path?: string,\r\n        file: string\r\n    },\r\n    format?: string,\r\n    [key: string]: any\r\n}\r\n\r\nexport interface FloorSetting {\r\n    enabled?: boolean,\r\n    enableGrid?: boolean,\r\n    enableAxes?: boolean,\r\n    params?: {\r\n        type: string,\r\n        width: number,\r\n        height: number,\r\n        [key: string]: any\r\n    }\r\n    material?: MeshMaterial,\r\n    props?: {\r\n        receiveShadow?: boolean,\r\n        position?: {\r\n            x: number,\r\n            y: number,\r\n            z: number\r\n        },\r\n        [key: string]: any\r\n    },\r\n    above?: boolean\r\n    [key: string]: any\r\n\r\n}\r\nexport const FloorDefaultData: FloorSetting = {\r\n    enabled: false,\r\n    enableGrid: true,\r\n    enableAxes: true,\r\n    \r\n    params: {\r\n        type: \"plane\",\r\n        width: 4,\r\n        height: 4\r\n    },\r\n    material: {\r\n        type: \"physical\",\r\n        color: \"#ebebeb\"\r\n    },\r\n    props: {\r\n        receiveShadow: true,\r\n        position: {\r\n            x: 0,\r\n            y: -0.10237984685622037,\r\n            z: 0\r\n        }\r\n    },\r\n    above: true\r\n}\r\n\r\nexport interface SceneSize {\r\n    width?: number\r\n    height?: number\r\n    depth?: number\r\n    [key: string]: any\r\n}\r\n\r\nexport const SceneSizeDefaultData: SceneSize = {\r\n    width: 4,\r\n    height: 4,\r\n    depth: 4\r\n}\r\nexport interface SceneSetting {\r\n    size?: SceneSize,\r\n    background?: BackgroundSetting,\r\n    foregrounds?: FG_ITEM[],\r\n    floor?: FloorSetting\r\n    [key: string]: any\r\n}\r\n\r\nexport interface RendererSetting {\r\n    params?: {\r\n        antialias?: boolean\r\n        [x: string]: any\r\n    },\r\n\r\n    autoStart?: boolean,\r\n    outputEncoding?: any\r\n    [x: string]: any\r\n}\r\nexport const RendererDefaultData: RendererSetting = {\r\n    params: {\r\n        antialias: true\r\n    },\r\n    shadowMap: {\r\n        enabled: true\r\n    },\r\n    autoStart: false,\r\n    outputEncoding: THREE.sRGBEncoding\r\n}\r\nexport interface AppData {\r\n    renderer?: RendererSetting\r\n    scene?: SceneSetting\r\n\r\n    composer?: {\r\n        [x: string]: any\r\n    }\r\n\r\n    shadow?: ShadowSetting\r\n    camera?: CameraSetting\r\n    control?: ControlSetting\r\n    lights?: any[],\r\n    // objects\r\n    objects?: any[]\r\n    // objects\r\n    meshes?: any[]\r\n\r\n    [key: string]: any\r\n\r\n\r\n}\r\n\r\nexport const AppDefaultData: AppData = {\r\n    renderer: assignValue({}, RendererDefaultData),\r\n    composer: {},\r\n    shadow: assignValue({}, ShadowSettingDefaultData),\r\n    scene: {\r\n        size: assignValue({}, SceneSizeDefaultData),\r\n        background: {\r\n        },\r\n        // tiền cảnh\r\n        foregrounds: [\r\n        ],\r\n        floor: assignValue({}, FloorDefaultData)\r\n    },\r\n    // main camera\r\n    camera: assignValue({}, CameraDefaultSettings),\r\n    // main control\r\n    control: assignValue({}, ControlDefaultSetting),\r\n    // anh sáng\r\n    lights: [],\r\n    // objects\r\n    objects: [],\r\n    // objects\r\n    meshes: []\r\n}\r\n\r\n\r\nexport const BlankData: AppData = {\r\n    id: 1,\r\n    name: \"Tên project\",\r\n    category_id: 2,\r\n    description: \"Mô tả broject\",\r\n    thumbnail: \"\",\r\n    status: \"published\",\r\n    allow_custom: false,\r\n    renderer: {\r\n        params: {\r\n            antialias: true,\r\n            alpha: true\r\n        },\r\n        shadowMap: {\r\n            enabled: true\r\n        },\r\n        outputEncoding: \"{THREE.sRGBEncoding}\"\r\n    },\r\n    composer: {},\r\n    shadow: {\r\n        enabled: true,\r\n        pcss: false\r\n    },\r\n    scene: {\r\n        size: {\r\n            width: 4,\r\n            height: 4,\r\n            depth: 4\r\n        },\r\n        floor: {\r\n            enabled: true,\r\n            above: true,\r\n            params: {\r\n                type: \"plane\",\r\n                width: 4,\r\n                height: 4\r\n            },\r\n            props: {\r\n                position: {\r\n                    x: 0,\r\n                    y: -0.2,\r\n                    z: 0\r\n                }\r\n            }\r\n        }\r\n    },\r\n    camera: {\r\n        fov: 45,\r\n        near: 0.001,\r\n        far: 1000,\r\n        position: {\r\n            x: 0,\r\n            y: 0.4,\r\n            z: 1.5\r\n        },\r\n        autofit: true\r\n\r\n    },\r\n    control: {\r\n        type: \"orbit\",\r\n        autoUpdateScene: true,\r\n        maxDistance: 1200,\r\n        minDistance: 0.001,\r\n        enableDamping: true,\r\n        dampingFactor: 0.1,\r\n        enablePan: false,\r\n        highPerformance: true,\r\n        constraint: {\r\n            smoothZoom: true,\r\n            zoomDampingFactor: 0.2,\r\n            smoothZoomSpeed: 5\r\n        }\r\n    },\r\n    lights: [\r\n        {\r\n            type: \"ambient\",\r\n            data: {\r\n                params: {\r\n                    color: \"#ffffff\",\r\n                    intensity: 0.17\r\n                }\r\n            },\r\n            secret_key: \"DUkWmYXqHLn30h8srtGc1fClZ5VBh7Vs\"\r\n        },\r\n        {\r\n            type: \"point\",\r\n            data: {\r\n                params: {\r\n                    color: \"#7979cf\",\r\n                    intensity: 0.3\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: 0,\r\n                        y: -10\r\n                    }\r\n                }\r\n            },\r\n            secret_key: \"QT2uvl11GYiE9lBJ31kWLN7uZ4LVUY5h\"\r\n        },\r\n        {\r\n             type: \"Directionallight\",\r\n             data: {\r\n                 params: {\r\n                     color: \"#f6e5ce\",\r\n                     intensity: 0.4\r\n                },\r\n                 props: {\r\n                     position: {\r\n                         x: 6.201570653300953,\r\n                         y: 14.989995576740561,\r\n                         z: 11.060111774271212\r\n                    },\r\n                     castShadow: true,\r\n                     shadow: {\r\n                         mapSize: {\r\n                             width: 4096,\r\n                             height: 4096\r\n                        },\r\n                         camera: {\r\n                             near: 0.1,\r\n                             far: 100,\r\n                             left: 10,\r\n                             right: -10,\r\n                             top: 10,\r\n                             bottom: -10\r\n                        },\r\n                         darkness: 0.1,\r\n                         bias: -0.0002,\r\n                         radius: 5\r\n                    }\r\n                }\r\n            },\r\n             secret_key: \"4SBlh9qasmkym2qVinqXZQmrE1wyPz4g\"\r\n        },\r\n        {\r\n             type: \"Directionallight\",\r\n             data: {\r\n                 params: {\r\n                     color: \"#C7CCFF\",\r\n                     intensity: 0.2\r\n                },\r\n                 props: {\r\n                     position: {\r\n                         x: -16.04440520733398,\r\n                         y: -5.508381436142289,\r\n                         z: 2.6468429612346043\r\n                    }\r\n                }\r\n            },\r\n             secret_key: \"FSFhrzuO3FGYgYwdNRfMIaTuF0vwNr53\"\r\n        },\r\n        {\r\n             secret_key: \"wnrnh6P4c3lYDTJDWv3MUOkjp1ds3eOF\",\r\n             type: \"Directionallight\",\r\n             data: {\r\n                 params: {\r\n                     color: \"#d9e6f1\",\r\n                     intensity: 0.23\r\n                },\r\n                 props: {\r\n                     position: {\r\n                         x: 14.52245679582316,\r\n                         y: 10.872836588837433,\r\n                         z: -14.374035534912764\r\n                    },\r\n                     castShadow: true,\r\n                     shadow: {\r\n                         mapSize: {\r\n                             width: 4096,\r\n                             height: 4096\r\n                        },\r\n                         camera: {\r\n                             near: 0.1,\r\n                             far: 100,\r\n                             left: 10,\r\n                             right: -10,\r\n                             top: 10,\r\n                             bottom: -10\r\n                        },\r\n                         darkness: 0.1,\r\n                         bias: -0.0002,\r\n                         radius: 5\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    ],\r\n    objects: [\r\n\r\n    ],\r\n    meshes: [\r\n\r\n    ]\r\n}\r\n\r\nexport const getBlankAppData = () => assignValue({}, BlankData);\r\nexport const getBlankProjectData = () => assignValue({ allow_custom: false }, BlankData);\r\nexport const FacePosKeyValues = {\r\n    left: {\r\n        x: -1,\r\n        y: 0,\r\n        z: 0\r\n    },\r\n    right: {\r\n        x: 1,\r\n        y: 0,\r\n        z: 0\r\n    },\r\n    top: {\r\n        x: 0,\r\n        y: 1,\r\n        z: 0\r\n    },\r\n    bottom: {\r\n        x: 0,\r\n        y: -1,\r\n        z: 0\r\n    },\r\n    front: {\r\n        x: 0,\r\n        y: 0,\r\n        z: 1\r\n    },\r\n    back: {\r\n        x: 0,\r\n        y: 0,\r\n        z: -1\r\n    },\r\n\r\n    ft: { // front top\r\n        x: 0,\r\n        y: 1,\r\n        z: 1\r\n    },\r\n    bt: { // back top\r\n        x: 0,\r\n        y: 1,\r\n        z: -1\r\n    },\r\n    lt: { // left top\r\n        x: -1,\r\n        y: 1,\r\n        z: 0\r\n    },\r\n    rt: { // right top\r\n        x: 1,\r\n        y: 1,\r\n        z: 0\r\n    },\r\n    lft: { // left front top\r\n        x: -1,\r\n        y: 1,\r\n        z: 1\r\n    },\r\n    lbt: { // left bottom top\r\n        x: -1,\r\n        y: 1,\r\n        z: -1\r\n    },\r\n    rft: { // right front top\r\n        x: 1,\r\n        y: 1,\r\n        z: 1\r\n    },\r\n    rbt: { // right bottom top\r\n        x: 1,\r\n        y: 1,\r\n        z: -1\r\n    },\r\n\r\n    fb: { // front bottom\r\n        x: 0,\r\n        y: -1,\r\n        z: 1\r\n    },\r\n    bb: { // back bottom\r\n        x: 0,\r\n        y: -1,\r\n        z: -1\r\n    },\r\n    lb: { // left bottom\r\n        x: -1,\r\n        y: -1,\r\n        z: 0\r\n    },\r\n    rb: { // right bottom\r\n        x: 1,\r\n        y: -1,\r\n        z: 0\r\n    },\r\n    lfb: { // left front bottom\r\n        x: -1,\r\n        y: -1,\r\n        z: 1\r\n    },\r\n    lbb: { // left back bottom\r\n        x: -1,\r\n        y: -1,\r\n        z: -1\r\n    },\r\n    rfb: { // right front bottom\r\n        x: 1,\r\n        y: -1,\r\n        z: 1\r\n    },\r\n    rbb: { // right back bottom\r\n        x: 1,\r\n        y: -1,\r\n        z: -1\r\n    }\r\n};\r\n\r\nexport const CameraDefaultFacePositions: Array<{ value: string, label: string }> = [\r\n    {\r\n        value: \"lt\",\r\n        label: \"Sunny 45* (left)\"\r\n    },\r\n    {\r\n        value: \"rt\",\r\n        label: \"Sunny 45* (right)\"\r\n    },\r\n    {\r\n        value: \"front\",\r\n        label: \"Front\"\r\n    },\r\n    {\r\n        value: \"left\",\r\n        label: \"Left\"\r\n    },\r\n    {\r\n        value: \"right\",\r\n        label: \"Right\"\r\n    },\r\n    {\r\n        value: \"back\",\r\n        label: \"Back\"\r\n    },\r\n    {\r\n        value: \"top\",\r\n        label: \"Top\"\r\n    },\r\n    {\r\n        value: \"bottom\",\r\n        label: \"Bottom\"\r\n    }\r\n\r\n];","import { isArray, isNumber, isObject, isString, objectHasKey, Str } from \"./helpers/utils\";\r\nconst NO_VALUE = Str.rand();\r\nexport interface __CONFIG__ {\r\n    key?: string\r\n    urls?: {\r\n        assets?: string\r\n        [url: string]: string\r\n    }\r\n    view?: string\r\n    data?: {\r\n        [key: string]: any\r\n    },\r\n    [key: string]: any\r\n}\r\nexport const __CONFIG__: __CONFIG__ = typeof window['__3DHub__'] != \"undefined\" && isObject(window['__3DHub__']) ? window['__3DHub__'] : {\r\n    key: \"\",\r\n    urls: {\r\n        assets: \"/assets\"\r\n    },\r\n    view: \"home\",\r\n    data: {},\r\n}\r\n\r\nexport const getConfig: (key?:string) => any = (key?:string) => {\r\n    if((isString(key) || isNumber(key)) && String(key).length){\r\n        return getElement(__CONFIG__, key);\r\n    }\r\n    return __CONFIG__ ;\r\n}\r\n\r\nfunction getElement(elem, key){\r\n    if(!isObject(elem)) return undefined;\r\n    let c : any = elem;\r\n    let s = String(key).split(\".\");\r\n    for (let i = 0; i < s.length; i++) {\r\n        const k = s[i];\r\n        if((!isObject(c) && !isArray(c)) || !objectHasKey(c, k)) return undefined;\r\n        c = c[k];\r\n    }\r\n    return c;\r\n}","import { Component, Input, OnInit } from '@angular/core';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n  selector: 'inp-textarea-group',\n  templateUrl: './inp-textarea-group.component.html',\n  styleUrls: ['./inp-textarea-group.component.scss']\n})\nexport class InpTextareaGroupComponent extends BaseInpGroupComponent implements OnInit {\n\n  @Input() minRows: number = 3;\n  @Input() maxRows: Number = 5;\n  \n  configProps = [\"minRows\", \"maxRows\"];\n  constructor() {\n      super();\n  }\n\n\n\n  onInit(): void {\n      assignValue(this.defaultValues,{\n        minRows: 3,\n        maxRows: 5\n      });\n      this.inpInit();\n      // this.syncFromParent();\n\n  }\n\n}\n","<div class=\"inner-box\">{{label?label:name | translate}}</div>\n<div class=\"input-wrapper\">\n    <inp-textarea [name]=\"name\" [placeholder]=\"placeholder\" [(value)]=\"value\" (subcribe)=\"onChange($event)\" [minRows]=\"minRows\" [maxRows]=\"maxRows\"></inp-textarea>\n</div>","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { BaseInputComponent } from '../base-input/base-input.component';\n\n@Component({\n  selector: 'inp-switch',\n  templateUrl: './inp-switch.component.html',\n  styleUrls: ['./inp-switch.component.scss']\n})\nexport class InpSwitchComponent extends BaseInputComponent implements OnInit {\n  \n  constructor(private cd: ChangeDetectorRef) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.cd.detectChanges();\n  }\n\n  onChangeState(event){\n    this.emitAfter(50);\n  }\n\n}\n","\n<nz-switch [(ngModel)]=\"value\" [nzCheckedChildren]=\"checkedTemplate\" [nzUnCheckedChildren]=\"unCheckedTemplate\" (ngModelChange)=\"onChangeState($event)\"></nz-switch>\n<ng-template #checkedTemplate><i nz-icon nzType=\"check\"></i></ng-template>\n<ng-template #unCheckedTemplate><i nz-icon nzType=\"close\"></i></ng-template>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { InpEvent } from '@app/_shared/shared.type';\n\n@Component({\n  selector: 'mesh-geometry-tab-geometry',\n  templateUrl: './mesh-geometry-tab-geometry.component.html',\n  styleUrls: ['./mesh-geometry-tab-geometry.component.scss']\n})\nexport class MeshGeometryTabGeometryComponent implements OnInit {\n\n  @Input() inputs: Array<{\n    name: string,\n    type: string,\n    value: any,\n    spin: boolean,\n    step: number,\n    min: number,\n    max: number\n  }> = [];\n  @Output() onUpdate = new EventEmitter<any>();\n  @Output() subcribe = new EventEmitter<InpEvent>();\n  constructor() {\n    \n  }\n\n  ngOnInit(): void {\n  }\n\n  inputChange(event: InpEvent) {\n    this.subcribe.emit(event);\n  }\n}\n","<div class=\"tab-inner\">\n    <div class=\"inputs store\">\n        <div *ngFor=\"let inp of inputs; let i=index\">\n            <div [ngSwitch]=\"inp.type\">\n                <inp-number-group \n                    *ngSwitchCase=\"'number'\" \n                    [name]=\"inp.name\" \n                    [value]=\"inp.value\" \n                    [label]=\"inp.name\" \n                    [spin]=\"inp.spin\" \n                    [min]=\"inp.min\" \n                    [max]=\"inp.max\" \n                    (subcribe)=\"inputChange($event)\" \n                    [class.inp-group-item]=\"i > 0\"\n                    [class.inp-group-item-first]=\"i == 0\"\n                ></inp-number-group>\n                <inp-switch-group \n                    *ngSwitchCase=\"'boolean'\" \n                    [name]=\"inp.name\" \n                    [value]=\"inp.value\" \n                    [label]=\"inp.name\" \n                    (subcribe)=\"inputChange($event)\" \n                    [class.inp-group-item]=\"i > 0\" \n                    [class.inp-group-item-first]=\"i == 0\"\n                ></inp-switch-group>\n                <inp-text-group \n                    *ngSwitchDefault \n                    [name]=\"inp.name\" \n                    [value]=\"inp.value\" \n                    [label]=\"inp.name\" \n                    (subcribe)=\"inputChange($event)\" \n                    [class.inp-group-item]=\"i > 0\" \n                    [class.inp-group-item-first]=\"i == 0\"\n                ></inp-text-group>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-model-search',\n    templateUrl: './model-search.component.html',\n    styleUrls: ['./model-search.component.scss']\n})\nexport class ModelSearchComponent implements OnInit {\n\n    constructor() { }\n\n    ngOnInit(): void {\n    }\n\n}\n\n","<p>model-search works!</p>\n","import { Injectable } from '@angular/core';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SidebarLockService extends EventManagerService {\n\n  constructor() {\n    super();\n    \n  }\n}\n","import {\r\n\tEventDispatcher,\r\n\tQuaternion,\r\n\tVector3\r\n} from 'three';\r\n\r\nconst _changeEvent = { type: 'change' };\r\n\r\nclass FlyControls extends EventDispatcher {\r\n\r\n\tconstructor( object, domElement ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tif ( domElement === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.FlyControls: The second parameter \"domElement\" is now mandatory.' );\r\n\t\t\tdomElement = document;\r\n\r\n\t\t}\r\n\r\n\t\tthis.object = object;\r\n\t\tthis.domElement = domElement;\r\n\r\n\t\t// API\r\n\r\n\t\tthis.movementSpeed = 1.0;\r\n\t\tthis.rollSpeed = 0.005;\r\n\r\n\t\tthis.dragToLook = false;\r\n\t\tthis.autoForward = false;\r\n\r\n\t\t// disable default target object behavior\r\n\r\n\t\t// internals\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst EPS = 0.000001;\r\n\r\n\t\tconst lastQuaternion = new Quaternion();\r\n\t\tconst lastPosition = new Vector3();\r\n\r\n\t\tthis.tmpQuaternion = new Quaternion();\r\n\r\n\t\tthis.mouseStatus = 0;\r\n\r\n\t\tthis.moveState = { up: 0, down: 0, left: 0, right: 0, forward: 0, back: 0, pitchUp: 0, pitchDown: 0, yawLeft: 0, yawRight: 0, rollLeft: 0, rollRight: 0 };\r\n\t\tthis.moveVector = new Vector3( 0, 0, 0 );\r\n\t\tthis.rotationVector = new Vector3( 0, 0, 0 );\r\n\r\n\t\tthis.keydown = function ( event ) {\r\n\r\n\t\t\tif ( event.altKey ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( event.code ) {\r\n\r\n\t\t\t\tcase 'ShiftLeft':\r\n\t\t\t\tcase 'ShiftRight': this.movementSpeedMultiplier = .1; break;\r\n\r\n\t\t\t\tcase 'KeyW': this.moveState.forward = 1; break;\r\n\t\t\t\tcase 'KeyS': this.moveState.back = 1; break;\r\n\r\n\t\t\t\tcase 'KeyA': this.moveState.left = 1; break;\r\n\t\t\t\tcase 'KeyD': this.moveState.right = 1; break;\r\n\r\n\t\t\t\tcase 'KeyR': this.moveState.up = 1; break;\r\n\t\t\t\tcase 'KeyF': this.moveState.down = 1; break;\r\n\r\n\t\t\t\tcase 'ArrowUp': this.moveState.pitchUp = 1; break;\r\n\t\t\t\tcase 'ArrowDown': this.moveState.pitchDown = 1; break;\r\n\r\n\t\t\t\tcase 'ArrowLeft': this.moveState.yawLeft = 1; break;\r\n\t\t\t\tcase 'ArrowRight': this.moveState.yawRight = 1; break;\r\n\r\n\t\t\t\tcase 'KeyQ': this.moveState.rollLeft = 1; break;\r\n\t\t\t\tcase 'KeyE': this.moveState.rollRight = 1; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.updateMovementVector();\r\n\t\t\tthis.updateRotationVector();\r\n\r\n\t\t};\r\n\r\n\t\tthis.keyup = function ( event ) {\r\n\r\n\t\t\tswitch ( event.code ) {\r\n\r\n\t\t\t\tcase 'ShiftLeft':\r\n\t\t\t\tcase 'ShiftRight': this.movementSpeedMultiplier = 1; break;\r\n\r\n\t\t\t\tcase 'KeyW': this.moveState.forward = 0; break;\r\n\t\t\t\tcase 'KeyS': this.moveState.back = 0; break;\r\n\r\n\t\t\t\tcase 'KeyA': this.moveState.left = 0; break;\r\n\t\t\t\tcase 'KeyD': this.moveState.right = 0; break;\r\n\r\n\t\t\t\tcase 'KeyR': this.moveState.up = 0; break;\r\n\t\t\t\tcase 'KeyF': this.moveState.down = 0; break;\r\n\r\n\t\t\t\tcase 'ArrowUp': this.moveState.pitchUp = 0; break;\r\n\t\t\t\tcase 'ArrowDown': this.moveState.pitchDown = 0; break;\r\n\r\n\t\t\t\tcase 'ArrowLeft': this.moveState.yawLeft = 0; break;\r\n\t\t\t\tcase 'ArrowRight': this.moveState.yawRight = 0; break;\r\n\r\n\t\t\t\tcase 'KeyQ': this.moveState.rollLeft = 0; break;\r\n\t\t\t\tcase 'KeyE': this.moveState.rollRight = 0; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.updateMovementVector();\r\n\t\t\tthis.updateRotationVector();\r\n\r\n\t\t};\r\n\r\n\t\tthis.mousedown = function ( event ) {\r\n\r\n\t\t\tif ( this.dragToLook ) {\r\n\r\n\t\t\t\tthis.mouseStatus ++;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tswitch ( event.button ) {\r\n\r\n\t\t\t\t\tcase 0: this.moveState.forward = 1; break;\r\n\t\t\t\t\tcase 2: this.moveState.back = 1; break;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.updateMovementVector();\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.mousemove = function ( event ) {\r\n\r\n\t\t\tif ( ! this.dragToLook || this.mouseStatus > 0 ) {\r\n\r\n\t\t\t\tconst container = this.getContainerDimensions();\r\n\t\t\t\tconst halfWidth = container.size[ 0 ] / 2;\r\n\t\t\t\tconst halfHeight = container.size[ 1 ] / 2;\r\n\r\n\t\t\t\tthis.moveState.yawLeft = - ( ( event.pageX - container.offset[ 0 ] ) - halfWidth ) / halfWidth;\r\n\t\t\t\tthis.moveState.pitchDown = ( ( event.pageY - container.offset[ 1 ] ) - halfHeight ) / halfHeight;\r\n\r\n\t\t\t\tthis.updateRotationVector();\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.mouseup = function ( event ) {\r\n\r\n\t\t\tif ( this.dragToLook ) {\r\n\r\n\t\t\t\tthis.mouseStatus --;\r\n\r\n\t\t\t\tthis.moveState.yawLeft = this.moveState.pitchDown = 0;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tswitch ( event.button ) {\r\n\r\n\t\t\t\t\tcase 0: this.moveState.forward = 0; break;\r\n\t\t\t\t\tcase 2: this.moveState.back = 0; break;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.updateMovementVector();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.updateRotationVector();\r\n\r\n\t\t};\r\n\r\n\t\tthis.update = function ( delta ) {\r\n\r\n\t\t\tconst moveMult = delta * scope.movementSpeed;\r\n\t\t\tconst rotMult = delta * scope.rollSpeed;\r\n\r\n\t\t\tscope.object.translateX( scope.moveVector.x * moveMult );\r\n\t\t\tscope.object.translateY( scope.moveVector.y * moveMult );\r\n\t\t\tscope.object.translateZ( scope.moveVector.z * moveMult );\r\n\r\n\t\t\tscope.tmpQuaternion.set( scope.rotationVector.x * rotMult, scope.rotationVector.y * rotMult, scope.rotationVector.z * rotMult, 1 ).normalize();\r\n\t\t\tscope.object.quaternion.multiply( scope.tmpQuaternion );\r\n\r\n\t\t\tif (\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS\r\n\t\t\t) {\r\n\r\n\t\t\t\tscope.dispatchEvent( _changeEvent );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.updateMovementVector = function () {\r\n\r\n\t\t\tconst forward = ( this.moveState.forward || ( this.autoForward && ! this.moveState.back ) ) ? 1 : 0;\r\n\r\n\t\t\tthis.moveVector.x = ( - this.moveState.left + this.moveState.right );\r\n\t\t\tthis.moveVector.y = ( - this.moveState.down + this.moveState.up );\r\n\t\t\tthis.moveVector.z = ( - forward + this.moveState.back );\r\n\r\n\t\t\t//console.log( 'move:', [ this.moveVector.x, this.moveVector.y, this.moveVector.z ] );\r\n\r\n\t\t};\r\n\r\n\t\tthis.updateRotationVector = function () {\r\n\r\n\t\t\tthis.rotationVector.x = ( - this.moveState.pitchDown + this.moveState.pitchUp );\r\n\t\t\tthis.rotationVector.y = ( - this.moveState.yawRight + this.moveState.yawLeft );\r\n\t\t\tthis.rotationVector.z = ( - this.moveState.rollRight + this.moveState.rollLeft );\r\n\r\n\t\t\t//console.log( 'rotate:', [ this.rotationVector.x, this.rotationVector.y, this.rotationVector.z ] );\r\n\r\n\t\t};\r\n\r\n\t\tthis.getContainerDimensions = function () {\r\n\r\n\t\t\tif ( this.domElement != document ) {\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsize: [ this.domElement.offsetWidth, this.domElement.offsetHeight ],\r\n\t\t\t\t\toffset: [ this.domElement.offsetLeft, this.domElement.offsetTop ]\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsize: [ window.innerWidth, window.innerHeight ],\r\n\t\t\t\t\toffset: [ 0, 0 ]\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.dispose = function () {\r\n\r\n\t\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu );\r\n\t\t\tthis.domElement.removeEventListener( 'mousedown', _mousedown );\r\n\t\t\tthis.domElement.removeEventListener( 'mousemove', _mousemove );\r\n\t\t\tthis.domElement.removeEventListener( 'mouseup', _mouseup );\r\n\r\n\t\t\twindow.removeEventListener( 'keydown', _keydown );\r\n\t\t\twindow.removeEventListener( 'keyup', _keyup );\r\n\r\n\t\t};\r\n\r\n\t\tconst _mousemove = this.mousemove.bind( this );\r\n\t\tconst _mousedown = this.mousedown.bind( this );\r\n\t\tconst _mouseup = this.mouseup.bind( this );\r\n\t\tconst _keydown = this.keydown.bind( this );\r\n\t\tconst _keyup = this.keyup.bind( this );\r\n\r\n\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu );\r\n\r\n\t\tthis.domElement.addEventListener( 'mousemove', _mousemove );\r\n\t\tthis.domElement.addEventListener( 'mousedown', _mousedown );\r\n\t\tthis.domElement.addEventListener( 'mouseup', _mouseup );\r\n\r\n\t\twindow.addEventListener( 'keydown', _keydown );\r\n\t\twindow.addEventListener( 'keyup', _keyup );\r\n\r\n\t\tthis.updateMovementVector();\r\n\t\tthis.updateRotationVector();\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction contextmenu( event ) {\r\n\r\n\tevent.preventDefault();\r\n\r\n}\r\n\r\nexport { FlyControls };\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'droppable-area',\n  templateUrl: './droppable-area.component.html',\n  styleUrls: ['./droppable-area.component.scss']\n})\nexport class DroppableAreaComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"drop-elements drop-hover drop-elements-hover\">\n    <div class=\"message\">\n        <div class=\"message-body\">\n            <H3 class=\"message-title\">Drop Here</H3>\n            <p class=\"message-content\">Thả vào đây!</p>\n        </div>\n    </div>\n    <div id=\"ctn-preloader\" class=\"ctn-preloader\">\n        <div class=\"round_spinner\">\n            <Div class=\"spinner\"></Div>\n            <Div class=\"text\">\n                <H4 class=\"title\">Đang <Span class=\"bold\">Tải</Span></H4>\n            </Div>\n        </div>\n    </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n    selector: 'inp-radio-group',\n    templateUrl: './inp-radio-group.component.html',\n    styleUrls: ['./inp-radio-group.component.scss']\n})\nexport class InpRadioGroupComponent extends BaseInpGroupComponent implements OnInit {\n\n    @Input() options: any = null;\n    _options: Array<{ label: string, value: string }> = [];\n\n    configProps = [\"options\"];\n    constructor() {\n        super();\n    }\n\n\n\n    onInit(): void {\n        assignValue(this.defaultValues, {\n            options: null\n        });\n        this.inpInit();;\n\n    }\n\n}\n\n","<div class=\"inner-box\">{{label?label:name | translate}}</div>\n<div class=\"input-wrapper\">\n    <inp-radio\n    [name]=\"name\"\n    [(value)]=\"value\"\n    [options]=\"options\"\n    (subcribe)=\"onChange($event)\"\n></inp-radio>\n\n</div>","import { Injectable } from '@angular/core';\nimport { assignIfNotExists, assignValue, assignWithout, date, getArguments, isArray, isFunction, isObject, isString, objectHasKey, Str } from '@app/_core/helpers/utils';\nimport Viewport from '../components/viewport';\nimport AppEngine from '../engines/app.emgine';\nimport { EngineClass, EngineInstance } from '../engines/engine.doc';\nimport { Materials } from '../libs/three.libs';\nimport { AppData } from '../store/data.type';\nimport { EventEmitter } from './event-emitter';\nconst DEFAULT_VALUE = Str.rand(Str.rand(date('ms')));\nimport Dom from '@app/_core/helpers/dom';\nimport { CallbackFunction } from '@app/_shared/shared.type';\nimport { i } from '@app/_core/helpers/html-elements';\n@Injectable({\n    providedIn: 'root'\n})\nexport class App3DService extends EventEmitter {\n    data: AppData = {};\n    root: any = null;\n    engineOptions: any = {};\n    _engine: EngineInstance = null;\n    storageKey: any = null;\n\n    controls: any[] = [];\n\n    canTransferEventToControls: boolean = true;\n\n    engineClass: EngineClass = AppEngine;\n    constructor() {\n        super();\n        // this.init();\n    }\n\n\n    capture(onDone: CallbackFunction, onError?:CallbackFunction) {\n        var image = this.engine.capture();\n\n\n        const imgS = new Image();\n        imgS.crossOrigin = \"anonymous\";\n        imgS.onload = () => {\n            let { width, height } = imgS;\n            let ratio = width / height;\n\n            var cancasDom = Dom(\"canvas#test-image-canvas\", { height, width });\n            let canvas: HTMLCanvasElement = cancasDom.el as HTMLCanvasElement;\n            var ctx = canvas.getContext('2d');\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            let taskTotal = 0;\n            const checkTask = () => {\n                if (taskTotal === 0) {\n                    if (isFunction(onDone)) {\n                        onDone(canvas.toDataURL());\n\n                        ctx.clearRect(0, 0, canvas.width, canvas.height);\n                    }\n                }\n            };\n\n\n            ctx.drawImage(imgS, 0, 0);\n            if (this.data.scene && this.data.scene.foregrounds && this.data.scene.foregrounds.length) {\n                this.data.scene.foregrounds.map(fg => {\n\n                    taskTotal++;\n                    const url = fg.url;\n                    const opacity = objectHasKey(fg, 'opacity') ? fg.opacity : 1;\n\n                    const img = new Image();\n                    img.crossOrigin = \"anonymous\";\n                    img.onload = function () {\n                        const posX = fg.position.x || 'center', posY = fg.position.y || 'center';\n                        let outWidth = img.width;\n                        let outHeight = img.height;\n                        let outRatio = outWidth / outHeight;\n                        if (outWidth > width || outRatio > height) {\n                            if (outRatio > ratio) {\n                                outWidth = width;\n                                outRatio = outWidth / outRatio;\n                            } else {\n                                outHeight = height;\n                                outWidth = outHeight * outRatio;\n\n                            }\n                        }\n\n                        let x = posX == 'left' ? 0 :\n                            posX == 'right' ? width - outWidth :\n                                (width - outWidth) / 2;\n                        let y = posY == 'top' ? 0 :\n                            posY == 'bottom' ? height - outHeight :\n                                (height - outHeight) / 2;\n                        //\n\n\n                        ctx.save();\n                        ctx.globalAlpha = opacity;\n\n                        ctx.drawImage(\n                            img,\n                            // crop image \n                            0, 0, //Where to start the grab (x,y of source image)\n                            // crop size\n                            img.width, img.height, //How much to grab (width, height)\n                            // insert\n                            // positiom\n                            x, y, //Where to plop the grab on the canvas (x,y of canvas)\n                            // size\n                            outWidth, outHeight //How large to plop the grab (width, height of incoming stamp)\n                        );\n\n\n                        ctx.restore();\n                        taskTotal--;\n                        checkTask();\n                    };\n                    img.onerror = e => {\n                        taskTotal--;\n                        checkTask();\n                    }\n                    img.src = url;\n\n                })\n            } else {\n                checkTask();\n            }\n\n        };\n        imgS.onerror = (e) => {\n            if(!image ){\n                if(isFunction(onError)){\n                    onError();\n                }\n            }\n            if (isFunction(onDone)) {\n                onDone(image);\n            }\n        }\n\n        imgS.src = image;\n    }\n\n\n\n\n    setOptions(options: any) {\n        this.engineOptions = options;\n    }\n\n\n    setAppData(data) {\n        this.setOptions(data);\n        this.init();\n    }\n\n    addControls(control) {\n        if (isObject(control) && typeof control.getEventList == \"function\") {\n            let stt = true;\n            this.controls.map(c => {\n                if (c == control) {\n                    stt = false;\n                }\n            });\n            if (stt) {\n                this.controls.push({\n                    control: control,\n                    events: control.getEventList()\n                });\n            }\n\n        }\n\n    }\n\n    transferEventListenner(event) {\n        if (isObject(event) && event.type) {\n            if (this._engine) {\n                this._engine.emit(event);\n            }\n            this.emit({\n                type: \"event.transfer\",\n                event: event\n            });\n            \n            if(this.canTransferEventToControls){\n                this.controls.map(c => {\n                    if (isObject(c) && isObject(c.control) && typeof c.control.transferEventListenner == \"function\" && c.events.indexOf(event.type) >= 0) {\n                        c.control.transferEventListenner(event.type, event);\n                    }\n                });    \n                // this.engine.getCanvas().dispatchEvent(event);\n            }\n\n            // console.log(event);\n\n        }\n    }\n\n    \n\n    set engine(engine) {\n        this._engine = engine;\n        this.dispatchEvent({\n            type: \"engine.set\",\n            data: engine,\n            engine: engine\n        });\n        this._engine.on('ready', () => this.emit({\n            type: \"engine.ready\",\n            data: this._engine,\n            engine: this._engine\n        }));\n\n    }\n    get engine(): EngineInstance {\n        return this._engine;\n    }\n\n    init() {\n        if (!this.engine) {\n            var Engine = this.engineClass;\n            this.engine = new Engine(this.engineOptions);\n            this.emit({\n                type: \"beforeinit\"\n            }, this.data, true);\n            this.engine.startup();\n            this.emit({\n                type: \"init\"\n            }, this.data, true);\n        } else {\n            this.engine.reset(this.engineOptions);\n            this.emit({\n                type: \"reset\"\n            }, this.data, true);\n        }\n\n\n    }\n\n\n    updateCanvasSize() {\n        if (this.engine) {\n            this.engine.updateCanvasSize();\n        }\n    }\n\n    onDataUpdate(data: any) {\n        console.log(data);\n    }\n\n\n    getModelSettingData(model: any, object3DModel: any) {\n        var settings: any = {\n            options: {},\n            props: {},\n            meshes: []\n        };\n        var vectors = [\"position\", \"rotation\", \"scale\"],\n            vprops = [\"x\", \"y\", \"z\"],\n            shadows = [\"castShadow\", \"receiveShadow\"];\n        var obj = object3DModel.object;\n        var modelSettings: any = model.settings || {};\n        shadows.map(k => {\n            settings.props[k] = (typeof modelSettings.props == \"object\" && typeof modelSettings.props[k] != \"undefined\") ? modelSettings.props[k] : obj[k];\n        });\n        vectors.map(k => {\n            settings.props[k] = {};\n            if (typeof modelSettings.props == \"object\" && typeof modelSettings.props[k] == \"object\") {\n                vprops.map(v => {\n                    if (typeof modelSettings.props[k][v] != \"undefined\") {\n                        settings.props[k][v] = modelSettings.props[k][v];\n                    } else {\n                        settings.props[k][v] = obj[k][v];\n                    }\n                })\n            }\n            else {\n                vprops.map(v => {\n                    settings.props[k][v] = obj[k][v];\n                })\n            }\n        });\n        if (modelSettings.options) {\n            assignValue(settings.options, modelSettings.options);\n        }\n\n        const addMeshSettings = (index: number, mesh: any, setting: any) => {\n            var settingDefaultData = {\n                name: mesh.name,\n                sid: Str.slug(mesh.name + \" \" + index, '_'),\n                index: index,\n                title: mesh.name,\n                data: {\n\n                },\n                editable: []\n            }\n\n\n            if (isObject(setting)) {\n                settingDefaultData = assignIfNotExists(setting, settingDefaultData);\n            }\n            settings.meshes[index] = settingDefaultData;\n            if (!isArray(settings.meshes[index].editable)) {\n                settings.meshes[index].editable = [];\n            }\n\n            Object.defineProperty(settingDefaultData, '__ref__', {\n                configurable: true,\n                enumerable: false,\n                writable: true,\n                value: mesh\n            })\n            // let materialData = Materials.getPropData(mesh.material);\n        }\n\n\n        if (modelSettings.meshes && modelSettings.meshes.length) {\n            for (let i = 0; i < object3DModel.meshes.length; i++) {\n                const objMesh = object3DModel.meshes[i];\n                let setting = null;\n                for (let j = 0; j < modelSettings.meshes.length; j++) {\n                    const mesh = modelSettings.meshes[j];\n                    if (objMesh.name == mesh.name) {\n                        setting = mesh;\n                        j == modelSettings.meshes.length;\n                    }\n\n                }\n                addMeshSettings(i, objMesh, setting);\n            }\n        } else {\n            for (let i = 0; i < object3DModel.meshes.length; i++) {\n                const objMesh = object3DModel.meshes[i];\n                addMeshSettings(i, objMesh, null);\n            }\n        }\n\n\n        return settings;\n    }\n\n\n    getMeshMaterialFormData(meshMaterial: any, settingMaterial: any) {\n        let materialInputs: any;\n        if (isArray(meshMaterial)) {\n            materialInputs = [];\n            if (isArray(settingMaterial)) {\n                for (let index = 0; index < meshMaterial.length; index++) {\n                    const mat = meshMaterial[index];\n                    let setting = settingMaterial[index] === undefined ? null : settingMaterial[index];\n                    let type = setting && setting.type ? setting.type : mat.type;\n                    materialInputs.push(this.getMaterialInputs(type, mat, setting));\n                }\n            }\n            else {\n                let setting = isObject(settingMaterial) ? settingMaterial : null;\n                let type = setting && setting.type ? setting.type : null;\n                for (let index = 0; index < meshMaterial.length; index++) {\n                    const mat = meshMaterial[index];\n\n                    materialInputs.push(this.getMaterialInputs(type || mat.type, mat, setting));\n                }\n            }\n\n        } else {\n            let setting = isObject(settingMaterial) ? settingMaterial : null;\n            let type = setting && setting.type ? setting.type : meshMaterial.type;\n            materialInputs = this.getMaterialInputs(type, meshMaterial, settingMaterial);\n        }\n        return materialInputs;\n    }\n\n    getMaterialInputs(materialType: string, material: any, settings: any, editableList?: any): any[] {\n        let _type = materialType ? Str.replace(String(materialType).toLowerCase(), ['mesh', 'material'], '') : 'basic';\n        let _material = Materials.config.data[_type];\n        let _settings = isObject(settings) ? settings : {};\n        if (!_material) return [];\n        let inputs = [];\n\n        let ignore = [];\n\n\n        /**\n         * \n         * @param type loại input\n         * @param name tên input\n         * @param value gia tri\n         * @param options option\n         */\n        const addInput = (type: string, name: string, value: (string | number | boolean | { [x: string]: any }), options?: any) => {\n            inputs.push(assignValue({\n                type: type,\n                name: name,\n                value: value\n            }, options));\n        }\n\n        let materialProps = _material.props;\n        let editable = _material.editable;\n        const isArrayEditAble = isArray(editableList);\n        for (let i = 0; i < editable.length; i++) {\n            const key = editable[i];\n            if (Object.hasOwnProperty.call(materialProps, key) && ignore.indexOf(key) == -1) {\n                const prop = materialProps[key];\n                const type = prop.type.split(\":\")[0].toLowerCase();\n                const value = typeof _settings[key] != \"undefined\" ? _settings[key] : (typeof material[key] != \"undefined\" ? material[key] : prop.value);\n                var inputType = prop.data.inputType;\n                const inputOptions: any = {};\n                let isEditAble = isArrayEditAble && editableList.indexOf(key) !== -1;\n                switch (type) {\n                    case 'boolean':\n                        addInput(\"checkbox\", key, value, { editable: isEditAble });\n                        break;\n                    case 'string':\n                        if (inputType == \"select\") {\n                            addInput(\"select\", key, value, { options: prop.data.options, editable: isEditAble })\n                        } else {\n                            addInput(\"text\", key, value, { editable: isEditAble })\n                        }\n                        break;\n                    case \"number\":\n                    case \"float\":\n                    case \"integer\":\n                        if (inputType == \"select\") {\n                            addInput(\"select\", key, value, { options: prop.data.options, editable: isEditAble });\n                        } else {\n                            assignWithout(inputOptions, prop.data, ['inputType']);\n                            //  inputOptions.layout = \"smart\";\n                            if (inputType == \"range\") inputOptions.outputWidth = 2;\n                            inputOptions.editable = isEditAble;\n                            if (type == \"integer\") {\n                                let a = assignValue({\n                                    min: -99999999,\n                                    max: 99999999,\n                                    step: 1\n                                }, inputOptions);\n                                assignValue(inputOptions, a);\n                            }\n                            addInput(inputType == \"range\" ? inputType : 'number', key, value, inputOptions);\n                        }\n                        break;\n\n                    case \"color\":\n                    case 'texture':\n                        inputOptions.editable = isEditAble;\n                        if (typeof materialProps[key + \"Intensity\"] != \"undefined\") {\n                            inputOptions.attach = assignValue(materialProps[key + \"Intensity\"].data);\n                            inputOptions.attach.name = key + \"Intensity\";\n                            inputOptions.attach.type = inputOptions.attach.inputType || \"range\";\n                            if (_settings[key + \"Intensity\"] !== undefined) {\n                                inputOptions.attach.value = _settings[key + \"Intensity\"];\n                            }\n                            else if (_material[key + \"Intensity\"] !== undefined) {\n                                inputOptions.attach.value = _material[key + \"Intensity\"];\n                            } else {\n                                inputOptions.attach.value = materialProps[key + \"Intensity\"].value;\n                            }\n                            ignore.push(key + \"Intensity\");\n                        }\n\n                        var vl = type == \"color\" && isObject(value) ? (\n                            value.isColor ? \"#\" + value.getHexString() : \"#000000\"\n                        ) : value;\n\n                        addInput(type, key, vl, inputOptions);\n                        break;\n\n\n                    default:\n                        break;\n                }\n            }\n        }\n\n        return inputs;\n    }\n\n}\n","import { ChangeDetectorRef, Component, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { Materials } from '@app/_3D/libs/three.libs';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { Object3DPropDataModel, Object3DPropDefaultData } from '@app/_3D/store/data.type';\nimport { assignValue, assignWithout, isArray, isObject, Str } from '@app/_core/helpers/utils';\nimport { CallbackFunction, InpEvent } from '@app/_shared/shared.type';\nimport { ItemModel, ItemSettings } from '@app/_store/item';\nimport { BaseComponent } from '../../base/base.component';\nimport { PanelModelObjectService } from './panel-model-object.service';\n\nenum TabIndex {\n    Meshes = 0,\n    Properties = 1,\n}\nconst propDefault = {\n    castShadow: false,\n    receiveShadow: false,\n    scale: {\n        x: 1,\n        y: 1,\n        z: 1\n    },\n    rotation: {\n        x: 0,\n        y: 0,\n        z: 0\n    },\n    position: {\n        x: 0,\n        y: 0,\n        z: 0\n    }\n};\n\n@Component({\n    selector: 'panel-model-object',\n    templateUrl: './panel-model-object.component.html',\n    styleUrls: ['./panel-model-object.component.scss']\n})\nexport class PanelModelObjectComponent extends BaseComponent implements OnInit, OnChanges {\n    title: string = 'Title';\n    hasTitle: boolean = false;\n    isShow: boolean = false;\n\n    btnDoneText: string = 'Done';\n    onUpdateHandle: CallbackFunction = null;\n    onDoneHandle: CallbackFunction = null;\n    // _service: PanelModelObjectService = null;\n\n\n    settings: ItemSettings = {};\n    secretKey: string = '';\n\n    prevTab: number = TabIndex.Meshes;\n    currentTab: number = TabIndex.Meshes;\n    data: ItemSettings = {};\n    object: any = null;\n\n    meshFormGroup: any[] = [];\n\n    meshes: any[] = [];\n    props: Object3DPropDataModel = assignValue({}, Object3DPropDefaultData);\n    isInited: boolean = false;\n    app: AppEditorService = null;\n    _service: PanelModelObjectService = null;\n    constructor(private cd: ChangeDetectorRef, private service: PanelModelObjectService, private events: AppEditorEventService) {\n        super();\n        this._service = service;\n\n        this.registerEventService(service, {\n            \"panel.show\": e => this.show(e.data),\n            \"panel.hide\": e => this.hide(),\n            \"editor.update.props\": e => {\n                \n                if (!this.isFocus) return;\n                if (isObject(e.data) && e.data.secret_key == this.secretKey) {\n                    assignValue(this.settings.props, e.data.key, e.data.value);\n                    assignValue(this.props, e.data.key, e.data.value);\n                    if (e.data.key == \"rotation\") {\n                        setTimeout(() => {\n                            this.service.emit({\n                                type: \"props.rotation.change\",\n                                value: e.data.value\n                            })\n                        }, 1);\n                    }\n                    if (e.data.key == \"position\") {\n                        setTimeout(() => {\n                            this.service.emit({\n                                type: \"props.vector.change\",\n                                name: \"position\",\n                                value: e.data.value\n                            })\n                        }, 1);\n                    }\n                    if (e.data.key == \"scale\") {\n                        setTimeout(() => {\n                            this.service.emit({\n                                type: \"props.vector.change\",\n                                name: \"scale\",\n                                value: e.data.value\n                            })\n                        }, 1);\n                    }\n                    \n                    this.cd.checkNoChanges();\n                }\n                this.refresh(10);\n            },\n            \"component.checkchange\": () => this.cd.detectChanges()\n        });\n\n    }\n\n\n    onChangeSubEvents(){\n        this.app = this.subEvents.app;\n    }\n\n    onInit(): void {\n        this.activeEventServiceRegistered(this.service);\n        this.cd.detectChanges();\n    }\n\n\n    destroy(){\n        this.deactiveEventServiceRegistered(this.service);\n    }\n\n    \n    ngOnChanges(changes: SimpleChanges) {\n\n    }\n\n\n    onChangeTab(e) {\n        this.currentTab = e.index;\n        this.cd.detectChanges();\n    }\n\n    reset() {\n\n        this.btnDoneText = 'Done';\n    }\n\n\n\n    show(data: any) {\n        if(!this.isFocus) return;\n        if (isObject(data)) {\n\n            if (this.isShow) {\n                if (data.secret_key == this.secretKey) return false;\n                this.hide();\n                setTimeout(() => this.display(data), 10);\n            }\n            else {\n                this.currentTab = TabIndex.Meshes;\n                this.display(data);\n            }\n        }\n\n    }\n    hide() {\n        this.isShow = false;\n        this.reset();\n    }\n\n    display(data: any) {\n        if (data.title) {\n            this.title = data.title;\n            this.hasTitle = true;\n        }\n        if (data.btnDone || data.btnDoneText) {\n            this.btnDoneText = data.btnDone || data.btnDoneText;\n        }\n        if (isObject(data.data) && data.secret_key) {\n            this.setData(data);\n\n            this.isShow = true;\n        }\n    }\n\n    setData(data: any) {\n        if(!this.isFocus) return;\n        this.onUpdateHandle = null;\n        if (typeof data.onUpdate == \"function\") {\n            this.onUpdateHandle = data.onUpdate;\n        }\n        if (typeof data.onChange == \"function\") {\n            this.onUpdateHandle = data.onChange;\n        }\n        if (typeof data.change == \"function\") {\n            this.onUpdateHandle = data.change;\n        }\n        if (typeof data.done == \"function\") {\n            this.onDoneHandle = data.done;\n        } else if (typeof data.onDone == \"function\") {\n            this.onDoneHandle = data.onDone;\n        }\n\n        this.secretKey = data.secret_key;\n        this.data = data.data;\n        this.object = data.object;\n        this.setDefaultSettingData();\n        this.asyncSettings(data.data);\n        this.initProps();\n\n\n    }\n\n    initProps() {\n        for (const key in Object3DPropDefaultData) {\n            if (Object.prototype.hasOwnProperty.call(Object3DPropDefaultData, key)) {\n                const value = Object3DPropDefaultData[key];\n                assignValue(this.props, key, value);\n                if (isObject(value)) {\n                    if (Object.prototype.hasOwnProperty.call(this.object, key) && isObject(this.object[key])) {\n                        for (const k in value) {\n                            if (Object.prototype.hasOwnProperty.call(value, k)) {\n                                if (typeof this.object[key][k] != \"undefined\") {\n                                    this.props[key][k] = this.object[key][k];\n                                }\n                            }\n                        }\n                    }\n                    if (Object.prototype.hasOwnProperty.call(this.settings.props, key)) {\n                        for (const k in value) {\n                            if (Object.prototype.hasOwnProperty.call(value, k)) {\n                                if (Object.prototype.hasOwnProperty.call(this.settings.props[key], k)) {\n                                    this.props[key][k] = this.settings.props[key][k];\n                                }\n\n                            }\n                        }\n                    }\n                } else {\n                    if (Object.prototype.hasOwnProperty.call(this.object, key)) {\n                        this.props[key] = this.object[key];\n                    }\n                    if (Object.prototype.hasOwnProperty.call(this.settings.props, key)) {\n                        this.props[key] = this.settings.props[key];\n                    }\n                }\n\n\n            }\n        }\n    }\n\n    // updateProps(event: InpEvent) {\n\n    // }\n\n    onDone() {\n        this.hide();\n\n        return typeof this.onDoneHandle == \"function\" ? this.onDoneHandle() : 0;\n    }\n\n\n\n\n    /**\n     * thiết lập giá trị mặc định\n     */\n    setDefaultSettingData() {\n        this.settings = {\n            props: assignValue({}, propDefault),\n            options: {},\n            meshes: []\n        }\n    }\n\n\n\n    // dong bo setting cua item voi tab\n    asyncSettings(settings: any) {\n        this.settings = settings;\n        if(!this.settings.meshes){\n            this.settings.meshes = [];\n        }\n        this.meshes = [];\n        if(this.settings.meshes.length){\n            var o = this.app.engine.getObject(this.secretKey);\n            if(o){\n                this.settings.meshes.map((mesh) => {\n                    if(!mesh.__ref__){\n                        o.meshes.map((m) => {\n                            if(m.name == mesh.name){\n                                Object.defineProperty(mesh, '__ref__', {\n                                    enumerable: false,\n                                    configurable: true,\n                                    writable: true,\n                                    value: m\n                                })\n                            }\n                            \n                        })\n                    }\n                    Object.defineProperty(mesh, '__inputs__', {\n                        enumerable: false,\n                        configurable: true,\n                        writable: true,\n                        value: this.app.getMaterialInputs(\n                            mesh.data && mesh.data.material && mesh.data.material.type?mesh.data.material.type: mesh.__ref__.material.type,\n                            mesh.__ref__.material,\n                            mesh.data && mesh.data.material?mesh.data.material:null,\n                            mesh.editable?mesh.editable:[]\n                        )\n                    })\n                \n\n                    if(!mesh.__parent_key__){\n                        Object.defineProperty(mesh, '__parent_key__', {\n                            enumerable: false,\n                            configurable: true,\n                            writable: true,\n                            value: this.secretKey\n                        })\n                    }\n                })\n            }\n        }\n\n    }\n\n\n    updateProps(data) {\n        assignValue(this.settings.props, data.props);\n\n        if (typeof this.onUpdateHandle == \"function\") {\n            this.onUpdateHandle({\n                secret_key: this.secretKey,\n                type: \"props\",\n                key: data.name,\n                data: this.settings.props\n            });\n        }\n        this.service.emit({\n            type: \"props.change\",\n            secret_key: this.secretKey,\n            data: this.settings.props\n        });\n    }\n\n\n    updateMesh(event) {\n        if (isObject(event) && Object.prototype.hasOwnProperty.call(event, 'index')) {\n            for (let i = 0; i < this.settings.meshes.length; i++) {\n                const mesh = this.settings.meshes[i];\n                if (mesh.index == event.index) {\n                    if (!isArray(mesh.data.material)) {\n                        if (!isObject(mesh.data.material)) mesh.data.material = {};\n                        mesh.data.material[event.name] = event.value;\n                        const updateData = {};\n                        updateData[event.name] = event.value;\n                        this.emitUpdateMaterial(i, mesh.name, updateData);\n                    }\n                    else {\n                        mesh.data.material = event.settings;\n                    }\n\n                }\n            }\n        }\n    }\n\n    emitUpdateMaterial(index: number, name: string, updateDAta: any) {\n        if (typeof this.onUpdateHandle == \"function\") {\n            this.onUpdateHandle({\n                secret_key: this.secretKey,\n                type: \"material\",\n                index: index,\n                name: name,\n                data: updateDAta\n            });\n        }\n        this.service.emit({\n            type: \"material.change\",\n            index: index,\n\n            data: this.settings.meshes[index].data.material\n        });\n    }\n\n\n}\n","<div class=\"panel inner-layout\" *ngIf=\"isShow\">\n    <div class=\"panel-body\">\n\n        <nz-tabset [nzSelectedIndex]=\"currentTab\" nzTabPosition=\"top\" nzType=\"line\" class=\"main-tab w100\" (nzSelectChange)=\"onChangeTab($event)\">\n\n            <nz-tab [nzTitle]=\"iconMeshes\">\n                <ng-template #iconMeshes>\n                    Meshes\n                </ng-template>\n                <!-- <mesh-geometry-tab-geometry [inputs]=\"geoInputs\" (subcribe)=\"onGeometryParamChange($event)\"></mesh-geometry-tab-geometry> -->\n                <panel-model-object-tab-meshes [secretKey]=\"secretKey\" [meshes]=\"settings.meshes\" (subcribe)=\"updateMesh($event)\"></panel-model-object-tab-meshes>\n            </nz-tab>\n\n            <nz-tab [nzTitle]=\"iconProperties\">\n                <ng-template #iconProperties>\n                    Properties\n                </ng-template>\n                <ng-template nz-tab>\n                    <panel-model-object-tab-properties [(props)]=\"props\" (subcribe)=\"updateProps($event)\" [events]=\"_service\"></panel-model-object-tab-properties>\n                </ng-template>\n            </nz-tab>\n\n\n        </nz-tabset>\n    </div>\n\n\n\n    <div class=\"panel-footer\">\n        <h3>{{\"Actions\" | translate}}</h3>\n        <div class=\"buttons\">\n            <button nz-button nzType=\"primary\" (click)=\"onDone()\">{{btnDoneText}}</button>\n\n\n        </div>\n    </div>\n\n</div>","import { RestService } from './rest.service';\r\nimport { StartupService } from './startup.service';\r\nimport { MenuService } from './menu/menu.service';\r\nimport { SettingService } from './setting/setting.service';\r\nimport { PermissionsService } from './permissions.service';\r\nimport { HttpService } from './http.service';\r\nimport { StorageService } from './storage.service';\r\nimport { LostDbService } from './lost-db.service';\r\nimport { LostDbTableService } from './lost-db-table.service';\r\nimport { EventManagerService } from './event-manager.service';\r\n\r\nexport * from './startup.service';\r\nexport * from './menu/menu.service';\r\nexport * from './setting/setting.service';\r\nexport * from './permissions.service';\r\n\r\nexport const services = [\r\n  RestService,\r\n  StartupService,\r\n  MenuService,\r\n  SettingService,\r\n  PermissionsService,\r\n  StorageService,\r\n  HttpService,\r\n  LostDbService,\r\n  LostDbTableService,\r\n  EventManagerService\r\n];\r\n","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { BaseInputComponent } from '../base-input/base-input.component';\nimport { LoaderLib, TransparentBase64Image } from '@app/_3D/libs/three.libs';\nimport { ImageLibraryService } from '../../modals/image-library/image-library.service';\nimport { isObject, isString, resizeImage } from '@app/_core/helpers/utils';\nimport Object2Image from '@app/_3D/modules/object-image';\n\n@Component({\n    selector: 'inp-texture',\n    templateUrl: './inp-texture.component.html',\n    styleUrls: ['./inp-texture.component.scss']\n})\nexport class InpTextureComponent extends BaseInputComponent implements OnInit {\n    outputImage = TransparentBase64Image;\n    @Input() listType: string = \"list\";\n    @Output() modalCancelSelect = new EventEmitter<any>();\n    @Output() onCloseLibrary = new EventEmitter<any>();\n    constructor(private libraryService: ImageLibraryService, private cd: ChangeDetectorRef) {\n        super();\n    }\n\n    ngOnInit(): void {\n        if (this.value) {\n            this.image = this.value;\n\n        }\n    }\n\n    set image(value) {\n        if (isString(value)) this.outputImage = value;\n        else if (isObject(value)) {\n            var map = value;\n            if (map.image) {\n                var image = Object2Image.get2DMap(map, 100, 100);\n                if (image) {\n                    this.outputImage = image;\n                }\n            } else {\n                var self = this;\n                // var value = map;\n                if (value != null && isObject(value) && value.file) {\n                    var p = '';\n                    if (value.path) {\n                        if (value.substr(value.path.length - 1, 1) == '/') {\n                            p = value.path;\n                        }\n                        else {\n                            p = value.path + '/';\n                        }\n                        if (value.file.substr(0, 1) == '/') {\n                            p += value.file.substr(1);\n                        } else {\n                            p += value.file;\n                        }\n                    } else {\n                        p = value.file;\n                    }\n                    if(value.format != \"hdr\" && value.extension != \"hdr\"){\n                        resizeImage(p, 60, 60, function (thumbnail) {\n                            // mapImage.attr('src', thumbnail);\n                            self.outputImage = thumbnail;\n                        });\n                    }else{\n                        LoaderLib.LoadEnv({\n                            format: \"hdr\",\n                            file: p\n                        },  (envMap, texture) => {\n                            var src = Object2Image.get2DMap(texture, 240, 120);\n                            if(src){\n                                this.outputImage = src;\n                                this.cd.detectChanges();\n\n                            }\n                        });\n\n                    }\n                }\n            }\n\n        }\n    }\n    chooseTexture() {\n        this.libraryService.open(\n            {\n                title: this.name,\n                mode: \"simple\",\n                listType: this.listType\n            }, \n            image => {\n                this.onSelectImage(image);\n                this.onCloseLibrary.emit(true);\n            }, \n            () => {\n                this.modalCancelSelect.emit(true);\n                this.onCloseLibrary.emit(true);\n            }\n        );\n    }\n\n    onSelectImage(image) {\n        this.outputImage = image.thumbnail;\n        this.value = image.source;\n\n        this.subcribe.emit({\n            name: this.name,\n            value: this.value,\n            old: this.old,\n            file: image\n        });\n        this.old = this.value;\n        if(image.extension == \"hdr\"){\n            this.image = {\n                file: image.source,\n                format: 'hdr'\n            }\n        }\n        \n    }\n\n\n\n}\n","<div class=\"output output-texture\" (click)=\"chooseTexture()\">\n    <img src=\"{{outputImage}}\" alt=\"Texture\" class=\"thumb\">\n</div>","export * from './reducers';\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { LoginComponent } from './login/login.component';\r\nimport { UnAuthGuard } from '../_core/guards';\r\nimport { LayoutAuthComponent } from './layout/layout.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LayoutAuthComponent,\r\n    canActivate: [UnAuthGuard],\r\n    children: [\r\n      {\r\n        path: 'login',\r\n        component: LoginComponent,\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nexport const COMPONENTS = [LoginComponent, LayoutAuthComponent];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AuthRoutingModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\r\n\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError, map } from 'rxjs/operators';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { environment } from '@env/environment';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@Injectable()\r\nexport class RestService {\r\n  baseUrl = '';\r\n  baseUrlForm = '';\r\n\r\n  constructor(private http: HttpClient, private toart: ToastrService, private translateService: TranslateService) {\r\n    this.baseUrl = environment.apiUrl + 'api/';\r\n    this.baseUrlForm = environment.apiUrl;\r\n  }\r\n\r\n  handleError(error: HttpErrorResponse, isShow = true) {\r\n    if (isShow) {\r\n      let errMsg = '';\r\n      if (error.error) {\r\n        errMsg = error.error.message || error.error.statusText;\r\n      } else {\r\n        errMsg = error.message || error.statusText;\r\n      }\r\n      const strError = this.translateService.instant('Error') + ' ';\r\n      this.toart.error(errMsg, strError + error.status);\r\n    }\r\n    return throwError(error);\r\n  }\r\n\r\n  displaySuccessMessage(res: any, isShow = true) {\r\n    if (isShow) {\r\n      const strSuccessful = this.translateService.instant('Successful') + ' ';\r\n      const strNiceJob = this.translateService.instant('Nice Job');\r\n      const message = res ? res.message : strNiceJob;\r\n      this.toart.success(message, strSuccessful);\r\n    }\r\n    return res;\r\n  }\r\n\r\n  get(path: string, paramsIn = {}, showSuccess = false): Observable<any> {\r\n    let params = new HttpParams();\r\n    Object.keys(paramsIn).forEach((key) => {\r\n      if (paramsIn[key] !== undefined) {\r\n        if (Array.isArray(paramsIn[key])) {\r\n          paramsIn[key].forEach((e) => {\r\n            params = params.append(key, e);\r\n          });\r\n        } else if (typeof paramsIn[key] === 'object') {\r\n          params = params.append(key, JSON.stringify(paramsIn[key]));\r\n        } else {\r\n          params = params.append(key, paramsIn[key]);\r\n        }\r\n      }\r\n    });\r\n    const headers = this.getHeader();\r\n    return this.http.get(this.baseUrl + path, { params, headers }).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  getOut(url: string, paramsIn = {}, showSuccess = false): Observable<any> {\r\n    let params = new HttpParams();\r\n    Object.keys(paramsIn).forEach((key) => {\r\n      if (paramsIn[key] !== undefined) {\r\n        if (Array.isArray(paramsIn[key])) {\r\n          paramsIn[key].forEach((e) => {\r\n            params = params.append(key, e);\r\n          });\r\n        } else if (typeof paramsIn[key] === 'object') {\r\n          params = params.append(key, JSON.stringify(paramsIn[key]));\r\n        } else {\r\n          params = params.append(key, paramsIn[key]);\r\n        }\r\n      }\r\n    });\r\n    const headers = this.getHeader();\r\n    return this.http.get(url, { params, headers }).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n  getOut2(url: string, paramsIn = {}, showSuccess = false): Observable<any> {\r\n    let params = new HttpParams();\r\n    Object.keys(paramsIn).forEach((key) => {\r\n      if (paramsIn[key] !== undefined) {\r\n        if (Array.isArray(paramsIn[key])) {\r\n          paramsIn[key].forEach((e) => {\r\n            params = params.append(key, e);\r\n          });\r\n        } else if (typeof paramsIn[key] === 'object') {\r\n          params = params.append(key, JSON.stringify(paramsIn[key]));\r\n        } else {\r\n          params = params.append(key, paramsIn[key]);\r\n        }\r\n      }\r\n    });\r\n    const headers = this.getHeader();\r\n    return this.http.get(url, { params, headers }).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  put(path: string, body: any = {}, headersIn = {}, showSuccess = true): Observable<any> {\r\n    let headers = new HttpHeaders();\r\n    Object.keys(headersIn).forEach((key) => {\r\n      if (headersIn[key] !== undefined) {\r\n        headers = headers.append(key, headersIn[key].toString());\r\n      }\r\n    });\r\n    return this.http.put(this.baseUrl + path, body, { headers }).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  patch(path: string, body: any = {}, headersIn = {}, showSuccess = true): Observable<any> {\r\n    let headers = new HttpHeaders();\r\n    Object.keys(headersIn).forEach((key) => {\r\n      if (headersIn[key] !== undefined) {\r\n        headers = headers.append(key, headersIn[key].toString());\r\n      }\r\n    });\r\n    return this.http.patch(this.baseUrl + path, body, { headers }).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  post(path: string, body = {}, showSuccess = true): Observable<any> {\r\n    return this.http.post(this.baseUrl + path, body).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  download(path: string, body = {}, showSuccess = true): Observable<any> {\r\n    const headers = this.getHeaderDownload();\r\n    return this.http.post(this.baseUrl + path, body, { headers, responseType: 'arraybuffer' }).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  form(path: string, body = {}, showSuccess = true): Observable<any> {\r\n    const headers = this.getHeaderForm();\r\n    return this.http.post(this.baseUrlForm + path, body, { headers, observe: 'response' }).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  formPut(path: string, body = {}, showSuccess = true): Observable<any> {\r\n    const headers = this.getHeaderForm();\r\n    return this.http.put(this.baseUrlForm + path, body, { headers, observe: 'response' }).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  formUpload(path: string, body = {}, showSuccess = true): Observable<any> {\r\n    const headers = this.getHeaderUpload();\r\n    return this.http.post(this.baseUrl + path, body, { headers, observe: 'response' }).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  formUploadPut(path: string, body = {}, showSuccess = true): Observable<any> {\r\n    const headers = this.getHeaderUpload();\r\n    return this.http.put(this.baseUrl + path, body, { headers, observe: 'response' }).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  upload(path: string, body = {}, showSuccess = true): Observable<any> {\r\n    const headers = new HttpHeaders();\r\n    headers.append('Content-Type', 'application/x-www-form-urlencoded');\r\n    return this.http\r\n      .post(this.baseUrl + path, body, {\r\n        headers,\r\n      })\r\n      .pipe(\r\n        map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n        catchError((err) => this.handleError(err))\r\n      );\r\n  }\r\n\r\n  delete(path, showSuccess = true): Observable<any> {\r\n    return this.http.delete(this.baseUrl + path).pipe(\r\n      map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n      catchError((err) => this.handleError(err))\r\n    );\r\n  }\r\n\r\n  private getHeader(): HttpHeaders {\r\n    return new HttpHeaders({\r\n      'Content-Type': 'application/json',\r\n      accept: 'application/json',\r\n      'Accept-Language': 'vi',\r\n    });\r\n  }\r\n\r\n  private getHeaderS3(): HttpHeaders {\r\n    return new HttpHeaders({\r\n      accept: 'application/xml',\r\n    });\r\n  }\r\n\r\n  private getHeaderUpload(): HttpHeaders {\r\n    const headers = new HttpHeaders({\r\n      // 'Content-Type':\r\n      //   'multipart/form-data;boundary=--------------------------247697088228317249765921'\r\n    });\r\n    return headers;\r\n  }\r\n\r\n  private getHeaderDownload(): HttpHeaders {\r\n    const headers = new HttpHeaders({\r\n      Accept: 'application/pdf',\r\n    });\r\n    return headers;\r\n  }\r\n\r\n  private getHeaderForm(): HttpHeaders {\r\n    const headers = new HttpHeaders({\r\n      'Content-Type': 'application/x-www-form-urlencoded',\r\n    });\r\n    return headers;\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { LightProps } from '@app/_3D/store/data.type';\nimport { assignValue, isObject } from '@app/_core/helpers/utils';\nimport { InpEvent } from '@app/_shared/shared.type';\n\n@Component({\n  selector: 'panel-light-tab-properties',\n  templateUrl: './panel-light-tab-properties.component.html',\n  styleUrls: ['./panel-light-tab-properties.component.scss']\n})\nexport class PanelLightTabPropertiesComponent implements OnInit {\n  @Input() props: LightProps = null;\n  @Output() onUpdate = new EventEmitter<LightProps>();\n  @Input() service: any = null;\n\n  @Input() hasShadow: boolean = false;\n  @Input() hasTarget: boolean = false;\n  @Input() hasShadowCamera: boolean = false;\n  @Output() subcribe = new EventEmitter<InpEvent>();\n  constructor() { }\n\n  ngOnInit(): void {\n      let defData = assignValue({}, {\n        visible: true,\n        position: {\n            x: 0,\n            y: 0,\n            z: 0\n        },\n        // up: {\n        //     x: 0,\n        //     y: 0,\n        //     z: 0\n        // },\n        rotation: {\n            x: 0,\n            y: 0,\n            z: 0\n        }\n    \n    });\n      let finalData = assignValue(defData, this.props);\n      if (!isObject(this.props)) this.props = finalData;\n      else assignValue(this.props, finalData);\n  }\n\n  onInputChange(event) {\n      if (event && isObject(event) && event.name) {\n          this.emitUpdate(event.name, event.value);\n      }\n  }\n\n  emitUpdate(name, value) {\n      this.onUpdate.emit(this.props);\n      this.subcribe.emit({\n          name: name,\n          value: value,\n          props: this.props\n      });\n  }\n\n}\n","<div class=\"tab-inner\">\n    <div class=\"inputs store\">\n        <div class=\"inp-list\" *ngIf=\"props\">\n\n            <h3>{{\"Properties\"|translate}}</h3>\n            <inp-switch-group class=\"inp-group-item\" name=\"visible\" [(value)]=\"props.visible\" label=\"Visible\" (subcribe)=\"onInputChange($event)\"></inp-switch-group>\n            <inp-vector3-group class=\"inp-group-item\" name=\"position\" [(value)]=\"props.position\" label=\"Position\" (subcribe)=\"onInputChange($event)\"></inp-vector3-group>\n\n            <div *ngIf=\"hasShadow\">\n                <h3 class=\"mt-20\">{{\"Shadow\"|translate}}</h3>\n                <inp-switch-group class=\"inp-group-item\" name=\"castShadow\" [(value)]=\"props.castShadow\" label=\"Cast Shadow\" (subcribe)=\"onInputChange($event)\"></inp-switch-group>\n                <inp-range-group class=\"inp-group-item\" name=\"shadow.bias\" [(value)]=\"props.shadow.bias\" label=\"Bias\" [min]=\"-5\" [max]=\"5\" [step]=\"0.0001\" (subcribe)=\"onInputChange($event)\"></inp-range-group>\n                <inp-range-group class=\"inp-group-item\" name=\"shadow.darkness\" [(value)]=\"props.shadow.darkness\" label=\"Darkness\" [min]=\"0\" [max]=\"1\" [step]=\"0.01\" (subcribe)=\"onInputChange($event)\"></inp-range-group>\n                <inp-number-group class=\"inp-group-item\" name=\"shadow.radius\" [(value)]=\"props.shadow.radius\" label=\"Radius\" [min]=\"0\" [max]=\"500\" [step]=\"0.1\" (subcribe)=\"onInputChange($event)\"></inp-number-group>\n                <h4 class=\"mt-20\">{{\"Map Size\"|translate}}</h4>\n                <inp-number-group class=\"inp-group-item\" name=\"shadow.mapSize.width\" [(value)]=\"props.shadow.mapSize.width\" label=\"Width\" [min]=\"0\" [max]=\"10240\" [step]=\"1\" (subcribe)=\"onInputChange($event)\"></inp-number-group>\n                <inp-number-group class=\"inp-group-item\" name=\"shadow.mapSize.height\" [(value)]=\"props.shadow.mapSize.height\" label=\"Height\" [min]=\"0\" [max]=\"10240\" [step]=\"1\" (subcribe)=\"onInputChange($event)\"></inp-number-group>\n                <div *ngIf=\"hasShadowCamera\">\n                    <h4 class=\"mt-20\">{{\"Shadow Camera\"|translate}}</h4>\n                    <inp-number-group class=\"inp-group-item\" name=\"shadow.camera.near\" [(value)]=\"props.shadow.camera.near\" label=\"Near\" [min]=\"0.0001\" [max]=\"10240\" [step]=\"0.001\" (subcribe)=\"onInputChange($event)\"></inp-number-group>\n                    <inp-number-group class=\"inp-group-item\" name=\"shadow.camera.far\" [(value)]=\"props.shadow.camera.far\" label=\"Far\" [min]=\"0.0001\" [max]=\"10240\" [step]=\"0.001\" (subcribe)=\"onInputChange($event)\"></inp-number-group>\n                    <inp-number-group class=\"inp-group-item\" name=\"shadow.camera.top\" [(value)]=\"props.shadow.camera.top\" label=\"Top\" [min]=\"-1024\" [max]=\"1024\" [step]=\"0.001\" (subcribe)=\"onInputChange($event)\"></inp-number-group>\n                    <inp-number-group class=\"inp-group-item\" name=\"shadow.camera.bottom\" [(value)]=\"props.shadow.camera.bottom\" label=\"Bottom\" [min]=\"-1024\" [max]=\"1024\" [step]=\"0.001\" (subcribe)=\"onInputChange($event)\"></inp-number-group>\n                    <inp-number-group class=\"inp-group-item\" name=\"shadow.camera.left\" [(value)]=\"props.shadow.camera.left\" label=\"Left\" [min]=\"-1024\" [max]=\"1024\" [step]=\"0.001\" (subcribe)=\"onInputChange($event)\"></inp-number-group>\n                    <inp-number-group class=\"inp-group-item\" name=\"shadow.camera.right\" [(value)]=\"props.shadow.camera.right\" label=\"Right\" [min]=\"-1024\" [max]=\"1024\" [step]=\"0.001\" (subcribe)=\"onInputChange($event)\"></inp-number-group>\n                </div>\n                \n            </div>\n            <div *ngIf=\"hasTarget\">\n                <h3 class=\"mt-20\">{{\"Target\"|translate}}</h3>\n                <inp-vector3-group class=\"inp-group-item\" name=\"target.position\" [(value)]=\"props.target.position\" label=\"Position\" (subcribe)=\"onInputChange($event)\"></inp-vector3-group>\n            </div>\n        </div>\n    </div>\n</div>","/**\n * Stateservice sử dụng cho angular hoặc bất kỳ một core nào khác\n * @author DoanLN\n */\nimport { Injectable } from '@angular/core';\nimport { getType, inArray, isArray, isBoolean, isEmpty, isFunction, isObject, isString, newObj, objectHasKey, Str } from '../helpers/utils';\n\ndeclare interface StorageEvent {\n    key: string,\n    value: any,\n    oldValue?: any\n    newValue?: any\n}\n\n/**\n * các key hệ thống mà bất kỳ một state nào muốn khai báo cũng phải né\n */\n const ignoreKeys: string[] = [\n  '__data',\n  '__listenners',\n  '__checks',\n  'constructor',\n  'assign',\n  'take',\n  'setState',\n  'setValue',\n  '__checkChange',\n  '__dispatchChange',\n  '__keyAvailable',\n  'onChange',\n  'onCheck',\n  'exists',\n  'subcribe',\n  '$'\n]\n\nconst SECRET_KEY = Str.rand(\"BM10001\");\n@Injectable({\n  providedIn: 'root'\n})\nexport class StorageService {\n  private __data: {[s: string]: any} = {};\n  private __listenners: {[s: string]: Array<(value:any, key?:string, event?:any) => any>} = {};\n  private __checks: {[s: string]: (value:any, key?:string, event?:any) => any} = {};\n\n  [s: string]: any | ((s: string) => any);\n\n  \n  constructor() {\n\n  }\n\n\n\n  /**\n   * khai báo state\n   * @param key chuỗi tên thuộc tính\n   * @param value giá trị\n   * @param onChange hàm thực thi khi có thay đỗi\n   * @param onCheck hàm kiểm tra trước khi thay đổi\n   * @returns {any}\n   */\n  assign(key: any, value?: any, onChange?: (...args:any[]) => any, onCheck?:  any): any {\n      if (isString(key)) {\n          if (isFunction(onChange)) {\n              this.onChange(key, onChange, isBoolean(onCheck)?onCheck:false);\n          }\n          if (isFunction(onCheck)) {\n              this.onCheck(key, onCheck);\n          }\n          var ret: any = null;\n          if (typeof this.__data[key] != \"undefined\") {\n              ret = this.__data[key];\n          }\n          else {\n              ret = value;\n              this.setValue(key, value);\n          }\n          return ret;\n      }\n      if (isObject(key)) {\n          let returnData = newObj({});\n          for (const k in key) {\n              if (objectHasKey(key, k)) {\n                  const vl = key[k];\n                  if (isObject(vl) && typeof vl.$value != \"undefined\") {\n                      let _value = vl.$value;\n                      let change = vl.$change || (typeof value == \"function\" ? value : (typeof onchange == \"function\" ? onChange : null));\n                      let check = vl.$check || null;\n                      returnData[k] = this.assign(k, _value, change, check);\n                  }\n                  else {\n                      returnData[k] = this.assign(k, vl, value || onChange || null);\n                  }\n              }\n          }\n          return returnData;\n      }\n      return null;\n  }\n\n\n  /**\n   * lấy ra giá trị của thuộc tính có key được truyền vào. Sau khi thực hiện hành động có thể gán lại giá trị cho thuộc tính hoặc là không!\n   * @param key key truy cập thuộc tính\n   * @param callback hàm xử lý\n   * @returns {any}\n   */\n  take(key: any, callback?: (...args:any[]) => any): any {\n      var self: any = this;\n      if (isString(key) && objectHasKey(this.__data, key)) {\n          var value = this.__data[key];\n          var type = getType(value);\n          var jsonValue = JSON.stringify(value);\n          if (isFunction(callback)) {\n              var rs: any = callback(value);\n              if (typeof rs != \"undefined\") {\n                  if (jsonValue != JSON.stringify(rs)) {\n                      self[key] = rs;\n                  }\n              } else if (type == \"object\" || type == \"array\") {\n                  this.__dispatchChange({\n                      key: key,\n                      value: value,\n                      newValue: value,\n                      oldValue: value\n                  });\n              }\n              return this.__data[key];\n          } else {\n              return value;\n          }\n      } else if (isObject(key)) {\n          var returnData = newObj();\n          for (const k in key) {\n              if (objectHasKey(key, k)) {\n                  const fn = key[k];\n                  if (objectHasKey(this.__data, k)) {\n                      returnData[key] = this.take(k, fn);\n                  }\n\n              }\n          }\n          return returnData;\n      }\n      else if (isArray(key)) {\n          var returnData = newObj();\n          for (let k = 0; k < key.length; k++) {\n              const pk = key[k];\n              if (objectHasKey(this.__data, pk)) {\n                  returnData[key] = this.take(k, callback);\n              }\n          }\n          return returnData;\n      }\n      return null;\n  }\n\n  /**\n   * thêm hoặc cập nhật state\n   * @param {string|object} key tên thuov65 tính\n   * @param {mixed} value giá trị\n   * @param {Function} onChange hàm xử lý khi có thay đổi\n   */\n  setState(key: any, value?: any, onChange?: (...args:any[]) => any) {\n      if (isObject(key)) {\n          if (isFunction(value)) {\n              for (const k in key) {\n                  if (objectHasKey(key, k)) {\n                      const vl = key[k];\n                      this.setValue(k, vl, value);\n                  }\n              }\n          }\n          else if (isFunction(onChange)) {\n              for (const k in key) {\n                  if (objectHasKey(key, k)) {\n                      const vl = key[k];\n                      this.setValue(k, vl, onChange);\n                  }\n              }\n          }\n          else {\n              for (const k in key) {\n                  if (objectHasKey(key, k)) {\n                      const vl = key[k];\n                      this.setValue(k, vl);\n                  }\n              }\n          }\n      } else if (isString(key)) {\n          if (isFunction(onChange)) {\n              this.setValue(key, value, onChange);\n          }\n          else {\n              this.setValue(key, value);\n          }\n      }\n  }\n\n  /**\n   * thiết lập giá trị cho thuộc tính\n   * @param key tên thuộc tính\n   * @param value giá trị\n   * @param onChange hàm xử lý thay đổi\n   */\n  private setValue(key: string, value: any, onChange?: (...args:any[]) => any): boolean {\n      if (!this.__keyAvailable(key)) return false;\n      var self: any = this;\n      if (!objectHasKey(this.__data, key)) {\n          if (isFunction(onChange)) {\n              this.onChange(key, onChange);\n          }\n          Object.defineProperty(this, key, {\n              enumerable: true,\n              configurable: true,\n              get: function () {\n                  return this.__data[key]\n              },\n              set: function (val: any) {\n                  var old = this.__data[key];\n                  var s: boolean = this.__checkChange({\n                      key: key,\n                      value: val,\n                      newValue: val,\n                      oldValue: old\n                  });\n                  if (s) {\n                      this.__data[key] = val;\n                      this.__dispatchChange({\n                          key: key,\n                          value: val,\n                          newValue: val,\n                          oldValue: old\n                      });\n                  }\n              }\n          })\n          this.__data[key] = value;\n          this.__dispatchChange({\n              key: key,\n              value: value,\n              newValue: value,\n              oldValue: undefined\n          });\n      } else {\n          if (isFunction(onChange)) {\n              this.onChange(key, onChange);\n          }\n          self[key] = value;\n      }\n      return true;\n  }\n\n  exists(key: any): boolean {\n      return (isString(key) && objectHasKey(this.__data, key))\n  }\n\n  private __keyAvailable(key: any): boolean {\n      return (isString(key) && !inArray(ignoreKeys, key));\n  }\n\n  __checkChange(event: StorageEvent) {\n      var s: boolean = true;\n      for (const key in this.__checks) {\n          if (objectHasKey(this.__checks, key)) {\n              const fn = this.__checks[key];\n              if (isFunction(fn) && key == event.key) {\n                  let a = fn(event.value, event.key, event);\n                  if (a === false) s = a;\n              }\n          }\n      }\n      return s;\n  }\n\n  private __dispatchChange(event: StorageEvent) {\n      var s: number = 0;\n      if(event && event.key && objectHasKey(this.__listenners, event.key)){\n          const fns = this.__listenners[event.key];\n          if (isArray(fns)) {\n              fns.map(fn => {\n                  if (isFunction(fn)) {\n                      fn(event.value, event.key, event);\n                      s++;\n\n                  }\n              })\n          }\n      }\n      if(objectHasKey(this.__listenners, SECRET_KEY)){\n          const fns = this.__listenners[SECRET_KEY];\n          if (isArray(fns)) {\n              fns.map(fn => {\n                  if (isFunction(fn)) {\n                      fn(event.value, event.key, event);\n                      s++;\n                  }\n              })\n          }\n      }\n      return s;\n  }\n\n  /**\n   * \n   * @param {string|array|object} key key hoạc cụm key\n   * @param callback \n   */\n  onChange(key: any, callback?: (...args:any[]) => any, callIfHasValue: boolean = false) {\n      if (isString(key) && isFunction(callback)) {\n        if (typeof this.__listenners[key] == \"undefined\") {\n            this.__listenners[key] = [];\n        }\n        this.__listenners[key].push(callback);\n          if (callIfHasValue && this.exists(key)) {\n              var value = this.__data[key];\n              callback(value, key, {\n                  key: key,\n                  value: value,\n                  newValue: value,\n                  oldValue: undefined\n              })\n          }\n      }\n      else if (isObject(key)) {\n          for (const k in key) {\n              if (objectHasKey(key, k)) {\n                  const cb = key[k];\n                  if (isFunction(cb)) {\n                      this.onChange(k, cb, callIfHasValue);\n                  }\n              }\n          }\n      }\n      else if (isArray(key) && key.length && isFunction(callback)) {\n          for (let i = 0; i < key.length; i++) {\n              const k = key[i];\n              this.onChange(k, callback, callIfHasValue);\n          }\n      }else if(isFunction(key)){\n          this.onChange(SECRET_KEY, key);\n      }\n  }\n\n  subcribe(key:any, callback?:(...args:any[])=>any, callIfHasValue: boolean = false):any{\n      return this.onChange(key, callback, callIfHasValue);\n  }\n\n  unsubcribe(key: string, callback?:(...args: any[]) => any){\n    if (typeof this.__listenners[key] == \"undefined\") {\n        return true;\n    }\n    if(this.__listenners[key].length){\n        this.__listenners[key].map((cb, i) => (!isFunction(callback) || callback == cb) && this.__listenners[key].splice(i, 1));\n    }\n    \n  }\n\n  /**\n   * kiem tra gia tri truoc khi thay doi\n   * @param key key truy cap\n   * @param callback ham kiem tra\n   */\n  onCheck(key: any, callback: any = undefined) {\n      if (isString(key) && isFunction(callback)) {\n          this.__checks[key] = callback;\n      }\n      else if (isObject(key)) {\n          for (const k in key) {\n              if (objectHasKey(key, k)) {\n                  const cb = key[k];\n                  if (isFunction(cb)) {\n                      this.onCheck(k, cb);\n                  }\n              }\n          }\n      }\n      else if (isArray(key) && key.length && isFunction(callback)) {\n          for (let i = 0; i < key.length; i++) {\n              const k = key[i];\n              this.onCheck(k, callback);\n          }\n      }\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ClientViewportService extends EventManagerService {\n\n  constructor() {\n    super();\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { InpEvent } from '@app/_shared/shared.type';\n\n@Component({\n  selector: 'mesh-geometry-tab-material',\n  templateUrl: './mesh-geometry-tab-material.component.html',\n  styleUrls: ['./mesh-geometry-tab-material.component.scss']\n})\nexport class MeshGeometryTabMaterialComponent implements OnInit {\n\n  @Input() material: {\n    type: string,\n    [propKey: string]: any\n  } = null;\n  @Input() settings: {\n    type: string,\n    [propKey: string]: any\n  };\n  @Output() subcribe = new EventEmitter<InpEvent>();\n  constructor() {\n    \n  }\n\n  ngOnInit() {\n\n  }\n\n  onUpdate(event: InpEvent){\n    this.subcribe.emit(event);\n  }\n}\n","<div class=\"tab-inner\">\n    <div class=\"inputs store\">\n        <material-inputs [material]=\"material\" [(settings)]=\"settings\" (subcribe)=\"onUpdate($event)\"></material-inputs>\n    </div>\n</div>","import { Role } from './role';\r\n\r\nexport class User {\r\n  id?: number;\r\n  email?: string;\r\n  password?: string;\r\n  fullName?: string;\r\n  username?: string;\r\n  roles?: Array<Role>;\r\n  accessToken?: string;\r\n  phone?: string;\r\n  avatarUrl?: string;\r\n  organizationId?: string;\r\n}\r\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { TemplateEventsService } from '@app/template-page/_store/events.service';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { ControlDefaultSetting, ControlSetting } from '@app/_3D/store/data.type';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { EditorToolbarService } from '@app/_shared/components/viewport/editor-toolbar/editor-toolbar.service';\nimport { InpEvent } from '@app/_shared/shared.type';\nimport { EditorIO, EditorMethods } from '../../../base/editor-io';\n\n@Component({\n    selector: 'app-tab-control',\n    templateUrl: './tab-control.component.html',\n    styleUrls: ['./tab-control.component.scss']\n})\nexport class TabControlComponent extends BaseComponent implements OnInit {\n\n    controls: ControlSetting = {};\n    app: AppEditorService;\n    constructor(\n        private cd: ChangeDetectorRef,\n        private events: AppEditorEventService\n    ) {\n        super();\n    }\n\n    initFirst(){\n        this.app = this.events.app;\n    }\n    onInit() {\n        if(this.isChangeSubEvents){\n            this.app = this.subEvents.app;\n\n        }\n        assignValue(this.controls, ControlDefaultSetting);\n        assignValue(this.controls, this.app.getControlSetting());\n        this.cd.detectChanges();\n    }\n    onDestroy(){\n        \n    }\n\n    updateControlSetting(event: InpEvent){\n        this.controls[event.name] = event.value;\n        setTimeout(() => {\n            this.app.updateControlSetting(this.controls);\n        }, 10);\n    }\n}\n","<div class=\"tab-inner\">\n    <div class=\"tab-header\">\n        <h3>Controls</h3>\n    </div>\n    <div class=\"store\">\n        <div class=\"inputs\">\n            <inp-switch-group name=\"enabled\" [(value)]=\"controls.enabled\" label=\"Enable\" (subcribe)=\"updateControlSetting($event)\" class=\"inp-group-item-first\"></inp-switch-group>\n            <inp-switch-group name=\"autoUpdateScene\" [(value)]=\"controls.autoUpdateScene\" label=\"Auto Update Scene\" (subcribe)=\"updateControlSetting($event)\" class=\"inp-group-item\" *ngIf=\"controls.enabled\"></inp-switch-group>\n            <inp-switch-group name=\"enableRotate\" [(value)]=\"controls.enableRotate\" label=\"Rotate\" (subcribe)=\"updateControlSetting($event)\" class=\"inp-group-item\" *ngIf=\"controls.enabled\"></inp-switch-group>\n            <inp-switch-group name=\"enableZoom\" [(value)]=\"controls.enableZoom\" label=\"Zoom\" (subcribe)=\"updateControlSetting($event)\" class=\"inp-group-item\" *ngIf=\"controls.enabled\"></inp-switch-group>\n            <inp-number-group name=\"maxDistance\" [(value)]=\"controls.maxDistance\" label=\"Max Distance\" (subcribe)=\"updateControlSetting($event)\" [min]=\"0.1\" [max]=\"10000\" [step]=\"0.1\" class=\"inp-group-item\" *ngIf=\"controls.enabled && controls.enableZoom\"></inp-number-group>\n            <inp-switch-group name=\"enableDamping\" [(value)]=\"controls.enableDamping\" label=\"Damping\" (subcribe)=\"updateControlSetting($event)\" class=\"inp-group-item\" *ngIf=\"controls.enabled && (controls.enableRotate || controls.enableZoom)\"></inp-switch-group>\n            <inp-switch-group name=\"highPerformance\" [(value)]=\"controls.highPerformance\" label=\"High-Performance\" (subcribe)=\"updateControlSetting($event)\" class=\"inp-group-item\" *ngIf=\"controls.enabled && (controls.enableRotate || controls.enableZoom)\"></inp-switch-group>\n            <inp-switch-group name=\"enablePan\" [(value)]=\"controls.enablePan\" label=\"Pan\" (subcribe)=\"updateControlSetting($event)\" class=\"inp-group-item\" *ngIf=\"controls.enabled\"></inp-switch-group>\n            <!-- <inp-number-group name=\"minDistance\" [(value)]=\"controls.minDistance\" label=\"Min Distance\" (subcribe)=\"updateControlSetting($event)\" [min]=\"0.1\" [max]=\"10000\" [step]=\"0.1\"></inp-number-group> -->\n            \n            \n        </div>\n    </div>\n</div>","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\r\n\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError, map } from 'rxjs/operators';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { environment } from '@env/environment';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { getConfig } from '../config';\r\n\r\n@Injectable()\r\nexport class HttpService {\r\n    baseUrl = getConfig('urls.base');\r\n    baseUrlForm = '/assets/demo/';\r\n\r\n    constructor(private http: HttpClient, private toart: ToastrService, private translateService: TranslateService) {\r\n        // this.baseUrl = environment.apiUrl + 'api/';\r\n        // this.baseUrlForm = environment.apiUrl;\r\n    }\r\n\r\n    handleError(error: HttpErrorResponse, isShow = true) {\r\n        if (isShow) {\r\n            let errMsg = '';\r\n            if (error.error) {\r\n                errMsg = error.error.message || error.error.statusText;\r\n            } else {\r\n                errMsg = error.message || error.statusText;\r\n            }\r\n            const strError = this.translateService.instant('Error') + ' ';\r\n            this.toart.error(errMsg, strError + error.status);\r\n        }\r\n        return throwError(error);\r\n    }\r\n\r\n    displaySuccessMessage(res: any, isShow = true) {\r\n        if (isShow) {\r\n            const strSuccessful = this.translateService.instant('Successful') + ' ';\r\n            const strNiceJob = this.translateService.instant('Nice Job');\r\n            const message = res ? res.message : strNiceJob;\r\n            this.toart.success(message, strSuccessful);\r\n        }\r\n        return res;\r\n    }\r\n\r\n    get(path: string, paramsIn = {}, showSuccess = false): Observable<any> {\r\n        let params = new HttpParams();\r\n        Object.keys(paramsIn).forEach((key) => {\r\n            if (paramsIn[key] !== undefined) {\r\n                if (Array.isArray(paramsIn[key])) {\r\n                    paramsIn[key].forEach((e) => {\r\n                        params = params.append(key, e);\r\n                    });\r\n                } else if (typeof paramsIn[key] === 'object') {\r\n                    params = params.append(key, JSON.stringify(paramsIn[key]));\r\n                } else {\r\n                    params = params.append(key, paramsIn[key]);\r\n                }\r\n            }\r\n        });\r\n        const headers = this.getHeader();\r\n        return this.http.get(this.baseUrl + path, { params, headers }).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    getOut(url: string, paramsIn = {}, showSuccess = false): Observable<any> {\r\n        let params = new HttpParams();\r\n        Object.keys(paramsIn).forEach((key) => {\r\n            if (paramsIn[key] !== undefined) {\r\n                if (Array.isArray(paramsIn[key])) {\r\n                    paramsIn[key].forEach((e) => {\r\n                        params = params.append(key, e);\r\n                    });\r\n                } else if (typeof paramsIn[key] === 'object') {\r\n                    params = params.append(key, JSON.stringify(paramsIn[key]));\r\n                } else {\r\n                    params = params.append(key, paramsIn[key]);\r\n                }\r\n            }\r\n        });\r\n        const headers = this.getHeader();\r\n        return this.http.get(url, { params, headers }).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n    getOut2(url: string, paramsIn = {}, showSuccess = false): Observable<any> {\r\n        let params = new HttpParams();\r\n        Object.keys(paramsIn).forEach((key) => {\r\n            if (paramsIn[key] !== undefined) {\r\n                if (Array.isArray(paramsIn[key])) {\r\n                    paramsIn[key].forEach((e) => {\r\n                        params = params.append(key, e);\r\n                    });\r\n                } else if (typeof paramsIn[key] === 'object') {\r\n                    params = params.append(key, JSON.stringify(paramsIn[key]));\r\n                } else {\r\n                    params = params.append(key, paramsIn[key]);\r\n                }\r\n            }\r\n        });\r\n        const headers = this.getHeader();\r\n        return this.http.get(url, { params, headers }).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    put(path: string, body: any = {}, headersIn = {}, showSuccess = true): Observable<any> {\r\n        // let headers = new HttpHeaders();\r\n        let headers = this.getLaravelHeader();\r\n        Object.keys(headersIn).forEach((key) => {\r\n            if (headersIn[key] !== undefined) {\r\n                headers = headers.append(key, headersIn[key].toString());\r\n            }\r\n        });\r\n        return this.http.put(this.baseUrl + path, body, { headers }).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    patch(path: string, body: any = {}, headersIn = {}, showSuccess = true): Observable<any> {\r\n        let headers = this.getLaravelHeader();\r\n        Object.keys(headersIn).forEach((key) => {\r\n            if (headersIn[key] !== undefined) {\r\n                headers = headers.append(key, headersIn[key].toString());\r\n            }\r\n        });\r\n        return this.http.patch(this.baseUrl + path, body, { headers }).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    post(path: string, body = {}, showSuccess = true): Observable<any> {\r\n        let headers = this.getLaravelHeader();\r\n        return this.http.post(this.baseUrl + path, body, {headers}).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    download(path: string, body = {}, showSuccess = true): Observable<any> {\r\n        const headers = this.getHeaderDownload();\r\n        return this.http.post(this.baseUrl + path, body, { headers, responseType: 'arraybuffer' }).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    form(path: string, body = {}, showSuccess = true): Observable<any> {\r\n        const headers = this.getHeaderForm();\r\n        return this.http.post(this.baseUrlForm + path, body, { headers, observe: 'response' }).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    formPut(path: string, body = {}, showSuccess = true): Observable<any> {\r\n        const headers = this.getHeaderForm();\r\n        return this.http.put(this.baseUrlForm + path, body, { headers, observe: 'response' }).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    formUpload(path: string, body = {}, showSuccess = true): Observable<any> {\r\n        const headers = this.getHeaderUpload();\r\n        return this.http.post(this.baseUrl + path, body, { headers, observe: 'response' }).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    formUploadPut(path: string, body = {}, showSuccess = true): Observable<any> {\r\n        const headers = this.getHeaderUpload();\r\n        return this.http.put(this.baseUrl + path, body, { headers, observe: 'response' }).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    upload(path: string, body = {}, showSuccess = true): Observable<any> {\r\n        const headers = new HttpHeaders();\r\n        headers.append('Content-Type', 'application/x-www-form-urlencoded');\r\n        return this.http\r\n            .post(this.baseUrl + path, body, {\r\n                headers,\r\n            })\r\n            .pipe(\r\n                map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n                catchError((err) => this.handleError(err))\r\n            );\r\n    }\r\n\r\n    delete(path, showSuccess = true): Observable<any> {\r\n        let headers = this.getLaravelHeader();\r\n        return this.http.delete(this.baseUrl + path, {headers}).pipe(\r\n            map((res) => this.displaySuccessMessage(res, showSuccess)),\r\n            catchError((err) => this.handleError(err))\r\n        );\r\n    }\r\n\r\n    private getHeader(): HttpHeaders {\r\n        return new HttpHeaders({\r\n            'Content-Type': 'application/json',\r\n            accept: 'application/json',\r\n            'Accept-Language': 'vi',\r\n            \"X-CSRF-TOKEN\": getConfig('csrf')\r\n        });\r\n    }\r\n    private getLaravelHeader(): HttpHeaders {\r\n        return new HttpHeaders({\r\n            'Content-Type': 'application/json',\r\n            accept: 'application/json',\r\n            'Accept-Language': 'vi',\r\n            \"X-CSRF-TOKEN\": getConfig('csrf')\r\n        });\r\n    }\r\n\r\n    private getHeaderS3(): HttpHeaders {\r\n        return new HttpHeaders({\r\n            accept: 'application/xml',\r\n        });\r\n    }\r\n\r\n    private getHeaderUpload(): HttpHeaders {\r\n        const headers = new HttpHeaders({\r\n            // 'Content-Type':\r\n            //   'multipart/form-data;boundary=--------------------------247697088228317249765921'\r\n        });\r\n        return headers;\r\n    }\r\n\r\n    private getHeaderDownload(): HttpHeaders {\r\n        const headers = new HttpHeaders({\r\n            Accept: 'application/pdf',\r\n        });\r\n        return headers;\r\n    }\r\n\r\n    private getHeaderForm(): HttpHeaders {\r\n        const headers = new HttpHeaders({\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n        });\r\n        return headers;\r\n    }\r\n}\r\n","export enum ETemplateStatus {\r\n    draft = 'draft',\r\n    published = 'published',\r\n}\r\n\r\n\r\nexport interface TemplateModel {\r\n    id: number\r\n    name: string\r\n    category_id?: number\r\n    description?: string\r\n    status?: string\r\n    thumbnail?: string\r\n    data?: {\r\n        renderer?: any\r\n        scene?: any\r\n        composer?: {\r\n            [x: string]: any\r\n        }\r\n        shadow?: any\r\n        camera?: any\r\n        control?: any\r\n        lights?: any[]\r\n        // objects\r\n        objects?: any[]\r\n        // objects\r\n        meshes?: any[]\r\n        [x: string]: any\r\n    }\r\n    [x: string]: any\r\n\r\n}\r\n","import { ActionReducerMap, createFeatureSelector, MetaReducer } from '@ngrx/store';\r\nimport { Params, RouterStateSnapshot } from '@angular/router';\r\nimport { Injectable } from '@angular/core';\r\n\r\nimport { RouterStateSerializer } from '@ngrx/router-store';\r\nimport * as fromRouter from '@ngrx/router-store';\r\nimport { environment } from '@env/environment';\r\n\r\nexport interface RouterStateUrl {\r\n  url: string;\r\n  queryParams: Params;\r\n  params: Params;\r\n}\r\n\r\nexport interface GlobalState {\r\n  routerReducer: fromRouter.RouterReducerState<RouterStateUrl>;\r\n}\r\n\r\nexport const reducers: ActionReducerMap<GlobalState> = {\r\n  routerReducer: fromRouter.routerReducer,\r\n};\r\n\r\nexport const getRouterState = createFeatureSelector<fromRouter.RouterReducerState<RouterStateUrl>>('routerReducer');\r\n\r\n/**\r\n * By default, @ngrx/store uses combineReducers with the reducer map to compose\r\n * the root meta-reducer. To add more meta-reducers, provide an array of meta-reducers\r\n * that will be composed to form the root meta-reducer.\r\n */\r\nexport const metaReducers: MetaReducer<GlobalState>[] = !environment.production ? [] : [];\r\n\r\n@Injectable()\r\nexport class CustomRouterStateSerializer implements RouterStateSerializer<RouterStateUrl> {\r\n  serialize(routerState: RouterStateSnapshot): RouterStateUrl {\r\n    let route = routerState.root;\r\n\r\n    while (route.firstChild) {\r\n      route = route.firstChild;\r\n    }\r\n\r\n    const {\r\n      url,\r\n      root: { queryParams },\r\n    } = routerState;\r\n    const { params } = route;\r\n\r\n    // Only return an object including the URL, params and query params\r\n    // instead of the entire snapshot\r\n    return { url, params, queryParams };\r\n  }\r\n}\r\n","import * as workflow from './workflow.json';\r\nexport const environment = {\r\n  production: false,\r\n  apiUrl: 'https://3dhub.vcc.vn/apiv2/',\r\n  domain: 'https://localhost:4200/',\r\n  ggKeygKey: 'AIzaSyAh5sGTrjeMAEHbuzRrrqQh0l2_ot8n59w',\r\n  allowLocalhostAsSecureOrigin: false,\r\n  osKey: 'ade79d14-e256-4f0a-ac4b-3f413ceef80a',\r\n  workflow,\r\n};\r\n","import { Injectable } from '@angular/core';\nimport { App3DService } from './app-3d.service';\nimport Editor from '../libs/editor';\nimport { assignValue, assignWithout, copyByList, date, isArray, isBoolean, isNumber, isObject, isString, objectHasKey, Str } from '@app/_core/helpers/utils';\nimport { LS } from '@app/_core/helpers/local-storage';\nimport { TemplateModel } from '@app/_store/template';\n// import { LoaderLib } from '../libs/three.libs';\nimport { FG_ITEM } from '@app/_shared/shared.type';\nimport { AppDefaultData, CameraSetting, ControlSetting, FloorSetting, SceneSize, SceneSizeDefaultData, ShadowSetting, Vector3 } from '../store/data.type';\nimport { EditorClass, iEditor } from '../store/docs';\nimport { LoaderLib } from '../libs/three.libs';\nimport EditorEngine from '../engines/editor.engine';\nimport { AppEditorEventService } from './app-editor-event.service';\nimport { ProjectModel } from '@app/_store/project';\n\nimport * as THREE from 'three';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AppEditorService extends App3DService {\n    _editor: iEditor;\n    _events: AppEditorEventService;\n    [prop: string]: any;\n\n    engineClass = EditorEngine;\n    editorClass = Editor;\n    itemDropable: boolean = false;\n    geometryDropable: boolean = false;\n\n    items: any;\n\n    addItemMode: string = 'auto';\n    addItemPosition: Vector3 = {\n        x: 0,\n        y: 0,\n        z: 0\n    };\n\n\n    eventHandlers = {\n        'item.dragmove': e => this.checkItemDragHover(e),\n        'item.dropped': e => this.checkItemDropped(e),\n        'geometry.dragmove': e => this.checkGeometryDragHover(e),\n        'geometry.dropped': e => this.checkGeometryDropped(e),\n        'viewport.droppable.show': e => this.emit(e),\n        'viewport.droppable.hide': e => this.emit(e),\n        'viewport.droppable.loading': e => this.emit(e),\n        'engine.geometry.add': e => this.addMesh(e.data, e.success),\n        'engine.geometry.remove': e => this.deleteMesh(e.secret_key),\n        'engine.geometry.update': e => this.updateMeshSettingDataAndScene(e.secret_key, e.data, true),\n        'mesh.setting.update': e => {\n            this.updateMeshSettingDataAndScene(e.secret_key, e.data, true)\n        },\n        \"show:light.panel\": e => this.showPanelLight(e.secret_key),\n        'app.instance.get': e => {\n            if (typeof e.data == \"function\") {\n                e.data(this);\n            } else if (typeof e.success == \"function\") {\n                e.success(this);\n            }\n            return this;\n        },\n        \"droppable.areas.add\": e => this.addDraggablePosition(e.item, e.position),\n        \"droppable.areas.remove\": e => this.removeDraggablePosition()\n        // ,\n        // \"scene.update-size\" : e => this.editor.updateDropAreaAreas(this.data.scene.size, this.data.scene.floor.props.position.y, this.data.scene.floor.above)\n    };\n\n    set editor(editor: iEditor) {\n        this._editor = editor;\n        this.dispatchEvent({\n            type: \"seteditor\",\n            eventData: editor\n        });\n\n        editor.on(\"additem.position.set\", e => {\n            this.addItemMode = \"custom\";\n            assignValue(this.addItemPosition, e.position);\n        });\n        editor.on(\"additem.position.reset\", e => {\n            this.addItemMode = \"auto\";\n            this.resetAddItemPosition();\n        });\n        editor.on(\"additem.position.lock\", e => {\n            this.addItemMode = \"lock\";\n            this.resetAddItemPosition();\n        });\n\n    }\n    get editor() {\n        return this._editor;\n    }\n\n\n    constructor() {\n        super();\n        this.setDefaultData();\n        this.start();\n    }\n\n\n    get events() {\n        return this._events;\n    }\n    set events(events: AppEditorEventService) {\n        if (events == this._events) return;\n\n        this._events = events;\n        events.app = this;\n        events.on(this.eventHandlers);\n        this.on(\"init\", (e) => {\n            this.events.emit({\n                type: \"app.init\"\n            }, null, true);\n        }, true);\n\n\n\n    }\n\n    start() {\n        var self = this;\n        this.on('engine.set', () => {\n\n            LoaderLib.setEngine(this.engine);\n            const EC = this.editorClass;\n            const editor = new EC(this, this.engine);\n\n            this.editor = editor;\n            this.controls = [];\n\n            function addControlEvent() {\n\n                if (!self.engine.control || !self.editor.control) {\n                    return setTimeout(addControlEvent, 10);\n                }\n\n                self.addControls(self.engine.control);\n                self.addControls(self.editor.control);\n\n            }\n            this.editor.on(\"startup\", () => addControlEvent(), true);\n\n            editor.on('object.attach', event => {\n\n                var obj = self.engine.getObject(event.object);\n                if (obj) {\n                    let type = obj.type == 'mesh' ? 'mesh' : 'object';\n                    self.emit({\n                        type: \"editor.attach:\" + type,\n                        secret_key: obj.secret_key,\n                        mode: event.mode\n                    });\n\n\n                }\n            });\n\n\n            editor.on('object.set-current', event => {\n\n                var obj = self.engine.getObject(event.object);\n                if (obj) {\n                    let type = obj.type == 'mesh' ? 'mesh' : 'object';\n                    self.emit({\n                        type: \"editor.attach:\" + type,\n                        secret_key: obj.secret_key,\n                        mode: event.mode\n                    });\n\n\n                }\n            });\n\n            editor.on('select:mesh', event => {\n                const appDataObject = this.getObject(event.mesh.__parent__key__);\n                const engineDataObject = this.engine.getObject(event.mesh.__parent__key__);\n                if (appDataObject && engineDataObject && appDataObject.data.settings.meshes) {\n                    let mesh = null;\n                    for (let i = 0; i < appDataObject.data.settings.meshes.length; i++) {\n                        const m = appDataObject.data.settings.meshes[i];\n                        if (m.name == event.mesh.name) {\n                            mesh = m;\n                            break;\n                        }\n                    }\n                    if (mesh) {\n                        if (!mesh.__parent__key__) {\n                            Object.defineProperty(mesh, \"__parent__key__\", {\n                                configurable: true,\n                                enumerable: false,\n                                writable: false,\n                                value: event.mesh.__parent__key__\n                            });\n                        }\n                        if (!mesh.__ref__) {\n                            Object.defineProperty(mesh, \"__ref__\", {\n                                configurable: true,\n                                enumerable: false,\n                                writable: false,\n                                value: event.mesh\n                            });\n                        }\n                        Object.defineProperty(mesh, \"__inputs__\", {\n                            configurable: true,\n                            enumerable: false,\n                            writable: false,\n                            value: this.events.app.getMaterialInputs(\n                                mesh.data && mesh.data.material && mesh.data.material.type ? mesh.data.material.type : mesh.__ref__.material.type,\n                                mesh.__ref__.material,\n                                mesh.data && mesh.data.material ? mesh.data.material : null,\n                                mesh.editable ? mesh.editable : []\n\n                            )\n                        });\n\n                        this._events.emit({\n                            type: \"editor.select:mesh\",\n                            mesh: mesh\n                        })\n                    }\n                }\n            });\n\n\n\n            editor.on('delete:object', event => {\n\n                if (event.objectType == \"object\") {\n                    let obj = self.engine.getObject(event.object);\n                    if (obj) {\n                        self.emit({\n                            type: \"editor.delete:object\",\n                            secret_key: obj.secret_key\n                        });\n\n\n                    }\n                }\n                else if (event.objectType == \"light\") {\n                    let obj = self.engine.getLight(event.object);\n                    if (obj) {\n                        self.emit({\n                            type: \"editor.delete:light\",\n                            secret_key: obj.secret_key\n                        });\n\n\n                    }\n                }\n\n            });\n\n\n\n            editor.on('light.attach', event => {\n                var light = self.engine.getLight(event.light);\n                if (light) {\n                    self.emit({\n                        type: \"editor.attach:light\",\n                        secret_key: light.secret_key,\n                        mode: event.mode\n                    });\n                }\n            });\n\n            editor.on('light.set-current', event => {\n                var light = self.engine.getLight(event.light);\n                if (light) {\n                    self.emit({\n                        type: \"editor.attach:light\",\n                        secret_key: light.secret_key,\n                        mode: event.mode\n                    });\n                }\n            });\n\n            editor.on('object.detach', function (e) {\n                self.emit({\n                    type: \"editor.detach.object\",\n\n                });\n                self.emit({\n                    type: \"editor.detach\",\n\n                });\n            });\n            editor.on('object.unset-current', function (e) {\n                self.emit({\n                    type: \"editor.detach.object\",\n\n                });\n                self.emit({\n                    type: \"editor.detach\",\n\n                });\n            });\n            editor.on('light.detach', function (e) {\n                self.emit({\n                    type: \"editor.detach:light\",\n\n                });\n                self.emit({\n                    type: \"editor.detach\",\n\n                });\n            });\n            editor.on('light.unset-current', function (e) {\n                self.emit({\n                    type: \"editor.detach:light\",\n\n                });\n                self.emit({\n                    type: \"editor.detach\",\n\n                });\n            });\n\n            editor.on(\"object.changed\", event => {\n                self.changeObjectDataByEditor(event.data, event.mode);\n                // console.log(event)\n            });\n\n            editor.on(\"light.update.props\", event => {\n                self.changeLightDataByEditor(event.light, event.mode, event.data);\n            });\n\n            editor.on(\"light.update.target\", event => {\n                self.changeLightTargetDataByEditor(event.light, event.mode, event.data);\n            });\n            editor.on(\"control.mode.change\", event => {\n                self.emit(event);\n            });\n\n\n            self.on(\"toolbar.change:mode\", function (event) {\n                editor.executeCommand(event.mode);\n            })\n\n\n        });\n\n\n        this.on(\"toolbar.delete:object\", event => {\n\n            var obj = self.engine.getObject(event.secret_key);\n            if (obj) {\n\n                if (obj.type == \"mesh\") {\n                    this.deleteMesh(obj.secret_key);\n                } else {\n                    this.deleteObject(obj.secret_key);\n                }\n\n\n                if (typeof event.success == \"function\") {\n                    event.success();\n                }\n\n\n            }\n        })\n\n        this.on(\"event.transfer\", e => {\n            // console.log(e.event.type);\n            if (this.editor) {\n                this.editor.emit(e.event);\n            }\n        });\n\n        const updateDropAreaAreas = () => {\n            if (this.editor) {\n                this.editor.updateDropAreaAreas(this.data.scene.size, this.data.scene.floor.props.position.y, this.data.scene.floor.above);\n            }\n        };\n        this.on({\n            \"data.renew\": updateDropAreaAreas,\n            \"data.reset\": updateDropAreaAreas,\n            \"data.imported\": updateDropAreaAreas,\n            \"scene.settings.updated:floor\": updateDropAreaAreas,\n            \"scene.settings.updated:size\": updateDropAreaAreas,\n            \"scene.update-size\": updateDropAreaAreas\n\n        })\n\n\n    }\n\n    addDraggablePosition(item, pos) {\n        this.editor.setDragMoveItem(\n            item.size,\n            pos,\n            item.object\n        );\n\n    }\n    removeDraggablePosition() {\n        this.editor.removeDragMoveItem();\n\n    }\n\n    resetAddItemPosition() {\n        this.addItemPosition = {\n            x: 0,\n            y: 0,\n            z: 0\n        };\n    }\n\n    setAddItemPosition(position: Vector3) {\n        assignValue(this.addItemPosition, position);\n    }\n    // camera\n    getCameraSetting(): CameraSetting {\n        return this.data.camera;\n    }\n\n    syncCameraProps() {\n        let propKeys = {\n            position: ['x', 'y', 'z'],\n            rotation: ['x', 'y', 'z'],\n            quaternion: ['x', 'y', 'z', 'z']\n\n        }\n        for (const key in propKeys) {\n            if (Object.prototype.hasOwnProperty.call(propKeys, key)) {\n                const arrKeys = propKeys[key];\n                if (!isObject(this.data.camera[key])) this.data.camera[key] = {};\n                arrKeys.map(s => this.data.camera[key][s] = this.engine.camera[key][s]);\n            }\n        }\n\n    }\n\n\n\n    updateCameraSetting(setting: CameraSetting, update?: boolean) {\n        assignValue(this.data.camera, setting);\n        if (this.engine.updateMainCameraSettings(setting, update)) this.syncCameraProps();\n    }\n\n    saveCurrentCameraPosition() {\n        let cam = this.engine.camera.position;\n        assignValue(this.data.camera, {\n            settings: {\n                position: {\n                    type: \"custom\",\n                    custom: {\n                        x: cam.x,\n                        y: cam.y,\n                        z: cam.z\n                    }\n                }\n            }\n        });\n        this.syncCameraProps();\n        this.emit({\n            type: \"camera.position.save\",\n            data: this.data.camera.settings.position\n        });\n    }\n    getControlSetting(): ControlSetting {\n        return this.data.control;\n    }\n\n    updateControlSetting(setting: ControlSetting) {\n        assignValue(this.data.control, setting);\n        this.engine.updateControlSettings(setting);\n        let camera = this.engine.camera\n    }\n\n\n\n\n    getShadowSetting() {\n        return this.data.shadow;\n    }\n\n    updateShadowSetting(setting: ShadowSetting) {\n        assignValue(this.data.shadow, setting);\n        this.engine.updateShadowSettings(setting);\n    }\n\n    getBackgroundSetting() {\n        return typeof this.data.scene.background ? this.data.scene.background : { type: \"none\" };\n    }\n\n    updateBackgroundData(data) {\n\n        assignValue(this.data.scene, 'background', data);\n        this.engine.setBackground(data);\n    }\n\n    getFloorSetting() {\n        const setting = assignValue({}, SceneSizeDefaultData);\n        assignValue(setting, this.data.scene.floor);\n        return setting;\n    }\n\n\n    updateSceneFloorSetting(floor) {\n        assignValue(this.data.scene.floor, floor);\n        this.engine.updateSceneFloorSetting(floor);\n        this.emit({\n            type: \"scene.settings.updated:floor\",\n            data: floor\n        })\n    }\n\n\n    getSceneSizeSetting(): SceneSize {\n        const setting = assignValue({}, SceneSizeDefaultData);\n        assignValue(setting, this.data.scene.size);\n        return setting;\n    }\n\n\n    getRealSceneSize() {\n        var sceneData: any = {\n            min: {\n                x: null, y: null, z: null\n            },\n            max: {\n                x: null, y: null, z: null\n            }\n        };\n\n        ['meshes', 'objects'].map(t => {\n            let a = this.data[t];\n            if (a.length) {\n                a.map(o => {\n                    let obj = this.engine.getObject(o.secret_key);\n                    if (obj && (obj.type == 'mesh' || obj.type == 'model')) {\n                        const box = new THREE.Box3().setFromObject(obj.object);\n                        for (const sizeKey in sceneData) {\n                            if (Object.hasOwnProperty.call(sceneData, sizeKey) && Object.hasOwnProperty.call(box, sizeKey)) {\n                                const sizeData = sceneData[sizeKey];\n                                const boxData = box[sizeKey];\n                                for (const posKey in boxData) {\n                                    if (Object.hasOwnProperty.call(boxData, posKey)) {\n                                        if (sizeData[posKey] === null) sizeData[posKey] = boxData[posKey];\n                                        else if (sizeKey == 'min' && boxData[posKey] < sizeData[posKey]) sizeData[posKey] = boxData[posKey];\n                                        else if (sizeKey == 'max' && boxData[posKey] > sizeData[posKey]) sizeData[posKey] = boxData[posKey];\n                                    }\n                                }\n                            }\n                        }\n                    }\n                })\n            }\n        });\n        var x0 = Math.abs(sceneData.min.x), x1 = Math.abs(sceneData.max.x),\n            y0 = Math.abs(sceneData.min.y), y1 = Math.abs(sceneData.max.y),\n            z0 = Math.abs(sceneData.min.z), z1 = Math.abs(sceneData.max.z);\n\n        sceneData.size = {\n            x: (x0 > x1 ? x0 : x1) * 2,\n            y: (y0 > y1 ? y0 : y1) * 2,\n            z: (z0 > z1 ? z0 : z1) * 2\n        };\n        return sceneData;\n    }\n\n    updateSceneSizeSetting(data) {\n        assignValue(this.data.scene.size, data);\n        this.engine.updateSceneSettings(data);\n        this.emit({\n            type: \"scene.settings.updated:size\",\n            data: data\n        })\n    }\n\n\n    updateSceneSizeAndFloorAndGridNyChildren(scale: number = 1) {\n        let sceneData = this.getRealSceneSize();\n        let size = sceneData.size;\n        if (scale <= 0) scale = 1;\n        var s = size.x > size.z ? size.x : size.z;\n        this.updateSceneSizeSetting({\n            width: s * scale,\n            height: size.y * scale,\n            depth: s * scale\n        });\n\n        let floor: FloorSetting = this.getFloorSetting();\n        assignValue(floor, {\n            params: {\n                width: s* scale,\n                height: s* scale\n            },\n            props:{\n                y: sceneData.min.y\n            }\n        });\n        this.updateSceneFloorSetting(floor);\n        this.events.emit(\"scene.update-size\");\n        this.emit(\"scene.update-size\");\n        \n        setTimeout(() => {\n            this.events.emit(\"scene.update-size\");\n        \n            this.emit(\"scene.update-size\");\n        }, 500);\n    }\n\n    getForegrounds(): FG_ITEM[] {\n        if (!isArray(this.data.scene.foregrounds)) this.data.scene.foregrounds = [];\n        return this.data.scene.foregrounds;\n    }\n\n    addForegroundData(data: FG_ITEM): FG_ITEM {\n        if (isObject(data) && data.url) {\n            var a = assignValue({}, data);\n            if (!a.secret_key) a.secret_key = Str.rand(date('ms'));\n            if (!isArray(this.data.scene.foregrounds)) this.data.scene.foregrounds = [];\n            this.data.scene.foregrounds.push(a);\n            this.emit({\n                type: \"scene.foregrounds.added\",\n                data: a\n            });\n\n            return a;\n        }\n        return null;\n    }\n\n    updateForegroundData(secret_key: string, data: FG_ITEM): FG_ITEM {\n        if (isArray(this.data.scene.foregrounds)) {\n            for (let index = 0; index < this.data.scene.foregrounds.length; index++) {\n                const fg = this.data.scene.foregrounds[index];\n                if (fg.secret_key == secret_key) {\n                    assignWithout(fg, data, 'secret_key');\n                    // console.log(fg)\n                    this.emit({\n                        type: \"scene.foregrounds.updated\",\n                        data: fg\n                    });\n\n                    return assignValue({}, fg);\n                }\n            }\n        }\n        return null;\n    }\n\n\n    deleteForeground(secret_key: string): boolean {\n        if (isArray(this.data.scene.foregrounds)) {\n            for (let index = 0; index < this.data.scene.foregrounds.length; index++) {\n                const fg = this.data.scene.foregrounds[index];\n                if (fg.secret_key == secret_key) {\n                    this.data.scene.foregrounds.splice(index, 1);\n                    this.emit({\n                        type: \"scene.foregrounds.deleted\",\n                        data: fg\n                    })\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    getForeground(secret_key: string): FG_ITEM {\n        if (isArray(this.data.scene.foregrounds)) {\n            for (let index = 0; index < this.data.scene.foregrounds.length; index++) {\n                const fg = this.data.scene.foregrounds[index];\n                if (fg.secret_key == secret_key) {\n                    return fg;\n                }\n            }\n        }\n        return null;\n    }\n\n\n\n\n    changeObjectDataByEditor(object: any, mode: any) {\n        if (mode == 'translate') mode = 'position';\n        else if (mode == 'rotate') mode = 'rotation';\n        var o = this.engine.getObject(object);\n        // console.log(o);\n        if (o) {\n            var d = o.object[mode];\n            if (isObject(d)) {\n                if (o.type == 'mesh') {\n                    this.updateMeshDataAndView(o.secret_key, mode, {\n                        x: d.x,\n                        y: d.y,\n                        z: d.z\n                    })\n                }\n                else {\n                    this.updateObjectDataAndView(o.secret_key, mode, {\n                        x: d.x,\n                        y: d.y,\n                        z: d.z\n                    })\n                }\n\n            }\n\n        }\n    }\n\n    /**\n     * cập nhật thuộc tinh1q cho object\n     * @param {string} secret_key chuỗi nhận diện của mỗi onject\n     * @param {string} key tên thuộc tính\n     * @param {*} value \n     */\n    updateMeshDataAndView(secret_key: string, key: string, value: any) {\n\n        var stt = this.updateMeshSettingProp(secret_key, key, value);\n        if (stt) {\n            this.emit({\n                type: \"editor.update.mesh.props\",\n                data: {\n                    propType: \"vector3\",\n                    secret_key: secret_key,\n                    key: key,\n                    value: value\n                }\n            })\n        }\n    }\n\n\n\n\n    /**\n     * cập nhật thuộc tinh1q cho object\n     * @param {string} secret_key chuỗi nhận diện của mỗi onject\n     * @param {string} key tên thuộc tính\n     * @param {*} value \n     */\n    updateObjectDataAndView(secret_key: string, key: string, value: any) {\n        var stt = this.updateObjectSettingProp(secret_key, key, value);\n        if (stt) {\n\n            this.emit({\n                type: \"editor.update.model.props\",\n                data: {\n                    propType: \"vector3\",\n                    secret_key: secret_key,\n                    key: key,\n                    value: value\n                }\n            })\n        }\n    }\n\n\n\n    changeLightDataByEditor(object, mode, data) {\n        if (mode == 'translate') mode = 'position';\n        else if (mode == 'rotate') mode = 'rotation';\n        var o = this.engine.getLight(object);\n        if (o) {\n            var d = o.object[mode];\n            if (isObject(d)) {\n                this.updateLightDataAndView(o.secret_key, mode, {\n                    x: d.x,\n                    y: d.y,\n                    z: d.z\n                })\n            }\n\n        }\n    }\n\n    /**\n     * cập nhật thuộc tinh1q cho object\n     * @param {string} secret_key chuỗi nhận diện của mỗi onject\n     * @param {string} key tên thuộc tính\n     * @param {*} value \n     */\n    updateLightDataAndView(secret_key, key, value) {\n        var stt = this.updateLightSettingProp(secret_key, key, value);\n        if (stt) {\n            this.emit({\n                type: \"editor.update.light.props\",\n                data: {\n                    secret_key,\n                    key,\n                    value\n                }\n            })\n\n        }\n    }\n\n    changeLightTargetDataByEditor(object, mode: string, data: any) {\n        if (mode == 'translate') mode = 'position';\n        else if (mode == 'rotate') mode = 'rotation';\n        var o = this.engine.getLight(object);\n        if (o) {\n            var d = o.object.target[mode];\n            if (isObject(d)) {\n                this.updateLightTargetDataAndView(o.secret_key, mode, {\n                    x: d.x,\n                    y: d.y,\n                    z: d.z\n                })\n            }\n\n        }\n    }\n\n\n    /**\n     * cập nhật thuộc tinh1q cho object\n     * @param {string} secret_key chuỗi nhận diện của mỗi onject\n     * @param {string} key tên thuộc tính\n     * @param {*} value \n     */\n    updateLightTargetDataAndView(secret_key, key, value) {\n        var stt = this.updateLightTargetSettingProp(secret_key, key, value);\n        if (stt) {\n            this.emit({\n                type: \"editor.update.light.props.target\",\n                data: { secret_key, key, value }\n            });\n\n        }\n    }\n\n\n\n    checkItemDragHover(event) {\n        var self = this;\n        this.emit({\n            type: \"viewport.pointer.check\",\n            event: event,\n            showDroppableLayer: true,\n            handle: function (pos) {\n                if (pos.isHover) {\n                    if (!self.itemDropable) {\n                        self.itemDropable = true;\n                        self.events.emit({\n                            type: \"item.draghover\",\n                            dropable: true,\n                            pos: pos\n                        }, false);\n                    }\n                }\n                else {\n                    if (self.itemDropable) {\n                        self.itemDropable = false;\n                        self.events.emit({\n                            type: \"item.dragout\",\n                            dropable: false\n                        }, false)\n                    }\n                }\n            }\n        });\n        if (event.checkArea) {\n            this.editor.checkDroppablePosition(event.position)\n        }\n\n    }\n\n    checkItemDropped(event) {\n        this.itemDropable = false;\n        this.addObjectModelItem(event.item, event.success);\n        this.resetAddItemPosition();\n        this.editor.removeDragMoveItem();\n\n    }\n\n\n\n    checkGeometryDragHover(event) {\n        var self = this;\n        this.emit({\n            type: \"viewport.pointer.check\",\n            event: event,\n            showDroppableLayer: false,\n            handle: function (pos) {\n                if (pos.isHover) {\n                    if (!self.geometryDropable) {\n                        self.geometryDropable = true;\n                        self.events.emit({\n                            type: \"geometry.draghover\",\n                            dropable: true,\n                            pos: pos\n                        }, false);\n                    }\n                }\n                else {\n                    if (self.geometryDropable) {\n                        self.geometryDropable = false;\n                        self.events.emit({\n                            type: \"geometry.dragout\",\n                            dropable: false\n                        }, false)\n                    }\n                }\n            }\n        });\n        if (event.checkArea) {\n            this.editor.checkDroppablePosition(event.position)\n        }\n    }\n\n    checkGeometryDropped(event) {\n        this.geometryDropable = false;\n        // this.addObjectModelItem(event.item, event.success);\n\n    }\n\n\n\n    setTemplate(data: TemplateModel, complete?: (...args: any[]) => any, error?: (...args: any[]) => any, progress?: (...args: any[]) => any) {\n        this.setDefaultData();\n        assignValue(this.data, data);\n        this.setAppData(this.data);\n        this.emit(\"data.renew\");\n\n    }\n\n    setProject(data: ProjectModel, complete?: (...args: any[]) => any, error?: (...args: any[]) => any, progress?: (...args: any[]) => any) {\n        this.setDefaultData();\n        assignValue(this.data, data);\n        this.setAppData(this.data);\n        this.emit(\"data.renew\");\n    }\n\n    importTemplate(data: TemplateModel, complete?: (...args: any[]) => any, error?: (...args: any[]) => any, progress?: (...args: any[]) => any) {\n        let d: any = copyByList(this.data, ['id', 'name', 'category_id', 'description', 'status', 'allow_custom']);\n        this.setDefaultData();\n        assignValue(this.data, data);\n        assignValue(this.data, d);\n        this.setAppData(this.data);\n        this.emit(\"data.imported\");\n    }\n\n\n    updateInfo(data) {\n        assignValue(this.data, data);\n    }\n\n\n    getObject(secret_key: string) {\n\n        if (this.data.objects) {\n            for (let i = 0; i < this.data.objects.length; i++) {\n                const obj = this.data.objects[i];\n                if (secret_key == obj.secret_key || obj == secret_key || obj.object == secret_key) return obj;\n            }\n        }\n        return null;\n    }\n\n    getMesh(secret_key: string) {\n\n        if (this.data.meshes) {\n            for (let i = 0; i < this.data.meshes.length; i++) {\n                const obj = this.data.meshes[i];\n                if (secret_key == obj.secret_key || obj == secret_key || obj.object == secret_key) return obj;\n            }\n        }\n        return null;\n    }\n\n    getLight(secret_key: string) {\n\n        if (this.data.lights) {\n            for (let i = 0; i < this.data.lights.length; i++) {\n                const obj = this.data.lights[i];\n                if (secret_key == obj.secret_key || obj == secret_key || obj.object == secret_key) return obj;\n            }\n        }\n        return null;\n    }\n\n    getLightList() {\n        var lights: any[] = []\n        this.data.lights.map(li => {\n            let lightObj = this.engine.getLight(li.secret_key);\n            var l: any = {\n                secret_key: li.secret_key,\n                data: li.data,\n                name: lightObj.type,\n                type: lightObj.type,\n                ref: lightObj.object\n            };\n            lights.push(l);\n        })\n        return lights;\n    }\n\n    showPanelLight(secret_key: string) {\n        var light = this.getLight(secret_key);\n        if (!light) return false;\n        let lightObj = this.engine.getLight(secret_key);\n        if (!lightObj) return false;\n\n        var l: any = {\n            secret_key: light.secret_key,\n            type: lightObj.type,\n            name: lightObj.type,\n            data: light.data,\n            ref: lightObj.object\n        };\n        this.emit({\n            type: \"light.showform\",\n            data: l\n        });\n    }\n\n    getEditObjectData(secret_key: string): any {\n        var obj = this.engine.getObject(secret_key);\n        if (obj) {\n            if (obj.type == \"mesh\") {\n                var setting = this.getMesh(secret_key);\n                return {\n                    type: \"mesh\",\n                    secret_key: obj.secret_key,\n                    mesh: obj.object,\n                    data: setting.data\n                }\n            }\n            else if (obj.type == \"model\") {\n                var model = this.getObject(obj.secret_key);\n                return {\n                    type: \"model\",\n                    secret_key: obj.secret_key,\n                    data: this.getModelSettingData(model.data, obj)\n                };\n            }\n        }\n        var light = this.getLight(secret_key);\n        if (!light) return false;\n        let lightObj = this.engine.getLight(secret_key);\n        if (!lightObj) return false;\n\n        var l: any = {\n\n            type: \"light\",\n            data: {\n                secret_key: light.secret_key,\n                type: lightObj.type,\n                name: lightObj.type,\n                data: light.data,\n                ref: lightObj.object\n            }\n        };\n        return l;\n    }\n\n    /**\n     * Thêm object model\n     * @param {object} data dữ liệu của item\n     * @param {function(Object)} onSuccess hàm sử lý khi add dữ liệu thành công\n     * @param {function(Error)} onError Hàm sử lý khi có lỗi\n     * @param {function(Number)} onProgress hàm sử lý tiến trình\n     * @returns {string}\n     */\n    addObjectModelItem(data, onSuccess?, onError?, onProgress?) {\n        var obj = {\n            type: \"model\",\n            secret_key: \"a_\" + Str.rand(),\n            data: data\n        }\n        var self = this;\n        // var rollnack = true;\n        self.data.objects.push(obj);\n        // return null;\n        try {\n            // self.dom.showLoading();\n            // lấy dử liệu sau khi dc load\n            this.engine.addItemToTemplateSettingWorkspace(obj.secret_key, data, (object) => {\n                if (obj.secret_key != object.secret_key) {\n                    obj.secret_key = object.secret_key\n                }\n\n                // rollnack = false;\n                // obj.object = object.object;\n\n                if (typeof onSuccess == \"function\") {\n                    onSuccess(obj);\n                }\n            }, (e) => {\n                if (typeof onError == \"function\") {\n                    var index = self.data.objects.indexOf(obj);\n                    if (index !== -1) {\n                        self.data.objects.splice(index, 1);\n                    }\n                    onError(e);\n                }\n            }, (p) => {\n                if (typeof onProgress == \"function\") {\n                    onProgress(p);\n                }\n            });\n\n        } catch (error) {\n            var index = self.data.objects.indexOf(obj);\n            if (index !== -1) {\n                self.data.objects.splice(index, 1);\n            }\n            if (typeof onError == \"function\") {\n                onError(error);\n            }\n        }\n\n        return obj;\n    }\n\n\n\n    /**\n     * Thêm light Template\n     * @param {string} type dữ liệu của item\n     * @param {function(Object)} onSuccess hàm sử lý khi add dữ liệu thành công\n     * @param {function(Error)} onError Hàm sử lý khi có lỗi\n     * @returns {string}\n     */\n    addLightByTemplate(type, onSuccess?: (object: any) => any, onError?: (error: any) => any) {\n        var obj = {\n            secret_key: Str.rand(date(\"ms\"))\n        }\n        var lightTemp = this.engine.getLightTemplateData(type);\n        if (lightTemp) {\n            assignValue(obj, lightTemp);\n            var light = this.engine.addLight(obj);\n            if (light) {\n                if (light.secret_key != obj.secret_key) {\n                    obj.secret_key = light.secret_key;\n                }\n                this.data.lights.push(obj);\n                if (typeof onSuccess == \"function\") {\n                    onSuccess(obj);\n                }\n                // addli--\n                this.emit({\n                    type: \"light.added\",\n                    light: this.getLight(obj.secret_key),\n                    ref: this.engine.getLight(obj.secret_key).object\n                });\n                return obj;\n\n            }\n        }\n        if (typeof onError == \"function\") {\n            onError(new Error(\"Lỗi không xác định\"));\n        }\n        return false;\n\n    }\n\n    /**\n     * Thêm light Template\n     * @param {any} meshData dữ liệu của item\n     * @param {function(Object)} onSuccess hàm sử lý khi add dữ liệu thành công\n     * @param {function(Error)} onError Hàm sử lý khi có lỗi\n     * @returns {string}\n     */\n    addMesh(meshData: any, onSuccess?: (object: any) => any) {\n        var obj = {\n            secret_key: Str.rand(date(\"ms\")),\n            data: assignValue({}, meshData)\n        };\n        this.data.meshes.push(obj);\n        var secret_key = this.engine.addMesh(obj);\n\n        if (secret_key) {\n            if (secret_key != obj.secret_key) obj.secret_key = secret_key;\n            // this.data.meshes.push(obj);\n            if (typeof onSuccess == \"function\") {\n                onSuccess(obj);\n            }\n            return obj;\n        }\n        var index = this.data.meshes.indexOf(obj);\n        if (index !== -1) {\n            this.data.meshes.splice(index, 1);\n        }\n\n        return null;\n    }\n\n    getMeshEngineData(secret_key: string) {\n        return this.engine.getMesh(secret_key);\n    }\n\n    attachLightInEditor(secret_key) {\n        var lightData = this.engine.getLight(secret_key);\n        if (lightData) {\n            this.editor.attachLight(lightData.object);\n        }\n    }\n\n\n    updateObjectSettingDataAndScene(secret_key, settings, refresh) {\n        // assignValue(this.data.item, data);\n        // console.log(data);\n        if (this.data.objects && this.data.objects.length) {\n            for (let index = 0; index < this.data.objects.length; index++) {\n                const object = this.data.objects[index];\n                // console.log(object);\n                if (object.secret_key == secret_key) {\n\n                    if (!object.data.settings) object.data.settings = settings;\n                    else assignValue(object.data.settings, settings);\n                }\n            }\n        }\n        var updateData: any = {};\n        if (isObject(refresh)) {\n            if (refresh.props) {\n                updateData.props = settings.props;\n            }\n            if (refresh.meshes) {\n                updateData.meshes = settings.meshes;\n            }\n\n        } else if (isBoolean(refresh) && refresh) {\n            updateData = settings;\n        }\n        if (refresh) this.engine.updateObjectSettings(secret_key, updateData);\n    }\n\n    updateMeshSettingDataAndScene(secret_key, data, refresh) {\n        var meshData = null;\n\n        if (this.data.meshes && this.data.meshes.length) {\n            for (let index = 0; index < this.data.meshes.length; index++) {\n                const mesh = this.data.meshes[index];\n                // console.log(object);\n                if (mesh.secret_key == secret_key) {\n\n                    if (!mesh.data) mesh.data = data;\n                    else assignValue(mesh.data, data);\n\n                    meshData = assignValue({}, mesh.data);\n                }\n            }\n        }\n        var updateData: any = {};\n        if (isObject(refresh)) {\n            if (refresh.props) {\n                updateData.props = meshData.props;\n            }\n            if (refresh.geometry) {\n                updateData.geometry = meshData.geometry;\n            }\n            if (refresh.material) {\n                updateData.material = meshData.material;\n            }\n        }\n        else if (isString(refresh)) {\n            if (Object.hasOwnProperty.call(meshData, refresh)) {\n                updateData[refresh] = meshData[refresh];\n            }\n        }\n        else if (isBoolean(refresh) && refresh) {\n            updateData = meshData;\n        }\n\n        if (refresh) {\n            this.engine.updateMeshesSettings(secret_key, updateData);\n        }\n    }\n\n    updateModelMeshMaterial(secret_key: string, meshIndex: any, material?: { [x: string]: any }) {\n        let settings: any = null\n        if (this.data.objects && this.data.objects.length) {\n            for (let index = 0; index < this.data.objects.length; index++) {\n                const object = this.data.objects[index];\n                if (object.secret_key == secret_key) {\n                    settings = object.data.settings;\n                }\n            }\n        }\n        if (!settings) return false;\n\n        if (isNumber(meshIndex)) {\n            for (let index = 0; index < settings.meshes.length; index++) {\n                const mesh = settings.meshes[index];\n                if (index == meshIndex) {\n                    assignValue(mesh.data.material, material);\n                    this.engine.updateMeshMaterial(secret_key, mesh.name, material.type ? mesh.data.material : material);\n                }\n            }\n        }\n        else if (isString(meshIndex)) {\n            for (let index = 0; index < settings.meshes.length; index++) {\n                const mesh = settings.meshes[index];\n                if (mesh.name == meshIndex) {\n                    assignValue(mesh.data.material, material);\n                    this.engine.updateMeshMaterial(secret_key, mesh.name, material.type ? mesh.data.material : material);\n                }\n            }\n        }\n\n    }\n\n    /**\n     * cập nhật ánh sáng\n     * @param {string} secret_key key truy cap\n     * @param {object} data dữ liệu thuộc tính\n     */\n    updateLightDataAndScene(secret_key, data) {\n        var updateData = {};\n        var s = false;\n        if (this.data.lights && this.data.lights.length) {\n            for (let index = 0; index < this.data.lights.length; index++) {\n                const object = this.data.lights[index];\n                if (object.secret_key == secret_key) {\n                    if (!object.data) object.data = data;\n                    else assignValue(object.data, data);\n                    s = true;\n                }\n            }\n        }\n        if (!s) return false;\n        if (data.params) {\n            assignValue(updateData, data.params);\n        }\n        if (data.props) {\n            assignValue(updateData, data.props);\n        }\n        assignWithout(updateData, data, [\"props\", \"params\"]);\n        return this.engine.updateLightProps(secret_key, updateData);\n\n    }\n\n    updateObjectSettingProp(secret_key, key, value) {\n        var object = this.getObject(secret_key);\n        if (object) {\n            if (!object.data.settings) object.data.settings = {};\n            if (!object.data.settings.props) object.data.settings.props = {};\n            assignValue(object.data.settings.props, key, value);\n            return true;\n        }\n        return false;\n    }\n\n    updateMeshSettingProp(secret_key, key, value) {\n        var object = this.getMesh(secret_key);\n\n        if (object) {\n            if (!object.data) object.data = {};\n            if (!object.data.props) object.data.props = {};\n            assignValue(object.data.props, key, value);\n            return true;\n        }\n        // console.log(this.data.meshes);\n        return false;\n    }\n\n    updateLightSettingProp(secret_key, key, value) {\n        var object = this.getLight(secret_key);\n        if (object) {\n            if (!object.data.props) object.data.props = {};\n            assignValue(object.data.props, key, value);\n            return true;\n        }\n        return false;\n    }\n\n    updateLightTargetSettingProp(secret_key, key, value) {\n        var object = this.getLight(secret_key);\n        if (object) {\n\n            if (!object.data.props) object.data.props = {};\n            if (!object.data.props.target) object.data.props.target = {};\n            assignValue(object.data.props.target, key, value);\n            return true;\n        }\n        return false;\n    }\n\n\n    updateObjects(objects) {\n        this.data.objects = objects;\n    }\n\n    deleteObject(secret_key) {\n        if (this.data.objects && this.data.objects.length) {\n            for (let index = 0; index < this.data.objects.length; index++) {\n                const object = this.data.objects[index];\n                if (object == secret_key || object.secret_key == secret_key || object.object == secret_key) {\n                    this.data.objects.splice(index, 1);\n                    if (!this.engine.removeObject(secret_key)) return false;\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    deleteMesh(secret_key) {\n        if (this.data.meshes && this.data.meshes.length) {\n            for (let index = 0; index < this.data.meshes.length; index++) {\n                const object = this.data.meshes[index];\n                if (object == secret_key || object.secret_key == secret_key || object.object == secret_key) {\n                    this.data.meshes.splice(index, 1);\n                    if (!this.engine.removeObject(secret_key)) return false;\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    deleteLight(secret_key: any, onSuccess?: (light?: any) => any) {\n        if (this.data.lights && this.data.lights.length) {\n            for (let index = 0; index < this.data.lights.length; index++) {\n                const object = this.data.lights[index];\n                if (object == secret_key || object.secret_key == secret_key || object.object == secret_key) {\n                    this.editor.emit({\n                        type: \"light.deleting\",\n                        light: this.engine.getLight(secret_key)\n                    });\n                    if (!this.engine.removeLight(secret_key)) return false;\n                    this.data.lights.splice(index, 1);\n                    if (typeof onSuccess == \"function\") {\n                        onSuccess(object);\n                    }\n                    this.emit({\n                        type: \"light.deleted\",\n                        light: object\n                    });\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n\n    saveView() {\n        var camera = this.engine.camera;\n        var camPos = camera.position;\n        var camRot = camera.rotation;\n        assignValue(this.data.camera, {\n            position: {\n                x: camPos.x,\n                y: camPos.y,\n                z: camPos.z,\n            },\n            rotation: {\n                x: camRot.x,\n                y: camRot.y,\n                z: camRot.z,\n            }\n        });\n        this.saveData();\n    }\n\n    saveData() {\n        if (LS.__support()) {\n            var key = this.storageKey;\n            if (key) {\n                LS.set(key, this.data);\n                var answer = null;\n                alert(\"Đã cập nhật thành công\");\n                // e.preventDefault();\n\n                return true;\n            }\n        }\n        return false;\n    }\n\n\n    setDefaultData() {\n        this.data = assignValue({}, AppDefaultData)\n    }\n\n    parseData() {\n        if (this.data.objects && this.data.objects.length) {\n            for (let i = 0; i < this.data.objects.length; i++) {\n                const obj = this.data.objects[i];\n                if (!obj.secret_key) {\n                    obj.secret_key = Str.rand(date(\"ms\"));\n                }\n            }\n        }\n        if (this.data.lights && this.data.lights.length) {\n            for (let i = 0; i < this.data.lights.length; i++) {\n                const light = this.data.lights[i];\n                if (!light.secret_key) {\n                    light.secret_key = Str.rand(date(\"ms\"));\n                }\n            }\n        }\n\n        if (this.data.scene.foregrounds && this.data.scene.foregrounds.length) {\n            for (let i = 0; i < this.data.scene.foregrounds.length; i++) {\n                const light = this.data.scene.foregrounds[i];\n                if (!light.secret_key) {\n                    light.secret_key = Str.rand(date(\"ms\"));\n                }\n            }\n        }\n\n    }\n\n}\n","import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\r\nimport { NzUploadXHRArgs, NzUploadFile } from 'ng-zorro-antd/upload';\r\nimport { RestService } from '@app/_core/services/rest.service';\r\nimport { Observer, Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-upload',\r\n  templateUrl: './upload.component.html',\r\n  styleUrls: ['./upload.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class UploadFileComponent {\r\n  @Input()\r\n  fileList: Array<any>;\r\n  @Output()\r\n  fileListChange = new EventEmitter<Array<any>>();\r\n  @Input()\r\n  size: { width: number; height: number };\r\n  @Input()\r\n  quantity = 1;\r\n  @Input()\r\n  fileTypes = ['image/png', 'image/jpeg'];\r\n\r\n  @Input()\r\n  sizeFile = 10;\r\n\r\n  @Input()\r\n  path: string;\r\n\r\n  error: string;\r\n\r\n  previewImage: string;\r\n  previewVisible = false;\r\n\r\n  showUploadList = {\r\n    showPreviewIcon: true,\r\n    showRemoveIcon: true,\r\n    hidePreviewIconInNonImage: true,\r\n  };\r\n\r\n  constructor(private restService: RestService) {}\r\n\r\n  handlePreview = (file: NzUploadFile) => {\r\n    this.previewImage = file.url || file.thumbUrl;\r\n    this.previewVisible = true;\r\n    // tslint:disable-next-line: semicolon\r\n  };\r\n\r\n  customReq = (item: NzUploadXHRArgs) => {\r\n    const formData = new FormData();\r\n    formData.append('image', item.file as any);\r\n    return this.restService.upload(this.path, formData).subscribe(\r\n      (res) => {\r\n        item.onSuccess(res, item.file, null);\r\n        this.emitFileListValue();\r\n      },\r\n      (err) => {\r\n        item.onError(err, item.file);\r\n        this.showError(err.message);\r\n      }\r\n    );\r\n    // tslint:disable-next-line: semicolon\r\n  };\r\n\r\n  showError(messsage) {\r\n    this.error = messsage;\r\n\r\n    setTimeout(() => {\r\n      this.error = '';\r\n    }, 5000);\r\n  }\r\n\r\n  beforeUpload = (file: File) => {\r\n    return new Observable((observer: Observer<boolean>) => {\r\n      const typeOk = this.fileTypes.includes(file.type);\r\n\r\n      if (!typeOk) {\r\n        this.showError(`File tải lên phải thuộc các dạng file sau ${this.fileTypes.join(', ').replace(/image\\//gi, '')}`);\r\n        observer.complete();\r\n        return;\r\n      }\r\n      const fileSize = file.size / 1024 / 1024 < this.sizeFile;\r\n\r\n      if (!fileSize) {\r\n        this.showError(`File tải lên phải nhỏ hơn ${this.sizeFile}Mb`);\r\n        observer.complete();\r\n        return;\r\n      }\r\n      observer.next(true);\r\n      observer.complete();\r\n    });\r\n    // tslint:disable-next-line: semicolon\r\n  };\r\n\r\n  emitFileListValue() {\r\n    this.fileListChange.emit(this.fileList);\r\n  }\r\n\r\n  handleRemove = (item) => {\r\n    this.fileList = this.fileList.filter((f) => {\r\n      return f.status !== 'removed';\r\n    });\r\n    this.emitFileListValue();\r\n    // tslint:disable-next-line: semicolon\r\n  };\r\n}\r\n","<div class=\"clearfix\">\r\n  <nz-upload\r\n    class=\"hellooo\"\r\n    nzListType=\"picture-card\"\r\n    [(nzFileList)]=\"fileList\"\r\n    [nzShowButton]=\"fileList.length < quantity\"\r\n    [nzShowUploadList]=\"showUploadList\"\r\n    [nzPreview]=\"handlePreview\"\r\n    [nzCustomRequest]=\"customReq\"\r\n    [nzRemove]=\"handleRemove\"\r\n    [nzBeforeUpload]=\"beforeUpload\"\r\n  >\r\n    <i nz-icon nzType=\"plus\"></i>\r\n    <div class=\"ant-upload-text\">Upload</div>\r\n  </nz-upload>\r\n\r\n  <div class=\"has-error\">{{ error }}</div>\r\n\r\n  <nz-modal [nzVisible]=\"previewVisible\" [nzContent]=\"modalContent\" [nzFooter]=\"null\" (nzOnCancel)=\"previewVisible = false\">\r\n    <ng-template #modalContent>\r\n      <img [src]=\"previewImage\" [ngStyle]=\"{ width: '100%' }\" />\r\n    </ng-template>\r\n  </nz-modal>\r\n</div>\r\n","import { ChangeDetectorRef, Component, OnChanges, OnInit } from '@angular/core';\nimport { Geometries, Materials } from '@app/_3D/libs/three.libs';\nimport { Object3DPropDataModel, Object3DPropDefaultData } from '@app/_3D/store/data.type';\nimport { assignValue, isEmpty, isObject } from '@app/_core/helpers/utils';\nimport { InpEvent } from '@app/_shared/shared.type';\nimport { BaseComponent } from '../../base/base.component';\nimport { MeshGeometryService } from './mesh-geometry.service';\n\ninterface MeshData {\n    geometry: {\n        type: string\n        [key: string]: any\n    },\n    material: {\n        type: string\n        [key: string]: any\n    },\n    props: {\n        [key: string]: any\n    }\n}\n\ntype onUpdateFromInputs = (data: { [key: string]: any }) => any;\n\nenum TabIndex {\n    Material = 0,\n    Geometry = 1,\n    Properties = 2,\n}\n\n@Component({\n    selector: 'panel-mesh-geometry',\n    templateUrl: './mesh-geometry.component.html',\n    styleUrls: ['./mesh-geometry.component.scss']\n})\nexport class MeshGeometryComponent extends BaseComponent implements OnInit {\n\n    title: string = 'Title';\n    hasTitle: boolean = false;\n    isShow: boolean = false;\n\n    btnDoneText: string = 'Done';\n    materialConfig: any = Materials.config;\n    geometryConfig: any = {};\n    geoInputs: Array<{\n        name: string,\n        type: string,\n        value: any,\n        spin: boolean,\n        step: number,\n        min: number,\n        max: number\n    }> = [];\n\n    secretKey: string = '';\n\n    mesh: any = null;\n    data: MeshData = {\n        geometry: {\n            type: \"box\"\n        },\n        material: {\n            type: \"basic\"\n        },\n        props: {}\n    }\n    props: Object3DPropDataModel = assignValue({}, Object3DPropDefaultData);\n    onUpdateHandle: onUpdateFromInputs = null;\n    onDoneHandle: onUpdateFromInputs = null;\n    _service: MeshGeometryService = null;\n\n    prevTab: number = TabIndex.Material;\n    currentTab: number = TabIndex.Material;\n\n    constructor(private cd: ChangeDetectorRef, private service: MeshGeometryService) {\n        super();\n        this._service = service;\n        this.service.on(\"panel.show\", e => this.show(e.data));\n        this.service.on(\"panel.hide\", e => this.hide());\n        this.service.on(\"editor.update.props\", e => {\n            if(isObject(e.data) && e.data.secret_key == this.secretKey){\n                assignValue(this.data.props, e.data.key, e.data.value);\n                assignValue(this.props, e.data.key, e.data.value);\n                if(e.data.key == \"rotation\"){\n                    setTimeout(() => {\n                        this.service.emit({\n                            type: \"props.rotation.change\"\n                        })\n                    }, 1);\n                }\n            }\n        });\n        this.service.on(\"component.checkchange\", () => this.cd.detectChanges());\n    }\n    onInit(): void {\n        this.cd.detectChanges();\n\n    }\n\n    onChangeTab(e) {\n        this.currentTab = e.index;\n        this.cd.detectChanges();\n    }\n\n    reset() {\n        this.mesh = null;\n        this.data = {\n            geometry: {\n                type: \"box\"\n            },\n            material: {\n                type: \"basic\"\n            },\n            props: {}\n        }\n        this.props = assignValue({}, Object3DPropDefaultData);\n        this.btnDoneText = 'Done';\n    }\n\n\n\n    show(data: any) {\n        if(!this.isFocus) return;\n        if (isObject(data)) {\n\n            if(this.isShow){\n                if(data.secret_key == this.secretKey) return false;\n                this.hide();\n                setTimeout(() => this.display(data), 10);\n            }\n            else{\n                this.currentTab = TabIndex.Geometry;\n                this.display(data);\n            }\n        }\n\n    }\n    hide() {\n        \n        if(!this.isFocus) return;\n        this.isShow = false;\n        this.reset();\n    }\n\n    display(data:any){\n        if(!this.isFocus) return;\n        if (data.title) {\n            this.title = data.title;\n            this.hasTitle = true;\n        }\n        if(data.btnDone || data.btnDoneText){\n            this.btnDoneText = data.btnDone || data.btnDoneText;\n        }\n        if (isObject(data.mesh) && data.secret_key) {\n            this.setMesh(data);\n\n            this.isShow = true;\n        }\n    }\n\n    setMesh(data: any) {\n        if(!this.isFocus) return;\n        this.onUpdateHandle = null;\n        if (typeof data.onUpdate == \"function\") {\n            this.onUpdateHandle = data.onUpdate;\n        }\n        if (typeof data.onChange == \"function\") {\n            this.onUpdateHandle = data.onChange;\n        }\n        if (typeof data.change == \"function\") {\n            this.onUpdateHandle = data.change;\n        }\n        if (typeof data.done == \"function\") {\n            this.onDoneHandle = data.done;\n        } else if(typeof data.onDone == \"function\"){\n            this.onDoneHandle = data.onDone;\n        }\n\n        \n        let d = data.data;\n        let mesh = data.mesh;\n        this.secretKey = data.secret_key;\n        this.data = {\n            geometry: {\n                type: \"box\"\n            },\n            material: {\n                type: \"physical\"\n            },\n            props: {}\n        };\n        this.geoInputs = [];\n        this.mesh = mesh;\n\n        \n        assignValue(this.data, d);\n\n        if(!this.data.props.name){\n            if(this.mesh.name){\n                this.data.props.name = this.mesh.name;\n            }\n        }\n        if(this.data.props.name && !this.hasTitle){\n            this.title = this.data.props.name;\n        }\n\n        var cfg = Geometries.getConfig(this.data.geometry.type);\n        if (!isEmpty(cfg)) {\n            this.geometryConfig = cfg;\n            for (const key in cfg.params) {\n                if (Object.prototype.hasOwnProperty.call(cfg.params, key)) {\n                    const inpType = cfg.params[key].toLowerCase();\n                    let iType = 'number';\n                    let step = 1;\n                    let spin = false;\n                    let value = Object.prototype.hasOwnProperty.call(this.data.geometry, key) ? this.data.geometry[key] : cfg.data.params[key];\n                    switch (inpType) {\n                        case \"integer\":\n                            // do somthing\n                            break;\n\n                        case \"float\":\n                            step = 0.001;\n                            spin = true;\n                            break;\n\n                        default:\n                            break;\n                    }\n                    this.geoInputs.push({\n                        name: key,\n                        type: iType,\n                        value: value,\n                        spin: spin,\n                        min: -9999999,\n                        max: 9999999,\n                        step: step\n                    })\n                }\n            }\n            this.initProps();\n        }\n    }\n\n    initProps() {\n        \n        if(!this.isFocus) return;\n        for (const key in Object3DPropDefaultData) {\n            if (Object.prototype.hasOwnProperty.call(Object3DPropDefaultData, key)) {\n                const value = Object3DPropDefaultData[key];\n                assignValue(this.props, key, value);\n                if (isObject(value)) {\n                    if (Object.prototype.hasOwnProperty.call(this.mesh, key) && isObject(this.mesh[key])) {\n                        for (const k in value) {\n                            if (Object.prototype.hasOwnProperty.call(value, k)) {\n                                if (typeof this.mesh[key][k] != \"undefined\") {\n                                    this.props[key][k] = this.mesh[key][k];\n                                }\n                            }\n                        }\n                    }\n                    if (Object.prototype.hasOwnProperty.call(this.data.props, key)) {\n                        for (const k in value) {\n                            if (Object.prototype.hasOwnProperty.call(value, k)) {\n                                if (Object.prototype.hasOwnProperty.call(this.data.props[key], k)) {\n                                    this.props[key][k] = this.data.props[key][k];\n                                }\n\n                            }\n                        }\n                    }\n                } else {\n                    if (Object.prototype.hasOwnProperty.call(this.mesh, key)) {\n                        this.props[key] = this.mesh[key];\n                    }\n                    if (Object.prototype.hasOwnProperty.call(this.data.props, key)) {\n                        this.props[key] = this.data.props[key];\n                    }\n                }\n\n\n            }\n        }\n        console.log(this.props)\n    }\n\n    onNameChange(event){\n        this.data.props.name = event.valur;\n        if(!this.hasTitle){\n            this.title = this.data.props.name;\n        }\n\n    }\n    updateProps(event: InpEvent) {\n\n        this.data.props[event.name] = event.value;\n        \n        if(event.name == \"name\"){\n            if(!this.hasTitle){\n                this.title = event.value;\n            }\n        }\n\n        if(typeof this.onUpdateHandle == \"function\"){\n            this.onUpdateHandle({\n                key: \"props\",\n                data: this.data\n            });\n        }\n        this.service.emit({\n            type: \"data.change\",\n            key: \"props\",\n            data: this.data\n        });\n\n    }\n\n    onGeometryParamChange(event: InpEvent) {\n        this.data.geometry[event.name] = event.value;\n        if(typeof this.onUpdateHandle == \"function\"){\n            this.onUpdateHandle({\n                key: \"geometry\",\n                data: this.data\n            });\n        }\n        this.service.emit({\n            type: \"data.change\",\n            key: \"geometry\",\n            data: this.data\n        });\n\n    }\n\n    onMaterialChange(event){\n        this.data.material[event.name] = event.value;\n        \n        if(typeof this.onUpdateHandle == \"function\"){\n            this.onUpdateHandle({\n                key: \"material\",\n                data: this.data,\n                updateKey: event.name\n            });\n        }\n        this.service.emit({\n            type: \"data.change\",\n            key: \"material\",\n            data: this.data,\n            updateKey: event.name\n        });\n    }\n\n    onDone(){\n        this.hide();\n\n        return typeof this.onDoneHandle == \"function\" ? this.onDoneHandle(this.data): 0;\n    }\n}\n","<div class=\"panel inner-layout\" *ngIf=\"isShow\">\n    <div class=\"panel-body\">\n\n        <nz-tabset [nzSelectedIndex]=\"currentTab\" nzTabPosition=\"top\" nzType=\"line\" class=\"main-tab w100\" (nzSelectChange)=\"onChangeTab($event)\">\n            <nz-tab [nzTitle]=\"iconMaterial\">\n                <ng-template #iconMaterial>\n                    Material\n                </ng-template>\n                <mesh-geometry-tab-material [material]=\"mesh.material\" [(settings)]=\"data.material\" (subcribe)=\"onMaterialChange($event)\"></mesh-geometry-tab-material>\n            </nz-tab>\n\n            <nz-tab [nzTitle]=\"iconGeometry\">\n                <ng-template #iconGeometry>\n                    Geometry\n                </ng-template>\n                <ng-template nz-tab>\n                    <mesh-geometry-tab-geometry [inputs]=\"geoInputs\" (subcribe)=\"onGeometryParamChange($event)\"></mesh-geometry-tab-geometry>\n                </ng-template>\n            </nz-tab>\n\n\n            <nz-tab [nzTitle]=\"iconProperties\">\n                <ng-template #iconProperties>\n                    Properties\n                </ng-template>\n                <ng-template nz-tab>\n\n                    <mesh-geometry-tab-properties [(props)]=\"props\" (subcribe)=\"updateProps($event)\" [events]=\"_service\"></mesh-geometry-tab-properties>\n                </ng-template>\n            </nz-tab>\n\n\n        </nz-tabset>\n    </div>\n\n\n\n    <div class=\"panel-footer\">\n        <h3>{{\"Actions\" | translate}}</h3>\n        <div class=\"buttons\">\n            <button nz-button nzType=\"primary\" (click)=\"onDone()\">{{btnDoneText}}</button>\n\n\n        </div>\n    </div>\n\n</div>","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorStorageService } from '@app/_3D/services/app-editor-storage.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nenum TabIndex {\n    Scene = 0,\n    Light = 1\n}\n@Component({\n    selector: 'app-viewer-sidebar',\n    templateUrl: './viewer-sidebar.component.html',\n    styleUrls: ['./viewer-sidebar.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ViewerSidebarComponent extends BaseComponent implements OnInit {\n    prevTab: number = 0;\n    currentTab: number = 0;\n    loadedTemplate = false;\n    loadedObject = false;\n    mode: string = 'create';\n    app: AppEditorService = null;\n    constructor(private cd: ChangeDetectorRef, private events: AppEditorEventService) {\n        super();\n    }\n    initFirst(){\n        this.app = this.events.app;\n    }\n    onInit() {\n        if(this.isChangeSubEvents){\n            this.app = this.subEvents.app;\n        }\n        if(this.app.editor){\n            this.app.editor.hideLightHelpers();\n        }\n        \n        this.cd.detectChanges();\n    }\n    onChangeTab(e) {\n        if (this.app && this.app.editor) {\n\n            if (e.index == TabIndex.Light) {\n                this.app.editor.showLightHelpers();\n            } else {\n                this.app.editor.hideLightHelpers();\n                this.app.editor.detachLight();\n            }\n        }\n        this.currentTab = e.index;\n\n        this.cd.detectChanges();\n    }\n\n    onClickSearch(event) {\n        console.log(event);\n    }\n}\n","<nz-tabset [nzSelectedIndex]=\"currentTab\" nzTabPosition=\"top\" nzType=\"line\" class=\"main-tab\" (nzSelectChange)=\"onChangeTab($event)\">\n\n    <nz-tab [nzTitle]=\"iconScene\" [nzForceRender]=\"loadedTemplate\">\n        <ng-template #iconScene>\n            <img src=\"/assets/icons/new-design/tab-top/scene.svg\" alt=\"Scene\" />\n        </ng-template>\n        <app-tab-viewer-scene></app-tab-viewer-scene>\n    </nz-tab>\n\n    <nz-tab [nzTitle]=\"iconLight\">\n        <ng-template #iconLight>\n            <img src=\"/assets/icons/new-design/tab-top/light.svg\" alt=\"Lighr\" />\n        </ng-template>\n        <ng-template nz-tab>\n            <app-tab-light></app-tab-light>\n        </ng-template>\n    </nz-tab>\n\n\n\n</nz-tabset>","export * from './auth.actions';\r\nexport * from './auth.effects';\r\nexport * from './auth.reducer';\r\nexport * from './auth.selectors';\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-layout-auth',\r\n  templateUrl: './layout.component.html',\r\n  styleUrls: ['./layout.component.scss'],\r\n})\r\nexport class LayoutAuthComponent {}\r\n","<router-outlet></router-outlet>\r\n","import { date, getArguments, isBoolean, isFunction, isObject, isString, Str } from '@app/_core/helpers/utils';\nconst DEFAULT_VALUE = Str.rand(Str.rand(date('ms')));\n\ntype EventEmit = {\n    type: string,\n    data?:any,\n    [key:string]:any \n}\ntype Listener = (event?:EventEmit)=>any\n\n\ntype OnEventListener = {\n    [event:string]: (Listener | string)\n}\n\n\nexport class EventEmitter {\n   \n    _listeners = {};\n    _dispatchedEvents = {};\n    constructor() { }\n\n    /**\n     * chuẩn hóa hàn lắng nghe sự kiện\n     * @param {string|function} handler tên phương thức hoạc hàm handler\n     * @returns function\n     */\n\n     parseEventHandler(handler:any):(...args:any[]) => any{\n        var self = this;\n        if (typeof handler == \"function\") {\n            return handler;\n        }\n        var fnt = handler ? handler : function (e) {\n            console.log(e);\n        };\n\n        if (typeof handler == \"string\") {\n            var params = [];\n            var handleParams = handler.split(\":\");\n            if (handleParams.length == 2) {\n                handler = handleParams[0];\n                params = handleParams[1].split(\",\").map(function (s) { return s.trim(); });\n\n            }\n\n            fnt = function (e) {\n                var args = [e];\n                params.map(function (p) { args.push(p); });\n                \n                if (typeof self[handler] == \"function\") {\n                    return self[handler].apply(self, args);\n                }\n            };\n\n\n        }\n        return fnt;\n    }\n\n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} dispatch Thực thi trên tất cả các sự kiện trước đó\n     * @returns this\n     */\n     addEventListener (type:string, handler?:Listener, dispatch?:boolean) {\n        var self = this;\n        var listener = this.parseEventHandler(handler);\n        \n        if (this._listeners === undefined || this._listeners === null) this._listeners = {};\n\n        type = String(type).toLowerCase();\n\n\n\n        // if (isDomEvent(type)) return this.addDomEvent(type, listener, DEFAULT_VALUE);\n        const listeners = this._listeners;\n\n        if (listeners[type] === undefined) {\n\n            listeners[type] = [];\n\n        }\n        if(dispatch === true){\n            this.handleDispatchedEvents(type, listener);\n        }\n        \n        if (listeners[type].indexOf(listener) === - 1) {\n            listeners[type].push(listener);\n        }\n        return listener;\n    }\n\n    /**\n     * Kiểm tra sự kiện có tồn tại hay không\n     * @param {string} type tên sự kiện\n     * @param {function} listener hàm xử lý\n     * @returns {boolean}\n     */\n    hasEventListener (type:string, listener?:Listener): boolean {\n\n        if (this._listeners === undefined || this._listeners === null) return false;\n\n        const listeners = this._listeners;\n        type = String(type).toLowerCase();\n        return listeners[type] !== undefined && (listener?listeners[type].indexOf(listener) !== - 1:true);\n\n    }\n\n    /**\n     * Xóa / Gỡ sự kiện\n     * @param {string} type tên sự kiện\n     * @param {function} listener hàm xử lý\n     * @returns {boolean}\n     */\n    removeEventListener(type:string, listener?:Listener): boolean {\n        if (this._listeners === undefined || this._listeners === null) return false;\n        type = String(type).toLowerCase();\n        const listeners = this._listeners;\n        const listenerArray = listeners[type];\n        if (listenerArray !== undefined) {\n            if(!listener){\n                this._listeners[type].splice(0, this._listeners[type].length);\n                return true;\n            }\n            const index = listenerArray.indexOf(listener);\n            if (index !== - 1) {\n                listenerArray.splice(index, 1);\n                return true;\n            }\n        }\n        return false;\n    }\n\n\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @param {boolean} log lưu lại du lieu khi emit\n     * @returns {boolean}\n     */\n    dispatchEvent (event:(EventEmit | String), data?:any, log?:boolean):boolean {\n        if (this._listeners === undefined || this._listeners === null || !event) return null;\n        \n        var e:any = {};\n        if(isString(event)){\n            e.type = event;\n            if(data){\n                e.data = data;\n            }\n            // console.log(event, data);\n        }else if(isObject(event)){\n            e = event;\n            if(!e.type) return false;\n            if(!e.data && data){\n                e.data = data;\n            }\n            if(isBoolean(data) && typeof log == \"undefined\"){\n                log = data;\n            }\n        }\n        else{\n            return false;\n        }\n\n        const listeners = this._listeners;\n        const listenerArray = listeners[e.type];\n        var s = true;\n        if(!e.target){\n            e.target = this;\n        }\n        if(typeof e.stopImmediatePropagation != \"function\"){\n            e.stopImmediatePropagation = function () {\n                s = false;\n            }\n    \n        }\n        \n        if(log!==false){\n            this.addDispatchedEvent(e);\n        }\n        \n\n        if (listenerArray !== undefined) {\n            // Make a copy, in case listeners are removed while iterating.\n            const array1 = listenerArray.slice(0);\n            var rs : any[] = [];\n            for (var i = 0, l = array1.length; i < l; i++) {\n                let a = array1[i].call(this, e);\n                if (!s) break;\n                if(a!==undefined){\n                    rs.push(a)\n                }\n\n            }\n            if(s && rs.length){\n                return rs.length == 1 && array1.length == 1 ? rs[0] : rs;\n            }\n            return s;\n        }\n        \n    }\n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} listener hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} dispatch có cần cần gọi ham voi cac su kien truoc do hay ko\n     * @returns this\n     */\n     on(type:(OnEventListener|string), listener?:Listener|boolean, dispatch?:boolean){\n        if(isObject(type)){\n            var listeners = {};\n            const events : OnEventListener = type as OnEventListener;\n            var d:boolean = isBoolean(listener)?listener as boolean: (isBoolean(dispatch)?dispatch:false);\n            for (const key in events) {\n                if (Object.hasOwnProperty.call(events, key)) {\n                    const fn = type[key];\n                    if(isFunction(fn) || isString(fn)){\n                        const fnAdded = this.addEventListener(key, fn, d);\n                        if(fnAdded){\n                            listeners[key]=fnAdded;\n                        }\n                    }\n                }\n            }\n            return listeners;\n        }\n        return this.addEventListener(type as string, listener as Listener, dispatch);\n    }\n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} listener hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} dispatch có cần cần gọi ham voi cac su kien truoc do hay ko\n     * @returns this\n     */\n    subcribe(type:(OnEventListener|string), listener?:Listener, dispatch?:boolean){\n        return this.on(type, listener, dispatch);\n    }\n\n    off(type?:any, listener?:Listener){\n        if(isObject(type)){\n            for (const key in type) {\n                if (Object.prototype.hasOwnProperty.call(type, key)) {\n                    const fn = type[key];\n                    this.removeEventListener(key,fn);\n                }\n            }\n            return this;\n        }\n        return this.removeEventListener(type, listener);\n    }\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @returns {boolean}\n     */\n    emit(event:(EventEmit | String), data?:any, log?:boolean): boolean{\n        return this.dispatchEvent.apply(this, getArguments(arguments));\n    }\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @returns {boolean}\n     */\n    trigger(event:(EventEmit | String), data?:any, log?:boolean): boolean{\n        return this.dispatchEvent.apply(this, getArguments(arguments));\n    }\n    \n    addDispatchedEvent(event:EventEmit){\n        if(this._dispatchedEvents[event.type] === undefined) this._dispatchedEvents[event.type] = [];\n        this._dispatchedEvents[event.type].push(event);\n        // console.log(event.type, this._pendingListeners[event.type])\n        return this\n    }\n\n    handleDispatchedEvents(type:string, handler:Listener){\n        var listenerArray = this._dispatchedEvents[type];\n        // console.log(type, this._pendingListeners[type], this);\n        if (listenerArray !== undefined) {\n            \n        \n            // console.log(type)\n            // Make a copy, in case listeners are removed while iterating.\n            const array = listenerArray.slice(0);\n\n            for (var i = 0, l = array.length; i < l; i++) {\n                // array[i].call(this, e);\n                var s = handler.call(this, array[i]);\n                if(s === false){\n                    return s;\n                }\n\n            }\n        }\n    }\n}\n","import { assignValue, assignWithout, date, getTimeStamp, isNumber, isObject, queueTask } from '@app/_core/helpers/utils';\r\nimport * as THREE from 'three';\r\n\r\nimport Props, { parseParams } from '../libs/props';\r\nimport { registerAnimationTask } from '../libs/animation-loop';\r\nimport Object2Image from '../modules/object-image';\r\n\r\n// import self.animation from '../libs/animation-loop';\r\n\r\nconst Renderer = {\r\n    width: 300,\r\n    height: 300,\r\n    aspect: 1,\r\n    renderer: null,\r\n    composer: null,\r\n    fps: 0,\r\n    wrapper: null,\r\n\r\n\r\n    animationTasks: null,\r\n\r\n\r\n\r\n    /**\r\n     * @var {boolean} autoRenderMode Tự động gửi yêu cầu tạo hoạt cảnh\r\n     */\r\n    autoRenderMode: false,\r\n    autoRenderStatus: false,\r\n    autoRenderTimerStatus: false,\r\n    autoRenderTimerStart: false,\r\n    autoRenderCountdown: 0,\r\n    autoRenderTimerMilisecond: 3000,\r\n    autoRenderDistance: 10,\r\n    controlChangeAnimateStatus: false,\r\n\r\n    deactiveShadowStatus: false,\r\n    deactiveShadowTimeMstart: false,\r\n    deactiveShadowTimeMilisecond: 5000,\r\n    deactiveShadowTimeMilisecondHP: 1000,\r\n    deactiveShadowTimeCountdown: 0,\r\n\r\n\r\n    wheelAnimationStatus: false,\r\n    wheelAnimationTimeMstart: false,\r\n    wheelAnimationTimeMilisecond: 500,\r\n    wheelAnimationTimeCountdown: 300,\r\n\r\n\r\n    autoRenderQueueTask: null,\r\n    inWrapper: false,\r\n    pointerPosition: {\r\n        x: 0,\r\n        y: 0\r\n    },\r\n    pointerStart: false,\r\n\r\n    lastAnimateData: \"0\",\r\n    currentAnimateData: \"1\",\r\n    controlCanUpdate: true,\r\n    controlCanTurnOffShadow: true,\r\n\r\n\r\n    animation: null,\r\n\r\n    boots: [\"renderBoot\"],\r\n\r\n    /**\r\n     * chạy các thiết lập khi đối tượng dc khởi tạo\r\n     */\r\n    renderBoot: function () {\r\n        this.animation = registerAnimationTask(this.getInstanceID())\r\n        this.pointerPosition = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        var self = this;\r\n\r\n        this.animationTasks = {\r\n            animate: function animate() {\r\n                if (!self.autoRenderStatus) return false;\r\n                if (self.control && (self.control.enableDamping || (self.data && self.data.control.enableDamping)) && typeof self.control.update == \"function\" && !self.controlChangingByFPSStatus) {\r\n                    self.control.update();\r\n                }\r\n                self.render();\r\n            },\r\n            timeoutAnimate: function () {\r\n                // this.render();\r\n                if (self.autoRenderCountdown > 0) {\r\n                    if (self.control && (self.control.enableDamping || (self.data && self.data.control.enableDamping)) && typeof self.control.update == \"function\") {\r\n                        self.control.update();\r\n                    }\r\n\r\n                    self.render();\r\n                    var currentTime = getTimeStamp();\r\n                    // self.wrapper.showMessage(\"time: \" + currentTime + \", \" + \"time left: \" + (self.autoRenderCountdown - (currentTime - self.autoRenderTimerStart)))\r\n                    if (self.autoRenderTimerStatus && currentTime - self.autoRenderTimerStart >= self.autoRenderCountdown) {\r\n                        self.autoRenderTimerStatus = false;\r\n                        self.autoRenderCountdown = 0;\r\n                        self.animation.remove(\"timeoutAnimate\");\r\n                    }\r\n\r\n                }\r\n            },\r\n\r\n            controlChangeAnimate: function () {\r\n                // this.render();\r\n                if (self.control && (self.control.enableDamping || (self.data && self.data.control.enableDamping)) && typeof self.control.update == \"function\") {\r\n                    self.control.update();\r\n                }\r\n                self.render();\r\n\r\n                var d: any = {\r\n                    position: assignValue({}, self.camera.position),\r\n                    // quaternion: assignValue({}, self.camera.quaternion),\r\n                    rotation: assignValue({}, self.camera.rotation)\r\n                };\r\n                var c = JSON.stringify(d);\r\n                if (c == self.lastAnimateData) {\r\n                    self.controlChangeAnimateStatus = false;\r\n                    self.animation.remove(\"controlChangeAnimate\");\r\n                    self.emit(\"controls.change.camera.animate.end\");\r\n                }\r\n\r\n                self.lastAnimateData = self.currentAnimateData;\r\n                self.currentAnimateData = c;\r\n                self.emit({\r\n                    type: \"controls.change.camera\",\r\n                    camera: self.camera\r\n                });\r\n\r\n            },\r\n\r\n            activeShadowAfter: function () {\r\n                var currentTime = getTimeStamp();\r\n                var cond = self.deactiveShadowStatus && (\r\n                    (self.deactiveShadowMode == \"system\" && self.controlEnableDamping && self.lastAnimateData == self.currentAnimateData) ||\r\n                    currentTime - self.deactiveShadowTimeMstart >= self.deactiveShadowTimeCountdown\r\n                );\r\n                if (cond) {\r\n                    self.deactiveShadowStatus = false;\r\n                    self.deactiveShadowTimeCountdown = 0;\r\n                    if (self.controlCanTurnOffShadow) {\r\n                        self.Shadows.restore();\r\n                        self.refresh();\r\n\r\n                    }\r\n                    self.animation.remove(\"activeShadowAfter\");\r\n\r\n                    self.deactiveShadowMode = \"system\";\r\n                    if(typeof self.deactiveCompleteHandle == \"function\"){\r\n                        self.deactiveCompleteHandle();\r\n                        self.deactiveCompleteHandle = null;\r\n                    }\r\n                }\r\n            },\r\n\r\n            wheelAnimation: function () {\r\n                var currentTime = getTimeStamp();\r\n\r\n                if (self.wheelAnimationStatus && (currentTime - self.wheelAnimationTimeMstart >= self.wheelAnimationTimeCountdown)) {\r\n                    self.wheelAnimationStatus = false;\r\n                    self.wheelAnimationTimeCountdown = 0;\r\n\r\n                    self.controlCanTurnOffShadow = true;\r\n\r\n                    self.animation.remove(\"wheelAnimation\");\r\n\r\n                    if (!self.deactiveShadowStatus) {\r\n                        self.Shadows.restore();\r\n                        self.refresh();\r\n\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n    },\r\n\r\n\r\n\r\n    render: function () {\r\n        if (this.composer != null) {\r\n            this.composer.render();\r\n        } else if (this.renderer) {\r\n            this.renderer.render(this.scene, this.camera);\r\n            if (this.showSceneHelper && this.sceneHelper) {\r\n                this.renderer.render(this.sceneHelper, this.camera);\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n\r\n    refresh: function () {\r\n        if (this.autoRenderStatus || (this.autoRenderTimerStatus && this.autoRenderCountdown)) return false;\r\n        this.render();\r\n    },\r\n\r\n    capture: function(){\r\n        this.hideGridHelper();\r\n        var imageCaptured = Object2Image.getImageByCustomSceneAndCamera(this.scene, this.camera, this.width, this.height);\r\n        this.showGridHelper()\r\n        return imageCaptured;\r\n    },\r\n\r\n    createRenderer: function (opts?: any) {\r\n        var self = this;\r\n        var opt = typeof opts == \"object\" ? opts : {};\r\n        Props.parse(opt);\r\n        var params = isObject(opt.params) ? opt.params : { antialias: true };\r\n\r\n        var renderer = new THREE.WebGLRenderer(params);\r\n            renderer.setPixelRatio(window.devicePixelRatio);\r\n            renderer.setSize(window.innerWidth, window.innerHeight);\r\n            renderer.toneMapping = THREE.ACESFilmicToneMapping;\r\n            renderer.toneMappingExposure = 1;\r\n            renderer.outputEncoding = THREE.sRGBEncoding;\r\n            \r\n            renderer.shadowMap.enabled = this.data.shadow.enabled?true:false;\r\n            renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n        \r\n            // container.appendChild(renderer.domElement);\r\n\r\n        this.renderer = renderer;\r\n\r\n\r\n        if (this.wrapper) {\r\n            var rect = this.wrapper.getBoundingClientRect();\r\n            var width = rect.width;\r\n            var height = rect.height;\r\n            this.setSize(width || \"screen\", height || undefined);\r\n        } else {\r\n            this.setSize(opt.width || \"screen\", opt.height || undefined);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    updateShadowSettings: function (setting) {\r\n        if (isObject(setting)) {\r\n            var oldEnabled = this.data.shadow.enabled;\r\n            var oldPcss = this.data.shadow.pcss;\r\n\r\n            assignValue(this.data.shadow, setting);\r\n            for (const key in setting) {\r\n                if (Object.prototype.hasOwnProperty.call(setting, key)) {\r\n                    const vl = setting[key];\r\n                    if (key == \"enabled\") {\r\n                        this.renderer.shadowMap.enabled = vl;\r\n                    } else if (key == \"pcss\") {\r\n                        if (oldEnabled) {\r\n                            if (vl) {\r\n                                this.Shadows.active();\r\n                            } else {\r\n                                this.Shadows.deactive();\r\n                            }\r\n                        } else if (!vl) {\r\n                            this.Shadows.deactive();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    start: function () {\r\n        var self = this;\r\n        this.emit('start');\r\n        if (!self.animation.has(\"animate\", self.animationTasks.animate))\r\n            self.animation.add(\"animate\", self.animationTasks.animate);\r\n    },\r\n\r\n    ready: function () {\r\n        var self = this;\r\n\r\n        this.emit('ready', {\r\n            renderer: this.renderer, scene: this.scene, camera: this.camera\r\n        }, true);\r\n\r\n        if (this.data.autoStart || this.data.autoRefresh || this.data.autoAnimate || (this.data.renderer && (this.data.renderer.autoStart || this.data.renderer.autoRefresh || this.data.renderer.autoAnimate))) {\r\n            this.autoRenderStatus = true;\r\n            this.autoRenderMode = true;\r\n\r\n            this.start();\r\n        } else {\r\n\r\n\r\n            this.render();\r\n        };\r\n\r\n        var wrapper = this.wrapper;\r\n        function start(e) {\r\n            if (self.controlCanUpdate) {\r\n\r\n                if (self.control.autoUpdateScene && !self.autoRenderMode) {\r\n                    if (!self.controlChangeAnimateStatus) {\r\n                        // nếu có dumping\r\n                        if (self.controlEnableDamping && !self.autoRenderStatus) {\r\n                            // self.control.enableDamping = true;\r\n                            // nếu có hiệu năng cao thì tắt dổ bóng\r\n                            if (self.control.highPerformance && self.controlCanTurnOffShadow) {\r\n                                self.startDeactiveShadowTimer(self.deactiveShadowTimeMilisecond, \"system\");\r\n                            }\r\n                            // self.startChangeAnimate(self.autoRenderTimerMilisecond);\r\n                        }\r\n                        else {\r\n                            // nếu có hiệu năng cao thì tắt dổ bóng\r\n                            if (self.control.highPerformance && self.controlCanTurnOffShadow) {\r\n                                self.startDeactiveShadowTimer(self.deactiveShadowTimeMilisecondHP, \"system\");\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (self.controlCanTurnOffShadow) {\r\n                        self.startDeactiveShadowTimer(self.deactiveShadowTimeMilisecond, \"system\");\r\n                    }\r\n\r\n\r\n                }\r\n\r\n            }\r\n            // self.startDeactiveShadowTimer(self.deactiveShadowTimeMilisecond);\r\n        }\r\n        function move(e) {\r\n            if (self.controlCanUpdate) {\r\n\r\n                if (self.control.autoUpdateScene && !self.autoRenderMode) {\r\n                    if (!self.controlChangeAnimateStatus) {\r\n                        // nếu có dumping\r\n                        if (self.controlEnableDamping && !self.autoRenderStatus) {\r\n                            self.control.enableDamping = true;\r\n                            // nếu có hiệu năng cao thì tắt dổ bóng\r\n                            if (self.control.highPerformance && self.controlCanTurnOffShadow) {\r\n                                self.startDeactiveShadowTimer(self.deactiveShadowTimeMilisecond, \"system\");\r\n                            }\r\n                            self.startChangeAnimate(self.autoRenderTimerMilisecond);\r\n                        }\r\n                        else {\r\n                            // nếu có hiệu năng cao thì tắt dổ bóng\r\n                            if (self.control.highPerformance && self.controlCanTurnOffShadow) {\r\n                                self.startDeactiveShadowTimer(self.deactiveShadowTimeMilisecondHP, \"system\");\r\n                            }\r\n                            self.refresh();\r\n                            self.emit({\r\n                                type: \"controls.change.camera\",\r\n                                camera: self.camera\r\n                            });\r\n                        }\r\n                    }\r\n                    else if (self.controlCanTurnOffShadow) {\r\n                        self.startDeactiveShadowTimer(self.deactiveShadowTimeMilisecond, \"system\");\r\n                    }\r\n\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n        function end(e) {\r\n            self.emit(\"controls.change.camera.end\");\r\n        }\r\n        if (this.control) {\r\n            this.control.addEventListener('start', start);\r\n            this.control.addEventListener('change', move);\r\n            this.control.addEventListener('end', end);\r\n\r\n        }\r\n\r\n        this.on('wheel', function (event) {\r\n            self.startWheelAnimate();\r\n        })\r\n\r\n\r\n        return this;\r\n    },\r\n\r\n\r\n\r\n    setWrapper: function setWrapper(wrapperElement: Element) {\r\n        this.wrapper = wrapperElement;\r\n        this.wrapper.appendChild(this.getCanvas());\r\n        this.updateCanvasSize();\r\n        var self = this;\r\n        // setTimeout(function(){\r\n        //     self.updateCanvasSize();\r\n        // }, 10);\r\n\r\n\r\n    },\r\n\r\n    getCanvas: function getCanvas() {\r\n        return this.renderer.domElement;\r\n    },\r\n\r\n    setSize: function (width?: any, height?: any) {\r\n        this.emit('setSize', width, height);\r\n        if (typeof width == \"undefined\") {\r\n            return this;\r\n        }\r\n        if (width == \"screen\") {\r\n            this.width = window.innerWidth;\r\n            this.height = window.innerHeight;\r\n            \r\n        } else if (isNumber(width) && width > 0) {\r\n            this.width = Number(width);\r\n            this.height = isNumber(height) ? Number(height) : this.width;\r\n        }\r\n        else if (document.getElementById(width)) {\r\n            var el = document.getElementById(width);\r\n            var w = el.clientWidth;\r\n            var h = el.clientHeight;\r\n            this.width = Number(w);\r\n            this.height = isNumber(h) ? Number(h) : this.width;\r\n\r\n        }\r\n\r\n        this.aspect = this.width / this.height;\r\n        this.renderer.setSize(this.width, this.height);\r\n        this.camera.aspect = this.aspect;\r\n        this.camera.updateProjectionMatrix();\r\n        this.emit('size.setted', width, height);\r\n        return this;\r\n    },\r\n\r\n    updateCanvasSize(e?: any): boolean {\r\n        if (this.data.renderer.autoResize || typeof this.data.renderer.autoResize == \"undefined\") {\r\n            this.width = window.innerWidth;\r\n            this.height = window.innerHeight;\r\n\r\n            if (this.wrapper) {\r\n                var rect = this.wrapper.getBoundingClientRect();\r\n                var width = rect.width;\r\n                var height = rect.height;\r\n                if (isNumber(width) && width > 0) {\r\n                    this.width = width;\r\n                    this.height = height;\r\n                }\r\n            }\r\n            this.aspect = this.width / this.height;\r\n            this.renderer.setSize(this.width, this.height);\r\n            this.camera.aspect = this.aspect;\r\n            this.camera.updateProjectionMatrix();\r\n\r\n            this.refresh();\r\n            this.emit('canvas.size.update', e);\r\n            return true;\r\n\r\n        } else {\r\n            // this.emit('resize', e);\r\n\r\n            return false;\r\n        }\r\n    },\r\n\r\n    windowResize: function (e) {\r\n        var status = this.updateCanvasSize(e);\r\n\r\n        if (status) {\r\n            this.emit('resize', e);\r\n            this.refresh();\r\n        } else {\r\n            this.emit('resize', e);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    updateWrapperSize: function () {\r\n\r\n    },\r\n\r\n    /**\r\n     * khởi dộng trình auto render\r\n     * @param {int} timer thời gian render tự dộng\r\n     * @param {int} checkDistance thời gian cách nhau giữa 2 lần kiềm tra trạng thái\r\n     */\r\n    startAnimateTimer: function (timer?: any, checkDistance?: any) {\r\n        var self = this;\r\n        self.autoRenderTimerStart = getTimeStamp();\r\n        // this.wrapper.showMessage(\"time: \" + self.autoRenderTimerStart)\r\n        if (self.autoRenderCountdown <= 0) {\r\n            this.autoRenderTimerStatus = true;\r\n\r\n            if (!self.animation.has(\"timeoutAnimate\", self.animationTasks.timeoutAnimate)) {\r\n                self.animation.add(\"timeoutAnimate\", self.animationTasks.timeoutAnimate);\r\n            }\r\n\r\n            // console.log('start: ' + date('time'));\r\n        }\r\n        self.autoRenderCountdown = timer;\r\n    },\r\n\r\n    /**\r\n     * khởi dộng trình auto render\r\n     * @param {int} timer thời gian render tự dộng\r\n     * @param {int} checkDistance thời gian cách nhau giữa 2 lần kiềm tra trạng thái\r\n     */\r\n    startChangeAnimate: function () {\r\n        var self = this;\r\n        if (!this.controlChangeAnimateStatus) {\r\n            // this.render();\r\n            this.controlChangeAnimateStatus = true;\r\n            if (!self.animation.has(\"controlChangeAnimate\", self.animationTasks.controlChangeAnimate)) {\r\n                self.animation.add(\"controlChangeAnimate\", self.animationTasks.controlChangeAnimate);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * khởi dộng trình auto render\r\n     * @param {int} timer thời gian render tự dộng\r\n     * @param {int} checkDistance thời gian cách nhau giữa 2 lần kiềm tra trạng thái\r\n     */\r\n    startWheelAnimate: function () {\r\n        var self = this;\r\n        this.wheelAnimationTimeMstart = getTimeStamp();\r\n        if (!this.wheelAnimationStatus) {\r\n            self.controlCanTurnOffShadow = false;\r\n            self.wheelAnimationTimeCountdown = 300;\r\n            // this.render();\r\n            this.wheelAnimationStatus = true;\r\n            if (!self.animation.has(\"wheelAnimation\", self.animationTasks.wheelAnimation)) {\r\n                self.Shadows.off();\r\n                self.animation.add(\"wheelAnimation\", self.animationTasks.wheelAnimation);\r\n            }\r\n        }\r\n    },\r\n    deactiveShadowMode: \"system\",\r\n    deactiveCompleteHandle: null,\r\n    /**\r\n     * khởi dộng trình auto render\r\n     * @param {int} timer thời gian render tự dộng\r\n     * @param {int} checkDistance thời gian cách nhau giữa 2 lần kiềm tra trạng thái\r\n     */\r\n    startDeactiveShadowTimer: function (timer?: any, mode?:string, onComplete?:()=>any) {\r\n        var self = this;\r\n        self.deactiveShadowTimeMstart = getTimeStamp();\r\n        if(typeof onComplete == \"function\") self.deactiveCompleteHandle = onComplete;\r\n        if(mode) this.deactiveShadowMode = mode;\r\n        // this.wrapper.showMessage(\"time: \" + self.autoRenderTimerStart)\r\n        if (!this.deactiveShadowStatus) {\r\n            this.deactiveShadowStatus = true;\r\n            if (!self.animation.has(\"activeShadowAfter\", self.animationTasks.activeShadowAfter)) {\r\n                if (self.controlCanTurnOffShadow) {\r\n                    self.Shadows.off();\r\n                }\r\n                self.animation.add(\"activeShadowAfter\", self.animationTasks.activeShadowAfter);\r\n            }\r\n        }\r\n        self.deactiveShadowTimeCountdown = self.deactiveShadowTimeCountdown > timer?self.deactiveShadowTimeCountdown:timer;\r\n    }\r\n};\r\n\r\nexport default Renderer;","import { getTimeStamp, isBoolean, objectHasKey, Str } from \"@app/_core/helpers/utils\";\r\nimport { CallbackFunction } from \"@app/_shared/shared.type\";\r\n\r\nclass Animation {\r\n    tasks:{[name:string]:CallbackFunction[]} = {};\r\n    taskCount = 0;\r\n    isRunning = false;\r\n    \r\n    isShowLog = false;\r\n\r\n    add(name:string, callback?:()=>any) {\r\n        if (typeof callback != \"function\")\r\n            return this;\r\n        if (this.tasks[name] === undefined) {\r\n            this.tasks[name] = [];\r\n            this.taskCount++;\r\n        }\r\n        this.tasks[name].push(callback);\r\n        this.start();\r\n        return this;\r\n    }\r\n    remove(name:string, callback?:()=>any) {\r\n        if (name && typeof this.tasks[name] != \"undefined\") {\r\n            if (callback) {\r\n                var index = this.tasks[name].indexOf(callback);\r\n                if (index !== -1) {\r\n                    this.tasks[name].splice(index, 1);\r\n                    this.taskCount--;\r\n                }\r\n            } else {\r\n                this.taskCount -= this.tasks[name].length;\r\n                delete this.tasks[name];\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    has(name:string, callback?:()=>any) {\r\n        if (name && typeof this.tasks[name] != \"undefined\") {\r\n            if (callback) {\r\n                var index = this.tasks[name].indexOf(callback);\r\n                if (index !== -1) {\r\n                    return true;\r\n                }\r\n            } else {\r\n                return this.tasks[name].length ? true : false;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    start() {\r\n        if (!this.isRunning) {\r\n            this.isRunning = true;\r\n            this.animate();\r\n        }\r\n    }\r\n    stop() {\r\n        this.isRunning = false;\r\n    }\r\n    animate () {\r\n        var self = this;\r\n        if(this.isShowLog){\r\n            // console.log(\"animation run\")\r\n        }\r\n        if (this.isRunning && this.taskCount) {\r\n            for (const name in this.tasks) {\r\n                if (Object.hasOwnProperty.call(this.tasks, name)) {\r\n                    const tasklist = this.tasks[name];\r\n                    if (tasklist.length) {\r\n                        tasklist.map(function (callback) {\r\n                            if (typeof callback == \"function\") {\r\n                                callback();\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            requestAnimationFrame(function () { self.animate(); });\r\n\r\n        } else {\r\n            this.isRunning = false;\r\n        }\r\n    }\r\n\r\n    set enableLog(value){\r\n        if(isBoolean(value)){\r\n            this.isShowLog = value;\r\n        }\r\n    }\r\n\r\n    _id: string;\r\n    constructor(id?:string) {\r\n        // lam gi do\r\n        this._id = id?id:Str.rand(getTimeStamp());\r\n\r\n    }\r\n}\r\n\r\nconst animationContainers: {[s:string]:Animation} = {};\r\nconst registerAnimationTask = (key: string) => {\r\n    if(!objectHasKey(animationContainers, key)) animationContainers[key] = new Animation(key);\r\n\r\n    return animationContainers[key];\r\n};\r\nconst AnimationLoop = new Animation();\r\n\r\nexport default AnimationLoop;\r\nexport {AnimationLoop, registerAnimationTask};\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\n\r\nimport { PermissionsService } from '../services';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthorizationGuard implements CanActivate {\r\n  constructor(private permissionsService: PermissionsService) {}\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n    const pageFormRoot = route.pathFromRoot\r\n      .filter((p) => p.routeConfig && p.routeConfig.path !== '')\r\n      .map((p) => '/' + p.routeConfig.path)\r\n      .join('');\r\n    return this.permissionsService.checkAuthorizationSync(`pages.${pageFormRoot}`);\r\n  }\r\n}\r\n","/**\r\n * postprocessing v6.17.1 build Thu Aug 20 2020\r\n * https://github.com/vanruesc/postprocessing\r\n * Copyright 2020 Raoul van Rüschen\r\n * @license Zlib\r\n */\r\nimport { ShaderMaterial, Uniform, Vector2 as Vector2$1, Vector4, PerspectiveCamera, Matrix4, Camera, Scene, Mesh, BufferGeometry, BufferAttribute, WebGLRenderTarget, LinearFilter, UnsignedByteType, RGBFormat, Color, MeshDepthMaterial, RGBADepthPacking, NearestFilter, FloatType, EventDispatcher, MeshNormalMaterial, WebGLMultisampleRenderTarget, DepthTexture, DepthStencilFormat, UnsignedInt248Type, UnsignedIntType, RGBAFormat, DataTexture, LuminanceFormat, RedFormat, RGFormat, RepeatWrapping, Vector3, MeshBasicMaterial, Texture, sRGBEncoding, LinearEncoding, Matrix3, LinearMipmapLinearFilter, LinearMipMapLinearFilter, Loader, LoadingManager } from 'three';\r\n\r\n/**\r\n * A color channel enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} RED - Red.\r\n * @property {Number} GREEN - Green.\r\n * @property {Number} BLUE - Blue.\r\n * @property {Number} ALPHA - Alpha.\r\n */\r\n\r\nconst ColorChannel = {\r\n\r\n\tRED: 0,\r\n\tGREEN: 1,\r\n\tBLUE: 2,\r\n\tALPHA: 3\r\n\r\n};\r\n\r\n/**\r\n * The Disposable contract.\r\n *\r\n * Implemented by objects that can free internal resources.\r\n *\r\n * @interface\r\n */\r\n\r\nclass Disposable {\r\n\r\n\t/**\r\n\t * Frees internal resources.\r\n\t */\r\n\r\n\tdispose() {}\r\n\r\n}\r\n\r\nvar fragmentShader = \"uniform sampler2D previousLuminanceBuffer;uniform sampler2D currentLuminanceBuffer;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float previousLuminance=texture2D(previousLuminanceBuffer,vUv,MIP_LEVEL_1X1).r;float currentLuminance=texture2D(currentLuminanceBuffer,vUv,MIP_LEVEL_1X1).r;previousLuminance=max(minLuminance,previousLuminance);currentLuminance=max(minLuminance,currentLuminance);float adaptedLum=previousLuminance+(currentLuminance-previousLuminance)*(1.0-exp(-deltaTime*tau));gl_FragColor.r=adaptedLum;}\";\r\n\r\nvar vertexShader = \"varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}\";\r\n\r\n/**\r\n * An adaptive luminance shader material.\r\n */\r\n\r\nclass AdaptiveLuminanceMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new adaptive luminance material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"AdaptiveLuminanceMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tMIP_LEVEL_1X1: \"0.0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tpreviousLuminanceBuffer: new Uniform(null),\r\n\t\t\t\tcurrentLuminanceBuffer: new Uniform(null),\r\n\t\t\t\tminLuminance: new Uniform(0.01),\r\n\t\t\t\tdeltaTime: new Uniform(0.0),\r\n\t\t\t\ttau: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$1 = \"uniform sampler2D inputBuffer;uniform sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;\\n#if PASS == 1\\nuniform vec4 kernel64[32];\\n#else\\nuniform vec4 kernel16[8];\\n#endif\\nvarying vec2 vUv;void main(){\\n#ifdef FOREGROUND\\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\\n#else\\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\\n#endif\\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\\n#ifdef FOREGROUND\\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\\n#else\\nvec2 step=texelSize*CoC;\\n#endif\\n#if PASS == 1\\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\\n#else\\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\\n#endif\\n}}\";\r\n\r\n/**\r\n * A bokeh blur material.\r\n *\r\n * This material should be applied twice in a row, with `fill` mode enabled for\r\n * the second pass.\r\n *\r\n * Enabling the `foreground` option causes the shader to combine the near and\r\n * far CoC values around foreground objects.\r\n */\r\n\r\nclass BokehMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new bokeh material.\r\n\t *\r\n\t * @param {Boolean} [fill=false] - Enables or disables the bokeh highlight fill mode.\r\n\t * @param {Boolean} [foreground=false] - Determines whether this material will be applied to foreground colors.\r\n\t */\r\n\r\n\tconstructor(fill = false, foreground = false) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"BokehMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tPASS: fill ? \"2\" : \"1\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tkernel64: new Uniform(null),\r\n\t\t\t\tkernel16: new Uniform(null),\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tcocBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1()),\r\n\t\t\t\tscale: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$1,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tif(foreground) {\r\n\r\n\t\t\tthis.defines.FOREGROUND = \"1\";\r\n\r\n\t\t}\r\n\r\n\t\tthis.generateKernel();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Generates the blur kernels.\r\n\t *\r\n\t * @private\r\n\t */\r\n\r\n\tgenerateKernel() {\r\n\r\n\t\tconst GOLDEN_ANGLE = 2.39996323;\r\n\t\tconst points64 = new Float32Array(128);\r\n\t\tconst points16 = new Float32Array(32);\r\n\r\n\t\tlet i64 = 0, i16 = 0;\r\n\r\n\t\tfor(let i = 0; i < 80; ++i) {\r\n\r\n\t\t\tconst theta = i * GOLDEN_ANGLE;\r\n\t\t\tconst r = Math.sqrt(i) / Math.sqrt(80);\r\n\t\t\tconst u = r * Math.cos(theta), v = r * Math.sin(theta);\r\n\r\n\t\t\tif(i % 5 === 0) {\r\n\r\n\t\t\t\tpoints16[i16++] = u;\r\n\t\t\t\tpoints16[i16++] = v;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tpoints64[i64++] = u;\r\n\t\t\t\tpoints64[i64++] = v;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Pack points into vec4 instances to reduce the uniform count.\r\n\t\tconst kernel64 = [];\r\n\t\tconst kernel16 = [];\r\n\r\n\t\tfor(let i = 0; i < 128;) {\r\n\r\n\t\t\tkernel64.push(new Vector4(\r\n\t\t\t\tpoints64[i++], points64[i++],\r\n\t\t\t\tpoints64[i++], points64[i++]\r\n\t\t\t));\r\n\r\n\t\t}\r\n\r\n\t\tfor(let i = 0; i < 32;) {\r\n\r\n\t\t\tkernel16.push(new Vector4(\r\n\t\t\t\tpoints16[i++], points16[i++],\r\n\t\t\t\tpoints16[i++], points16[i++]\r\n\t\t\t));\r\n\r\n\t\t}\r\n\r\n\t\tthis.uniforms.kernel64.value = kernel64;\r\n\t\tthis.uniforms.kernel16.value = kernel16;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$2 = \"#include <common>\\n#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform float focusDistance;uniform float focalLength;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}void main(){float depth=readDepth(vUv);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focalLength,abs(signedDistance));gl_FragColor.rg=vec2(step(signedDistance,0.0)*magnitude,step(0.0,signedDistance)*magnitude);}\";\r\n\r\n/**\r\n * A CoC shader material.\r\n */\r\n\r\nclass CircleOfConfusionMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new CoC material.\r\n\t *\r\n\t * @param {Camera} camera - A camera.\r\n\t */\r\n\r\n\tconstructor(camera) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"CircleOfConfusionMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tDEPTH_PACKING: \"0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tdepthBuffer: new Uniform(null),\r\n\t\t\t\tfocusDistance: new Uniform(0.0),\r\n\t\t\t\tfocalLength: new Uniform(0.0),\r\n\t\t\t\tcameraNear: new Uniform(0.3),\r\n\t\t\t\tcameraFar: new Uniform(1000)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$2,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.adoptCameraSettings(camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget depthPacking() {\r\n\r\n\t\treturn Number(this.defines.DEPTH_PACKING);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset depthPacking(value) {\r\n\r\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera = null) {\r\n\r\n\t\tif(camera !== null) {\r\n\r\n\t\t\tthis.uniforms.cameraNear.value = camera.near;\r\n\t\t\tthis.uniforms.cameraFar.value = camera.far;\r\n\r\n\t\t\tif(camera instanceof PerspectiveCamera) {\r\n\r\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShaderColor = \"uniform sampler2D inputBuffer;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;void main(){const vec2 threshold=vec2(EDGE_THRESHOLD);vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);}\";\r\n\r\nvar vertexShader$1 = \"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\\n#if EDGE_DETECTION_MODE != 0\\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\\n#endif\\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\\n#if EDGE_DETECTION_MODE != 0\\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\\n#endif\\ngl_Position=vec4(position.xy,1.0,1.0);}\";\r\n\r\n/**\r\n * A material that detects edges in a color texture.\r\n *\r\n * @deprecated Use EdgeDetectionMaterial instead.\r\n */\r\n\r\nclass ColorEdgesMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new color edges material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2$1()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"ColorEdgesMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tLOCAL_CONTRAST_ADAPTATION_FACTOR: \"2.0\",\r\n\t\t\t\tEDGE_THRESHOLD: \"0.1\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(texelSize)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShaderColor,\r\n\t\t\tvertexShader: vertexShader$1,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the local contrast adaptation factor.\r\n\t *\r\n\t * If there is a neighbor edge that has _factor_ times bigger contrast than\r\n\t * the current edge, the edge will be discarded.\r\n\t *\r\n\t * This allows to eliminate spurious crossing edges and is based on the fact\r\n\t * that if there is too much contrast in a direction, the perceptual contrast\r\n\t * in the other neighbors will be hidden.\r\n\t *\r\n\t * @param {Number} factor - The local contrast adaptation factor. Default is 2.0.\r\n\t */\r\n\r\n\tsetLocalContrastAdaptationFactor(factor) {\r\n\r\n\t\tthis.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR = factor.toFixed(\"2\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the edge detection sensitivity.\r\n\t *\r\n\t * A lower value results in more edges being detected at the expense of\r\n\t * performance.\r\n\t *\r\n\t * 0.1 is a reasonable value, and allows to catch most visible edges.\r\n\t * 0.05 is a rather overkill value, that allows to catch 'em all.\r\n\t *\r\n\t * If temporal supersampling is used, 0.2 could be a reasonable value, as low\r\n\t * contrast edges are properly filtered by just 2x.\r\n\t *\r\n\t * @param {Number} threshold - The edge detection sensitivity. Range: [0.05, 0.5].\r\n\t */\r\n\r\n\tsetEdgeDetectionThreshold(threshold) {\r\n\r\n\t\tconst t = Math.min(Math.max(threshold, 0.05), 0.5);\r\n\t\tthis.defines.EDGE_THRESHOLD = t.toFixed(\"2\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$3 = \"#include <common>\\n#include <dithering_pars_fragment>\\nuniform sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\\n#include <dithering_fragment>\\n}\";\r\n\r\nvar vertexShader$2 = \"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;/*Packing multiple texture coordinates into one varying and using a swizzle toextract them in the fragment shader still causes a dependent texture read.*/varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}\";\r\n\r\n/**\r\n * An optimised convolution shader material.\r\n *\r\n * This material supports dithering.\r\n *\r\n * Based on the GDC2003 Presentation by Masaki Kawase, Bunkasha Games:\r\n *  Frame Buffer Postprocessing Effects in DOUBLE-S.T.E.A.L (Wreckless)\r\n * and an article by Filip Strugar, Intel:\r\n *  An investigation of fast real-time GPU-based image blur algorithms\r\n *\r\n * Further modified according to Apple's\r\n * [Best Practices for Shaders](https://goo.gl/lmRoM5).\r\n *\r\n * @todo Remove dithering code from fragment shader.\r\n */\r\n\r\nclass ConvolutionMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new convolution material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2$1()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"ConvolutionMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1()),\r\n\t\t\t\thalfTexelSize: new Uniform(new Vector2$1()),\r\n\t\t\t\tkernel: new Uniform(0.0),\r\n\t\t\t\tscale: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$3,\r\n\t\t\tvertexShader: vertexShader$2,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.setTexelSize(texelSize.x, texelSize.y);\r\n\r\n\t\t/**\r\n\t\t * The current kernel size.\r\n\t\t *\r\n\t\t * @type {KernelSize}\r\n\t\t */\r\n\r\n\t\tthis.kernelSize = KernelSize.LARGE;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the kernel.\r\n\t *\r\n\t * @return {Float32Array} The kernel.\r\n\t */\r\n\r\n\tgetKernel() {\r\n\r\n\t\treturn kernelPresets[this.kernelSize];\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\t\tthis.uniforms.halfTexelSize.value.set(x, y).multiplyScalar(0.5);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * The Kawase blur kernel presets.\r\n *\r\n * @type {Float32Array[]}\r\n * @private\r\n */\r\n\r\nconst kernelPresets = [\r\n\tnew Float32Array([0.0, 0.0]),\r\n\tnew Float32Array([0.0, 1.0, 1.0]),\r\n\tnew Float32Array([0.0, 1.0, 1.0, 2.0]),\r\n\tnew Float32Array([0.0, 1.0, 2.0, 2.0, 3.0]),\r\n\tnew Float32Array([0.0, 1.0, 2.0, 3.0, 4.0, 4.0, 5.0]),\r\n\tnew Float32Array([0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 8.0, 9.0, 10.0])\r\n];\r\n\r\n/**\r\n * A kernel size enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} VERY_SMALL - A very small kernel that matches a 7x7 Gauss blur kernel.\r\n * @property {Number} SMALL - A small kernel that matches a 15x15 Gauss blur kernel.\r\n * @property {Number} MEDIUM - A medium sized kernel that matches a 23x23 Gauss blur kernel.\r\n * @property {Number} LARGE - A large kernel that matches a 35x35 Gauss blur kernel.\r\n * @property {Number} VERY_LARGE - A very large kernel that matches a 63x63 Gauss blur kernel.\r\n * @property {Number} HUGE - A huge kernel that matches a 127x127 Gauss blur kernel.\r\n */\r\n\r\nconst KernelSize = {\r\n\r\n\tVERY_SMALL: 0,\r\n\tSMALL: 1,\r\n\tMEDIUM: 2,\r\n\tLARGE: 3,\r\n\tVERY_LARGE: 4,\r\n\tHUGE: 5\r\n\r\n};\r\n\r\nvar fragmentShader$4 = \"uniform sampler2D inputBuffer;uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\\n#include <encodings_fragment>\\n}\";\r\n\r\n/**\r\n * A simple copy shader material.\r\n */\r\n\r\nclass CopyMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new copy material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"CopyMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\topacity: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$4,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$5 = \"#include <packing>\\n#include <clipping_planes_pars_fragment>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){\\n#include <clipping_planes_fragment>\\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\\n#else\\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\\n#endif\\nfloat depthTest=(-vViewZ>-viewZ)? 1.0 : 0.0;gl_FragColor.rg=vec2(0.0,depthTest);}\";\r\n\r\nvar vertexShader$3 = \"#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\\n#include <skinbase_vertex>\\n#include <begin_vertex>\\n#include <morphtarget_vertex>\\n#include <skinning_vertex>\\n#include <project_vertex>\\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\\n#include <clipping_planes_vertex>\\n}\";\r\n\r\n/**\r\n * A depth comparison shader material.\r\n */\r\n\r\nclass DepthComparisonMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new depth comparison material.\r\n\t *\r\n\t * @param {Texture} [depthTexture=null] - A depth texture.\r\n\t * @param {PerspectiveCamera} [camera] - A camera.\r\n\t */\r\n\r\n\tconstructor(depthTexture = null, camera) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"DepthComparisonMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tdepthBuffer: new Uniform(depthTexture),\r\n\t\t\t\tcameraNear: new Uniform(0.3),\r\n\t\t\t\tcameraFar: new Uniform(1000)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$5,\r\n\t\t\tvertexShader: vertexShader$3,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false,\r\n\r\n\t\t\tmorphTargets: true,\r\n\t\t\tskinning: true\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.adoptCameraSettings(camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera = null) {\r\n\r\n\t\tif(camera !== null) {\r\n\r\n\t\t\tthis.uniforms.cameraNear.value = camera.near;\r\n\t\t\tthis.uniforms.cameraFar.value = camera.far;\r\n\r\n\t\t\tif(camera instanceof PerspectiveCamera) {\r\n\r\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$6 = \"#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\n#ifdef DOWNSAMPLE_NORMALS\\nuniform sampler2D normalBuffer;\\n#endif\\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}/***Returns the index of the most representative depth in the 2x2 neighborhood.*/int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])/4.0;float distances[4]=float[](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4]=float[](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);\\n#ifdef DOWNSAMPLE_NORMALS\\nvec2 uvs[4]=vec2[](vUv0,vUv1,vUv2,vUv3);vec3 n=texture2D(normalBuffer,uvs[index]).rgb;\\n#else\\nvec3 n=vec3(0.0);\\n#endif\\ngl_FragColor=vec4(n,d[index]);}\";\r\n\r\nvar vertexShader$4 = \"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}\";\r\n\r\n/**\r\n * A depth downsampling shader material.\r\n *\r\n * Based on an article by Eleni Maria Stea:\r\n * https://eleni.mutantstargoat.com/hikiko/depth-aware-upsampling-6\r\n */\r\n\r\nclass DepthDownsamplingMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new depth downsampling material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"DepthDownsamplingMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tDEPTH_PACKING: \"0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tdepthBuffer: new Uniform(null),\r\n\t\t\t\tnormalBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1())\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$6,\r\n\t\t\tvertexShader: vertexShader$4,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The depth packing of the source depth buffer.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget depthPacking() {\r\n\r\n\t\treturn Number(this.defines.DEPTH_PACKING);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset depthPacking(value) {\r\n\r\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$7 = \"#include <common>\\n#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;\\n#else\\nuniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;\\n#endif\\nuniform sampler2D inputBuffer;varying vec2 vUv;void main(){\\n#if DEPTH_PACKING_0 == 3201\\nfloat d0=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));\\n#else\\nfloat d0=texture2D(depthBuffer0,vUv).r;\\n#endif\\n#if DEPTH_PACKING_1 == 3201\\nfloat d1=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));\\n#else\\nfloat d1=texture2D(depthBuffer1,vUv).r;\\n#endif\\nif(d0<d1){discard;}gl_FragColor=texture2D(inputBuffer,vUv);}\";\r\n\r\n/**\r\n * A depth mask shader material.\r\n *\r\n * This material masks a color buffer by comparing two depth textures.\r\n */\r\n\r\nclass DepthMaskMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new depth mask material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"DepthMaskMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tDEPTH_PACKING_0: \"0\",\r\n\t\t\t\tDEPTH_PACKING_1: \"0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tdepthBuffer0: new Uniform(null),\r\n\t\t\t\tdepthBuffer1: new Uniform(null),\r\n\t\t\t\tinputBuffer: new Uniform(null)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$7,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShaderDepth = \"#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nvarying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}/***Gathers the current texel,and the top-left neighbors.*/vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}void main(){const vec2 threshold=vec2(DEPTH_THRESHOLD);vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);}\";\r\n\r\nvar fragmentShaderLuma = \"#include <common>\\nuniform sampler2D inputBuffer;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;void main(){const vec2 threshold=vec2(EDGE_THRESHOLD);float l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);}\";\r\n\r\n/**\r\n * An edge detection material.\r\n *\r\n * Mainly used for Subpixel Morphological Antialiasing.\r\n */\r\n\r\nclass EdgeDetectionMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new edge detection material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The screen texel size.\r\n\t * @param {EdgeDetectionMode} [mode=EdgeDetectionMode.COLOR] - The edge detection mode.\r\n\t * @todo Remove texelSize parameter.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2$1(), mode = EdgeDetectionMode.COLOR) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"EdgeDetectionMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tLOCAL_CONTRAST_ADAPTATION_FACTOR: \"2.0\",\r\n\t\t\t\tEDGE_THRESHOLD: \"0.1\",\r\n\t\t\t\tDEPTH_THRESHOLD: \"0.01\",\r\n\t\t\t\tDEPTH_PACKING: \"0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tdepthBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(texelSize)\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: vertexShader$1,\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.setEdgeDetectionMode(mode);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget depthPacking() {\r\n\r\n\t\treturn Number(this.defines.DEPTH_PACKING);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset depthPacking(value) {\r\n\r\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the edge detection mode.\r\n\t *\r\n\t * Warning: If you intend to change the edge detection mode at runtime, make\r\n\t * sure that {@link EffectPass.needsDepthTexture} is set to `true` _before_\r\n\t * the EffectPass is added to the composer.\r\n\t *\r\n\t * @param {EdgeDetectionMode} mode - The edge detection mode.\r\n\t */\r\n\r\n\tsetEdgeDetectionMode(mode) {\r\n\r\n\t\tswitch(mode) {\r\n\r\n\t\t\tcase EdgeDetectionMode.DEPTH:\r\n\t\t\t\tthis.fragmentShader = fragmentShaderDepth;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase EdgeDetectionMode.LUMA:\r\n\t\t\t\tthis.fragmentShader = fragmentShaderLuma;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase EdgeDetectionMode.COLOR:\r\n\t\t\tdefault:\r\n\t\t\t\tthis.fragmentShader = fragmentShaderColor;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tthis.defines.EDGE_DETECTION_MODE = mode.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the local contrast adaptation factor. Has no effect if the edge\r\n\t * detection mode is set to DEPTH.\r\n\t *\r\n\t * If there is a neighbor edge that has _factor_ times bigger contrast than\r\n\t * the current edge, the edge will be discarded.\r\n\t *\r\n\t * This allows to eliminate spurious crossing edges and is based on the fact\r\n\t * that if there is too much contrast in a direction, the perceptual contrast\r\n\t * in the other neighbors will be hidden.\r\n\t *\r\n\t * @param {Number} factor - The local contrast adaptation factor. Default is 2.0.\r\n\t */\r\n\r\n\tsetLocalContrastAdaptationFactor(factor) {\r\n\r\n\t\tthis.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR = factor.toFixed(\"2\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the edge detection sensitivity.\r\n\t *\r\n\t * A lower value results in more edges being detected at the expense of\r\n\t * performance.\r\n\t *\r\n\t * 0.1 is a reasonable value, and allows to catch most visible edges.\r\n\t * 0.05 is a rather overkill value, that allows to catch 'em all.\r\n\t *\r\n\t * If temporal supersampling is used, 0.2 could be a reasonable value, as low\r\n\t * contrast edges are properly filtered by just 2x.\r\n\t *\r\n\t * @param {Number} threshold - The edge detection sensitivity. Range: [0.05, 0.5].\r\n\t */\r\n\r\n\tsetEdgeDetectionThreshold(threshold) {\r\n\r\n\t\tconst t = Math.min(Math.max(threshold, 0.05), 0.5);\r\n\r\n\t\tthis.defines.EDGE_THRESHOLD = t.toFixed(\"2\");\r\n\t\tthis.defines.DEPTH_THRESHOLD = (t * 0.1).toFixed(\"3\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An enumeration of edge detection modes.\r\n *\r\n * @type {Object}\r\n * @property {Number} DEPTH - Depth-based edge detection.\r\n * @property {Number} LUMA - Luminance-based edge detection.\r\n * @property {Number} COLOR - Chroma-based edge detection.\r\n */\r\n\r\nconst EdgeDetectionMode = {\r\n\r\n\tDEPTH: 0,\r\n\tLUMA: 1,\r\n\tCOLOR: 2\r\n\r\n};\r\n\r\nvar fragmentTemplate = \"#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\nuniform sampler2D inputBuffer;\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}float getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\\n#endif\\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\\n#ifdef ENCODE_OUTPUT\\n#include <encodings_fragment>\\n#endif\\n#include <dithering_fragment>\\n}\";\r\n\r\nvar vertexTemplate = \"uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}\";\r\n\r\n/**\r\n * An effect material for compound shaders.\r\n *\r\n * This material supports dithering.\r\n *\r\n * @implements {Resizable}\r\n */\r\n\r\nclass EffectMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new effect material.\r\n\t *\r\n\t * @param {Map<String, String>} [shaderParts=null] - A collection of shader snippets. See {@link Section}.\r\n\t * @param {Map<String, String>} [defines=null] - A collection of preprocessor macro definitions.\r\n\t * @param {Map<String, Uniform>} [uniforms=null] - A collection of uniforms.\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t * @param {Boolean} [dithering=false] - Whether dithering should be enabled.\r\n\t */\r\n\r\n\tconstructor(shaderParts = null, defines = null, uniforms = null, camera = null, dithering = false) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"EffectMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tDEPTH_PACKING: \"0\",\r\n\t\t\t\tENCODE_OUTPUT: \"1\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tdepthBuffer: new Uniform(null),\r\n\t\t\t\tresolution: new Uniform(new Vector2$1()),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1()),\r\n\t\t\t\tcameraNear: new Uniform(0.3),\r\n\t\t\t\tcameraFar: new Uniform(1000.0),\r\n\t\t\t\taspect: new Uniform(1.0),\r\n\t\t\t\ttime: new Uniform(0.0)\r\n\t\t\t},\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false,\r\n\t\t\tdithering\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tif(shaderParts !== null) {\r\n\r\n\t\t\tthis.setShaderParts(shaderParts);\r\n\r\n\t\t}\r\n\r\n\t\tif(defines !== null) {\r\n\r\n\t\t\tthis.setDefines(defines);\r\n\r\n\t\t}\r\n\r\n\t\tif(uniforms !== null) {\r\n\r\n\t\t\tthis.setUniforms(uniforms);\r\n\r\n\t\t}\r\n\r\n\t\tthis.adoptCameraSettings(camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget depthPacking() {\r\n\r\n\t\treturn Number(this.defines.DEPTH_PACKING);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth packing.\r\n\t *\r\n\t * Use `BasicDepthPacking` or `RGBADepthPacking` if your depth texture\r\n\t * contains packed depth.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset depthPacking(value) {\r\n\r\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the shader parts.\r\n\t *\r\n\t * @param {Map<String, String>} shaderParts - A collection of shader snippets. See {@link Section}.\r\n\t * @return {EffectMaterial} This material.\r\n\t */\r\n\r\n\tsetShaderParts(shaderParts) {\r\n\r\n\t\tthis.fragmentShader = fragmentTemplate\r\n\t\t\t.replace(Section.FRAGMENT_HEAD, shaderParts.get(Section.FRAGMENT_HEAD))\r\n\t\t\t.replace(Section.FRAGMENT_MAIN_UV, shaderParts.get(Section.FRAGMENT_MAIN_UV))\r\n\t\t\t.replace(Section.FRAGMENT_MAIN_IMAGE, shaderParts.get(Section.FRAGMENT_MAIN_IMAGE));\r\n\r\n\t\tthis.vertexShader = vertexTemplate\r\n\t\t\t.replace(Section.VERTEX_HEAD, shaderParts.get(Section.VERTEX_HEAD))\r\n\t\t\t.replace(Section.VERTEX_MAIN_SUPPORT, shaderParts.get(Section.VERTEX_MAIN_SUPPORT));\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the shader macros.\r\n\t *\r\n\t * @param {Map<String, String>} defines - A collection of preprocessor macro definitions.\r\n\t * @return {EffectMaterial} This material.\r\n\t */\r\n\r\n\tsetDefines(defines) {\r\n\r\n\t\tfor(const entry of defines.entries()) {\r\n\r\n\t\t\tthis.defines[entry[0]] = entry[1];\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the shader uniforms.\r\n\t *\r\n\t * @param {Map<String, Uniform>} uniforms - A collection of uniforms.\r\n\t * @return {EffectMaterial} This material.\r\n\t */\r\n\r\n\tsetUniforms(uniforms) {\r\n\r\n\t\tfor(const entry of uniforms.entries()) {\r\n\r\n\t\t\tthis.uniforms[entry[0]] = entry[1];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera = null) {\r\n\r\n\t\tif(camera !== null) {\r\n\r\n\t\t\tthis.uniforms.cameraNear.value = camera.near;\r\n\t\t\tthis.uniforms.cameraFar.value = camera.far;\r\n\r\n\t\t\tif(camera instanceof PerspectiveCamera) {\r\n\r\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst w = Math.max(width, 1);\r\n\t\tconst h = Math.max(height, 1);\r\n\r\n\t\tthis.uniforms.resolution.value.set(w, h);\r\n\t\tthis.uniforms.texelSize.value.set(1.0 / w, 1.0 / h);\r\n\t\tthis.uniforms.aspect.value = w / h;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An enumeration of shader code placeholders used by the {@link EffectPass}.\r\n *\r\n * @type {Object}\r\n * @property {String} FRAGMENT_HEAD - A placeholder for function and variable declarations inside the fragment shader.\r\n * @property {String} FRAGMENT_MAIN_UV - A placeholder for UV transformations inside the fragment shader.\r\n * @property {String} FRAGMENT_MAIN_IMAGE - A placeholder for color calculations inside the fragment shader.\r\n * @property {String} VERTEX_HEAD - A placeholder for function and variable declarations inside the vertex shader.\r\n * @property {String} VERTEX_MAIN_SUPPORT - A placeholder for supporting calculations inside the vertex shader.\r\n */\r\n\r\nconst Section = {\r\n\r\n\tFRAGMENT_HEAD: \"FRAGMENT_HEAD\",\r\n\tFRAGMENT_MAIN_UV: \"FRAGMENT_MAIN_UV\",\r\n\tFRAGMENT_MAIN_IMAGE: \"FRAGMENT_MAIN_IMAGE\",\r\n\tVERTEX_HEAD: \"VERTEX_HEAD\",\r\n\tVERTEX_MAIN_SUPPORT: \"VERTEX_MAIN_SUPPORT\"\r\n\r\n};\r\n\r\nvar fragmentShader$8 = \"#include <common>\\n#include <dithering_pars_fragment>\\nuniform sampler2D inputBuffer;uniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);/*Estimate the probability of occlusion at each pixel by summing samplesalong a ray to the light position.*/for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);\\n#include <dithering_fragment>\\n}\";\r\n\r\n/**\r\n * A crepuscular rays shader material.\r\n *\r\n * This material supports dithering.\r\n *\r\n * References:\r\n *\r\n * Thibaut Despoulain, 2012:\r\n *  [(WebGL) Volumetric Light Approximation in Three.js](\r\n *  http://bkcore.com/blog/3d/webgl-three-js-volumetric-light-godrays.html)\r\n *\r\n * Nvidia, GPU Gems 3, 2008:\r\n *  [Chapter 13. Volumetric Light Scattering as a Post-Process](\r\n *  https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch13.html)\r\n *\r\n * @todo Remove dithering code from fragment shader.\r\n */\r\n\r\nclass GodRaysMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new god rays material.\r\n\t *\r\n\t * @param {Vector2} lightPosition - The light position in screen space.\r\n\t */\r\n\r\n\tconstructor(lightPosition) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"GodRaysMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tSAMPLES_INT: \"60\",\r\n\t\t\t\tSAMPLES_FLOAT: \"60.0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tlightPosition: new Uniform(lightPosition),\r\n\t\t\t\tdensity: new Uniform(1.0),\r\n\t\t\t\tdecay: new Uniform(1.0),\r\n\t\t\t\tweight: new Uniform(1.0),\r\n\t\t\t\texposure: new Uniform(1.0),\r\n\t\t\t\tclampMax: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$8,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget samples() {\r\n\r\n\t\treturn Number(this.defines.SAMPLES_INT);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset samples(value) {\r\n\r\n\t\tconst s = Math.floor(value);\r\n\r\n\t\tthis.defines.SAMPLES_INT = s.toFixed(0);\r\n\t\tthis.defines.SAMPLES_FLOAT = s.toFixed(1);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$9 = \"#include <common>\\nuniform sampler2D inputBuffer;\\n#ifdef RANGE\\nuniform vec2 range;\\n#elif defined(THRESHOLD)\\nuniform float threshold;uniform float smoothing;\\n#endif\\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);\\n#ifdef RANGE\\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\\n#elif defined(THRESHOLD)\\nl=smoothstep(threshold,threshold+smoothing,l);\\n#endif\\n#ifdef COLOR\\ngl_FragColor=vec4(texel.rgb*l,l);\\n#else\\ngl_FragColor=vec4(l);\\n#endif\\n}\";\r\n\r\n/**\r\n * A luminance shader material.\r\n *\r\n * This shader produces a greyscale luminance map that describes the absolute\r\n * amount of light emitted by a scene. It can also be configured to output\r\n * colours that are scaled with their respective luminance value. Additionally,\r\n * a range may be provided to mask out undesired texels.\r\n *\r\n * The alpha channel always contains the luminance value.\r\n *\r\n * On luminance coefficients:\r\n *  http://www.poynton.com/notes/colour_and_gamma/ColorFAQ.html#RTFToC9\r\n *\r\n * Coefficients for different colour spaces:\r\n *  https://hsto.org/getpro/habr/post_images/2ab/69d/084/2ab69d084f9a597e032624bcd74d57a7.png\r\n *\r\n * Luminance range reference:\r\n *  https://cycling74.com/2007/05/23/your-first-shader/#.Vty9FfkrL4Z\r\n */\r\n\r\nclass LuminanceMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new luminance material.\r\n\t *\r\n\t * @param {Boolean} [colorOutput=false] - Defines whether the shader should output colors scaled with their luminance value.\r\n\t * @param {Vector2} [luminanceRange] - If provided, the shader will mask out texels that aren't in the specified luminance range.\r\n\t */\r\n\r\n\tconstructor(colorOutput = false, luminanceRange = null) {\r\n\r\n\t\tconst useRange = (luminanceRange !== null);\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"LuminanceMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tthreshold: new Uniform(0.0),\r\n\t\t\t\tsmoothing: new Uniform(1.0),\r\n\t\t\t\trange: new Uniform(useRange ? luminanceRange : new Vector2$1())\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$9,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.colorOutput = colorOutput;\r\n\t\tthis.useThreshold = true;\r\n\t\tthis.useRange = useRange;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The luminance threshold.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget threshold() {\r\n\r\n\t\treturn this.uniforms.threshold.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the luminance threshold.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset threshold(value) {\r\n\r\n\t\tthis.uniforms.threshold.value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The luminance threshold smoothing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget smoothing() {\r\n\r\n\t\treturn this.uniforms.smoothing.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the luminance threshold smoothing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset smoothing(value) {\r\n\r\n\t\tthis.uniforms.smoothing.value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the luminance threshold is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget useThreshold() {\r\n\r\n\t\treturn (this.defines.THRESHOLD !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables the luminance threshold.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset useThreshold(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tthis.defines.THRESHOLD = \"1\";\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdelete this.defines.THRESHOLD;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether color output is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget colorOutput() {\r\n\r\n\t\treturn (this.defines.COLOR !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables color output.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset colorOutput(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tthis.defines.COLOR = \"1\";\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdelete this.defines.COLOR;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables color output.\r\n\t *\r\n\t * @deprecated Use colorOutput instead.\r\n\t * @param {Boolean} enabled - Whether color output should be enabled.\r\n\t */\r\n\r\n\tsetColorOutputEnabled(enabled) {\r\n\r\n\t\tthis.colorOutput = enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether luminance masking is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget useRange() {\r\n\r\n\t\treturn (this.defines.RANGE !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables luminance masking.\r\n\t *\r\n\t * If enabled, the threshold will be ignored.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset useRange(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tthis.defines.RANGE = \"1\";\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdelete this.defines.RANGE;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether luminance masking is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Use useRange instead.\r\n\t */\r\n\r\n\tget luminanceRange() {\r\n\r\n\t\treturn this.useRange;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables luminance masking.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Use useRange instead.\r\n\t */\r\n\r\n\tset luminanceRange(value) {\r\n\r\n\t\tthis.useRange = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables the luminance mask.\r\n\t *\r\n\t * @deprecated Use luminanceRange instead.\r\n\t * @param {Boolean} enabled - Whether the luminance mask should be enabled.\r\n\t */\r\n\r\n\tsetLuminanceRangeEnabled(enabled) {\r\n\r\n\t\tthis.useRange = enabled;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$a = \"uniform sampler2D maskTexture;uniform sampler2D inputBuffer;\\n#if MASK_FUNCTION != 0\\nuniform float strength;\\n#endif\\nvarying vec2 vUv;void main(){\\n#if COLOR_CHANNEL == 0\\nfloat mask=texture2D(maskTexture,vUv).r;\\n#elif COLOR_CHANNEL == 1\\nfloat mask=texture2D(maskTexture,vUv).g;\\n#elif COLOR_CHANNEL == 2\\nfloat mask=texture2D(maskTexture,vUv).b;\\n#else\\nfloat mask=texture2D(maskTexture,vUv).a;\\n#endif\\n#if MASK_FUNCTION == 0\\n#ifdef INVERTED\\nif(mask>0.0){discard;}\\n#else\\nif(mask==0.0){discard;}\\n#endif\\n#else\\nmask=clamp(mask*strength,0.0,1.0);\\n#ifdef INVERTED\\nmask=(1.0-mask);\\n#endif\\n#if MASK_FUNCTION == 1\\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\\n#else\\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\\n#endif\\n#endif\\n}\";\r\n\r\n/**\r\n * A mask shader material.\r\n *\r\n * This material applies a mask texture to a buffer.\r\n */\r\n\r\nclass MaskMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new mask material.\r\n\t *\r\n\t * @param {Texture} [maskTexture] - The mask texture.\r\n\t */\r\n\r\n\tconstructor(maskTexture = null) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"MaskMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tmaskTexture: new Uniform(maskTexture),\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tstrength: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$a,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.colorChannel = ColorChannel.RED;\r\n\t\tthis.maskFunction = MaskFunction.DISCARD;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the mask texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tset maskTexture(value) {\r\n\r\n\t\tthis.uniforms.maskTexture.value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the color channel to use for masking.\r\n\t *\r\n\t * The default channel is `RED`.\r\n\t *\r\n\t * @type {ColorChannel}\r\n\t */\r\n\r\n\tset colorChannel(value) {\r\n\r\n\t\tthis.defines.COLOR_CHANNEL = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the masking technique.\r\n\t *\r\n\t * The default function is `DISCARD`.\r\n\t *\r\n\t * @type {MaskFunction}\r\n\t */\r\n\r\n\tset maskFunction(value) {\r\n\r\n\t\tthis.defines.MASK_FUNCTION = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the masking is inverted.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget inverted() {\r\n\r\n\t\treturn (this.defines.INVERTED !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the masking should be inverted.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset inverted(value) {\r\n\r\n\t\tif(this.inverted && !value) {\r\n\r\n\t\t\tdelete this.defines.INVERTED;\r\n\r\n\t\t} else if(value) {\r\n\r\n\t\t\tthis.defines.INVERTED = \"1\";\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current mask strength.\r\n\t *\r\n\t * Individual mask values will be clamped to [0.0, 1.0].\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget strength() {\r\n\r\n\t\treturn this.uniforms.strength.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the strength of the mask.\r\n\t *\r\n\t * Has no effect when the mask function is set to `DISCARD`.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset strength(value) {\r\n\r\n\t\tthis.uniforms.strength.value = value;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A mask function enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} DISCARD - Discards elements when the respective mask value is zero.\r\n * @property {Number} MULTIPLY - Multiplies the input buffer with the mask texture.\r\n * @property {Number} MULTIPLY_RGB_SET_ALPHA - Multiplies the input RGB values with the mask and sets alpha to the mask value.\r\n */\r\n\r\nconst MaskFunction = {\r\n\r\n\tDISCARD: 0,\r\n\tMULTIPLY: 1,\r\n\tMULTIPLY_RGB_SET_ALPHA: 2\r\n\r\n};\r\n\r\nvar fragmentShader$b = \"uniform sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)? vec2(d,0.0): vec2(0.0,d);}\";\r\n\r\nvar vertexShader$5 = \"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}\";\r\n\r\n/**\r\n * An outline shader material.\r\n */\r\n\r\nclass OutlineMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new outline material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The screen texel size.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2$1()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"OutlineMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1())\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$b,\r\n\t\t\tvertexShader: vertexShader$5,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.setTexelSize(texelSize.x, texelSize.y);\r\n\r\n\t\t// @todo Added for backward compatibility.\r\n\t\tthis.uniforms.maskTexture = this.uniforms.inputBuffer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An outline shader material.\r\n *\r\n * @deprecated Use OutlineMaterial instead.\r\n */\r\n\r\nconst OutlineEdgesMaterial = OutlineMaterial;\r\n\r\nvar fragmentShader$c = \"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\\n#if __VERSION__ < 300\\n#define round(v) floor(v + 0.5)\\n#endif\\nuniform sampler2D inputBuffer;uniform sampler2D areaTexture;uniform sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;/***Moves values to a target vector based on a given conditional vector.*/void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}/***Allows to decode two binary values from a bilinear-filtered access.**Bilinear access for fetching 'e' have a 0.25 offset,and we are interested*in the R and G edges:**+---G---+-------+*|x o R   x|*+-------+-------+**Then,if one of these edge is enabled:*Red:(0.75*X+0.25*1)=>0.25 or 1.0*Green:(0.75*1+0.25*X)=>0.75 or 1.0**This function will unpack the values(mad+mul+round):*wolframalpha.com: round(x*abs(5*x-5*0.75))plot 0 to 1*/vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}/***Diagonal pattern searches.*/vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}/***Calculates the area corresponding to a certain diagonal distance and crossing*edges 'e'.*/vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}/***Searches for diagonal patterns and returns the corresponding weights.*/vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}/***Determines how much length should be added in the last step of the searches.**Takes the bilinearly interpolated edge(see @PSEUDO_GATHER4),and adds 0,1*or 2 depending on which edges and crossing edges are active.*/float searchLength(const in vec2 e,const in float offset){/*The texture is flipped vertically,with left and right cases taking halfof the space horizontally.*/vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}/***Horizontal search for the second pass.*/float searchXLeft(in vec2 texCoord,const in float end){/*@PSEUDO_GATHER4This texCoord has been offset by(-0.25,-0.125)in the vertex shader tosample between edges,thus fetching four edges in a row.Sampling with different offsets in each direction allows to disambiguatewhich edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}/***Vertical search for the second pass.*/float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}/***Determines the areas at each side of the current edge.*/vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}/***Corner detection.*/void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\\n#if !defined(DISABLE_CORNER_DETECTION)\\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\\n#endif\\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\\n#if !defined(DISABLE_CORNER_DETECTION)\\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\\n#endif\\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\\n#if !defined(DISABLE_DIAG_DETECTION)\\n/*Diagonals have both north and west edges,so searching for them in one ofthe boundaries is enough.*/weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\\n#endif\\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;/*Now fetch the left crossing edges,two at a time using bilinearfiltering. Sampling at-0.25(see @CROSSING_OFFSET)enables to discern whatvalue each edge has.*/float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;/*Translate distances to pixel units for better interleave arithmetic andmemory accesses.*/d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\\n#if !defined(DISABLE_DIAG_DETECTION)\\n}else{e.r=0.0;}\\n#endif\\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}\";\r\n\r\nvar vertexShader$6 = \"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}\";\r\n\r\n/**\r\n * Subpixel Morphological Antialiasing.\r\n *\r\n * This material computes weights for detected edges.\r\n */\r\n\r\nclass SMAAWeightsMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new SMAA weights material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\r\n\t * @param {Vector2} [resolution] - The resolution.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2$1(), resolution = new Vector2$1()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"SMAAWeightsMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\r\n\t\t\t\t// Configurable settings:\r\n\t\t\t\tMAX_SEARCH_STEPS_INT: \"16\",\r\n\t\t\t\tMAX_SEARCH_STEPS_FLOAT: \"16.0\",\r\n\t\t\t\tMAX_SEARCH_STEPS_DIAG_INT: \"8\",\r\n\t\t\t\tMAX_SEARCH_STEPS_DIAG_FLOAT: \"8.0\",\r\n\t\t\t\tCORNER_ROUNDING: \"25\",\r\n\t\t\t\tCORNER_ROUNDING_NORM: \"0.25\",\r\n\r\n\t\t\t\t// Non-configurable settings:\r\n\t\t\t\tAREATEX_MAX_DISTANCE: \"16.0\",\r\n\t\t\t\tAREATEX_MAX_DISTANCE_DIAG: \"20.0\",\r\n\t\t\t\tAREATEX_PIXEL_SIZE: \"(1.0 / vec2(160.0, 560.0))\",\r\n\t\t\t\tAREATEX_SUBTEX_SIZE: \"(1.0 / 7.0)\",\r\n\t\t\t\tSEARCHTEX_SIZE: \"vec2(66.0, 33.0)\",\r\n\t\t\t\tSEARCHTEX_PACKED_SIZE: \"vec2(64.0, 16.0)\"\r\n\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tareaTexture: new Uniform(null),\r\n\t\t\t\tsearchTexture: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(texelSize),\r\n\t\t\t\tresolution: new Uniform(resolution)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$c,\r\n\t\t\tvertexShader: vertexShader$6,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the maximum amount of steps performed in the horizontal/vertical\r\n\t * pattern searches, at each side of the pixel.\r\n\t *\r\n\t * In number of pixels, it's actually the double. So the maximum line length\r\n\t * perfectly handled by, for example 16, is 64 (perfectly means that longer\r\n\t * lines won't look as good, but are still antialiased).\r\n\t *\r\n\t * @param {Number} steps - The search steps. Range: [0, 112].\r\n\t */\r\n\r\n\tsetOrthogonalSearchSteps(steps) {\r\n\r\n\t\tconst s = Math.min(Math.max(steps, 0), 112);\r\n\r\n\t\tthis.defines.MAX_SEARCH_STEPS_INT = s.toFixed(\"0\");\r\n\t\tthis.defines.MAX_SEARCH_STEPS_FLOAT = s.toFixed(\"1\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specifies the maximum steps performed in the diagonal pattern searches, at\r\n\t * each side of the pixel. This search jumps one pixel at time.\r\n\t *\r\n\t * On high-end machines this search is cheap (between 0.8x and 0.9x slower for\r\n\t * 16 steps), but it can have a significant impact on older machines.\r\n\t *\r\n\t * @param {Number} steps - The search steps. Range: [0, 20].\r\n\t */\r\n\r\n\tsetDiagonalSearchSteps(steps) {\r\n\r\n\t\tconst s = Math.min(Math.max(steps, 0), 20);\r\n\r\n\t\tthis.defines.MAX_SEARCH_STEPS_DIAG_INT = s.toFixed(\"0\");\r\n\t\tthis.defines.MAX_SEARCH_STEPS_DIAG_FLOAT = s.toFixed(\"1\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specifies how much sharp corners will be rounded.\r\n\t *\r\n\t * @param {Number} rounding - The corner rounding amount. Range: [0, 100].\r\n\t */\r\n\r\n\tsetCornerRounding(rounding) {\r\n\r\n\t\tconst r = Math.min(Math.max(rounding, 0), 100);\r\n\r\n\t\tthis.defines.CORNER_ROUNDING = r.toFixed(\"4\");\r\n\t\tthis.defines.CORNER_ROUNDING_NORM = (r / 100.0).toFixed(\"4\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether diagonal pattern detection is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget diagonalDetection() {\r\n\r\n\t\treturn (this.defines.DISABLE_DIAG_DETECTION === undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables diagonal pattern detection.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset diagonalDetection(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tdelete this.defines.DISABLE_DIAG_DETECTION;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.DISABLE_DIAG_DETECTION = \"1\";\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether corner rounding is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget cornerRounding() {\r\n\r\n\t\treturn (this.defines.DISABLE_CORNER_DETECTION === undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables corner rounding.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset cornerRounding(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tdelete this.defines.DISABLE_CORNER_DETECTION;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.DISABLE_CORNER_DETECTION = \"1\";\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$d = \"#include <common>\\n#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D normalDepthBuffer;\\n#else\\nuniform mediump sampler2D normalDepthBuffer;\\n#endif\\n#ifndef NORMAL_DEPTH\\nuniform sampler2D normalBuffer;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(normalDepthBuffer,uv));\\n#else\\nreturn texture2D(normalDepthBuffer,uv).r;\\n#endif\\n}\\n#endif\\nuniform sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float minRadiusScale;uniform float intensity;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\\n#endif\\n}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];vec4 clipPosition=vec4((vec3(screenPosition,depth)-0.5)*2.0,1.0);clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){\\n#ifdef DISTANCE_SCALING\\nfloat radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;\\n#else\\nfloat radius=RADIUS;\\n#endif\\nfloat noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float inv_samples=1.0/SAMPLES_FLOAT;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*inv_samples;float angle=alpha*rings+baseAngle;vec2 coord=alpha*radius*vec2(cos(angle),sin(angle))*texelSize+uv;if(coord.s<0.0||coord.s>1.0||coord.t<0.0||coord.t>1.0){continue;}\\n#ifdef NORMAL_DEPTH\\nfloat sampleDepth=texture2D(normalDepthBuffer,coord).a;\\n#else\\nfloat sampleDepth=readDepth(coord);\\n#endif\\nfloat viewZ=getViewZ(sampleDepth);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearSampleDepth=sampleDepth;\\n#endif\\nfloat proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coord,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){\\n#ifdef NORMAL_DEPTH\\nvec4 normalDepth=texture2D(normalDepthBuffer,vUv);\\n#else\\nvec4 normalDepth=vec4(texture2D(normalBuffer,vUv).rgb,readDepth(vUv));\\n#endif\\nfloat ao=1.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nif(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao-=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,1.0,d);ao=clamp(pow(ao,abs(intensity)),0.0,1.0);}gl_FragColor.r=ao;}\";\r\n\r\nvar vertexShader$7 = \"uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}\";\r\n\r\n/**\r\n * A Screen Space Ambient Occlusion (SSAO) shader material.\r\n */\r\n\r\nclass SSAOMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new SSAO material.\r\n\t *\r\n\t * @param {Camera} camera - A camera.\r\n\t */\r\n\r\n\tconstructor(camera) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"SSAOMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tSAMPLES_INT: \"0\",\r\n\t\t\t\tSAMPLES_FLOAT: \"0.0\",\r\n\t\t\t\tSPIRAL_TURNS: \"0.0\",\r\n\t\t\t\tRADIUS: \"1.0\",\r\n\t\t\t\tRADIUS_SQ: \"1.0\",\r\n\t\t\t\tDISTANCE_SCALING: \"1\",\r\n\t\t\t\tDEPTH_PACKING: \"0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tnormalBuffer: new Uniform(null),\r\n\t\t\t\tnormalDepthBuffer: new Uniform(null),\r\n\t\t\t\tnoiseTexture: new Uniform(null),\r\n\r\n\t\t\t\tinverseProjectionMatrix: new Uniform(new Matrix4()),\r\n\t\t\t\tprojectionMatrix: new Uniform(new Matrix4()),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1()),\r\n\t\t\t\tcameraNear: new Uniform(0.0),\r\n\t\t\t\tcameraFar: new Uniform(0.0),\r\n\r\n\t\t\t\tdistanceCutoff: new Uniform(new Vector2$1()),\r\n\t\t\t\tproximityCutoff: new Uniform(new Vector2$1()),\r\n\t\t\t\tnoiseScale: new Uniform(new Vector2$1()),\r\n\t\t\t\tminRadiusScale: new Uniform(0.33),\r\n\t\t\t\tintensity: new Uniform(1.0),\r\n\t\t\t\tfade: new Uniform(0.01),\r\n\t\t\t\tbias: new Uniform(0.0)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$d,\r\n\t\t\tvertexShader: vertexShader$7,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.adoptCameraSettings(camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The depth packing of the source depth buffer.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget depthPacking() {\r\n\r\n\t\treturn Number(this.defines.DEPTH_PACKING);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset depthPacking(value) {\r\n\r\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera = null) {\r\n\r\n\t\tif(camera !== null) {\r\n\r\n\t\t\tconst uniforms = this.uniforms;\r\n\r\n\t\t\tuniforms.cameraNear.value = camera.near;\r\n\t\t\tuniforms.cameraFar.value = camera.far;\r\n\r\n\t\t\tif(camera instanceof PerspectiveCamera) {\r\n\r\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An auto sizing constant.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst AUTO_SIZE = -1;\r\n\r\n/**\r\n * A resizer that can be used to store a base and a target resolution.\r\n *\r\n * The attached resizeable will be updated with the base resolution when the\r\n * target resolution changes. The new calculated resolution can then be\r\n * retrieved via {@link Resizer.width} and {@link Resizer.height}.\r\n */\r\n\r\nclass Resizer {\r\n\r\n\t/**\r\n\t * Constructs a new resizer.\r\n\t *\r\n\t * @param {Resizable} resizeable - A resizable object.\r\n\t * @param {Number} [width=Resizer.AUTO_SIZE] - The width.\r\n\t * @param {Number} [height=Resizer.AUTO_SIZE] - The height.\r\n\t * @param {Number} [scale=1.0] - An alternative resolution scale.\r\n\t */\r\n\r\n\tconstructor(resizable, width = AUTO_SIZE, height = AUTO_SIZE, scale = 1.0) {\r\n\r\n\t\t/**\r\n\t\t * A resizable object.\r\n\t\t *\r\n\t\t * @type {Resizable}\r\n\t\t */\r\n\r\n\t\tthis.resizable = resizable;\r\n\r\n\t\t/**\r\n\t\t * The base size.\r\n\t\t *\r\n\t\t * This size will be passed to the resizable object every time the target\r\n\t\t * width, height or scale is changed.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t */\r\n\r\n\t\tthis.base = new Vector2$1(1, 1);\r\n\r\n\t\t/**\r\n\t\t * The target size.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.target = new Vector2$1(width, height);\r\n\r\n\t\t/**\r\n\t\t * A scale.\r\n\t\t *\r\n\t\t * If both the width and the height are set to {@link Resizer.AUTO_SIZE},\r\n\t\t * they will be scaled uniformly using this scalar.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.s = scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current resolution scale.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget scale() {\r\n\r\n\t\treturn this.s;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * Also sets the width and height to {@link Resizer.AUTO_SIZE}.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset scale(value) {\r\n\r\n\t\tthis.s = value;\r\n\r\n\t\tthis.target.x = AUTO_SIZE;\r\n\t\tthis.target.y = AUTO_SIZE;\r\n\r\n\t\tthis.resizable.setSize(this.base.x, this.base.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The calculated width.\r\n\t *\r\n\t * If both the width and the height are set to {@link Resizer.AUTO_SIZE}, the\r\n\t * base width will be returned.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget width() {\r\n\r\n\t\tconst base = this.base;\r\n\t\tconst target = this.target;\r\n\r\n\t\tlet result;\r\n\r\n\t\tif(target.x !== AUTO_SIZE) {\r\n\r\n\t\t\tresult = target.x;\r\n\r\n\t\t} else if(target.y !== AUTO_SIZE) {\r\n\r\n\t\t\tresult = Math.round(target.y * (base.x / base.y));\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult = Math.round(base.x * this.s);\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the target width.\r\n\t *\r\n\t * Use {@link Resizer.AUTO_SIZE} to automatically calculate the width based\r\n\t * on the height and the original aspect ratio.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset width(value) {\r\n\r\n\t\tthis.target.x = value;\r\n\t\tthis.resizable.setSize(this.base.x, this.base.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The calculated height.\r\n\t *\r\n\t * If both the width and the height are set to {@link Resizer.AUTO_SIZE}, the\r\n\t * base height will be returned.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget height() {\r\n\r\n\t\tconst base = this.base;\r\n\t\tconst target = this.target;\r\n\r\n\t\tlet result;\r\n\r\n\t\tif(target.y !== AUTO_SIZE) {\r\n\r\n\t\t\tresult = target.y;\r\n\r\n\t\t} else if(target.x !== AUTO_SIZE) {\r\n\r\n\t\t\tresult = Math.round(target.x / (base.x / base.y));\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult = Math.round(base.y * this.s);\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the target height.\r\n\t *\r\n\t * Use {@link Resizer.AUTO_SIZE} to automatically calculate the height based\r\n\t * on the width and the original aspect ratio.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset height(value) {\r\n\r\n\t\tthis.target.y = value;\r\n\t\tthis.resizable.setSize(this.base.x, this.base.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * An auto sizing constant.\r\n\t *\r\n\t * Can be used to automatically calculate the width or height based on the\r\n\t * original aspect ratio.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tstatic get AUTO_SIZE() {\r\n\r\n\t\treturn AUTO_SIZE;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A dummy camera\r\n *\r\n * @type {Camera}\r\n * @private\r\n */\r\n\r\nconst dummyCamera = new Camera();\r\n\r\n/**\r\n * Shared fullscreen geometry.\r\n *\r\n * @type {BufferGeometry}\r\n * @private\r\n */\r\n\r\nlet geometry = null;\r\n\r\n/**\r\n * Returns a shared fullscreen triangle.\r\n *\r\n * The size of the screen is 2x2 units (NDC). A triangle that fills the screen\r\n * needs to be 4 units wide and 4 units tall.\r\n *\r\n * @private\r\n * @return {BufferGeometry} The fullscreen geometry.\r\n */\r\n\r\nfunction getFullscreenTriangle() {\r\n\r\n\tif(geometry === null) {\r\n\r\n\t\tconst vertices = new Float32Array([-1, -1, 0, 3, -1, 0, -1, 3, 0]);\r\n\t\tconst uvs = new Float32Array([0, 0, 2, 0, 0, 2]);\r\n\t\tgeometry = new BufferGeometry();\r\n\r\n\t\t// Added for backward compatibility (setAttribute was added in three r110).\r\n\t\tif(geometry.setAttribute !== undefined) {\r\n\r\n\t\t\tgeometry.setAttribute(\"position\", new BufferAttribute(vertices, 3));\r\n\t\t\tgeometry.setAttribute(\"uv\", new BufferAttribute(uvs, 2));\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgeometry.addAttribute(\"position\", new BufferAttribute(vertices, 3));\r\n\t\t\tgeometry.addAttribute(\"uv\", new BufferAttribute(uvs, 2));\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n}\r\n\r\n/**\r\n * An abstract pass.\r\n *\r\n * Passes that do not rely on the depth buffer should explicitly disable the\r\n * depth test and depth write flags of their fullscreen shader material.\r\n *\r\n * Fullscreen passes use a shared fullscreen triangle:\r\n * https://michaldrobot.com/2014/04/01/gcn-execution-patterns-in-full-screen-passes/\r\n *\r\n * @implements {Initializable}\r\n * @implements {Resizable}\r\n * @implements {Disposable}\r\n */\r\n\r\nclass Pass {\r\n\r\n\t/**\r\n\t * Constructs a new pass.\r\n\t *\r\n\t * @param {String} [name] - The name of this pass. Does not have to be unique.\r\n\t * @param {Scene} [scene] - The scene to render. The default scene contains a single mesh that fills the screen.\r\n\t * @param {Camera} [camera] - A camera. Fullscreen effect passes don't require a camera.\r\n\t */\r\n\r\n\tconstructor(name = \"Pass\", scene = new Scene(), camera = dummyCamera) {\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t */\r\n\r\n\t\tthis.name = name;\r\n\r\n\t\t/**\r\n\t\t * The scene to render.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @protected\r\n\t\t */\r\n\r\n\t\tthis.scene = scene;\r\n\r\n\t\t/**\r\n\t\t * The camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @protected\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * A mesh that fills the screen.\r\n\t\t *\r\n\t\t * @type {Mesh}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.screen = null;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether this pass should render to texture.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.rtt = true;\r\n\r\n\t\t/**\r\n\t\t * Only relevant for subclassing.\r\n\t\t *\r\n\t\t * Indicates whether the {@link EffectComposer} should swap the frame\r\n\t\t * buffers after this pass has finished rendering.\r\n\t\t *\r\n\t\t * Set this to `false` if this pass doesn't render to the output buffer or\r\n\t\t * the screen. Otherwise, the contents of the input buffer will be lost.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * Only relevant for subclassing.\r\n\t\t *\r\n\t\t * Indicates whether the {@link EffectComposer} should prepare a depth\r\n\t\t * texture for this pass.\r\n\t\t *\r\n\t\t * Set this to `true` if this pass relies on depth information from a\r\n\t\t * preceding {@link RenderPass}.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.needsDepthTexture = false;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether this pass should be executed.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.enabled = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether this pass should render to screen.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget renderToScreen() {\r\n\r\n\t\treturn !this.rtt;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render to screen flag.\r\n\t *\r\n\t * If the flag is changed to a different value, the fullscreen material will\r\n\t * be updated as well.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset renderToScreen(value) {\r\n\r\n\t\tif(this.rtt === value) {\r\n\r\n\t\t\tconst material = this.getFullscreenMaterial();\r\n\r\n\t\t\tif(material !== null) {\r\n\r\n\t\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.rtt = !value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current fullscreen material.\r\n\t *\r\n\t * @return {Material} The current fullscreen material, or null if there is none.\r\n\t */\r\n\r\n\tgetFullscreenMaterial() {\r\n\r\n\t\treturn (this.screen !== null) ? this.screen.material : null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the fullscreen material.\r\n\t *\r\n\t * The material will be assigned to a mesh that fills the screen. The mesh\r\n\t * will be created once a material is assigned via this method.\r\n\t *\r\n\t * @protected\r\n\t * @param {Material} material - A fullscreen material.\r\n\t */\r\n\r\n\tsetFullscreenMaterial(material) {\r\n\r\n\t\tlet screen = this.screen;\r\n\r\n\t\tif(screen !== null) {\r\n\r\n\t\t\tscreen.material = material;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tscreen = new Mesh(getFullscreenTriangle(), material);\r\n\t\t\tscreen.frustumCulled = false;\r\n\r\n\t\t\tif(this.scene === null) {\r\n\r\n\t\t\t\tthis.scene = new Scene();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.scene.add(screen);\r\n\t\t\tthis.screen = screen;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current depth texture.\r\n\t *\r\n\t * @return {Texture} The current depth texture, or null if there is none.\r\n\t */\r\n\r\n\tgetDepthTexture() {\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * This method will be called automatically by the {@link EffectComposer}.\r\n\t *\r\n\t * You may override this method if your pass relies on the depth information\r\n\t * of a preceding {@link RenderPass}.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * This is an abstract method that must be overridden.\r\n\t *\r\n\t * @abstract\r\n\t * @throws {Error} An error is thrown if the method is not overridden.\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tthrow new Error(\"Render method not implemented!\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * You may override this method in case you want to be informed about the size\r\n\t * of the main frame buffer.\r\n\t *\r\n\t * The {@link EffectComposer} calls this method before this pass is\r\n\t * initialized and every time its own size is updated.\r\n\t *\r\n\t * @param {Number} width - The renderer's width.\r\n\t * @param {Number} height - The renderer's height.\r\n\t * @example this.myRenderTarget.setSize(width, height);\r\n\t */\r\n\r\n\tsetSize(width, height) {}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * By overriding this method you gain access to the renderer. You'll also be\r\n\t * able to configure your custom render targets to use the appropriate format\r\n\t * (RGB or RGBA).\r\n\t *\r\n\t * The provided renderer can be used to warm up special off-screen render\r\n\t * targets by performing a preliminary render operation.\r\n\t *\r\n\t * The {@link EffectComposer} calls this method when this pass is added to its\r\n\t * queue, but not before its size has been set.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t * @example if(!alpha && frameBufferType === UnsignedByteType) { this.myRenderTarget.texture.format = RGBFormat; }\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {}\r\n\r\n\t/**\r\n\t * Performs a shallow search for disposable properties and deletes them. The\r\n\t * pass will be inoperative after this method was called!\r\n\t *\r\n\t * The {@link EffectComposer} calls this method when it is being destroyed.\r\n\t * You may, however, use it independently to free memory when you are certain\r\n\t * that you don't need this pass anymore.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\r\n\t\tif(material !== null) {\r\n\r\n\t\t\tmaterial.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tfor(const key of Object.keys(this)) {\r\n\r\n\t\t\tif(this[key] !== null && typeof this[key].dispose === \"function\") {\r\n\r\n\t\t\t\t/** @ignore */\r\n\t\t\t\tthis[key].dispose();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An efficient, incremental blur pass.\r\n */\r\n\r\nclass BlurPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new blur pass.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.resolutionScale=0.5] - Deprecated. Adjust the height or width instead for consistent results.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The blur render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The blur render height.\r\n\t * @param {KernelSize} [options.kernelSize=KernelSize.LARGE] - The blur kernel size.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tresolutionScale = 0.5,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\tkernelSize = KernelSize.LARGE\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"BlurPass\");\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetA = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTargetA.texture.name = \"Blur.Target.A\";\r\n\r\n\t\t/**\r\n\t\t * A second render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetB = this.renderTargetA.clone();\r\n\t\tthis.renderTargetB.texture.name = \"Blur.Target.B\";\r\n\r\n\t\t/**\r\n\t\t * The render resolution.\r\n\t\t *\r\n\t\t * It's recommended to set the height or the width to an absolute value for\r\n\t\t * consistent results across different devices and resolutions.\r\n\t\t *\r\n\t\t * @type {Resizer}\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Resizer(this, width, height, resolutionScale);\r\n\r\n\t\t/**\r\n\t\t * A convolution shader material.\r\n\t\t *\r\n\t\t * @type {ConvolutionMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.convolutionMaterial = new ConvolutionMaterial();\r\n\r\n\t\t/**\r\n\t\t * A convolution shader material that uses dithering.\r\n\t\t *\r\n\t\t * @type {ConvolutionMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.ditheredConvolutionMaterial = new ConvolutionMaterial();\r\n\t\tthis.ditheredConvolutionMaterial.dithering = true;\r\n\r\n\t\t/**\r\n\t\t * Whether the blurred result should also be dithered using noise.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t\t */\r\n\r\n\t\tthis.dithering = false;\r\n\r\n\t\tthis.kernelSize = kernelSize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current width of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.resolution.width;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render width.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tset width(value) {\r\n\r\n\t\tthis.resolution.width = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current height of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.resolution.height;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render height.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tset height(value) {\r\n\r\n\t\tthis.resolution.height = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current blur scale.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget scale() {\r\n\r\n\t\treturn this.convolutionMaterial.uniforms.scale.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the blur scale.\r\n\t *\r\n\t * This value influences the overall blur strength and should not be greater\r\n\t * than 1. For larger blurs please increase the {@link kernelSize}!\r\n\t *\r\n\t * Note that the blur strength is closely tied to the resolution. For a smooth\r\n\t * transition from no blur to full blur, set the width or the height to a high\r\n\t * enough value.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset scale(value) {\r\n\r\n\t\tthis.convolutionMaterial.uniforms.scale.value = value;\r\n\t\tthis.ditheredConvolutionMaterial.uniforms.scale.value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t */\r\n\r\n\tget kernelSize() {\r\n\r\n\t\treturn this.convolutionMaterial.kernelSize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the kernel size.\r\n\t *\r\n\t * Larger kernels require more processing power but scale well with larger\r\n\t * render resolutions.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t */\r\n\r\n\tset kernelSize(value) {\r\n\r\n\t\tthis.convolutionMaterial.kernelSize = value;\r\n\t\tthis.ditheredConvolutionMaterial.kernelSize = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolution.scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolution.scale = scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Blurs the input buffer and writes the result to the output buffer. The\r\n\t * input buffer remains intact, unless it's also the output buffer.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\r\n\t\tconst renderTargetA = this.renderTargetA;\r\n\t\tconst renderTargetB = this.renderTargetB;\r\n\r\n\t\tlet material = this.convolutionMaterial;\r\n\t\tlet uniforms = material.uniforms;\r\n\t\tconst kernel = material.getKernel();\r\n\r\n\t\tlet lastRT = inputBuffer;\r\n\t\tlet destRT;\r\n\t\tlet i, l;\r\n\r\n\t\tthis.setFullscreenMaterial(material);\r\n\r\n\t\t// Apply the multi-pass blur.\r\n\t\tfor(i = 0, l = kernel.length - 1; i < l; ++i) {\r\n\r\n\t\t\t// Alternate between targets.\r\n\t\t\tdestRT = ((i & 1) === 0) ? renderTargetA : renderTargetB;\r\n\r\n\t\t\tuniforms.kernel.value = kernel[i];\r\n\t\t\tuniforms.inputBuffer.value = lastRT.texture;\r\n\t\t\trenderer.setRenderTarget(destRT);\r\n\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t\tlastRT = destRT;\r\n\r\n\t\t}\r\n\r\n\t\tif(this.dithering) {\r\n\r\n\t\t\tmaterial = this.ditheredConvolutionMaterial;\r\n\t\t\tuniforms = material.uniforms;\r\n\t\t\tthis.setFullscreenMaterial(material);\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.kernel.value = kernel[i];\r\n\t\tuniforms.inputBuffer.value = lastRT.texture;\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\r\n\t\trenderer.render(scene, camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\t\tresolution.base.set(width, height);\r\n\r\n\t\tconst w = resolution.width;\r\n\t\tconst h = resolution.height;\r\n\r\n\t\tthis.renderTargetA.setSize(w, h);\r\n\t\tthis.renderTargetB.setSize(w, h);\r\n\r\n\t\tthis.convolutionMaterial.setTexelSize(1.0 / w, 1.0 / h);\r\n\t\tthis.ditheredConvolutionMaterial.setTexelSize(1.0 / w, 1.0 / h);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTargetA.texture.format = RGBFormat;\r\n\t\t\tthis.renderTargetB.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTargetA.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetB.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * An auto sizing flag.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use {@link Resizer.AUTO_SIZE} instead.\r\n\t */\r\n\r\n\tstatic get AUTO_SIZE() {\r\n\r\n\t\treturn Resizer.AUTO_SIZE;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A pass that disables the stencil test.\r\n */\r\n\r\nclass ClearMaskPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new clear mask pass.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper(\"ClearMaskPass\", null, null);\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Disables the global stencil test.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst stencil = renderer.state.buffers.stencil;\r\n\r\n\t\tstencil.setLocked(false);\r\n\t\tstencil.setTest(false);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Stores the original clear color of the renderer.\r\n *\r\n * @type {Color}\r\n * @private\r\n */\r\n\r\nconst color = new Color();\r\n\r\n/**\r\n * A pass that clears the input buffer or the screen.\r\n */\r\n\r\nclass ClearPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new clear pass.\r\n\t *\r\n\t * @param {Boolean} [color=true] - Determines whether the color buffer should be cleared.\r\n\t * @param {Boolean} [depth=true] - Determines whether the depth buffer should be cleared.\r\n\t * @param {Boolean} [stencil=false] - Determines whether the stencil buffer should be cleared.\r\n\t */\r\n\r\n\tconstructor(color = true, depth = true, stencil = false) {\r\n\r\n\t\tsuper(\"ClearPass\", null, null);\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the color buffer should be cleared.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.color = color;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the depth buffer should be cleared.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.depth = depth;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the stencil buffer should be cleared.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.stencil = stencil;\r\n\r\n\t\t/**\r\n\t\t * An override clear color.\r\n\t\t *\r\n\t\t * The default value is null.\r\n\t\t *\r\n\t\t * @type {Color}\r\n\t\t */\r\n\r\n\t\tthis.overrideClearColor = null;\r\n\r\n\t\t/**\r\n\t\t * An override clear alpha.\r\n\t\t *\r\n\t\t * The default value is -1.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.overrideClearAlpha = -1.0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the input buffer or the screen.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst overrideClearColor = this.overrideClearColor;\r\n\t\tconst overrideClearAlpha = this.overrideClearAlpha;\r\n\t\tconst clearAlpha = renderer.getClearAlpha();\r\n\r\n\t\tconst hasOverrideClearColor = (overrideClearColor !== null);\r\n\t\tconst hasOverrideClearAlpha = (overrideClearAlpha >= 0.0);\r\n\r\n\t\tif(hasOverrideClearColor) {\r\n\r\n\t\t\tcolor.copy(renderer.getClearColor());\r\n\t\t\trenderer.setClearColor(overrideClearColor, hasOverrideClearAlpha ?\r\n\t\t\t\toverrideClearAlpha : clearAlpha);\r\n\r\n\t\t} else if(hasOverrideClearAlpha) {\r\n\r\n\t\t\trenderer.setClearAlpha(overrideClearAlpha);\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : inputBuffer);\r\n\t\trenderer.clear(this.color, this.depth, this.stencil);\r\n\r\n\t\tif(hasOverrideClearColor) {\r\n\r\n\t\t\trenderer.setClearColor(color, clearAlpha);\r\n\r\n\t\t} else if(hasOverrideClearAlpha) {\r\n\r\n\t\t\trenderer.setClearAlpha(clearAlpha);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A flag that indicates whether the override material workaround is enabled.\r\n *\r\n * @type {Boolean}\r\n * @private\r\n */\r\n\r\nlet workaroundEnabled = false;\r\n\r\n/**\r\n * An override material manager.\r\n *\r\n * Includes a workaround that fixes override materials for skinned meshes and\r\n * instancing. Doesn't fix uniforms such as normal maps and displacement maps.\r\n * Using the workaround may have a negative impact on performance if the scene\r\n * contains a lot of meshes.\r\n *\r\n * @implements {Disposable}\r\n */\r\n\r\nclass OverrideMaterialManager {\r\n\r\n\t/**\r\n\t * Constructs a new override material manager.\r\n\t *\r\n\t * @param {Material} [material=null] - An override material.\r\n\t */\r\n\r\n\tconstructor(material = null) {\r\n\r\n\t\t/**\r\n\t\t * Keeps track of original materials.\r\n\t\t *\r\n\t\t * @type {Map<Object3D, Material>}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.originalMaterials = new Map();\r\n\r\n\t\t/**\r\n\t\t * The override material.\r\n\t\t *\r\n\t\t * @type {Material}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.material = null;\r\n\r\n\t\t/**\r\n\t\t * A clone of the override material.\r\n\t\t *\r\n\t\t * @type {Material}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.materialInstanced = null;\r\n\r\n\t\t/**\r\n\t\t * A clone of the override material.\r\n\t\t *\r\n\t\t * @type {Material}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.materialSkinning = null;\r\n\r\n\t\tthis.setMaterial(material);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the override material.\r\n\t *\r\n\t * @param {Material} material - The material.\r\n\t */\r\n\r\n\tsetMaterial(material) {\r\n\r\n\t\tthis.disposeMaterials();\r\n\r\n\t\tif(material !== null) {\r\n\r\n\t\t\tthis.material = material;\r\n\r\n\t\t\tthis.materialInstanced = material.clone();\r\n\t\t\tthis.materialInstanced.uniforms = Object.assign({}, material.uniforms);\r\n\r\n\t\t\tthis.materialSkinning = material.clone();\r\n\t\t\tthis.materialSkinning.uniforms = Object.assign({}, material.uniforms);\r\n\t\t\tthis.materialSkinning.skinning = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the scene with the override material.\r\n\t *\r\n\t * @private\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Scene} scene - A scene.\r\n\t * @param {Camera} camera - A camera.\r\n\t */\r\n\r\n\trender(renderer, scene, camera) {\r\n\r\n\t\tconst material = this.material;\r\n\t\tconst materialSkinning = this.materialSkinning;\r\n\t\tconst materialInstanced = this.materialInstanced;\r\n\t\tconst originalMaterials = this.originalMaterials;\r\n\r\n\t\t// Ignore shadows.\r\n\t\tconst shadowMapEnabled = renderer.shadowMap.enabled;\r\n\t\trenderer.shadowMap.enabled = false;\r\n\r\n\t\tif(workaroundEnabled) {\r\n\r\n\t\t\tlet meshCount = 0;\r\n\r\n\t\t\t// Replace materials of all meshes with the correct override materials.\r\n\t\t\tscene.traverse((node) => {\r\n\r\n\t\t\t\tif(node.isMesh) {\r\n\r\n\t\t\t\t\toriginalMaterials.set(node, node.material);\r\n\r\n\t\t\t\t\tif(node.isInstancedMesh) {\r\n\r\n\t\t\t\t\t\tnode.material = materialInstanced;\r\n\r\n\t\t\t\t\t} else if(node.isSkinnedMesh) {\r\n\r\n\t\t\t\t\t\tnode.material = materialSkinning;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tnode.material = material;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t++meshCount;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t\tfor(const entry of originalMaterials) {\r\n\r\n\t\t\t\tentry[0].material = entry[1];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(meshCount !== originalMaterials.size) {\r\n\r\n\t\t\t\toriginalMaterials.clear();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst overrideMaterial = scene.overrideMaterial;\r\n\t\t\tscene.overrideMaterial = material;\r\n\t\t\trenderer.render(scene, camera);\r\n\t\t\tscene.overrideMaterial = overrideMaterial;\r\n\r\n\t\t}\r\n\r\n\t\trenderer.shadowMap.enabled = shadowMapEnabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Deletes cloned override materials.\r\n\t *\r\n\t * @private\r\n\t */\r\n\r\n\tdisposeMaterials() {\r\n\r\n\t\tif(this.materialInstanced !== null) {\r\n\r\n\t\t\tthis.materialInstanced.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tif(this.materialSkinning !== null) {\r\n\r\n\t\t\tthis.materialSkinning.dispose();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs cleanup tasks.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.originalMaterials.clear();\r\n\t\tthis.disposeMaterials();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the override material workaround is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tstatic get workaroundEnabled() {\r\n\r\n\t\treturn workaroundEnabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables the override material workaround globally.\r\n\t *\r\n\t * This only affects post processing passes and effects.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tstatic set workaroundEnabled(value) {\r\n\r\n\t\tworkaroundEnabled = value;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A pass that renders a given scene into the input buffer or to screen.\r\n *\r\n * This pass uses a {@link ClearPass} to clear the target buffer.\r\n */\r\n\r\nclass RenderPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new render pass.\r\n\t *\r\n\t * @param {Scene} scene - The scene to render.\r\n\t * @param {Camera} camera - The camera to use to render the scene.\r\n\t * @param {Material} [overrideMaterial=null] - An override material.\r\n\t */\r\n\r\n\tconstructor(scene, camera, overrideMaterial = null) {\r\n\r\n\t\tsuper(\"RenderPass\", scene, camera);\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass();\r\n\r\n\t\t/**\r\n\t\t * A depth texture.\r\n\t\t *\r\n\t\t * @type {DepthTexture}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.depthTexture = null;\r\n\r\n\t\t/**\r\n\t\t * An override material manager.\r\n\t\t *\r\n\t\t * @type {OverrideMaterialManager}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.overrideMaterialManager = (overrideMaterial === null) ? null :\r\n\t\t\tnew OverrideMaterialManager(overrideMaterial);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether this pass should render to screen.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget renderToScreen() {\r\n\r\n\t\treturn super.renderToScreen;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render to screen flag.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset renderToScreen(value) {\r\n\r\n\t\tsuper.renderToScreen = value;\r\n\t\tthis.clearPass.renderToScreen = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current override material.\r\n\t *\r\n\t * @type {Material}\r\n\t */\r\n\r\n\tget overrideMaterial() {\r\n\r\n\t\tconst manager = this.overrideMaterialManager;\r\n\r\n\t\treturn (manager !== null) ? manager.material : null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the override material.\r\n\t *\r\n\t * @type {Material}\r\n\t */\r\n\r\n\tset overrideMaterial(value) {\r\n\r\n\t\tconst manager = this.overrideMaterialManager;\r\n\r\n\t\tif(value !== null) {\r\n\r\n\t\t\tif(manager !== null) {\r\n\r\n\t\t\t\tmanager.setMaterial(value);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.overrideMaterialManager = new OverrideMaterialManager(value);\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if(manager !== null) {\r\n\r\n\t\t\tmanager.dispose();\r\n\t\t\tthis.overrideMaterialManager = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the target buffer should be cleared before rendering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget clear() {\r\n\r\n\t\treturn this.clearPass.enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables auto clear.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset clear(value) {\r\n\r\n\t\tthis.clearPass.enabled = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the clear pass.\r\n\t *\r\n\t * @return {ClearPass} The clear pass.\r\n\t */\r\n\r\n\tgetClearPass() {\r\n\r\n\t\treturn this.clearPass;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current depth texture.\r\n\t *\r\n\t * @return {Texture} The current depth texture, or null if there is none.\r\n\t */\r\n\r\n\tgetDepthTexture() {\r\n\r\n\t\treturn this.depthTexture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * The provided texture will be attached to the input buffer unless this pass\r\n\t * renders to screen.\r\n\t *\r\n\t * @param {DepthTexture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tthis.depthTexture = depthTexture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the scene.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\t\tconst renderTarget = this.renderToScreen ? null : inputBuffer;\r\n\r\n\t\tif(this.depthTexture !== null && !this.renderToScreen) {\r\n\r\n\t\t\tinputBuffer.depthTexture = this.depthTexture;\r\n\t\t\toutputBuffer.depthTexture = null;\r\n\r\n\t\t}\r\n\r\n\t\tif(this.clear) {\r\n\r\n\t\t\tthis.clearPass.render(renderer, inputBuffer);\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget(renderTarget);\r\n\r\n\t\tif(this.overrideMaterialManager !== null) {\r\n\r\n\t\t\tthis.overrideMaterialManager.render(renderer, scene, camera);\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A pass that renders the depth of a given scene into a color buffer.\r\n */\r\n\r\nclass DepthPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new depth pass.\r\n\t *\r\n\t * @param {Scene} scene - The scene to render.\r\n\t * @param {Camera} camera - The camera to use to render the scene.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.resolutionScale=1.0] - Deprecated. Adjust the height or width instead for consistent results.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t * @param {WebGLRenderTarget} [options.renderTarget] - A custom render target.\r\n\t */\r\n\r\n\tconstructor(scene, camera, {\r\n\t\tresolutionScale = 1.0,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\trenderTarget\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"DepthPass\");\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * A render pass.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderPass = new RenderPass(scene, camera, new MeshDepthMaterial({\r\n\t\t\tdepthPacking: RGBADepthPacking,\r\n\t\t\tmorphTargets: true,\r\n\t\t\tskinning: true\r\n\t\t}));\r\n\r\n\t\tconst clearPass = this.renderPass.getClearPass();\r\n\t\tclearPass.overrideClearColor = new Color(0xffffff);\r\n\t\tclearPass.overrideClearAlpha = 1.0;\r\n\r\n\t\t/**\r\n\t\t * A render target that contains the scene depth.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = renderTarget;\r\n\r\n\t\tif(this.renderTarget === undefined) {\r\n\r\n\t\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\t\tminFilter: NearestFilter,\r\n\t\t\t\tmagFilter: NearestFilter,\r\n\t\t\t\tstencilBuffer: false\r\n\t\t\t});\r\n\r\n\t\t\tthis.renderTarget.texture.name = \"DepthPass.Target\";\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * The desired render resolution.\r\n\t\t *\r\n\t\t * Use {@link Resizer.AUTO_SIZE} for the width or height to automatically\r\n\t\t * calculate it based on its counterpart and the original aspect ratio.\r\n\t\t *\r\n\t\t * @type {Resizer}\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Resizer(this, width, height, resolutionScale);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The depth texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.renderTarget.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolutionScale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolutionScale = scale;\r\n\t\tthis.setSize(this.resolution.base.x, this.resolution.base.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the scene depth.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst renderTarget = this.renderToScreen ? null : this.renderTarget;\r\n\t\tthis.renderPass.render(renderer, renderTarget);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\t\tresolution.base.set(width, height);\r\n\r\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A pass that downsamples the scene depth by picking the most representative\r\n * depth in 2x2 texel neighborhoods. If a normal buffer is provided, the\r\n * corresponding normals will be stored as well.\r\n *\r\n * Attention: This pass requires WebGL 2.\r\n */\r\n\r\nclass DepthDownsamplingPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new depth downsampling pass.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Texture} [options.normalBuffer=null] - A texture that contains view space normals. See {@link NormalPass}.\r\n\t * @param {Number} [options.resolutionScale=0.5] - The resolution scale.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tnormalBuffer = null,\r\n\t\tresolutionScale = 0.5,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"DepthDownsamplingPass\");\r\n\r\n\t\tthis.setFullscreenMaterial(new DepthDownsamplingMaterial());\r\n\t\tthis.needsDepthTexture = true;\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\tif(normalBuffer !== null) {\r\n\r\n\t\t\tconst material = this.getFullscreenMaterial();\r\n\t\t\tmaterial.uniforms.normalBuffer.value = normalBuffer;\r\n\t\t\tmaterial.defines.DOWNSAMPLE_NORMALS = \"1\";\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * A render target that contains the downsampled normals and depth.\r\n\t\t *\r\n\t\t * Normals are stored as RGB and depth is stored as alpha.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: NearestFilter,\r\n\t\t\tmagFilter: NearestFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\ttype: FloatType\r\n\t\t});\r\n\r\n\t\tthis.renderTarget.texture.name = \"DepthDownsamplingPass.Target\";\r\n\t\tthis.renderTarget.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * The resolution of this effect.\r\n\t\t *\r\n\t\t * @type {Resizer}\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Resizer(this, width, height);\r\n\t\tthis.resolution.scale = resolutionScale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The normal(RGB) + depth(A) texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.renderTarget.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\t\tmaterial.uniforms.depthBuffer.value = depthTexture;\r\n\t\tmaterial.depthPacking = depthPacking;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Downsamples depth and scene normals.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\r\n\t\trenderer.render(this.scene, this.camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\t\tresolution.base.set(width, height);\r\n\r\n\t\t// Use the full resolution to calculate the depth/normal buffer texel size.\r\n\t\tthis.getFullscreenMaterial().setTexelSize(1.0 / width, 1.0 / height);\r\n\r\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tif(!renderer.capabilities.isWebGL2) {\r\n\r\n\t\t\tconsole.error(\"The DepthDownsamplingPass requires WebGL 2\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A blend function enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} SKIP - No blending. The effect will not be included in the final shader.\r\n * @property {Number} ADD - Additive blending. Fast, but may produce washed out results.\r\n * @property {Number} ALPHA - Alpha blending. Blends based on the alpha value of the new color.\r\n * @property {Number} AVERAGE - Average blending.\r\n * @property {Number} COLOR_BURN - Color burn.\r\n * @property {Number} COLOR_DODGE - Color dodge.\r\n * @property {Number} DARKEN - Prioritize darker colors.\r\n * @property {Number} DIFFERENCE - Color difference.\r\n * @property {Number} EXCLUSION - Color exclusion.\r\n * @property {Number} LIGHTEN - Prioritize lighter colors.\r\n * @property {Number} MULTIPLY - Color multiplication.\r\n * @property {Number} DIVIDE - Color division.\r\n * @property {Number} NEGATION - Color negation.\r\n * @property {Number} NORMAL - Normal blending. The new color overwrites the old one.\r\n * @property {Number} OVERLAY - Color overlay.\r\n * @property {Number} REFLECT - Color reflection.\r\n * @property {Number} SCREEN - Screen blending. The two colors are effectively projected on a white screen simultaneously.\r\n * @property {Number} SOFT_LIGHT - Soft light blending.\r\n * @property {Number} SUBTRACT - Color subtraction.\r\n */\r\n\r\nconst BlendFunction = {\r\n\r\n\tSKIP: 0,\r\n\tADD: 1,\r\n\tALPHA: 2,\r\n\tAVERAGE: 3,\r\n\tCOLOR_BURN: 4,\r\n\tCOLOR_DODGE: 5,\r\n\tDARKEN: 6,\r\n\tDIFFERENCE: 7,\r\n\tEXCLUSION: 8,\r\n\tLIGHTEN: 9,\r\n\tMULTIPLY: 10,\r\n\tDIVIDE: 11,\r\n\tNEGATION: 12,\r\n\tNORMAL: 13,\r\n\tOVERLAY: 14,\r\n\tREFLECT: 15,\r\n\tSCREEN: 16,\r\n\tSOFT_LIGHT: 17,\r\n\tSUBTRACT: 18\r\n\r\n};\r\n\r\nvar addBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}\";\r\n\r\nvar alphaBlendFunction = \"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}\";\r\n\r\nvar averageBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}\";\r\n\r\nvar colorBurnBlendFunction = \"float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\r\n\r\nvar colorDodgeBlendFunction = \"float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\r\n\r\nvar darkenBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}\";\r\n\r\nvar differenceBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}\";\r\n\r\nvar exclusionBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}\";\r\n\r\nvar lightenBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}\";\r\n\r\nvar multiplyBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}\";\r\n\r\nvar divideBlendFunction = \"float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\r\n\r\nvar negationBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}\";\r\n\r\nvar normalBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}\";\r\n\r\nvar overlayBlendFunction = \"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\r\n\r\nvar reflectBlendFunction = \"float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\r\n\r\nvar screenBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}\";\r\n\r\nvar softLightBlendFunction = \"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\r\n\r\nvar subtractBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}\";\r\n\r\n/**\r\n * A blend function shader code catalogue.\r\n *\r\n * @type {Map<BlendFunction, String>}\r\n * @private\r\n */\r\n\r\nconst blendFunctions = new Map([\r\n\t[BlendFunction.SKIP, null],\r\n\t[BlendFunction.ADD, addBlendFunction],\r\n\t[BlendFunction.ALPHA, alphaBlendFunction],\r\n\t[BlendFunction.AVERAGE, averageBlendFunction],\r\n\t[BlendFunction.COLOR_BURN, colorBurnBlendFunction],\r\n\t[BlendFunction.COLOR_DODGE, colorDodgeBlendFunction],\r\n\t[BlendFunction.DARKEN, darkenBlendFunction],\r\n\t[BlendFunction.DIFFERENCE, differenceBlendFunction],\r\n\t[BlendFunction.EXCLUSION, exclusionBlendFunction],\r\n\t[BlendFunction.LIGHTEN, lightenBlendFunction],\r\n\t[BlendFunction.MULTIPLY, multiplyBlendFunction],\r\n\t[BlendFunction.DIVIDE, divideBlendFunction],\r\n\t[BlendFunction.NEGATION, negationBlendFunction],\r\n\t[BlendFunction.NORMAL, normalBlendFunction],\r\n\t[BlendFunction.OVERLAY, overlayBlendFunction],\r\n\t[BlendFunction.REFLECT, reflectBlendFunction],\r\n\t[BlendFunction.SCREEN, screenBlendFunction],\r\n\t[BlendFunction.SOFT_LIGHT, softLightBlendFunction],\r\n\t[BlendFunction.SUBTRACT, subtractBlendFunction]\r\n]);\r\n\r\n/**\r\n * A blend mode.\r\n */\r\n\r\nclass BlendMode extends EventDispatcher {\r\n\r\n\t/**\r\n\t * Constructs a new blend mode.\r\n\t *\r\n\t * @param {BlendFunction} blendFunction - The blend function to use.\r\n\t * @param {Number} opacity - The opacity of the color that will be blended with the base color.\r\n\t */\r\n\r\n\tconstructor(blendFunction, opacity = 1.0) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The blend function.\r\n\t\t *\r\n\t\t * @type {BlendFunction}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.blendFunction = blendFunction;\r\n\r\n\t\t/**\r\n\t\t * The opacity of the color that will be blended with the base color.\r\n\t\t *\r\n\t\t * @type {Uniform}\r\n\t\t */\r\n\r\n\t\tthis.opacity = new Uniform(opacity);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the blend function.\r\n\t *\r\n\t * @return {BlendFunction} The blend function.\r\n\t */\r\n\r\n\tgetBlendFunction() {\r\n\r\n\t\treturn this.blendFunction;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the blend function.\r\n\t *\r\n\t * @param {BlendFunction} blendFunction - The blend function.\r\n\t */\r\n\r\n\tsetBlendFunction(blendFunction) {\r\n\r\n\t\tthis.blendFunction = blendFunction;\r\n\t\tthis.dispatchEvent({ type: \"change\" });\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the blend function shader code.\r\n\t *\r\n\t * @return {String} The blend function shader code.\r\n\t */\r\n\r\n\tgetShaderCode() {\r\n\r\n\t\treturn blendFunctions.get(this.blendFunction);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An abstract effect.\r\n *\r\n * Effects can be combined using the {@link EffectPass}.\r\n *\r\n * @implements {Initializable}\r\n * @implements {Resizable}\r\n * @implements {Disposable}\r\n */\r\n\r\nclass Effect extends EventDispatcher {\r\n\r\n\t/**\r\n\t * Constructs a new effect.\r\n\t *\r\n\t * @param {String} name - The name of this effect. Doesn't have to be unique.\r\n\t * @param {String} fragmentShader - The fragment shader. This shader is required.\r\n\t * @param {Object} [options] - Additional options.\r\n\t * @param {EffectAttribute} [options.attributes=EffectAttribute.NONE] - The effect attributes that determine the execution priority and resource requirements.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\r\n\t * @param {Map<String, String>} [options.defines] - Custom preprocessor macro definitions. Keys are names and values are code.\r\n\t * @param {Map<String, Uniform>} [options.uniforms] - Custom shader uniforms. Keys are names and values are uniforms.\r\n\t * @param {Set<WebGLExtension>} [options.extensions] - WebGL extensions.\r\n\t * @param {String} [options.vertexShader=null] - The vertex shader. Most effects don't need one.\r\n\t */\r\n\r\n\tconstructor(name, fragmentShader, {\r\n\t\tattributes = EffectAttribute.NONE,\r\n\t\tblendFunction = BlendFunction.SCREEN,\r\n\t\tdefines = new Map(),\r\n\t\tuniforms = new Map(),\r\n\t\textensions = null,\r\n\t\tvertexShader = null\r\n\t} = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The name of this effect.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t */\r\n\r\n\t\tthis.name = name;\r\n\r\n\t\t/**\r\n\t\t * The effect attributes.\r\n\t\t *\r\n\t\t * @type {EffectAttribute}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.attributes = attributes;\r\n\r\n\t\t/**\r\n\t\t * The fragment shader.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.fragmentShader = fragmentShader;\r\n\r\n\t\t/**\r\n\t\t * The vertex shader.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.vertexShader = vertexShader;\r\n\r\n\t\t/**\r\n\t\t * Preprocessor macro definitions.\r\n\t\t *\r\n\t\t * Call {@link Effect.setChanged} after changing macro definitions.\r\n\t\t *\r\n\t\t * @type {Map<String, String>}\r\n\t\t */\r\n\r\n\t\tthis.defines = defines;\r\n\r\n\t\t/**\r\n\t\t * Shader uniforms.\r\n\t\t *\r\n\t\t * You may freely modify the values of these uniforms at runtime. However,\r\n\t\t * uniforms should not be removed or added after the effect was created.\r\n\t\t *\r\n\t\t * Call {@link Effect.setChanged} after adding or removing uniforms.\r\n\t\t *\r\n\t\t * @type {Map<String, Uniform>}\r\n\t\t */\r\n\r\n\t\tthis.uniforms = uniforms;\r\n\r\n\t\t/**\r\n\t\t * WebGL extensions that are required by this effect.\r\n\t\t *\r\n\t\t * Call {@link Effect.setChanged} after adding or removing extensions.\r\n\t\t *\r\n\t\t * @type {Set<WebGLExtension>}\r\n\t\t */\r\n\r\n\t\tthis.extensions = extensions;\r\n\r\n\t\t/**\r\n\t\t * The blend mode of this effect.\r\n\t\t *\r\n\t\t * The result of this effect will be blended with the result of the previous\r\n\t\t * effect using this blend mode.\r\n\t\t *\r\n\t\t * @type {BlendMode}\r\n\t\t */\r\n\r\n\t\tthis.blendMode = new BlendMode(blendFunction);\r\n\t\tthis.blendMode.addEventListener(\"change\", (event) => this.setChanged());\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Informs the associated {@link EffectPass} that this effect has changed in\r\n\t * a way that requires a shader recompilation.\r\n\t *\r\n\t * Call this method after changing macro definitions or extensions and after\r\n\t * adding or removing uniforms.\r\n\t *\r\n\t * @protected\r\n\t */\r\n\r\n\tsetChanged() {\r\n\r\n\t\tthis.dispatchEvent({ type: \"change\" });\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the effect attributes.\r\n\t *\r\n\t * @return {EffectAttribute} The attributes.\r\n\t */\r\n\r\n\tgetAttributes() {\r\n\r\n\t\treturn this.attributes;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the effect attributes.\r\n\t *\r\n\t * Effects that have the same attributes will be executed in the order in\r\n\t * which they were registered. Some attributes imply a higher priority.\r\n\t *\r\n\t * @protected\r\n\t * @param {EffectAttribute} attributes - The attributes.\r\n\t */\r\n\r\n\tsetAttributes(attributes) {\r\n\r\n\t\tthis.attributes = attributes;\r\n\t\tthis.setChanged();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the fragment shader.\r\n\t *\r\n\t * @return {String} The fragment shader.\r\n\t */\r\n\r\n\tgetFragmentShader() {\r\n\r\n\t\treturn this.fragmentShader;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the fragment shader.\r\n\t *\r\n\t * @protected\r\n\t * @param {String} fragmentShader - The fragment shader.\r\n\t */\r\n\r\n\tsetFragmentShader(fragmentShader) {\r\n\r\n\t\tthis.fragmentShader = fragmentShader;\r\n\t\tthis.setChanged();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the vertex shader.\r\n\t *\r\n\t * @return {String} The vertex shader.\r\n\t */\r\n\r\n\tgetVertexShader() {\r\n\r\n\t\treturn this.vertexShader;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the vertex shader.\r\n\t *\r\n\t * @protected\r\n\t * @param {String} vertexShader - The vertex shader.\r\n\t */\r\n\r\n\tsetVertexShader(vertexShader) {\r\n\r\n\t\tthis.vertexShader = vertexShader;\r\n\t\tthis.setChanged();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * You may override this method if your effect requires direct access to the\r\n\t * depth texture that is bound to the associated {@link EffectPass}.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {}\r\n\r\n\t/**\r\n\t * Updates the effect by performing supporting operations.\r\n\t *\r\n\t * This method is called by the {@link EffectPass} right before the main\r\n\t * fullscreen render operation, even if the blend function is set to `SKIP`.\r\n\t *\r\n\t * You may override this method if you need to render additional off-screen\r\n\t * textures or update custom uniforms.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {}\r\n\r\n\t/**\r\n\t * Updates the size of this effect.\r\n\t *\r\n\t * You may override this method in case you want to be informed about the main\r\n\t * render size.\r\n\t *\r\n\t * The {@link EffectPass} calls this method before this effect is initialized\r\n\t * and every time its own size is updated.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t * @example this.myRenderTarget.setSize(width, height);\r\n\t */\r\n\r\n\tsetSize(width, height) {}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * By overriding this method you gain access to the renderer. You'll also be\r\n\t * able to configure your custom render targets to use the appropriate format\r\n\t * (RGB or RGBA).\r\n\t *\r\n\t * The provided renderer can be used to warm up special off-screen render\r\n\t * targets by performing a preliminary render operation.\r\n\t *\r\n\t * The {@link EffectPass} calls this method during its own initialization\r\n\t * which happens after the size has been set.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t * @example if(!alpha && frameBufferType === UnsignedByteType) { this.myRenderTarget.texture.format = RGBFormat; }\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {}\r\n\r\n\t/**\r\n\t * Performs a shallow search for properties that define a dispose method and\r\n\t * deletes them. The effect will be inoperative after this method was called!\r\n\t *\r\n\t * The {@link EffectPass} calls this method when it is being destroyed. Do not\r\n\t * call this method directly.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tfor(const key of Object.keys(this)) {\r\n\r\n\t\t\tif(this[key] !== null && typeof this[key].dispose === \"function\") {\r\n\r\n\t\t\t\t/** @ignore */\r\n\t\t\t\tthis[key].dispose();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An enumeration of effect attributes.\r\n *\r\n * Attributes can be concatenated using the bitwise OR operator.\r\n *\r\n * @type {Object}\r\n * @property {Number} NONE - No attributes. Most effects don't need to specify any attributes.\r\n * @property {Number} DEPTH - Describes effects that require a depth texture.\r\n * @property {Number} CONVOLUTION - Describes effects that fetch additional samples from the input buffer. There cannot be more than one effect with this attribute per {@link EffectPass}.\r\n * @example const attributes = EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH;\r\n */\r\n\r\nconst EffectAttribute = {\r\n\r\n\tNONE: 0,\r\n\tDEPTH: 1,\r\n\tCONVOLUTION: 2\r\n\r\n};\r\n\r\n/**\r\n * An enumeration of WebGL extensions.\r\n *\r\n * @type {Object}\r\n * @property {String} DERIVATIVES - Enables derivatives by adding the functions dFdx, dFdy and fwidth.\r\n * @property {String} FRAG_DEPTH - Enables gl_FragDepthEXT to set a depth value of a fragment from within the fragment shader.\r\n * @property {String} DRAW_BUFFERS - Enables multiple render targets (MRT) support.\r\n * @property {String} SHADER_TEXTURE_LOD - Enables explicit control of texture LOD.\r\n */\r\n\r\nconst WebGLExtension = {\r\n\r\n\tDERIVATIVES: \"derivatives\",\r\n\tFRAG_DEPTH: \"fragDepth\",\r\n\tDRAW_BUFFERS: \"drawBuffers\",\r\n\tSHADER_TEXTURE_LOD: \"shaderTextureLOD\"\r\n\r\n};\r\n\r\n/**\r\n * Finds and collects substrings that match the given regular expression.\r\n *\r\n * @private\r\n * @param {RegExp} regExp - A regular expression.\r\n * @param {String} string - A string.\r\n * @return {String[]} The matching substrings.\r\n */\r\n\r\nfunction findSubstrings(regExp, string) {\r\n\r\n\tconst substrings = [];\r\n\tlet result;\r\n\r\n\twhile((result = regExp.exec(string)) !== null) {\r\n\r\n\t\tsubstrings.push(result[1]);\r\n\r\n\t}\r\n\r\n\treturn substrings;\r\n\r\n}\r\n\r\n/**\r\n * Prefixes substrings within the given strings.\r\n *\r\n * @private\r\n * @param {String} prefix - A prefix.\r\n * @param {String[]} substrings - The substrings.\r\n * @param {Map<String, String>} strings - A collection of named strings.\r\n */\r\n\r\nfunction prefixSubstrings(prefix, substrings, strings) {\r\n\r\n\tlet prefixed, regExp;\r\n\r\n\tfor(const substring of substrings) {\r\n\r\n\t\tprefixed = \"$1\" + prefix + substring.charAt(0).toUpperCase() + substring.slice(1);\r\n\t\tregExp = new RegExp(\"([^\\\\.])(\\\\b\" + substring + \"\\\\b)\", \"g\");\r\n\r\n\t\tfor(const entry of strings.entries()) {\r\n\r\n\t\t\tif(entry[1] !== null) {\r\n\r\n\t\t\t\tstrings.set(entry[0], entry[1].replace(regExp, prefixed));\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Integrates the given effect.\r\n *\r\n * @private\r\n * @param {String} prefix - A prefix.\r\n * @param {Effect} effect - An effect.\r\n * @param {Map<String, String>} shaderParts - The shader parts.\r\n * @param {Map<BlendFunction, BlendMode>} blendModes - The blend modes.\r\n * @param {Map<String, String>} defines - The macro definitions.\r\n * @param {Map<String, Uniform>} uniforms - The uniforms.\r\n * @param {EffectAttribute} attributes - The global, collective attributes.\r\n * @return {Object} The results.\r\n * @property {String[]} varyings - The varyings used by the given effect.\r\n * @property {Boolean} transformedUv - Indicates whether the effect transforms UV coordinates in the fragment shader.\r\n * @property {Boolean} readDepth - Indicates whether the effect actually uses depth in the fragment shader.\r\n */\r\n\r\nfunction integrateEffect(prefix, effect, shaderParts, blendModes, defines, uniforms, attributes) {\r\n\r\n\tconst functionRegExp = /(?:\\w+\\s+(\\w+)\\([\\w\\s,]*\\)\\s*{[^}]+})/g;\r\n\tconst varyingRegExp = /(?:varying\\s+\\w+\\s+(\\w*))/g;\r\n\r\n\tconst blendMode = effect.blendMode;\r\n\tconst shaders = new Map([\r\n\t\t[\"fragment\", effect.getFragmentShader()],\r\n\t\t[\"vertex\", effect.getVertexShader()]\r\n\t]);\r\n\r\n\tconst mainImageExists = (shaders.get(\"fragment\") !== undefined && shaders.get(\"fragment\").indexOf(\"mainImage\") >= 0);\r\n\tconst mainUvExists = (shaders.get(\"fragment\") !== undefined && shaders.get(\"fragment\").indexOf(\"mainUv\") >= 0);\r\n\r\n\tlet varyings = [], names = [];\r\n\tlet transformedUv = false;\r\n\tlet readDepth = false;\r\n\r\n\tif(shaders.get(\"fragment\") === undefined) {\r\n\r\n\t\tconsole.error(\"Missing fragment shader\", effect);\r\n\r\n\t} else if(mainUvExists && (attributes & EffectAttribute.CONVOLUTION) !== 0) {\r\n\r\n\t\tconsole.error(\"Effects that transform UV coordinates are incompatible with convolution effects\", effect);\r\n\r\n\t} else if(!mainImageExists && !mainUvExists) {\r\n\r\n\t\tconsole.error(\"The fragment shader contains neither a mainImage nor a mainUv function\", effect);\r\n\r\n\t} else {\r\n\r\n\t\tif(mainUvExists) {\r\n\r\n\t\t\tshaderParts.set(Section.FRAGMENT_MAIN_UV, shaderParts.get(Section.FRAGMENT_MAIN_UV) +\r\n\t\t\t\t\"\\t\" + prefix + \"MainUv(UV);\\n\");\r\n\r\n\t\t\ttransformedUv = true;\r\n\r\n\t\t}\r\n\r\n\t\tif(shaders.get(\"vertex\") !== null && shaders.get(\"vertex\").indexOf(\"mainSupport\") >= 0) {\r\n\r\n\t\t\tlet string = \"\\t\" + prefix + \"MainSupport(\";\r\n\r\n\t\t\t// Check if the vertex shader expects uv coordinates.\r\n\t\t\tif(shaders.get(\"vertex\").indexOf(\"uv\") >= 0) {\r\n\r\n\t\t\t\tstring += \"vUv\";\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstring += \");\\n\";\r\n\r\n\t\t\tshaderParts.set(Section.VERTEX_MAIN_SUPPORT,\r\n\t\t\t\tshaderParts.get(Section.VERTEX_MAIN_SUPPORT) + string);\r\n\r\n\t\t\tvaryings = varyings.concat(findSubstrings(varyingRegExp, shaders.get(\"vertex\")));\r\n\t\t\tnames = names.concat(varyings).concat(findSubstrings(functionRegExp, shaders.get(\"vertex\")));\r\n\r\n\t\t}\r\n\r\n\t\t// Assemble all names while ignoring parameters of function-like macros.\r\n\t\tnames = names.concat(findSubstrings(functionRegExp, shaders.get(\"fragment\")))\r\n\t\t\t.concat(Array.from(effect.defines.keys()).map((s) => s.replace(/\\([\\w\\s,]*\\)/g, \"\")))\r\n\t\t\t.concat(Array.from(effect.uniforms.keys()));\r\n\r\n\t\t// Store prefixed uniforms and macros.\r\n\t\teffect.uniforms.forEach((value, key) => uniforms.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), value));\r\n\t\teffect.defines.forEach((value, key) => defines.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), value));\r\n\r\n\t\t// Prefix varyings, functions, uniforms and macros.\r\n\t\tprefixSubstrings(prefix, names, defines);\r\n\t\tprefixSubstrings(prefix, names, shaders);\r\n\r\n\t\t// Collect unique blend modes.\r\n\t\tblendModes.set(blendMode.blendFunction, blendMode);\r\n\r\n\t\tif(mainImageExists) {\r\n\r\n\t\t\tlet string = prefix + \"MainImage(color0, UV, \";\r\n\r\n\t\t\t// The effect may sample depth in a different shader.\r\n\t\t\tif((attributes & EffectAttribute.DEPTH) !== 0 && shaders.get(\"fragment\").indexOf(\"depth\") >= 0) {\r\n\r\n\t\t\t\tstring += \"depth, \";\r\n\t\t\t\treadDepth = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstring += \"color1);\\n\\t\";\r\n\r\n\t\t\t// Include the blend opacity uniform of this effect.\r\n\t\t\tconst blendOpacity = prefix + \"BlendOpacity\";\r\n\t\t\tuniforms.set(blendOpacity, blendMode.opacity);\r\n\r\n\t\t\t// Blend the result of this effect with the input color.\r\n\t\t\tstring += \"color0 = blend\" + blendMode.getBlendFunction() +\r\n\t\t\t\t\"(color0, color1, \" + blendOpacity + \");\\n\\n\\t\";\r\n\r\n\t\t\tshaderParts.set(Section.FRAGMENT_MAIN_IMAGE,\r\n\t\t\t\tshaderParts.get(Section.FRAGMENT_MAIN_IMAGE) + string);\r\n\r\n\t\t\tshaderParts.set(Section.FRAGMENT_HEAD, shaderParts.get(Section.FRAGMENT_HEAD) +\r\n\t\t\t\t\"uniform float \" + blendOpacity + \";\\n\\n\");\r\n\r\n\t\t}\r\n\r\n\t\t// Include the modified code in the final shader.\r\n\t\tshaderParts.set(Section.FRAGMENT_HEAD, shaderParts.get(Section.FRAGMENT_HEAD) +\r\n\t\t\tshaders.get(\"fragment\") + \"\\n\");\r\n\r\n\t\tif(shaders.get(\"vertex\") !== null) {\r\n\r\n\t\t\tshaderParts.set(Section.VERTEX_HEAD, shaderParts.get(Section.VERTEX_HEAD) +\r\n\t\t\t\tshaders.get(\"vertex\") + \"\\n\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { varyings, transformedUv, readDepth };\r\n\r\n}\r\n\r\n/**\r\n * An effect pass.\r\n *\r\n * Use this pass to combine {@link Effect} instances.\r\n *\r\n * @implements {EventListener}\r\n */\r\n\r\nclass EffectPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new effect pass.\r\n\t *\r\n\t * The provided effects will be organized and merged for optimal performance.\r\n\t *\r\n\t * @param {Camera} camera - The main camera. The camera's type and settings will be available to all effects.\r\n\t * @param {...Effect} effects - The effects that will be rendered by this pass.\r\n\t */\r\n\r\n\tconstructor(camera, ...effects) {\r\n\r\n\t\tsuper(\"EffectPass\");\r\n\r\n\t\tthis.setFullscreenMaterial(new EffectMaterial(null, null, null, camera));\r\n\r\n\t\t/**\r\n\t\t * The effects, sorted by attribute priority, DESC.\r\n\t\t *\r\n\t\t * @type {Effect[]}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.effects = effects.sort((a, b) => (b.attributes - a.attributes));\r\n\r\n\t\t/**\r\n\t\t * Indicates whether this pass should skip rendering.\r\n\t\t *\r\n\t\t * Effects will still be updated, even if this flag is true.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.skipRendering = false;\r\n\r\n\t\t/**\r\n\t\t * The amount of shader uniforms that this pass uses.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.uniforms = 0;\r\n\r\n\t\t/**\r\n\t\t * The amount of shader varyings that this pass uses.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.varyings = 0;\r\n\r\n\t\t/**\r\n\t\t * A time offset.\r\n\t\t *\r\n\t\t * Elapsed time will start at this value.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.minTime = 1.0;\r\n\r\n\t\t/**\r\n\t\t * The maximum time.\r\n\t\t *\r\n\t\t * If the elapsed time exceeds this value, it will be reset.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.maxTime = Number.POSITIVE_INFINITY;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether this pass encodes its output when rendering to screen.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget encodeOutput() {\r\n\r\n\t\treturn (this.getFullscreenMaterial().defines.ENCODE_OUTPUT !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables output encoding.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset encodeOutput(value) {\r\n\r\n\t\tif(this.encodeOutput !== value) {\r\n\r\n\t\t\tconst material = this.getFullscreenMaterial();\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tmaterial.defines.ENCODE_OUTPUT = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete material.defines.ENCODE_OUTPUT;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether dithering is enabled.\r\n\t *\r\n\t * Color quantization reduces banding artifacts but degrades performance.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget dithering() {\r\n\r\n\t\treturn this.getFullscreenMaterial().dithering;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables dithering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset dithering(value) {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\r\n\t\tif(material.dithering !== value) {\r\n\r\n\t\t\tmaterial.dithering = value;\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Compares required resources with device capabilities.\r\n\t *\r\n\t * @private\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t */\r\n\r\n\tverifyResources(renderer) {\r\n\r\n\t\tconst capabilities = renderer.capabilities;\r\n\t\tlet max = Math.min(capabilities.maxFragmentUniforms, capabilities.maxVertexUniforms);\r\n\r\n\t\tif(this.uniforms > max) {\r\n\r\n\t\t\tconsole.warn(\"The current rendering context doesn't support more than \" +\r\n\t\t\t\tmax + \" uniforms, but \" + this.uniforms + \" were defined\");\r\n\r\n\t\t}\r\n\r\n\t\tmax = capabilities.maxVaryings;\r\n\r\n\t\tif(this.varyings > max) {\r\n\r\n\t\t\tconsole.warn(\"The current rendering context doesn't support more than \" +\r\n\t\t\t\tmax + \" varyings, but \" + this.varyings + \" were defined\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the compound shader material.\r\n\t *\r\n\t * @private\r\n\t */\r\n\r\n\tupdateMaterial() {\r\n\r\n\t\tconst blendRegExp = /\\bblend\\b/g;\r\n\r\n\t\tconst shaderParts = new Map([\r\n\t\t\t[Section.FRAGMENT_HEAD, \"\"],\r\n\t\t\t[Section.FRAGMENT_MAIN_UV, \"\"],\r\n\t\t\t[Section.FRAGMENT_MAIN_IMAGE, \"\"],\r\n\t\t\t[Section.VERTEX_HEAD, \"\"],\r\n\t\t\t[Section.VERTEX_MAIN_SUPPORT, \"\"]\r\n\t\t]);\r\n\r\n\t\tconst blendModes = new Map();\r\n\t\tconst defines = new Map();\r\n\t\tconst uniforms = new Map();\r\n\t\tconst extensions = new Set();\r\n\r\n\t\tlet id = 0, varyings = 0, attributes = 0;\r\n\t\tlet transformedUv = false;\r\n\t\tlet readDepth = false;\r\n\t\tlet result;\r\n\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\tif(effect.blendMode.getBlendFunction() === BlendFunction.SKIP) {\r\n\r\n\t\t\t\t// Check if this effect relies on depth and then continue.\r\n\t\t\t\tattributes |= (effect.getAttributes() & EffectAttribute.DEPTH);\r\n\r\n\t\t\t} else if((attributes & EffectAttribute.CONVOLUTION) !== 0 &&\r\n\t\t\t\t(effect.getAttributes() & EffectAttribute.CONVOLUTION) !== 0) {\r\n\r\n\t\t\t\tconsole.error(\"Convolution effects cannot be merged\", effect);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tattributes |= effect.getAttributes();\r\n\r\n\t\t\t\tresult = integrateEffect((\"e\" + id++), effect, shaderParts, blendModes, defines, uniforms, attributes);\r\n\r\n\t\t\t\tvaryings += result.varyings.length;\r\n\t\t\t\ttransformedUv = transformedUv || result.transformedUv;\r\n\t\t\t\treadDepth = readDepth || result.readDepth;\r\n\r\n\t\t\t\tif(effect.extensions !== null) {\r\n\r\n\t\t\t\t\t// Collect the WebGL extensions that are required by this effect.\r\n\t\t\t\t\tfor(const extension of effect.extensions) {\r\n\r\n\t\t\t\t\t\textensions.add(extension);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Integrate the relevant blend functions.\r\n\t\tfor(const blendMode of blendModes.values()) {\r\n\r\n\t\t\tshaderParts.set(Section.FRAGMENT_HEAD, shaderParts.get(Section.FRAGMENT_HEAD) +\r\n\t\t\t\tblendMode.getShaderCode().replace(blendRegExp, \"blend\" + blendMode.getBlendFunction()) + \"\\n\");\r\n\r\n\t\t}\r\n\r\n\t\t// Check if any effect relies on depth.\r\n\t\tif((attributes & EffectAttribute.DEPTH) !== 0) {\r\n\r\n\t\t\t// Only read depth if any effect actually uses this information.\r\n\t\t\tif(readDepth) {\r\n\r\n\t\t\t\tshaderParts.set(Section.FRAGMENT_MAIN_IMAGE, \"float depth = readDepth(UV);\\n\\n\\t\" +\r\n\t\t\t\t\tshaderParts.get(Section.FRAGMENT_MAIN_IMAGE));\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Only request a depth texture if none has been provided yet.\r\n\t\t\tthis.needsDepthTexture = (this.getDepthTexture() === null);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.needsDepthTexture = false;\r\n\r\n\t\t}\r\n\r\n\t\t// Check if any effect transforms UVs in the fragment shader.\r\n\t\tif(transformedUv) {\r\n\r\n\t\t\tshaderParts.set(Section.FRAGMENT_MAIN_UV, \"vec2 transformedUv = vUv;\\n\" +\r\n\t\t\t\tshaderParts.get(Section.FRAGMENT_MAIN_UV));\r\n\r\n\t\t\tdefines.set(\"UV\", \"transformedUv\");\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdefines.set(\"UV\", \"vUv\");\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure that leading preprocessor directives start at a new line.\r\n\t\tshaderParts.forEach((value, key, map) => map.set(key, value.trim().replace(/^#/, \"\\n#\")));\r\n\r\n\t\tthis.uniforms = uniforms.size;\r\n\t\tthis.varyings = varyings;\r\n\r\n\t\tthis.skipRendering = (id === 0);\r\n\t\tthis.needsSwap = !this.skipRendering;\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\t\tmaterial.setShaderParts(shaderParts).setDefines(defines).setUniforms(uniforms);\r\n\t\tmaterial.extensions = {};\r\n\r\n\t\tif(extensions.size > 0) {\r\n\r\n\t\t\t// Enable required WebGL extensions.\r\n\t\t\tfor(const extension of extensions) {\r\n\r\n\t\t\t\tmaterial.extensions[extension] = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the shader material.\r\n\t *\r\n\t * Warning: This method triggers a relatively expensive shader recompilation.\r\n\t *\r\n\t * @param {WebGLRenderer} [renderer] - The renderer.\r\n\t */\r\n\r\n\trecompile(renderer) {\r\n\r\n\t\tthis.updateMaterial();\r\n\r\n\t\tif(renderer !== undefined) {\r\n\r\n\t\t\tthis.verifyResources(renderer);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current depth texture.\r\n\t *\r\n\t * @return {Texture} The current depth texture, or null if there is none.\r\n\t */\r\n\r\n\tgetDepthTexture() {\r\n\r\n\t\treturn this.getFullscreenMaterial().uniforms.depthBuffer.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\t\tmaterial.uniforms.depthBuffer.value = depthTexture;\r\n\t\tmaterial.depthPacking = depthPacking;\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\teffect.setDepthTexture(depthTexture, depthPacking);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\t\tconst time = material.uniforms.time.value + deltaTime;\r\n\r\n\t\tif(this.needsUpdate) {\r\n\r\n\t\t\tthis.recompile(renderer);\r\n\r\n\t\t}\r\n\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\teffect.update(renderer, inputBuffer, deltaTime);\r\n\r\n\t\t}\r\n\r\n\t\tif(!this.skipRendering || this.renderToScreen) {\r\n\r\n\t\t\tmaterial.uniforms.inputBuffer.value = inputBuffer.texture;\r\n\t\t\tmaterial.uniforms.time.value = (time <= this.maxTime) ? time : this.minTime;\r\n\t\t\trenderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\r\n\t\t\trenderer.render(this.scene, this.camera);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.getFullscreenMaterial().setSize(width, height);\r\n\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\teffect.setSize(width, height);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tthis.capabilities = renderer.capabilities;\r\n\r\n\t\t// Initialize effects before building the shader.\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\teffect.initialize(renderer, alpha, frameBufferType);\r\n\t\t\teffect.addEventListener(\"change\", (event) => this.handleEvent(event));\r\n\r\n\t\t}\r\n\r\n\t\t// Initialize the fullscreen material.\r\n\t\tthis.updateMaterial();\r\n\t\tthis.verifyResources(renderer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Deletes disposable objects.\r\n\t *\r\n\t * This pass will be inoperative after this method was called!\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tsuper.dispose();\r\n\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\teffect.dispose();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles events.\r\n\t *\r\n\t * @param {Event} event - An event.\r\n\t */\r\n\r\n\thandleEvent(event) {\r\n\r\n\t\tswitch(event.type) {\r\n\r\n\t\t\tcase \"change\":\r\n\t\t\t\tthis.needsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A stencil mask pass.\r\n *\r\n * This pass requires that the input and output buffers have a stencil buffer.\r\n * You can enable the stencil buffer via the {@link EffectComposer} constructor.\r\n */\r\n\r\nclass MaskPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new mask pass.\r\n\t *\r\n\t * @param {Scene} scene - The scene to render.\r\n\t * @param {Camera} camera - The camera to use.\r\n\t */\r\n\r\n\tconstructor(scene, camera) {\r\n\r\n\t\tsuper(\"MaskPass\", scene, camera);\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass(false, false, true);\r\n\r\n\t\t/**\r\n\t\t * Inverse flag.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.inverse = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether this pass should clear the stencil buffer.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget clear() {\r\n\r\n\t\treturn this.clearPass.enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables auto clear.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset clear(value) {\r\n\r\n\t\tthis.clearPass.enabled = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst context = renderer.getContext();\r\n\t\tconst buffers = renderer.state.buffers;\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\t\tconst clearPass = this.clearPass;\r\n\r\n\t\tconst writeValue = this.inverse ? 0 : 1;\r\n\t\tconst clearValue = 1 - writeValue;\r\n\r\n\t\t// Don't update color or depth.\r\n\t\tbuffers.color.setMask(false);\r\n\t\tbuffers.depth.setMask(false);\r\n\r\n\t\t// Lock the buffers.\r\n\t\tbuffers.color.setLocked(true);\r\n\t\tbuffers.depth.setLocked(true);\r\n\r\n\t\t// Configure the stencil.\r\n\t\tbuffers.stencil.setTest(true);\r\n\t\tbuffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\r\n\t\tbuffers.stencil.setFunc(context.ALWAYS, writeValue, 0xffffffff);\r\n\t\tbuffers.stencil.setClear(clearValue);\r\n\t\tbuffers.stencil.setLocked(true);\r\n\r\n\t\t// Clear the stencil.\r\n\t\tif(this.clear) {\r\n\r\n\t\t\tif(this.renderToScreen) {\r\n\r\n\t\t\t\tclearPass.render(renderer, null);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tclearPass.render(renderer, inputBuffer);\r\n\t\t\t\tclearPass.render(renderer, outputBuffer);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Draw the mask.\r\n\t\tif(this.renderToScreen) {\r\n\r\n\t\t\trenderer.setRenderTarget(null);\r\n\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.setRenderTarget(inputBuffer);\r\n\t\t\trenderer.render(scene, camera);\r\n\t\t\trenderer.setRenderTarget(outputBuffer);\r\n\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t}\r\n\r\n\t\t// Unlock the buffers.\r\n\t\tbuffers.color.setLocked(false);\r\n\t\tbuffers.depth.setLocked(false);\r\n\r\n\t\t// Only render where the stencil is set to 1.\r\n\t\tbuffers.stencil.setLocked(false);\r\n\t\tbuffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff);\r\n\t\tbuffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\r\n\t\tbuffers.stencil.setLocked(true);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A pass that renders the normals of a given scene.\r\n */\r\n\r\nclass NormalPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new normal pass.\r\n\t *\r\n\t * @param {Scene} scene - The scene to render.\r\n\t * @param {Camera} camera - The camera to use to render the scene.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.resolutionScale=1.0] - Deprecated. Adjust the height or width instead for consistent results.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t * @param {WebGLRenderTarget} [options.renderTarget] - A custom render target.\r\n\t */\r\n\r\n\tconstructor(scene, camera, {\r\n\t\tresolutionScale = 1.0,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\trenderTarget\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"NormalPass\");\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * A render pass.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderPass = new RenderPass(scene, camera, new MeshNormalMaterial({\r\n\t\t\tmorphTargets: true,\r\n\t\t\tmorphNormals: true,\r\n\t\t\tskinning: true\r\n\t\t}));\r\n\r\n\t\tconst clearPass = this.renderPass.getClearPass();\r\n\t\tclearPass.overrideClearColor = new Color(0x7777ff);\r\n\t\tclearPass.overrideClearAlpha = 1.0;\r\n\r\n\t\t/**\r\n\t\t * A render target that contains the scene normals.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = renderTarget;\r\n\r\n\t\tif(this.renderTarget === undefined) {\r\n\r\n\t\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\t\tminFilter: NearestFilter,\r\n\t\t\t\tmagFilter: NearestFilter,\r\n\t\t\t\tformat: RGBFormat,\r\n\t\t\t\tstencilBuffer: false\r\n\t\t\t});\r\n\r\n\t\t\tthis.renderTarget.texture.name = \"NormalPass.Target\";\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * The desired render resolution.\r\n\t\t *\r\n\t\t * Use {@link Resizer.AUTO_SIZE} for the width or height to automatically\r\n\t\t * calculate it based on its counterpart and the original aspect ratio.\r\n\t\t *\r\n\t\t * @type {Resizer}\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Resizer(this, width, height, resolutionScale);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The normal texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.renderTarget.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolutionScale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolutionScale = scale;\r\n\t\tthis.setSize(this.resolution.base.x, this.resolution.base.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the scene normals.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst renderTarget = this.renderToScreen ? null : this.renderTarget;\r\n\t\tthis.renderPass.render(renderer, renderTarget, renderTarget);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\t\tresolution.base.set(width, height);\r\n\r\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A pass that renders the result from a previous pass to another render target.\r\n */\r\n\r\nclass SavePass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new save pass.\r\n\t *\r\n\t * @param {WebGLRenderTarget} [renderTarget] - A render target.\r\n\t * @param {Boolean} [resize=true] - Whether the render target should adjust to the size of the input buffer.\r\n\t */\r\n\r\n\tconstructor(renderTarget, resize = true) {\r\n\r\n\t\tsuper(\"SavePass\");\r\n\r\n\t\tthis.setFullscreenMaterial(new CopyMaterial());\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * The render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = renderTarget;\r\n\r\n\t\tif(renderTarget === undefined) {\r\n\r\n\t\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\t\tminFilter: LinearFilter,\r\n\t\t\t\tmagFilter: LinearFilter,\r\n\t\t\t\tstencilBuffer: false,\r\n\t\t\t\tdepthBuffer: false\r\n\t\t\t});\r\n\r\n\t\t\tthis.renderTarget.texture.name = \"SavePass.Target\";\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the render target should be resized automatically.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.resize = resize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Saves the input buffer.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tthis.getFullscreenMaterial().uniforms.inputBuffer.value = inputBuffer.texture;\r\n\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\r\n\t\trenderer.render(this.scene, this.camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tif(this.resize) {\r\n\r\n\t\t\tconst w = Math.max(width, 1);\r\n\t\t\tconst h = Math.max(height, 1);\r\n\r\n\t\t\tthis.renderTarget.setSize(w, h);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - A renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTarget.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTarget.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A shader pass.\r\n *\r\n * Renders any shader material as a fullscreen effect.\r\n *\r\n * This pass should not be used to create multiple chained effects. For a more\r\n * efficient solution, please refer to the {@link EffectPass}.\r\n */\r\n\r\nclass ShaderPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new shader pass.\r\n\t *\r\n\t * @param {ShaderMaterial} material - A shader material.\r\n\t * @param {String} [input=\"inputBuffer\"] - The name of the input buffer uniform.\r\n\t */\r\n\r\n\tconstructor(material, input = \"inputBuffer\") {\r\n\r\n\t\tsuper(\"ShaderPass\");\r\n\r\n\t\tthis.setFullscreenMaterial(material);\r\n\r\n\t\t/**\r\n\t\t * The input buffer uniform.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.uniform = null;\r\n\t\tthis.setInput(input);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the name of the input buffer uniform.\r\n\t *\r\n\t * Most fullscreen materials modify texels from an input texture. This pass\r\n\t * automatically assigns the main input buffer to the uniform identified by\r\n\t * the given name.\r\n\t *\r\n\t * @param {String} input - The name of the input buffer uniform.\r\n\t */\r\n\r\n\tsetInput(input) {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\r\n\t\tthis.uniform = null;\r\n\r\n\t\tif(material !== null) {\r\n\r\n\t\t\tconst uniforms = material.uniforms;\r\n\r\n\t\t\tif(uniforms !== undefined && uniforms[input] !== undefined) {\r\n\r\n\t\t\t\tthis.uniform = uniforms[input];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tif(this.uniform !== null && inputBuffer !== null) {\r\n\r\n\t\t\tthis.uniform.value = inputBuffer.texture;\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\r\n\t\trenderer.render(this.scene, this.camera);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * The EffectComposer may be used in place of a normal WebGLRenderer.\r\n *\r\n * The auto clear behaviour of the provided renderer will be disabled to prevent\r\n * unnecessary clear operations.\r\n *\r\n * It is common practice to use a {@link RenderPass} as the first pass to\r\n * automatically clear the buffers and render a scene for further processing.\r\n *\r\n * @implements {Resizable}\r\n * @implements {Disposable}\r\n */\r\n\r\nclass EffectComposer {\r\n\r\n\t/**\r\n\t * Constructs a new effect composer.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer that should be used.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Boolean} [options.depthBuffer=true] - Whether the main render targets should have a depth buffer.\r\n\t * @param {Boolean} [options.stencilBuffer=false] - Whether the main render targets should have a stencil buffer.\r\n\t * @param {Number} [options.multisampling=0] - The number of samples used for multisample antialiasing. Requires WebGL 2.\r\n\t * @param {Boolean} [options.frameBufferType] - The type of the internal frame buffers. It's recommended to use HalfFloatType if possible.\r\n\t */\r\n\r\n\tconstructor(renderer = null, {\r\n\t\tdepthBuffer = true,\r\n\t\tstencilBuffer = false,\r\n\t\tmultisampling = 0,\r\n\t\tframeBufferType\r\n\t} = {}) {\r\n\r\n\t\t/**\r\n\t\t * The renderer.\r\n\t\t *\r\n\t\t * @type {WebGLRenderer}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderer = renderer;\r\n\r\n\t\t/**\r\n\t\t * The input buffer.\r\n\t\t *\r\n\t\t * Reading from and writing to the same render target should be avoided.\r\n\t\t * Therefore, two seperate yet identical buffers are used.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.inputBuffer = null;\r\n\r\n\t\t/**\r\n\t\t * The output buffer.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.outputBuffer = null;\r\n\r\n\t\tif(this.renderer !== null) {\r\n\r\n\t\t\tthis.renderer.autoClear = false;\r\n\t\t\tthis.inputBuffer = this.createBuffer(depthBuffer, stencilBuffer, frameBufferType, multisampling);\r\n\t\t\tthis.outputBuffer = this.inputBuffer.clone();\r\n\t\t\tthis.enableExtensions();\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * A copy pass used for copying masked scenes.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.copyPass = new ShaderPass(new CopyMaterial());\r\n\r\n\t\t/**\r\n\t\t * A depth texture.\r\n\t\t *\r\n\t\t * @type {DepthTexture}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.depthTexture = null;\r\n\r\n\t\t/**\r\n\t\t * The passes.\r\n\t\t *\r\n\t\t * @type {Pass[]}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.passes = [];\r\n\r\n\t\t/**\r\n\t\t * Determines whether the last pass automatically renders to screen.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.autoRenderToScreen = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current amount of samples used for multisample antialiasing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget multisampling() {\r\n\r\n\t\treturn (this.inputBuffer instanceof WebGLMultisampleRenderTarget) ?\r\n\t\t\tthis.inputBuffer.samples : 0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of MSAA samples.\r\n\t *\r\n\t * Requires WebGL 2. Set to zero to disable multisampling.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset multisampling(value) {\r\n\r\n\t\tconst buffer = this.inputBuffer;\r\n\t\tconst multisampling = this.multisampling;\r\n\r\n\t\tif(multisampling > 0 && value > 0) {\r\n\r\n\t\t\tthis.inputBuffer.samples = value;\r\n\t\t\tthis.outputBuffer.samples = value;\r\n\r\n\t\t} else if(multisampling !== value) {\r\n\r\n\t\t\tthis.inputBuffer.dispose();\r\n\t\t\tthis.outputBuffer.dispose();\r\n\r\n\t\t\t// Enable or disable MSAA.\r\n\t\t\tthis.inputBuffer = this.createBuffer(\r\n\t\t\t\tbuffer.depthBuffer,\r\n\t\t\t\tbuffer.stencilBuffer,\r\n\t\t\t\tbuffer.texture.type,\r\n\t\t\t\tvalue\r\n\t\t\t);\r\n\r\n\t\t\tthis.outputBuffer = this.inputBuffer.clone();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the WebGL renderer.\r\n\t *\r\n\t * You may replace the renderer at any time by using\r\n\t * {@link EffectComposer#replaceRenderer}.\r\n\t *\r\n\t * @return {WebGLRenderer} The renderer.\r\n\t */\r\n\r\n\tgetRenderer() {\r\n\r\n\t\treturn this.renderer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Explicitly enables required WebGL extensions.\r\n\t *\r\n\t * @private\r\n\t */\r\n\r\n\tenableExtensions() {\r\n\r\n\t\tconst frameBufferType = this.inputBuffer.texture.type;\r\n\t\tconst capabilities = this.renderer.capabilities;\r\n\t\tconst context = this.renderer.getContext();\r\n\r\n\t\tif(frameBufferType !== UnsignedByteType) {\r\n\r\n\t\t\tif(capabilities.isWebGL2) {\r\n\r\n\t\t\t\tcontext.getExtension(\"EXT_color_buffer_float\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcontext.getExtension(\"EXT_color_buffer_half_float\");\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Replaces the current renderer with the given one.\r\n\t *\r\n\t * The auto clear mechanism of the provided renderer will be disabled. If the\r\n\t * new render size differs from the previous one, all passes will be updated.\r\n\t *\r\n\t * By default, the DOM element of the current renderer will automatically be\r\n\t * removed from its parent node and the DOM element of the new renderer will\r\n\t * take its place.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The new renderer.\r\n\t * @param {Boolean} updateDOM - Indicates whether the old canvas should be replaced by the new one in the DOM.\r\n\t * @return {WebGLRenderer} The old renderer.\r\n\t */\r\n\r\n\treplaceRenderer(renderer, updateDOM = true) {\r\n\r\n\t\tconst oldRenderer = this.renderer;\r\n\r\n\t\tif(oldRenderer !== null && oldRenderer !== renderer) {\r\n\r\n\t\t\tconst oldSize = oldRenderer.getSize(new Vector2$1());\r\n\t\t\tconst newSize = renderer.getSize(new Vector2$1());\r\n\t\t\tconst parent = oldRenderer.domElement.parentNode;\r\n\r\n\t\t\tthis.renderer = renderer;\r\n\t\t\tthis.renderer.autoClear = false;\r\n\r\n\t\t\tif(!oldSize.equals(newSize)) {\r\n\r\n\t\t\t\tthis.setSize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(updateDOM && parent !== null) {\r\n\r\n\t\t\t\tparent.removeChild(oldRenderer.domElement);\r\n\t\t\t\tparent.appendChild(renderer.domElement);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.enableExtensions();\r\n\r\n\t\t}\r\n\r\n\t\treturn oldRenderer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a depth texture attachment that will be provided to all passes.\r\n\t *\r\n\t * Note: When a shader reads from a depth texture and writes to a render\r\n\t * target that uses the same depth texture attachment, the depth information\r\n\t * will be lost. This happens even if `depthWrite` is disabled.\r\n\t *\r\n\t * @private\r\n\t * @return {DepthTexture} The depth texture.\r\n\t */\r\n\r\n\tcreateDepthTexture() {\r\n\r\n\t\tconst depthTexture = this.depthTexture = new DepthTexture();\r\n\r\n\t\tif(this.inputBuffer.stencilBuffer) {\r\n\r\n\t\t\tdepthTexture.format = DepthStencilFormat;\r\n\t\t\tdepthTexture.type = UnsignedInt248Type;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdepthTexture.type = UnsignedIntType;\r\n\r\n\t\t}\r\n\r\n\t\treturn depthTexture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Deletes the current depth texture.\r\n\t *\r\n\t * @private\r\n\t */\r\n\r\n\tdeleteDepthTexture() {\r\n\r\n\t\tif(this.depthTexture !== null) {\r\n\r\n\t\t\tthis.depthTexture.dispose();\r\n\t\t\tthis.depthTexture = null;\r\n\r\n\t\t\tthis.inputBuffer.depthTexture = null;\r\n\t\t\tthis.outputBuffer.depthTexture = null;\r\n\r\n\t\t\tfor(const pass of this.passes) {\r\n\r\n\t\t\t\tpass.setDepthTexture(null);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new render target by replicating the renderer's canvas.\r\n\t *\r\n\t * The created render target uses a linear filter for texel minification and\r\n\t * magnification. Its render texture format depends on whether the renderer\r\n\t * uses the alpha channel. Mipmaps are disabled.\r\n\t *\r\n\t * Note: The buffer format will also be set to RGBA if the frame buffer type\r\n\t * is HalfFloatType because RGB16F buffers are not renderable.\r\n\t *\r\n\t * @param {Boolean} depthBuffer - Whether the render target should have a depth buffer.\r\n\t * @param {Boolean} stencilBuffer - Whether the render target should have a stencil buffer.\r\n\t * @param {Number} type - The frame buffer type.\r\n\t * @param {Number} multisampling - The number of samples to use for antialiasing.\r\n\t * @return {WebGLRenderTarget} A new render target that equals the renderer's canvas.\r\n\t */\r\n\r\n\tcreateBuffer(depthBuffer, stencilBuffer, type, multisampling) {\r\n\r\n\t\tconst size = this.renderer.getDrawingBufferSize(new Vector2$1());\r\n\t\tconst alpha = this.renderer.getContext().getContextAttributes().alpha;\r\n\r\n\t\tconst options = {\r\n\t\t\tformat: (!alpha && type === UnsignedByteType) ? RGBFormat : RGBAFormat,\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer,\r\n\t\t\tdepthBuffer,\r\n\t\t\ttype\r\n\t\t};\r\n\r\n\t\tconst renderTarget = (multisampling > 0) ?\r\n\t\t\tnew WebGLMultisampleRenderTarget(size.width, size.height, options) :\r\n\t\t\tnew WebGLRenderTarget(size.width, size.height, options);\r\n\r\n\t\tif(multisampling > 0) {\r\n\r\n\t\t\trenderTarget.samples = multisampling;\r\n\r\n\t\t}\r\n\r\n\t\trenderTarget.texture.name = \"EffectComposer.Buffer\";\r\n\t\trenderTarget.texture.generateMipmaps = false;\r\n\r\n\t\treturn renderTarget;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a pass, optionally at a specific index.\r\n\t *\r\n\t * @param {Pass} pass - A new pass.\r\n\t * @param {Number} [index] - An index at which the pass should be inserted.\r\n\t */\r\n\r\n\taddPass(pass, index) {\r\n\r\n\t\tconst passes = this.passes;\r\n\t\tconst renderer = this.renderer;\r\n\t\tconst alpha = renderer.getContext().getContextAttributes().alpha;\r\n\t\tconst frameBufferType = this.inputBuffer.texture.type;\r\n\t\tconst drawingBufferSize = renderer.getDrawingBufferSize(new Vector2$1());\r\n\r\n\t\tpass.setSize(drawingBufferSize.width, drawingBufferSize.height);\r\n\t\tpass.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\tif(this.autoRenderToScreen) {\r\n\r\n\t\t\tif(passes.length > 0) {\r\n\r\n\t\t\t\tpasses[passes.length - 1].renderToScreen = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(pass.renderToScreen) {\r\n\r\n\t\t\t\tthis.autoRenderToScreen = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(index !== undefined) {\r\n\r\n\t\t\tpasses.splice(index, 0, pass);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpasses.push(pass);\r\n\r\n\t\t}\r\n\r\n\t\tif(this.autoRenderToScreen) {\r\n\r\n\t\t\tpasses[passes.length - 1].renderToScreen = true;\r\n\r\n\t\t}\r\n\r\n\t\tif(pass.needsDepthTexture || this.depthTexture !== null) {\r\n\r\n\t\t\tif(this.depthTexture === null) {\r\n\r\n\t\t\t\tconst depthTexture = this.createDepthTexture();\r\n\r\n\t\t\t\tfor(pass of passes) {\r\n\r\n\t\t\t\t\tpass.setDepthTexture(depthTexture);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tpass.setDepthTexture(this.depthTexture);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a pass.\r\n\t *\r\n\t * @param {Pass} pass - The pass.\r\n\t */\r\n\r\n\tremovePass(pass) {\r\n\r\n\t\tconst passes = this.passes;\r\n\t\tconst index = passes.indexOf(pass);\r\n\t\tconst removed = (passes.splice(index, 1).length > 0);\r\n\r\n\t\tif(removed) {\r\n\r\n\t\t\tif(this.depthTexture !== null) {\r\n\r\n\t\t\t\t// Check if the depth texture is still required.\r\n\t\t\t\tconst reducer = (a, b) => (a || b.needsDepthTexture);\r\n\t\t\t\tconst depthTextureRequired = passes.reduce(reducer, false);\r\n\r\n\t\t\t\tif(!depthTextureRequired) {\r\n\r\n\t\t\t\t\tthis.deleteDepthTexture();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(this.autoRenderToScreen) {\r\n\r\n\t\t\t\t// Check if the removed pass was the last one.\r\n\t\t\t\tif(index === passes.length) {\r\n\r\n\t\t\t\t\tpass.renderToScreen = false;\r\n\r\n\t\t\t\t\tif(passes.length > 0) {\r\n\r\n\t\t\t\t\t\tpasses[passes.length - 1].renderToScreen = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all passes without deleting them.\r\n\t */\r\n\r\n\tremoveAllPasses() {\r\n\r\n\t\tconst passes = this.passes;\r\n\r\n\t\tthis.deleteDepthTexture();\r\n\r\n\t\tif(passes.length > 0) {\r\n\r\n\t\t\tif(this.autoRenderToScreen) {\r\n\r\n\t\t\t\tpasses[passes.length - 1].renderToScreen = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.passes = [];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders all enabled passes in the order in which they were added.\r\n\t *\r\n\t * @param {Number} deltaTime - The time since the last frame in seconds.\r\n\t */\r\n\r\n\trender(deltaTime) {\r\n\r\n\t\tconst renderer = this.renderer;\r\n\t\tconst copyPass = this.copyPass;\r\n\r\n\t\tlet inputBuffer = this.inputBuffer;\r\n\t\tlet outputBuffer = this.outputBuffer;\r\n\r\n\t\tlet stencilTest = false;\r\n\t\tlet context, stencil, buffer;\r\n\r\n\t\tfor(const pass of this.passes) {\r\n\r\n\t\t\tif(pass.enabled) {\r\n\r\n\t\t\t\tpass.render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest);\r\n\r\n\t\t\t\tif(pass.needsSwap) {\r\n\r\n\t\t\t\t\tif(stencilTest) {\r\n\r\n\t\t\t\t\t\tcopyPass.renderToScreen = pass.renderToScreen;\r\n\t\t\t\t\t\tcontext = renderer.getContext();\r\n\t\t\t\t\t\tstencil = renderer.state.buffers.stencil;\r\n\r\n\t\t\t\t\t\t// Preserve the unaffected pixels.\r\n\t\t\t\t\t\tstencil.setFunc(context.NOTEQUAL, 1, 0xffffffff);\r\n\t\t\t\t\t\tcopyPass.render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest);\r\n\t\t\t\t\t\tstencil.setFunc(context.EQUAL, 1, 0xffffffff);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbuffer = inputBuffer;\r\n\t\t\t\t\tinputBuffer = outputBuffer;\r\n\t\t\t\t\toutputBuffer = buffer;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(pass instanceof MaskPass) {\r\n\r\n\t\t\t\t\tstencilTest = true;\r\n\r\n\t\t\t\t} else if(pass instanceof ClearMaskPass) {\r\n\r\n\t\t\t\t\tstencilTest = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the size of the buffers and the renderer's output canvas.\r\n\t *\r\n\t * Every pass will be informed of the new size. It's up to each pass how that\r\n\t * information is used.\r\n\t *\r\n\t * If no width or height is specified, the render targets and passes will be\r\n\t * updated with the current size of the renderer.\r\n\t *\r\n\t * @param {Number} [width] - The width.\r\n\t * @param {Number} [height] - The height.\r\n\t * @param {Boolean} [updateStyle] - Determines whether the style of the canvas should be updated.\r\n\t */\r\n\r\n\tsetSize(width, height, updateStyle) {\r\n\r\n\t\tconst renderer = this.renderer;\r\n\r\n\t\tif(width === undefined || height === undefined) {\r\n\r\n\t\t\tconst size = renderer.getSize(new Vector2$1());\r\n\t\t\twidth = size.width; height = size.height;\r\n\r\n\t\t}\r\n\r\n\t\t// Update the logical render size.\r\n\t\trenderer.setSize(width, height, updateStyle);\r\n\r\n\t\t// The drawing buffer size takes the device pixel ratio into account.\r\n\t\tconst drawingBufferSize = renderer.getDrawingBufferSize(new Vector2$1());\r\n\r\n\t\tthis.inputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\r\n\t\tthis.outputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\r\n\r\n\t\tfor(const pass of this.passes) {\r\n\r\n\t\t\tpass.setSize(drawingBufferSize.width, drawingBufferSize.height);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Resets this composer by deleting all passes and creating new buffers.\r\n\t */\r\n\r\n\treset() {\r\n\r\n\t\tconst renderTarget = this.inputBuffer.clone();\r\n\r\n\t\tthis.dispose();\r\n\r\n\t\t// Reanimate.\r\n\t\tthis.inputBuffer = renderTarget;\r\n\t\tthis.outputBuffer = renderTarget.clone();\r\n\t\tthis.depthTexture = null;\r\n\t\tthis.copyPass = new ShaderPass(new CopyMaterial());\r\n\t\tthis.autoRenderToScreen = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Destroys this composer and all passes.\r\n\t *\r\n\t * This method deallocates all disposable objects created by the passes. It\r\n\t * also deletes the main frame buffers of this composer.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tfor(const pass of this.passes) {\r\n\r\n\t\t\tpass.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.passes = [];\r\n\r\n\t\tif(this.inputBuffer !== null) {\r\n\r\n\t\t\tthis.inputBuffer.dispose();\r\n\t\t\tthis.inputBuffer = null;\r\n\r\n\t\t}\r\n\r\n\t\tif(this.outputBuffer !== null) {\r\n\r\n\t\t\tthis.outputBuffer.dispose();\r\n\t\t\tthis.outputBuffer = null;\r\n\r\n\t\t}\r\n\r\n\t\tif(this.depthTexture !== null) {\r\n\r\n\t\t\tthis.depthTexture.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.copyPass.dispose();\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * The initializable contract.\r\n *\r\n * Implemented by objects that can be initialized.\r\n *\r\n * @interface\r\n */\r\n\r\nclass Initializable {\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - A renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {}\r\n\r\n}\r\n\r\n/**\r\n * The Resizable contract.\r\n *\r\n * Implemented by objects that can be resized.\r\n *\r\n * @interface\r\n */\r\n\r\nclass Resizable {\r\n\r\n\t/**\r\n\t * Sets the size of this object.\r\n\t *\r\n\t * @param {Number} width - The new width.\r\n\t * @param {Number} height - The new height.\r\n\t */\r\n\r\n\tsetSize(width, height) {}\r\n\r\n}\r\n\r\n/**\r\n * An object selection.\r\n *\r\n * Object selections use render layers to facilitate quick and efficient\r\n * visibility changes.\r\n */\r\n\r\nclass Selection extends Set {\r\n\r\n\t/**\r\n\t * Constructs a new selection.\r\n\t *\r\n\t * @param {Iterable<Object3D>} [iterable] - A collection of objects that should be added to this selection.\r\n\t * @param {Number} [layer=10] - A dedicated render layer for selected objects.\r\n\t */\r\n\r\n\tconstructor(iterable, layer = 10) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The current render layer for selected objects.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.currentLayer = layer;\r\n\r\n\t\tif(iterable !== undefined) {\r\n\r\n\t\t\tthis.set(iterable);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A dedicated render layer for selected objects.\r\n\t *\r\n\t * This layer is set to 10 by default. If this collides with your own custom\r\n\t * layers, please change it to a free layer before rendering!\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget layer() {\r\n\r\n\t\treturn this.currentLayer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render layer of selected objects.\r\n\t *\r\n\t * The current selection will be updated accordingly.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset layer(value) {\r\n\r\n\t\tconst currentLayer = this.currentLayer;\r\n\r\n\t\tfor(const object of this) {\r\n\r\n\t\t\tobject.layers.disable(currentLayer);\r\n\t\t\tobject.layers.enable(value);\r\n\r\n\t\t}\r\n\r\n\t\tthis.currentLayer = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears this selection.\r\n\t *\r\n\t * @return {Selection} This selection.\r\n\t */\r\n\r\n\tclear() {\r\n\r\n\t\tconst layer = this.layer;\r\n\r\n\t\tfor(const object of this) {\r\n\r\n\t\t\tobject.layers.disable(layer);\r\n\r\n\t\t}\r\n\r\n\t\treturn super.clear();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears this selection and adds the given objects.\r\n\t *\r\n\t * @param {Iterable<Object3D>} objects - The objects that should be selected. This array will be copied.\r\n\t * @return {Selection} This selection.\r\n\t */\r\n\r\n\tset(objects) {\r\n\r\n\t\tthis.clear();\r\n\r\n\t\tfor(const object of objects) {\r\n\r\n\t\t\tthis.add(object);\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * An alias for {@link has}.\r\n\t *\r\n\t * @param {Object3D} object - An object.\r\n\t * @return {Number} Returns 0 if the given object is currently selected, or -1 otherwise.\r\n\t * @deprecated Added for backward compatibility. Use has instead.\r\n\t */\r\n\r\n\tindexOf(object) {\r\n\r\n\t\treturn this.has(object) ? 0 : -1;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an object to this selection.\r\n\t *\r\n\t * @param {Object3D} object - The object that should be selected.\r\n\t * @return {Selection} This selection.\r\n\t */\r\n\r\n\tadd(object) {\r\n\r\n\t\tobject.layers.enable(this.layer);\r\n\t\tsuper.add(object);\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Removes an object from this selection.\r\n\t *\r\n\t * @param {Object3D} object - The object that should be deselected.\r\n\t * @return {Boolean} Returns true if an object has successfully been removed from this selection; otherwise false.\r\n\t */\r\n\r\n\tdelete(object) {\r\n\r\n\t\tif(this.has(object)) {\r\n\r\n\t\t\tobject.layers.disable(this.layer);\r\n\r\n\t\t}\r\n\r\n\t\treturn super.delete(object);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the visibility of all selected objects.\r\n\t *\r\n\t * This method enables or disables render layer 0 of all selected objects.\r\n\t *\r\n\t * @param {Boolean} visible - Whether the selected objects should be visible.\r\n\t * @return {Selection} This selection.\r\n\t */\r\n\r\n\tsetVisible(visible) {\r\n\r\n\t\tfor(const object of this) {\r\n\r\n\t\t\tif(visible) {\r\n\r\n\t\t\t\tobject.layers.enable(0);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tobject.layers.disable(0);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$e = \"uniform sampler2D texture;uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(texture,uv)*intensity,0.0,1.0);}\";\r\n\r\n/**\r\n * A bloom effect.\r\n *\r\n * This effect uses the fast Kawase convolution technique and a luminance filter\r\n * to blur bright highlights.\r\n */\r\n\r\nclass BloomEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new bloom effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\r\n\t * @param {Number} [options.luminanceThreshold=0.9] - The luminance threshold. Raise this value to mask out darker elements in the scene. Range is [0, 1].\r\n\t * @param {Number} [options.luminanceSmoothing=0.025] - Controls the smoothness of the luminance threshold. Range is [0, 1].\r\n\t * @param {Number} [options.resolutionScale=0.5] - Deprecated. Use height or width instead.\r\n\t * @param {Number} [options.intensity=1.0] - The intensity.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t * @param {KernelSize} [options.kernelSize=KernelSize.LARGE] - The blur kernel size.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tblendFunction = BlendFunction.SCREEN,\r\n\t\tluminanceThreshold = 0.9,\r\n\t\tluminanceSmoothing = 0.025,\r\n\t\tresolutionScale = 0.5,\r\n\t\tintensity = 1.0,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\tkernelSize = KernelSize.LARGE\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"BloomEffect\", fragmentShader$e, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"texture\", new Uniform(null)],\r\n\t\t\t\t[\"intensity\", new Uniform(intensity)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTarget.texture.name = \"Bloom.Target\";\r\n\t\tthis.renderTarget.texture.generateMipmaps = false;\r\n\r\n\t\tthis.uniforms.get(\"texture\").value = this.renderTarget.texture;\r\n\r\n\t\t/**\r\n\t\t * A blur pass.\r\n\t\t *\r\n\t\t * @type {BlurPass}\r\n\t\t */\r\n\r\n\t\tthis.blurPass = new BlurPass({ resolutionScale, width, height, kernelSize });\r\n\t\tthis.blurPass.resolution.resizable = this;\r\n\r\n\t\t/**\r\n\t\t * A luminance shader pass.\r\n\t\t *\r\n\t\t * You may disable this pass to deactivate luminance filtering.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t */\r\n\r\n\t\tthis.luminancePass = new ShaderPass(new LuminanceMaterial(true));\r\n\r\n\t\tthis.luminanceMaterial.threshold = luminanceThreshold;\r\n\t\tthis.luminanceMaterial.smoothing = luminanceSmoothing;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A texture that contains the intermediate result of this effect.\r\n\t *\r\n\t * This texture will be applied to the scene colors unless the blend function\r\n\t * is set to `SKIP`.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.renderTarget.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The luminance material.\r\n\t *\r\n\t * @type {LuminanceMaterial}\r\n\t */\r\n\r\n\tget luminanceMaterial() {\r\n\r\n\t\treturn this.luminancePass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of this effect.\r\n\t *\r\n\t * @type {Resizer}\r\n\t */\r\n\r\n\tget resolution() {\r\n\r\n\t\treturn this.blurPass.resolution;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current width of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.resolution.width;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render width.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tset width(value) {\r\n\r\n\t\tthis.resolution.width = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current height of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.resolution.height;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render height.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tset height(value) {\r\n\r\n\t\tthis.resolution.height = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether dithering is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tget dithering() {\r\n\r\n\t\treturn this.blurPass.dithering;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables dithering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tset dithering(value) {\r\n\r\n\t\tthis.blurPass.dithering = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The blur kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tget kernelSize() {\r\n\r\n\t\treturn this.blurPass.kernelSize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tset kernelSize(value) {\r\n\r\n\t\tthis.blurPass.kernelSize = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated Use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.\r\n\t */\r\n\r\n\tget distinction() {\r\n\r\n\t\tconsole.warn(this.name, \"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.\");\r\n\r\n\t\treturn 1.0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated Use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.\r\n\t */\r\n\r\n\tset distinction(value) {\r\n\r\n\t\tconsole.warn(this.name, \"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The bloom intensity.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget intensity() {\r\n\r\n\t\treturn this.uniforms.get(\"intensity\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the bloom intensity.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset intensity(value) {\r\n\r\n\t\tthis.uniforms.get(\"intensity\").value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolution.scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolution.scale = scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst renderTarget = this.renderTarget;\r\n\r\n\t\tif(this.luminancePass.enabled) {\r\n\r\n\t\t\tthis.luminancePass.render(renderer, inputBuffer, renderTarget);\r\n\t\t\tthis.blurPass.render(renderer, renderTarget, renderTarget);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.blurPass.render(renderer, inputBuffer, renderTarget);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.blurPass.setSize(width, height);\r\n\t\tthis.renderTarget.setSize(this.resolution.width, this.resolution.height);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tthis.blurPass.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTarget.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTarget.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$f = \"uniform float focus;uniform float dof;uniform float aperture;uniform float maxBlur;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec2 aspectCorrection=vec2(1.0,aspect);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nfloat focusNear=clamp(focus-dof,0.0,1.0);float focusFar=clamp(focus+dof,0.0,1.0);float low=step(linearDepth,focusNear);float high=step(focusFar,linearDepth);float factor=(linearDepth-focusNear)*low+(linearDepth-focusFar)*high;vec2 dofBlur=vec2(clamp(factor*aperture,-maxBlur,maxBlur));vec2 dofblur9=dofBlur*0.9;vec2 dofblur7=dofBlur*0.7;vec2 dofblur4=dofBlur*0.4;vec4 color=inputColor;color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur4);outputColor=color/41.0;}\";\r\n\r\n/**\r\n * A depth of field (bokeh) effect.\r\n *\r\n * Original shader code by Martins Upitis:\r\n *  http://artmartinsh.blogspot.com/2010/02/glsl-lens-blur-filter-with-bokeh.html\r\n *\r\n * @deprecated Use DepthOfFieldEffect instead.\r\n */\r\n\r\nclass BokehEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new bokeh effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.focus=0.5] - The focus distance ratio, ranging from 0.0 to 1.0.\r\n\t * @param {Number} [options.dof=0.02] - Depth of field. An area in front of and behind the focal point that still appears sharp.\r\n\t * @param {Number} [options.aperture=0.015] - Camera aperture scale. Bigger values for stronger blur and shallower depth of field.\r\n\t * @param {Number} [options.maxBlur=1.0] - The maximum blur strength.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, focus = 0.5, dof = 0.02, aperture = 0.015, maxBlur = 1.0 } = {}) {\r\n\r\n\t\tsuper(\"BokehEffect\", fragmentShader$f, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"focus\", new Uniform(focus)],\r\n\t\t\t\t[\"dof\", new Uniform(dof)],\r\n\t\t\t\t[\"aperture\", new Uniform(aperture)],\r\n\t\t\t\t[\"maxBlur\", new Uniform(maxBlur)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$g = \"uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}\";\r\n\r\n/**\r\n * A brightness/contrast effect.\r\n *\r\n * Reference: https://github.com/evanw/glfx.js\r\n */\r\n\r\nclass BrightnessContrastEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new brightness/contrast effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.brightness=0.0] - The brightness factor, ranging from -1 to 1, where 0 means no change.\r\n\t * @param {Number} [options.contrast=0.0] - The contrast factor, ranging from -1 to 1, where 0 means no change.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, brightness = 0.0, contrast = 0.0 } = {}) {\r\n\r\n\t\tsuper(\"BrightnessContrastEffect\", fragmentShader$g, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"brightness\", new Uniform(brightness)],\r\n\t\t\t\t[\"contrast\", new Uniform(contrast)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$h = \"void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float sum=inputColor.r+inputColor.g+inputColor.b;outputColor=vec4(vec3(sum/3.0),inputColor.a);}\";\r\n\r\n/**\r\n * A color average effect.\r\n */\r\n\r\nclass ColorAverageEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new color average effect.\r\n\t *\r\n\t * @param {BlendFunction} [blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t */\r\n\r\n\tconstructor(blendFunction = BlendFunction.NORMAL) {\r\n\r\n\t\tsuper(\"ColorAverageEffect\", fragmentShader$h, { blendFunction });\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$i = \"uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}\";\r\n\r\n/**\r\n * A color depth effect.\r\n *\r\n * Simulates a hardware limitation to achieve a retro feel.\r\n */\r\n\r\nclass ColorDepthEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new color depth effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.bits=16] - The color bit depth.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, bits = 16 } = {}) {\r\n\r\n\t\tsuper(\"ColorDepthEffect\", fragmentShader$i, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"factor\", new Uniform(1.0)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The current amount of bits.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bits = 0;\r\n\r\n\t\tthis.setBitDepth(bits);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current color bit depth.\r\n\t *\r\n\t * @return {Number} The color bit depth.\r\n\t */\r\n\r\n\tgetBitDepth() {\r\n\r\n\t\treturn this.bits;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the virtual amount of color bits.\r\n\t *\r\n\t * Each color channel will use a third of the available bits. The alpha\r\n\t * channel remains unaffected.\r\n\t *\r\n\t * Note that the real color depth will not be altered by this effect.\r\n\t *\r\n\t * @param {Number} bits - The new color bit depth.\r\n\t */\r\n\r\n\tsetBitDepth(bits) {\r\n\r\n\t\tthis.bits = bits;\r\n\t\tthis.uniforms.get(\"factor\").value = Math.pow(2.0, bits / 3.0);\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$j = \"varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 color=inputColor;\\n#ifdef ALPHA\\nvec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;color.r=ra.x;color.b=ba.x;color.a=max(max(ra.y,ba.y),inputColor.a);\\n#else\\ncolor.r=texture2D(inputBuffer,vUvR).r;color.b=texture2D(inputBuffer,vUvB).b;\\n#endif\\noutputColor=color;}\";\r\n\r\nvar vertexShader$8 = \"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vUvR=uv+offset;vUvB=uv-offset;}\";\r\n\r\n/**\r\n * A chromatic aberration effect.\r\n */\r\n\r\nclass ChromaticAberrationEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new chromatic aberration effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Vector2} [options.offset] - The color offset.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, offset = new Vector2$1(0.001, 0.0005) } = {}) {\r\n\r\n\t\tsuper(\"ChromaticAberrationEffect\", fragmentShader$j, {\r\n\r\n\t\t\tvertexShader: vertexShader$8,\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.CONVOLUTION,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"offset\", new Uniform(offset)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The color offset.\r\n\t *\r\n\t * @type {Vector2}\r\n\t */\r\n\r\n\tget offset() {\r\n\r\n\t\treturn this.uniforms.get(\"offset\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Vector2}\r\n\t */\r\n\r\n\tset offset(value) {\r\n\r\n\t\tthis.uniforms.get(\"offset\").value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tif(alpha) {\r\n\r\n\t\t\tthis.defines.set(\"ALPHA\", \"1\");\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.delete(\"ALPHA\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$k = \"void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\\n#ifdef INVERTED\\nvec3 color=vec3(1.0-depth);\\n#else\\nvec3 color=vec3(depth);\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\r\n\r\n/**\r\n * A depth visualization effect.\r\n *\r\n * Useful for debugging.\r\n */\r\n\r\nclass DepthEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new depth effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Boolean} [options.inverted=false] - Whether the depth values should be inverted.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, inverted = false } = {}) {\r\n\r\n\t\tsuper(\"DepthEffect\", fragmentShader$k, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.DEPTH\r\n\r\n\t\t});\r\n\r\n\t\tthis.inverted = inverted;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether depth should be inverted.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget inverted() {\r\n\r\n\t\treturn this.defines.has(\"INVERTED\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables depth inversion.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset inverted(value) {\r\n\r\n\t\tif(this.inverted !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tthis.defines.set(\"INVERTED\", \"1\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"INVERTED\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$l = \"uniform sampler2D nearColorBuffer;uniform sampler2D farColorBuffer;uniform sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}\";\r\n\r\n/**\r\n * A depth of field effect.\r\n *\r\n * Based on a graphics study by Adrian Courrèges and an article by Steve Avery:\r\n *  https://www.adriancourreges.com/blog/2016/09/09/doom-2016-graphics-study/\r\n *  https://pixelmischiefblog.wordpress.com/2016/11/25/bokeh-depth-of-field/\r\n */\r\n\r\nclass DepthOfFieldEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new depth of field effect.\r\n\t *\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.focusDistance=0.0] - The normalized focus distance. Range is [0.0, 1.0].\r\n\t * @param {Number} [options.focalLength=0.05] - The focal length. Range is [0.0, 1.0].\r\n\t * @param {Number} [options.bokehScale=1.0] - The scale of the bokeh blur.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t */\r\n\r\n\tconstructor(camera, {\r\n\t\tblendFunction = BlendFunction.NORMAL,\r\n\t\tfocusDistance = 0.0,\r\n\t\tfocalLength = 0.1,\r\n\t\tbokehScale = 1.0,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"DepthOfFieldEffect\", fragmentShader$l, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.DEPTH,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"nearColorBuffer\", new Uniform(null)],\r\n\t\t\t\t[\"farColorBuffer\", new Uniform(null)],\r\n\t\t\t\t[\"nearCoCBuffer\", new Uniform(null)],\r\n\t\t\t\t[\"scale\", new Uniform(1.0)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * A render target for intermediate results.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTarget.texture.name = \"DoF.Intermediate\";\r\n\t\tthis.renderTarget.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * A render target for masked background colors (premultiplied with CoC).\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetMasked = this.renderTarget.clone();\r\n\t\tthis.renderTargetMasked.texture.name = \"DoF.Masked.Far\";\r\n\r\n\t\t/**\r\n\t\t * A render target for the blurred foreground colors.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetNear = this.renderTarget.clone();\r\n\t\tthis.renderTargetNear.texture.name = \"DoF.Bokeh.Near\";\r\n\r\n\t\tthis.uniforms.get(\"nearColorBuffer\").value = this.renderTargetNear.texture;\r\n\r\n\t\t/**\r\n\t\t * A render target for the blurred background colors.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetFar = this.renderTarget.clone();\r\n\t\tthis.renderTargetFar.texture.name = \"DoF.Bokeh.Far\";\r\n\r\n\t\tthis.uniforms.get(\"farColorBuffer\").value = this.renderTargetFar.texture;\r\n\r\n\t\t/**\r\n\t\t * A render target for the circle of confusion.\r\n\t\t *\r\n\t\t * - Negative values are stored in the `RED` channel (foreground).\r\n\t\t * - Positive values are stored in the `GREEN` channel (background).\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetCoC = this.renderTarget.clone();\r\n\t\tthis.renderTargetCoC.texture.format = RGBFormat;\r\n\t\tthis.renderTargetCoC.texture.name = \"DoF.CoC\";\r\n\r\n\t\t/**\r\n\t\t * A render target that stores a blurred copy of the circle of confusion.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetCoCBlurred = this.renderTargetCoC.clone();\r\n\t\tthis.renderTargetCoCBlurred.texture.name = \"DoF.CoC.Blurred\";\r\n\r\n\t\tthis.uniforms.get(\"nearCoCBuffer\").value = this.renderTargetCoCBlurred.texture;\r\n\r\n\t\t/**\r\n\t\t * A circle of confusion pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.cocPass = new ShaderPass(new CircleOfConfusionMaterial(camera));\r\n\t\tconst cocMaterial = this.circleOfConfusionMaterial;\r\n\t\tcocMaterial.uniforms.focusDistance.value = focusDistance;\r\n\t\tcocMaterial.uniforms.focalLength.value = focalLength;\r\n\r\n\t\t/**\r\n\t\t * This pass blurs the foreground CoC buffer to soften edges.\r\n\t\t *\r\n\t\t * @type {BlurPass}\r\n\t\t */\r\n\r\n\t\tthis.blurPass = new BlurPass({ width, height, kernelSize: KernelSize.MEDIUM });\r\n\t\tthis.blurPass.resolution.resizable = this;\r\n\r\n\t\t/**\r\n\t\t * A mask pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.maskPass = new ShaderPass(new MaskMaterial(this.renderTargetCoC.texture));\r\n\t\tconst maskMaterial = this.maskPass.getFullscreenMaterial();\r\n\t\tmaskMaterial.maskFunction = MaskFunction.MULTIPLY_RGB_SET_ALPHA;\r\n\t\tmaskMaterial.colorChannel = ColorChannel.GREEN;\r\n\r\n\t\t/**\r\n\t\t * A bokeh blur pass for the foreground colors.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bokehNearBasePass = new ShaderPass(new BokehMaterial(false, true));\r\n\r\n\t\t/**\r\n\t\t * A bokeh fill pass for the foreground colors.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bokehNearFillPass = new ShaderPass(new BokehMaterial(true, true));\r\n\r\n\t\t/**\r\n\t\t * A bokeh blur pass for the background colors.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bokehFarBasePass = new ShaderPass(new BokehMaterial(false, false));\r\n\r\n\t\t/**\r\n\t\t * A bokeh fill pass for the background colors.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bokehFarFillPass = new ShaderPass(new BokehMaterial(true, false));\r\n\r\n\t\tthis.bokehScale = bokehScale;\r\n\r\n\t\t/**\r\n\t\t * A target position that should be kept in focus.\r\n\t\t *\r\n\t\t * Set this to `null` to disable auto focus.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t */\r\n\r\n\t\tthis.target = null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The circle of confusion material.\r\n\t *\r\n\t * @type {CircleOfConfusionMaterial}\r\n\t */\r\n\r\n\tget circleOfConfusionMaterial() {\r\n\r\n\t\treturn this.cocPass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of this effect.\r\n\t *\r\n\t * @type {Resizer}\r\n\t */\r\n\r\n\tget resolution() {\r\n\r\n\t\treturn this.blurPass.resolution;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current bokeh scale.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget bokehScale() {\r\n\r\n\t\treturn this.uniforms.get(\"scale\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the bokeh scale.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset bokehScale(value) {\r\n\r\n\t\tconst passes = [\r\n\t\t\tthis.bokehNearBasePass,\r\n\t\t\tthis.bokehNearFillPass,\r\n\t\t\tthis.bokehFarBasePass,\r\n\t\t\tthis.bokehFarFillPass\r\n\t\t];\r\n\r\n\t\tpasses.map((p) => p.getFullscreenMaterial().uniforms.scale).forEach((u) => {\r\n\r\n\t\t\tu.value = value;\r\n\r\n\t\t});\r\n\r\n\t\tthis.maskPass.getFullscreenMaterial().uniforms.strength.value = value;\r\n\t\tthis.uniforms.get(\"scale\").value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates the focus distance from the camera to the given position.\r\n\t *\r\n\t * @param {Vector3} target - The target.\r\n\t * @return {Number} The normalized focus distance.\r\n\t */\r\n\r\n\tcalculateFocusDistance(target) {\r\n\r\n\t\tconst camera = this.camera;\r\n\t\tconst viewDistance = camera.far - camera.near;\r\n\t\tconst distance = camera.position.distanceTo(target);\r\n\r\n\t\treturn Math.min(Math.max((distance / viewDistance), 0.0), 1.0);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.circleOfConfusionMaterial;\r\n\t\tmaterial.uniforms.depthBuffer.value = depthTexture;\r\n\t\tmaterial.depthPacking = depthPacking;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst renderTarget = this.renderTarget;\r\n\t\tconst renderTargetCoC = this.renderTargetCoC;\r\n\t\tconst renderTargetCoCBlurred = this.renderTargetCoCBlurred;\r\n\t\tconst renderTargetMasked = this.renderTargetMasked;\r\n\r\n\t\tconst bokehFarBasePass = this.bokehFarBasePass;\r\n\t\tconst bokehFarFillPass = this.bokehFarFillPass;\r\n\t\tconst farBaseUniforms = bokehFarBasePass.getFullscreenMaterial().uniforms;\r\n\t\tconst farFillUniforms = bokehFarFillPass.getFullscreenMaterial().uniforms;\r\n\r\n\t\tconst bokehNearBasePass = this.bokehNearBasePass;\r\n\t\tconst bokehNearFillPass = this.bokehNearFillPass;\r\n\t\tconst nearBaseUniforms = bokehNearBasePass.getFullscreenMaterial().uniforms;\r\n\t\tconst nearFillUniforms = bokehNearFillPass.getFullscreenMaterial().uniforms;\r\n\r\n\t\t// Auto focus.\r\n\t\tif(this.target !== null) {\r\n\r\n\t\t\tconst distance = this.calculateFocusDistance(this.target);\r\n\t\t\tthis.circleOfConfusionMaterial.uniforms.focusDistance.value = distance;\r\n\r\n\t\t}\r\n\r\n\t\t// Render the CoC and create a blurred version for soft near field blending.\r\n\t\tthis.cocPass.render(renderer, null, renderTargetCoC);\r\n\t\tthis.blurPass.render(renderer, renderTargetCoC, renderTargetCoCBlurred);\r\n\r\n\t\t// Prevent sharp colors from bleeding onto the background.\r\n\t\tthis.maskPass.render(renderer, inputBuffer, renderTargetMasked);\r\n\r\n\t\t// Use the sharp CoC buffer and render the background bokeh.\r\n\t\tfarBaseUniforms.cocBuffer.value = farFillUniforms.cocBuffer.value = renderTargetCoC.texture;\r\n\t\tbokehFarBasePass.render(renderer, renderTargetMasked, renderTarget);\r\n\t\tbokehFarFillPass.render(renderer, renderTarget, this.renderTargetFar);\r\n\r\n\t\t// Use the blurred CoC buffer and render the foreground bokeh.\r\n\t\tnearBaseUniforms.cocBuffer.value = nearFillUniforms.cocBuffer.value = renderTargetCoCBlurred.texture;\r\n\t\tbokehNearBasePass.render(renderer, inputBuffer, renderTarget);\r\n\t\tbokehNearFillPass.render(renderer, renderTarget, this.renderTargetNear);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\r\n\t\tlet resizables = [\r\n\t\t\tthis.cocPass,\r\n\t\t\tthis.blurPass,\r\n\t\t\tthis.maskPass,\r\n\t\t\tthis.bokehNearBasePass,\r\n\t\t\tthis.bokehNearFillPass,\r\n\t\t\tthis.bokehFarBasePass,\r\n\t\t\tthis.bokehFarFillPass\r\n\t\t];\r\n\r\n\t\t// These buffers require full resolution to prevent bleeding artifacts.\r\n\t\tresizables.push(this.renderTargetCoC, this.renderTargetMasked);\r\n\t\tresizables.forEach((r) => r.setSize(width, height));\r\n\r\n\t\tconst w = resolution.width;\r\n\t\tconst h = resolution.height;\r\n\r\n\t\tresizables = [\r\n\t\t\tthis.renderTarget,\r\n\t\t\tthis.renderTargetNear,\r\n\t\t\tthis.renderTargetFar,\r\n\t\t\tthis.renderTargetCoCBlurred\r\n\t\t];\r\n\r\n\t\tresizables.forEach((r) => r.setSize(w, h));\r\n\r\n\t\t// The bokeh blur passes operate on the low resolution buffers.\r\n\t\tconst passes = [\r\n\t\t\tthis.bokehNearBasePass,\r\n\t\t\tthis.bokehNearFillPass,\r\n\t\t\tthis.bokehFarBasePass,\r\n\t\t\tthis.bokehFarFillPass\r\n\t\t];\r\n\r\n\t\tpasses.forEach((p) => p.getFullscreenMaterial().setTexelSize(1.0 / w, 1.0 / h));\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tconst initializables = [\r\n\t\t\tthis.cocPass,\r\n\t\t\tthis.maskPass,\r\n\t\t\tthis.bokehNearBasePass,\r\n\t\t\tthis.bokehNearFillPass,\r\n\t\t\tthis.bokehFarBasePass,\r\n\t\t\tthis.bokehFarFillPass\r\n\t\t];\r\n\r\n\t\tinitializables.forEach((i) => i.initialize(renderer, alpha, frameBufferType));\r\n\r\n\t\t// The blur pass operates on the CoC buffer.\r\n\t\tthis.blurPass.initialize(renderer, alpha, UnsignedByteType);\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTargetNear.texture.type = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTarget.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetNear.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetFar.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetMasked.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$m = \"uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}\";\r\n\r\n/**\r\n * A dot screen effect.\r\n */\r\n\r\nclass DotScreenEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new dot screen effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.angle=1.57] - The angle of the dot pattern.\r\n\t * @param {Number} [options.scale=1.0] - The scale of the dot pattern.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, angle = Math.PI * 0.5, scale = 1.0 } = {}) {\r\n\r\n\t\tsuper(\"DotScreenEffect\", fragmentShader$m, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"angle\", new Uniform(new Vector2$1())],\r\n\t\t\t\t[\"scale\", new Uniform(scale)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.setAngle(angle);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the pattern angle.\r\n\t *\r\n\t * @param {Number} [angle] - The angle of the dot pattern.\r\n\t */\r\n\r\n\tsetAngle(angle) {\r\n\r\n\t\tthis.uniforms.get(\"angle\").value.set(Math.sin(angle), Math.cos(angle));\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$n = \"uniform float gamma;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=LinearToGamma(max(inputColor,0.0),gamma);}\";\r\n\r\n/**\r\n * A gamma correction effect.\r\n *\r\n * @deprecated Set WebGLRenderer.outputEncoding to sRGBEncoding or GammaEncoding instead.\r\n */\r\n\r\nclass GammaCorrectionEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new gamma correction effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.gamma=2.0] - The gamma factor.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, gamma = 2.0 } = {}) {\r\n\r\n\t\tsuper(\"GammaCorrectionEffect\", fragmentShader$n, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"gamma\", new Uniform(gamma)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Generates noise.\r\n *\r\n * @private\r\n * @param {Number} size - The linear texture size.\r\n * @param {Number} format - The texture format.\r\n * @param {Number} type - The texture type.\r\n * @return {TypedArray} The noise data.\r\n */\r\n\r\nfunction getNoise(size, format, type) {\r\n\r\n\tconst channels = new Map([\r\n\t\t[LuminanceFormat, 1],\r\n\t\t[RedFormat, 1],\r\n\t\t[RGFormat, 2],\r\n\t\t[RGBFormat, 3],\r\n\t\t[RGBAFormat, 4]\r\n\t]);\r\n\r\n\tlet data;\r\n\r\n\tif(!channels.has(format)) {\r\n\r\n\t\tconsole.error(\"Invalid noise texture format\");\r\n\r\n\t}\r\n\r\n\tif(type === UnsignedByteType) {\r\n\r\n\t\tdata = new Uint8Array(size * channels.get(format));\r\n\r\n\t\tfor(let i = 0, l = data.length; i < l; ++i) {\r\n\r\n\t\t\tdata[i] = Math.random() * 255;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tdata = new Float32Array(size * channels.get(format));\r\n\r\n\t\tfor(let i = 0, l = data.length; i < l; ++i) {\r\n\r\n\t\t\tdata[i] = Math.random();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n}\r\n\r\n/**\r\n * A simple noise texture.\r\n */\r\n\r\nclass NoiseTexture extends DataTexture {\r\n\r\n\t/**\r\n\t * Constructs a new noise texture.\r\n\t *\r\n\t * The texture format can be either `LuminanceFormat`, `RGBFormat` or\r\n\t * `RGBAFormat`. Additionally, the formats `RedFormat` and `RGFormat` can be\r\n\t * used in a WebGL 2 context.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t * @param {Number} [format=LuminanceFormat] - The texture format.\r\n\t * @param {Number} [type=UnsignedByteType] - The texture type.\r\n\t */\r\n\r\n\tconstructor(width, height, format = LuminanceFormat, type = UnsignedByteType) {\r\n\r\n\t\tsuper(getNoise(width * height, format, type), width, height, format, type);\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$o = \"uniform sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seed;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seed.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seed.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seed*(random*0.2);}}\";\r\n\r\n/**\r\n * A label for generated data textures.\r\n *\r\n * @type {String}\r\n * @private\r\n */\r\n\r\nconst tag = \"Glitch.Generated\";\r\n\r\n/**\r\n * Returns a random float in the specified range.\r\n *\r\n * @private\r\n * @param {Number} low - The lowest possible value.\r\n * @param {Number} high - The highest possible value.\r\n * @return {Number} The random value.\r\n */\r\n\r\nfunction randomFloat(low, high) {\r\n\r\n\treturn low + Math.random() * (high - low);\r\n\r\n}\r\n\r\n/**\r\n * A glitch effect.\r\n *\r\n * This effect can influence the {@link ChromaticAberrationEffect}.\r\n *\r\n * Reference: https://github.com/staffantan/unityglitch\r\n *\r\n * Warning: This effect cannot be merged with convolution effects.\r\n */\r\n\r\nclass GlitchEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new glitch effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Vector2} [options.chromaticAberrationOffset] - A chromatic aberration offset. If provided, the glitch effect will influence this offset.\r\n\t * @param {Vector2} [options.delay] - The minimum and maximum delay between glitch activations in seconds.\r\n\t * @param {Vector2} [options.duration] - The minimum and maximum duration of a glitch in seconds.\r\n\t * @param {Vector2} [options.strength] - The strength of weak and strong glitches.\r\n\t * @param {Texture} [options.perturbationMap] - A perturbation map. If none is provided, a noise texture will be created.\r\n\t * @param {Number} [options.dtSize=64] - The size of the generated noise map. Will be ignored if a perturbation map is provided.\r\n\t * @param {Number} [options.columns=0.05] - The scale of the blocky glitch columns.\r\n\t * @param {Number} [options.ratio=0.85] - The threshold for strong glitches.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tblendFunction = BlendFunction.NORMAL,\r\n\t\tchromaticAberrationOffset = null,\r\n\t\tdelay = new Vector2$1(1.5, 3.5),\r\n\t\tduration = new Vector2$1(0.6, 1.0),\r\n\t\tstrength = new Vector2$1(0.3, 1.0),\r\n\t\tcolumns = 0.05,\r\n\t\tratio = 0.85,\r\n\t\tperturbationMap = null,\r\n\t\tdtSize = 64\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"GlitchEffect\", fragmentShader$o, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"perturbationMap\", new Uniform(null)],\r\n\t\t\t\t[\"columns\", new Uniform(columns)],\r\n\t\t\t\t[\"active\", new Uniform(false)],\r\n\t\t\t\t[\"random\", new Uniform(1.0)],\r\n\t\t\t\t[\"seed\", new Uniform(new Vector2$1())],\r\n\t\t\t\t[\"distortion\", new Uniform(new Vector2$1())]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.setPerturbationMap((perturbationMap === null) ?\r\n\t\t\tthis.generatePerturbationMap(dtSize) :\r\n\t\t\tperturbationMap\r\n\t\t);\r\n\r\n\t\t/**\r\n\t\t * The minimum and maximum delay between glitch activations in seconds.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t */\r\n\r\n\t\tthis.delay = delay;\r\n\r\n\t\t/**\r\n\t\t * The minimum and maximum duration of a glitch in seconds.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t */\r\n\r\n\t\tthis.duration = duration;\r\n\r\n\t\t/**\r\n\t\t * A random glitch break point.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.breakPoint = new Vector2$1(\r\n\t\t\trandomFloat(this.delay.x, this.delay.y),\r\n\t\t\trandomFloat(this.duration.x, this.duration.y)\r\n\t\t);\r\n\r\n\t\t/**\r\n\t\t * A time accumulator.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.time = 0;\r\n\r\n\t\t/**\r\n\t\t * Random seeds.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.seed = this.uniforms.get(\"seed\").value;\r\n\r\n\t\t/**\r\n\t\t * A distortion vector.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.distortion = this.uniforms.get(\"distortion\").value;\r\n\r\n\t\t/**\r\n\t\t * The effect mode.\r\n\t\t *\r\n\t\t * @type {GlitchMode}\r\n\t\t */\r\n\r\n\t\tthis.mode = GlitchMode.SPORADIC;\r\n\r\n\t\t/**\r\n\t\t * The strength of weak and strong glitches.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t */\r\n\r\n\t\tthis.strength = strength;\r\n\r\n\t\t/**\r\n\t\t * The threshold for strong glitches, ranging from 0 to 1 where 0 means no\r\n\t\t * weak glitches and 1 means no strong ones. The default ratio of 0.85\r\n\t\t * offers a decent balance.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.ratio = ratio;\r\n\r\n\t\t/**\r\n\t\t * The chromatic aberration offset.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t */\r\n\r\n\t\tthis.chromaticAberrationOffset = chromaticAberrationOffset;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the glitch effect is currently active.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget active() {\r\n\r\n\t\treturn this.uniforms.get(\"active\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current perturbation map.\r\n\t *\r\n\t * @return {Texture} The current perturbation map.\r\n\t */\r\n\r\n\tgetPerturbationMap() {\r\n\r\n\t\treturn this.uniforms.get(\"perturbationMap\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Replaces the current perturbation map with the given one.\r\n\t *\r\n\t * The current map will be disposed if it was generated by this effect.\r\n\t *\r\n\t * @param {Texture} map - The new perturbation map.\r\n\t */\r\n\r\n\tsetPerturbationMap(map) {\r\n\r\n\t\tconst currentMap = this.getPerturbationMap();\r\n\r\n\t\tif(currentMap !== null && currentMap.name === tag) {\r\n\r\n\t\t\tcurrentMap.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tmap.minFilter = map.magFilter = NearestFilter;\r\n\t\tmap.wrapS = map.wrapT = RepeatWrapping;\r\n\t\tmap.generateMipmaps = false;\r\n\r\n\t\tthis.uniforms.get(\"perturbationMap\").value = map;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Generates a perturbation map.\r\n\t *\r\n\t * @param {Number} [size=64] - The texture size.\r\n\t * @return {DataTexture} The perturbation map.\r\n\t */\r\n\r\n\tgeneratePerturbationMap(size = 64) {\r\n\r\n\t\tconst map = new NoiseTexture(size, size, RGBFormat);\r\n\t\tmap.name = tag;\r\n\r\n\t\treturn map;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst mode = this.mode;\r\n\t\tconst breakPoint = this.breakPoint;\r\n\t\tconst offset = this.chromaticAberrationOffset;\r\n\t\tconst s = this.strength;\r\n\r\n\t\tlet time = this.time;\r\n\t\tlet active = false;\r\n\t\tlet r = 0.0, a = 0.0;\r\n\t\tlet trigger;\r\n\r\n\t\tif(mode !== GlitchMode.DISABLED) {\r\n\r\n\t\t\tif(mode === GlitchMode.SPORADIC) {\r\n\r\n\t\t\t\ttime += deltaTime;\r\n\t\t\t\ttrigger = (time > breakPoint.x);\r\n\r\n\t\t\t\tif(time >= (breakPoint.x + breakPoint.y)) {\r\n\r\n\t\t\t\t\tbreakPoint.set(\r\n\t\t\t\t\t\trandomFloat(this.delay.x, this.delay.y),\r\n\t\t\t\t\t\trandomFloat(this.duration.x, this.duration.y)\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\ttime = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tr = Math.random();\r\n\t\t\tthis.uniforms.get(\"random\").value = r;\r\n\r\n\t\t\tif((trigger && r > this.ratio) || mode === GlitchMode.CONSTANT_WILD) {\r\n\r\n\t\t\t\tactive = true;\r\n\r\n\t\t\t\tr *= s.y * 0.03;\r\n\t\t\t\ta = randomFloat(-Math.PI, Math.PI);\r\n\r\n\t\t\t\tthis.seed.set(randomFloat(-s.y, s.y), randomFloat(-s.y, s.y));\r\n\t\t\t\tthis.distortion.set(randomFloat(0.0, 1.0), randomFloat(0.0, 1.0));\r\n\r\n\t\t\t} else if(trigger || mode === GlitchMode.CONSTANT_MILD) {\r\n\r\n\t\t\t\tactive = true;\r\n\r\n\t\t\t\tr *= s.x * 0.03;\r\n\t\t\t\ta = randomFloat(-Math.PI, Math.PI);\r\n\r\n\t\t\t\tthis.seed.set(randomFloat(-s.x, s.x), randomFloat(-s.x, s.x));\r\n\t\t\t\tthis.distortion.set(randomFloat(0.0, 1.0), randomFloat(0.0, 1.0));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.time = time;\r\n\r\n\t\t}\r\n\r\n\t\tif(offset !== null) {\r\n\r\n\t\t\tif(active) {\r\n\r\n\t\t\t\toffset.set(Math.cos(a), Math.sin(a)).multiplyScalar(r);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\toffset.set(0.0, 0.0);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.uniforms.get(\"active\").value = active;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A glitch mode enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} DISABLED - No glitches.\r\n * @property {Number} SPORADIC - Sporadic glitches.\r\n * @property {Number} CONSTANT_MILD - Constant mild glitches.\r\n * @property {Number} CONSTANT_WILD - Constant wild glitches.\r\n */\r\n\r\nconst GlitchMode = {\r\n\r\n\tDISABLED: 0,\r\n\tSPORADIC: 1,\r\n\tCONSTANT_MILD: 2,\r\n\tCONSTANT_WILD: 3\r\n\r\n};\r\n\r\nvar fragmentShader$p = \"uniform sampler2D texture;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(texture,uv);}\";\r\n\r\n/**\r\n * A vector.\r\n *\r\n * @type {Vector3}\r\n * @private\r\n */\r\n\r\nconst v = new Vector3();\r\n\r\n/**\r\n * A matrix.\r\n *\r\n * @type {Matrix4}\r\n * @private\r\n */\r\n\r\nconst m = new Matrix4();\r\n\r\n/**\r\n * A god rays effect.\r\n */\r\n\r\nclass GodRaysEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new god rays effect.\r\n\t *\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Mesh|Points} lightSource - The light source. Must not write depth and has to be flagged as transparent.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\r\n\t * @param {Number} [options.samples=60.0] - The number of samples per pixel.\r\n\t * @param {Number} [options.density=0.96] - The density of the light rays.\r\n\t * @param {Number} [options.decay=0.9] - An illumination decay factor.\r\n\t * @param {Number} [options.weight=0.4] - A light ray weight factor.\r\n\t * @param {Number} [options.exposure=0.6] - A constant attenuation coefficient.\r\n\t * @param {Number} [options.clampMax=1.0] - An upper bound for the saturation of the overall effect.\r\n\t * @param {Number} [options.resolutionScale=0.5] - Deprecated. Use height or width instead.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t * @param {KernelSize} [options.kernelSize=KernelSize.SMALL] - The blur kernel size. Has no effect if blur is disabled.\r\n\t * @param {Boolean} [options.blur=true] - Whether the god rays should be blurred to reduce artifacts.\r\n\t */\r\n\r\n\tconstructor(camera, lightSource, {\r\n\t\tblendFunction = BlendFunction.SCREEN,\r\n\t\tsamples = 60.0,\r\n\t\tdensity = 0.96,\r\n\t\tdecay = 0.9,\r\n\t\tweight = 0.4,\r\n\t\texposure = 0.6,\r\n\t\tclampMax = 1.0,\r\n\t\tresolutionScale = 0.5,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\tkernelSize = KernelSize.SMALL,\r\n\t\tblur = true\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"GodRaysEffect\", fragmentShader$p, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.DEPTH,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"texture\", new Uniform(null)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * The light source.\r\n\t\t *\r\n\t\t * @type {Mesh|Points}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.lightSource = lightSource;\r\n\t\tthis.lightSource.material.depthWrite = false;\r\n\t\tthis.lightSource.material.transparent = true;\r\n\r\n\t\t/**\r\n\t\t * A scene that only contains the light source.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.lightScene = new Scene();\r\n\r\n\t\t/**\r\n\t\t * The light position in screen space.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.screenPosition = new Vector2$1();\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetA = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTargetA.texture.name = \"GodRays.Target.A\";\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetB = this.renderTargetA.clone();\r\n\t\tthis.renderTargetB.texture.name = \"GodRays.Target.B\";\r\n\t\tthis.uniforms.get(\"texture\").value = this.renderTargetB.texture;\r\n\r\n\t\t/**\r\n\t\t * A render target for the light scene.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetLight = this.renderTargetA.clone();\r\n\t\tthis.renderTargetLight.texture.name = \"GodRays.Light\";\r\n\t\tthis.renderTargetLight.depthBuffer = true;\r\n\t\tthis.renderTargetLight.depthTexture = new DepthTexture();\r\n\r\n\t\t/**\r\n\t\t * A pass that only renders the light source.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderPassLight = new RenderPass(this.lightScene, camera);\r\n\t\tthis.renderPassLight.getClearPass().overrideClearColor = new Color(0x000000);\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass(true, false, false);\r\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\r\n\r\n\t\t/**\r\n\t\t * A blur pass that reduces aliasing artifacts and makes the light softer.\r\n\t\t *\r\n\t\t * Disable this pass to improve performance.\r\n\t\t *\r\n\t\t * @type {BlurPass}\r\n\t\t */\r\n\r\n\t\tthis.blurPass = new BlurPass({ resolutionScale, width, height, kernelSize });\r\n\t\tthis.blurPass.resolution.resizable = this;\r\n\r\n\t\t/**\r\n\t\t * A depth mask pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.depthMaskPass = new ShaderPass(((depthTexture) => {\r\n\r\n\t\t\tconst material = new DepthMaskMaterial();\r\n\t\t\tmaterial.uniforms.depthBuffer1.value = depthTexture;\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t})(this.renderTargetLight.depthTexture));\r\n\r\n\t\t/**\r\n\t\t * A god rays blur pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.godRaysPass = new ShaderPass((() => {\r\n\r\n\t\t\tconst material = new GodRaysMaterial(this.screenPosition);\r\n\t\t\tmaterial.uniforms.density.value = density;\r\n\t\t\tmaterial.uniforms.decay.value = decay;\r\n\t\t\tmaterial.uniforms.weight.value = weight;\r\n\t\t\tmaterial.uniforms.exposure.value = exposure;\r\n\t\t\tmaterial.uniforms.clampMax.value = clampMax;\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t})());\r\n\r\n\t\tthis.samples = samples;\r\n\t\tthis.blur = blur;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A texture that contains the intermediate result of this effect.\r\n\t *\r\n\t * This texture will be applied to the scene colors unless the blend function\r\n\t * is set to `SKIP`.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.renderTargetB.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The internal god rays material.\r\n\t *\r\n\t * @type {GodRaysMaterial}\r\n\t */\r\n\r\n\tget godRaysMaterial() {\r\n\r\n\t\treturn this.godRaysPass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of this effect.\r\n\t *\r\n\t * @type {Resizer}\r\n\t */\r\n\r\n\tget resolution() {\r\n\r\n\t\treturn this.blurPass.resolution;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current width of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.resolution.width;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render width.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tset width(value) {\r\n\r\n\t\tthis.resolution.width = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current height of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.resolution.height;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render height.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tset height(value) {\r\n\r\n\t\tthis.resolution.height = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether dithering is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tget dithering() {\r\n\r\n\t\treturn this.godRaysMaterial.dithering;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables dithering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tset dithering(value) {\r\n\r\n\t\tconst material = this.godRaysMaterial;\r\n\r\n\t\tmaterial.dithering = value;\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the god rays should be blurred to reduce artifacts.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget blur() {\r\n\r\n\t\treturn this.blurPass.enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset blur(value) {\r\n\r\n\t\tthis.blurPass.enabled = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The blur kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tget kernelSize() {\r\n\r\n\t\treturn this.blurPass.kernelSize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the blur kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tset kernelSize(value) {\r\n\r\n\t\tthis.blurPass.kernelSize = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolution.scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolution.scale = scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The number of samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget samples() {\r\n\r\n\t\treturn this.godRaysMaterial.samples;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A higher sample count improves quality at the cost of performance.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset samples(value) {\r\n\r\n\t\tthis.godRaysMaterial.samples = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.depthMaskPass.getFullscreenMaterial();\r\n\t\tmaterial.uniforms.depthBuffer0.value = depthTexture;\r\n\t\tmaterial.defines.DEPTH_PACKING_0 = depthPacking.toFixed(0);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst lightSource = this.lightSource;\r\n\t\tconst parent = lightSource.parent;\r\n\t\tconst matrixAutoUpdate = lightSource.matrixAutoUpdate;\r\n\r\n\t\tconst renderTargetA = this.renderTargetA;\r\n\t\tconst renderTargetLight = this.renderTargetLight;\r\n\r\n\t\t// Enable depth write for the light scene render pass.\r\n\t\tlightSource.material.depthWrite = true;\r\n\r\n\t\t// Update the world matrix.\r\n\t\tlightSource.matrixAutoUpdate = false;\r\n\t\tlightSource.updateWorldMatrix(true, false);\r\n\r\n\t\tif(parent !== null) {\r\n\r\n\t\t\tif(!matrixAutoUpdate) {\r\n\r\n\t\t\t\t// Remember the local transformation to restore it later.\r\n\t\t\t\tm.copy(lightSource.matrix);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Apply parent transformations.\r\n\t\t\tlightSource.matrix.copy(lightSource.matrixWorld);\r\n\r\n\t\t}\r\n\r\n\t\t// Render the light source and mask it based on depth.\r\n\t\tthis.lightScene.add(lightSource);\r\n\t\tthis.renderPassLight.render(renderer, renderTargetLight);\r\n\t\tthis.clearPass.render(renderer, renderTargetA);\r\n\t\tthis.depthMaskPass.render(renderer, renderTargetLight, renderTargetA);\r\n\r\n\t\t// Restore the original values.\r\n\t\tlightSource.material.depthWrite = false;\r\n\t\tlightSource.matrixAutoUpdate = matrixAutoUpdate;\r\n\r\n\t\tif(parent !== null) {\r\n\r\n\t\t\tif(!matrixAutoUpdate) {\r\n\r\n\t\t\t\tlightSource.matrix.copy(m);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tparent.add(lightSource);\r\n\r\n\t\t}\r\n\r\n\t\t// Calculate the screen light position.\r\n\t\tv.setFromMatrixPosition(lightSource.matrixWorld).project(this.camera);\r\n\r\n\t\t// Translate to [0.0, 1.0] and clamp to screen with a bias of 1.0.\r\n\t\tthis.screenPosition.set(\r\n\t\t\tMath.min(Math.max((v.x + 1.0) * 0.5, -1.0), 2.0),\r\n\t\t\tMath.min(Math.max((v.y + 1.0) * 0.5, -1.0), 2.0)\r\n\t\t);\r\n\r\n\t\tif(this.blur) {\r\n\r\n\t\t\t// Blur the masked scene to reduce artifacts.\r\n\t\t\tthis.blurPass.render(renderer, renderTargetA, renderTargetA);\r\n\r\n\t\t}\r\n\r\n\t\t// Blur the masked scene along radial lines towards the light source.\r\n\t\tthis.godRaysPass.render(renderer, renderTargetA, this.renderTargetB);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.blurPass.setSize(width, height);\r\n\t\tthis.renderPassLight.setSize(width, height);\r\n\t\tthis.depthMaskPass.setSize(width, height);\r\n\t\tthis.godRaysPass.setSize(width, height);\r\n\r\n\t\tconst w = this.resolution.width;\r\n\t\tconst h = this.resolution.height;\r\n\r\n\t\tthis.renderTargetA.setSize(w, h);\r\n\t\tthis.renderTargetB.setSize(w, h);\r\n\t\tthis.renderTargetLight.setSize(w, h);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tthis.blurPass.initialize(renderer, alpha, frameBufferType);\r\n\t\tthis.renderPassLight.initialize(renderer, alpha, frameBufferType);\r\n\t\tthis.depthMaskPass.initialize(renderer, alpha, frameBufferType);\r\n\t\tthis.godRaysPass.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTargetA.texture.format = RGBFormat;\r\n\t\t\tthis.renderTargetB.texture.format = RGBFormat;\r\n\t\t\tthis.renderTargetLight.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTargetA.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetB.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetLight.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$q = \"uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}\";\r\n\r\n/**\r\n * A grid effect.\r\n */\r\n\r\nclass GridEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new grid effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.OVERLAY] - The blend function of this effect.\r\n\t * @param {Number} [options.scale=1.0] - The scale of the grid pattern.\r\n\t * @param {Number} [options.lineWidth=0.0] - The line width of the grid pattern.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.OVERLAY, scale = 1.0, lineWidth = 0.0 } = {}) {\r\n\r\n\t\tsuper(\"GridEffect\", fragmentShader$q, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"scale\", new Uniform(new Vector2$1())],\r\n\t\t\t\t[\"lineWidth\", new Uniform(lineWidth)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The original resolution.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Vector2$1();\r\n\r\n\t\t/**\r\n\t\t * The grid scale, relative to the screen height.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.scale = Math.max(scale, 1e-6);\r\n\r\n\t\t/**\r\n\t\t * The grid line width.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.lineWidth = Math.max(lineWidth, 0.0);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current grid scale.\r\n\t *\r\n\t * @return {Number} The grid scale.\r\n\t */\r\n\r\n\tgetScale() {\r\n\r\n\t\treturn this.scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the grid scale.\r\n\t *\r\n\t * @param {Number} scale - The new grid scale.\r\n\t */\r\n\r\n\tsetScale(scale) {\r\n\r\n\t\tthis.scale = scale;\r\n\t\tthis.setSize(this.resolution.x, this.resolution.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current grid line width.\r\n\t *\r\n\t * @return {Number} The grid line width.\r\n\t */\r\n\r\n\tgetLineWidth() {\r\n\r\n\t\treturn this.lineWidth;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the grid line width.\r\n\t *\r\n\t * @param {Number} lineWidth - The new grid line width.\r\n\t */\r\n\r\n\tsetLineWidth(lineWidth) {\r\n\r\n\t\tthis.lineWidth = lineWidth;\r\n\t\tthis.setSize(this.resolution.x, this.resolution.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.resolution.set(width, height);\r\n\r\n\t\tconst aspect = width / height;\r\n\t\tconst scale = this.scale * (height * 0.125);\r\n\r\n\t\tthis.uniforms.get(\"scale\").value.set(aspect * scale, scale);\r\n\t\tthis.uniforms.get(\"lineWidth\").value = (scale / height) + this.lineWidth;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$r = \"uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}\";\r\n\r\n/**\r\n * A hue/saturation effect.\r\n *\r\n * Reference: https://github.com/evanw/glfx.js\r\n */\r\n\r\nclass HueSaturationEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new hue/saturation effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.hue=0.0] - The hue in radians.\r\n\t * @param {Number} [options.saturation=0.0] - The saturation factor, ranging from -1 to 1, where 0 means no change.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, hue = 0.0, saturation = 0.0 } = {}) {\r\n\r\n\t\tsuper(\"HueSaturationEffect\", fragmentShader$r, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"hue\", new Uniform(new Vector3())],\r\n\t\t\t\t[\"saturation\", new Uniform(saturation)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.setHue(hue);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the hue.\r\n\t *\r\n\t * @param {Number} hue - The hue in radians.\r\n\t */\r\n\r\n\tsetHue(hue) {\r\n\r\n\t\tconst s = Math.sin(hue), c = Math.cos(hue);\r\n\r\n\t\tthis.uniforms.get(\"hue\").value.set(\r\n\t\t\t2.0 * c, -Math.sqrt(3.0) * s - c, Math.sqrt(3.0) * s - c\r\n\t\t).addScalar(1.0).divideScalar(3.0);\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$s = \"void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\\n#ifdef PREMULTIPLY\\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\\n#else\\noutputColor=vec4(noise,inputColor.a);\\n#endif\\n}\";\r\n\r\n/**\r\n * A noise effect.\r\n */\r\n\r\nclass NoiseEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new noise effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\r\n\t * @param {Boolean} [options.premultiply=false] - Whether the noise should be multiplied with the input color.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.SCREEN, premultiply = false } = {}) {\r\n\r\n\t\tsuper(\"NoiseEffect\", fragmentShader$s, { blendFunction });\r\n\r\n\t\tthis.premultiply = premultiply;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the noise should be multiplied with the input color.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget premultiply() {\r\n\r\n\t\treturn this.defines.has(\"PREMULTIPLY\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables noise premultiplication.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset premultiply(value) {\r\n\r\n\t\tif(this.premultiply !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tthis.defines.set(\"PREMULTIPLY\", \"1\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"PREMULTIPLY\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$t = \"uniform sampler2D edgeTexture;uniform sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\\n#ifdef USE_PATTERN\\nuniform sampler2D patternTexture;varying vec2 vUvPattern;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\\n#ifndef X_RAY\\nedge.y=0.0;\\n#endif\\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\\n#ifdef USE_PATTERN\\nvec4 patternColor=texture2D(patternTexture,vUvPattern);\\n#ifdef X_RAY\\nfloat hiddenFactor=0.5;\\n#else\\nfloat hiddenFactor=0.0;\\n#endif\\nvisibilityFactor=(1.0-mask.y>0.0)? 1.0 : hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\\n#endif\\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\\n#ifdef ALPHA\\noutputColor=vec4(color,alpha);\\n#else\\noutputColor=vec4(color,max(alpha,inputColor.a));\\n#endif\\n}\";\r\n\r\nvar vertexShader$9 = \"uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}\";\r\n\r\n/**\r\n * An outline effect.\r\n */\r\n\r\nclass OutlineEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new outline effect.\r\n\t *\r\n\t * If you want dark outlines, remember to use an appropriate blend function.\r\n\t *\r\n\t * @param {Scene} scene - The main scene.\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function.  Set this to `BlendFunction.ALPHA` for dark outlines.\r\n\t * @param {Number} [options.patternTexture=null] - A pattern texture.\r\n\t * @param {Number} [options.edgeStrength=1.0] - The edge strength.\r\n\t * @param {Number} [options.pulseSpeed=0.0] - The pulse speed. A value of zero disables the pulse effect.\r\n\t * @param {Number} [options.visibleEdgeColor=0xffffff] - The color of visible edges.\r\n\t * @param {Number} [options.hiddenEdgeColor=0x22090a] - The color of hidden edges.\r\n\t * @param {Number} [options.resolutionScale=0.5] - Deprecated. Use height or width instead.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t * @param {KernelSize} [options.kernelSize=KernelSize.VERY_SMALL] - The blur kernel size.\r\n\t * @param {Boolean} [options.blur=false] - Whether the outline should be blurred.\r\n\t * @param {Boolean} [options.xRay=true] - Whether occluded parts of selected objects should be visible.\r\n\t */\r\n\r\n\tconstructor(scene, camera, {\r\n\t\tblendFunction = BlendFunction.SCREEN,\r\n\t\tpatternTexture = null,\r\n\t\tedgeStrength = 1.0,\r\n\t\tpulseSpeed = 0.0,\r\n\t\tvisibleEdgeColor = 0xffffff,\r\n\t\thiddenEdgeColor = 0x22090a,\r\n\t\tresolutionScale = 0.5,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\tkernelSize = KernelSize.VERY_SMALL,\r\n\t\tblur = false,\r\n\t\txRay = true\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"OutlineEffect\", fragmentShader$t, {\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"maskTexture\", new Uniform(null)],\r\n\t\t\t\t[\"edgeTexture\", new Uniform(null)],\r\n\t\t\t\t[\"edgeStrength\", new Uniform(edgeStrength)],\r\n\t\t\t\t[\"visibleEdgeColor\", new Uniform(new Color(visibleEdgeColor))],\r\n\t\t\t\t[\"hiddenEdgeColor\", new Uniform(new Color(hiddenEdgeColor))],\r\n\t\t\t\t[\"pulse\", new Uniform(1.0)],\r\n\t\t\t\t[\"patternScale\", new Uniform(1.0)],\r\n\t\t\t\t[\"patternTexture\", new Uniform(null)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t// Handle alpha blending.\r\n\t\tthis.blendMode.addEventListener(\"change\", (event) => {\r\n\r\n\t\t\tif(this.blendMode.getBlendFunction() === BlendFunction.ALPHA) {\r\n\r\n\t\t\t\tthis.defines.set(\"ALPHA\", \"1\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"ALPHA\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t});\r\n\r\n\t\tthis.blendMode.setBlendFunction(blendFunction);\r\n\t\tthis.setPatternTexture(patternTexture);\r\n\t\tthis.xRay = xRay;\r\n\r\n\t\t/**\r\n\t\t * The main scene.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.scene = scene;\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * A render target for the outline mask.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetMask = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tformat: RGBFormat\r\n\t\t});\r\n\r\n\t\tthis.renderTargetMask.texture.name = \"Outline.Mask\";\r\n\r\n\t\tthis.uniforms.get(\"maskTexture\").value = this.renderTargetMask.texture;\r\n\r\n\t\t/**\r\n\t\t * A render target for the edge detection.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetOutline = this.renderTargetMask.clone();\r\n\t\tthis.renderTargetOutline.texture.name = \"Outline.Edges\";\r\n\t\tthis.renderTargetOutline.depthBuffer = false;\r\n\r\n\t\t/**\r\n\t\t * A render target for the blurred outline overlay.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetBlurredOutline = this.renderTargetOutline.clone();\r\n\t\tthis.renderTargetBlurredOutline.texture.name = \"Outline.BlurredEdges\";\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass();\r\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\r\n\t\tthis.clearPass.overrideClearAlpha = 1.0;\r\n\r\n\t\t/**\r\n\t\t * A depth pass.\r\n\t\t *\r\n\t\t * @type {DepthPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.depthPass = new DepthPass(scene, camera);\r\n\r\n\t\t/**\r\n\t\t * A depth comparison mask pass.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.maskPass = new RenderPass(scene, camera,\r\n\t\t\tnew DepthComparisonMaterial(this.depthPass.texture, camera));\r\n\r\n\t\tconst clearPass = this.maskPass.getClearPass();\r\n\t\tclearPass.overrideClearColor = new Color(0xffffff);\r\n\t\tclearPass.overrideClearAlpha = 1.0;\r\n\r\n\t\t/**\r\n\t\t * A blur pass.\r\n\t\t *\r\n\t\t * @type {BlurPass}\r\n\t\t */\r\n\r\n\t\tthis.blurPass = new BlurPass({ resolutionScale, width, height, kernelSize });\r\n\t\tthis.blurPass.resolution.resizable = this;\r\n\t\tthis.blur = blur;\r\n\r\n\t\t/**\r\n\t\t * An outline detection pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.outlinePass = new ShaderPass(new OutlineMaterial());\r\n\t\tthis.outlinePass.getFullscreenMaterial().uniforms.inputBuffer.value = this.renderTargetMask.texture;\r\n\r\n\t\t/**\r\n\t\t * The current animation time.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.time = 0.0;\r\n\r\n\t\t/**\r\n\t\t * A selection of objects that will be outlined.\r\n\t\t *\r\n\t\t * @type {Selection}\r\n\t\t */\r\n\r\n\t\tthis.selection = new Selection();\r\n\r\n\t\t/**\r\n\t\t * The pulse speed. A value of zero disables the pulse effect.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.pulseSpeed = pulseSpeed;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of this effect.\r\n\t *\r\n\t * @type {Resizer}\r\n\t */\r\n\r\n\tget resolution() {\r\n\r\n\t\treturn this.blurPass.resolution;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current width of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.resolution.width;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render width.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tset width(value) {\r\n\r\n\t\tthis.resolution.width = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current height of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.resolution.height;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render height.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tset height(value) {\r\n\r\n\t\tthis.resolution.height = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated Use selection.layer instead.\r\n\t */\r\n\r\n\tget selectionLayer() {\r\n\r\n\t\treturn this.selection.layer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated Use selection.layer instead.\r\n\t */\r\n\r\n\tset selectionLayer(value) {\r\n\r\n\t\tthis.selection.layer = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether dithering is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tget dithering() {\r\n\r\n\t\treturn this.blurPass.dithering;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables dithering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tset dithering(value) {\r\n\r\n\t\tthis.blurPass.dithering = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The blur kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tget kernelSize() {\r\n\r\n\t\treturn this.blurPass.kernelSize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tset kernelSize(value) {\r\n\r\n\t\tthis.blurPass.kernelSize = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the outlines should be blurred.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget blur() {\r\n\r\n\t\treturn this.blurPass.enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset blur(value) {\r\n\r\n\t\tthis.blurPass.enabled = value;\r\n\r\n\t\tthis.uniforms.get(\"edgeTexture\").value = value ?\r\n\t\t\tthis.renderTargetBlurredOutline.texture :\r\n\t\t\tthis.renderTargetOutline.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether X-Ray outlines are enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget xRay() {\r\n\r\n\t\treturn this.defines.has(\"X_RAY\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables X-Ray outlines.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset xRay(value) {\r\n\r\n\t\tif(this.xRay !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tthis.defines.set(\"X_RAY\", \"1\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"X_RAY\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the pattern texture.\r\n\t *\r\n\t * @param {Texture} texture - The new texture.\r\n\t */\r\n\r\n\tsetPatternTexture(texture) {\r\n\r\n\t\tif(texture !== null) {\r\n\r\n\t\t\ttexture.wrapS = texture.wrapT = RepeatWrapping;\r\n\r\n\t\t\tthis.defines.set(\"USE_PATTERN\", \"1\");\r\n\t\t\tthis.uniforms.get(\"patternTexture\").value = texture;\r\n\t\t\tthis.setVertexShader(vertexShader$9);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.delete(\"USE_PATTERN\");\r\n\t\t\tthis.uniforms.get(\"patternTexture\").value = null;\r\n\t\t\tthis.setVertexShader(null);\r\n\r\n\t\t}\r\n\r\n\t\tthis.setChanged();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolution.scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolution.scale = scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the current selection and selects a list of objects.\r\n\t *\r\n\t * @param {Object3D[]} objects - The objects that should be outlined. This array will be copied.\r\n\t * @return {OutlinePass} This pass.\r\n\t * @deprecated Use selection.set instead.\r\n\t */\r\n\r\n\tsetSelection(objects) {\r\n\r\n\t\tthis.selection.set(objects);\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the list of selected objects.\r\n\t *\r\n\t * @return {OutlinePass} This pass.\r\n\t * @deprecated Use selection.clear instead.\r\n\t */\r\n\r\n\tclearSelection() {\r\n\r\n\t\tthis.selection.clear();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Selects an object.\r\n\t *\r\n\t * @param {Object3D} object - The object that should be outlined.\r\n\t * @return {OutlinePass} This pass.\r\n\t * @deprecated Use selection.add instead.\r\n\t */\r\n\r\n\tselectObject(object) {\r\n\r\n\t\tthis.selection.add(object);\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Deselects an object.\r\n\t *\r\n\t * @param {Object3D} object - The object that should no longer be outlined.\r\n\t * @return {OutlinePass} This pass.\r\n\t * @deprecated Use selection.delete instead.\r\n\t */\r\n\r\n\tdeselectObject(object) {\r\n\r\n\t\tthis.selection.delete(object);\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\t\tconst selection = this.selection;\r\n\t\tconst pulse = this.uniforms.get(\"pulse\");\r\n\r\n\t\tconst background = scene.background;\r\n\t\tconst mask = camera.layers.mask;\r\n\r\n\t\tif(selection.size > 0) {\r\n\r\n\t\t\tscene.background = null;\r\n\t\t\tpulse.value = 1.0;\r\n\r\n\t\t\tif(this.pulseSpeed > 0.0) {\r\n\r\n\t\t\t\tpulse.value = 0.625 + Math.cos(this.time * this.pulseSpeed * 10.0) * 0.375;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.time += deltaTime;\r\n\r\n\t\t\t// Render a custom depth texture and ignore selected objects.\r\n\t\t\tselection.setVisible(false);\r\n\t\t\tthis.depthPass.render(renderer);\r\n\t\t\tselection.setVisible(true);\r\n\r\n\t\t\t// Compare the depth of the selected objects with the depth texture.\r\n\t\t\tcamera.layers.set(selection.layer);\r\n\t\t\tthis.maskPass.render(renderer, this.renderTargetMask);\r\n\r\n\t\t\t// Restore the camera layer mask and the scene background.\r\n\t\t\tcamera.layers.mask = mask;\r\n\t\t\tscene.background = background;\r\n\r\n\t\t\t// Detect the outline.\r\n\t\t\tthis.outlinePass.render(renderer, null, this.renderTargetOutline);\r\n\r\n\t\t\tif(this.blur) {\r\n\r\n\t\t\t\tthis.blurPass.render(renderer, this.renderTargetOutline, this.renderTargetBlurredOutline);\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if(this.time > 0.0) {\r\n\r\n\t\t\tthis.clearPass.render(renderer, this.renderTargetMask);\r\n\t\t\tthis.time = 0.0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.blurPass.setSize(width, height);\r\n\t\tthis.renderTargetMask.setSize(width, height);\r\n\r\n\t\tconst w = this.resolution.width;\r\n\t\tconst h = this.resolution.height;\r\n\r\n\t\tthis.depthPass.setSize(w, h);\r\n\t\tthis.renderTargetOutline.setSize(w, h);\r\n\t\tthis.renderTargetBlurredOutline.setSize(w, h);\r\n\t\tthis.outlinePass.getFullscreenMaterial().setTexelSize(1.0 / w, 1.0 / h);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\t// No need for high precision: the blur pass operates on a mask texture.\r\n\t\tthis.blurPass.initialize(renderer, alpha, UnsignedByteType);\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\t// These passes ignore the buffer type.\r\n\t\t\tthis.depthPass.initialize(renderer, alpha, frameBufferType);\r\n\t\t\tthis.maskPass.initialize(renderer, alpha, frameBufferType);\r\n\t\t\tthis.outlinePass.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$u = \"uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}\";\r\n\r\n/**\r\n * A pixelation effect.\r\n *\r\n * Warning: This effect cannot be merged with convolution effects.\r\n */\r\n\r\nclass PixelationEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new pixelation effect.\r\n\t *\r\n\t * @param {Object} [granularity=30.0] - The pixel granularity.\r\n\t */\r\n\r\n\tconstructor(granularity = 30.0) {\r\n\r\n\t\tsuper(\"PixelationEffect\", fragmentShader$u, {\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"active\", new Uniform(false)],\r\n\t\t\t\t[\"d\", new Uniform(new Vector2$1())]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The original resolution.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Vector2$1();\r\n\r\n\t\t/**\r\n\t\t * The pixel granularity.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.granularity = granularity;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the pixel granularity.\r\n\t *\r\n\t * @return {Number} The granularity.\r\n\t */\r\n\r\n\tgetGranularity() {\r\n\r\n\t\treturn this.granularity;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the pixel granularity.\r\n\t *\r\n\t * A higher value yields coarser visuals.\r\n\t *\r\n\t * @param {Number} granularity - The new granularity.\r\n\t */\r\n\r\n\tsetGranularity(granularity) {\r\n\r\n\t\tgranularity = Math.floor(granularity);\r\n\r\n\t\tif(granularity % 2 > 0) {\r\n\r\n\t\t\tgranularity += 1;\r\n\r\n\t\t}\r\n\r\n\t\tconst uniforms = this.uniforms;\r\n\t\tuniforms.get(\"active\").value = (granularity > 0.0);\r\n\t\tuniforms.get(\"d\").value.set(granularity, granularity).divide(this.resolution);\r\n\r\n\t\tthis.granularity = granularity;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the granularity.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.resolution.set(width, height);\r\n\t\tthis.setGranularity(this.granularity);\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$v = \"uniform float focus;uniform float focalLength;uniform float fStop;uniform float maxBlur;uniform float luminanceThreshold;uniform float luminanceGain;uniform float bias;uniform float fringe;\\n#ifdef MANUAL_DOF\\nuniform vec4 dof;\\n#endif\\n#ifdef PENTAGON\\nfloat pentagon(const in vec2 coords){const vec4 HS0=vec4(1.0,0.0,0.0,1.0);const vec4 HS1=vec4(0.309016994,0.951056516,0.0,1.0);const vec4 HS2=vec4(-0.809016994,0.587785252,0.0,1.0);const vec4 HS3=vec4(-0.809016994,-0.587785252,0.0,1.0);const vec4 HS4=vec4(0.309016994,-0.951056516,0.0,1.0);const vec4 HS5=vec4(0.0,0.0,1.0,1.0);const vec4 ONE=vec4(1.0);const float P_FEATHER=0.4;const float N_FEATHER=-P_FEATHER;float inOrOut=-4.0;vec4 P=vec4(coords,vec2(RINGS_FLOAT-1.3));vec4 dist=vec4(dot(P,HS0),dot(P,HS1),dot(P,HS2),dot(P,HS3));dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dot(dist,ONE);dist.x=dot(P,HS4);dist.y=HS5.w-abs(P.z);dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dist.x;return clamp(inOrOut,0.0,1.0);}\\n#endif\\nvec3 processTexel(const in vec2 coords,const in float blur){vec2 scale=texelSize*fringe*blur;vec3 c=vec3(texture2D(inputBuffer,coords+vec2(0.0,1.0)*scale).r,texture2D(inputBuffer,coords+vec2(-0.866,-0.5)*scale).g,texture2D(inputBuffer,coords+vec2(0.866,-0.5)*scale).b);float luminance=linearToRelativeLuminance(c);float threshold=max((luminance-luminanceThreshold)*luminanceGain,0.0);return c+mix(vec3(0.0),c,threshold*blur);}float gather(const in float i,const in float j,const in float ringSamples,const in vec2 uv,const in vec2 blurFactor,const in float blur,inout vec3 color){float step=PI2/ringSamples;vec2 wh=vec2(cos(j*step)*i,sin(j*step)*i);\\n#ifdef PENTAGON\\nfloat p=pentagon(wh);\\n#else\\nfloat p=1.0;\\n#endif\\ncolor+=processTexel(wh*blurFactor+uv,blur)*mix(1.0,i/RINGS_FLOAT,bias)*p;return mix(1.0,i/RINGS_FLOAT,bias)*p;}void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\n#ifdef MANUAL_DOF\\nfloat focalPlane=linearDepth-focus;float farDoF=(focalPlane-dof.z)/dof.w;float nearDoF=(-focalPlane-dof.x)/dof.y;float blur=(focalPlane>0.0)? farDoF : nearDoF;\\n#else\\nconst float CIRCLE_OF_CONFUSION=0.03;float focalPlaneMM=focus*1000.0;float depthMM=linearDepth*1000.0;float focalPlane=(depthMM*focalLength)/(depthMM-focalLength);float farDoF=(focalPlaneMM*focalLength)/(focalPlaneMM-focalLength);float nearDoF=(focalPlaneMM-focalLength)/(focalPlaneMM*fStop*CIRCLE_OF_CONFUSION);float blur=abs(focalPlane-farDoF)*nearDoF;\\n#endif\\nconst int MAX_RING_SAMPLES=RINGS_INT*SAMPLES_INT;blur=clamp(blur,0.0,1.0);vec3 color=inputColor.rgb;if(blur>=0.05){vec2 blurFactor=blur*maxBlur*texelSize;float s=1.0;int ringSamples;for(int i=1;i<=RINGS_INT;i++){ringSamples=i*SAMPLES_INT;for(int j=0;j<MAX_RING_SAMPLES;j++){if(j>=ringSamples){break;}s+=gather(float(i),float(j),float(ringSamples),uv,blurFactor,blur,color);}}color/=s;}\\n#ifdef SHOW_FOCUS\\nfloat edge=0.002*linearDepth;float m=clamp(smoothstep(0.0,edge,blur),0.0,1.0);float e=clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);color=mix(color,vec3(1.0,0.5,0.0),(1.0-m)*0.6);color=mix(color,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\r\n\r\n/**\r\n * Depth of Field shader v2.4.\r\n *\r\n * Yields more realistic results but is also more demanding.\r\n *\r\n * Original shader code by Martins Upitis:\r\n *  http://blenderartists.org/forum/showthread.php?237488-GLSL-depth-of-field-with-bokeh-v2-4-(update)\r\n *\r\n * @deprecated Use DepthOfFieldEffect instead.\r\n */\r\n\r\nclass RealisticBokehEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new bokeh effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.focus=1.0] - The focus distance in world units.\r\n\t * @param {Number} [options.focalLength=24.0] - The focal length of the main camera.\r\n\t * @param {Number} [options.fStop=0.9] - The ratio of the lens focal length to the diameter of the entrance pupil (aperture).\r\n\t * @param {Number} [options.luminanceThreshold=0.5] - A luminance threshold.\r\n\t * @param {Number} [options.luminanceGain=2.0] - A luminance gain factor.\r\n\t * @param {Number} [options.bias=0.5] - A blur bias.\r\n\t * @param {Number} [options.fringe=0.7] - A blur offset.\r\n\t * @param {Number} [options.maxBlur=1.0] - The maximum blur strength.\r\n\t * @param {Boolean} [options.rings=3] - The number of blur iterations.\r\n\t * @param {Boolean} [options.samples=2] - The amount of samples taken per ring.\r\n\t * @param {Boolean} [options.showFocus=false] - Whether the focal point should be highlighted. Useful for debugging.\r\n\t * @param {Boolean} [options.manualDoF=false] - Enables manual control over the depth of field.\r\n\t * @param {Boolean} [options.pentagon=false] - Enables pentagonal blur shapes. Requires a high number of rings and samples.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tblendFunction = BlendFunction.NORMAL,\r\n\t\tfocus = 1.0,\r\n\t\tfocalLength = 24.0,\r\n\t\tfStop = 0.9,\r\n\t\tluminanceThreshold = 0.5,\r\n\t\tluminanceGain = 2.0,\r\n\t\tbias = 0.5,\r\n\t\tfringe = 0.7,\r\n\t\tmaxBlur = 1.0,\r\n\t\trings = 3,\r\n\t\tsamples = 2,\r\n\t\tshowFocus = false,\r\n\t\tmanualDoF = false,\r\n\t\tpentagon = false\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"RealisticBokehEffect\", fragmentShader$v, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"focus\", new Uniform(focus)],\r\n\t\t\t\t[\"focalLength\", new Uniform(focalLength)],\r\n\t\t\t\t[\"fStop\", new Uniform(fStop)],\r\n\t\t\t\t[\"luminanceThreshold\", new Uniform(luminanceThreshold)],\r\n\t\t\t\t[\"luminanceGain\", new Uniform(luminanceGain)],\r\n\t\t\t\t[\"bias\", new Uniform(bias)],\r\n\t\t\t\t[\"fringe\", new Uniform(fringe)],\r\n\t\t\t\t[\"maxBlur\", new Uniform(maxBlur)],\r\n\t\t\t\t[\"dof\", new Uniform(null)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.rings = rings;\r\n\t\tthis.samples = samples;\r\n\t\tthis.showFocus = showFocus;\r\n\t\tthis.manualDoF = manualDoF;\r\n\t\tthis.pentagon = pentagon;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of blur iterations.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget rings() {\r\n\r\n\t\treturn Number.parseInt(this.defines.get(\"RINGS_INT\"));\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of blur iterations.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset rings(value) {\r\n\r\n\t\tconst r = Math.floor(value);\r\n\t\tthis.defines.set(\"RINGS_INT\", r.toFixed(0));\r\n\t\tthis.defines.set(\"RINGS_FLOAT\", r.toFixed(1));\r\n\r\n\t\tthis.setChanged();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of blur samples per ring.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget samples() {\r\n\r\n\t\treturn Number.parseInt(this.defines.get(\"SAMPLES_INT\"));\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of blur samples per ring.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset samples(value) {\r\n\r\n\t\tconst s = Math.floor(value);\r\n\t\tthis.defines.set(\"SAMPLES_INT\", s.toFixed(0));\r\n\t\tthis.defines.set(\"SAMPLES_FLOAT\", s.toFixed(1));\r\n\r\n\t\tthis.setChanged();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the focal point will be highlighted.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget showFocus() {\r\n\r\n\t\treturn this.defines.has(\"SHOW_FOCUS\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables focal point highlighting.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset showFocus(value) {\r\n\r\n\t\tif(this.showFocus !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tthis.defines.set(\"SHOW_FOCUS\", \"1\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"SHOW_FOCUS\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the Depth of Field should be calculated manually.\r\n\t *\r\n\t * If enabled, the Depth of Field can be adjusted via the `dof` uniform.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget manualDoF() {\r\n\r\n\t\treturn this.defines.has(\"MANUAL_DOF\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables manual Depth of Field.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset manualDoF(value) {\r\n\r\n\t\tif(this.manualDoF !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tthis.defines.set(\"MANUAL_DOF\", \"1\");\r\n\t\t\t\tthis.uniforms.get(\"dof\").value = new Vector4(0.2, 1.0, 0.2, 2.0);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"MANUAL_DOF\");\r\n\t\t\t\tthis.uniforms.get(\"dof\").value = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the blur shape should be pentagonal.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget pentagon() {\r\n\r\n\t\treturn this.defines.has(\"PENTAGON\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables pentagonal blur.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset pentagon(value) {\r\n\r\n\t\tif(this.pentagon !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tthis.defines.set(\"PENTAGON\", \"1\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"PENTAGON\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$w = \"uniform float count;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 sl=vec2(sin(uv.y*count),cos(uv.y*count));vec3 scanlines=vec3(sl.x,sl.y,sl.x);outputColor=vec4(scanlines,inputColor.a);}\";\r\n\r\n/**\r\n * A scanline effect.\r\n *\r\n * Based on an implementation by Georg 'Leviathan' Steinrohder (CC BY 3.0):\r\n * http://www.truevision3d.com/forums/showcase/staticnoise_colorblackwhite_scanline_shaders-t18698.0.html\r\n */\r\n\r\nclass ScanlineEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new scanline effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.OVERLAY] - The blend function of this effect.\r\n\t * @param {Number} [options.density=1.25] - The scanline density.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.OVERLAY, density = 1.25 } = {}) {\r\n\r\n\t\tsuper(\"ScanlineEffect\", fragmentShader$w, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"count\", new Uniform(0.0)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The original resolution.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Vector2$1();\r\n\r\n\t\t/**\r\n\t\t * The amount of scanlines, relative to the screen height.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.density = density;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current scanline density.\r\n\t *\r\n\t * @return {Number} The scanline density.\r\n\t */\r\n\r\n\tgetDensity() {\r\n\r\n\t\treturn this.density;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the scanline density.\r\n\t *\r\n\t * @param {Number} density - The new scanline density.\r\n\t */\r\n\r\n\tsetDensity(density) {\r\n\r\n\t\tthis.density = density;\r\n\t\tthis.setSize(this.resolution.x, this.resolution.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.resolution.set(width, height);\r\n\t\tthis.uniforms.get(\"count\").value = Math.round(height * this.density);\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$x = \"uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}\";\r\n\r\nvar vertexShader$a = \"uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}\";\r\n\r\n/**\r\n * Half PI.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst HALF_PI = Math.PI * 0.5;\r\n\r\n/**\r\n * A vector.\r\n *\r\n * @type {Vector3}\r\n * @private\r\n */\r\n\r\nconst v$1 = new Vector3();\r\n\r\n/**\r\n * A vector.\r\n *\r\n * @type {Vector3}\r\n * @private\r\n */\r\n\r\nconst ab = new Vector3();\r\n\r\n/**\r\n * A shock wave effect.\r\n *\r\n * Based on a Gist by Jean-Philippe Sarda:\r\n *  https://gist.github.com/jpsarda/33cea67a9f2ecb0a0eda\r\n *\r\n * Warning: This effect cannot be merged with convolution effects.\r\n */\r\n\r\nclass ShockWaveEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new shock wave effect.\r\n\t *\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Vector3} [epicenter] - The world position of the shock wave epicenter.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.speed=2.0] - The animation speed.\r\n\t * @param {Number} [options.maxRadius=1.0] - The extent of the shock wave.\r\n\t * @param {Number} [options.waveSize=0.2] - The wave size.\r\n\t * @param {Number} [options.amplitude=0.05] - The distortion amplitude.\r\n\t */\r\n\r\n\tconstructor(camera, epicenter = new Vector3(), {\r\n\t\tspeed = 2.0,\r\n\t\tmaxRadius = 1.0,\r\n\t\twaveSize = 0.2,\r\n\t\tamplitude = 0.05\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"ShockWaveEffect\", fragmentShader$x, {\r\n\r\n\t\t\tvertexShader: vertexShader$a,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"active\", new Uniform(false)],\r\n\t\t\t\t[\"center\", new Uniform(new Vector2$1(0.5, 0.5))],\r\n\t\t\t\t[\"cameraDistance\", new Uniform(1.0)],\r\n\t\t\t\t[\"size\", new Uniform(1.0)],\r\n\t\t\t\t[\"radius\", new Uniform(-waveSize)],\r\n\t\t\t\t[\"maxRadius\", new Uniform(maxRadius)],\r\n\t\t\t\t[\"waveSize\", new Uniform(waveSize)],\r\n\t\t\t\t[\"amplitude\", new Uniform(amplitude)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * The epicenter.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t * @example shockWavePass.epicenter = myMesh.position;\r\n\t\t */\r\n\r\n\t\tthis.epicenter = epicenter;\r\n\r\n\t\t/**\r\n\t\t * The object position in screen space.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.screenPosition = this.uniforms.get(\"center\").value;\r\n\r\n\t\t/**\r\n\t\t * The speed of the shock wave animation.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.speed = speed;\r\n\r\n\t\t/**\r\n\t\t * A time accumulator.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.time = 0.0;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the shock wave animation is active.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.active = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Emits the shock wave.\r\n\t */\r\n\r\n\texplode() {\r\n\r\n\t\tthis.time = 0.0;\r\n\t\tthis.active = true;\r\n\t\tthis.uniforms.get(\"active\").value = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [delta] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, delta) {\r\n\r\n\t\tconst epicenter = this.epicenter;\r\n\t\tconst camera = this.camera;\r\n\t\tconst uniforms = this.uniforms;\r\n\t\tconst uniformActive = uniforms.get(\"active\");\r\n\r\n\t\tif(this.active) {\r\n\r\n\t\t\tconst waveSize = uniforms.get(\"waveSize\").value;\r\n\r\n\t\t\t// Calculate direction vectors.\r\n\t\t\tcamera.getWorldDirection(v$1);\r\n\t\t\tab.copy(camera.position).sub(epicenter);\r\n\r\n\t\t\t// Don't render the effect if the object is behind the camera.\r\n\t\t\tuniformActive.value = (v$1.angleTo(ab) > HALF_PI);\r\n\r\n\t\t\tif(uniformActive.value) {\r\n\r\n\t\t\t\t// Scale the effect based on distance to the object.\r\n\t\t\t\tuniforms.get(\"cameraDistance\").value = camera.position.distanceTo(epicenter);\r\n\r\n\t\t\t\t// Calculate the screen position of the epicenter.\r\n\t\t\t\tv$1.copy(epicenter).project(camera);\r\n\t\t\t\tthis.screenPosition.set((v$1.x + 1.0) * 0.5, (v$1.y + 1.0) * 0.5);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Update the shock wave radius based on time.\r\n\t\t\tthis.time += delta * this.speed;\r\n\t\t\tconst radius = this.time - waveSize;\r\n\t\t\tuniforms.get(\"radius\").value = radius;\r\n\r\n\t\t\tif(radius >= (uniforms.get(\"maxRadius\").value + waveSize) * 2.0) {\r\n\r\n\t\t\t\tthis.active = false;\r\n\t\t\t\tuniformActive.value = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A selective bloom effect.\r\n *\r\n * This effect applies bloom only to selected objects by using layers. Make sure\r\n * to enable the selection layer for all relevant lights:\r\n *\r\n * `lights.forEach((l) => l.layers.enable(bloomEffect.selection.layer));`\r\n *\r\n * Attention: If you don't need to limit bloom to a subset of objects, consider\r\n * using the {@link BloomEffect} instead for better performance.\r\n */\r\n\r\nclass SelectiveBloomEffect extends BloomEffect {\r\n\r\n\t/**\r\n\t * Constructs a new selective bloom effect.\r\n\t *\r\n\t * @param {Scene} scene - The main scene.\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Object} [options] - The options. See {@link BloomEffect} for details.\r\n\t */\r\n\r\n\tconstructor(scene, camera, options) {\r\n\r\n\t\tsuper(options);\r\n\r\n\t\t/**\r\n\t\t * The main scene.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.scene = scene;\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass(true, true, false);\r\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\r\n\r\n\t\t/**\r\n\t\t * A render pass.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderPass = new RenderPass(scene, camera);\r\n\t\tthis.renderPass.clear = false;\r\n\r\n\t\t/**\r\n\t\t * A render pass that renders all objects solid black.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.blackoutPass = new RenderPass(scene, camera, new MeshBasicMaterial({ color: 0x000000 }));\r\n\t\tthis.blackoutPass.clear = false;\r\n\r\n\t\t/**\r\n\t\t * A render pass that only renders the background of the main scene.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.backgroundPass = (() => {\r\n\r\n\t\t\tconst backgroundScene = new Scene();\r\n\t\t\tconst pass = new RenderPass(backgroundScene, camera);\r\n\r\n\t\t\tbackgroundScene.background = scene.background;\r\n\t\t\tpass.clear = false;\r\n\r\n\t\t\treturn pass;\r\n\r\n\t\t})();\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetSelection = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: true\r\n\t\t});\r\n\r\n\t\tthis.renderTargetSelection.texture.name = \"Bloom.Selection\";\r\n\t\tthis.renderTargetSelection.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * A selection of objects.\r\n\t\t *\r\n\t\t * @type {Selection}\r\n\t\t */\r\n\r\n\t\tthis.selection = new Selection();\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the selection should be considered inverted.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.inverted = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the scene background should be ignored.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget ignoreBackground() {\r\n\r\n\t\treturn !this.backgroundPass.enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables background rendering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset ignoreBackground(value) {\r\n\r\n\t\tthis.backgroundPass.enabled = !value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\t\tconst selection = this.selection;\r\n\t\tconst renderTarget = this.renderTargetSelection;\r\n\r\n\t\tconst background = scene.background;\r\n\t\tconst mask = camera.layers.mask;\r\n\r\n\t\tthis.clearPass.render(renderer, renderTarget);\r\n\r\n\t\tif(!this.ignoreBackground) {\r\n\r\n\t\t\tthis.backgroundPass.render(renderer, renderTarget);\r\n\r\n\t\t}\r\n\r\n\t\tscene.background = null;\r\n\r\n\t\tif(this.inverted) {\r\n\r\n\t\t\tcamera.layers.set(selection.layer);\r\n\t\t\tthis.blackoutPass.render(renderer, renderTarget);\r\n\t\t\tcamera.layers.mask = mask;\r\n\r\n\t\t\tselection.setVisible(false);\r\n\t\t\tthis.renderPass.render(renderer, renderTarget);\r\n\t\t\tselection.setVisible(true);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tselection.setVisible(false);\r\n\t\t\tthis.blackoutPass.render(renderer, renderTarget);\r\n\t\t\tselection.setVisible(true);\r\n\r\n\t\t\tcamera.layers.set(selection.layer);\r\n\t\t\tthis.renderPass.render(renderer, renderTarget);\r\n\t\t\tcamera.layers.mask = mask;\r\n\r\n\t\t}\r\n\r\n\t\tscene.background = background;\r\n\t\tsuper.update(renderer, renderTarget, deltaTime);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tsuper.setSize(width, height);\r\n\r\n\t\tthis.backgroundPass.setSize(width, height);\r\n\t\tthis.blackoutPass.setSize(width, height);\r\n\t\tthis.renderPass.setSize(width, height);\r\n\r\n\t\tthis.renderTargetSelection.setSize(\r\n\t\t\tthis.resolution.width,\r\n\t\t\tthis.resolution.height\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tsuper.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\tthis.backgroundPass.initialize(renderer, alpha, frameBufferType);\r\n\t\tthis.blackoutPass.initialize(renderer, alpha, frameBufferType);\r\n\t\tthis.renderPass.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTargetSelection.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTargetSelection.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$y = \"uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,vec3(1.0-0.607*intensity,0.769*intensity,0.189*intensity)),dot(inputColor.rgb,vec3(0.349*intensity,1.0-0.314*intensity,0.168*intensity)),dot(inputColor.rgb,vec3(0.272*intensity,0.534*intensity,1.0-0.869*intensity)));outputColor=vec4(color,inputColor.a);}\";\r\n\r\n/**\r\n * A sepia effect.\r\n */\r\n\r\nclass SepiaEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new sepia effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.intensity=1.0] - The intensity of the effect.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, intensity = 1.0 } = {}) {\r\n\r\n\t\tsuper(\"SepiaEffect\", fragmentShader$y, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"intensity\", new Uniform(intensity)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Generated with SMAASearchImageData.generate().toCanvas().toDataURL(), cropped, high dynamic range.\r\nvar searchImageDataURL = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC\";\r\n\r\n// Generated with SMAAAreaImageData.generate().toCanvas().toDataURL().\r\nvar areaImageDataURL = \"data:image/png;base64,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\";\r\n\r\nvar fragmentShader$z = \"uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;/***Moves values to a target vector based on a given conditional vector.*/void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}\";\r\n\r\nvar vertexShader$b = \"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}\";\r\n\r\n/**\r\n * Subpixel Morphological Antialiasing (SMAA).\r\n *\r\n * https://github.com/iryoku/smaa/releases/tag/v2.8\r\n */\r\n\r\nclass SMAAEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new SMAA effect.\r\n\t *\r\n\t * @param {Image} searchImage - The SMAA search image. Preload this image using the {@link SMAAImageLoader}.\r\n\t * @param {Image} areaImage - The SMAA area image. Preload this image using the {@link SMAAImageLoader}.\r\n\t * @param {SMAAPreset} [preset=SMAAPreset.HIGH] - An SMAA quality preset.\r\n\t * @param {EdgeDetectionMode} [edgeDetectionMode=EdgeDetectionMode.COLOR] - The edge detection mode.\r\n\t */\r\n\r\n\tconstructor(searchImage, areaImage, preset = SMAAPreset.HIGH, edgeDetectionMode = EdgeDetectionMode.COLOR) {\r\n\r\n\t\tsuper(\"SMAAEffect\", fragmentShader$z, {\r\n\r\n\t\t\tvertexShader: vertexShader$b,\r\n\t\t\tblendFunction: BlendFunction.NORMAL,\r\n\t\t\tattributes: EffectAttribute.CONVOLUTION,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"weightMap\", new Uniform(null)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * A render target for the edge detection.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetEdges = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\tformat: RGBFormat\r\n\t\t});\r\n\r\n\t\tthis.renderTargetEdges.texture.name = \"SMAA.Edges\";\r\n\r\n\t\t/**\r\n\t\t * A render target for the edge weights.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetWeights = this.renderTargetEdges.clone();\r\n\r\n\t\tthis.renderTargetWeights.texture.name = \"SMAA.Weights\";\r\n\t\tthis.renderTargetWeights.texture.format = RGBAFormat;\r\n\r\n\t\tthis.uniforms.get(\"weightMap\").value = this.renderTargetWeights.texture;\r\n\r\n\t\t/**\r\n\t\t * A clear pass for the edges buffer.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass(true, false, false);\r\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\r\n\t\tthis.clearPass.overrideClearAlpha = 1.0;\r\n\r\n\t\t/**\r\n\t\t * An edge detection pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.edgeDetectionPass = new ShaderPass(\r\n\t\t\tnew EdgeDetectionMaterial(new Vector2$1(), edgeDetectionMode)\r\n\t\t);\r\n\r\n\t\tif(edgeDetectionMode === EdgeDetectionMode.DEPTH) {\r\n\r\n\t\t\tthis.setAttributes(this.getAttributes() | EffectAttribute.DEPTH);\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * An SMAA weights pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.weightsPass = new ShaderPass(new SMAAWeightsMaterial());\r\n\r\n\t\tthis.weightsPass.getFullscreenMaterial().uniforms.searchTexture.value = (() => {\r\n\r\n\t\t\tconst searchTexture = new Texture(searchImage);\r\n\t\t\tsearchTexture.name = \"SMAA.Search\";\r\n\t\t\tsearchTexture.magFilter = NearestFilter;\r\n\t\t\tsearchTexture.minFilter = NearestFilter;\r\n\t\t\tsearchTexture.format = RGBAFormat;\r\n\t\t\tsearchTexture.generateMipmaps = false;\r\n\t\t\tsearchTexture.needsUpdate = true;\r\n\t\t\tsearchTexture.flipY = true;\r\n\r\n\t\t\treturn searchTexture;\r\n\r\n\t\t})();\r\n\r\n\t\tthis.weightsPass.getFullscreenMaterial().uniforms.areaTexture.value = (() => {\r\n\r\n\t\t\tconst areaTexture = new Texture(areaImage);\r\n\t\t\tareaTexture.name = \"SMAA.Area\";\r\n\t\t\tareaTexture.minFilter = LinearFilter;\r\n\t\t\tareaTexture.format = RGBAFormat;\r\n\t\t\tareaTexture.generateMipmaps = false;\r\n\t\t\tareaTexture.needsUpdate = true;\r\n\t\t\tareaTexture.flipY = false;\r\n\r\n\t\t\treturn areaTexture;\r\n\r\n\t\t})();\r\n\r\n\t\tthis.applyPreset(preset);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The internal edge detection material.\r\n\t *\r\n\t * @type {EdgeDetectionMaterial}\r\n\t */\r\n\r\n\tget edgeDetectionMaterial() {\r\n\r\n\t\treturn this.edgeDetectionPass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The internal edge detection material.\r\n\t *\r\n\t * @type {EdgeDetectionMaterial}\r\n\t * @deprecated Use edgeDetectionMaterial instead.\r\n\t */\r\n\r\n\tget colorEdgesMaterial() {\r\n\r\n\t\treturn this.edgeDetectionMaterial;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The internal edge weights material.\r\n\t *\r\n\t * @type {SMAAWeightsMaterial}\r\n\t */\r\n\r\n\tget weightsMaterial() {\r\n\r\n\t\treturn this.weightsPass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the edge detection sensitivity.\r\n\t *\r\n\t * See {@link EdgeDetectionMaterial#setEdgeDetectionThreshold} for more details.\r\n\t *\r\n\t * @deprecated Use applyPreset or edgeDetectionMaterial instead.\r\n\t * @param {Number} threshold - The edge detection sensitivity. Range: [0.05, 0.5].\r\n\t */\r\n\r\n\tsetEdgeDetectionThreshold(threshold) {\r\n\r\n\t\tthis.edgeDetectionPass.getFullscreenMaterial().setEdgeDetectionThreshold(threshold);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the maximum amount of horizontal/vertical search steps.\r\n\t *\r\n\t * See {@link SMAAWeightsMaterial#setOrthogonalSearchSteps} for more details.\r\n\t *\r\n\t * @deprecated Use applyPreset or weightsMaterial instead.\r\n\t * @param {Number} steps - The search steps. Range: [0, 112].\r\n\t */\r\n\r\n\tsetOrthogonalSearchSteps(steps) {\r\n\r\n\t\tthis.weightsPass.getFullscreenMaterial().setOrthogonalSearchSteps(steps);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies the given quality preset.\r\n\t *\r\n\t * @param {SMAAPreset} preset - The preset.\r\n\t */\r\n\r\n\tapplyPreset(preset) {\r\n\r\n\t\tconst edgeDetectionMaterial = this.edgeDetectionMaterial;\r\n\t\tconst weightsMaterial = this.weightsMaterial;\r\n\r\n\t\tswitch(preset) {\r\n\r\n\t\t\tcase SMAAPreset.LOW:\r\n\t\t\t\tedgeDetectionMaterial.setEdgeDetectionThreshold(0.15);\r\n\t\t\t\tweightsMaterial.setOrthogonalSearchSteps(4);\r\n\t\t\t\tweightsMaterial.diagonalDetection = false;\r\n\t\t\t\tweightsMaterial.cornerRounding = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase SMAAPreset.MEDIUM:\r\n\t\t\t\tedgeDetectionMaterial.setEdgeDetectionThreshold(0.1);\r\n\t\t\t\tweightsMaterial.setOrthogonalSearchSteps(8);\r\n\t\t\t\tweightsMaterial.diagonalDetection = false;\r\n\t\t\t\tweightsMaterial.cornerRounding = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase SMAAPreset.HIGH:\r\n\t\t\t\tedgeDetectionMaterial.setEdgeDetectionThreshold(0.1);\r\n\t\t\t\tweightsMaterial.setOrthogonalSearchSteps(16);\r\n\t\t\t\tweightsMaterial.setDiagonalSearchSteps(8);\r\n\t\t\t\tweightsMaterial.setCornerRounding(25);\r\n\t\t\t\tweightsMaterial.diagonalDetection = true;\r\n\t\t\t\tweightsMaterial.cornerRounding = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase SMAAPreset.ULTRA:\r\n\t\t\t\tedgeDetectionMaterial.setEdgeDetectionThreshold(0.05);\r\n\t\t\t\tweightsMaterial.setOrthogonalSearchSteps(32);\r\n\t\t\t\tweightsMaterial.setDiagonalSearchSteps(16);\r\n\t\t\t\tweightsMaterial.setCornerRounding(25);\r\n\t\t\t\tweightsMaterial.diagonalDetection = true;\r\n\t\t\t\tweightsMaterial.cornerRounding = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.edgeDetectionMaterial;\r\n\t\tmaterial.uniforms.depthBuffer.value = depthTexture;\r\n\t\tmaterial.depthPacking = depthPacking;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tthis.clearPass.render(renderer, this.renderTargetEdges);\r\n\t\tthis.edgeDetectionPass.render(renderer, inputBuffer, this.renderTargetEdges);\r\n\t\tthis.weightsPass.render(renderer, this.renderTargetEdges, this.renderTargetWeights);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst edgeDetectionMaterial = this.edgeDetectionPass.getFullscreenMaterial();\r\n\t\tconst weightsMaterial = this.weightsPass.getFullscreenMaterial();\r\n\r\n\t\tthis.renderTargetEdges.setSize(width, height);\r\n\t\tthis.renderTargetWeights.setSize(width, height);\r\n\r\n\t\tweightsMaterial.uniforms.resolution.value.set(width, height);\r\n\t\tweightsMaterial.uniforms.texelSize.value.set(1.0 / width, 1.0 / height);\r\n\t\tedgeDetectionMaterial.uniforms.texelSize.value.copy(weightsMaterial.uniforms.texelSize.value);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Deletes internal render targets and textures.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tconst uniforms = this.weightsPass.getFullscreenMaterial().uniforms;\r\n\t\tuniforms.searchTexture.value.dispose();\r\n\t\tuniforms.areaTexture.value.dispose();\r\n\r\n\t\tsuper.dispose();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The SMAA search image, encoded as a base64 data URL.\r\n\t *\r\n\t * Use this image data to create an Image instance and use it together with\r\n\t * the area image to create an {@link SMAAEffect}.\r\n\t *\r\n\t * @type {String}\r\n\t * @deprecated Use SMAAImageLoader instead.\r\n\t * @example\r\n\t * const searchImage = new Image();\r\n\t * searchImage.addEventListener(\"load\", progress);\r\n\t * searchImage.src = SMAAEffect.searchImageDataURL;\r\n\t */\r\n\r\n\tstatic get searchImageDataURL() {\r\n\r\n\t\treturn searchImageDataURL;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The SMAA area image, encoded as a base64 data URL.\r\n\t *\r\n\t * Use this image data to create an Image instance and use it together with\r\n\t * the search image to create an {@link SMAAEffect}.\r\n\t *\r\n\t * @type {String}\r\n\t * @deprecated Use SMAAImageLoader instead.\r\n\t * @example\r\n\t * const areaImage = new Image();\r\n\t * areaImage.addEventListener(\"load\", progress);\r\n\t * areaImage.src = SMAAEffect.areaImageDataURL;\r\n\t */\r\n\r\n\tstatic get areaImageDataURL() {\r\n\r\n\t\treturn areaImageDataURL;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An enumeration of SMAA presets.\r\n *\r\n * @type {Object}\r\n * @property {Number} LOW - Results in around 60% of the maximum quality.\r\n * @property {Number} MEDIUM - Results in around 80% of the maximum quality.\r\n * @property {Number} HIGH - Results in around 95% of the maximum quality.\r\n * @property {Number} ULTRA - Results in around 99% of the maximum quality.\r\n */\r\n\r\nconst SMAAPreset = {\r\n\r\n\tLOW: 0,\r\n\tMEDIUM: 1,\r\n\tHIGH: 2,\r\n\tULTRA: 3\r\n\r\n};\r\n\r\nvar fragmentShader$A = \"uniform sampler2D aoBuffer;uniform float luminanceInfluence;\\n#ifdef DEPTH_AWARE_UPSAMPLING\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D normalDepthBuffer;\\n#else\\nuniform mediump sampler2D normalDepthBuffer;\\n#endif\\n#endif\\n#ifdef COLORIZE\\nuniform vec3 color;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;\\n#if defined(DEPTH_AWARE_UPSAMPLING) && __VERSION__ == 300\\nvec4 normalDepth[4]=vec4[](textureOffset(normalDepthBuffer,uv,ivec2(0,0)),textureOffset(normalDepthBuffer,uv,ivec2(0,1)),textureOffset(normalDepthBuffer,uv,ivec2(1,0)),textureOffset(normalDepthBuffer,uv,ivec2(1,1)));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4]=ivec2[](ivec2(0,0),ivec2(0,1),ivec2(1,0),ivec2(1,1));ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);\\n#else\\nfloat ao=aoLinear;\\n#endif\\nfloat l=linearToRelativeLuminance(inputColor.rgb);ao=mix(ao,1.0,l*luminanceInfluence);\\n#ifdef COLORIZE\\noutputColor=vec4(1.0-(1.0-ao)*(1.0-color),inputColor.a);\\n#else\\noutputColor=vec4(vec3(ao),inputColor.a);\\n#endif\\n}\";\r\n\r\n/**\r\n * The size of the generated noise texture.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst NOISE_TEXTURE_SIZE = 64;\r\n\r\n/**\r\n * A Screen Space Ambient Occlusion (SSAO) effect.\r\n *\r\n * For high quality visuals use two SSAO effect instances in a row with\r\n * different radii, one for rough AO and one for fine details.\r\n *\r\n * This effect supports depth-aware upsampling and should be rendered at a lower\r\n * resolution. The resolution should match that of the downsampled normals and\r\n * depth. If you intend to render SSAO at full resolution, do not provide a\r\n * downsampled `normalDepthBuffer` and make sure to disable\r\n * `depthAwareUpsampling`.\r\n *\r\n * It's recommended to specify a relative render resolution using the\r\n * `resolutionScale` constructor parameter to avoid undesired sampling patterns.\r\n *\r\n * Based on \"Scalable Ambient Obscurance\" by Morgan McGuire et al. and\r\n * \"Depth-aware upsampling experiments\" by Eleni Maria Stea:\r\n * https://research.nvidia.com/publication/scalable-ambient-obscurance\r\n * https://eleni.mutantstargoat.com/hikiko/on-depth-aware-upsampling\r\n */\r\n\r\nclass SSAOEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new SSAO effect.\r\n\t *\r\n\t * @todo Move normalBuffer to options.\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Texture} normalBuffer - A texture that contains the scene normals. May be null if a normalDepthBuffer is provided. See {@link NormalPass}.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.MULTIPLY] - The blend function of this effect.\r\n\t * @param {Boolean} [options.distanceScaling=true] - Enables or disables distance-based radius scaling.\r\n\t * @param {Boolean} [options.depthAwareUpsampling=true] - Enables or disables depth-aware upsampling. Has no effect if WebGL 2 is not supported.\r\n\t * @param {Texture} [options.normalDepthBuffer=null] - A texture that contains downsampled scene normals and depth. See {@link DepthDownsamplingPass}.\r\n\t * @param {Number} [options.samples=9] - The amount of samples per pixel. Should not be a multiple of the ring count.\r\n\t * @param {Number} [options.rings=7] - The amount of spiral turns in the occlusion sampling pattern. Should be a prime number.\r\n\t * @param {Number} [options.distanceThreshold=0.97] - A global distance threshold at which the occlusion effect starts to fade out. Range [0.0, 1.0].\r\n\t * @param {Number} [options.distanceFalloff=0.03] - The distance falloff. Influences the smoothness of the overall occlusion cutoff. Range [0.0, 1.0].\r\n\t * @param {Number} [options.rangeThreshold=0.0005] - A local occlusion range threshold at which the occlusion starts to fade out. Range [0.0, 1.0].\r\n\t * @param {Number} [options.rangeFalloff=0.001] - The occlusion range falloff. Influences the smoothness of the proximity cutoff. Range [0.0, 1.0].\r\n\t * @param {Number} [options.minRadiusScale=0.33] - The minimum radius scale. Has no effect if distance scaling is disabled.\r\n\t * @param {Number} [options.luminanceInfluence=0.7] - Determines how much the luminance of the scene influences the ambient occlusion.\r\n\t * @param {Number} [options.radius=0.1825] - The occlusion sampling radius, expressed as a resolution independent scale. Range [1e-6, 1.0].\r\n\t * @param {Number} [options.intensity=1.0] - The intensity of the ambient occlusion.\r\n\t * @param {Number} [options.bias=0.025] - An occlusion bias. Eliminates artifacts caused by depth discontinuities.\r\n\t * @param {Number} [options.fade=0.01] - Influences the smoothness of the shadows. A lower value results in higher contrast.\r\n\t * @param {Color} [options.color=null] - The color of the ambient occlusion.\r\n\t * @param {Number} [options.resolutionScale=1.0] - The resolution scale.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t */\r\n\r\n\tconstructor(camera, normalBuffer, {\r\n\t\tblendFunction = BlendFunction.MULTIPLY,\r\n\t\tdistanceScaling = true,\r\n\t\tdepthAwareUpsampling = true,\r\n\t\tnormalDepthBuffer = null,\r\n\t\tsamples = 9,\r\n\t\trings = 7,\r\n\t\tdistanceThreshold = 0.97,\r\n\t\tdistanceFalloff = 0.03,\r\n\t\trangeThreshold = 0.0005,\r\n\t\trangeFalloff = 0.001,\r\n\t\tminRadiusScale = 0.33,\r\n\t\tluminanceInfluence = 0.7,\r\n\t\tradius = 0.1825,\r\n\t\tintensity = 1.0,\r\n\t\tbias = 0.025,\r\n\t\tfade = 0.01,\r\n\t\tcolor = null,\r\n\t\tresolutionScale = 1.0,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"SSAOEffect\", fragmentShader$A, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.DEPTH,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"aoBuffer\", new Uniform(null)],\r\n\t\t\t\t[\"normalDepthBuffer\", new Uniform(null)],\r\n\t\t\t\t[\"luminanceInfluence\", new Uniform(luminanceInfluence)],\r\n\t\t\t\t[\"color\", new Uniform(null)],\r\n\t\t\t\t[\"scale\", new Uniform(0.0)] // Unused.\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * A render target for the ambient occlusion shadows.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetAO = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\tformat: RGBFormat\r\n\t\t});\r\n\r\n\t\tthis.renderTargetAO.texture.name = \"AO.Target\";\r\n\t\tthis.renderTargetAO.texture.generateMipmaps = false;\r\n\r\n\t\tthis.uniforms.get(\"aoBuffer\").value = this.renderTargetAO.texture;\r\n\r\n\t\t/**\r\n\t\t * The resolution of this effect.\r\n\t\t *\r\n\t\t * @type {Resizer}\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Resizer(this, width, height, resolutionScale);\r\n\r\n\t\t/**\r\n\t\t * The current radius relative to the render height.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.r = 1.0;\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * An SSAO pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.ssaoPass = new ShaderPass((() => {\r\n\r\n\t\t\tconst noiseTexture = new NoiseTexture(NOISE_TEXTURE_SIZE, NOISE_TEXTURE_SIZE);\r\n\t\t\tnoiseTexture.wrapS = noiseTexture.wrapT = RepeatWrapping;\r\n\r\n\t\t\tconst material = new SSAOMaterial(camera);\r\n\t\t\tmaterial.uniforms.noiseTexture.value = noiseTexture;\r\n\t\t\tmaterial.uniforms.intensity.value = intensity;\r\n\t\t\tmaterial.uniforms.minRadiusScale.value = minRadiusScale;\r\n\t\t\tmaterial.uniforms.fade.value = fade;\r\n\t\t\tmaterial.uniforms.bias.value = bias;\r\n\r\n\t\t\tif(normalDepthBuffer !== null) {\r\n\r\n\t\t\t\tmaterial.uniforms.normalDepthBuffer.value = normalDepthBuffer;\r\n\t\t\t\tmaterial.defines.NORMAL_DEPTH = \"1\";\r\n\r\n\t\t\t\tif(depthAwareUpsampling) {\r\n\r\n\t\t\t\t\tthis.depthAwareUpsampling = depthAwareUpsampling;\r\n\t\t\t\t\tthis.uniforms.get(\"normalDepthBuffer\").value = normalDepthBuffer;\r\n\t\t\t\t\tthis.defines.set(\"THRESHOLD\", \"0.997\");\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial.uniforms.normalBuffer.value = normalBuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t})());\r\n\r\n\t\tthis.distanceScaling = distanceScaling;\r\n\t\tthis.samples = samples;\r\n\t\tthis.rings = rings;\r\n\t\tthis.color = color;\r\n\r\n\t\t// @todo Special case treatment added for backwards-compatibility.\r\n\t\tthis.radius = (radius > 1.0) ? (radius / 100.0) : radius;\r\n\r\n\t\tthis.setDistanceCutoff(distanceThreshold, distanceFalloff);\r\n\t\tthis.setProximityCutoff(rangeThreshold, rangeFalloff);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The SSAO material.\r\n\t *\r\n\t * @type {SSAOMaterial}\r\n\t */\r\n\r\n\tget ssaoMaterial() {\r\n\r\n\t\treturn this.ssaoPass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of occlusion samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget samples() {\r\n\r\n\t\treturn Number(this.ssaoMaterial.defines.SAMPLES_INT);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of occlusion samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset samples(value) {\r\n\r\n\t\tconst material = this.ssaoMaterial;\r\n\t\tmaterial.defines.SAMPLES_INT = value.toFixed(0);\r\n\t\tmaterial.defines.SAMPLES_FLOAT = value.toFixed(1);\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of spiral turns in the occlusion sampling pattern.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget rings() {\r\n\r\n\t\treturn Number(this.ssaoMaterial.defines.SPIRAL_TURNS);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of spiral turns in the occlusion sampling pattern.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset rings(value) {\r\n\r\n\t\tconst material = this.ssaoMaterial;\r\n\t\tmaterial.defines.SPIRAL_TURNS = value.toFixed(1);\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The occlusion sampling radius.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget radius() {\r\n\r\n\t\treturn this.r;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the occlusion sampling radius. Range [1e-6, 1.0].\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset radius(value) {\r\n\r\n\t\tthis.r = Math.min(Math.max(value, 1e-6), 1.0);\r\n\r\n\t\tconst radius = this.r * this.resolution.height;\r\n\t\tconst material = this.ssaoMaterial;\r\n\t\tmaterial.defines.RADIUS = radius.toFixed(11);\r\n\t\tmaterial.defines.RADIUS_SQ = (radius * radius).toFixed(11);\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether depth-aware upsampling is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget depthAwareUpsampling() {\r\n\r\n\t\treturn this.defines.has(\"DEPTH_AWARE_UPSAMPLING\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables depth-aware upsampling.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset depthAwareUpsampling(value) {\r\n\r\n\t\tif(this.depthAwareUpsampling !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tthis.defines.set(\"DEPTH_AWARE_UPSAMPLING\", \"1\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"DEPTH_AWARE_UPSAMPLING\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether distance-based radius scaling is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget distanceScaling() {\r\n\r\n\t\treturn (this.ssaoMaterial.defines.DISTANCE_SCALING !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables distance-based radius scaling.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset distanceScaling(value) {\r\n\r\n\t\tif(this.distanceScaling !== value) {\r\n\r\n\t\t\tconst material = this.ssaoMaterial;\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tmaterial.defines.DISTANCE_SCALING = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete material.defines.DISTANCE_SCALING;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The color of the ambient occlusion.\r\n\t *\r\n\t * @type {Color}\r\n\t */\r\n\r\n\tget color() {\r\n\r\n\t\treturn this.uniforms.get(\"color\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the color of the ambient occlusion.\r\n\t *\r\n\t * Set to `null` to disable colorization.\r\n\t *\r\n\t * @type {Color}\r\n\t */\r\n\r\n\tset color(value) {\r\n\r\n\t\tconst uniforms = this.uniforms;\r\n\t\tconst defines = this.defines;\r\n\r\n\t\tif(value !== null) {\r\n\r\n\t\t\tif(defines.has(\"COLORIZE\")) {\r\n\r\n\t\t\t\tuniforms.get(\"color\").value.set(value);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdefines.set(\"COLORIZE\", \"1\");\r\n\t\t\t\tuniforms.get(\"color\").value = new Color(value);\r\n\t\t\t\tthis.setChanged();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if(defines.has(\"COLORIZE\")) {\r\n\r\n\t\t\tdefines.delete(\"COLORIZE\");\r\n\t\t\tuniforms.get(\"color\").value = null;\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the occlusion distance cutoff.\r\n\t *\r\n\t * @param {Number} threshold - The distance threshold. Range [0.0, 1.0].\r\n\t * @param {Number} falloff - The falloff. Range [0.0, 1.0].\r\n\t */\r\n\r\n\tsetDistanceCutoff(threshold, falloff) {\r\n\r\n\t\tthis.ssaoMaterial.uniforms.distanceCutoff.value.set(\r\n\t\t\tMath.min(Math.max(threshold, 0.0), 1.0),\r\n\t\t\tMath.min(Math.max(threshold + falloff, 0.0), 1.0)\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the occlusion proximity cutoff.\r\n\t *\r\n\t * @param {Number} threshold - The range threshold. Range [0.0, 1.0].\r\n\t * @param {Number} falloff - The falloff. Range [0.0, 1.0].\r\n\t */\r\n\r\n\tsetProximityCutoff(threshold, falloff) {\r\n\r\n\t\tthis.ssaoMaterial.uniforms.proximityCutoff.value.set(\r\n\t\t\tMath.min(Math.max(threshold, 0.0), 1.0),\r\n\t\t\tMath.min(Math.max(threshold + falloff, 0.0), 1.0)\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.ssaoMaterial;\r\n\r\n\t\tif(material.defines.NORMAL_DEPTH === undefined) {\r\n\r\n\t\t\tmaterial.uniforms.normalDepthBuffer.value = depthTexture;\r\n\t\t\tmaterial.depthPacking = depthPacking;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tthis.ssaoPass.render(renderer, null, this.renderTargetAO);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the camera projection matrix uniforms and the size of internal\r\n\t * render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\t\tresolution.base.set(width, height);\r\n\r\n\t\tconst w = resolution.width;\r\n\t\tconst h = resolution.height;\r\n\r\n\t\tthis.renderTargetAO.setSize(w, h);\r\n\t\tthis.ssaoMaterial.setTexelSize(1.0 / w, 1.0 / h);\r\n\r\n\t\tconst camera = this.camera;\r\n\t\tconst uniforms = this.ssaoMaterial.uniforms;\r\n\t\tuniforms.noiseScale.value.set(w, h).divideScalar(NOISE_TEXTURE_SIZE);\r\n\t\tuniforms.inverseProjectionMatrix.value.getInverse(camera.projectionMatrix);\r\n\t\tuniforms.projectionMatrix.value.copy(camera.projectionMatrix);\r\n\r\n\t\t// Update the absolute radius.\r\n\t\tthis.radius = this.r;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$B = \"uniform sampler2D texture;\\n#if defined(ASPECT_CORRECTION) || defined(UV_TRANSFORM)\\nvarying vec2 vUv2;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\\n#if defined(ASPECT_CORRECTION) || defined(UV_TRANSFORM)\\nvec4 texel=texelToLinear(texture2D(texture,vUv2));\\n#else\\nvec4 texel=texelToLinear(texture2D(texture,uv));\\n#endif\\noutputColor=TEXEL;}\";\r\n\r\nvar vertexShader$c = \"#ifdef ASPECT_CORRECTION\\nuniform float scale;\\n#else\\nuniform mat3 uvTransform;\\n#endif\\nvarying vec2 vUv2;void mainSupport(const in vec2 uv){\\n#ifdef ASPECT_CORRECTION\\nvUv2=uv*vec2(aspect,1.0)*scale;\\n#else\\nvUv2=(uvTransform*vec3(uv,1.0)).xy;\\n#endif\\n}\";\r\n\r\n/**\r\n * A texture effect.\r\n */\r\n\r\nclass TextureEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new texture effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Texture} [options.texture] - A texture.\r\n\t * @param {Boolean} [options.aspectCorrection=false] - Deprecated. Enable uvTransform instead and adjust the texture's offset, repeat and center.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, texture = null, aspectCorrection = false } = {}) {\r\n\r\n\t\tsuper(\"TextureEffect\", fragmentShader$B, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tdefines: new Map([\r\n\t\t\t\t[\"TEXEL\", \"texel\"]\r\n\t\t\t]),\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"texture\", new Uniform(null)],\r\n\t\t\t\t[\"scale\", new Uniform(1.0)],\r\n\t\t\t\t[\"uvTransform\", new Uniform(null)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.texture = texture;\r\n\t\tthis.aspectCorrection = aspectCorrection;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.uniforms.get(\"texture\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tset texture(value) {\r\n\r\n\t\tconst currentTexture = this.texture;\r\n\r\n\t\tif(currentTexture !== value) {\r\n\r\n\t\t\tconst previousEncoding = (currentTexture !== null) ? currentTexture.encoding : null;\r\n\t\t\tthis.uniforms.get(\"texture\").value = value;\r\n\r\n\t\t\tif(value !== null) {\r\n\r\n\t\t\t\tif(value.encoding === sRGBEncoding) {\r\n\r\n\t\t\t\t\tthis.defines.set(\"texelToLinear(texel)\", \"sRGBToLinear(texel)\");\r\n\r\n\t\t\t\t} else if(value.encoding === LinearEncoding) {\r\n\r\n\t\t\t\t\tthis.defines.set(\"texelToLinear(texel)\", \"texel\");\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log(\"Unsupported encoding: \" + value.encoding);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(previousEncoding !== value.encoding) {\r\n\r\n\t\t\t\t\tthis.setChanged();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether aspect correction is enabled.\r\n\t *\r\n\t * If enabled, the texture can be scaled using the `scale` uniform.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use uvTransform instead for full control over the texture coordinates.\r\n\t */\r\n\r\n\tget aspectCorrection() {\r\n\r\n\t\treturn this.defines.has(\"ASPECT_CORRECTION\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables aspect correction.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use uvTransform instead for full control over the texture coordinates.\r\n\t */\r\n\r\n\tset aspectCorrection(value) {\r\n\r\n\t\tif(this.aspectCorrection !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tif(this.uvTransform) {\r\n\r\n\t\t\t\t\tthis.uvTransform = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.defines.set(\"ASPECT_CORRECTION\", \"1\");\r\n\t\t\t\tthis.setVertexShader(vertexShader$c);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"ASPECT_CORRECTION\");\r\n\t\t\t\tthis.setVertexShader(null);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the texture UV coordinates will be transformed using the\r\n\t * transformation matrix of the texture.\r\n\t *\r\n\t * Cannot be used if aspect correction is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget uvTransform() {\r\n\r\n\t\treturn this.defines.has(\"UV_TRANSFORM\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables texture UV transformation.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset uvTransform(value) {\r\n\r\n\t\tif(this.uvTransform !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tif(this.aspectCorrection) {\r\n\r\n\t\t\t\t\tthis.aspectCorrection = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.defines.set(\"UV_TRANSFORM\", \"1\");\r\n\t\t\t\tthis.uniforms.get(\"uvTransform\").value = new Matrix3();\r\n\t\t\t\tthis.setVertexShader(vertexShader$c);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"UV_TRANSFORM\");\r\n\t\t\t\tthis.uniforms.get(\"uvTransform\").value = null;\r\n\t\t\t\tthis.setVertexShader(null);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the swizzles that will be applied to the `r`, `g`, `b`, and `a`\r\n\t * components of a texel before it is written to the output color.\r\n\t *\r\n\t * @param {ColorChannel} r - The swizzle for the `r` component.\r\n\t * @param {ColorChannel} [g=r] - The swizzle for the `g` component.\r\n\t * @param {ColorChannel} [b=r] - The swizzle for the `b` component.\r\n\t * @param {ColorChannel} [a=r] - The swizzle for the `a` component.\r\n\t */\r\n\r\n\tsetTextureSwizzleRGBA(r, g = r, b = r, a = r) {\r\n\r\n\t\tconst rgba = \"rgba\";\r\n\t\tlet swizzle = \"\";\r\n\r\n\t\tif(r !== ColorChannel.RED || g !== ColorChannel.GREEN ||\r\n\t\t\tb !== ColorChannel.BLUE || a !== ColorChannel.ALPHA) {\r\n\r\n\t\t\tswizzle = [\".\", rgba[r], rgba[g], rgba[b], rgba[a]].join(\"\");\r\n\r\n\t\t}\r\n\r\n\t\tthis.defines.set(\"TEXEL\", \"texel\" + swizzle);\r\n\t\tthis.setChanged();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst texture = this.uniforms.get(\"texture\").value;\r\n\r\n\t\tif(this.uvTransform && texture.matrixAutoUpdate) {\r\n\r\n\t\t\ttexture.updateMatrix();\r\n\t\t\tthis.uniforms.get(\"uvTransform\").value.copy(texture.matrix);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$C = \"uniform sampler2D luminanceMap;uniform float middleGrey;uniform float maxLuminance;uniform float averageLuminance;vec3 toneMap(vec3 c){\\n#ifdef ADAPTED_LUMINANCE\\nfloat lumAvg=texture2D(luminanceMap,vec2(0.5)).r;\\n#else\\nfloat lumAvg=averageLuminance;\\n#endif\\nfloat lumPixel=linearToRelativeLuminance(c);float lumScaled=(lumPixel*middleGrey)/lumAvg;float lumCompressed=(lumScaled*(1.0+(lumScaled/(maxLuminance*maxLuminance))))/(1.0+lumScaled);return lumCompressed*c;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(toneMap(inputColor.rgb),inputColor.a);}\";\r\n\r\n/**\r\n * A tone mapping effect that supports adaptive luminosity.\r\n *\r\n * If adaptivity is enabled, this effect generates a texture that represents the\r\n * luminosity of the current scene and adjusts it over time to simulate the\r\n * optic nerve responding to the amount of light it is receiving.\r\n *\r\n * Reference:\r\n *  GDC2007 - Wolfgang Engel, Post-Processing Pipeline\r\n *  http://perso.univ-lyon1.fr/jean-claude.iehl/Public/educ/GAMA/2007/gdc07/Post-Processing_Pipeline.pdf\r\n */\r\n\r\nclass ToneMappingEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new tone mapping effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Boolean} [options.adaptive=true] - Whether the tone mapping should use an adaptive luminance map.\r\n\t * @param {Number} [options.resolution=256] - The render texture resolution of the luminance map.\r\n\t * @param {Number} [options.middleGrey=0.6] - The middle grey factor.\r\n\t * @param {Number} [options.maxLuminance=16.0] - The maximum luminance.\r\n\t * @param {Number} [options.averageLuminance=1.0] - The average luminance.\r\n\t * @param {Number} [options.adaptationRate=1.0] - The luminance adaptation rate.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tblendFunction = BlendFunction.NORMAL,\r\n\t\tadaptive = true,\r\n\t\tresolution = 256,\r\n\t\tmiddleGrey = 0.6,\r\n\t\tmaxLuminance = 16.0,\r\n\t\taverageLuminance = 1.0,\r\n\t\tadaptationRate = 2.0\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"ToneMappingEffect\", fragmentShader$C, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"luminanceMap\", new Uniform(null)],\r\n\t\t\t\t[\"middleGrey\", new Uniform(middleGrey)],\r\n\t\t\t\t[\"maxLuminance\", new Uniform(maxLuminance)],\r\n\t\t\t\t[\"averageLuminance\", new Uniform(averageLuminance)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The render target for the current luminance.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t * @todo Remove LinearMipMapLinearFilter in next major release.\r\n\t\t */\r\n\r\n\t\tthis.renderTargetLuminance = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: (LinearMipmapLinearFilter !== undefined) ? LinearMipmapLinearFilter : LinearMipMapLinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\tformat: RGBFormat\r\n\t\t});\r\n\r\n\t\tthis.renderTargetLuminance.texture.name = \"ToneMapping.Luminance\";\r\n\t\tthis.renderTargetLuminance.texture.generateMipmaps = true;\r\n\r\n\t\t/**\r\n\t\t * The render target for adapted luminance.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetAdapted = this.renderTargetLuminance.clone();\r\n\t\tthis.renderTargetAdapted.texture.name = \"ToneMapping.AdaptedLuminance\";\r\n\t\tthis.renderTargetAdapted.texture.generateMipmaps = false;\r\n\t\tthis.renderTargetAdapted.texture.minFilter = LinearFilter;\r\n\r\n\t\t/**\r\n\t\t * A render target that holds a copy of the adapted luminance.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetPrevious = this.renderTargetAdapted.clone();\r\n\t\tthis.renderTargetPrevious.texture.name = \"ToneMapping.PreviousLuminance\";\r\n\r\n\t\t/**\r\n\t\t * A save pass.\r\n\t\t *\r\n\t\t * @type {SavePass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.savePass = new SavePass(this.renderTargetPrevious, false);\r\n\r\n\t\t/**\r\n\t\t * A luminance shader pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.luminancePass = new ShaderPass(new LuminanceMaterial());\r\n\r\n\t\tconst luminanceMaterial = this.luminancePass.getFullscreenMaterial();\r\n\t\tluminanceMaterial.useThreshold = false;\r\n\r\n\t\t/**\r\n\t\t * An adaptive luminance shader pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.adaptiveLuminancePass = new ShaderPass(new AdaptiveLuminanceMaterial());\r\n\r\n\t\tconst uniforms = this.adaptiveLuminancePass.getFullscreenMaterial().uniforms;\r\n\t\tuniforms.previousLuminanceBuffer.value = this.renderTargetPrevious.texture;\r\n\t\tuniforms.currentLuminanceBuffer.value = this.renderTargetLuminance.texture;\r\n\r\n\t\tthis.adaptationRate = adaptationRate;\r\n\t\tthis.resolution = resolution;\r\n\t\tthis.adaptive = adaptive;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of the render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget resolution() {\r\n\r\n\t\treturn this.renderTargetLuminance.width;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset resolution(value) {\r\n\r\n\t\t// Round the given value to the next power of two.\r\n\t\tconst exponent = Math.max(0, Math.ceil(Math.log2(value)));\r\n\t\tconst size = Math.pow(2, exponent);\r\n\r\n\t\tthis.renderTargetLuminance.setSize(size, size);\r\n\t\tthis.renderTargetPrevious.setSize(size, size);\r\n\t\tthis.renderTargetAdapted.setSize(size, size);\r\n\r\n\t\tconst material = this.adaptiveLuminancePass.getFullscreenMaterial();\r\n\t\tmaterial.defines.MIP_LEVEL_1X1 = exponent.toFixed(1);\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether this pass uses adaptive luminance.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget adaptive() {\r\n\r\n\t\treturn this.defines.has(\"ADAPTED_LUMINANCE\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables adaptive luminance.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset adaptive(value) {\r\n\r\n\t\tif(this.adaptive !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tthis.defines.set(\"ADAPTED_LUMINANCE\", \"1\");\r\n\t\t\t\tthis.uniforms.get(\"luminanceMap\").value = this.renderTargetAdapted.texture;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"ADAPTED_LUMINANCE\");\r\n\t\t\t\tthis.uniforms.get(\"luminanceMap\").value = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The luminance adaptation rate.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget adaptationRate() {\r\n\r\n\t\treturn this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset adaptationRate(value) {\r\n\r\n\t\tthis.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated\r\n\t */\r\n\r\n\tget distinction() {\r\n\r\n\t\tconsole.warn(this.name, \"The distinction field has been removed.\");\r\n\r\n\t\treturn 1.0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated\r\n\t */\r\n\r\n\tset distinction(value) {\r\n\r\n\t\tconsole.warn(this.name, \"The distinction field has been removed.\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tif(this.adaptive) {\r\n\r\n\t\t\t// Render the luminance of the current scene into a mipmap render target.\r\n\t\t\tthis.luminancePass.render(renderer, inputBuffer, this.renderTargetLuminance);\r\n\r\n\t\t\t// Use the frame delta to adapt the luminance over time.\r\n\t\t\tconst uniforms = this.adaptiveLuminancePass.getFullscreenMaterial().uniforms;\r\n\t\t\tuniforms.deltaTime.value = deltaTime;\r\n\t\t\tthis.adaptiveLuminancePass.render(renderer, null, this.renderTargetAdapted);\r\n\r\n\t\t\t// Save the adapted luminance for the next frame.\r\n\t\t\tthis.savePass.render(renderer, this.renderTargetAdapted);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.savePass.setSize(width, height);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tconst clearPass = new ClearPass(true, false, false);\r\n\t\tclearPass.overrideClearColor = new Color(0x7fffff);\r\n\t\tclearPass.render(renderer, this.renderTargetPrevious);\r\n\t\tclearPass.dispose();\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar fragmentShader$D = \"uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\\n#ifdef ESKIL\\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\\n#else\\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\r\n\r\n/**\r\n * A vignette effect.\r\n */\r\n\r\nclass VignetteEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new vignette effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Boolean} [options.eskil=false] - Enables Eskil's vignette technique.\r\n\t * @param {Number} [options.offset=0.5] - The vignette offset.\r\n\t * @param {Number} [options.darkness=0.5] - The vignette darkness.\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tconst settings = Object.assign({\r\n\t\t\tblendFunction: BlendFunction.NORMAL,\r\n\t\t\teskil: false,\r\n\t\t\toffset: 0.5,\r\n\t\t\tdarkness: 0.5\r\n\t\t}, options);\r\n\r\n\t\tsuper(\"VignetteEffect\", fragmentShader$D, {\r\n\r\n\t\t\tblendFunction: settings.blendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"offset\", new Uniform(settings.offset)],\r\n\t\t\t\t[\"darkness\", new Uniform(settings.darkness)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.eskil = settings.eskil;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether Eskil's vignette technique is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget eskil() {\r\n\r\n\t\treturn this.defines.has(\"ESKIL\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables Eskil's vignette technique.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset eskil(value) {\r\n\r\n\t\tif(this.eskil !== value) {\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tthis.defines.set(\"ESKIL\", \"1\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.defines.delete(\"ESKIL\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setChanged();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Creates a new canvas from raw image data.\r\n *\r\n * @private\r\n * @param {Number} width - The image width.\r\n * @param {Number} height - The image height.\r\n * @param {Uint8ClampedArray} data - The image data.\r\n * @return {Canvas} The canvas.\r\n */\r\n\r\nfunction createCanvas(width, height, data) {\r\n\r\n\tconst canvas = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"canvas\");\r\n\tconst context = canvas.getContext(\"2d\");\r\n\r\n\tconst imageData = context.createImageData(width, height);\r\n\timageData.data.set(data);\r\n\r\n\tcanvas.width = width;\r\n\tcanvas.height = height;\r\n\r\n\tcontext.putImageData(imageData, 0, 0);\r\n\r\n\treturn canvas;\r\n\r\n}\r\n\r\n/**\r\n * A container for raw image data.\r\n */\r\n\r\nclass RawImageData {\r\n\r\n\t/**\r\n\t * Constructs a new image data container.\r\n\t *\r\n\t * @param {Number} [width=0] - The width of the image.\r\n\t * @param {Number} [height=0] - The height of the image.\r\n\t * @param {Uint8ClampedArray} [data=null] - The image data.\r\n\t */\r\n\r\n\tconstructor(width = 0, height = 0, data = null) {\r\n\r\n\t\t/**\r\n\t\t * The width of the image.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.width = width;\r\n\r\n\t\t/**\r\n\t\t * The height of the image.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.height = height;\r\n\r\n\t\t/**\r\n\t\t * The image data.\r\n\t\t *\r\n\t\t * @type {Uint8ClampedArray}\r\n\t\t */\r\n\r\n\t\tthis.data = data;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a canvas from this image data.\r\n\t *\r\n\t * @return {Canvas} The canvas or null if it couldn't be created.\r\n\t */\r\n\r\n\ttoCanvas() {\r\n\r\n\t\treturn (typeof document === \"undefined\") ? null : createCanvas(\r\n\t\t\tthis.width,\r\n\t\t\tthis.height,\r\n\t\t\tthis.data\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new image data container.\r\n\t *\r\n\t * @param {Object} data - Raw image data.\r\n\t * @return {RawImageData} The image data.\r\n\t */\r\n\r\n\tstatic from(data) {\r\n\r\n\t\treturn new RawImageData(data.width, data.height, data.data);\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar workerProgram = \"!function(){\\\"use strict\\\";function e(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\\\"value\\\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}var n=function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e(this,t),this.width=a,this.height=n,this.data=s}return a(t,[{key:\\\"toCanvas\\\",value:function(){return\\\"undefined\\\"==typeof document?null:(e=this.width,t=this.height,a=this.data,n=document.createElementNS(\\\"http://www.w3.org/1999/xhtml\\\",\\\"canvas\\\"),s=n.getContext(\\\"2d\\\"),(r=s.createImageData(e,t)).data.set(a),n.width=e,n.height=t,s.putImageData(r,0,0),n);var e,t,a,n,s,r}}],[{key:\\\"from\\\",value:function(e){return new t(e.width,e.height,e.data)}}]),t}(),s=function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e(this,t),this.x=a,this.y=n}return a(t,[{key:\\\"set\\\",value:function(e,t){return this.x=e,this.y=t,this}},{key:\\\"equals\\\",value:function(e){return this===e||this.x===e.x&&this.y===e.y}}]),t}(),r=function t(){e(this,t),this.min=new s,this.max=new s},i=new r,y=new r,c=16,u=30,h=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),o=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],w=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],x=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function f(e,t,a){return e+(t-e)*a}function l(e,t){var a,n=t.min,s=t.max,r=.5*Math.sqrt(2*n.x),i=.5*Math.sqrt(2*n.y),y=.5*Math.sqrt(2*s.x),c=.5*Math.sqrt(2*s.y),u=(a=e/32,Math.min(Math.max(a,0),1));return n.set(f(r,n.x,u),f(i,n.y,u)),s.set(f(y,s.x,u),f(c,s.y,u)),t}function b(e,t,a,n){var s,r,i,y,c=t.x-e.x,u=t.y-e.y,h=a,o=a+1,w=e.y+u*(h-e.x)/c,x=e.y+u*(o-e.x)/c;return h>=e.x&&h<t.x||o>e.x&&o<=t.x?Math.sign(w)===Math.sign(x)||Math.abs(w)<1e-4||Math.abs(x)<1e-4?(s=(w+x)/2)<0?n.set(Math.abs(s),0):n.set(0,Math.abs(s)):(r=(y=-e.y*c/u+e.x)>e.x?w*(y-Math.trunc(y))/2:0,i=y<t.x?x*(1-(y-Math.trunc(y)))/2:0,(s=Math.abs(r)>Math.abs(i)?r:-i)<0?n.set(Math.abs(r),Math.abs(i)):n.set(Math.abs(i),Math.abs(r))):n.set(0,0),n}function A(e,t,a,n,s){var r=i.min,c=i.max,u=y.min,h=y.max,o=y,w=.5+n,x=.5+n-1,f=t+a+1;switch(e){case 0:s.set(0,0);break;case 1:t<=a?b(r.set(0,x),c.set(f/2,0),t,s):s.set(0,0);break;case 2:t>=a?b(r.set(f/2,0),c.set(f,x),t,s):s.set(0,0);break;case 3:b(r.set(0,x),c.set(f/2,0),t,u),b(r.set(f/2,0),c.set(f,x),t,h),l(f,o),s.set(u.x+h.x,u.y+h.y);break;case 4:t<=a?b(r.set(0,w),c.set(f/2,0),t,s):s.set(0,0);break;case 5:s.set(0,0);break;case 6:Math.abs(n)>0?(b(r.set(0,w),c.set(f,x),t,u),b(r.set(0,w),c.set(f/2,0),t,h),b(r.set(f/2,0),c.set(f,x),t,s),h.set(h.x+s.x,h.y+s.y),s.set((u.x+h.x)/2,(u.y+h.y)/2)):b(r.set(0,w),c.set(f,x),t,s);break;case 7:b(r.set(0,w),c.set(f,x),t,s);break;case 8:t>=a?b(r.set(f/2,0),c.set(f,w),t,s):s.set(0,0);break;case 9:Math.abs(n)>0?(b(r.set(0,x),c.set(f,w),t,u),b(r.set(0,x),c.set(f/2,0),t,h),b(r.set(f/2,0),c.set(f,w),t,s),h.set(h.x+s.x,h.y+s.y),s.set((u.x+h.x)/2,(u.y+h.y)/2)):b(r.set(0,x),c.set(f,w),t,s);break;case 10:s.set(0,0);break;case 11:b(r.set(0,x),c.set(f,w),t,s);break;case 12:b(r.set(0,w),c.set(f/2,0),t,u),b(r.set(f/2,0),c.set(f,w),t,h),l(f,o),s.set(u.x+h.x,u.y+h.y);break;case 13:b(r.set(0,x),c.set(f,w),t,s);break;case 14:b(r.set(0,w),c.set(f,x),t,s);break;case 15:s.set(0,0)}return s}function v(e,t,a,n){var s=e.equals(t);if(!s){var r=(e.x+t.x)/2,i=(e.y+t.y)/2;s=(t.y-e.y)*(a-r)+(e.x-t.x)*(n-i)>0}return s}function k(e,t,a,n){var s,r,i;for(s=0,i=0;i<u;++i)for(r=0;r<u;++r)v(e,t,a+r/29,n+i/29)&&++s;return s/900}function U(e,t,a,n,s,r){var i=x[e],y=i[0],c=i[1];return y>0&&(t.x+=s[0],t.y+=s[1]),c>0&&(a.x+=s[0],a.y+=s[1]),r.set(1-k(t,a,1+n,0+n),k(t,a,1+n,1+n))}function d(e,t,a,n,s){var r=i.min,c=i.max,u=y.min,h=y.max,o=t+a+1;switch(e){case 0:U(e,r.set(1,1),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 1:U(e,r.set(1,0),c.set(0+o,0+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 2:U(e,r.set(0,0),c.set(1+o,0+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 3:U(e,r.set(1,0),c.set(1+o,0+o),t,n,s);break;case 4:U(e,r.set(1,1),c.set(0+o,0+o),t,n,u),U(e,r.set(1,1),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 5:U(e,r.set(1,1),c.set(0+o,0+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 6:U(e,r.set(1,1),c.set(1+o,0+o),t,n,s);break;case 7:U(e,r.set(1,1),c.set(1+o,0+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 8:U(e,r.set(0,0),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,1+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 9:U(e,r.set(1,0),c.set(1+o,1+o),t,n,s);break;case 10:U(e,r.set(0,0),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 11:U(e,r.set(1,0),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 12:U(e,r.set(1,1),c.set(1+o,1+o),t,n,s);break;case 13:U(e,r.set(1,1),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,1+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 14:U(e,r.set(1,1),c.set(1+o,1+o),t,n,u),U(e,r.set(1,1),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 15:U(e,r.set(1,1),c.set(1+o,1+o),t,n,u),U(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2)}return s}function g(e,t,a){var n,r,i,y,c,u,h,o,w=new s;for(n=0,r=e.length;n<r;++n)for(h=(u=e[n]).data,o=u.width,y=0;y<o;++y)for(i=0;i<o;++i)a?A(n,i,y,t,w):d(n,i,y,t,w),h[c=2*(y*o+i)]=255*w.x,h[c+1]=255*w.y}function m(e,t,a,n,r,i){var y,c,u,h,o,w,x,f,l,b,A=new s,v=i.data,k=i.width;for(y=0,c=t.length;y<c;++y)for(x=a[y],l=(f=t[y]).data,b=f.width,h=0;h<n;++h)for(u=0;u<n;++u)A.set(x[0]*n+e.x+u,x[1]*n+e.y+h),w=r?2*(h*h*b+u*u):2*(h*b+u),v[o=4*(A.y*k+A.x)]=l[w],v[o+1]=l[w+1],v[o+2]=0,v[o+3]=255}var M=function(){function t(){e(this,t)}return a(t,null,[{key:\\\"generate\\\",value:function(){var e,t,a=5*h.length*c,r=new Uint8ClampedArray(160*a*4),i=new n(160,a,r),y=Math.pow(15,2)+1,u=[],f=[],l=new s;for(e=0;e<16;++e)u.push(new n(y,y,new Uint8ClampedArray(y*y*2),2)),f.push(new n(20,20,new Uint8ClampedArray(800),2));for(e=0,t=h.length;e<t;++e)g(u,h[e],!0),l.set(0,80*e),m(l,u,w,c,!0,i);for(e=0,t=o.length;e<t;++e)g(f,o[e],!1),l.set(80,80*e),m(l,f,x,20,!1,i);return i}}]),t}(),p=new Map([[q([0,0,0,0]),[0,0,0,0]],[q([0,0,0,1]),[0,0,0,1]],[q([0,0,1,0]),[0,0,1,0]],[q([0,0,1,1]),[0,0,1,1]],[q([0,1,0,0]),[0,1,0,0]],[q([0,1,0,1]),[0,1,0,1]],[q([0,1,1,0]),[0,1,1,0]],[q([0,1,1,1]),[0,1,1,1]],[q([1,0,0,0]),[1,0,0,0]],[q([1,0,0,1]),[1,0,0,1]],[q([1,0,1,0]),[1,0,1,0]],[q([1,0,1,1]),[1,0,1,1]],[q([1,1,0,0]),[1,1,0,0]],[q([1,1,0,1]),[1,1,0,1]],[q([1,1,1,0]),[1,1,1,0]],[q([1,1,1,1]),[1,1,1,1]]]);function C(e,t,a){return e+(t-e)*a}function q(e){var t=C(e[0],e[1],.75),a=C(e[2],e[3],.75);return C(t,a,.875)}function F(e,t){var a=0;return 1===t[3]&&1!==e[1]&&1!==e[3]&&(a+=1),1===a&&1===t[2]&&1!==e[0]&&1!==e[2]&&(a+=1),a}var D=function(){function t(){e(this,t)}return a(t,null,[{key:\\\"generate\\\",value:function(){var e,t,a,s,r,i,y,c,u,h,o=new Uint8ClampedArray(2178),w=new Uint8ClampedArray(4096);for(t=0;t<33;++t)for(e=0;e<66;++e)a=.03125*e,s=.03125*t,p.has(a)&&p.has(s)&&(i=p.get(a),y=p.get(s),o[r=66*t+e]=127*(c=i,h=void 0,h=0,1===(u=y)[3]&&(h+=1),1===h&&1===u[2]&&1!==c[1]&&1!==c[3]&&(h+=1),h),o[r+33]=127*F(i,y));for(r=0,t=17;t<33;++t)for(e=0;e<64;++e,r+=4)w[r]=o[66*t+e],w[r+3]=255;return new n(64,16,w)}}]),t}();self.addEventListener(\\\"message\\\",(function(e){var t=M.generate(),a=D.generate();postMessage({areaImageData:t,searchImageData:a},[t.data.buffer,a.data.buffer]),close()}))}();\\n\";\r\n\r\n/**\r\n * Generates the SMAA data images.\r\n *\r\n * @private\r\n * @param {Boolean} [disableCache=false] - Determines whether the generated image data should be cached.\r\n * @return {Promise} A promise that returns the search image and area image as a data URL pair.\r\n */\r\n\r\nfunction generate(disableCache = false) {\r\n\r\n\tconst workerURL = URL.createObjectURL(new Blob([workerProgram], { type: \"text/javascript\" }));\r\n\tconst worker = new Worker(workerURL);\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\r\n\t\tworker.addEventListener(\"error\", (event) => reject(event.error));\r\n\t\tworker.addEventListener(\"message\", (event) => {\r\n\r\n\t\t\tconst searchImageData = RawImageData.from(event.data.searchImageData);\r\n\t\t\tconst areaImageData = RawImageData.from(event.data.areaImageData);\r\n\r\n\t\t\tconst urls = [\r\n\t\t\t\tsearchImageData.toCanvas().toDataURL(),\r\n\t\t\t\tareaImageData.toCanvas().toDataURL()\r\n\t\t\t];\r\n\r\n\t\t\tif(!disableCache && window.localStorage !== undefined) {\r\n\r\n\t\t\t\tlocalStorage.setItem(\"smaa-search\", urls[0]);\r\n\t\t\t\tlocalStorage.setItem(\"smaa-area\", urls[1]);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tURL.revokeObjectURL(workerURL);\r\n\t\t\tresolve(urls);\r\n\r\n\t\t});\r\n\r\n\t\tworker.postMessage(null);\r\n\r\n\t});\r\n\r\n}\r\n\r\n/**\r\n * An SMAA image loader.\r\n *\r\n * This loader uses a worker thread to generate the search and area images. The\r\n * Generated data URLs will be cached using localStorage, if available. To\r\n * disable caching, please refer to {@link SMAAImageLoader.disableCache}.\r\n *\r\n * @experimental Added for testing, API might change in patch or minor releases. Requires three >= r108.\r\n */\r\n\r\nclass SMAAImageLoader extends Loader {\r\n\r\n\t/**\r\n\t * Constructs a new SMAA image loader.\r\n\t *\r\n\t * @param {LoadingManager} [manager] - A loading manager.\r\n\t */\r\n\r\n\tconstructor(manager) {\r\n\r\n\t\tsuper(manager);\r\n\r\n\t\t/**\r\n\t\t * Indicates whether data image caching is disabled.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.disableCache = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Loads the SMAA data images.\r\n\t *\r\n\t * @param {Function} [onLoad] - A function to call when the loading process is done.\r\n\t * @param {Function} [onError] - A function to call when an error occurs.\r\n\t * @return {Promise} A promise that returns the search image and area image as a pair.\r\n\t */\r\n\r\n\tload(onLoad = () => {}, onError = () => {}) {\r\n\r\n\t\t// Conform to the signature (url, onLoad, onProgress, onError).\r\n\t\tif(arguments.length === 4) {\r\n\r\n\t\t\tonLoad = arguments[1];\r\n\t\t\tonError = arguments[3];\r\n\r\n\t\t} else if(arguments.length === 3 || typeof arguments[0] !== \"function\") {\r\n\r\n\t\t\tonLoad = arguments[1];\r\n\t\t\tonError = () => {};\r\n\r\n\t\t}\r\n\r\n\t\tconst externalManager = this.manager;\r\n\t\tconst internalManager = new LoadingManager();\r\n\r\n\t\texternalManager.itemStart(\"smaa-search\");\r\n\t\texternalManager.itemStart(\"smaa-area\");\r\n\t\tinternalManager.itemStart(\"smaa-search\");\r\n\t\tinternalManager.itemStart(\"smaa-area\");\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tconst cachedURLs = (!this.disableCache && window.localStorage !== undefined) ? [\r\n\t\t\t\tlocalStorage.getItem(\"smaa-search\"),\r\n\t\t\t\tlocalStorage.getItem(\"smaa-area\")\r\n\t\t\t] : [null, null];\r\n\r\n\t\t\tconst promise = (cachedURLs[0] !== null && cachedURLs[1] !== null) ?\r\n\t\t\t\tPromise.resolve(cachedURLs) : generate(this.disableCache);\r\n\r\n\t\t\tpromise.then((urls) => {\r\n\r\n\t\t\t\tconst result = [new Image(), new Image()];\r\n\r\n\t\t\t\tinternalManager.onLoad = () => {\r\n\r\n\t\t\t\t\tonLoad(result);\r\n\t\t\t\t\tresolve(result);\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresult[0].addEventListener(\"load\", () => {\r\n\r\n\t\t\t\t\texternalManager.itemEnd(\"smaa-search\");\r\n\t\t\t\t\tinternalManager.itemEnd(\"smaa-search\");\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tresult[1].addEventListener(\"load\", () => {\r\n\r\n\t\t\t\t\texternalManager.itemEnd(\"smaa-area\");\r\n\t\t\t\t\tinternalManager.itemEnd(\"smaa-area\");\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tresult[0].src = urls[0];\r\n\t\t\t\tresult[1].src = urls[1];\r\n\r\n\t\t\t}).catch((error) => {\r\n\r\n\t\t\t\texternalManager.itemError(\"smaa-search\");\r\n\t\t\t\texternalManager.itemError(\"smaa-area\");\r\n\r\n\t\t\t\tonError(error);\r\n\t\t\t\treject(error);\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A 2D vector.\r\n *\r\n * @private\r\n */\r\n\r\nclass Vector2 {\r\n\r\n\t/**\r\n\t * Constructs a new vector.\r\n\t *\r\n\t * @param {Number} [x=0] - The initial x value.\r\n\t * @param {Number} [y=0] - The initial y value.\r\n\t */\r\n\r\n\tconstructor(x = 0, y = 0) {\r\n\r\n\t\t/**\r\n\t\t * The X component.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\t/**\r\n\t\t * The Y component.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.y = y;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the components of this vector.\r\n\t *\r\n\t * @param {Number} x - The new x value.\r\n\t * @param {Number} y - The new y value.\r\n\t * @return {Vector2} This vector.\r\n\t */\r\n\r\n\tset(x, y) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the given vector equals this vector.\r\n\t *\r\n\t * @param {Vector2} v - A vector.\r\n\t * @return {Boolean} Whether this vector equals the given one.\r\n\t */\r\n\r\n\tequals(v) {\r\n\r\n\t\treturn (this === v || (this.x === v.x && this.y === v.y));\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A 2D box.\r\n *\r\n * @private\r\n */\r\n\r\nclass Box2 {\r\n\r\n\t/**\r\n\t * Constructs a new box.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.min = new Vector2();\r\n\t\tthis.max = new Vector2();\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A box.\r\n *\r\n * @type {Box2}\r\n * @private\r\n */\r\n\r\nconst b0 = new Box2();\r\n\r\n/**\r\n * A box.\r\n *\r\n * @type {Box2}\r\n * @private\r\n */\r\n\r\nconst b1 = new Box2();\r\n\r\n/**\r\n * The orthogonal texture size.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst ORTHOGONAL_SIZE = 16;\r\n\r\n/**\r\n * The diagonal texture size.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst DIAGONAL_SIZE = 20;\r\n\r\n/**\r\n * The number of samples for calculating areas in the diagonal textures.\r\n * Diagonal areas are calculated using brute force sampling.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst DIAGONAL_SAMPLES = 30;\r\n\r\n/**\r\n * The maximum distance for smoothing U-shapes.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst SMOOTH_MAX_DISTANCE = 32;\r\n\r\n/**\r\n * Subsampling offsets for orthogonal areas.\r\n *\r\n * @type {Float32Array}\r\n * @private\r\n */\r\n\r\nconst orthogonalSubsamplingOffsets = new Float32Array([\r\n\t0.0, -0.25, 0.25, -0.125, 0.125, -0.375, 0.375\r\n]);\r\n\r\n/**\r\n * Subsampling offset pairs for diagonal areas.\r\n *\r\n * @type {Float32Array[]}\r\n * @private\r\n */\r\n\r\nconst diagonalSubsamplingOffsets = [\r\n\r\n\tnew Float32Array([0.0, 0.0]),\r\n\tnew Float32Array([0.25, -0.25]),\r\n\tnew Float32Array([-0.25, 0.25]),\r\n\tnew Float32Array([0.125, -0.125]),\r\n\tnew Float32Array([-0.125, 0.125])\r\n\r\n];\r\n\r\n/**\r\n * Orthogonal pattern positioning coordinates.\r\n *\r\n * Used for placing each pattern subtexture into a specific spot.\r\n *\r\n * @type {Uint8Array[]}\r\n * @private\r\n */\r\n\r\nconst orthogonalEdges = [\r\n\r\n\tnew Uint8Array([0, 0]),\r\n\tnew Uint8Array([3, 0]),\r\n\tnew Uint8Array([0, 3]),\r\n\tnew Uint8Array([3, 3]),\r\n\r\n\tnew Uint8Array([1, 0]),\r\n\tnew Uint8Array([4, 0]),\r\n\tnew Uint8Array([1, 3]),\r\n\tnew Uint8Array([4, 3]),\r\n\r\n\tnew Uint8Array([0, 1]),\r\n\tnew Uint8Array([3, 1]),\r\n\tnew Uint8Array([0, 4]),\r\n\tnew Uint8Array([3, 4]),\r\n\r\n\tnew Uint8Array([1, 1]),\r\n\tnew Uint8Array([4, 1]),\r\n\tnew Uint8Array([1, 4]),\r\n\tnew Uint8Array([4, 4])\r\n\r\n];\r\n\r\n/**\r\n * Diagonal pattern positioning coordinates.\r\n *\r\n * Used for placing each pattern subtexture into a specific spot.\r\n *\r\n * @type {Uint8Array[]}\r\n * @private\r\n */\r\n\r\nconst diagonalEdges = [\r\n\r\n\tnew Uint8Array([0, 0]),\r\n\tnew Uint8Array([1, 0]),\r\n\tnew Uint8Array([0, 2]),\r\n\tnew Uint8Array([1, 2]),\r\n\r\n\tnew Uint8Array([2, 0]),\r\n\tnew Uint8Array([3, 0]),\r\n\tnew Uint8Array([2, 2]),\r\n\tnew Uint8Array([3, 2]),\r\n\r\n\tnew Uint8Array([0, 1]),\r\n\tnew Uint8Array([1, 1]),\r\n\tnew Uint8Array([0, 3]),\r\n\tnew Uint8Array([1, 3]),\r\n\r\n\tnew Uint8Array([2, 1]),\r\n\tnew Uint8Array([3, 1]),\r\n\tnew Uint8Array([2, 3]),\r\n\tnew Uint8Array([3, 3])\r\n\r\n];\r\n\r\n/**\r\n * Linearly interpolates between two values.\r\n *\r\n * @private\r\n * @param {Number} a - The initial value.\r\n * @param {Number} b - The target value.\r\n * @param {Number} p - The interpolation value.\r\n * @return {Number} The interpolated value.\r\n */\r\n\r\nfunction lerp(a, b, p) {\r\n\r\n\treturn a + (b - a) * p;\r\n\r\n}\r\n\r\n/**\r\n * Clamps a value to the range [0, 1].\r\n *\r\n * @private\r\n * @param {Number} a - The value.\r\n * @return {Number} The saturated value.\r\n */\r\n\r\nfunction saturate(a) {\r\n\r\n\treturn Math.min(Math.max(a, 0.0), 1.0);\r\n\r\n}\r\n\r\n/**\r\n * A smoothing function for small U-patterns.\r\n *\r\n * @private\r\n * @param {Number} d - A smoothing factor.\r\n * @param {Box2} b - The area that should be smoothed.\r\n * @return {Box2} The smoothed area.\r\n */\r\n\r\nfunction smoothArea(d, b) {\r\n\r\n\tconst a1 = b.min;\r\n\tconst a2 = b.max;\r\n\r\n\tconst b1X = Math.sqrt(a1.x * 2.0) * 0.5;\r\n\tconst b1Y = Math.sqrt(a1.y * 2.0) * 0.5;\r\n\tconst b2X = Math.sqrt(a2.x * 2.0) * 0.5;\r\n\tconst b2Y = Math.sqrt(a2.y * 2.0) * 0.5;\r\n\r\n\tconst p = saturate(d / SMOOTH_MAX_DISTANCE);\r\n\r\n\ta1.set(lerp(b1X, a1.x, p), lerp(b1Y, a1.y, p));\r\n\ta2.set(lerp(b2X, a2.x, p), lerp(b2Y, a2.y, p));\r\n\r\n\treturn b;\r\n\r\n}\r\n\r\n/**\r\n * Calculates the area under the line p1 -> p2, for the pixels (x, x + 1).\r\n *\r\n * @private\r\n * @param {Vector2} p1 - The starting point of the line.\r\n * @param {Vector2} p2 - The ending point of the line.\r\n * @param {Number} x - The pixel index.\r\n * @param {Vector2} result - A target vector to store the area in.\r\n * @return {Vector2} The area.\r\n */\r\n\r\nfunction calculateOrthogonalArea(p1, p2, x, result) {\r\n\r\n\tconst dX = p2.x - p1.x;\r\n\tconst dY = p2.y - p1.y;\r\n\r\n\tconst x1 = x;\r\n\tconst x2 = x + 1.0;\r\n\r\n\tconst y1 = p1.y + dY * (x1 - p1.x) / dX;\r\n\tconst y2 = p1.y + dY * (x2 - p1.x) / dX;\r\n\r\n\tlet a, a1, a2, t;\r\n\r\n\t// Check if x is inside the area.\r\n\tif((x1 >= p1.x && x1 < p2.x) || (x2 > p1.x && x2 <= p2.x)) {\r\n\r\n\t\t// Check if this is a trapezoid.\r\n\t\tif(Math.sign(y1) === Math.sign(y2) || Math.abs(y1) < 1e-4 || Math.abs(y2) < 1e-4) {\r\n\r\n\t\t\ta = (y1 + y2) / 2.0;\r\n\r\n\t\t\tif(a < 0.0) {\r\n\r\n\t\t\t\tresult.set(Math.abs(a), 0.0);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(0.0, Math.abs(a));\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Two triangles.\r\n\t\t\tt = -p1.y * dX / dY + p1.x;\r\n\r\n\t\t\ta1 = (t > p1.x) ? y1 * (t - Math.trunc(t)) / 2.0 : 0.0;\r\n\t\t\ta2 = (t < p2.x) ? y2 * (1.0 - (t - Math.trunc(t))) / 2.0 : 0.0;\r\n\r\n\t\t\ta = (Math.abs(a1) > Math.abs(a2)) ? a1 : -a2;\r\n\r\n\t\t\tif(a < 0.0) {\r\n\r\n\t\t\t\tresult.set(Math.abs(a1), Math.abs(a2));\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(Math.abs(a2), Math.abs(a1));\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tresult.set(0, 0);\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\n/**\r\n * Calculates the area for a given pattern and distances to the left and to the\r\n * right, biased by an offset.\r\n *\r\n * @private\r\n * @param {Number} pattern - A pattern index.\r\n * @param {Number} left - The left distance.\r\n * @param {Number} right - The right distance.\r\n * @param {Number} offset - An offset.\r\n * @param {Vector2} result - A target vector to store the area in.\r\n * @return {Vector2} The orthogonal area.\r\n */\r\n\r\nfunction calculateOrthogonalAreaForPattern(pattern, left, right, offset, result) {\r\n\r\n\tconst p1 = b0.min;\r\n\tconst p2 = b0.max;\r\n\tconst a1 = b1.min;\r\n\tconst a2 = b1.max;\r\n\tconst a = b1;\r\n\r\n\t/* o1           |\r\n\t *      .-------´\r\n\t * o2   |\r\n\t *\r\n\t *      <---d--->\r\n\t */\r\n\r\n\tconst o1 = 0.5 + offset;\r\n\tconst o2 = 0.5 + offset - 1.0;\r\n\tconst d = left + right + 1;\r\n\r\n\tswitch(pattern) {\r\n\r\n\t\tcase 0: {\r\n\r\n\t\t\t//    ------\r\n\r\n\t\t\tresult.set(0, 0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 1: {\r\n\r\n\t\t\t/*   .------\r\n\t\t\t *   |\r\n\t\t\t *\r\n\t\t\t * The offset is only applied to L patterns in the crossing edge side to\r\n\t\t\t * make it converge with the unfiltered pattern 0.\r\n\t\t\t * The pattern 0 must not be filtered to avoid artifacts.\r\n\t\t\t */\r\n\r\n\t\t\tif(left <= right) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d / 2.0, 0.0), left, result);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(0, 0);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 2: {\r\n\r\n\t\t\t/*    ------.\r\n\t\t\t *          |\r\n\t\t\t */\r\n\r\n\t\t\tif(left >= right) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o2), left, result);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(0, 0);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 3: {\r\n\r\n\t\t\t/*   .------.\r\n\t\t\t *   |      |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d / 2.0, 0.0), left, a1);\r\n\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o2), left, a2);\r\n\r\n\t\t\tsmoothArea(d, a);\r\n\r\n\t\t\tresult.set(a1.x + a2.x, a1.y + a2.y);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 4: {\r\n\r\n\t\t\t/*   |\r\n\t\t\t *   `------\r\n\t\t\t */\r\n\r\n\t\t\tif(left <= right) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d / 2.0, 0.0), left, result);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(0, 0);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 5: {\r\n\r\n\t\t\t/*   |\r\n\t\t\t *   +------\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tresult.set(0, 0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 6: {\r\n\r\n\t\t\t/*   |\r\n\t\t\t *   `------.\r\n\t\t\t *          |\r\n\t\t\t *\r\n\t\t\t * A problem of not offseting L patterns (see above) is that for certain\r\n\t\t\t * max search distances, the pixels in the center of a Z pattern will\r\n\t\t\t * detect the full Z pattern, while the pixels in the sides will detect an\r\n\t\t\t * L pattern. To avoid discontinuities, the full offsetted Z\r\n\t\t\t * revectorization is blended with partially offsetted L patterns.\r\n\t\t\t */\r\n\r\n\t\t\tif(Math.abs(offset) > 0.0) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d, o2), left, a1);\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d / 2.0, 0.0), left, a2);\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o2), left, result);\r\n\t\t\t\ta2.set(a2.x + result.x, a2.y + result.y);\r\n\r\n\t\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d, o2), left, result);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 7: {\r\n\r\n\t\t\t/*   |\r\n\t\t\t *   +------.\r\n\t\t\t *   |      |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d, o2), left, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 8: {\r\n\r\n\t\t\t/*          |\r\n\t\t\t *    ------´\r\n\t\t\t */\r\n\r\n\t\t\tif(left >= right) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o1), left, result);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(0, 0);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 9: {\r\n\r\n\t\t\t/*          |\r\n\t\t\t *   .------´\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tif(Math.abs(offset) > 0.0) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d, o1), left, a1);\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d / 2.0, 0.0), left, a2);\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o1), left, result);\r\n\t\t\t\ta2.set(a2.x + result.x, a2.y + result.y);\r\n\r\n\t\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d, o1), left, result);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 10: {\r\n\r\n\t\t\t/*          |\r\n\t\t\t *    ------+\r\n\t\t\t *          |\r\n\t\t\t */\r\n\r\n\t\t\tresult.set(0, 0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 11: {\r\n\r\n\t\t\t/*          |\r\n\t\t\t *   .------+\r\n\t\t\t *   |      |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d, o1), left, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 12: {\r\n\r\n\t\t\t/*   |      |\r\n\t\t\t *   `------´\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d / 2.0, 0.0), left, a1);\r\n\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o1), left, a2);\r\n\r\n\t\t\tsmoothArea(d, a);\r\n\r\n\t\t\tresult.set(a1.x + a2.x, a1.y + a2.y);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 13: {\r\n\r\n\t\t\t/*   |      |\r\n\t\t\t *   +------´\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d, o1), left, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 14: {\r\n\r\n\t\t\t/*   |      |\r\n\t\t\t *   `------+\r\n\t\t\t *          |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d, o2), left, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 15: {\r\n\r\n\t\t\t/*   |      |\r\n\t\t\t *   +------+\r\n\t\t\t *   |      |\r\n\t\t\t */\r\n\r\n\t\t\tresult.set(0, 0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\n/**\r\n * Determines whether the given pixel is inside the specified area.\r\n *\r\n * @private\r\n * @param {Vector2} p1 - The lower bounds of the area.\r\n * @param {Vector2} p2 - The upper bounds of the area.\r\n * @param {Vector2} x - The X-coordinates.\r\n * @param {Vector2} y - The Y-coordinates.\r\n * @return {Vector2} Whether the pixel lies inside the area.\r\n */\r\n\r\nfunction isInsideArea(p1, p2, x, y) {\r\n\r\n\tlet result = p1.equals(p2);\r\n\r\n\tif(!result) {\r\n\r\n\t\tlet xm = (p1.x + p2.x) / 2.0;\r\n\t\tlet ym = (p1.y + p2.y) / 2.0;\r\n\r\n\t\tlet a = p2.y - p1.y;\r\n\t\tlet b = p1.x - p2.x;\r\n\r\n\t\tlet c = a * (x - xm) + b * (y - ym);\r\n\r\n\t\tresult = (c > 0.0);\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\n/**\r\n * Calculates the area under the line p1 -> p2 for the pixel p using brute force\r\n * sampling.\r\n *\r\n * @private\r\n * @param {Vector2} p1 - The lower bounds of the area.\r\n * @param {Vector2} p2 - The upper bounds of the area.\r\n * @param {Number} pX - The X-coordinates.\r\n * @param {Number} pY - The Y-coordinates.\r\n * @return {Number} The amount of pixels inside the area relative to the total amount of sampled pixels.\r\n */\r\n\r\nfunction calculateDiagonalAreaForPixel(p1, p2, pX, pY) {\r\n\r\n\tlet a;\r\n\tlet x, y;\r\n\tlet offsetX, offsetY;\r\n\r\n\tfor(a = 0, y = 0; y < DIAGONAL_SAMPLES; ++y) {\r\n\r\n\t\tfor(x = 0; x < DIAGONAL_SAMPLES; ++x) {\r\n\r\n\t\t\toffsetX = x / (DIAGONAL_SAMPLES - 1.0);\r\n\t\t\toffsetY = y / (DIAGONAL_SAMPLES - 1.0);\r\n\r\n\t\t\tif(isInsideArea(p1, p2, pX + offsetX, pY + offsetY)) {\r\n\r\n\t\t\t\t++a;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn a / (DIAGONAL_SAMPLES * DIAGONAL_SAMPLES);\r\n\r\n}\r\n\r\n/**\r\n * Calculates the area under the line p1 -> p2. This includes the pixel and its\r\n * opposite.\r\n *\r\n * @private\r\n * @param {Number} pattern - A pattern index.\r\n * @param {Vector2} p1 - The lower bounds of the area.\r\n * @param {Vector2} p2 - The upper bounds of the area.\r\n * @param {Number} left - The left distance.\r\n * @param {Float32Array} offset - An offset.\r\n * @param {Vector2} result - A target vector to store the area in.\r\n * @return {Vector2} The area.\r\n */\r\n\r\nfunction calculateDiagonalArea(pattern, p1, p2, left, offset, result) {\r\n\r\n\tconst e = diagonalEdges[pattern];\r\n\tconst e1 = e[0];\r\n\tconst e2 = e[1];\r\n\r\n\tif(e1 > 0) {\r\n\r\n\t\tp1.x += offset[0];\r\n\t\tp1.y += offset[1];\r\n\r\n\t}\r\n\r\n\tif(e2 > 0) {\r\n\r\n\t\tp2.x += offset[0];\r\n\t\tp2.y += offset[1];\r\n\r\n\t}\r\n\r\n\treturn result.set(\r\n\t\t1.0 - calculateDiagonalAreaForPixel(p1, p2, 1.0 + left, 0.0 + left),\r\n\t\tcalculateDiagonalAreaForPixel(p1, p2, 1.0 + left, 1.0 + left)\r\n\t);\r\n\r\n}\r\n\r\n/**\r\n * Calculates the area for a given pattern and distances to the left and to the\r\n * right, biased by an offset.\r\n *\r\n * @private\r\n * @param {Number} pattern - A pattern index.\r\n * @param {Number} left - The left distance.\r\n * @param {Number} right - The right distance.\r\n * @param {Float32Array} offset - An offset.\r\n * @param {Vector2} result - A target vector to store the area in.\r\n * @return {Vector2} The orthogonal area.\r\n */\r\n\r\nfunction calculateDiagonalAreaForPattern(pattern, left, right, offset, result) {\r\n\r\n\tconst p1 = b0.min;\r\n\tconst p2 = b0.max;\r\n\tconst a1 = b1.min;\r\n\tconst a2 = b1.max;\r\n\r\n\tconst d = left + right + 1;\r\n\r\n\t/* There is some Black Magic involved in the diagonal area calculations.\r\n\t *\r\n\t * Unlike orthogonal patterns, the \"null\" pattern (one without crossing edges)\r\n\t * must be filtered, and the ends of both the \"null\" and L patterns are not\r\n\t * known: L and U patterns have different endings, and the adjacent pattern is\r\n\t * unknown. Therefore, a blend of both possibilities is computed.\r\n\t */\r\n\r\n\tswitch(pattern) {\r\n\r\n\t\tcase 0: {\r\n\r\n\t\t\t/*         .-´\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t *   .-´\r\n\t\t\t *   ´\r\n\t\t\t */\r\n\r\n\t\t\t// First possibility.\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\r\n\t\t\t// Second possibility.\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\t// Blend both possibilities together.\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 1: {\r\n\r\n\t\t\t/*         .-´\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t *   .-´\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(0.0 + d, 0.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 2: {\r\n\r\n\t\t\t/*         .----\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t *   .-´\r\n\t\t\t *   ´\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(0.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 3: {\r\n\r\n\t\t\t/*\r\n\t\t\t *         .----\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t *   .-´\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 4: {\r\n\r\n\t\t\t/*         .-´\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t * ----´\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(0.0 + d, 0.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 5: {\r\n\r\n\t\t\t/*         .-´\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t * --.-´\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(0.0 + d, 0.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 6: {\r\n\r\n\t\t\t/*         .----\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t * ----´\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 0.0 + d), left, offset, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 7: {\r\n\r\n\t\t\t/*         .----\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t * --.-´\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 0.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 8: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         |\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t *   .-´\r\n\t\t\t *   ´\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(0.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 9: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         |\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t *   .-´\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 10: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         .----\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t *   .-´\r\n\t\t\t *   ´\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(0.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 11: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         .----\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t *   .-´\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 12: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         |\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t * ----´\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 1.0 + d), left, offset, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 13: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         |\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t * --.-´\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 14: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         .----\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t * ----´\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 15: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         .----\r\n\t\t\t *       .-´\r\n\t\t\t *     .-´\r\n\t\t\t * --.-´\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\n/**\r\n * Calculates orthogonal or diagonal patterns for a given offset.\r\n *\r\n * @private\r\n * @param {RawImageData[]} patterns - The patterns to assemble.\r\n * @param {Number|Float32Array} offset - A pattern offset. Diagonal offsets are pairs.\r\n * @param {Boolean} orthogonal - Whether the patterns are orthogonal or diagonal.\r\n */\r\n\r\nfunction generatePatterns(patterns, offset, orthogonal) {\r\n\r\n\tconst result = new Vector2();\r\n\r\n\tlet i, l;\r\n\tlet x, y;\r\n\tlet c;\r\n\r\n\tlet pattern;\r\n\tlet data, size;\r\n\r\n\tfor(i = 0, l = patterns.length; i < l; ++i) {\r\n\r\n\t\tpattern = patterns[i];\r\n\r\n\t\tdata = pattern.data;\r\n\t\tsize = pattern.width;\r\n\r\n\t\tfor(y = 0; y < size; ++y) {\r\n\r\n\t\t\tfor(x = 0; x < size; ++x) {\r\n\r\n\t\t\t\tif(orthogonal) {\r\n\r\n\t\t\t\t\tcalculateOrthogonalAreaForPattern(i, x, y, offset, result);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcalculateDiagonalAreaForPattern(i, x, y, offset, result);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tc = (y * size + x) * 2;\r\n\r\n\t\t\t\tdata[c] = result.x * 255;\r\n\t\t\t\tdata[c + 1] = result.y * 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Assembles orthogonal or diagonal patterns into the final area image.\r\n *\r\n * @private\r\n * @param {Vector2} base - A base position.\r\n * @param {RawImageData[]} patterns - The patterns to assemble.\r\n * @param {Uint8Array[]} edges - Edge coordinate pairs, used for positioning.\r\n * @param {Number} size - The pattern size.\r\n * @param {Boolean} orthogonal - Whether the patterns are orthogonal or diagonal.\r\n * @param {RawImageData} target - The target image data.\r\n */\r\n\r\nfunction assemble(base, patterns, edges, size, orthogonal, target) {\r\n\r\n\tconst p = new Vector2();\r\n\r\n\tconst dstData = target.data;\r\n\tconst dstWidth = target.width;\r\n\r\n\tlet i, l;\r\n\tlet x, y;\r\n\tlet c, d;\r\n\r\n\tlet edge;\r\n\tlet pattern;\r\n\tlet srcData, srcWidth;\r\n\r\n\tfor(i = 0, l = patterns.length; i < l; ++i) {\r\n\r\n\t\tedge = edges[i];\r\n\t\tpattern = patterns[i];\r\n\r\n\t\tsrcData = pattern.data;\r\n\t\tsrcWidth = pattern.width;\r\n\r\n\t\tfor(y = 0; y < size; ++y) {\r\n\r\n\t\t\tfor(x = 0; x < size; ++x) {\r\n\r\n\t\t\t\tp.set(\r\n\t\t\t\t\tedge[0] * size + base.x + x,\r\n\t\t\t\t\tedge[1] * size + base.y + y\r\n\t\t\t\t);\r\n\r\n\t\t\t\tc = (p.y * dstWidth + p.x) * 4;\r\n\r\n\t\t\t\t/* The texture coordinates of orthogonal patterns are compressed\r\n\t\t\t\tquadratically to reach longer distances for a given texture size. */\r\n\t\t\t\td = orthogonal ? ((y * y * srcWidth + x * x) * 2) :\r\n\t\t\t\t\t((y * srcWidth + x) * 2);\r\n\r\n\t\t\t\tdstData[c] = srcData[d];\r\n\t\t\t\tdstData[c + 1] = srcData[d + 1];\r\n\t\t\t\tdstData[c + 2] = 0;\r\n\t\t\t\tdstData[c + 3] = 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * SMAA area image data.\r\n *\r\n * This texture allows to obtain the area for a certain pattern and distances\r\n * to the left and to the right of the identified line.\r\n *\r\n * Based on the official python scripts:\r\n *  https://github.com/iryoku/smaa/tree/master/Scripts\r\n */\r\n\r\nclass SMAAAreaImageData {\r\n\r\n\t/**\r\n\t * Creates a new area image.\r\n\t *\r\n\t * @return {RawImageData} The generated image data.\r\n\t */\r\n\r\n\tstatic generate() {\r\n\r\n\t\tconst width = 2 * 5 * ORTHOGONAL_SIZE;\r\n\t\tconst height = orthogonalSubsamplingOffsets.length * 5 * ORTHOGONAL_SIZE;\r\n\r\n\t\tconst data = new Uint8ClampedArray(width * height * 4);\r\n\t\tconst result = new RawImageData(width, height, data);\r\n\r\n\t\tconst orthogonalPatternSize = Math.pow(ORTHOGONAL_SIZE - 1, 2) + 1;\r\n\t\tconst diagonalPatternSize = DIAGONAL_SIZE;\r\n\r\n\t\tconst orthogonalPatterns = [];\r\n\t\tconst diagonalPatterns = [];\r\n\r\n\t\tconst base = new Vector2();\r\n\r\n\t\tlet i, l;\r\n\r\n\t\t// Prepare 16 image data sets for the orthogonal and diagonal subtextures.\r\n\t\tfor(i = 0; i < 16; ++i) {\r\n\r\n\t\t\torthogonalPatterns.push(new RawImageData(orthogonalPatternSize, orthogonalPatternSize,\r\n\t\t\t\tnew Uint8ClampedArray(orthogonalPatternSize * orthogonalPatternSize * 2), 2));\r\n\r\n\t\t\tdiagonalPatterns.push(new RawImageData(diagonalPatternSize, diagonalPatternSize,\r\n\t\t\t\tnew Uint8ClampedArray(diagonalPatternSize * diagonalPatternSize * 2), 2));\r\n\r\n\t\t}\r\n\r\n\t\tfor(i = 0, l = orthogonalSubsamplingOffsets.length; i < l; ++i) {\r\n\r\n\t\t\t// Generate 16 orthogonal patterns for each offset.\r\n\t\t\tgeneratePatterns(orthogonalPatterns, orthogonalSubsamplingOffsets[i], true);\r\n\r\n\t\t\t// Assemble the orthogonal patterns and place them on the left side.\r\n\t\t\tbase.set(0, 5 * ORTHOGONAL_SIZE * i);\r\n\t\t\tassemble(base, orthogonalPatterns, orthogonalEdges, ORTHOGONAL_SIZE, true, result);\r\n\r\n\t\t}\r\n\r\n\t\tfor(i = 0, l = diagonalSubsamplingOffsets.length; i < l; ++i) {\r\n\r\n\t\t\t// Generate 16 diagonal patterns for each offset.\r\n\t\t\tgeneratePatterns(diagonalPatterns, diagonalSubsamplingOffsets[i], false);\r\n\r\n\t\t\t// Assemble the diagonal patterns and place them on the right side.\r\n\t\t\tbase.set(5 * ORTHOGONAL_SIZE, 4 * DIAGONAL_SIZE * i);\r\n\t\t\tassemble(base, diagonalPatterns, diagonalEdges, DIAGONAL_SIZE, false, result);\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * This dictionary returns which edges are active for a certain bilinear fetch:\r\n * it's the reverse lookup of the bilinear function.\r\n *\r\n * @type {Map}\r\n * @private\r\n */\r\n\r\nconst edges = new Map([\r\n\r\n\t[bilinear([0, 0, 0, 0]), [0, 0, 0, 0]],\r\n\t[bilinear([0, 0, 0, 1]), [0, 0, 0, 1]],\r\n\t[bilinear([0, 0, 1, 0]), [0, 0, 1, 0]],\r\n\t[bilinear([0, 0, 1, 1]), [0, 0, 1, 1]],\r\n\r\n\t[bilinear([0, 1, 0, 0]), [0, 1, 0, 0]],\r\n\t[bilinear([0, 1, 0, 1]), [0, 1, 0, 1]],\r\n\t[bilinear([0, 1, 1, 0]), [0, 1, 1, 0]],\r\n\t[bilinear([0, 1, 1, 1]), [0, 1, 1, 1]],\r\n\r\n\t[bilinear([1, 0, 0, 0]), [1, 0, 0, 0]],\r\n\t[bilinear([1, 0, 0, 1]), [1, 0, 0, 1]],\r\n\t[bilinear([1, 0, 1, 0]), [1, 0, 1, 0]],\r\n\t[bilinear([1, 0, 1, 1]), [1, 0, 1, 1]],\r\n\r\n\t[bilinear([1, 1, 0, 0]), [1, 1, 0, 0]],\r\n\t[bilinear([1, 1, 0, 1]), [1, 1, 0, 1]],\r\n\t[bilinear([1, 1, 1, 0]), [1, 1, 1, 0]],\r\n\t[bilinear([1, 1, 1, 1]), [1, 1, 1, 1]]\r\n\r\n]);\r\n\r\n/**\r\n * Linearly interpolates between two values.\r\n *\r\n * @private\r\n * @param {Number} a - The initial value.\r\n * @param {Number} b - The target value.\r\n * @param {Number} p - The interpolation value.\r\n * @return {Number} The interpolated value.\r\n */\r\n\r\nfunction lerp$1(a, b, p) {\r\n\r\n\treturn a + (b - a) * p;\r\n\r\n}\r\n\r\n/**\r\n * Calculates the bilinear fetch for a certain edge combination.\r\n *\r\n *     e[0]       e[1]\r\n *\r\n *              x <-------- Sample Position: (-0.25, -0.125)\r\n *     e[2]       e[3] <--- Current Pixel [3]: (0.0, 0.0)\r\n *\r\n * @private\r\n * @param {Number[]} e - The edge combination.\r\n * @return {Number} The interpolated value.\r\n */\r\n\r\nfunction bilinear(e) {\r\n\r\n\tconst a = lerp$1(e[0], e[1], 1.0 - 0.25);\r\n\tconst b = lerp$1(e[2], e[3], 1.0 - 0.25);\r\n\r\n\treturn lerp$1(a, b, 1.0 - 0.125);\r\n\r\n}\r\n\r\n/**\r\n * Computes the delta distance to add in the last step of searches to the left.\r\n *\r\n * @private\r\n * @param {Number[]} left - The left edge combination.\r\n * @param {Number[]} top - The top edge combination.\r\n * @return {Number} The left delta distance.\r\n */\r\n\r\nfunction deltaLeft(left, top) {\r\n\r\n\tlet d = 0;\r\n\r\n\t// If there is an edge, continue.\r\n\tif(top[3] === 1) {\r\n\r\n\t\td += 1;\r\n\r\n\t}\r\n\r\n\t/* If an edge was previously found, there is another edge and there are no\r\n\tcrossing edges, continue. */\r\n\tif(d === 1 && top[2] === 1 && left[1] !== 1 && left[3] !== 1) {\r\n\r\n\t\td += 1;\r\n\r\n\t}\r\n\r\n\treturn d;\r\n\r\n}\r\n\r\n/**\r\n * Computes the delta distance to add in the last step of searches to the right.\r\n *\r\n * @private\r\n * @param {Number[]} left - The left edge combination.\r\n * @param {Number[]} top - The top edge combination.\r\n * @return {Number} The right delta distance.\r\n */\r\n\r\nfunction deltaRight(left, top) {\r\n\r\n\tlet d = 0;\r\n\r\n\t// If there is an edge, and no crossing edges, continue.\r\n\tif(top[3] === 1 && left[1] !== 1 && left[3] !== 1) {\r\n\r\n\t\td += 1;\r\n\r\n\t}\r\n\r\n\t/* If an edge was previously found, there is another edge and there are no\r\n\tcrossing edges, continue. */\r\n\tif(d === 1 && top[2] === 1 && left[0] !== 1 && left[2] !== 1) {\r\n\r\n\t\td += 1;\r\n\r\n\t}\r\n\r\n\treturn d;\r\n\r\n}\r\n\r\n/**\r\n * SMAA search image data.\r\n *\r\n * This image stores information about how many pixels the line search\r\n * algorithm must advance in the last step.\r\n *\r\n * Based on the official python scripts:\r\n *  https://github.com/iryoku/smaa/tree/master/Scripts\r\n */\r\n\r\nclass SMAASearchImageData {\r\n\r\n\t/**\r\n\t * Creates a new search image.\r\n\t *\r\n\t * @return {RawImageData} The generated image data.\r\n\t */\r\n\r\n\tstatic generate() {\r\n\r\n\t\tconst width = 66;\r\n\t\tconst height = 33;\r\n\t\tconst halfWidth = width / 2;\r\n\r\n\t\tconst croppedWidth = 64;\r\n\t\tconst croppedHeight = 16;\r\n\r\n\t\tconst data = new Uint8ClampedArray(width * height);\r\n\t\tconst croppedData = new Uint8ClampedArray(croppedWidth * croppedHeight * 4);\r\n\r\n\t\tlet x, y;\r\n\t\tlet s, t, i;\r\n\t\tlet e1, e2;\r\n\r\n\t\t// Calculate delta distances.\r\n\t\tfor(y = 0; y < height; ++y) {\r\n\r\n\t\t\tfor(x = 0; x < width; ++x) {\r\n\r\n\t\t\t\ts = 0.03125 * x;\r\n\t\t\t\tt = 0.03125 * y;\r\n\r\n\t\t\t\tif(edges.has(s) && edges.has(t)) {\r\n\r\n\t\t\t\t\te1 = edges.get(s);\r\n\t\t\t\t\te2 = edges.get(t);\r\n\r\n\t\t\t\t\ti = y * width + x;\r\n\r\n\t\t\t\t\t// Maximize the dynamic range to help the compression.\r\n\t\t\t\t\tdata[i] = (127 * deltaLeft(e1, e2));\r\n\t\t\t\t\tdata[i + halfWidth] = (127 * deltaRight(e1, e2));\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Crop the result to powers-of-two to make it BC4-friendly.\r\n\t\tfor(i = 0, y = height - croppedHeight; y < height; ++y) {\r\n\r\n\t\t\tfor(x = 0; x < croppedWidth; ++x, i += 4) {\r\n\r\n\t\t\t\tcroppedData[i] = data[y * width + x];\r\n\t\t\t\tcroppedData[i + 3] = 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn new RawImageData(croppedWidth, croppedHeight, croppedData);\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { AdaptiveLuminanceMaterial, BlendFunction, BlendMode, BloomEffect, BlurPass, BokehEffect, BokehMaterial, BrightnessContrastEffect, ChromaticAberrationEffect, CircleOfConfusionMaterial, ClearMaskPass, ClearPass, ColorAverageEffect, ColorChannel, ColorDepthEffect, ColorEdgesMaterial, ConvolutionMaterial, CopyMaterial, DepthComparisonMaterial, DepthDownsamplingMaterial, DepthDownsamplingPass, DepthEffect, DepthMaskMaterial, DepthOfFieldEffect, DepthPass, Disposable, DotScreenEffect, EdgeDetectionMaterial, EdgeDetectionMode, Effect, EffectAttribute, EffectComposer, EffectMaterial, EffectPass, GammaCorrectionEffect, GlitchEffect, GlitchMode, GodRaysEffect, GodRaysMaterial, GridEffect, HueSaturationEffect, Initializable, KernelSize, LuminanceMaterial, MaskFunction, MaskMaterial, MaskPass, NoiseEffect, NoiseTexture, NormalPass, OutlineEdgesMaterial, OutlineEffect, OutlineMaterial, OverrideMaterialManager, Pass, PixelationEffect, RawImageData, RealisticBokehEffect, RenderPass, Resizable, Resizer, SMAAAreaImageData, SMAAEffect, SMAAImageLoader, SMAAPreset, SMAASearchImageData, SMAAWeightsMaterial, SSAOEffect, SSAOMaterial, SavePass, ScanlineEffect, Section, Selection, SelectiveBloomEffect, SepiaEffect, ShaderPass, ShockWaveEffect, TextureEffect, ToneMappingEffect, VignetteEffect, WebGLExtension };\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { PanelModelObjectService } from '../panel-model-object.service';\n\n@Component({\n  selector: 'panel-model-object-tab-meshes',\n  templateUrl: './panel-model-object-tab-meshes.component.html',\n  styleUrls: ['./panel-model-object-tab-meshes.component.scss']\n})\nexport class PanelModelObjectTabMeshesComponent extends BaseComponent implements OnInit {\n  @Input() meshes: any = [];\n  _s: PanelModelObjectService;\n  @Output() subcribe = new EventEmitter<any>();\n  @Output() onUpdate = new EventEmitter<any>();\n  @Output() onUpdateTitle = new EventEmitter<any>();\n  @Input() secretKey: string = '';\n  constructor(private service: PanelModelObjectService) {\n    super();\n  }\n\n  onInit(): void {\n    this._s = this.service;\n  }\n\n  onUpdateMaterial(event){\n    this.subcribe.emit(event);\n  }\n\n}\n","<div class=\"tab-inner\">\n    <div class=\"inputs store\">\n        <div *ngFor=\"let mesh of meshes; let i=index\">\n            <ng-container *ngIf=\"mesh.data.isArrayMaterial; then arrayMaterialTemplate; else objectMaterialTemplate\"></ng-container>\n            <ng-template #arrayMaterialTemplate>\n                \n            </ng-template>\n            <ng-template #objectMaterialTemplate>\n                <collapse-mesh-material [mesh]=\"mesh\" [title]=\"mesh.title\" [service]=\"_s\" (subcribe)=\"onUpdateMaterial($event)\"></collapse-mesh-material>\n            </ng-template>\n            \n        </div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { isArray, objectHasKey } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '../../base/base.component';\nimport { EditorToolbarService } from './editor-toolbar.service';\n\ninterface Btn {\n    key: string\n    text: string,\n    type?: string\n    icon?: string\n}\n\n@Component({\n    selector: 'viewport-editor-toolbar',\n    templateUrl: './editor-toolbar.component.html',\n    styleUrls: ['./editor-toolbar.component.scss']\n})\nexport class EditorToolbarComponent extends BaseComponent implements OnInit {\n    buttons: Btn[] = [\n        {\n            key: \"saveView\",\n            text: \"Save View\",\n        },\n        {\n            key: \"saveThumbnail\",\n            text: \"Save Thumbnail\",\n        },\n        {\n            key: \"exportImage\",\n            text: \"Export Image\",\n        }\n    ];\n    showBtns: Btn[] = [];\n    show: boolean = false;\n    constructor(private events: EditorToolbarService) {\n        super();\n    }\n\n    onChangeSubEvents(){\n        this.registerEventService(this.subEvents, {\n            \"show|dispatch\": e => this.showButtons(...e.buttons),\n            \"hide|dispatch\": e => this.hideButtons()\n        });\n    }\n\n    onInit(): void {\n        \n    }\n\n    showButtons(...args: any[]) {\n        if(args.length == 0) return this.hideButtons();\n        this.showBtns = [];\n        let list: any[] = [];\n        let hasShow: boolean = false;\n        for (let index = 0; index < args.length; index++) {\n            const arg = args[index];\n            if (isArray(arg)) arg.map(s => list.push(s));\n            else list.push(arg)\n        }\n        list.map(key => {\n            this.buttons.map(btn => {\n                if (btn.key == key) {\n                    this.showBtns.push(btn);\n                    hasShow = true;\n                }\n            })\n        })\n        this.show = hasShow;\n    }\n\n    hideButtons() {\n        this.show = false\n        this.showBtns = []\n    }\n\n    onClick(key) {\n        this.subEvents.emit({\n            type: \"click\",\n            key: key\n        });\n    }\n\n}\n","<div class=\"menu\" *ngIf=\"show\">\n    <button nz-button (click)=\"onClick(btn.key)\" *ngFor=\"let btn of showBtns\">\n        {{btn.text|translate}}\n    </button>\n</div>","import { Injectable } from '@angular/core';\r\nimport { environment } from '@env/environment';\r\n\r\nimport { Observable, of } from 'rxjs';\r\nimport { SettingService } from './setting/setting.service';\r\n\r\n@Injectable()\r\nexport class PermissionsService {\r\n  private readonly WORKFLOW_EVENTS = Object.freeze(environment.workflow);\r\n  private userRoles: Array<string> = [];\r\n\r\n  constructor(private settingService: SettingService) {}\r\n\r\n  public checkAuthorization(path: any): Observable<boolean> {\r\n    if (!this.userRoles) {\r\n      const roles = this.settingService.roles || [];\r\n      this.userRoles = roles;\r\n    }\r\n    return of(this.doCheckAuthorization(path));\r\n  }\r\n\r\n  public checkAuthorizationSync(path: any): boolean {\r\n    if (this.userRoles.length < 1) {\r\n      const roles = this.settingService.roles || [];\r\n      this.userRoles = roles;\r\n      this.doCheckAuthorization(path);\r\n    }\r\n    return this.doCheckAuthorization(path);\r\n  }\r\n\r\n  private doCheckAuthorization(path: any): boolean {\r\n    const paths = this.settingService.paths;\r\n    return paths.has(path);\r\n  }\r\n\r\n  private parsePath(path: any): string[] {\r\n    if (typeof path === 'string') {\r\n      return path.split('.');\r\n    }\r\n    if (Array.isArray(path)) {\r\n      return path;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  private findEntry(currentObject: any, keys: string[], index = 0) {\r\n    const key = keys[index];\r\n    if (currentObject[key] && index < keys.length - 1) {\r\n      return this.findEntry(currentObject[key], keys, index + 1);\r\n    } else if (currentObject[key] && index === keys.length - 1) {\r\n      return currentObject[key];\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { isObject } from '@app/_core/helpers/utils';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PanelModelObjectService  extends EventManagerService {\n\n  constructor() {\n      super();\n  }\n  \n\n  open(data: any, onChange?: (...args: any[]) => any, onDone?: (...args: any[]) => any) {\n      if (!isObject(data)) return false;\n      if (typeof onChange == \"function\") {\n          if (typeof data.onChange != \"function\") {\n              data.onChange = onChange;\n          }\n          else if (typeof data.change != \"function\") {\n              data.change = onChange;\n          }\n      }\n\n      if (typeof onChange == \"function\") {\n          if (typeof data.onDone != \"function\") {\n              data.onDone = onDone;\n          }\n          else if (typeof data.done != \"function\") {\n              data.done = onDone;\n          }\n      }\n\n      this.emit({\n          type: \"panel.show\",\n          data: data\n      })\n  }\n  close(){\n    this.emit(\"panel.hide\");\n}\n\n\n  updateProps(data){\n      if(isObject(data) && data.secret_key){\n          this.emit({\n              type: \"editor.update.props\",\n              data: data\n          })\n      }\n  }\n}\n","import {\r\n\tEventDispatcher,\r\n\tMatrix4,\r\n\tPlane,\r\n\tRaycaster,\r\n\tVector2,\r\n\tVector3\r\n} from 'three';\r\n\r\nconst _plane = new Plane();\r\nconst _raycaster = new Raycaster();\r\n\r\nconst _pointer = new Vector2();\r\nconst _offset = new Vector3();\r\nconst _intersection = new Vector3();\r\nconst _worldPosition = new Vector3();\r\nconst _inverseMatrix = new Matrix4();\r\n\r\nclass DragControls extends EventDispatcher {\r\n\r\n\tconstructor( _objects, _camera, _domElement ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t_domElement.style.touchAction = 'none'; // disable touch scroll\r\n\r\n\t\tlet _selected = null, _hovered = null;\r\n\r\n\t\tconst _intersections = [];\r\n\r\n\t\t//\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tfunction activate() {\r\n\r\n\t\t\t_domElement.addEventListener( 'pointermove', onPointerMove );\r\n\t\t\t_domElement.addEventListener( 'pointerdown', onPointerDown );\r\n\t\t\t_domElement.addEventListener( 'pointerup', onPointerCancel );\r\n\t\t\t_domElement.addEventListener( 'pointerleave', onPointerCancel );\r\n\r\n\t\t}\r\n\r\n\t\tfunction deactivate() {\r\n\r\n\t\t\t_domElement.removeEventListener( 'pointermove', onPointerMove );\r\n\t\t\t_domElement.removeEventListener( 'pointerdown', onPointerDown );\r\n\t\t\t_domElement.removeEventListener( 'pointerup', onPointerCancel );\r\n\t\t\t_domElement.removeEventListener( 'pointerleave', onPointerCancel );\r\n\r\n\t\t\t_domElement.style.cursor = '';\r\n\r\n\t\t}\r\n\r\n\t\tfunction dispose() {\r\n\r\n\t\t\tdeactivate();\r\n\r\n\t\t}\r\n\r\n\t\tfunction getObjects() {\r\n\r\n\t\t\treturn _objects;\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerMove( event ) {\r\n\r\n\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\tupdatePointer( event );\r\n\r\n\t\t\t_raycaster.setFromCamera( _pointer, _camera );\r\n\r\n\t\t\tif ( _selected ) {\r\n\r\n\t\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\r\n\r\n\t\t\t\t\t_selected.position.copy( _intersection.sub( _offset ).applyMatrix4( _inverseMatrix ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.dispatchEvent( { type: 'drag', object: _selected } );\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// hover support\r\n\r\n\t\t\tif ( event.pointerType === 'mouse' || event.pointerType === 'pen' ) {\r\n\r\n\t\t\t\t_intersections.length = 0;\r\n\r\n\t\t\t\t_raycaster.setFromCamera( _pointer, _camera );\r\n\t\t\t\t_raycaster.intersectObjects( _objects, true, _intersections );\r\n\r\n\t\t\t\tif ( _intersections.length > 0 ) {\r\n\r\n\t\t\t\t\tconst object = _intersections[ 0 ].object;\r\n\r\n\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( object.matrixWorld ) );\r\n\r\n\t\t\t\t\tif ( _hovered !== object && _hovered !== null ) {\r\n\r\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'hoveroff', object: _hovered } );\r\n\r\n\t\t\t\t\t\t_domElement.style.cursor = 'auto';\r\n\t\t\t\t\t\t_hovered = null;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( _hovered !== object ) {\r\n\r\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'hoveron', object: object } );\r\n\r\n\t\t\t\t\t\t_domElement.style.cursor = 'pointer';\r\n\t\t\t\t\t\t_hovered = object;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( _hovered !== null ) {\r\n\r\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'hoveroff', object: _hovered } );\r\n\r\n\t\t\t\t\t\t_domElement.style.cursor = 'auto';\r\n\t\t\t\t\t\t_hovered = null;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerDown( event ) {\r\n\r\n\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\tupdatePointer( event );\r\n\r\n\t\t\t_intersections.length = 0;\r\n\r\n\t\t\t_raycaster.setFromCamera( _pointer, _camera );\r\n\t\t\t_raycaster.intersectObjects( _objects, true, _intersections );\r\n\r\n\t\t\tif ( _intersections.length > 0 ) {\r\n\r\n\t\t\t\t_selected = ( scope.transformGroup === true ) ? _objects[ 0 ] : _intersections[ 0 ].object;\r\n\r\n\t\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\r\n\r\n\t\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\r\n\r\n\t\t\t\t\t_inverseMatrix.copy( _selected.parent.matrixWorld ).invert();\r\n\t\t\t\t\t_offset.copy( _intersection ).sub( _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_domElement.style.cursor = 'move';\r\n\r\n\t\t\t\tscope.dispatchEvent( { type: 'dragstart', object: _selected } );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerCancel() {\r\n\r\n\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\tif ( _selected ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( { type: 'dragend', object: _selected } );\r\n\r\n\t\t\t\t_selected = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_domElement.style.cursor = _hovered ? 'pointer' : 'auto';\r\n\r\n\t\t}\r\n\r\n\t\tfunction updatePointer( event ) {\r\n\r\n\t\t\tconst rect = _domElement.getBoundingClientRect();\r\n\r\n\t\t\t_pointer.x = ( event.clientX - rect.left ) / rect.width * 2 - 1;\r\n\t\t\t_pointer.y = - ( event.clientY - rect.top ) / rect.height * 2 + 1;\r\n\r\n\t\t}\r\n\r\n\t\tactivate();\r\n\r\n\t\t// API\r\n\r\n\t\tthis.enabled = true;\r\n\t\tthis.transformGroup = false;\r\n\r\n\t\tthis.activate = activate;\r\n\t\tthis.deactivate = deactivate;\r\n\t\tthis.dispose = dispose;\r\n\t\tthis.getObjects = getObjects;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { DragControls };\r\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\n\n@Component({\n    selector: 'app-sidebar-lock',\n    templateUrl: './sidebar-lock.component.html',\n    styleUrls: ['./sidebar-lock.component.scss']\n})\nexport class SidebarLockComponent extends BaseComponent implements OnInit {\n\n    show: boolean = false;\n    constructor(private events: AppEditorEventService, private cd: ChangeDetectorRef) {\n        super();\n        \n    }\n\n    init(){\n        if(this.isChangeSubEvents){\n            this.registerEventService(this.subEvents, {\n                \"show:sidebar-lock|dispatch\": () => {\n                    this.show = true;\n                },\n                \"hide:sidebar-lock|dispatch\": () => {\n                    this.show = false;\n                }\n            })\n        }\n        this.activeEventServiceRegistered(this.subEvents);\n    }\n    onDestroy(){\n        this.deactiveEventServiceRegistered(this.subEvents);\n    }\n}\n","<div class=\"loading-wrapper\" [class.active]=\"show\">\n    <div class=\"lds-heart\"><div></div></div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n  selector: 'inp-text-group',\n  templateUrl: './inp-text-group.component.html',\n  styleUrls: ['./inp-text-group.component.scss']\n})\nexport class InpTextGroupComponent extends BaseInpGroupComponent implements OnInit {\n\n  \n  constructor() {\n    super();\n  }\n\n  onInit(): void {\n    this.inpInit();\n    this.old = this.value;\n  }\n\n  onChangeValue(event) {\n    if (this.old !== this.value) {\n      this.emitChange();\n    }\n  }\n\n}\n","<div class=\"inner-box\">{{label?label:name | translate}}</div>\n<div class=\"input-wrapper\">\n    <input nz-input placeholder=\"{{placeholder?placeholder:name|translate}}\" [(ngModel)]=\"value\" (input)=\"onChangeValue($event)\" (change)=\"onChangeValue($event)\" />\n</div>","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { Object3DPropDataModel, Object3DPropDefaultData } from '@app/_3D/store/data.type';\nimport { assignValue, isObject } from '@app/_core/helpers/utils';\nimport { InpEvent } from '@app/_shared/shared.type';\n\n@Component({\n    selector: 'mesh-geometry-tab-properties',\n    templateUrl: './mesh-geometry-tab-properties.component.html',\n    styleUrls: ['./mesh-geometry-tab-properties.component.scss']\n})\nexport class MeshGeometryTabPropertiesComponent implements OnInit {\n    @Input() props: Object3DPropDataModel = null;\n    @Input() index: number = 0;\n    @Output() onUpdate = new EventEmitter<Object3DPropDataModel>();\n    @Input() events: any = null;\n\n    @Output() subcribe = new EventEmitter<InpEvent>();\n    constructor() { }\n\n    ngOnInit(): void {\n        let defData = assignValue({}, Object3DPropDefaultData);\n        let finalData = assignValue(defData, this.props);\n        if (!isObject(this.props)) this.props = finalData;\n        else assignValue(this.props, finalData);\n        // console.log(this.props)\n\n    }\n\n    onInputChange(event) {\n        if (event && isObject(event) && event.name) {\n            if (isObject(this.props[event.name]) && isObject(event.value)) {\n                assignValue(this.props[event.name], event.value);\n            }\n            else {\n                this.props[event.name] = event.value;\n            }\n            this.emitUpdate(event.name, event.value);\n        }\n    }\n\n    emitUpdate(name, value) {\n        this.onUpdate.emit(this.props);\n        this.subcribe.emit({\n            name: name,\n            value: value,\n            props: this.props\n        });\n    }\n}\n","<div class=\"tab-inner\">\n    <div class=\"inputs store\">\n        <inp-text-group class=\"item-name-group\" name=\"name\" label=\"Mesh Object Name\" [(value)]=\"props.name\" (subcribe)=\"onInputChange($event)\"></inp-text-group>\n        <div class=\"inp-list\" *ngIf=\"props\">\n\n            <inp-switch-group class=\"inp-group-item\" name=\"castShadow\" [(value)]=\"props.castShadow\" label=\"Cast Shadow\" (subcribe)=\"onInputChange($event)\"></inp-switch-group>\n\n            <inp-switch-group class=\"inp-group-item\" name=\"receiveShadow\" [(value)]=\"props.receiveShadow\" label=\"Receive Shadow\" (subcribe)=\"onInputChange($event)\"></inp-switch-group>\n\n            <inp-vector3-group class=\"inp-group-item\" name=\"scale\" [(value)]=\"props.scale\" label=\"Scale\" (subcribe)=\"onInputChange($event)\"></inp-vector3-group>\n\n            <inp-rotation-group class=\"inp-group-item\" name=\"rotation\" [(value)]=\"props.rotation\" label=\"Rotation\" (subcribe)=\"onInputChange($event)\" [events]=\"events\"></inp-rotation-group>\n\n            <inp-vector3-group class=\"inp-group-item\" name=\"position\" [(value)]=\"props.position\" label=\"Position\" (subcribe)=\"onInputChange($event)\" [btnCenter]=\"true\"></inp-vector3-group>\n\n        </div>\n    </div>\n</div>","export * from './model';\r\nexport * from './service';\r\nexport * from './table';\r\n","export * from './auth.guard';\r\nexport * from './authorization.guard';\r\nexport * from './un-auth.guard';\r\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { FloorDefaultData, FloorSetting, SceneSize, SceneSizeDefaultData } from '@app/_3D/store/data.type';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { ImageLibraryService } from '@app/_shared/components/modals/image-library/image-library.service';\nimport { ModalConfirmService } from '@app/_shared/services/modal-confirm.service';\n\n@Component({\n    selector: 'app-tab-scene-settings',\n    templateUrl: './tab-scene-settings.component.html',\n    styleUrls: ['./tab-scene-settings.component.scss']\n})\nexport class TabSceneSettingsComponent extends BaseComponent implements OnInit {\n    sceneSize: SceneSize = assignValue({}, SceneSizeDefaultData);\n    floor: FloorSetting = assignValue({}, FloorDefaultData);\n    app: AppEditorService\n    constructor(\n        private cd: ChangeDetectorRef,\n        private library: ImageLibraryService,\n        private cfm: ModalConfirmService,\n        private events: AppEditorEventService\n    ) {\n        super();\n    }\n\n    initOnce(){\n        this.app = this.events.app;\n     \n    }\n    init() {\n        if(this.isChangeSubEvents){\n            this.app = this.subEvents.app;\n        }\n        this.initSize();\n        this.initFloor();\n    }\n    destroy(){\n        \n    }\n    initSize() {\n        assignValue(this.sceneSize, this.app.getSceneSizeSetting());\n    }\n\n    onTextureCancel() {\n        this.cd.detectChanges();\n        setTimeout(() => {\n            this.subEvents.emit(\"tab.scene.refresh\");\n        }, 200);\n    }\n    updateSize(event) {\n        this.sceneSize[event.name] = event.value;\n        this.app.updateSceneSizeSetting(this.sceneSize);\n    }\n\n    initFloor() {\n        assignValue(this.floor, this.app.getFloorSetting());\n    }\n    updateFloor(event) {\n        this.floor[event.name] = event.value;\n        setTimeout(() => {\n            this.app.updateSceneFloorSetting(this.floor);    \n        }, 10);\n        \n    }\n    updateFloorParams(event) {\n        this.floor.params[event.name] = event.value;\n        this.app.updateSceneFloorSetting(this.floor);\n    }\n    updateFloorProps(event) {\n        this.floor.props[event.name] = event.value;\n        this.app.updateSceneFloorSetting(this.floor);\n    }\n\n\n    updateFloorPosition(event) {\n        this.floor.props.position[event.name] = event.value;\n        this.app.updateSceneFloorSetting(this.floor);\n    }\n\n    updateFloorMaterial(event) {\n        this.floor.material[event.name] = event.value;\n        this.app.updateSceneFloorSetting(this.floor);\n    }\n\n}\n","<div class=\"tab-inner\">\n    <div class=\"tab-header\">\n        <h3>Scene Settings</h3>\n    </div>\n    <div class=\"store\">\n        <div class=\"inputs group group-border\">\n            <h4>Size</h4>\n            <inp-number-group name=\"width\" [(value)]=\"sceneSize.width\" label=\"Width (x)\" (subcribe)=\"updateSize($event)\" [min]=\"0.1\" [max]=\"1000\" [step]=\"0.1\" class=\"inp-group-item-first\"></inp-number-group>\n            <inp-number-group name=\"depth\" [(value)]=\"sceneSize.depth\" label=\"Depth (z)\" (subcribe)=\"updateSize($event)\" [min]=\"0.1\" [max]=\"1000\" [step]=\"0.1\" class=\"inp-group-item\"></inp-number-group>\n        </div>\n        <div class=\"inputs group\">\n            <h4>Floor</h4>\n            <inp-number-group name=\"y\" [(value)]=\"floor.props.position.y\" label=\"Position Y\" (subcribe)=\"updateFloorPosition($event)\" [min]=\"-1000\" [max]=\"1000\" [step]=\"0.001\" class=\"inp-group-item-first\"></inp-number-group>\n            <inp-switch-group name=\"above\" [(value)]=\"floor.above\" label=\"Dropping Object Above Floor\" (subcribe)=\"updateFloor($event)\" class=\"inp-group-item\"></inp-switch-group>\n\n            <inp-switch-group name=\"enableGrid\" [(value)]=\"floor.enableGrid\" label=\"show Grid\" (subcribe)=\"updateFloor($event)\" class=\"inp-group-item\"></inp-switch-group>\n            <!-- <inp-switch-group name=\"enableAxes\" [(value)]=\"floor.enableAxes\" label=\"show Axes\" (subcribe)=\"updateFloor($event)\" class=\"inp-group-item\"></inp-switch-group> -->\n\n\n            <inp-switch-group name=\"enabled\" [(value)]=\"floor.enabled\" label=\"Enable (Show)\" (subcribe)=\"updateFloor($event)\" class=\"inp-group-item\"></inp-switch-group>\n            <div *ngIf=\"floor.enabled\">\n                <div class=\"hr\"></div>\n                <h4>Floor size</h4>\n                <inp-number-group name=\"width\" [(value)]=\"floor.params.width\" label=\"Width (x)\" (subcribe)=\"updateFloorParams($event)\" [min]=\"0.1\" [max]=\"1000\" [step]=\"0.1\" class=\"inp-group-item\"></inp-number-group>\n                <inp-number-group name=\"height\" [(value)]=\"floor.params.height\" label=\"Depth (z)\" (subcribe)=\"updateFloorParams($event)\" [min]=\"0.1\" [max]=\"1000\" [step]=\"0.1\" class=\"inp-group-item\"></inp-number-group>\n                \n                <div class=\"hr\"></div>\n                <h4>Floor Shadow</h4>\n                <inp-switch-group name=\"receiveShadow\" [(value)]=\"floor.props.receiveShadow\" label=\"Receive Shadow\" (subcribe)=\"updateFloorProps($event)\" class=\"inp-group-item\"></inp-switch-group>\n                \n                <div class=\"hr\"></div>\n                <h4>Material</h4>\n                <inp-color-group name=\"color\" [(value)]=\"floor.material.color\" label=\"Color\" (subcribe)=\"updateFloorMaterial($event)\" class=\"inp-group-item\"></inp-color-group>\n                <inp-texture-group name=\"map\" [(value)]=\"floor.material.map\" label=\"Map\" (subcribe)=\"updateFloorMaterial($event)\" (onCloseLibrary)=\"onTextureCancel()\" class=\"inp-group-item\"></inp-texture-group>\n                <inp-texture-group name=\"bumpMap\" [(value)]=\"floor.material.bumpMap\" label=\"Bump Map\" (subcribe)=\"updateFloorMaterial($event)\" (onCloseLibrary)=\"onTextureCancel()\" class=\"inp-group-item\"></inp-texture-group>\n                <inp-texture-group name=\"normalMap\" [(value)]=\"floor.material.normalMap\" label=\"Normal Map\" (subcribe)=\"updateFloorMaterial($event)\" (onCloseLibrary)=\"onTextureCancel()\" class=\"inp-group-item\"></inp-texture-group>\n                <inp-switch-group name=\"transparent\" [(value)]=\"floor.material.transparent\" label=\"Transparent\" (subcribe)=\"updateFloorMaterial($event)\" class=\"inp-group-item\"></inp-switch-group>\n                <inp-range-group name=\"opacity\" [(value)]=\"floor.material.opacity\" label=\"Opacity\" (subcribe)=\"updateFloorMaterial($event)\" [min]=\"0\" [max]=\"1\" [step]=\"0.01\" class=\"inp-group-item\"></inp-range-group>\n            </div>\n        </div>\n    </div>\n</div>","export * from './role';\r\nexport * from './user';\r\nexport * from './apply-agency.params';\r\nexport * from './apply-affilate.params';\r\n","import { Directive, Input, OnDestroy, OnInit, TemplateRef, ViewContainerRef } from '@angular/core';\r\nimport { PermissionsService } from '../services/permissions.service';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Directive({\r\n  selector: '[appCanAccess]',\r\n})\r\nexport class CanAccessDirective implements OnInit, OnDestroy {\r\n  @Input() set appCanAccess(value: string | string[]) {\r\n    this.applyPermission(value);\r\n  }\r\n  private permission$: Subscription;\r\n\r\n  constructor(private templateRef: TemplateRef<any>, private viewContainer: ViewContainerRef, private workflowEvents: PermissionsService) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  private applyPermission(value: string | string[]): void {\r\n    this.permission$ = this.workflowEvents.checkAuthorization(value).subscribe((authorized) => {\r\n      if (authorized) {\r\n        this.viewContainer.createEmbeddedView(this.templateRef);\r\n      } else {\r\n        this.viewContainer.clear();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.permission$.unsubscribe();\r\n  }\r\n}\r\n","'use strict';\r\n\r\n\r\n\r\n// var Helper;\r\nvar global = this || window;\r\nfunction addToGlobal(name: any, value: any) {\r\n    global[name] = value;\r\n}\r\n\r\n\r\n\r\n// mang\r\nvar arr: Array<any> = [];\r\n\r\nvar document = window.document;\r\n\r\nvar div = document.createElement(\"div\");\r\n\r\n// var getProto = Object.getPrototypeOf;\r\n\r\nvar slice = arr.slice;\r\n\r\nvar createElement = document.createElement;\r\n\r\n\r\n// var $$;\r\nif (typeof Object.assign != 'function') {\r\n\r\n    Object.assign = function (target: any, varArgs: any) { // .length của function là 2\r\n        'use strict';\r\n        if (target == null) { // TypeError nếu undefined hoặc null\r\n            throw new TypeError('Cannot convert undefined or null to object');\r\n        }\r\n\r\n        var to = Object(target);\r\n\r\n        for (var index = 1; index < arguments.length; index++) {\r\n            var nextSource = arguments[index];\r\n\r\n            if (nextSource != null) { // Bỏ qua nếu undefined hoặc null\r\n                for (var nextKey in nextSource) {\r\n                    // Avoid bugs when hasOwnProperty is shadowed\r\n                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n                        to[nextKey] = nextSource[nextKey];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return to;\r\n    };\r\n}\r\n\r\n\r\nvar isFunction = function isFunction(obj: any) {\r\n\r\n    return typeof obj === \"function\" && typeof obj.nodeType !== \"number\";\r\n};\r\n\r\nvar isCallable = function (variable: any) {\r\n    return typeof variable === \"function\";\r\n};\r\n\r\n/**\r\n * lấy kiểu giá trị của biến\r\n * @param {*} obj\r\n * @return {string}\r\n */\r\nvar getType = function (obj: any) {\r\n    var t = 'null';\r\n    var type = typeof obj;\r\n    if (type == 'object') {\r\n        if (obj === null) {\r\n            t = 'null';\r\n        } else if (obj.constructor == FormData) {\r\n            t = 'formdata';\r\n        } else if (obj.constructor == Array || Array.isArray(obj)) {\r\n            t = 'array';\r\n        } else if (obj.constructor == Object) {\r\n            t = 'object';\r\n        } else if (obj.constructor == Number) {\r\n            t = 'number';\r\n        } else if (obj.constructor == String) {\r\n            t = 'string';\r\n        } else {\r\n            t = 'object';\r\n        }\r\n    } else {\r\n        t = type;\r\n    }\r\n    return t;\r\n};\r\n/**\r\n * kiềm tra có phải chuỗi\r\n * @param {*} variable biến bất kỳ\r\n */\r\nvar isString = function isString(variable: any) {\r\n    var type = getType(variable);\r\n    return type == \"string\" || (type == \"number\" && !isNaN(variable));\r\n}\r\n/**\r\n * kiềm tra có phải null\r\n * @param {*} variable biến bất kỳ\r\n */\r\nvar isNull = function isNull(variable: any) {\r\n    return getType(variable) == \"null\";\r\n}\r\n/**\r\n * kiềm tra có phải array\r\n * @param {*} variable biến bất kỳ\r\n */\r\nvar isArray = function isArray(variable: any) {\r\n    return getType(variable) == \"array\" || Array.isArray(variable);\r\n}\r\n/**\r\n * kiềm tra có phải object\r\n * @param {*} variable biến bất kỳ\r\n */\r\nvar isObject = function isObject(variable: any) {\r\n    return getType(variable) == \"object\";\r\n}\r\n/**\r\n * kiềm tra có phải number\r\n * @param {*} variable biến bất kỳ\r\n */\r\nvar isNumber = function isNumber(variable: any) {\r\n    var type = getType(variable);\r\n    return (type === \"number\" || type === \"string\") && !isNaN(variable - parseFloat(variable));\r\n}\r\n/**\r\n * kiềm tra có phải loat\r\n * @param {*} variable biến bất kỳ\r\n */\r\nvar isFloat = function isFloat(variable: any) {\r\n    var type = getType(variable);\r\n    return (type === \"number\" || type === \"string\") && !isNaN(variable - parseFloat(variable));\r\n}\r\n\r\n/**\r\n * kiềm tra có phải number\r\n * @param {*} variable biến bất kỳ\r\n */\r\nvar isInteger = function isInteger(variable: any) {\r\n    return isNumber(variable) && String(parseInt(variable)) == String(variable);\r\n}\r\n\r\n\r\n/**\r\n * kiềm tra có phải boolean\r\n * @param {*} variable biến bất kỳ\r\n */\r\nvar isBoolean = function isBoolean(variable: any) {\r\n    return getType(variable) == \"boolean\";\r\n}\r\n\r\n/**\r\n * kiềm tra có phải Formdata\r\n * @param {*} variable biến bất kỳ\r\n */\r\nvar isFormData = function isFormData(variable: any) {\r\n    return getType(variable) == \"formdata\";\r\n}\r\n\r\n/**\r\n * kiềm tra có phải chuỗi\r\n * @param {*} variable biến bất kỳ\r\n */\r\nvar isEmail = function isEmail(email: any) {\r\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(String(email).toLowerCase());\r\n};\r\n\r\nvar isEmpty = function (obj: any) {\r\n\r\n    if (typeof obj == \"undefined\") return true;\r\n\r\n    // console.log(any.constructor)\r\n    var type = getType(obj);\r\n\r\n    if (type == \"object\") {\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    else if (type == \"array\" || type == 'string') {\r\n        return obj.length == 0;\r\n    }\r\n    else return !obj;\r\n}\r\nvar emptyFunc = function () { };\r\n\r\nvar newObj = (obj: any = undefined) => {\r\n    var d = isObject(obj) ? obj : {};\r\n    var a = Object.create(d);\r\n    for (const key in d) {\r\n        if (Object.prototype.hasOwnProperty.call(d, key)) {\r\n            const v = d[key];\r\n            a[key] = v;\r\n        }\r\n    }\r\n    return a;\r\n}\r\nvar emptyObject = function () {\r\n    return Object.create({});\r\n}\r\n/**\r\n *\r\n * @param {object} dst\r\n * @param {object} src\r\n * @returns {object}\r\n */\r\nvar merge = function (dst: {}, src: {} = {}) {\r\n    if (!dst || !isObject(dst)) dst = {};\r\n    var to = Object(dst);\r\n    var srclength = arguments.length;\r\n    for (var i = 1; i < srclength; i++) {\r\n        var srcObj = arguments[i];\r\n        if (isObject(srcObj)) {\r\n            for (var key in srcObj) {\r\n                if (srcObj.hasOwnProperty(key)) {\r\n                    var val = srcObj[key];\r\n                    if ((isObject(val) || isArray(val)) && !isFormData(val) && val.constructor != Promise) {\r\n                        var d = {};\r\n                        to[key] = merge(d, val);\r\n                    } else {\r\n                        to[key] = val;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return dst;\r\n}\r\n\r\n/**\r\n * sao chep gia tri trong mang\r\n * @param {array|object} src mang doi tuong  can sao chep\r\n */\r\nvar copyArray = function (src: any = []) {\r\n    var arr = [];\r\n    var t = getType(src);\r\n    if (t == 'object' || t == 'array') {\r\n        if (src.length) {\r\n            for (var index = 0; index < src.length; index++) {\r\n                if (typeof src[index] != \"undefined\") {\r\n                    arr.push(src[index]);\r\n                }\r\n            }\r\n        } else if (t == 'object') {\r\n            for (var key in src) {\r\n                if (src.hasOwnProperty(key)) {\r\n                    var item = src[key];\r\n                    arr.push(item);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return arr;\r\n};\r\n\r\n\r\nvar combine = function combine(list: any) {\r\n    var sth = function (lst: any, i: any = undefined) {\r\n        if (!i) i = 0;\r\n        var ls: any = [];\r\n        if (lst.length <= i) return [];\r\n        var arr = lst[i];\r\n        arr.map(function (c: any) {\r\n            var s = c;\r\n            if (i < lst.length - 1) {\r\n                var tl = sth(lst, i + 1);\r\n                if (tl.length) {\r\n                    tl.map(function (t: any) {\r\n                        ls.push(c + \"\" + t);\r\n                    });\r\n                } else {\r\n                    ls.push(c);\r\n                }\r\n            } else {\r\n                ls.push(c);\r\n            }\r\n        });\r\n        return ls;\r\n    };\r\n    return sth(list);\r\n};\r\n\r\n\r\nvar objectKeys = function (obj: object) {\r\n    var keys = [];\r\n    if (isArray(obj) || isObject(obj)) {\r\n        for (var key in obj) {\r\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n                keys.push(key);\r\n            }\r\n        }\r\n    }\r\n    return keys;\r\n};\r\nvar objectValues = function (obj: {} = {}) {\r\n    const values = Object.values(obj);\r\n    // var values = [];\r\n    // obj.a = 0;\r\n    // if (isArray(obj) || isObject(obj)) {\r\n    //     for (var key in obj) {\r\n    //         if (obj.hasOwnProperty(key)) {\r\n    //             values.push(obj[key]);\r\n    //         }\r\n    //     }\r\n    // }\r\n    return values;\r\n};\r\n\r\nvar isProperty = function isProperty(obj: any, key: any) {\r\n    return Object.hasOwnProperty.call(obj, key);\r\n}\r\nvar isMethod = function isisMethod(obj: {} = {}, key: string = \"\"): boolean {\r\n    var a: boolean = false;\r\n    eval(\"a = typeof obj[key] == 'function'\");\r\n    return a;\r\n}\r\n\r\n/**\r\n * kiểm tra giá trị có trong mảng / object hay không\r\n * @param {array} arr mảng\r\n * @param {*} value\r\n * @returns {boolean}\r\n */\r\nvar hasValue = function hasValue(arr: Array<any> = [], value: any = null, checkType: boolean = false) {\r\n    if (typeof arr == \"undefined\") return false;\r\n    var t = getType(arr);\r\n    if (t == 'array') {\r\n        if (checkType == true) {\r\n            for (var index = 0; index < arr.length; index++) {\r\n                var v = arr[index];\r\n                if (v === value) return true;\r\n            }\r\n        } else {\r\n            return arr.indexOf(value) >= 0;\r\n        }\r\n    } else if (t == 'object') {\r\n        if (checkType) {\r\n            for (var key in arr) {\r\n                if (arr.hasOwnProperty(key)) {\r\n                    var v = arr[key];\r\n                    if (v === value) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (var key in arr) {\r\n                if (arr.hasOwnProperty(key)) {\r\n                    var v = arr[key];\r\n                    if (v == value) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * kiểm tra giá trị có trong mảng / object hay không\r\n * @param {array} arr mảng\r\n * @param {*} value\r\n * @returns {boolean}\r\n */\r\nvar inArray = function inArray(arr: any[], value: any, checkType: boolean = false) {\r\n    if (typeof arr == \"undefined\") return false;\r\n    var t = getType(arr);\r\n    if (t != \"array\" && t != \"object\" && (isArray(value) || isObject(value))) {\r\n        var c = arr;\r\n        arr = value;\r\n        value = c;\r\n        t = getType(arr);\r\n    }\r\n    if (t == 'array') {\r\n        if (checkType == true) {\r\n            for (var index = 0; index < arr.length; index++) {\r\n                var v = arr[index];\r\n                if (v === value) return true;\r\n            }\r\n        } else {\r\n            return arr.indexOf(value) >= 0;\r\n        }\r\n    } else if (t == 'object') {\r\n        if (checkType) {\r\n            for (var key in arr) {\r\n                if (arr.hasOwnProperty(key)) {\r\n                    var v = arr[key];\r\n                    if (v === value) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (var key in arr) {\r\n                if (arr.hasOwnProperty(key)) {\r\n                    var v = arr[key];\r\n                    if (v == value) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\nvar cutWithout = function cutWithout(obj: {} = {}, keys: any = null) {\r\n    var newObj = Object.create({});\r\n    var oldObj = Object.create(obj);\r\n    if (isArray(obj) || isObject(obj)) {\r\n        var list = [];\r\n        if (isArray(keys)) list = keys;\r\n        else if (isObject(keys)) {\r\n            for (var key in keys) {\r\n                if (keys.hasOwnProperty(key)) {\r\n                    list.push(keys[key]);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                if (!inArray(list, key)) {\r\n                    newObj[key] = oldObj[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return newObj;\r\n}\r\n\r\nvar copyWithout = function copyWithout(obj: {} = {}, keys: any = undefined) {\r\n    var newObj = Object.create({});\r\n    var oldObj = Object.create(obj);\r\n\r\n    if (isArray(obj) || isObject(obj)) {\r\n        var list = [];\r\n        if (isArray(keys)) list = keys;\r\n        else if (isObject(keys)) {\r\n            for (var key in keys) {\r\n                if (keys.hasOwnProperty(key)) {\r\n                    list.push(keys[key]);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                if (!inArray(list, key)) {\r\n                    newObj[key] = oldObj[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return newObj;\r\n};\r\n\r\n\r\nvar copyByList = function copyByList(obj: any, keys?: any) {\r\n    var newObj:any = {};\r\n    var oldObj = Object.create(obj);\r\n    if (isArray(obj) || isObject(obj)) {\r\n        var list = [];\r\n        if (isArray(keys)) list = keys;\r\n        else if (isObject(keys)) {\r\n            for (var key in keys) {\r\n                if (keys.hasOwnProperty(key)) {\r\n                    var v = keys[key];\r\n                    list.push(key);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                if (inArray(list, key)) {\r\n                    newObj[key] = oldObj[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return newObj;\r\n};\r\n\r\n/**\r\n * kiểm tra toàn bộ kiểu dử liệu của các phần tử con\r\n * @param {string} type kiểu dử liệu\r\n * @param {array} object đối tượng cần kiểm tra\r\n */\r\nvar checkAllElementType = function checkAllElementType(type: any, object: {} = {}) {\r\n    if (!(isString(type) || isArray(type)) || !(isArray(object) || isObject(object))) {\r\n        return false;\r\n    }\r\n    var types: Array<string> = [];\r\n    if (!isArray(type)) types = [type];\r\n    else types = type.slice(0);\r\n    var checked = false;\r\n    if (isArray(object)) {\r\n        let temp: Array<any> = Object.values(object);\r\n        return temp.length && temp.length == temp.filter(function (value) { return types.indexOf(getType(value)) >= 0; }).length;\r\n    }\r\n    var nO = Object.create(object);\r\n    for (var key in object) {\r\n        if (Object.hasOwnProperty.call(object, key)) {\r\n            if (types.indexOf(getType(nO[key])) < 0) return false;\r\n            checked = true;\r\n        }\r\n    }\r\n    return checked;\r\n\r\n}\r\n/**\r\n * trổn 2 mảng thành mảng kết hợp mới\r\n * @param {array[]} arrayArr mảng chứa các phần tử con là 1 mảng\r\n * @param {any[]} arrayAny mảng chứa các phần tử con có kiểu dử liệu là string hoặc number\r\n * @returns {array[]}\r\n */\r\nvar combineTwoArray = function combineTwoArray(arrayArr: Array<any>, arrayAny: Array<any>) {\r\n    var newArr = [];\r\n    for (var i = 0; i < arrayArr.length; i++) {\r\n        var arr = arrayArr[i];\r\n\r\n        for (var j = 0; j < arrayAny.length; j++) {\r\n            var any = arrayAny[j];\r\n            var v = arr.slice(0);\r\n            v.push(any);\r\n            newArr.push(v);\r\n        }\r\n    }\r\n    return newArr;\r\n};\r\n\r\n\r\n/**\r\n * lấy tổ hợp các các phần từ com\r\n * @param {array} arr1 \r\n * @param {array} arr2 \r\n */\r\nvar combineElenentsToArrList = function combineElenentsToArrList(...arrayList: any[]) {\r\n    var arrayList = [];\r\n    for (var index = 0; index < arguments.length; index++) {\r\n        var arg = arguments[index];\r\n        if (!isArray(arg) || !checkAllElementType(['string', 'number'], arg)) return [];\r\n\r\n        arrayList.push(arg);\r\n    }\r\n    if (arrayList.length < 2) return arrayList[0];\r\n    var results = [];\r\n    arrayList[0].map(function (str: Array<any>) {\r\n        results.push([str]);\r\n    });\r\n    for (var i = 1; i < arrayList.length; i++) {\r\n        var arr = arrayList[i];\r\n        results = combineTwoArray(results, arr);\r\n    }\r\n\r\n    return results;\r\n};\r\n\r\n/**\r\n * trộn 2 hoặc nhiều mảng thành mảng tổ hợp các phần tử dược nối với nhau bằng delimiter\r\n * @param {string} deliniter ký tự nối\r\n * @param {string[]} arr1 mảng 1\r\n * @param {string[]} arr2 mảng 2\r\n * @param {string[]} ...arrN mảng 2\r\n * \r\n * @returns {string[]}\r\n */\r\nvar combineElenentsJoinStringList = function combineElenentsJoinStringList(deliniter: string, arr1: Array<any>, arr2: Array<any>) {\r\n    var arrayList = [];\r\n    for (var index = 1; index < arguments.length; index++) {\r\n        var arg = arguments[index];\r\n\r\n        if (!isArray(arg) || !checkAllElementType(['string', 'number'], arg)) return [];\r\n\r\n        arrayList.push(arg);\r\n    }\r\n    if (arrayList.length < 2) return arr1;\r\n    var results = combineElenentsToArrList(...arrayList);\r\n    if (!isString(deliniter)) deliniter = '';\r\n    return results.map(function (arr: Array<string>) {\r\n        return arr.join(deliniter);\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * lay ra gia tri nho nhat\r\n * @param {array|object} obj doi tuong mang chua cac gia tri \r\n */\r\nvar minOf = function minOf(obj: any) {\r\n    var min = NaN;\r\n    if (arguments.length > 1 && !(isArray(obj) || isObject(obj))) {\r\n        obj = copyArray(arguments);\r\n    }\r\n    if (isArray(obj)) {\r\n        for (var index = 0; index < obj.length; index++) {\r\n            if (!isNumber(obj[index])) continue;\r\n            var n = Number(obj[index]);\r\n\r\n            if (isNaN(min) || !index)\r\n                min = n;\r\n            else if (n < min) min = n;\r\n        }\r\n    }\r\n    else if (isObject(obj)) {\r\n        var index = 0;\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                if (!isNumber(obj[index])) continue;\r\n                else {\r\n                    var n = Number(obj[index]);\r\n                    if (isNaN(min) || !index) min = n;\r\n                    else if (n < min) min = n;\r\n                }\r\n                index++;\r\n            }\r\n        }\r\n    }\r\n    return min;\r\n};\r\n\r\n/**\r\n * lay ra gia tri lon nhat\r\n * @param {array|object} obj doi tuong mang chua cac gia tri \r\n */\r\nvar maxOf = function maxOf(obj: any, ...abc: any) {\r\n    var min = NaN;\r\n    if (arguments.length > 1 && !(isArray(obj) || isObject(obj))) {\r\n        obj = copyArray(arguments);\r\n    }\r\n    if (isArray(obj)) {\r\n        for (var index = 0; index < obj.length; index++) {\r\n            if (!isNumber(obj[index])) continue;\r\n            else {\r\n                var n = Number(obj[index]);\r\n                if (isNaN(min) || !index) min = n;\r\n                else if (n > min) min = n;\r\n            }\r\n        }\r\n    }\r\n    else if (isObject(obj)) {\r\n        var index = 0;\r\n        for (var key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                if (!isNumber(obj[index])) continue;\r\n                else {\r\n                    var n = Number(obj[index]);\r\n                    if (isNaN(min) || !index) min = n;\r\n                    else if (n > min) min = n;\r\n                }\r\n                index++;\r\n            }\r\n        }\r\n    }\r\n    return min;\r\n};\r\n\r\nfunction _instanceof(left: any, right: any) {\r\n    if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\r\n        return !!right[Symbol.hasInstance](left);\r\n    } else {\r\n        return left instanceof right;\r\n    }\r\n};\r\n\r\nfunction _classCallCheck(instance: any, Constructor: any) {\r\n    if (!_instanceof(instance, Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\");\r\n    }\r\n};\r\n\r\nfunction _defineProperties(target: any, props: any) {\r\n    if (isArray(props)) {\r\n        for (var i = 0; i < props.length; i++) {\r\n            var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false;\r\n            descriptor.configurable = true;\r\n            if (\"value\" in descriptor) descriptor.writable = true;\r\n            Object.defineProperty(target, descriptor.key, descriptor);\r\n        }\r\n    }\r\n    else if (isObject(props)) {\r\n        for (var key in props) {\r\n            if (Object.hasOwnProperty.call(props, key)) {\r\n                var val = props[key];\r\n                Object.defineProperty(target, key, val);\r\n            }\r\n        }\r\n    }\r\n\r\n};\r\n\r\nfunction _createClass(Constructor: Function, protoProps: any, staticProps: any) {\r\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) _defineProperties(Constructor, staticProps);\r\n    return Constructor;\r\n};\r\n\r\nfunction _defineProperty(obj: any, key: string, value: any) {\r\n    if (key in obj) {\r\n        Object.defineProperty(obj, key, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true\r\n        });\r\n    } else {\r\n        obj[key] = value;\r\n    }\r\n    return obj;\r\n};\r\n\r\nvar checkType = function checkType(type: string, value: any, absolultely: boolean = false) {\r\n    if (typeof type !== \"string\" || !type) return false;\r\n    var tl = type.toLowerCase();\r\n    if (tl == \"float\") tl = 'number';\r\n    if (tl == 'mixed') return true;\r\n    var t = type.substr(0, 1).toUpperCase() + type.substr(1).toLowerCase();\r\n\r\n\r\n    var t2 = getType(value);\r\n\r\n    return absolultely ? t2 === tl : t2 == tl;\r\n};\r\n\r\n/**\r\n * Kiểm tra tồn tại key hay ko?\r\n * @param {object|array} obj doi tuong can kiem tra\r\n * @param {string} key \r\n * @returns {boolean}\r\n */\r\nfunction objectHasKey(obj: any, key: any) {\r\n    return (isObject(obj) && isString(key) && Object.hasOwnProperty.call(obj, key));\r\n}\r\n\r\n/**\r\n * kiểm tra sự tồn tại của thuộc tinh thông qua key và kiểu giá trị\r\n * @param {any} obj doi tuong can kiem tra\r\n * @param {string} key danh sach key kem kiey gia tri\r\n * @param {string} type kieu gia tri\r\n * @returns {boolean}\r\n */\r\nvar objectHasProperty = function objectHasProperty(obj: any, key: any, type: any = undefined) {\r\n    if (!isObject(obj) || isEmpty(obj) || typeof key == \"undefined\" || (!isString(key) && !isArray(key))) return false;\r\n    var keys = isArray(key) ? key : [key + (isString(type) ? \":\" + type : \"\")];\r\n    for (var i = 0; i < keys.length; i++) {\r\n        var k = keys[i];\r\n        var ks = k.split(':');\r\n        var kv = ks[0];\r\n        if (!objectHasKey(obj, kv)) return false;\r\n        if (ks.length == 2) {\r\n            var b = ks[1].split('|').map(function (t: string = \"\") { return t.trim(); }).filter(function (vl: string = \"\") { return vl.length > 0; });\r\n            if (b.length && !inArray(b, getType(obj[kv]))) return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * joi các mảng vào làm một\r\n * @param {string[]|number[]} target mảng đầu vào cần join\r\n * @returns {array}\r\n */\r\nfunction arrayJoin(target: Array<any>, ...args: any) {\r\n    if (!isArray(target)) target = [];\r\n    function addToTarget(arr: Array<any>) {\r\n        arr.map(function (vl) {\r\n            if (target.indexOf(vl) === -1) {\r\n                target.push(vl);\r\n            }\r\n        })\r\n    }\r\n    for (let i = 0; i < args.length; i++) {\r\n        const arg = args[i];\r\n        if (isArray(arg)) addToTarget(arg);\r\n        else if (isObject(arg)) addToTarget(objectValues(arg));\r\n        else addToTarget(arg);\r\n    }\r\n    return target;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * \r\n * @param obj \r\n * @param key \r\n * @param delimiter \r\n * @returns \r\n */\r\nvar getEl = function (obj: any, key: any = undefined, delimiter: any = undefined): any {\r\n    if (typeof obj == 'undefined') {\r\n        return null;\r\n    }\r\n    if (typeof key == 'undefined') {\r\n        return obj;\r\n    }\r\n    var tpo = getType(obj);\r\n    var tpk = getType(key);\r\n    if (tpo == 'array') {\r\n        var k = NaN;\r\n        if (tpk == 'number') {\r\n            k = key;\r\n        } else if (parseInt(key) != NaN) {\r\n            k = parseInt(key);\r\n        }\r\n        if (!isNaN(k)) {\r\n            if (typeof obj[k] != 'undefined') {\r\n                return obj[k];\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n};\r\n\r\nvar Num = {\r\n    rand: function (from: number = 0, to: number = 9999) {\r\n        if (!from) from = 0;\r\n        if (!to) to = 0;\r\n        if (from == 0) to++;\r\n        var rand = Math.floor(Math.random() * to) + from;\r\n        return rand;\r\n    },\r\n    currency: function (x: string) {\r\n        return x.toString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1\\.\");\r\n    }\r\n};\r\n\r\nvar convertedArray: Array<any> = [];\r\n\r\nvar Str = {\r\n    html_char_raw: ['%', '&', '=', '?', '#', '+', ':', '/', ' ', '\\n', '{', '}'],\r\n    html_char_enc: ['%25', '%26', '%3D', '%3F', '%23', '%2B', '%3A', '%2F', '+', '%0D%0A', '%7B', '%7D'],\r\n    urlcode: { '%': '%25', '&': '%26', '=': '%3D', '?': '%3F', '#': '%23', '+': '%2B', ':': '%3A', '/': '%2F', ' ': '%20', '\\n': '%0D%0A', '{': '%7B', '}': '%7D' },\r\n    unicode: {\r\n        js: [\"\\\\u00e0\", \"\\\\u00e1\", \"\\\\u1ea1\", \"\\\\u1ea3\", \"\\\\u00e3\", \"\\\\u00e2\", \"\\\\u1ea7\", \"\\\\u1ea5\", \"\\\\u1ead\", \"\\\\u1ea9\", \"\\\\u1eab\", \"\\\\u0103\", \"\\\\u1eb1\", \"\\\\u1eaf\", \"\\\\u1eb7\", \"\\\\u1eb3\", \"\\\\u1eb5\", \"\\\\u00e8\", \"\\\\u00e9\", \"\\\\u1eb9\", \"\\\\u1ebb\", \"\\\\u1ebd\", \"\\\\u00ea\", \"\\\\u1ec1\", \"\\\\u1ebf\", \"\\\\u1ec7\", \"\\\\u1ec3\", \"\\\\u1ec5\", \"\\\\u00ec\", \"\\\\u00ed\", \"\\\\u1ecb\", \"\\\\u1ec9\", \"\\\\u0129\", \"\\\\u00f2\", \"\\\\u00f3\", \"\\\\u1ecd\", \"\\\\u1ecf\", \"\\\\u00f5\", \"\\\\u00f4\", \"\\\\u1ed3\", \"\\\\u1ed1\", \"\\\\u1ed9\", \"\\\\u1ed5\", \"\\\\u1ed7\", \"\\\\u01a1\", \"\\\\u1edd\", \"\\\\u1edb\", \"\\\\u1ee3\", \"\\\\u1edf\", \"\\\\u1ee1\", \"\\\\u00f9\", \"\\\\u00fa\", \"\\\\u1ee5\", \"\\\\u1ee7\", \"\\\\u0169\", \"\\\\u01b0\", \"\\\\u1eeb\", \"\\\\u1ee9\", \"\\\\u1ef1\", \"\\\\u1eed\", \"\\\\u1eef\", \"\\\\u1ef3\", \"\\\\u00fd\", \"\\\\u1ef5\", \"\\\\u1ef7\", \"\\\\u1ef9\", \"\\\\u0111\", \"\\\\u00c0\", \"\\\\u00c1\", \"\\\\u1ea0\", \"\\\\u1ea2\", \"\\\\u00c3\", \"\\\\u00c2\", \"\\\\u1ea6\", \"\\\\u1ea4\", \"\\\\u1eac\", \"\\\\u1ea8\", \"\\\\u1eaa\", \"\\\\u0102\", \"\\\\u1eb0\", \"\\\\u1eae\", \"\\\\u1eb6\", \"\\\\u1eb2\", \"\\\\u1eb4\", \"\\\\u00c8\", \"\\\\u00c9\", \"\\\\u1eb8\", \"\\\\u1eba\", \"\\\\u1ebc\", \"\\\\u00ca\", \"\\\\u1ec0\", \"\\\\u1ebe\", \"\\\\u1ec6\", \"\\\\u1ec2\", \"\\\\u1ec4\", \"\\\\u00cc\", \"\\\\u00cd\", \"\\\\u1eca\", \"\\\\u1ec8\", \"\\\\u0128\", \"\\\\u00d2\", \"\\\\u00d3\", \"\\\\u1ecc\", \"\\\\u1ece\", \"\\\\u00d5\", \"\\\\u00d4\", \"\\\\u1ed2\", \"\\\\u1ed0\", \"\\\\u1ed8\", \"\\\\u1ed4\", \"\\\\u1ed6\", \"\\\\u01a0\", \"\\\\u1edc\", \"\\\\u1eda\", \"\\\\u1ee2\", \"\\\\u1ede\", \"\\\\u1ee0\", \"\\\\u00d9\", \"\\\\u00da\", \"\\\\u1ee4\", \"\\\\u1ee6\", \"\\\\u0168\", \"\\\\u01af\", \"\\\\u1eea\", \"\\\\u1ee8\", \"\\\\u1ef0\", \"\\\\u1eec\", \"\\\\u1eee\", \"\\\\u1ef2\", \"\\\\u00dd\", \"\\\\u1ef4\", \"\\\\u1ef6\", \"\\\\u1ef8\", \"\\\\u0110\"],\r\n        vi: [\"\\u00e0\", \"\\u00e1\", \"\\u1ea1\", \"\\u1ea3\", \"\\u00e3\", \"\\u00e2\", \"\\u1ea7\", \"\\u1ea5\", \"\\u1ead\", \"\\u1ea9\", \"\\u1eab\", \"\\u0103\", \"\\u1eb1\", \"\\u1eaf\", \"\\u1eb7\", \"\\u1eb3\", \"\\u1eb5\", \"\\u00e8\", \"\\u00e9\", \"\\u1eb9\", \"\\u1ebb\", \"\\u1ebd\", \"\\u00ea\", \"\\u1ec1\", \"\\u1ebf\", \"\\u1ec7\", \"\\u1ec3\", \"\\u1ec5\", \"\\u00ec\", \"\\u00ed\", \"\\u1ecb\", \"\\u1ec9\", \"\\u0129\", \"\\u00f2\", \"\\u00f3\", \"\\u1ecd\", \"\\u1ecf\", \"\\u00f5\", \"\\u00f4\", \"\\u1ed3\", \"\\u1ed1\", \"\\u1ed9\", \"\\u1ed5\", \"\\u1ed7\", \"\\u01a1\", \"\\u1edd\", \"\\u1edb\", \"\\u1ee3\", \"\\u1edf\", \"\\u1ee1\", \"\\u00f9\", \"\\u00fa\", \"\\u1ee5\", \"\\u1ee7\", \"\\u0169\", \"\\u01b0\", \"\\u1eeb\", \"\\u1ee9\", \"\\u1ef1\", \"\\u1eed\", \"\\u1eef\", \"\\u1ef3\", \"\\u00fd\", \"\\u1ef5\", \"\\u1ef7\", \"\\u1ef9\", \"\\u0111\", \"\\u00c0\", \"\\u00c1\", \"\\u1ea0\", \"\\u1ea2\", \"\\u00c3\", \"\\u00c2\", \"\\u1ea6\", \"\\u1ea4\", \"\\u1eac\", \"\\u1ea8\", \"\\u1eaa\", \"\\u0102\", \"\\u1eb0\", \"\\u1eae\", \"\\u1eb6\", \"\\u1eb2\", \"\\u1eb4\", \"\\u00c8\", \"\\u00c9\", \"\\u1eb8\", \"\\u1eba\", \"\\u1ebc\", \"\\u00ca\", \"\\u1ec0\", \"\\u1ebe\", \"\\u1ec6\", \"\\u1ec2\", \"\\u1ec4\", \"\\u00cc\", \"\\u00cd\", \"\\u1eca\", \"\\u1ec8\", \"\\u0128\", \"\\u00d2\", \"\\u00d3\", \"\\u1ecc\", \"\\u1ece\", \"\\u00d5\", \"\\u00d4\", \"\\u1ed2\", \"\\u1ed0\", \"\\u1ed8\", \"\\u1ed4\", \"\\u1ed6\", \"\\u01a0\", \"\\u1edc\", \"\\u1eda\", \"\\u1ee2\", \"\\u1ede\", \"\\u1ee0\", \"\\u00d9\", \"\\u00da\", \"\\u1ee4\", \"\\u1ee6\", \"\\u0168\", \"\\u01af\", \"\\u1eea\", \"\\u1ee8\", \"\\u1ef0\", \"\\u1eec\", \"\\u1eee\", \"\\u1ef2\", \"\\u00dd\", \"\\u1ef4\", \"\\u1ef6\", \"\\u1ef8\", \"\\u0110\"],\r\n        en: [\"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"a\", \"e\", \"e\", \"e\", \"e\", \"e\", \"e\", \"e\", \"e\", \"e\", \"e\", \"e\", \"i\", \"i\", \"i\", \"i\", \"i\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"o\", \"u\", \"u\", \"u\", \"u\", \"u\", \"u\", \"u\", \"u\", \"u\", \"u\", \"u\", \"y\", \"y\", \"y\", \"y\", \"y\", \"d\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"E\", \"E\", \"E\", \"E\", \"E\", \"E\", \"E\", \"E\", \"E\", \"E\", \"E\", \"I\", \"I\", \"I\", \"I\", \"I\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"O\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"U\", \"Y\", \"Y\", \"Y\", \"Y\", \"Y\", \"D\"],\r\n        upper: [\"À\", \"Á\", \"Ạ\", \"Ả\", \"Ã\", \"Â\", \"Ầ\", \"Ấ\", \"Ậ\", \"Ẩ\", \"Ẫ\", \"Ă\", \"Ằ\", \"Ắ\", \"Ặ\", \"Ẳ\", \"Ẵ\", \"È\", \"É\", \"Ẹ\", \"Ẻ\", \"Ẽ\", \"Ê\", \"Ề\", \"Ế\", \"Ệ\", \"Ể\", \"Ễ\", \"Ì\", \"Í\", \"Ị\", \"Ỉ\", \"Ĩ\", \"Ò\", \"Ó\", \"Ọ\", \"Ỏ\", \"Õ\", \"Ô\", \"Ồ\", \"Ố\", \"Ộ\", \"Ổ\", \"Ỗ\", \"Ơ\", \"Ờ\", \"Ớ\", \"Ợ\", \"Ở\", \"Ỡ\", \"Ù\", \"Ú\", \"Ụ\", \"Ủ\", \"Ũ\", \"Ư\", \"Ừ\", \"Ứ\", \"Ự\", \"Ử\", \"Ữ\", \"Ỳ\", \"Ý\", \"Ỵ\", \"Ỷ\", \"Ỹ\", \"Đ\"],\r\n        lower: [\"à\", \"á\", \"ạ\", \"ả\", \"ã\", \"â\", \"ầ\", \"ấ\", \"ậ\", \"ẩ\", \"ẫ\", \"ă\", \"ằ\", \"ắ\", \"ặ\", \"ẳ\", \"ẵ\", \"è\", \"é\", \"ẹ\", \"ẻ\", \"ẽ\", \"ê\", \"ề\", \"ế\", \"ệ\", \"ể\", \"ễ\", \"ì\", \"í\", \"ị\", \"ỉ\", \"ĩ\", \"ò\", \"ó\", \"ọ\", \"ỏ\", \"õ\", \"ô\", \"ồ\", \"ố\", \"ộ\", \"ổ\", \"ỗ\", \"ơ\", \"ờ\", \"ớ\", \"ợ\", \"ở\", \"ỡ\", \"ù\", \"ú\", \"ụ\", \"ủ\", \"ũ\", \"ư\", \"ừ\", \"ứ\", \"ự\", \"ử\", \"ữ\", \"ỳ\", \"ý\", \"ỵ\", \"ỷ\", \"ỹ\", \"đ\"]\r\n    },\r\n    clearUnicode: function (str: string = \"\") {\r\n        return this.replace(str, this.unicode.vi, this.unicode.en);\r\n    },\r\n    isSN: function (str: any = undefined) {\r\n        if (typeof str == 'undefined') return null;\r\n        var t = getType(str);\r\n        if (t == 'string' || t == 'number') return true;\r\n        return false;\r\n    },\r\n    /**\r\n     * thay the chuoi trong chuoi bang mot chuoi =)))))\r\n     * @param {string} str  chuoi dau vao\r\n     * @param {string|object|array} find  tham so tim kiem\r\n     * @param {string|object|array} replace  tham so thay the\r\n     */\r\n    replace: function (...a: any) {\r\n        // var a = arguments;\r\n        var t = a.length;\r\n        if (t == 0) return '';\r\n        if (typeof a[0] != 'string' || t < 2) {\r\n            return a[0];\r\n        }\r\n        var str = a[0];\r\n\r\n        var b = getType(a[1]);\r\n        if (this.isSN(a[1])) {\r\n            if (t >= 3 && this.isSN(a[2])) {\r\n                var obj = Object.create({});\r\n                obj[a[1]] = a[2];\r\n                str = this.replaceByObj(str, obj);\r\n            }\r\n        } else if (b == 'array') {\r\n            if (t >= 3 && getType(a[2]) == 'array') {\r\n                str = this.replaceByArr(str, a[1], a[2]);\r\n            } else if (t >= 3 && getType(a[2]) == 'string') {\r\n                var obj = Object.create({}),\r\n                    val = a[2];\r\n                var d = a[1];\r\n                for (var k in d) {\r\n                    obj[d[k]] = val;\r\n                }\r\n                str = this.replaceByObj(str, obj);\r\n            }\r\n        } else if (b == 'object') {\r\n            str = this.replaceByObj(str, a[1]);\r\n        }\r\n        return str;\r\n    },\r\n    replaceByArr: function (...a: any) {\r\n        var t = a.length;\r\n        if (t == 0) return '';\r\n        if (typeof a[0] != 'string' || t < 2) {\r\n            return a[0];\r\n        }\r\n        var str = a[0];\r\n        var b = getType(a[1]);\r\n        if (b == 'object') {\r\n            str = this.replaceByObj(str, a[1]);\r\n        } else if (b == 'array') {\r\n            var obj = emptyObject();\r\n            if (t >= 3) {\r\n                var f = getType(a[2]);\r\n                if (f == 'string') {\r\n                    for (var k in a[1]) {\r\n                        obj[a[1][k]] = a[2];\r\n                    }\r\n                } else if (f == 'array') {\r\n                    var e = a[1].length,\r\n                        g = a[2].length;\r\n                    var max = (e > g) ? e : g;\r\n                    for (var i = 0; i < max; i++) {\r\n                        obj[a[1][i]] = a[2][i];\r\n                    }\r\n                }\r\n            }\r\n            str = this.replaceByObj(str, obj);\r\n        }\r\n        return str;\r\n    },\r\n    replaceByObj: function (...a: any) {\r\n        // var a = arguments;\r\n        var t = a.length;\r\n        if (t == 0) return '';\r\n        if (typeof a[0] != 'string' || t < 2) {\r\n            return a[0];\r\n        }\r\n        var str = a[0];\r\n        var b = getType(a[1]);\r\n        if (b == 'object') {\r\n            var max = null;\r\n            if (typeof a[2] == 'number') {\r\n                max = a[2];\r\n            }\r\n            var i = 1;\r\n            var sts = a[1];\r\n            for (var key in sts) {\r\n                var txt = sts[key];\r\n                str = this.preg_replace(key, txt, str);\r\n                if (max && i >= max) break;\r\n                i++;\r\n            }\r\n        }\r\n        return str;\r\n    },\r\n    escapeRegExp: function (str: any = undefined) {\r\n        var s = \"\" + str + \"\";\r\n        return s.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\r\n    },\r\n\r\n    preg_replace: function (find: string = \"\", replace: string = \"\", str: string = \"\") {\r\n        var str = \"\" + str + \"\";\r\n        return str.replace(new RegExp(this.escapeRegExp(find), 'g'), replace);\r\n    },\r\n\r\n    /**\r\n     * Tạo một chuỗi random Ngẫu nhiên\r\n     * @param {string} charList chuỗi ký tự bổ xung\r\n     * @returns {string}\r\n     */\r\n    rand: function (charList: any = undefined) {\r\n        var st = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n        if (charList && isString(charList)) st = st + String(charList);\r\n        var sp = st.split('');\r\n        var l = sp.length - 1;\r\n        var s = '';\r\n        for (var i = 0; i < 32; i++) {\r\n            s += sp[Num.rand(0, l)];\r\n        }\r\n        return s;\r\n    },\r\n    /**\r\n     * biến đổ chuỗi thành slug\r\n     * @param {string} str chuỗi đầu vào\r\n     * @param {string} joinKey ký tự nối\r\n     * @returns {string}\r\n     */\r\n    camelToSlug: function (str: string = \"\", joinKey: string = \"\") {\r\n        // if(typeof str == \"undefined\") str = \"\";\r\n        var st = 'BCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n        var sp = st.split('');\r\n        var l = sp.length - 1;\r\n        var s = '';\r\n        var find: any[] = [];\r\n        var replace: any[] = [];\r\n        var k = isString(joinKey) ? joinKey : \"-\";\r\n        sp.map(function (c) {\r\n            find.push(c);\r\n            replace.push(k + c.toLowerCase());\r\n        });\r\n        return this.replace(str, find, replace);\r\n    },\r\n    upperToWord: function (str: any = undefined) {\r\n        var st = 'abcdefghijklmnopqrstuvwxyz';\r\n        var sp = st.split('');\r\n        var l = sp.length - 1;\r\n        var s = this.clearUnicode(String(str));\r\n        var find: any = [];\r\n        var replace = \"\";\r\n        sp.map(function (c) {\r\n            find.push(c);\r\n        });\r\n\r\n        return this.lower(s.substr(0, 1)) + this.lower(this.replace(s.substr(1), find, replace));\r\n    },\r\n\r\n\r\n    urlencode: function (str: any = undefined) {\r\n        var t = this.html_char_raw.length;\r\n        for (var i = 0; i < t; i++) str = this.replace(str, this.html_char_raw[i], this.html_char_enc[i]);\r\n        return str;\r\n    },\r\n    urldecode: function (str: any = undefined) {\r\n        var t = this.html_char_raw.length;\r\n        for (var i = t - 1; i >= 0; i--) str = this.replace(str, this.html_char_enc[i], this.html_char_raw[i]);\r\n        return str;\r\n    },\r\n    eval: function (template: any = undefined, data: any = undefined) {\r\n        var t: string = typeof data;\r\n        var tpl = template;\r\n        if (t == 'object' || t == \"array\") {\r\n            data = this.convertTextObject({}, data);\r\n            for (var k in data) {\r\n                var val = data[k];\r\n                if (val === null) val = '';\r\n                var f = \"\\{\\$\" + k + \"\\}\";\r\n                tpl = this.replace(tpl, f, val);\r\n            }\r\n        }\r\n        return tpl;\r\n    },\r\n    convertTextObject: function (root: any, object: any, name: string = \"\", joinKey: any = undefined) {\r\n\r\n        if (inArray(convertedArray, object)) return root;\r\n\r\n        for (var key in object) {\r\n            if (object.hasOwnProperty(key)) {\r\n                if (typeof joinKey != \"string\") joinKey = \".\";\r\n                var val = object[key];\r\n                var t: string = typeof val;\r\n                var k = (typeof name != \"undefined\" && (\"\" + name).length) ? name + joinKey + key : key;\r\n                if (val != null && (t == 'object' || t == \"array\")) {\r\n                    root = this.convertTextObject(root, val, k, joinKey);\r\n                } else {\r\n                    root[k] = val;\r\n                }\r\n            }\r\n        }\r\n        convertedArray.push(object);\r\n        return root;\r\n    },\r\n    upper: function (str: any = undefined) {\r\n        if (typeof str == \"undefined\") return null;\r\n        if (isString(str)) {\r\n            var s = str.toUpperCase();\r\n            return this.replace(s, this.unicode.lower, this.unicode.upper);\r\n        }\r\n        else if ((isObject(str) && typeof str.length != \"undefined\") || isArray(str)) {\r\n            for (var i = 0; i < str.length; i++) {\r\n                str[i] = this.upper(str[i]);\r\n            }\r\n            return str;\r\n        }\r\n        else if (isObject(str)) {\r\n            for (var key in str) {\r\n                if (str.hasOwnProperty(key)) {\r\n                    var st = str[key];\r\n                    str[key] = this.upper(st);\r\n                }\r\n            }\r\n            return str;\r\n\r\n        }\r\n    },\r\n    lower: function (str?: any) {\r\n        if (typeof str == \"undefined\") return null;\r\n        if (isString(str)) {\r\n            var s = str.toLowerCase();\r\n            str = this.replace(s, this.unicode.upper, this.unicode.lower);\r\n        }\r\n        else if ((isObject(str) && typeof str.length != \"undefined\") || isArray(str)) {\r\n            for (var i = 0; i < str.length; i++) {\r\n                str[i] = this.upper(str[i]);\r\n            }\r\n        }\r\n        else if (isObject(str)) {\r\n            for (var key in str) {\r\n                if (str.hasOwnProperty(key)) {\r\n                    var st = str[key];\r\n                    str[key] = this.upper(st);\r\n                }\r\n            }\r\n        }\r\n\r\n        return str;\r\n    },\r\n    ucfirst: function (str: any = undefined) {\r\n        if (isString(str)) {\r\n            if (str.length) {\r\n                var first = str.substring(0, 1);\r\n                str = this.upper(first) + str.substring(1);\r\n            }\r\n        }\r\n        else if ((isObject(str) && typeof str.length != \"undefined\") || isArray(str)) {\r\n            for (var i = 0; i < str.length; i++) {\r\n                str[i] = this.ucfirst(str[i]);\r\n            }\r\n        }\r\n        else if (isObject(str)) {\r\n            for (var key in str) {\r\n                if (str.hasOwnProperty(key)) {\r\n                    str[key] = this.ucfirst(str[key]);\r\n                }\r\n            }\r\n        }\r\n        return str;\r\n    },\r\n    ucword: function (str: any = undefined) {\r\n        var self = this;\r\n        if (isString(str)) {\r\n            if (str.length) {\r\n                str = str.split(\" \").map(function (s: string) { return self.ucfirst(s) }).join(\" \");\r\n            }\r\n        }\r\n        else if ((isObject(str) && typeof str.length != \"undefined\") || isArray(str)) {\r\n            for (var i = 0; i < str.length; i++) {\r\n                str[i] = this.ucword(str[i]);\r\n            }\r\n        }\r\n        else if (isObject(str)) {\r\n            for (var key in str) {\r\n                if (str.hasOwnProperty(key)) {\r\n                    str[key] = this.ucword(str[key]);\r\n                }\r\n            }\r\n        }\r\n        return str;\r\n    },\r\n\r\n    htmlentities: function (str: any = undefined) {\r\n        return this.eval(str, {\r\n            \"<\": \"&lt;\",\r\n            \">\": \"&gt;\",\r\n            \"\\\"\": \"&quote;\",\r\n            \"&\": \"&amp;\"\r\n        });\r\n    },\r\n    formSlug: function (str: any = undefined) {\r\n        return typeof str != \"string\" ? str : this.replace(this.replace(str, \"[]\", '.*'), { \"[\": \".\", \"]\": \"\" });\r\n    },\r\n    slug: function (str: any = undefined, key: any = undefined) {\r\n        if (!key) key = '-';\r\n        var s = String(str);\r\n        var l = 'BCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n        var list = [];\r\n        var n = 0;\r\n        var t = this.replace(this.replace(\r\n            this.clearUnicode(this.lower(s)),\r\n            \"[]{}();:'\\\"\\\\|,./?~!@#$%^&*+=\".split(\"\"),\r\n            \"-\"\r\n        ), '--', '-');\r\n        for (var i = 0; i < t.length; i++) {\r\n            var st = t[i];\r\n            if (l.indexOf(st) == -1) {\r\n                if (typeof list[n] != \"undefined\") {\r\n                    if (l.indexOf(t[i - 1]) >= 0) n++;\r\n                }\r\n            } else {\r\n                if (typeof list[n] == \"undefined\") {\r\n                    list[n] = st;\r\n                } else {\r\n                    list[n] += st;\r\n                }\r\n            }\r\n        };\r\n        return list.join(key);\r\n    },\r\n    slugToCamel: function (str: any = undefined) {\r\n        if (isString(str)) {\r\n            var self = this;\r\n            var t = this.replace(\r\n                this.replace(\r\n                    this.clearUnicode(str),\r\n                    \"[]{}();:'\\\"\\\\|,./?~!@#$%^&*+=\".split(\"\"),\r\n                    \"-\"\r\n                ),\r\n                '--',\r\n                '-'\r\n            ).split(\"-\")\r\n                .map(s => s.trim())\r\n                .filter(s => s.length > 0)\r\n                .map((s: string, i: number) => i > 0 ? self.ucfirst(s) : s)\r\n                .join(\"\");\r\n            str = t;\r\n\r\n\r\n        }\r\n        return str;\r\n    },\r\n    objectKey: function (str: string, key?: string) {\r\n        if (!key) key = '_';\r\n        var s = String(str);\r\n        var l = '$ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n        var list = [];\r\n        var n = 0;\r\n        var t = this.replace(this.replace(\r\n            this.clearUnicode(s),\r\n            \"[]{}();:'\\\"\\\\|,./?~!@#$%^&*+=\".split(\"\"),\r\n            \"-\"\r\n        ), '--', '-');\r\n        for (var i = 0; i < t.length; i++) {\r\n            var st = t[i];\r\n            if (l.indexOf(st) == -1) {\r\n                if (typeof list[n] != \"undefined\") {\r\n                    if (l.indexOf(t[i - 1]) >= 0) n++;\r\n                }\r\n            } else {\r\n                if (typeof list[n] == \"undefined\") {\r\n                    list[n] = st;\r\n                } else {\r\n                    list[n] += st;\r\n                }\r\n            }\r\n        };\r\n        return list.join(key);\r\n    },\r\n    orderCharList: [\r\n        \" \", \"\\\"\", \"#\", \"$\", \"%\", \"&\", \"'\", \"(\", \")\", \"*\", \"+\", \",\", \"-\", \".\", \"/\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \":\", \";\", \"<\", \"=\", \">\", \"?\", \"@\",\r\n        \"A\", \"À\", \"Á\", \"Ạ\", \"Ả\", \"Ã\", \"Â\", \"Ầ\", \"Ấ\", \"Ậ\", \"Ẩ\", \"Ẫ\", \"Ă\", \"Ằ\", \"Ắ\", \"Ặ\", \"Ẳ\", \"Ẵ\",\r\n        \"B\", \"C\", \"D\", \"Đ\",\r\n        \"E\", \"È\", \"É\", \"Ẹ\", \"Ẻ\", \"Ẽ\", \"Ê\", \"Ề\", \"Ế\", \"Ệ\", \"Ể\", \"Ễ\",\r\n        \"F\", \"G\", \"H\",\r\n        \"I\", \"Ì\", \"Í\", \"Ị\", \"Ỉ\", \"Ĩ\",\r\n        \"K\", \"L\", \"M\", \"N\",\r\n        \"O\", \"Ò\", \"Ó\", \"Ọ\", \"Ỏ\", \"Õ\", \"Ô\", \"Ồ\", \"Ố\", \"Ộ\", \"Ổ\", \"Ỗ\", \"Ơ\", \"Ờ\", \"Ớ\", \"Ợ\", \"Ở\", \"Ỡ\",\r\n        \"P\", \"Q\", \"R\", \"S\", \"T\",\r\n        \"U\", \"Ù\", \"Ú\", \"Ụ\", \"Ủ\", \"Ũ\", \"Ư\", \"Ừ\", \"Ứ\", \"Ự\", \"Ử\", \"Ữ\",\r\n        \"V\", \"W\", \"X\",\r\n        \"Y\", \"Ỳ\", \"Ý\", \"Ỵ\", \"Ỷ\", \"Ỹ\",\r\n        \"z\",\r\n        \"[\", \"\\\\\", \"]\", \"^\", \"_\",\r\n        \"a\", \"à\", \"á\", \"ạ\", \"ả\", \"ã\", \"â\", \"ầ\", \"ấ\", \"ậ\", \"ẩ\", \"ẫ\", \"ă\", \"ằ\", \"ắ\", \"ặ\", \"ẳ\", \"ẵ\",\r\n        \"b\", \"c\",\r\n        \"d\", \"d\",\r\n        \"e\", \"è\", \"é\", \"ẹ\", \"ẻ\", \"ẽ\", \"ê\", \"ề\", \"ế\", \"ệ\", \"ể\", \"ễ\",\r\n        \"f\", \"g\", \"h\",\r\n        \"i\", \"ì\", \"í\", \"ị\", \"ỉ\", \"ĩ\",\r\n        \"k\", \"l\", \"m\", \"n\",\r\n        \"o\", \"ò\", \"ó\", \"ọ\", \"ỏ\", \"õ\", \"ô\", \"ồ\", \"ố\", \"ộ\", \"ổ\", \"ỗ\", \"ơ\", \"ờ\", \"ớ\", \"ợ\", \"ở\", \"ỡ\",\r\n        \"p\", \"q\", \"r\", \"s\", \"t\",\r\n        \"u\", \"ù\", \"ú\", \"ụ\", \"ủ\", \"ũ\", \"ư\", \"ừ\", \"ứ\", \"ự\", \"ử\", \"ữ\",\r\n        \"v\", \"w\", \"x\", \"y\", \"ỳ\", \"ý\", \"ỵ\", \"ỷ\", \"ỹ\",\r\n        \"z\"\r\n    ],\r\n    compare: function (str1, str2) {\r\n        var i1n = isNumber(str1)\r\n        var i2n = isNumber(str2);\r\n        if (i1n && i2n) {\r\n            return str1 > str2 ? 1 : (str1 == str2 ? 0 : -1)\r\n\r\n        }\r\n        str1 = String(str1);\r\n        str2 = String(str2);\r\n        var s1l = str1.length, s2l = str2.length;\r\n        var max = s1l < s2l ? s1l : s2l;\r\n        for (var i = 0; i < max; i++) {\r\n            var c1 = this.orderCharList.indexOf(str1[i]);\r\n            var c2 = this.orderCharList.indexOf(str2[i]);\r\n\r\n            if (c2 == -1 || c1 > c2) return 1;\r\n            if (c1 == -1 || c1 < c2) return -1;\r\n\r\n        }\r\n        return s1l > s2l ? 1 : (s1l < s2l ? -1 : 0);\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\nvar date = function (format: any = undefined, lang: any = undefined) {\r\n    var offset = 0;\r\n    var d = new Date();\r\n    var t = emptyObject();\r\n    var l = String(lang).toLowerCase() != 'en' ? 'vi' : 'en';\r\n\r\n    var dl = newObj({\r\n        en: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\r\n        vi: ['Chủ Nhật', 'Thứ Hai', 'Thứ Ba', 'Thứ Tư', 'Thứ Năm', 'Thứ Sáu', 'Thứ Bảy']\r\n    });\r\n    var ml = {\r\n        en: [\"\", \"Jan\"]\r\n    };\r\n\r\n\r\n    // convert to msec\r\n    // add local time zone offset\r\n    // get UTC time in msec\r\n    var utc = d.getTime() + (d.getTimezoneOffset() * 60000);\r\n\r\n    // create new Date object for different city\r\n    // using supplied offset\r\n    d = new Date(utc + (3600000 * offset));\r\n\r\n\r\n\r\n    t.ms = d.getMilliseconds();\r\n    t.Y = d.getFullYear();\r\n    t.y = d.getFullYear() - 1900;\r\n    t.H = d.getHours();\r\n    t.i = d.getMinutes();\r\n    t.m = d.getMonth() + 1;\r\n    t.s = d.getSeconds();\r\n    t.time = d.getTime();\r\n    t.d = d.getDate();\r\n    t.w = dl[l][d.getDay()];\r\n    if (!format) return t;\r\n    var f = getType(format);\r\n    if (f == 'string') {\r\n        var txt = format;\r\n        txt = Str.replace(txt, 'ms', t.ms);\r\n        txt = Str.replace(txt, 'time', t.time);\r\n        txt = Str.replace(txt, t);\r\n        return txt;\r\n    }\r\n    return null;\r\n};\r\nvar getTimeStamp = function () {\r\n    var offset = 0;\r\n    var d = new Date();\r\n    var utc = d.getTime() + (d.getTimezoneOffset() * 60000);\r\n\r\n    // create new Date object for different city\r\n    // using supplied offset\r\n    d = new Date(utc + (3600000 * offset));\r\n\r\n\r\n\r\n    return d.getTime();\r\n};\r\n\r\n/**\r\n * \r\n * @param {object} target đối  tượng cần gán thuộc tính\r\n * @param {object|string} key key hoặc object thuộc tính\r\n * @param {*} value giá trị\r\n * @returns {object}\r\n */\r\n const assignValue = (target: (Array<any>|{[x:string]:any}|any), key?: (string|number|Array<any>|{[x:string]:any}), value?: any) => {\r\n    if (!isArray(target) && !isObject(target)) return target;\r\n    if (isObject(key)) {\r\n        let objData: any = key;\r\n        if (isArray(target)) {\r\n            console.warn(\"Target khong cung kieu voi object\");\r\n            var a = target;\r\n            target = assignValue({}, a);\r\n        }\r\n        for (var k in objData) {\r\n            if (objData.hasOwnProperty(k)) {\r\n\r\n                var s13 = String(k).substr(0, 13);\r\n                if (s13 == \"______rand_id\" || s13 == \"______unique_\") {\r\n\r\n                } else {\r\n                    var v = objData[k];\r\n                    assignValue(target, k, v);\r\n                }\r\n\r\n\r\n            }\r\n        }\r\n    } else if (isArray(key)) {\r\n        let arrData: any[] = key as Array<any>;\r\n        for (let i = 0; i < arrData.length; i++) {\r\n            const vl = arrData[i];\r\n            assignValue(target, i, vl);\r\n        }\r\n    }\r\n    else if ((isString(key) || isNumber(key)) && String(key).length) {\r\n        let sk = String(key);\r\n        let ak: any = key;\r\n        var s13 = sk.substr(0, 13);\r\n        if (s13 == \"______rand_id\" || s13 == \"______unique_\") {\r\n            // kong6 làm gì\r\n        } else if (String(key).substr(0, 1) == '@') {\r\n            var f = sk.substr(1);\r\n            if (typeof target[f] == \"function\") {\r\n                target[f].apply(target, isArray(value) ? value : [value]);\r\n            }\r\n        }\r\n        else if (isObject(value)) {\r\n            if (value.constructor == Object) {\r\n                if (typeof target[ak] != \"object\") target[ak] = {};\r\n                assignValue(target[ak], value);\r\n            }\r\n            else {\r\n                target[ak] = value;\r\n            }\r\n        }\r\n        else if (isArray(value)) {\r\n            if (typeof target[ak] == \"undefined\" || !isArray(target[ak])) {\r\n                target[ak] = [];\r\n                assignValue(target[ak], value);\r\n            } else {\r\n                assignValue(target[ak], value);\r\n            }\r\n        }\r\n        else {\r\n            target[ak] = value;\r\n        }\r\n    }\r\n    return target;\r\n};\r\n\r\nconst assignWithout = (target: any, source?: any, ...ignore: any[]) => {\r\n    if (typeof target != \"object\" || typeof source != \"object\") return target;\r\n    var il = [];\r\n    for (var index = 0; index < ignore.length; index++) {\r\n        var list = ignore[index];\r\n        if (isArray(list)) {\r\n            for (var i = 0; i < list.length; i++) {\r\n                let field = list[i];\r\n                il.push(field);\r\n            }\r\n        } else if (isObject(list)) {\r\n            for (var field in list) {\r\n                if (list.hasOwnProperty(field)) {\r\n                    var val = list[field];\r\n                    il.push(field);\r\n                }\r\n            }\r\n        }else{\r\n            il.push(list)\r\n        }\r\n    }\r\n    for (var key in source) {\r\n        if (source.hasOwnProperty(key)) {\r\n            var val = source[key];\r\n            if (!inArray(il, key)) {\r\n                assignValue(target, key, val);\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n};\r\n\r\n\r\n/**\r\n * \r\n * @param {object} target đối  tượng cần gán thuộc tính\r\n * @param {object|string} key key hoặc object thuộc tính\r\n * @param {*} value giá trị\r\n * @returns {object}\r\n */\r\n const assignIfNotExists = (target: (Array<any>|{[x:string]:any}|any), key?: (string|number|Array<any>|{[x:string]:any}), value?: any) => {\r\n    if (!isArray(target) && !isObject(target)) return target;\r\n    if (isObject(key)) {\r\n        let objData: any = key;\r\n        if (isArray(target)) {\r\n            console.warn(\"Target khong cung kieu voi object\");\r\n            var a = target;\r\n            target = assignIfNotExists({}, a);\r\n        }\r\n        for (var k in objData) {\r\n            if (Object.prototype.hasOwnProperty.call(objData, k)) {\r\n                var v = objData[k];\r\n                assignIfNotExists(target, k, v);\r\n\r\n\r\n            }\r\n        }\r\n    } else if (isArray(key)) {\r\n        let arrData: any[] = key as Array<any>;\r\n        for (let i = 0; i < arrData.length; i++) {\r\n            const vl = arrData[i];\r\n            assignIfNotExists(target, i, vl);\r\n        }\r\n    }\r\n    else if ((isString(key) || isNumber(key)) && String(key).length) {\r\n        let sk = String(key);\r\n        let ak: any = key;\r\n        if (String(key).substr(0, 1) == '@') {\r\n            var f = sk.substr(1);\r\n            if (typeof target[f] == \"function\") {\r\n                target[f].apply(target, isArray(value) ? value : [value]);\r\n            }\r\n        }\r\n        else if (isObject(value)) {\r\n            if (value.constructor == Object) {\r\n                if (typeof target[ak] != \"object\") target[ak] = {};\r\n                assignIfNotExists(target[ak], value);\r\n            }\r\n            else if(!objectHasKey(target, sk)){\r\n\r\n                target[ak] = value;\r\n            }\r\n        }\r\n        else if (isArray(value)) {\r\n            if (typeof target[ak] == \"undefined\" || !isArray(target[ak])) {\r\n                target[ak] = [];\r\n                assignIfNotExists(target[ak], value);\r\n            } else {\r\n                assignIfNotExists(target[ak], value);\r\n            }\r\n        }\r\n        else if(!objectHasKey(target, sk)){\r\n            target[ak] = value;\r\n        }\r\n    }\r\n    return target;\r\n};\r\n\r\n\r\nconst objectAssignKeyValue = (target: {[key:string]:any}, key:string|number, value: any, filter?: ((key: string|number, value:any, resolve?:(value)=>any, reject?:(...args:any[])=>any) => any) | string) => {\r\n    let stt = true;\r\n    let resolveValue = value;\r\n    let resolveStt = false;\r\n    const resolve = (val) => {\r\n        resolveValue = val;\r\n        resolveStt = true;\r\n        return val;\r\n    };\r\n    const reject = (...args:any[]) => {\r\n        stt = false;\r\n    }\r\n    if(typeof filter == \"function\"){\r\n        let rs = filter(key, value, resolve, reject);\r\n        if(resolveStt){\r\n            target[key] = resolveValue;\r\n        }else if(stt){\r\n            if(isBoolean(rs)){\r\n                if(isBoolean(value)) target[key] = rs;\r\n                else if(rs === true) target[key] = value;\r\n            }else if(typeof rs != \"undefined\") target[key] = value;\r\n        }\r\n    }else if(isString(filter)){\r\n        if(getType(value) == filter){\r\n            target[key] = value;\r\n        }\r\n    }else{\r\n        target[key] = value;\r\n    }\r\n    return value;\r\n};\r\nconst objectAssign = (target: {[key:string]:any}, obj: {[key:string]:any}, filter?: (key: string|number, value:any, resolve?:(value)=>any, reject?:(...args:any[])=>any) => any) => {\r\n    if (!isArray(target) && !isObject(target)) return target;\r\n    if (isObject(obj)) {\r\n        let objData: any = obj;\r\n        if (isArray(target)) {\r\n            console.warn(\"Target khong cung kieu voi object\");\r\n            var a = target;\r\n            target = assignValue({}, a);\r\n        }\r\n        for (var k in objData) {\r\n            if (objData.hasOwnProperty(k)) {\r\n\r\n                var v = objData[k];\r\n                objectAssignKeyValue(target, k, v, filter);\r\n                \r\n\r\n\r\n            }\r\n        }\r\n    } else if (isArray(obj)) {\r\n        let arrData: any[] = obj as Array<any>;\r\n        for (let i = 0; i < arrData.length; i++) {\r\n            const vl = arrData[i];\r\n            objectAssignKeyValue(target, i, vl, filter);\r\n        }\r\n    }\r\n    return target;\r\n};\r\n\r\nvar rgbToHex = function (rgb: any = undefined) {\r\n    var hex = parseInt(rgb).toString(16);\r\n    if (hex.length < 2) {\r\n        hex = \"0\" + hex;\r\n    }\r\n    return hex;\r\n};\r\nvar colorToHex = function (r: any = undefined, g: any = undefined, b: any = undefined) {\r\n    var red = rgbToHex(r);\r\n    var green = rgbToHex(g);\r\n    var blue = rgbToHex(b);\r\n    return \"#\" + red + green + blue;\r\n};\r\n\r\nvar invertHexColor = function invertHexColor(hexTripletColor: any = undefined) {\r\n    var color = hexTripletColor;\r\n    color = color.substring(1); // remove #\r\n    color = parseInt(color, 16); // convert to integer\r\n    color = 0xFFFFFF ^ color; // invert three bytes\r\n    color = color.toString(16); // convert to hex\r\n    color = (\"000000\" + color).slice(-6); // pad with leading zeros\r\n    color = \"#\" + color; // prepend #\r\n    return color;\r\n}\r\n\r\n/**\r\n * xửu lý hàng đợi\r\n * @param {function} work hàm thục thi công việc\r\n * @param {Number} delay thời gian giữa 2 lần chạy task\r\n * @param {Number} step số lần thực hiện công việc nếu chưa bị reject hay resolve\r\n */\r\nclass Queue {\r\n    status: string = \"\";\r\n    result: any;\r\n\r\n    e: (...args:any[]) =>any;\r\n    \r\n    constructor(work: (resolve?:(...args:any[])=>any, rejected?:(...args:any[])=>any, turn?:number) => any, delay?: number, step?: number) {\r\n        if (typeof work == \"undefined\") return this;\r\n        this.status = \"pending\";\r\n        this.result = null;\r\n        var d = (typeof delay == \"undefined\" || !isNumber(delay) || delay < 1) ? 10 : delay;\r\n        var s = (typeof step == \"undefined\" || !isNumber(step) || step < 0) ? -1 : step;\r\n        var self = this;\r\n        var properties = newObj({\r\n            timeDelay: d,\r\n            stepCount: s,\r\n            resolved: false,\r\n            rejected: false,\r\n            cancelled: false,\r\n            stopped: false,\r\n            status: \"pending\",\r\n            timeId: null,\r\n            turn: 1,\r\n            count: 1\r\n        });\r\n        var methods = newObj({\r\n            then: function (rs: any = undefined) {\r\n                // App.log(rs);\r\n            },\r\n            catch: function (err: any = undefined) {\r\n                console.log(err);\r\n            },\r\n            clear: function () {\r\n                if (properties.timeId) {\r\n                    clearTimeout(properties.timeId);\r\n                    self.status = properties.status;\r\n                }\r\n\r\n            },\r\n            run: function () {\r\n                var comtext = this;\r\n                var time = properties.timeDelay || 10;\r\n                var stop = properties.stepCount;\r\n                var resolve = function (rs: any = undefined) {\r\n                    properties.resolved = rs;\r\n                    if (properties.status == \"pending\") {\r\n                        properties.status = \"resolved\";\r\n                        self.result = rs;\r\n                        comtext.clear();\r\n                        return comtext.then(rs);\r\n                    }\r\n                    comtext.clear();\r\n                    return true;\r\n\r\n                };\r\n                var reject = function (err: any = undefined) {\r\n                    properties.rejected = err;\r\n                    if (properties.status == \"pending\") {\r\n                        properties.status = \"rejected\";\r\n                        self.result = err;\r\n                        comtext.catch(err);\r\n                    }\r\n                    comtext.clear();\r\n                    return err;\r\n\r\n                };\r\n                var runtask = function () {\r\n\r\n                    var id = setTimeout(() => {\r\n                        if (properties.stepCount > -1 && properties.turn > properties.stepCount) {\r\n                            properties.status = \"stoped\";\r\n                            properties.stopped = \"time out\";\r\n                            comtext.clear();\r\n                            return false;\r\n                        } else if (properties.status != \"pending\") {\r\n                            return false;\r\n                        } else {\r\n                            try {\r\n                                var stt = work(resolve, reject, properties.turn);\r\n                                if (stt !== undefined) {\r\n                                    if (properties.status == \"pending\") {\r\n                                        comtext.stop();\r\n                                        return false;\r\n                                    }\r\n                                }\r\n                                properties.turn++;\r\n                            } catch (error) {\r\n                                comtext.stop();\r\n                                comtext.catch(error);\r\n                                return false;\r\n                            }\r\n                        }\r\n\r\n                        properties.count++;\r\n                        runtask();\r\n                        return true;\r\n                    }, time);\r\n                    properties.timeId = id;\r\n                };\r\n                runtask();\r\n            },\r\n            stop: function () {\r\n                properties.stepCount = 0;\r\n                properties.status = \"stopped\";\r\n                this.clear();\r\n            },\r\n            delay: function (delay: any = undefined) {\r\n                if (typeof delay == \"undefined\" || !isNumber(delay) || delay < 1) return;\r\n                properties.timeDelay = delay;\r\n                this.clear();\r\n                this.run();\r\n            },\r\n            step: function (step: any = undefined) {\r\n                if (typeof step == \"undefined\" || !isNumber(step) || step < -1 || step == 0) return;\r\n                properties.stepCount = step;\r\n                this.clear();\r\n                this.run();\r\n            },\r\n            restart: function () {\r\n                this.clear();\r\n                properties.turn = 1;\r\n                this.run();\r\n            },\r\n            addThen: function (fn: any = undefined) {\r\n                if (typeof fn == \"function\") {\r\n                    this.then = fn;\r\n                }\r\n            },\r\n            addCatch: function (fn: any = undefined) {\r\n                if (typeof fn == \"function\") {\r\n                    this.catch = fn;\r\n                }\r\n            },\r\n            getData: function () {\r\n                return properties;\r\n            }\r\n        });\r\n        this.e = function (...args: any) {\r\n            if (!args.length || typeof args[0] != \"string\") return null;\r\n            var method = args[0];\r\n            var r = null;\r\n            if (typeof methods[method] == \"function\") {\r\n                var args2 = [];\r\n                for (var i = 1; i < args.length; i++) {\r\n                    var arg = args[i];\r\n                    args2.push(arg);\r\n                }\r\n\r\n                r = methods[method].apply(methods, args2);\r\n            }\r\n            return r;\r\n        };\r\n        setTimeout(function () {\r\n            methods.run();\r\n        }, 1);\r\n    }\r\n\r\n    delay(delay?: number) {\r\n        if (typeof delay == \"undefined\" || !isNumber(delay) || delay < 1) return;\r\n        this.e(\"delay\", delay);\r\n        return this;\r\n    }\r\n    step(step: number) {\r\n        if (typeof step == \"undefined\" || !isNumber(step) || step < -1 || step == 0) return;\r\n        this.e(\"step\", step);\r\n        return this;\r\n    }\r\n    try(step: number) {\r\n        if (typeof step == \"undefined\" || !isNumber(step) || step < -1 || step == 0) return;\r\n        this.e(\"step\", step);\r\n        return this;\r\n    }\r\n    restart(): Queue {\r\n        this.e(\"restart\");\r\n        return this;\r\n    }\r\n    then(fn: (...args:any[]) => any): this {\r\n        if (typeof fn == \"function\") {\r\n            this.e(\"addThen\", fn);\r\n        }\r\n        return this;\r\n    }\r\n    catch(fn: (...args:any[]) => any): this{\r\n        if (typeof fn == \"function\") {\r\n            this.e(\"addCatch\", fn);\r\n        }\r\n        return this;\r\n    }\r\n}\r\n/**\r\n * xửu lý hàng đợi\r\n * @param {function} work hàm thục thi công việc\r\n * @param {Number} delay thời gian giữa 2 lần chạy task\r\n * @param {Number} step số lần thực hiện công việc nếu chưa bị reject hay resolve\r\n */\r\nfunction queueTask(work: (resolve?:(...args:any[])=>any, rejected?:(...args:any[])=>any, turn?:number) => any, delay?: number, step?: number): Queue {\r\n    return new Queue(work, delay, step);\r\n}\r\n\r\n\r\n\r\n/**\r\n * lấy danh sách tham số nội hàm khi dược gọi\r\n * @param {Arguments} args tham số nội hàm\r\n * @param {integer} start vị trí bắt đầu lấy tham số\r\n * @returns {mixed[]}\r\n */\r\nfunction getArguments(args: any = undefined, start: any = undefined) {\r\n    var a = [];\r\n    if (!isNumber(start) || start < 0) start = 0;\r\n    if (args && args.length) {\r\n        for (let i = start; i < args.length; i++) {\r\n            const arg = args[i];\r\n            a.push(arg);\r\n        }\r\n    }\r\n    return a;\r\n}\r\n\r\n\r\nfunction JsonToBase64(data: any = undefined) {\r\n    return \"data:text/json;charset=utf-8,\" + encodeURIComponent(JSON.stringify(data));\r\n}\r\n\r\n\r\nfunction b64toBlob(b64Data: any = undefined, contentType: any = undefined, sliceSize: any = undefined) {\r\n    if (!contentType) contentType = '';\r\n    if (!sliceSize) sliceSize = 512;\r\n    const byteCharacters = atob(b64Data);\r\n    const byteArrays = [];\r\n\r\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n        const slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\r\n        const byteNumbers = new Array(slice.length);\r\n        for (let i = 0; i < slice.length; i++) {\r\n            byteNumbers[i] = slice.charCodeAt(i);\r\n        }\r\n\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n        byteArrays.push(byteArray);\r\n    }\r\n\r\n    const blob = new Blob(byteArrays, { type: contentType });\r\n    return blob;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * resize anh\r\n * @param {string|Element} img anh\r\n * @param {int} resizeWidth do rong \r\n * @param {int} resizeHeight chieu cao\r\n * @param {function} callback ham call back\r\n */\r\nfunction resizeImage(img: any = undefined, resizeWidth: any = undefined, resizeHeight: any = undefined, callback: any = undefined) {\r\n    function fn(imgTag: any = undefined) {\r\n        var canvas = document.createElement('canvas');\r\n        canvas.setAttribute('width', resizeWidth);\r\n        canvas.setAttribute('height', resizeHeight);\r\n\r\n\r\n        var ctx = canvas.getContext(\"2d\");\r\n\r\n        var imageWidth = imgTag.width;\r\n        var imageHeight = imgTag.height;\r\n\r\n        var zoomWidth = imageWidth, zoomHeight = imageHeight;\r\n        var imageRatio = imageWidth / imageHeight;\r\n        var resizeRatio = resizeWidth / resizeHeight;\r\n        // tỉ lệ là dài trên cao\r\n\r\n        if (imageRatio < resizeRatio) { // Nếu rỉ lệ của ảnh nhỏ hơn tỷ lệ resize thì sẽ zoom ảnh theo chiều rộng resize\r\n            zoomWidth = resizeWidth;\r\n            zoomHeight = zoomWidth / imageRatio;\r\n        } else { // nhược lại sẽ zoom ảnh theo chiều cao resize\r\n            zoomHeight = resizeHeight;\r\n            zoomWidth = zoomHeight * imageRatio;\r\n        }\r\n\r\n        // var image = new Image();\r\n        // image.src = imgTag.src;\r\n        // console.log(imageWidth, imageHeight, zoomWidth, zoomHeight, (resizeWidth - zoomWidth) / 2, (resizeHeight - zoomHeight) / 2);\r\n        ctx.drawImage(imgTag, (resizeWidth - zoomWidth) / 2, (resizeHeight - zoomHeight) / 2, zoomWidth, zoomHeight);\r\n        // console.log(canvas)\r\n        var url = canvas.toDataURL(\"image/png\");\r\n        callback(url);\r\n\r\n    }\r\n    return isString(img) ? function () {\r\n        var el = document.createElement('img');\r\n        el.crossOrigin = \"anonymous\";\r\n        el.onload = function () {\r\n            // window['img00'] = el\r\n            fn(el);\r\n\r\n        }\r\n        el.src = img;\r\n        return el;\r\n    }() :\r\n        img instanceof Element ? fn(img) : null;\r\n}\r\n\r\nvar degreeToRadians = function (degrees: any = undefined) {\r\n    if (!isNumber(degrees) || isNaN(degrees) || degrees == \"\") degrees = 0;\r\n    return degrees * Math.PI / 180;\r\n};\r\nvar radianToDegrees = function (radians: any = undefined) {\r\n    if (!isNumber(radians) || isNaN(radians) || radians == '') radians = 0;\r\n    return radians * 180 / Math.PI;\r\n}\r\n\r\n\r\nfunction getObjectPropDepth(elem, key?:any){\r\n    if(!isObject(elem) && !isArray(elem)) return undefined;\r\n    var t = getType(key)\r\n    let c : any = elem;\r\n    let s = t=='array'?key: \r\n        (['string', 'number'].indexOf(t)!=-1)? String(key).split(\".\"):[];\r\n    if(!s.length) return c;\r\n    var k = s.pop();\r\n    c = c[k];\r\n    if(s.length) return getObjectPropDepth(c, s);\r\n    return c;\r\n}\r\n\r\n/**\r\n * \r\n * @param type loại input\r\n * @param name tên input\r\n * @param value gia tri\r\n * @param options option\r\n */\r\nfunction getInputCfg (\r\n    type: string,\r\n    name: string,\r\n    value: (string | number | boolean | { [x: string]: any }),\r\n    options?: any\r\n) {\r\n    var t = Str.lower(type);\r\n    return inArray([\r\n        'text', 'number', 'select', 'range', 'radio', 'checkbox', 'switch', \r\n        'textarea', 'texteditor', 'vector2', 'vector3', 'vector4', 'texture', \r\n        'imagesurl', 'color' \r\n    ], t)? assignValue({\r\n        type: t,\r\n        name: name,\r\n        value: value\r\n    }, options) : null ;\r\n}\r\n\r\nexport {\r\n    _instanceof, _defineProperties, _createClass, _defineProperty, addToGlobal,\r\n    getType, checkType, isArray, isBoolean, isObject, isString, isNumber, isInteger, isEmail, isNull, isFormData, isEmpty, isCallable, isFunction, isProperty, isMethod, hasValue, inArray,\r\n    cutWithout, copyWithout, copyArray, objectKeys, objectValues, merge, combine, arrayJoin, objectHasKey, objectHasProperty, objectAssign,\r\n    Num, Str, date, getEl, assignValue, assignWithout, assignIfNotExists, colorToHex, invertHexColor, minOf, maxOf, copyByList, isFloat,\r\n    Queue, queueTask, combineElenentsToArrList, combineElenentsJoinStringList, getArguments, JsonToBase64, b64toBlob, resizeImage, getTimeStamp,\r\n    degreeToRadians, radianToDegrees, newObj, emptyObject, getInputCfg, getObjectPropDepth\r\n};","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-auth',\r\n  templateUrl: './auth.component.html',\r\n  styleUrls: ['./auth.component.scss'],\r\n})\r\nexport class AuthComponent {}\r\n","<router-outlet></router-outlet>\r\n","import { assignValue, assignWithout, getTimeStamp, inArray, isArray, isEmpty, isNumber, isObject, isString, newObj, objectValues, Str } from '@app/_core/helpers/utils';\r\nimport * as THREE from 'three';\r\nimport { TransformControls } from '../threejs/jsm/controls/TransformControls';\r\nimport { _class } from '@app/_core/helpers/es5.class';\r\nimport { EventDispatcher, EventDispatcherInstance } from './event-dispatcher';\r\nimport { registerAnimationTask } from './animation-loop';\r\nimport { SceneSize, SizeIn3D, Vector2, Vector3 } from '../store/data.type';\r\nimport { EditorClass, iEditor } from '../store/docs';\r\nimport { getMovingEngine } from '../engines/moving.engine';\r\n\r\nconst Editor__: any = _class(\"Editor\").uses(EventDispatcher)({\r\n    $dynamicCreateMode: true,\r\n    $control: null,\r\n    $engine: null,\r\n    $selected: null,\r\n    $pickers: null,\r\n    $currentLight: null,\r\n    $currentObject: null,\r\n    $currentTargetControl: null,\r\n    animationTasks: null,\r\n    animationStatus: false,\r\n    animationTimeStart: 0,\r\n    animationTimeCount: 0,\r\n    poiterDowsStatus: false,\r\n    isHoldObject: false,\r\n    hasDroppablePosition: false,\r\n    animation: null,\r\n    app: null,\r\n    meshes: null,\r\n    moving: null,\r\n    movingRaycaster: null,\r\n    dragMoveColRows: 101,\r\n    \r\n    constructor: function constructor(app, engine: any) {\r\n        this.setup(app, engine);\r\n    },\r\n\r\n    setup: function setup(app, engine) {\r\n        this.app = app;\r\n        var scope: iEditor = this;\r\n        this.engine = engine;\r\n        if (engine.inited) {\r\n            this.startup();\r\n            // console.log(engine);\r\n        } else {\r\n            this.engine.on('ready', function () {\r\n                scope.startup();\r\n            });\r\n\r\n        }\r\n    },\r\n    refresh: function () {\r\n        this.engine.refresh();\r\n    },\r\n\r\n    ready: function () {\r\n        var scope: iEditor = this;\r\n        scope.animation = registerAnimationTask(scope.getInstanceID())\r\n        this.moving = getMovingEngine(this.engine);\r\n        // this.moving.setSize(this.engine.width, this.engine.height);\r\n        // this.moving.setMainEngine(this.engine);\r\n        this.animationTasks = {\r\n            check: function () {\r\n                var currentTime = getTimeStamp();\r\n                if (scope.animationStatus && currentTime - scope.animationTimeStart >= scope.animationTimeCount) {\r\n                    if (scope.restoreShadow()) {\r\n                        scope.animationStatus = false;\r\n                        scope.animationTimeCount = 0;\r\n                        scope.engine.refresh();\r\n                        scope.animation.remove(\"editorCheck\");\r\n                    }\r\n\r\n                    // console.log(\"remove check and remove\")\r\n                }\r\n            }\r\n        };\r\n\r\n        // document.addEventListener(\"pointerup\", function () {\r\n        //     scope.poiterDowsStatus = false;\r\n        // })\r\n\r\n        this.meshes = [];\r\n\r\n        scope.scene = scope.engine.scene;\r\n        var box = new THREE.Box3();\r\n\r\n        var selectionBox = new THREE.BoxHelper();\r\n        selectionBox.material.depthTest = false;\r\n        selectionBox.material.transparent = true;\r\n        selectionBox.visible = false;\r\n        scope.selectionBox = selectionBox;\r\n        scope.box = box;\r\n        scope.scene.add(selectionBox);\r\n\r\n        scope.cursor = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        scope.objects = [];\r\n        scope.lights = [];\r\n        scope.pickers = [];\r\n        scope.attachObjects = [];\r\n        scope.targets = [];\r\n        scope.targetControlObjects = {};\r\n        scope.helpers = {};\r\n        scope.currentLight = null;\r\n        scope.currentObject = null;\r\n        scope.currentTargetControl = null;\r\n\r\n        // scope.sceneHelper = scope.engine.sceneHelper;\r\n        // scope.engine.showSceneHelper = true;\r\n\r\n        scope.raycaster = new THREE.Raycaster();\r\n        scope.pointer = new THREE.Vector2();\r\n        scope.onUpPosition = new THREE.Vector2();\r\n        scope.onDownPosition = new THREE.Vector2();\r\n        scope.movingRaycaster = new THREE.Raycaster();\r\n\r\n\r\n        var control = new TransformControls(scope.engine.camera, scope.engine.renderer.domElement);\r\n        scope.engine.scene.add(control);\r\n\r\n        control.addEventListener('change', function () {\r\n            var object = control.object;\r\n            if (object) {\r\n                if (object.isTargetControlObject) {\r\n                    scope.updateLightTargetByTargetControlObject(object)\r\n                }\r\n                else if (object.isLight) {\r\n                    scope.updateHelperByLight(object);\r\n                }\r\n                else {\r\n                    scope.updateHelperByObject(object);\r\n                }\r\n            }\r\n            if (scope.isHoldObject) {\r\n                scope.turnOffShadow();\r\n            }\r\n\r\n            scope.engine.refresh();\r\n        });\r\n\r\n        control.addEventListener('dragging-changed', function (event) {\r\n            if (event.value) {\r\n                scope.engine.controlCanUpdate = false;\r\n            }\r\n            if (scope.engine.enableControl) {\r\n                scope.engine.control.enabled = !event.value;\r\n            }\r\n\r\n            // console.log(JSON.stringify(control));\r\n            // console.log(event.value);\r\n            var object = control.object;\r\n            var e = newObj({\r\n                type: \"object.changed\",\r\n                data: scope.currentObject,\r\n                mode: control.mode\r\n            })\r\n            if (object !== undefined) {\r\n                if (object.isTargetControlObject) {\r\n                    scope.updateLightTargetByTargetControlObject(object);\r\n                    e.type = 'light.update.target';\r\n                    e.data = {\r\n                        x: object.position.x,\r\n                        y: object.position.y,\r\n                        z: object.position.z\r\n                    };\r\n                    e.light = object.light;\r\n                }\r\n                else if (object.isLight) {\r\n                    e.type = 'light.update.props';\r\n                    e.data = {\r\n                        x: object.position.x,\r\n                        y: object.position.y,\r\n                        z: object.position.z\r\n                    };\r\n                    e.light = object;\r\n                }\r\n\r\n            }\r\n            if (event.value) {\r\n                scope.turnOffShadow();\r\n            }\r\n            scope.isHoldObject = event.value;\r\n            // scope.turnOffShadow();\r\n\r\n            scope.engine.refresh();\r\n            if (!event.value) {\r\n                scope.engine.controlCanUpdate = true;\r\n            }\r\n\r\n            scope.dispatchEvent(e);\r\n\r\n        });\r\n        control.addEventListener('objectChange', function () {\r\n            // console.log(\"change\");\r\n        });\r\n\r\n        // control.enabled = false;\r\n        scope.control = control;\r\n\r\n\r\n        window.addEventListener('keyup', function (event) {\r\n            switch (event.keyCode) {\r\n                case 16: // Shift\r\n                    scope.control.setTranslationSnap(null);\r\n                    scope.control.setRotationSnap(null);\r\n                    scope.control.setScaleSnap(null);\r\n                    scope.engine.refresh();\r\n                    break;\r\n\r\n            }\r\n\r\n        });\r\n\r\n\r\n        scope.engine.on('object.added', function (event) {\r\n            var data = event.data;\r\n            // if(data.type == \"model\"){\r\n            scope.addObject(data.object);\r\n            // }\r\n            scope.addMeshByObject(data.object);\r\n\r\n\r\n        });\r\n\r\n\r\n        scope.engine.on('object.removed', function (event) {\r\n            var data = event.data;\r\n            scope.removeObject(data.object);\r\n\r\n            scope.removeMeshByObject(data.object);\r\n\r\n\r\n        });\r\n        scope.engine.on('light.added', function (event) {\r\n            var data = event.data;\r\n            scope.addLight(data.object);\r\n        });\r\n\r\n\r\n\r\n\r\n        scope.engine.on('light.removing', function (event) {\r\n            if (event.light) {\r\n                if (scope.currentLight == event.light.object) {\r\n                    scope.detachLight();\r\n                }\r\n            }\r\n\r\n        });\r\n        scope.engine.on('light.removed', function (event) {\r\n            // console.log(event.data.object)\r\n            scope.removeLight(event.data.object)\r\n\r\n        });\r\n\r\n        scope.engine.on('object.update.props', function (event) {\r\n            scope.updateHelperByObject(event.data.object);\r\n\r\n        });\r\n\r\n        scope.engine.on('object.update.geometry', function (event) {\r\n            scope.updateHelperByObject(event.data.object);\r\n\r\n        });\r\n\r\n        scope.engine.on('light.update', function (event) {\r\n            scope.updateHelperByLight(event.data.object);\r\n\r\n        });\r\n\r\n\r\n        var pointerDownPos = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n        var pointerUpPos = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n        var lastPointerUpTime = getTimeStamp();\r\n        var pointerDownStatus = false;\r\n        this.on(\"pointerdown\", function (e) {\r\n            pointerDownPos = {\r\n                x: e.clientX,\r\n                y: e.clientY\r\n            };\r\n            pointerDownStatus = true;\r\n        });\r\n        this.on('pointerup', function (event) {\r\n            if (!pointerDownStatus) return;\r\n\r\n            var currentTime = getTimeStamp();\r\n            if (\r\n                pointerUpPos && pointerDownPos\r\n                && pointerDownPos.x == event.clientX && pointerUpPos.x == event.clientX\r\n                && pointerDownPos.y == event.clientY && pointerUpPos.y == event.clientY\r\n                && currentTime - lastPointerUpTime <= 400\r\n            ) {\r\n                scope.emit({\r\n                    type: \"dbclick\",\r\n                    clientX: event.clientX,\r\n                    clientY: event.clientY\r\n                });\r\n\r\n            }\r\n            lastPointerUpTime = currentTime;\r\n            pointerUpPos = {\r\n                x: event.clientX,\r\n                y: event.clientY\r\n            };\r\n            pointerDownStatus = false;\r\n        });\r\n\r\n\r\n\r\n\r\n\r\n    },\r\n    changeCameraByMain: function (camera) {\r\n        this.camera.copy(camera, true);\r\n\r\n    },\r\n    addEventDefault: function () {\r\n        var scope: iEditor = this;\r\n\r\n        this.addEventListener('pointerdown', onPointerDown);\r\n        this.addEventListener('pointerup', onPointerUp);\r\n        this.addEventListener('pointermove', onPointerMove);\r\n\r\n        // window['editor'] = this;\r\n\r\n\r\n        window.addEventListener('keydown', function (event) {\r\n\r\n            switch (event.keyCode) {\r\n                case 81: // Q\r\n                    scope.executeCommand(\"space\");\r\n                    break;\r\n                case 16: // Shift\r\n                    scope.executeCommand(\"snap\");\r\n                    break;\r\n                case 87: // W\r\n                    scope.executeCommand(\"translate\");\r\n                    scope.emit({\r\n                        type: \"control.mode.change\",\r\n                        node: \"translate\"\r\n                    });\r\n\r\n                    break;\r\n                case 69: // E\r\n                    scope.executeCommand(\"rotate\");\r\n                    scope.emit({\r\n                        type: \"control.mode.change\",\r\n                        node: \"rotate\"\r\n                    });\r\n\r\n                    break;\r\n                case 82: // R\r\n                    scope.executeCommand(\"scale\");\r\n                    scope.emit({\r\n                        type: \"control.mode.change\",\r\n                        node: \"scale\"\r\n                    });\r\n                    break;\r\n                case 187:\r\n                case 107: // +, =, num+\r\n                    scope.executeCommand(\"upsize\");\r\n                    break;\r\n                case 189:\r\n                case 109: // -, _, num-\r\n                    scope.executeCommand(\"downsize\");\r\n                    break;\r\n                case 88: // X\r\n                    scope.executeCommand(\"toggle:x\");\r\n                    break;\r\n                case 89: // Y\r\n                    scope.executeCommand(\"toggle:y\");\r\n                    break;\r\n                case 90: // Z\r\n                    scope.executeCommand(\"toggle:z\");\r\n                    break;\r\n                case 32: // Spacebar\r\n                    scope.executeCommand(\"enable\");\r\n                    break;\r\n                case 46: // delete\r\n                    scope.deleteAttach();\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n\r\n\r\n        function onPointerDown(event) {\r\n            scope.poiterDowsStatus = true;\r\n            var rect = scope.engine.wrapper.getBoundingClientRect();\r\n\r\n            scope.onDownPosition.x = event.clientX - rect.left;\r\n            scope.onDownPosition.y = event.clientY - rect.top;\r\n        }\r\n\r\n        function onPointerUp(event) {\r\n            // scope.poiterDowsStatus = false;\r\n            var rect = scope.engine.wrapper.getBoundingClientRect();\r\n            scope.onUpPosition.x = event.clientX - rect.left;\r\n            scope.onUpPosition.y = event.clientY - rect.top;\r\n            if (scope.onUpPosition.x < 0 || scope.onUpPosition.y < 0) return;\r\n\r\n            if (scope.onDownPosition.distanceTo(scope.onUpPosition) === 0) {\r\n                scope.pointer.x = (scope.onUpPosition.x / rect.width) * 2 - 1;\r\n                scope.pointer.y = - (scope.onUpPosition.y / rect.height) * 2 + 1;\r\n                scope.selectObjectByPointer(scope.pointer);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function onPointerMove(event) {\r\n            if (scope.poiterDowsStatus) {\r\n                // scope.turnOffShadow();\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    startup: function () {\r\n        this.addEventDefault();\r\n        this.ready();\r\n        this.setEngineData();\r\n        this.emit({\r\n            type: \"startup\",\r\n            data: getTimeStamp()\r\n        })\r\n\r\n    },\r\n\r\n    setEngineData: function () {\r\n        this.engine.setData(this.engine.data);\r\n        this.engine.refresh();\r\n\r\n    },\r\n\r\n    addMeshByObject: function (object) {\r\n        var scope: iEditor = this;\r\n        var o = scope.engine.getObject(object);\r\n        if (o && o.type == \"model\") {\r\n            if (o.meshes && o.meshes.length) {\r\n                o.meshes.map(function (mesh) {\r\n                    Object.defineProperty(mesh, \"__parent__id__\", {\r\n                        enumerable: false,\r\n                        writable: false,\r\n                        configurable: false,\r\n                        value: o.object.id\r\n                    })\r\n                    Object.defineProperty(mesh, \"__parent__key__\", {\r\n                        enumerable: false,\r\n                        writable: false,\r\n                        configurable: false,\r\n                        value: o.secret_key\r\n                    })\r\n                    scope.meshes.push(mesh);\r\n                })\r\n            }\r\n        }\r\n    },\r\n    removeMeshByObject: function (object) {\r\n        var a = [];\r\n        var scope: iEditor = this;\r\n        this.meshes.map(function (mesh) {\r\n            if (mesh.__parent_id__ == object.id) {\r\n                a.push(mesh);\r\n            }\r\n        });\r\n        if (a.length) {\r\n            for (let i = 0; i < a.length; i++) {\r\n                const m = a[i];\r\n                var index = this.meshes.indexOf(m);\r\n                if (m >= 0) {\r\n                    this.meshes.splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    restoreShadow: function () {\r\n        if (this.animationStatus && !this.engine.deactiveShadowStatus) {\r\n            this.engine.Shadows.restore();\r\n            this.animationStatus = false;\r\n            return true;\r\n        }\r\n        return false;\r\n\r\n    },\r\n    turnOffShadow: function (timer) {\r\n        var scope = this;\r\n        this.animationTimeCount = isNumber(timer) && timer > 0 ? timer : 500;\r\n        this.animationTimeStart = getTimeStamp();\r\n        if (!this.animationStatus && !this.engine.deactiveShadowStatus) {\r\n            this.animationStatus = true;\r\n            this.engine.Shadows.off();\r\n            // this.engine.refresh();\r\n            if (!scope.animation.has(\"editorCheck\")) {\r\n                scope.animation.add(\"editorCheck\", this.animationTasks.check);\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    updateHelperByObject: function (object: any) {\r\n        var scope = this;\r\n        if (object !== undefined) {\r\n            var helper = scope.helpers[object.id];\r\n\r\n            if (helper !== undefined && helper.isSkeletonHelper !== true) {\r\n                if (object.position) helper.position.copy(object.position);\r\n                if (object.rotation) helper.rotation.copy(object.rotation);\r\n                if (object.scale) helper.scale.copy(object.scale);\r\n                helper.update();\r\n\r\n            }\r\n\r\n            // signals.refreshSidebarObject3D.dispatch(object);\r\n            scope.engine.refresh();\r\n        }\r\n    },\r\n    updateHelperByLight: function (object: any) {\r\n        var scope = this;\r\n        if (object !== undefined) {\r\n\r\n\r\n            // scope.helper.scale.copy(object.scale);\r\n            // selectionBox.setFromObject(object);\r\n\r\n            var helper = scope.helpers[object.id];\r\n\r\n            if (helper !== undefined && helper.isSkeletonHelper !== true) {\r\n                if (object.position) helper.position.copy(object.position);\r\n                if (object.rotation) helper.rotation.copy(object.rotation);\r\n                if (object.scale) helper.scale.copy(object.scale);\r\n                helper.update();\r\n\r\n            }\r\n\r\n            // signals.refreshSidebarObject3D.dispatch(object);\r\n            scope.engine.refresh();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * cập nhật vị trí target light\r\n     * @param\r\n     */\r\n    updateLightTargetByTargetControlObject: function (targetControl: any) {\r\n        if (targetControl.isTargetControlObject) {\r\n            var target = targetControl.targetControl;\r\n            target.position.copy(targetControl.position);\r\n            target.needsUpdate = true;\r\n            this.updateHelperByLight(targetControl.light);\r\n\r\n        }\r\n    },\r\n    addObject: function (object: any) {\r\n        this.objects.push(object);\r\n        this.select(object);\r\n    },\r\n\r\n\r\n    removeObject: function (object: any) {\r\n\r\n        this.removeHelper(object);\r\n        // if (object.parent === null) return; // avoid deleting the camera or scene\r\n\r\n\r\n        var scope = this;\r\n        if (object == scope.currentObject) {\r\n            scope.control.detach();\r\n        }\r\n        for (let i = 0; i < scope.objects.length; i++) {\r\n            const obj = scope.objects[i];\r\n            if (obj == object) {\r\n                scope.objects.splice(i, 1);\r\n            }\r\n        }\r\n        // scope.engine.refresh();\r\n    },\r\n\r\n    addLight: function addLight(light: any) {\r\n        if (isObject(light) && light.isLight) {\r\n            var helper = this.getHelper(light);\r\n            if (helper) {\r\n                helper.position.copy(light.position);\r\n                this.scene.add(helper);\r\n                helper.visible = false;\r\n                if (helper.children) {\r\n                    for (let index = 0; index < helper.children.length; index++) {\r\n                        const child = helper.children[index];\r\n                        const i = this.pickers.indexOf(child);\r\n                        if (i == -1) {\r\n                            this.pickers.push(child);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (light.target) {\r\n                light.target.position.y = this.engine.dropbyPositionY;\r\n                this.scene.add(light.target);\r\n            }\r\n            this.lights.push(light);\r\n            this.select(light);\r\n        }\r\n    },\r\n\r\n    removeLight: function removeLight(light: any) {\r\n        var helper = this.getHelper(light);\r\n        if (helper) {\r\n            if (helper.children) {\r\n                for (let index = 0; index < helper.children.length; index++) {\r\n                    const child = helper.children[index];\r\n                    const i = this.pickers.indexOf(child);\r\n                    if (i != -1) {\r\n                        this.pickers.splice(i, 1);\r\n\r\n                    }\r\n                }\r\n            }\r\n            this.removeHelper(light);\r\n        }\r\n\r\n        if (light.target) {\r\n            this.removeLightTargetControlObject(light);\r\n            this.scene.remove(light.target);\r\n        }\r\n        var index = this.lights.indexOf(light);\r\n\r\n        if (index !== -1) {\r\n            this.lights.splice(index, 1);\r\n\r\n            if (this.currentLight == light) {\r\n                this.detachLight();\r\n            }\r\n        }\r\n        this.engine.refresh();\r\n    },\r\n\r\n    lightHelperStatus: true,\r\n    showLightHelpers: function () {\r\n        var self = this;\r\n        this.lightHelperStatus = true;\r\n        this.lights.map(function (light) {\r\n            var helper = self.getHelper(light);\r\n            if (helper) helper.visible = true;\r\n        });\r\n        this.targets.map(function (target) {\r\n            target.visible = true;\r\n        })\r\n        this.engine.refresh()\r\n    },\r\n\r\n\r\n    hideLightHelpers: function () {\r\n        var self = this;\r\n        this.lights.map(function (light) {\r\n            var helper = self.getHelper(light);\r\n            if (helper) helper.visible = false;\r\n        });\r\n        this.lightHelperStatus = false;\r\n\r\n        this.targets.map(function (target) {\r\n            target.visible = false;\r\n        });\r\n\r\n        this.detachLight();\r\n\r\n        this.engine.refresh()\r\n    },\r\n\r\n    /**\r\n     * tìm object trong bảng\r\n     * @param {Object} obj \r\n     * @returns {Object#d|Group|Mesh}\r\n     */\r\n    closestObjectInScene: function closestObjectInScene(obj: any) {\r\n        if (isObject(obj) && !obj.isSczene) {\r\n\r\n            for (let i = 0; i < this.objects.length; i++) {\r\n                const sobj = this.objects[i];\r\n                if (obj == sobj || obj.uuid == sobj.uuid || (obj.id && obj.id == sobj.id)) return sobj;\r\n            }\r\n            if (obj.parent) {\r\n                return this.closestObjectInScene(obj.parent);\r\n            }\r\n\r\n        }\r\n        return null;\r\n    },\r\n\r\n    /**\r\n     * tìm object trong bảng\r\n     * @param {Object} obj \r\n     * @returns {Object#d|Group|Mesh}\r\n     */\r\n    closestLightInScene: function closestLightInScene(obj: any) {\r\n        if (isObject(obj) && !obj.isScene) {\r\n\r\n            for (let i = 0; i < this.lights.length; i++) {\r\n                const sobj = this.lights[i];\r\n                if (obj == sobj || obj.userData == sobj || obj.attachObject == sobj) return sobj;\r\n\r\n\r\n            }\r\n            if (obj.parent) {\r\n                return this.closestLightInScene(obj.parent);\r\n            }\r\n\r\n\r\n        }\r\n        return null;\r\n    },\r\n\r\n    /**\r\n     * tìm object trong bảng\r\n     * @param {Object} obj \r\n     * @returns {Object#d|Group|Mesh}\r\n     */\r\n    closestLightTargetControlInScene: function closestLightTargetControlInScene(obj: any) {\r\n        if (isObject(obj) && !obj.isScene && this.currentLight) {\r\n            var light = this.currentLight;\r\n            for (let i = 0; i < this.targets.length; i++) {\r\n                const sobj = this.targets[i];\r\n                if (obj == sobj && sobj.light == light) return sobj;\r\n\r\n\r\n            }\r\n            if (obj.parent) {\r\n                return this.closestLightInScene(obj.parent);\r\n            }\r\n\r\n\r\n        }\r\n        return null;\r\n    },\r\n\r\n    /**\r\n     * chọn object\r\n     * @param {Vector3} pointer diểm click\r\n     * @returns \r\n     */\r\n    selectMeshByPointer: function (pointer: any) {\r\n        var scope = this;\r\n        this.raycaster.setFromCamera(pointer, this.engine.camera);\r\n        const intersects = this.raycaster.intersectObjects(this.meshes, true);\r\n        if (intersects.length > 0) {\r\n            return intersects[0].object;\r\n        }\r\n        return null;\r\n    },\r\n    /**\r\n     * chọn object\r\n     * @param {Vector3} pointer diểm click\r\n     * @returns \r\n     */\r\n    selectObjectByPointer: function (pointer: any) {\r\n        var scope = this;\r\n        this.raycaster.setFromCamera(pointer, this.engine.camera);\r\n\r\n        /**\r\n         * thứ tự ưu tiên\r\n         * 1 object\r\n         * 2 target\r\n         * 3 light\r\n         */\r\n\r\n\r\n\r\n        const intersects = this.raycaster.intersectObjects(this.objects, true);\r\n        // objects\r\n\r\n        if (intersects.length > 0) {\r\n            const object = intersects[0].object;\r\n            const obj = this.closestObjectInScene(object);\r\n            if (obj) {\r\n\r\n                if (obj !== this.control.object) {\r\n                    if (this.currentObject && this.currentObject != obj) {\r\n                        this.select(null);\r\n                    }\r\n                    this.select(obj);\r\n                }\r\n                return;\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        const targetIntersects = this.raycaster.intersectObjects(this.targets, true);\r\n        if (targetIntersects.length) {\r\n            const target = this.closestLightTargetControlInScene(targetIntersects[0].object);\r\n            if (target) {\r\n                this.attachLightTargetControl(target);\r\n\r\n                return;\r\n            }\r\n        }\r\n\r\n\r\n\r\n        if (this.currentLight && this.currentTargetControl && this.currentTargetControl.light == this.currentLight) {\r\n            this.detactLightTargetControl();\r\n            this.control.attach(this.currentLight);\r\n\r\n        } else {\r\n            this.detactLightTargetControl();\r\n        }\r\n\r\n\r\n\r\n        // ligjy\r\n        const lightIntersects = this.raycaster.intersectObjects(this.lights, true);\r\n\r\n        if (lightIntersects.length > 0) {\r\n            const object = lightIntersects[0].object;\r\n            const light = this.closestLightInScene(object);\r\n\r\n            if (light) {\r\n                if (light != this.control.object) {\r\n                    if (this.currentLight && this.currentLight != light) {\r\n                        this.select(null);\r\n                    }\r\n                    this.select(light);\r\n                }\r\n                return;\r\n\r\n            }\r\n        }\r\n\r\n\r\n\r\n        const pickerIntersects = this.raycaster.intersectObjects(this.pickers, true);\r\n        if (pickerIntersects.length > 0) {\r\n            const object = pickerIntersects[0].object.parent;\r\n            const light = this.closestLightInScene(object);\r\n\r\n            if (light) {\r\n                if (light != this.control.object) {\r\n                    if (this.currentLight && this.currentLight != light) {\r\n                        this.select(null);\r\n                    }\r\n                    this.select(light);\r\n                }\r\n                return;\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        if (this.currentLight) this.detachLight();\r\n        if (this.currentObject) this.detachObject();\r\n        if (this.currentTargetControl) {\r\n            this.scene.remove(this.currentTargetControl);\r\n            // this.select(null);\r\n        }\r\n        this.control.detach();\r\n        this.select(null);\r\n        this.selected = null;\r\n        this.engine.refresh();\r\n\r\n\r\n    },\r\n\r\n    select: function (object: any) {\r\n        if (!object) {\r\n\r\n            if (this.selected) {\r\n                if (this.selected.isTargetControlObject) {\r\n                    this.detactLightTargetControl();\r\n                } else if (this.currentLightt) {\r\n                    this.detachLight();\r\n                } else {\r\n                    this.detachObject();\r\n                }\r\n            }\r\n            // else {\r\n            this.control.detach();\r\n            // }\r\n            this.selected = null;\r\n            this.engine.refresh();\r\n            return this;\r\n        }\r\n        if (this.selected === object) return;\r\n        var uuid = null;\r\n\r\n        uuid = object.uuid;\r\n\r\n        this.selected = object;\r\n\r\n        if (!object.isLight) {\r\n            this.attachObject(object);\r\n        }\r\n        else {\r\n            this.attachLight(object);\r\n        }\r\n\r\n        // this.config.setKey( 'selected', uuid );\r\n        // this.signals.objectSelected.dispatch( object );\r\n        this.engine.refresh();\r\n    },\r\n\r\n    selectById: function (id: any) {\r\n\r\n        if (id === this.camera.id) {\r\n\r\n            this.select(this.camera);\r\n            return;\r\n\r\n        }\r\n\r\n        this.select(this.scene.getObjectById(id, true));\r\n\r\n    },\r\n\r\n    selectByUuid: function (uuid: any) {\r\n\r\n        var scope = this;\r\n\r\n        this.scene.traverse(function (child) {\r\n\r\n            if (child.uuid === uuid) {\r\n\r\n                scope.select(child);\r\n\r\n            }\r\n\r\n        });\r\n\r\n    },\r\n\r\n    deselect: function () {\r\n\r\n        this.select(null);\r\n\r\n    },\r\n\r\n    focus: function (object: any) {\r\n\r\n        if (object !== undefined) {\r\n\r\n\r\n        }\r\n        this.engine.refresh();\r\n    },\r\n\r\n    focusById: function (id: any) {\r\n\r\n        this.focus(this.scene.getObjectById(id, true));\r\n\r\n    },\r\n\r\n    isSelected: function (object: any) {\r\n        return object == this.selected ? true : (\r\n            (object.isScene || !object.parent) ? false : this.isSelected(object.parent)\r\n        )\r\n    },\r\n\r\n    /**\r\n     * attach\r\n     * @param {string|object} object \r\n     */\r\n\r\n    attach: function (object: any) {\r\n        // console.log(object);\r\n        if (isObject(object)) {\r\n            this.attachObject(object);\r\n        }\r\n        if (isString(object)) {\r\n            var o = this.engine.getObject(object);\r\n            if (o) {\r\n                this.attachObject(o.object);\r\n            }\r\n        }\r\n    },\r\n    attachObject: function (object3D: any) {\r\n        if (this.currentLight) {\r\n            this.detachLight();\r\n        }\r\n        if (this.currentObject) {\r\n            this.detachObject();\r\n        }\r\n        this.currentObject = object3D;\r\n        var helper = this.getHelper(object3D);\r\n\r\n        this.helper = helper;\r\n        this.control.attach(object3D);\r\n        this.scene.add(helper);\r\n\r\n        this.dispatchEvent({\r\n            type: 'object.attach',\r\n            object: object3D,\r\n            mode: this.control.mode\r\n        });\r\n        this.engine.refresh();\r\n        return false;\r\n\r\n\r\n    },\r\n    detachObject: function () {\r\n        this.control.detach();\r\n        if (this.helper) {\r\n            this.helper.position.set(0, 0, 0);\r\n            this.helper.rotation.set(0, 0, 0);\r\n            this.helper.scale.set(1, 1, 1);\r\n            this.scene.remove(this.helper);\r\n\r\n        }\r\n        var obj = this.currentObject;\r\n        this.currentObject = null;\r\n        this.dispatchEvent({\r\n            type: 'object.detach',\r\n            object: obj\r\n        });\r\n\r\n        this.engine.refresh();\r\n    },\r\n\r\n\r\n    attachLight: function (light: any) {\r\n        if (!light) {\r\n            console.warn(\"Lỗi kkho có ligh\");\r\n            return;\r\n        }\r\n        if (this.currentObject) {\r\n            this.detachObject();\r\n        }\r\n        if (this.currentLight) {\r\n            this.detachLight();\r\n        }\r\n        this.currentLight = light;\r\n        this.control.attach(light);\r\n        var targetControl = this.getLightTargetControlObject(light);\r\n        if (targetControl) {\r\n            this.scene.add(targetControl);\r\n        }\r\n        this.dispatchEvent({\r\n            type: 'light.attach',\r\n            light: light,\r\n            mode: this.control.mode\r\n        });\r\n\r\n    },\r\n    detachLight: function () {\r\n        this.control.detach();\r\n        var obj = this.currentLight;\r\n        var targetControl = this.getLightTargetControlObject(obj);\r\n        if (targetControl) {\r\n            this.scene.remove(targetControl);\r\n        }\r\n\r\n        this.currentLight = null;\r\n        this.selected = null;\r\n        this.dispatchEvent({\r\n            type: 'light.detach',\r\n            light: obj\r\n        });\r\n    },\r\n\r\n    attachLightTargetControl: function (target: any) {\r\n        this.currentTargetControl = target;\r\n        this.control.detach();\r\n        this.control.attach(target);\r\n        this.engine.refresh();\r\n    },\r\n\r\n    detactLightTargetControl: function () {\r\n        if (this.currentTargetControl && this.currentTargetControl == this.control.object) {\r\n            this.control.detach();\r\n            this.currentTargetControl = null;\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * Them target vontrol\r\n     * @param {Object} light anh sang\r\n     */\r\n    getLightTargetControlObject: function (light: any) {\r\n        if (!isObject(light) || !light.isLight || !light.target) return null;\r\n        if (typeof this.targetControlObjects[light.target.id] != \"undefined\") return this.targetControlObjects[light.target.id];\r\n\r\n        const geometry = new THREE.CircleGeometry(1, 32);\r\n        const material = new THREE.MeshBasicMaterial({ color: 0xffffff, opacity: 0.1, side: THREE.DoubleSide, transparent: true });\r\n        const circle = new THREE.Mesh(geometry, material);\r\n        circle.targetControl = light.target;\r\n        circle.light = light;\r\n        // copy position\r\n        circle.position.copy(light.target.position);\r\n        circle.name = \"targetcontrol\";\r\n        circle.isTargetControlObject = true;\r\n        circle.rotation.x = - Math.PI / 2;\r\n        this.targetControlObjects[light.target.id] = circle;\r\n        circle.visible = this.lightHelperStatus;\r\n        this.targets.push(circle);\r\n        return circle;\r\n    },\r\n\r\n    removeLightTargetControlObject: function (light) {\r\n        if (!isObject(light) || !light.isLight || !light.target) return null;\r\n        if (typeof this.targetControlObjects[light.target.id] != \"undefined\" && isObject(this.targetControlObjects[light.target.id])) {\r\n            var target = this.targetControlObjects[light.target.id];\r\n            this.engine.scene.remove(target);\r\n            let i = this.targets.indexOf(target);\r\n            if (i > -1) {\r\n\r\n                this.targets.splice(i, 1);\r\n            }\r\n        }\r\n\r\n    },\r\n    getHelper: function () {\r\n\r\n        var geometry = new THREE.SphereGeometry(2, 4, 2);\r\n        var material = new THREE.MeshBasicMaterial({ color: 0xff0000, visible: false });\r\n\r\n        return function (object, helper) {\r\n\r\n            if (this.helpers[object.id] != undefined) {\r\n                helper = this.helpers[object.id];\r\n            }\r\n            else if (helper === undefined) {\r\n\r\n                if (object.isCamera) {\r\n\r\n                    helper = new THREE.CameraHelper(object);\r\n\r\n                } else if (object.isPointLight) {\r\n\r\n                    helper = new THREE.PointLightHelper(object, 1);\r\n\r\n                } else if (object.isDirectionalLight) {\r\n\r\n                    helper = new THREE.DirectionalLightHelper(object, 1);\r\n\r\n                } else if (object.isSpotLight) {\r\n\r\n                    helper = new THREE.SpotLightHelper(object, 1);\r\n\r\n                } else if (object.isHemisphereLight) {\r\n\r\n                    helper = new THREE.HemisphereLightHelper(object, 1);\r\n\r\n                } else if (object.isSkinnedMesh) {\r\n\r\n                    helper = new THREE.SkeletonHelper(object.skeleton.bones[0]);\r\n\r\n                } else if (object.type == \"Object3D\") {\r\n\r\n                    helper = new THREE.BoxHelper(object, 0xffff00);\r\n\r\n                } else if (object.isGroup) {\r\n\r\n                    helper = new THREE.BoxHelper(object, 0xffff00);\r\n\r\n                } else if (object.isMesh) {\r\n\r\n                    helper = new THREE.BoxHelper(object, 0xffff00);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    // no helper for this object type\r\n                    return;\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n            var picker = new THREE.Mesh(geometry, material);\r\n            picker.name = 'picker';\r\n            picker.userData.object = object;\r\n            helper.add(picker);\r\n            helper.attachObject = object;\r\n            this.helpers[object.id] = helper;\r\n            return helper;\r\n        };\r\n\r\n    }(),\r\n\r\n    removeHelper: function (object: any) {\r\n\r\n        if (this.helpers[object.id] !== undefined) {\r\n\r\n            var helper = this.helpers[object.id];\r\n            if (helper.parent) {\r\n                helper.parent.remove(helper);\r\n            }\r\n            delete this.helpers[object.id];\r\n\r\n            // this.engine.refresh();\r\n        }\r\n\r\n    },\r\n\r\n    deleteAttach: function () {\r\n        if (this.currentLight) {\r\n            this.emit({\r\n                type: \"delete:object\",\r\n                objectType: \"light\",\r\n                light: this.currentLight\r\n            })\r\n        } else if (this.currentObject) {\r\n            this.emit({\r\n                type: \"delete:object\",\r\n                objectType: \"object\",\r\n                object: this.currentObject\r\n            });\r\n        }\r\n    },\r\n\r\n\r\n    unselect: function () {\r\n        this.control.detach();\r\n        this.select(null);\r\n        this.selected = null;\r\n    },\r\n\r\n\r\n    executeCommand: function (command: any) {\r\n        if (this.control.object && this.control.object.isTargetControlObject) {\r\n            command = 'translate';\r\n        }\r\n        switch (command) {\r\n\r\n            case \"space\":\r\n                this.control.setSpace(this.control.space === \"local\" ? \"world\" : \"local\");\r\n                break;\r\n\r\n            case \"snap\":\r\n                this.control.setTranslationSnap(100);\r\n                this.control.setRotationSnap(THREE.MathUtils.degToRad(15));\r\n                this.control.setScaleSnap(0.25);\r\n                break;\r\n\r\n            case 'unsnap':\r\n                this.control.setTranslationSnap(null);\r\n                this.control.setRotationSnap(null);\r\n                this.control.setScaleSnap(null);\r\n                break;\r\n\r\n            case \"translate\":\r\n                this.control.setMode(\"translate\");\r\n                break;\r\n\r\n            case \"rotate\":\r\n                this.control.setMode(\"rotate\");\r\n                break;\r\n\r\n            case \"scale\":\r\n                this.control.setMode(\"scale\");\r\n                break;\r\n\r\n            case \"upsize\":\r\n                this.control.setSize(this.control.size + 0.1);\r\n                break;\r\n\r\n            case \"downsize\":\r\n                this.control.setSize(Math.max(this.control.size - 0.1, 0.1));\r\n                break;\r\n\r\n            case \"toggle:x\":\r\n                this.control.showX = !this.control.showX;\r\n                break;\r\n\r\n            case \"toggle:y\":\r\n                this.control.showY = !this.control.showY;\r\n                break;\r\n\r\n            case \"toggle:z\":\r\n                this.control.showZ = !this.control.showZ;\r\n                break;\r\n\r\n            case \"enable\":\r\n                this.control.enabled = !this.control.enabled;\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n        this.engine.refresh();\r\n    },\r\n    itemSize: null,\r\n    itemShadowObject: null,\r\n    areaObjects: null,\r\n    shadowPosY: 0,\r\n    dropPreviewCustomObject: false,\r\n\r\n    dropPosY: 0,\r\n\r\n    boots: [\"initDropPos\"],\r\n    sceneSize: null,\r\n    initDropPos: function () {\r\n        this.sceneSize = {\r\n            width: 4,\r\n            height: 4,\r\n            depth: 4\r\n        };\r\n        this.areaObjects = [];\r\n    },\r\n\r\n    checkMovingEngine: function(){\r\n        if(!this.moving) this.moving = getMovingEngine(this.engine);\r\n        return this;\r\n    },\r\n\r\n    updateDropAreaAreas: function (sceneSize: SceneSize, floorPositionY: number, addItemAboveFloor?: boolean) {\r\n        var self = this;\r\n        assignValue(this.sceneSize, sceneSize);\r\n        this.checkMovingEngine();\r\n        if (this.areaObjects.length) {\r\n            \r\n            this.areaObjects.map(function (o) {\r\n                self.moving.remove(o);\r\n                // self.scene.remove(o);\r\n            });\r\n        }\r\n        var xStart = -sceneSize.width / 2, xEnd = sceneSize.width / 2,\r\n            zStart = -sceneSize.depth / 2, zEnd = sceneSize.depth / 2;\r\n        let colRow = this.dragMoveColRows;\r\n        var areaWidth = sceneSize.width / colRow;\r\n        var areaDepth = sceneSize.depth / colRow;\r\n        var areaHeight = (areaDepth < areaWidth ? areaDepth : areaWidth) / 5;\r\n        \r\n        \r\n        xStart += (areaWidth / 2);\r\n        xEnd -= (areaWidth / 2);\r\n        zStart += (areaDepth / 2);\r\n        zEnd -= (areaDepth / 2);\r\n        \r\n        var y = (addItemAboveFloor && isNumber(floorPositionY) ? floorPositionY : 0);\r\n        this.dropPosY = y;\r\n        \r\n        let boxOrigin = this.engine.Mesh.get({\r\n            geometry: { type: \"box\", width: areaWidth, height: areaHeight, depth: areaDepth },\r\n            material: { type: \"basic\", params: { opacity: 0}, props: {transparent: true,visible: false}},\r\n            props: { visible: false}\r\n        });\r\n        let xC = 0;\r\n        let zC = 0;\r\n\r\n        while (xC <= xEnd) {\r\n            // if (i > 10000) break;\r\n            // i++;\r\n            let zz = zC;\r\n            while (zz <= zEnd) {\r\n                // if (j > 10000) break;\r\n                // j++;\r\n                let box = boxOrigin.clone(true);\r\n                box.position.x = xC;\r\n                box.position.y = y;\r\n                box.position.z = zz;\r\n\r\n                this.areaObjects.push(box);\r\n\r\n                zz += areaDepth;\r\n            }\r\n            xC += areaWidth;\r\n        }\r\n        \r\n        xC = -areaWidth;\r\n        zC = 0;\r\n\r\n        while (xC >= xStart) {\r\n            let zz = zC;\r\n            while (zz <= zEnd) {\r\n                // if (j > 10000) break;\r\n                // j++;\r\n                let box = boxOrigin.clone(true);\r\n                box.position.x = xC;\r\n                box.position.y = y;\r\n                box.position.z = zz;\r\n\r\n                this.areaObjects.push(box);\r\n\r\n                zz += areaDepth;\r\n            }\r\n            xC -= areaWidth;\r\n        }\r\n        \r\n\r\n        xC = 0;\r\n        zC = -areaDepth;\r\n\r\n        while (xC <= xEnd) {\r\n            let zz = zC;\r\n            while (zz >= zStart) {\r\n                // if (j > 10000) break;\r\n                // j++;\r\n                let box = boxOrigin.clone(true);\r\n                box.position.x = xC;\r\n                box.position.y = y;\r\n                box.position.z = zz;\r\n\r\n                this.areaObjects.push(box);\r\n\r\n                zz -= areaDepth;\r\n            }\r\n            xC += areaWidth;\r\n        }\r\n        \r\n\r\n        xC = -areaWidth;\r\n        zC = -areaDepth;\r\n\r\n        while (xC >= xStart) {\r\n            let zz = zC;\r\n            while (zz >= zStart) {\r\n                // if (j > 10000) break;\r\n                // j++;\r\n                let box = boxOrigin.clone(true);\r\n                box.position.x = xC;\r\n                box.position.y = y;\r\n                box.position.z = zz;\r\n\r\n                this.areaObjects.push(box);\r\n\r\n                zz -= areaDepth;\r\n            }\r\n            xC -= areaWidth;\r\n        }\r\n        \r\n        // var self = this;\r\n        this.areaObjects.map(function (b) {\r\n            self.moving.add(b);\r\n            // self.scene.add(b);\r\n        });\r\n\r\n\r\n\r\n    },\r\n\r\n\r\n\r\n    setDragMoveItem: function (itemSize: Vector3, itemPosition?: Vector2, customObject?: any) {\r\n        if (this.sceneSize.width < itemSize.x || this.sceneSize.depth < itemSize.z) {\r\n            this.hasDroppablePosition = false;\r\n            return false;\r\n        }\r\n        var self = this;\r\n        // this.moving.updateCamera(this.engine.camera);\r\n\r\n        this.hasDroppablePosition = true;\r\n        this.itemSize = itemSize;\r\n        var planeWidth = itemSize.x, planeDepth = itemSize.z;\r\n\r\n        ['x', 'y', 'z'].map(s => {\r\n            if (itemSize[s] <= 0) itemSize[s] = 0.04;\r\n        });\r\n        this.shadowPosY = this.dropPosY;\r\n        if (this.itemShadowObject) {\r\n            this.engine.scene.remove(this.itemShadowObject);\r\n            this.itemShadowObject.isAdded = false;\r\n        }\r\n        if (customObject && isObject(customObject) && customObject.uuid) {\r\n            this.dropPreviewCustomObject = true;\r\n\r\n            this.itemShadowObject = customObject;\r\n            this.itemShadowObject.position.y = this.shadowPosY + itemSize.y / 2;\r\n\r\n            this.itemShadowObject.visible = false;\r\n        } else {\r\n            this.dropPreviewCustomObject = false;\r\n            let plane = this.engine.Mesh.get({\r\n                geometry: {\r\n                    type: \"box\", width: planeWidth, height: itemSize.y, depth: planeDepth\r\n                },\r\n                material: {\r\n                    type: \"physical\",\r\n                    params: {\r\n                        color: \"#9ad9f3\"\r\n                    },\r\n                    props: {\r\n                        transparent: true,\r\n                        opacity: 0.4\r\n                    }\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: 0,\r\n                        y: this.shadowPosY + itemSize.y / 2,\r\n                        z: 0\r\n                    }\r\n                }\r\n            });\r\n            \r\n\r\n            plane.isAdded = false;\r\n            this.itemShadowObject = plane;\r\n\r\n        }\r\n\r\n\r\n        var py = this.itemShadowObject.position.y;\r\n\r\n        this.areaObjects.map(function (area) {\r\n            area.position.y = py;\r\n        });\r\n\r\n\r\n\r\n        this.turnOffShadow(1000);\r\n        this.refresh();\r\n        if (itemPosition) {\r\n            this.checkDroppablePosition(itemPosition);\r\n        }\r\n        setTimeout(function () {\r\n            self.moving.updateCamera(self.engine.camera);\r\n        }, 10)\r\n\r\n\r\n    },\r\n    removeDragMoveItem: function () {\r\n        if (!this.hasDroppablePosition) return false;\r\n        if (this.itemShadowObject && !this.dropPreviewCustomObject) {\r\n            if (this.itemShadowObject.isAdded) {\r\n                this.engine.scene.remove(this.itemShadowObject);\r\n            }\r\n            this.itemShadowObject = null;\r\n\r\n        }\r\n        this.hasDroppablePosition = false;\r\n        var self = this;\r\n\r\n        var py = this.dropPosY;\r\n\r\n        this.areaObjects.map(function (area) {\r\n            area.position.y = py;\r\n        });\r\n\r\n\r\n        this.refresh();\r\n        this.emit({\r\n            type: \"additem.position.reset\"\r\n        })\r\n\r\n    },\r\n    \r\n\r\n    checkDroppablePosition: function (pointer: Vector2) {\r\n        var scope = this;\r\n        if (!this.hasDroppablePosition) return false;\r\n        // scope.poiterDowsStatus = false;\r\n        var rect = scope.engine.wrapper.getBoundingClientRect();\r\n        var x = pointer.x - rect.left;\r\n        var y = pointer.y - rect.top;\r\n        if (x < 0 || y < 0) return;\r\n\r\n        pointer.x = (x / rect.width) * 2 - 1;\r\n        pointer.y = - (y / rect.height) * 2 + 1;\r\n        this.checkMovingEngine();\r\n        this.movingRaycaster.setFromCamera(pointer, this.moving.camera);\r\n        // this.raycaster.setFromCamera(pointer, this.engine.camera);\r\n\r\n        const intersects = this.movingRaycaster.intersectObjects(this.areaObjects, true);\r\n        // objects\r\n        // console.log(intersects);\r\n        if (intersects.length > 0) {\r\n            const object = intersects[0].object;\r\n            const obj = this.closestAreaScene(object);\r\n            if (obj) {\r\n                if (this.itemShadowObject) {\r\n                    let o = {\r\n                        x: this.itemShadowObject.position.x,\r\n                        z: this.itemShadowObject.position.z\r\n                    }, n = {\r\n                        x: obj.position.x,\r\n                        z: obj.position.z\r\n                    };\r\n                    var a = o.x != n.x || o.z != n.z;\r\n                    var b = n.x >= -(this.sceneSize.width - this.itemSize.x) / 2 && n.x <= (this.sceneSize.width - this.itemSize.x) / 2;\r\n                    var c = n.z >= -(this.sceneSize.depth - this.itemSize.z) / 2 && n.z <= (this.sceneSize.depth - this.itemSize.z) / 2;\r\n\r\n                    if (a && b && c) {\r\n                        let pos = {\r\n                            x: n.x,\r\n                            y: this.itemShadowObject.position.y,\r\n                            z: n.z\r\n                        }\r\n                        assignValue(this.itemShadowObject.position, n);\r\n                        this.emit({\r\n                            type: \"additem.position.set\",\r\n                            position: pos\r\n                        })\r\n                        \r\n                    }\r\n                    if (!this.dropPreviewCustomObject && !this.itemShadowObject.isAdded) {\r\n\r\n                        this.engine.scene.add(this.itemShadowObject);\r\n                        this.itemShadowObject.isAdded = true;\r\n                    }\r\n                    else if (this.dropPreviewCustomObject) {\r\n                        this.itemShadowObject.visible = true;\r\n                    }\r\n                    this.turnOffShadow(1000);\r\n                    this.refresh();\r\n                }\r\n\r\n            } else if (this.itemShadowObject) {\r\n                if (!this.dropPreviewCustomObject && this.itemShadowObject.isAdded) {\r\n                    this.engine.scene.remove(this.itemShadowObject);\r\n                    this.itemShadowObject.isAdded = false;\r\n                } if (this.dropPreviewCustomObject) {\r\n                    this.itemShadowObject.visible = false;\r\n                }\r\n                this.emit({\r\n                    type: \"additem.position.lock\"\r\n                })\r\n                this.turnOffShadow(1000);\r\n                this.refresh();\r\n            }\r\n        } else {\r\n            this.emit({\r\n                type: \"additem.position.lock\"\r\n            });\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * tìm object trong bảng\r\n     * @param {Object} obj \r\n     * @returns {Object#d|Group|Mesh}\r\n     */\r\n    closestAreaScene: function closestAreaScene(obj: any) {\r\n        if (this.hasDroppablePosition && isObject(obj) && !obj.isSczene) {\r\n\r\n            for (let i = 0; i < this.areaObjects.length; i++) {\r\n                const sobj = this.areaObjects[i];\r\n                if (obj == sobj || obj.uuid == sobj.uuid || (obj.id && obj.id == sobj.id)) return sobj;\r\n            }\r\n            if (obj.parent) {\r\n                return this.closestAreaScene(obj.parent);\r\n            }\r\n\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n});\r\n\r\nconst Editor = Editor__ as EditorClass;\r\n\r\nexport default Editor;\r\nexport { Editor };","export * from './model';\r\nexport * from './service';\r\n","import { Component, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { assignValue, degreeToRadians, radianToDegrees, Str } from '@app/_core/helpers/utils';\nimport { BaseInputComponent } from '../base-input/base-input.component';\n\n@Component({\n  selector: 'inp-rotation',\n  templateUrl: './inp-rotation.component.html',\n  styleUrls: ['./inp-rotation.component.scss']\n})\nexport class InpRotationComponent extends BaseInputComponent implements OnInit, OnChanges {\n\n  degreSymbol : string = \"°\";\n  _value:any = {\n    x:0,\n    y:0,\n    z:0\n  };\n\n  canSync: boolean = false;\n\n  constructor() {\n    super();\n  }\n\n\n\n  ngOnInit(): void {\n    this.syncFromParent();\n    this.canSync = true;\n  }\n\n\n  syncFromParent(){\n    this._value = {\n      x: radianToDegrees(this.value.x),\n      y: radianToDegrees(this.value.y),\n      z: radianToDegrees(this.value.z)\n    }\n  }\n\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if(this.canSync){\n      if(changes.value){\n        this.syncFromParent();\n      }\n    }\n    \n  }\n\n  updateVector(vector, event){\n    this.canSync = false;\n    assignValue(this.value, {\n      x: degreeToRadians(this._value.x),\n      y: degreeToRadians(this._value.y),\n      z: degreeToRadians(this._value.z),\n      \n    })\n    this.emitAfter(0);\n    this.canSync = true;\n  }\n  formatterX = (value: number) => `x: ${value} ${this.degreSymbol}`;\n  parserX = (value: string) => Str.replace(value, ['x', ':', this.degreSymbol, ' '], '');\n\n  formatterY = (value: number) => `y: ${value} ${this.degreSymbol}`;\n  parserY = (value: string) => Str.replace(value, ['y', ':', this.degreSymbol, ' '], '');\n  \n  formatterZ = (value: number) => `z: ${value} ${this.degreSymbol}`;\n  parserZ = (value: string) => Str.replace(value, ['z', ':', this.degreSymbol, ' '], '');\n\n}","<div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\">\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n        <div class=\"inner-box\">\n            <nz-input-number \n                [(ngModel)]=\"_value.x\" \n                name=\"x\" [nzStep]=\"0.01\" \n                (ngModelChange)=\"updateVector('x', $event)\" \n                [nzFormatter]=\"formatterX\"\n                [nzParser]=\"parserX\">\n            </nz-input-number>\n        </div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n        <div class=\"inner-box\">\n            <nz-input-number \n                [(ngModel)]=\"_value.y\" \n                name=\"x\" \n                [nzStep]=\"0.01\" \n                (ngModelChange)=\"updateVector('y', $event)\"\n                [nzFormatter]=\"formatterY\"\n                [nzParser]=\"parserY\">\n            </nz-input-number>\n        </div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n        <div class=\"inner-box\">\n            <nz-input-number \n                [(ngModel)]=\"_value.z\" \n                name=\"x\" \n                [nzStep]=\"0.01\" \n                (ngModelChange)=\"updateVector('z', $event)\"\n                [nzFormatter]=\"formatterZ\"\n                [nzParser]=\"parserZ\">\n            </nz-input-number>\n        </div>\n    </div>\n</div>","import {\r\n    arrayJoin,\r\n    assignValue,\r\n    assignWithout,\r\n    checkType,\r\n    copyWithout,\r\n    cutWithout,\r\n    getInputCfg,\r\n    getObjectPropDepth,\r\n    getType,\r\n    inArray,\r\n    isArray,\r\n    isEmpty,\r\n    isFunction,\r\n    isInteger,\r\n    isNumber,\r\n    isObject,\r\n    isString,\r\n    newObj,\r\n    objectHasKey,\r\n    Str,\r\n    _defineProperties\r\n} from '@app/_core/helpers/utils';\r\n// import { assignValue, assignWithout, isArray, isObject, isString, Str } from '@app/_core/helpers/utils';\r\n\r\nimport * as THREELibs from 'three';\r\nconst THREE = THREELibs;\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\r\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\r\nimport { RoughnessMipmapper } from 'three/examples/jsm/utils/RoughnessMipmapper.js';\r\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';\r\nimport { MTLLoader } from 'three/examples/jsm/loaders/MTLLoader.js';\r\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js';\r\nimport { TDSLoader } from 'three/examples/jsm/loaders/TDSLoader.js';\r\nimport { STLLoader } from 'three/examples/jsm/loaders/STLLoader.js';\r\nimport { SVGLoader } from 'three/examples/jsm/loaders/SVGLoader.js';\r\nimport { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader.js';\r\nimport { getConfig } from '@app/_core/config';\r\nimport { _Geometry, _Materials } from '../store/docs.js';\r\n\r\nconst Geometries: _Geometry = {} as _Geometry, Materials: _Materials = {} as _Materials, Meshes: any = {}, LoaderLib: any = {}, LightLib: any = {};\r\n\r\n\r\n\r\n\r\n\r\n\r\nObject.assign(Geometries, {\r\n    getGeometry: function (type?: any, args?: any) {\r\n        var t, a = {};\r\n        if (isObject(type)) {\r\n            if (!type.type) return null;\r\n            t = String(type.type).toLowerCase();\r\n            assignWithout(a, type.params || type, ['type']);\r\n        }\r\n        else if (isString(type)) {\r\n            t = String(type).toLowerCase();\r\n            if (isObject(args)) {\r\n                a = args;\r\n            }\r\n        }\r\n        t = Str.replace(t, 'geometry', '');\r\n        if (typeof this[t] == \"function\") {\r\n            Props.parse(a);\r\n            // console.log(type, args)\r\n            return this[t].call(this, a);\r\n        }\r\n        return null;\r\n    },\r\n    get: function (type?: any, args?: any) {\r\n        return this.getGeometry(type, args)\r\n    },\r\n    boxbuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            width: 1, height: 1, depth: 1, widthSegments: undefined, heightSegments: undefined, depthSegments: undefined\r\n        });\r\n        var geo = new THREE.BoxBufferGeometry(params.width, params.height, params.depth, params.widthSegments, params.heightSegments, params.depthSegments);\r\n        // geo._params = params;\r\n        return geo;\r\n    },\r\n    box: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            width: 1,\r\n            height: 1,\r\n            depth: 1,\r\n            widthSegments: undefined,\r\n            heightSegments: undefined,\r\n            depthSegments: undefined\r\n        });\r\n\r\n        // console.log(args)\r\n\r\n        // console.log(params)\r\n        var geo = new THREE.BoxGeometry(params.width, params.height, params.depth, params.widthSegments, params.heightSegments, params.depthSegments);\r\n        // geo._params = params;\r\n        return geo;\r\n    },\r\n    circlebuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, segments: 8, thetaStart: undefined, thetaLength: undefined\r\n        });\r\n        var geo = new THREE.CircleBufferGeometry(params.radius, params.segments, params.thetaStart, params.thetaLength);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n\r\n    circle: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, segments: 8, thetaStart: undefined, thetaLength: undefined\r\n        });\r\n        var geo = new THREE.CircleGeometry(params.radius, params.segments, params.thetaStart, params.thetaLength);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    conebuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, height: 1, radialSegments: 8, heightSegments: undefined, openEnded: undefined, thetaStart: undefined, thetaLength: undefined\r\n        });\r\n        var geo = new THREE.ConeBufferGeometry(params.radius, params.height, params.radialSegments, params.heightSegments, params.openEnded, params.thetaStart, params.thetaLength);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    cone: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, height: 1, radialSegments: 8, heightSegments: undefined, openEnded: undefined, thetaStart: undefined, thetaLength: undefined\r\n        });\r\n        var geo = new THREE.ConeGeometry(params.radius, params.height, params.radialSegments, params.heightSegments, params.openEnded, params.thetaStart, params.thetaLength);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    cylinderbuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radiusTop: 1, radiusBottom: 1, height: 1, radialSegments: 8, heightSegments: 1, openEnded: undefined, thetaStart: undefined, thetaLength: undefined\r\n        });\r\n        var geo = new THREE.CylinderBufferGeometry(params.radiusTop, params.radiusBottom, params.height, params.radialSegments, params.heightSegments, params.openEnded, params.thetaStart, params.thetaLength);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    cylinder: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radiusTop: 1, radiusBottom: 1, height: 1, radialSegments: 8, heightSegments: 1, openEnded: undefined, thetaStart: undefined, thetaLength: undefined\r\n        });\r\n        var geo = new THREE.CylinderGeometry(params.radiusTop, params.radiusBottom, params.height, params.radialSegments, params.heightSegments, params.openEnded, params.thetaStart, params.thetaLength);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    dodecahedronbuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, detail: 0\r\n        });\r\n        var geo = new THREE.DodecahedronBufferGeometry(params.radius, params.detail);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    dodecahedron: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, detail: 0\r\n        });\r\n        var geo = new THREE.DodecahedronGeometry(params.radius, params.detail);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    edges: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            geometry: null, thresholdAngle: 1\r\n        });\r\n        if (params.geometry && typeof params.geometry == \"object\") {\r\n            if (params.geometry.type && (params.geometry.params || params.geometry.args)) {\r\n                var geometry = this.getGeometry(params.geometry.type, params.geometry.params || params.geometry.args);\r\n                if (geometry) {\r\n                    var geo = new THREE.EdgesGeometry(geometry, params.thresholdAngle);\r\n                    // geo.___params = params;\r\n                    return geo;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    extrudebuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            shape: null, options: {}\r\n        });\r\n        if (params.shape && isArray(params.shape) && params.shape.length) {\r\n            var shape = new THREE.Shape();\r\n            var p0 = params.shape[0];\r\n            if (isArray(p0)) {\r\n                shape.moveTo(p0[0] !== undefined ? p0[0] : 0, p0[1] !== undefined ? p0[1] : 0);\r\n            }\r\n            else if (isObject(p0)) {\r\n                shape.moveTo(p0.x !== undefined ? p0.x : 0, p0.y !== undefined ? p0.y : 0)\r\n            } else {\r\n                shape.moveTo(0, 0);\r\n            }\r\n\r\n            for (let i = 1; i < params.shape.length; i++) {\r\n                const point = params.shape[i];\r\n                if (isArray(point)) {\r\n                    shape.lineTo(point[0] !== undefined ? point[0] : 0, point[1] !== undefined ? point[1] : 0);\r\n                }\r\n                else if (isObject(point)) {\r\n                    shape.lineTo(point.x !== undefined ? point.x : 0, point.y !== undefined ? point.y : 0)\r\n                }\r\n            }\r\n            var geo = new THREE.ExtrudeBufferGeometry(shape, params.options);\r\n            // geo.___params = params;\r\n            return geo;\r\n        }\r\n        return null;\r\n    },\r\n    extrude: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            shape: null, options: {}\r\n        });\r\n        if (params.shape && isArray(params.shape)) {\r\n            var shape = new THREE.Shape();\r\n            var p0 = params.shape[0];\r\n            if (isArray(p0)) {\r\n                shape.moveTo(p0[0] !== undefined ? p0[0] : 0, p0[1] !== undefined ? p0[1] : 0);\r\n            }\r\n            else if (isObject(p0)) {\r\n                shape.moveTo(p0.x !== undefined ? p0.x : 0, p0.y !== undefined ? p0.y : 0)\r\n            } else {\r\n                shape.moveTo(0, 0);\r\n            }\r\n\r\n            for (let i = 1; i < params.shape.length; i++) {\r\n                const point = params.shape[i];\r\n                if (isArray(point)) {\r\n                    shape.lineTo(point[0] !== undefined ? point[0] : 0, point[1] !== undefined ? point[1] : 0);\r\n                }\r\n                else if (isObject(point)) {\r\n                    shape.lineTo(point.x !== undefined ? point.x : 0, point.y !== undefined ? point.y : 0)\r\n                }\r\n            }\r\n            var geo = new THREE.ExtrudeGeometry(shape, params.options);\r\n            // geo.___params = params;\r\n            return geo;\r\n        }\r\n        return null;\r\n    },\r\n    icosahedronbuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, detail: 0\r\n        });\r\n        var geo = new THREE.IcosahedronBufferGeometry(params.radius, params.detail);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    icosahedron: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, detail: 0\r\n        });\r\n        var geo = new THREE.IcosahedronGeometry(params.radius, params.detail);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    octahedronbuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, detail: 0\r\n        });\r\n        var geo = new THREE.OctahedronBufferGeometry(params.radius, params.detail);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    octahedron: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, detail: 0\r\n        });\r\n        var geo = new THREE.OctahedronGeometry(params.radius, params.detail);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n\r\n    planebuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            width: 1, height: 1, widthSegments: 1, heightSegments: 1\r\n        });\r\n        var geo = new THREE.PlaneBufferGeometry(params.width, params.height, params.widthSegments, params.heightSegments);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    plane: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            width: 1, height: 1, widthSegments: 1, heightSegments: 1\r\n        });\r\n        var geo = new THREE.PlaneGeometry(params.width, params.height, params.widthSegments, params.heightSegments);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    ringbuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            innerRadius: 0.5, outerRadius: 1, thetaSegments: 8, phiSegments: 1, thetaStart: 0, thetaLength: Math.PI * 2\r\n        });\r\n        var geo = new THREE.RingBufferGeometry(params.innerRadius, params.outerRadius, params.thetaSegments, params.phiSegments, params.thetaStart, params.thetaLength);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    ring: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            innerRadius: 0.5, outerRadius: 1, thetaSegments: 8, phiSegments: 1, thetaStart: 0, thetaLength: Math.PI * 2\r\n        });\r\n        var geo = new THREE.RingGeometry(params.innerRadius, params.outerRadius, params.thetaSegments, params.phiSegments, params.thetaStart, params.thetaLength);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    shape: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            points: [], curveSegments: 12\r\n        });\r\n        var shape = new THREE.Shape();\r\n        var p0 = params.shape[0];\r\n        if (isArray(p0)) {\r\n            shape.moveTo(p0[0] !== undefined ? p0[0] : 0, p0[1] !== undefined ? p0[1] : 0);\r\n        }\r\n        else if (isObject(p0)) {\r\n            shape.moveTo(p0.x !== undefined ? p0.x : 0, p0.y !== undefined ? p0.y : 0)\r\n        } else {\r\n            shape.moveTo(0, 0);\r\n        }\r\n\r\n        for (let i = 1; i < params.shape.length; i++) {\r\n            const point = params.shape[i];\r\n            if (isArray(point)) {\r\n                shape.lineTo(point[0] !== undefined ? point[0] : 0, point[1] !== undefined ? point[1] : 0);\r\n            }\r\n            else if (isObject(point)) {\r\n                shape.lineTo(point.x !== undefined ? point.x : 0, point.y !== undefined ? point.y : 0)\r\n            }\r\n        }\r\n\r\n        var geo = new THREE.ShapeGeometry(shape, params.curveSegments);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    shapebuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            points: [], curveSegments: 12\r\n        });\r\n        var shape = new THREE.Shape();\r\n        var p0 = params.shape[0];\r\n        if (isArray(p0)) {\r\n            shape.moveTo(p0[0] !== undefined ? p0[0] : 0, p0[1] !== undefined ? p0[1] : 0);\r\n        }\r\n        else if (isObject(p0)) {\r\n            shape.moveTo(p0.x !== undefined ? p0.x : 0, p0.y !== undefined ? p0.y : 0)\r\n        } else {\r\n            shape.moveTo(0, 0);\r\n        }\r\n\r\n        for (let i = 1; i < params.shape.length; i++) {\r\n            const point = params.shape[i];\r\n            if (isArray(point)) {\r\n                shape.lineTo(point[0] !== undefined ? point[0] : 0, point[1] !== undefined ? point[1] : 0);\r\n            }\r\n            else if (isObject(point)) {\r\n                shape.lineTo(point.x !== undefined ? point.x : 0, point.y !== undefined ? point.y : 0)\r\n            }\r\n        }\r\n\r\n        var geo = new THREE.ShapeBufferGeometry(shape, params.curveSegments);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    spherebuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, widthSegments: 8, heightSegments: 8, phiStart: 0, phiLength: Math.PI * 2, thetaStart: 0, thetaLength: Math.PI\r\n        });\r\n        var geo = new THREE.SphereBufferGeometry(params.radius, params.widthSegments, params.heightSegments, params.phiStart, params.phiLength, params.thetaStart, params.thetaLength);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    sphere: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: undefined, widthSegments: undefined, heightSegments: undefined, phiStart: undefined, phiLength: undefined, thetaStart: undefined, thetaLength: undefined\r\n        });\r\n        var geo = new THREE.SphereGeometry(params.radius, params.widthSegments, params.heightSegments, params.phiStart, params.phiLength, params.thetaStart, params.thetaLength);\r\n        // geo.___params = params;\r\n\r\n        return geo;\r\n    },\r\n    tetrahedronbuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, detail: 0\r\n        });\r\n        var geo = new THREE.TetrahedronBufferGeometry(params.radius, params.detail);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    tetrahedron: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, detail: 0\r\n        });\r\n        var geo = new THREE.TetrahedronGeometry(params.radius, params.detail);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    textbuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            text: \"\", font: null, options: {}\r\n        });\r\n        var geo = new THREE.TextBufferGeometry(params.text, Object.assign({\r\n            font: params.font,\r\n            size: 80,\r\n            height: 5,\r\n            curveSegments: 12,\r\n            bevelEnabled: true,\r\n            bevelThickness: 10,\r\n            bevelSize: 8,\r\n            bevelOffset: 0,\r\n            bevelSegments: 5\r\n        }, params.options));\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    text: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            text: \"\", font: null, options: {}\r\n        });\r\n        var geo = new THREE.TextGeometry(params.text, Object.assign({\r\n            font: params.font,\r\n            size: 80,\r\n            height: 5,\r\n            curveSegments: 12,\r\n            bevelEnabled: true,\r\n            bevelThickness: 10,\r\n            bevelSize: 8,\r\n            bevelOffset: 0,\r\n            bevelSegments: 5\r\n        }, params.options));\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    torusbuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, tube: 0.4, radialSegments: 8, tubularSegments: 6, arc: Math.PI * 2\r\n        });\r\n        var geo = new THREE.TorusBufferGeometry(params.radius, params.tobe, params.radialSegments, params.tubularSegments, params.arc);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    torus: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, tube: 0.4, radialSegments: 8, tubularSegments: 6, arc: Math.PI * 2\r\n        });\r\n        var geo = new THREE.TorusGeometry(params.radius, params.tobe, params.radialSegments, params.tubularSegments, params.arc);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    torusknotbuffer: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, tube: 0.4, tubularSegments: 64, radialSegments: 8, p: 2, q: 3\r\n        });\r\n        var geo = new THREE.TorusKnotBufferGeometry(params.radius, params.tobe, params.tubularSegments, params.radialSegments, params.p, params.q);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n    torusknot: function (args?: any) {\r\n        var params = parseParams(args, {\r\n            radius: 1, tube: 0.4, tubularSegments: 64, radialSegments: 8, p: 2, q: 3\r\n        });\r\n        var geo = new THREE.TorusKnotGeometry(params.radius, params.tobe, params.tubularSegments, params.radialSegments, params.p, params.q);\r\n        // geo.___params = params;\r\n        return geo;\r\n    },\r\n\r\n    getConfig: function (key?: any) {\r\n        if (!key) return this.config.instances;\r\n        if (!isString(key)) return {};\r\n        var k = Str.replace(String(key).toLowerCase(), 'geometry', '');\r\n        var cfg = this.config.instances[k];\r\n        return cfg ? cfg : {};\r\n\r\n    },\r\n\r\n\r\n    config: {\r\n        instances: {\r\n            box: {\r\n                params: {\r\n                    width: \"float\",\r\n                    height: \"float\",\r\n                    depth: \"float\",\r\n                    widthSegments: \"integer\",\r\n                    heightSegments: \"integer\",\r\n                    depthSegments: \"integer\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        width: 1, height: 1, depth: 1, widthSegments: undefined, heightSegments: undefined, depthSegments: undefined\r\n                    }\r\n                }\r\n            },\r\n            sphere: {\r\n                params: {\r\n                    radius: \"float\", widthSegments: \"integer\", heightSegments: \"integer\", phiStart: \"float\", phiLength: \"float\", thetaStart: \"float\", thetaLength: \"float\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        radius: 1, widthSegments: 50, heightSegments: 50, phiStart: undefined, phiLength: undefined, thetaStart: undefined, thetaLength: undefined\r\n                    }\r\n                }\r\n            },\r\n\r\n            cone: {\r\n                params: {\r\n                    radius: \"float\",\r\n                    height: \"float\",\r\n                    radialSegments: \"integer\",\r\n                    heightSegments: \"integer\",\r\n                    openEnded: \"boolean\",\r\n                    thetaStart: \"float\",\r\n                    thetaLength: \"float\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        radius: 1, height: 1, radialSegments: 8, heightSegments: undefined, openEnded: undefined, thetaStart: undefined, thetaLength: undefined\r\n                    }\r\n                }\r\n            },\r\n            cylinder: {\r\n                params: {\r\n                    radiusTop: \"float\", radiusBottom: \"float\", height: \"float\", radialSegments: \"integer\", heightSegments: \"integer\", openEnded: \"boolean\", thetaStart: \"float\", thetaLength: \"float\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        radiusTop: 1, radiusBottom: 1, height: 1, radialSegments: 8, heightSegments: 1, openEnded: undefined, thetaStart: undefined, thetaLength: undefined\r\n                    }\r\n                }\r\n            },\r\n            plane: {\r\n                params: {\r\n                    width: \"float\", height: \"float\", widthSegments: \"integer\", heightSegments: \"integer\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        width: 1, height: 1, widthSegments: 1, heightSegments: 1\r\n                    }\r\n                }\r\n            },\r\n\r\n\r\n            circle: {\r\n                params: {\r\n                    radius: \"float\",\r\n                    segments: \"integer\",\r\n                    thetaStart: \"float\",\r\n                    thetaLength: \"float\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        radius: 1, segments: 8, thetaStart: undefined, thetaLength: undefined\r\n                    }\r\n                }\r\n            },\r\n\r\n            ring: {\r\n                params: {\r\n                    innerRadius: \"float\", outerRadius: \"float\", thetaSegments: \"integer\", phiSegments: \"integer\", thetaStart: \"float\", thetaLength: \"float\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        innerRadius: 0.5, outerRadius: 1, thetaSegments: 8, phiSegments: 1, thetaStart: 0, thetaLength: Math.PI * 2\r\n                    }\r\n                }\r\n            },\r\n\r\n            dodecahedron: {\r\n                params: {\r\n                    radius: \"float\", detail: \"integer\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        radius: 1, detail: 0\r\n                    }\r\n                }\r\n            },\r\n\r\n            icosahedron: {\r\n                params: {\r\n                    radius: \"float\", detail: \"integer\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        radius: 1, detail: 0\r\n                    }\r\n                }\r\n            },\r\n\r\n            octahedron: {\r\n                params: {\r\n                    radius: \"float\", detail: \"integer\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        radius: 1, detail: 0\r\n                    }\r\n                }\r\n            },\r\n\r\n\r\n\r\n            tetrahedron: {\r\n                params: {\r\n                    radius: \"float\", detail: \"integer\"\r\n                },\r\n                props: {},\r\n                data: {\r\n                    params: {\r\n                        radius: 1, detail: 0\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        propTypes: {\r\n            buffer: {\r\n                attributes: \"object\",\r\n                boundingBox: \"Box3\",\r\n                boundingSphere: \"Sphere\",\r\n                drawRange: \"object\",\r\n                groups: \"array\",\r\n                id: \"locked\",\r\n                index: \"BufferAttribute\",\r\n                morphAttributes: \"object\",\r\n                morphTargetsRelative: \"boolean\",\r\n                name: \"string\",\r\n                userData: \"object\",\r\n                uuid: \"string\"\r\n            },\r\n            instancedbuffer: {\r\n                instanceCount: \"number\"\r\n            }\r\n        },\r\n        options: []\r\n    }\r\n});\r\n\r\nfor (const key in Geometries.config.instances) {\r\n    if (Object.hasOwnProperty.call(Geometries.config.instances, key)) {\r\n        const intenceConfig = Geometries.config.instances[key];\r\n        intenceConfig.props = assignValue({ parameters: \"object\" }, Geometries.config.propTypes.buffer);\r\n        if (inArray(['box', 'plane', 'sphere', 'circle', 'cylinder'], key)) {\r\n            Geometries.config.options.push({\r\n                name: key,\r\n                value: key,\r\n                type: key,\r\n                label: Str.ucfirst(key)\r\n            })\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nconst sideOptions = {};\r\nsideOptions[THREE.FrontSide] = \"Front Side\";\r\nsideOptions[THREE.BackSide] = \"Back Side\";\r\nsideOptions[THREE.DoubleSide] = \"Double Side\";\r\nObject.assign(Materials, {\r\n    getMaterial: function (type?: any, args?: any, props?: any, ignoreFlipY?: boolean, success?: any) {\r\n        var self: any = this;\r\n        if (typeof type == \"object\") {\r\n            args = assignWithout({}, type.params || type, ['type', 'props']);\r\n            props = type.props || assignWithout({}, type, ['type', 'params'], args);\r\n            type = type.type;\r\n\r\n        } else {\r\n            if (!args) args = {};\r\n            props = props || args.props || assignWithout({}, args, ['type']);\r\n        }\r\n        var t = String(type).toLowerCase();\r\n        t = Str.replace(t, ['mesh'], '');\r\n        if (!t) t = 'basic';\r\n        else if (t == 'material') t = 'default';\r\n        t = Str.replace(t, ['material'], '');\r\n\r\n        if (typeof self['__' + t] == \"function\") {\r\n            if (!isEmpty(args)) args = this.parseParams(Props.parse(cutWithout(args, ['type'])), ignoreFlipY, success);\r\n            if (!isEmpty(props)) props = Props.parse(props);\r\n            var propTypes = this.getTypeProps(t);\r\n            for (const key in props) {\r\n                if (Object.hasOwnProperty.call(props, key)) {\r\n                    const vl = props[key];\r\n                    if (Object.hasOwnProperty.call(propTypes, key)) {\r\n                        var tp = propTypes[key];\r\n                        if (tp == \"Color\") {\r\n                            props[key] = parseColor(vl)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            for (const key in args) {\r\n                if (Object.hasOwnProperty.call(args, key)) {\r\n                    const vl = args[key];\r\n                    if (Object.hasOwnProperty.call(propTypes, key)) {\r\n                        var tp = propTypes[key];\r\n                        if (tp == \"Color\") {\r\n                            args[key] = parseColor(vl)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            var material = this['__' + t].call(this, args);\r\n            var p = assignWithout({}, props, material.___params, ['type']);\r\n\r\n            this.setProperties(t, material, p, ignoreFlipY);\r\n            // console.log(material)\r\n            return material;\r\n        }\r\n        return null;\r\n    },\r\n    get: function (type?: any, args?: any, props?: any, ignoreFlipY?: boolean, success?: any) {\r\n        return this.getMaterial(type, args, props, ignoreFlipY, success);\r\n    },\r\n    parseParams: function (params, ignoreFlipY?: boolean, success?: any) {\r\n        if (isObject(params)) {\r\n            for (const key in params) {\r\n                if (Object.prototype.hasOwnProperty.call(params, key)) {\r\n                    const val = params[key];\r\n                    if (objectHasKey(this.config.properties, key)) {\r\n                        let inp = this.config.properties[key];\r\n\r\n\r\n                        if (inp.type == \"Texture\" && isString(val)) {\r\n                            let lo: any = {\r\n                                file: val,\r\n                                ignoreFlipY\r\n                            };\r\n                            if (!ignoreFlipY) {\r\n                                lo.flipY = false;\r\n                            }\r\n                            var map = LoaderLib.load(\"texture\", lo, function (d) {\r\n                                if (typeof success == \"function\") {\r\n                                    success(d);\r\n                                }\r\n                            });\r\n                            params[key] = map;\r\n\r\n                        } else if (inp.type == \"Color\") {\r\n\r\n                            params[key] = parseColor(val);\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        return params;\r\n    },\r\n    setProperties: function (type?: any, material?: any, properties?: any, success?: any, ignoreFlipY?: boolean) {\r\n        let props: any = {};\r\n        if (typeof properties == \"object\") {\r\n            if (!isEmpty(properties)) {\r\n                assignWithout(props, properties, ['type']);\r\n                Props.parse(props, success);\r\n            }\r\n\r\n            var defProps = this.getTypeProps(type);\r\n            for (const key in props) {\r\n                if (props.hasOwnProperty(key) && typeof defProps[key] != \"undefined\" && key != \"type\") {\r\n                    const val = props[key];\r\n                    const typ = typeof defProps[key] != \"undefined\" ? defProps[key] : null;\r\n                    if (!typ) {\r\n                        continue;\r\n                    }\r\n                    else if (typeof typ == \"function\") {\r\n                        if (typ(val)) {\r\n                            material[key] = val;\r\n                        }\r\n                    }\r\n                    else if (typeof typ == \"string\") {\r\n                        if (inArray([\"Texture\", \"Vector2\", \"Vector3\"], typ)) {\r\n                            if (isObject(val) && val.uuid) {\r\n                                material[key] = val;\r\n                            } else if (typ == \"Texture\" && isString(val)) {\r\n                                let lo: any = {\r\n                                    file: val,\r\n                                    ignoreFlipY\r\n                                };\r\n                                if (!ignoreFlipY) {\r\n                                    lo.flipY = false;\r\n                                }\r\n                                var map = LoaderLib.load(\"texture\", lo, function (d) {\r\n                                    if (typeof success == \"function\") {\r\n                                        success(d);\r\n                                    }\r\n                                });\r\n                                material[key] = map;\r\n                            }\r\n                        } else if (typ == \"Color\") {\r\n\r\n                            material[key] = parseColor(val);\r\n\r\n                        }\r\n                        else {\r\n                            var ts = typ.split(\"|\");\r\n                            var s = false;\r\n                            for (let i = 0; i < ts.length; i++) {\r\n                                const ti = ts[i];\r\n                                const tis = ti.split(':');\r\n                                if (checkType(tis[0].trim(), val)) {\r\n                                    if (tis.length > 1) {\r\n                                        let vl = tis[1].trim().split(',').map(function (v) {\r\n                                            return String(v).trim();\r\n                                        });\r\n                                        if (inArray(vl, String(val))) {\r\n                                            s = true;\r\n                                            i += ts.length;\r\n                                        }\r\n                                    } else {\r\n                                        s = true;\r\n                                        i += ts.length;\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (s) {\r\n                                material[key] = val;\r\n                            }\r\n                        }\r\n                        material.needsUpdate = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return material;\r\n    },\r\n\r\n    /**\r\n     * lay ra kieu thuoc tinh cuar loaai material tuong ung\r\n     * @param {string} type loai material\r\n     */\r\n    getTypeProps: function (type?: any) {\r\n        var properties = {};\r\n        function addPropType(key, prop) {\r\n            properties[key] = prop.type;\r\n        }\r\n        var def = arrayJoin([], this.config.propGroup.default);\r\n        var t = Str.replace(String(type).toLowerCase(), ['mesh', 'material'], '');\r\n        if (t && t != 'default' && typeof this.config.propGroup[t] != \"undefined\") {\r\n            arrayJoin(def, this.config.propGroup[t]);\r\n        }\r\n        // addPropType(def);\r\n        var self = this;\r\n        def.map(function (t) {\r\n            if (typeof self.config.properties[t] != \"undefined\") {\r\n                addPropType(t, self.config.properties[t]);\r\n            }\r\n        })\r\n        return properties;\r\n\r\n    },\r\n\r\n    /**\r\n     * chuan hoa thuoc tinh matẻial\r\n     * @param {string} type loai5 matẻial\r\n     * @param {object} props \r\n     */\r\n    parseProps: function (type?: any, props?: any) {\r\n        var properties = {};\r\n        var p = this.getTypeProps(type);\r\n        if (isObject(props) && !isEmpty(props)) {\r\n            for (const key in props) {\r\n                if (props.hasOwnProperty(key)) {\r\n                    const val = props[key];\r\n                    if (typeof p[key] == \"string\") {\r\n                        const typeVal = p[key];\r\n                        var t = typeVal.toLowerCase();\r\n                        if (inArray(['texture', 'texturecube', 'object', 'color', 'vector', 'vector2', 'vector3', 'vector4'], t) && isObject(val)) {\r\n                            properties[key] = val;\r\n                        } else if (t == \"color\" && (inArray(['string', 'number'], getType(val)))) {\r\n                            properties[key] = createColor(val);\r\n                        } else if (t == \"boolean\") {\r\n                            if (isString(val)) {\r\n                                var v = val.toLowerCase();\r\n                                properties[key] = v && v !== \"false\" && v !== \"0\" && v != \"off\" ? true : false;\r\n                            } else {\r\n                                properties[key] = val ? true : false;\r\n                            }\r\n                        } else if (checkType(typeVal, val)) {\r\n                            properties[key] = val;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return properties;\r\n\r\n    },\r\n\r\n    parseType: function (type: any) {\r\n        return Str.replace(String(isObject(type) ? type.type : type).toLowerCase(), ['mesh', 'material'], '');;\r\n    },\r\n\r\n    getDetectedProps: function detectProps(material?: any) {\r\n        var props = {};\r\n        if (isObject(material)) {\r\n            var type = material.type ? Str.replace(String(material.type), ['mesh', 'material'], '') : \"\";\r\n            if (type) {\r\n                var defProps = this.getTypeProps(type);\r\n\r\n                for (const key in material) {\r\n                    if (material.hasOwnProperty(key)) {\r\n                        const val = material[key];\r\n                        if (typeof defProps[key] != \"undefined\") {\r\n                            props[key] = val;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return props;\r\n    },\r\n    getPropData: function getPropData(material?: any) {\r\n        var props = {};\r\n        if (isObject(material)) {\r\n            var type = material.type ? Str.replace(String(material.type), ['mesh', 'material'], '') : \"\";\r\n            if (!type) type = 'default';\r\n\r\n            var defProps = this.getTypeProps(type);\r\n\r\n            for (const key in material) {\r\n                if (material.hasOwnProperty(key)) {\r\n                    const val = material[key];\r\n                    if (typeof defProps[key] != \"undefined\" && key != \"uuid\") {\r\n                        switch (defProps[key]) {\r\n                            case \"Color\":\r\n                                props[key] = \"#\" + val.getHexString();\r\n                                break;\r\n\r\n                            default:\r\n                                props[key] = val;\r\n                                break;\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n        return props;\r\n    },\r\n    /**\r\n     * lay map cuar material\r\n     * @param {object} material \r\n     */\r\n    getMaps: function getMaps(material?: any) {\r\n        var props = {};\r\n        if (isObject(material)) {\r\n            var type = material.type ? Str.replace(String(material.type), ['mesh', 'material'], '') : \"\";\r\n            if (type) {\r\n                var defProps = this.getTypeProps(type);\r\n\r\n                for (const key in defProps) {\r\n                    if (defProps.hasOwnProperty(key)) {\r\n                        const value = defProps[key];\r\n                        if (value.toLowerCase() == \"texture\") {\r\n                            if (material.hasOwnProperty(key) && material[key]) {\r\n                                props[key] = material[key];\r\n                            } else {\r\n                                props[key] = null;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return props;\r\n    },\r\n    /**\r\n     * lay map cuar material\r\n     * @param {object} material \r\n     */\r\n    getColors: function getMaps(material?: any) {\r\n        var props = {};\r\n        if (isObject(material)) {\r\n            var type = material.type ? Str.replace(String(material.type), ['mesh', 'material'], '') : \"\";\r\n            if (type) {\r\n                var defProps = this.getTypeProps(type);\r\n\r\n                for (const key in defProps) {\r\n                    if (defProps.hasOwnProperty(key)) {\r\n                        const value = defProps[key];\r\n                        if (value.toLowerCase() == \"color\") {\r\n                            if (material.hasOwnProperty(key) && material[key]) {\r\n                                props[key] = material[key];\r\n                            } else {\r\n                                props[key] = null;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return props;\r\n    },\r\n\r\n    /**\r\n     * lay map cuar material\r\n     * @param {object} material \r\n     */\r\n    getCloneMaps: function getCloneMaps(material?: any) {\r\n        var m = material;\r\n        if (isObject(material)) {\r\n            var type = material.type ? Str.replace(String(material.type), ['mesh', 'material'], '') : \"\";\r\n            var props = {};\r\n            if (type) {\r\n                var defProps = this.getTypeProps(type);\r\n                for (const key in defProps) {\r\n                    if (defProps.hasOwnProperty(key)) {\r\n                        const value = defProps[key];\r\n                        if (value.toLowerCase() == \"texture\") {\r\n                            if (material.hasOwnProperty(key) && material[key]) {\r\n                                props[key] = material[key];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                m = this.get(type, props);\r\n            }\r\n        }\r\n        return m;\r\n    },\r\n\r\n    getMaterialType: function (str: string) {\r\n        return str ? Str.replace(String(str).toLowerCase(), ['mesh', 'material'], '') : null;\r\n    },\r\n\r\n    getMaterialInputs: function (materialType: string, material: any, settings?: any, editableList?: any): any[] {\r\n        let _type = materialType ? Str.replace(String(materialType).toLowerCase(), ['mesh', 'material'], '') : 'basic';\r\n        let _material = this.config.data[_type];\r\n        let _settings = isObject(settings) ? settings : {};\r\n        if (!_material) return [];\r\n        let inputs = [];\r\n\r\n        let ignore = [];\r\n\r\n\r\n        /**\r\n         * \r\n         * @param type loại input\r\n         * @param name tên input\r\n         * @param value gia tri\r\n         * @param options option\r\n         */\r\n        const addInput = (type: string, name: string, value: (string | number | boolean | { [x: string]: any }), options?: any) => {\r\n            inputs.push(assignValue({\r\n                type: type,\r\n                name: name,\r\n                value: value\r\n            }, options));\r\n        }\r\n\r\n        let materialProps = _material.props;\r\n        let editable = _material.editable;\r\n        const isArrayEditAble = isArray(editableList);\r\n\r\n        for (let index = 0; index < editable.length; index++) {\r\n            const key = editable[index];\r\n\r\n            if (Object.prototype.hasOwnProperty.call(materialProps, key) && key != \"name\" && ignore.indexOf(key) == -1 && inArray(this.config.availableInputs, key)) {\r\n\r\n                const prop = materialProps[key];\r\n                const type = prop.type.split(\":\")[0].toLowerCase();\r\n                const value = typeof _settings[key] != \"undefined\" ? _settings[key] : (isObject(material) && typeof material[key] != \"undefined\" ? material[key] : prop.value);\r\n                var inputType = prop.data.inputType;\r\n                const inputOptions: any = {};\r\n                let isEditAble = (isArrayEditAble && editableList.indexOf(key) !== -1) || (!isArrayEditAble);\r\n                switch (type) {\r\n                    case 'boolean':\r\n                        addInput(\"checkbox\", key, value, { editable: isEditAble });\r\n                        break;\r\n                    case 'string':\r\n                        if (inputType == \"select\") {\r\n                            addInput(\"select\", key, value, { options: prop.data.options, editable: isEditAble, valueType: prop.data.valueType || null })\r\n                        } else {\r\n                            addInput(\"text\", key, value, { editable: isEditAble })\r\n                        }\r\n                        break;\r\n                    case \"number\":\r\n                    case \"float\":\r\n                    case \"integer\":\r\n                        if (inputType == \"select\") {\r\n                            addInput(\"select\", key, value, { options: prop.data.options, editable: isEditAble, valueType: prop.data.valueType || null });\r\n                        } else {\r\n                            assignWithout(inputOptions, prop.data, ['inputType']);\r\n                            //  inputOptions.layout = \"smart\";\r\n                            if (inputType == \"range\") inputOptions.outputWidth = 2;\r\n                            inputOptions.editable = isEditAble;\r\n                            if (type == \"integer\") {\r\n                                let a = assignValue({\r\n                                    min: -99999999,\r\n                                    max: 99999999,\r\n                                    step: 1\r\n                                }, inputOptions);\r\n                                assignValue(inputOptions, a);\r\n                            }\r\n                            addInput(inputType == \"range\" ? inputType : 'number', key, value, inputOptions);\r\n                        }\r\n                        break;\r\n\r\n                    case \"color\":\r\n                    case 'texture':\r\n                        inputOptions.editable = isEditAble;\r\n                        if (typeof materialProps[key + \"Intensity\"] != \"undefined\") {\r\n                            inputOptions.attach = assignValue(materialProps[key + \"Intensity\"].data);\r\n                            inputOptions.attach.name = key + \"Intensity\";\r\n                            inputOptions.attach.type = inputOptions.attach.inputType || \"range\";\r\n                            if (_settings[key + \"Intensity\"] !== undefined) {\r\n                                inputOptions.attach.value = _settings[key + \"Intensity\"];\r\n                            }\r\n                            else if (_material[key + \"Intensity\"] !== undefined) {\r\n                                inputOptions.attach.value = _material[key + \"Intensity\"];\r\n                            } else {\r\n                                inputOptions.attach.value = materialProps[key + \"Intensity\"].value;\r\n                            }\r\n                            ignore.push(key + \"Intensity\");\r\n                        }\r\n\r\n                        var vl = type == \"color\" && isObject(value) ? (\r\n                            value.isColor ? \"#\" + value.getHexString() : (\r\n                                value.$three == \"color\" ? value.color : \"#000000\"\r\n                            )\r\n                        ) : value;\r\n\r\n                        addInput(type, key, vl, inputOptions);\r\n                        break;\r\n\r\n\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return inputs;\r\n    },\r\n\r\n    __default: function () {\r\n        return new THREE.Material();\r\n    },\r\n\r\n    __linebasic: function (parameters?: any) {\r\n        var options = {\r\n            color: 0xffffff,\r\n            linewidth: 1,\r\n            linecap: 'round', //ignored by WebGLRenderer\r\n            linejoin: 'round' //ignored by WebGLRenderer\r\n        };\r\n        assignValue(options, parameters);\r\n        options.color = parseColorIntVal(options.color);\r\n        return new THREE.LineBasicMaterial(options);\r\n\r\n    },\r\n\r\n    __linedashed: function (parameters?: any) {\r\n        var options = {\r\n            color: 0xffffff,\r\n            linewidth: 1,\r\n            scale: 1,\r\n            dashSize: 3,\r\n            gapSize: 1,\r\n        };\r\n        assignValue(options, parameters);\r\n        options.color = parseColorIntVal(options.color);\r\n        return new THREE.LineDashedMaterial(options);\r\n\r\n    },\r\n\r\n    __basic: function (parameters?: any) {\r\n        return new THREE.MeshBasicMaterial(parameters);\r\n    },\r\n\r\n    __depth: function (parameters?: any) {\r\n        return new THREE.MeshDepthMaterial(parameters);\r\n    },\r\n\r\n    __distance: function (parameters?: any) {\r\n        return new THREE.MeshDistanceMaterial(parameters);\r\n    },\r\n\r\n    __lambert: function (parameters?: any) {\r\n        return new THREE.MeshLambertMaterial(parameters);\r\n    },\r\n\r\n    __matcap: function (parameters?: any) {\r\n        return new THREE.MeshMatcapMaterial(parameters);\r\n    },\r\n\r\n    __normal: function (parameters?: any) {\r\n        return new THREE.MeshNormalMaterial(parameters);\r\n    },\r\n\r\n    __phong: function (parameters?: any) {\r\n        return new THREE.MeshPhongMaterial(parameters);\r\n    },\r\n\r\n    __physical: function (parameters?: any) {\r\n        return new THREE.MeshPhysicalMaterial(parameters);\r\n    },\r\n    __standard: function (parameters?: any) {\r\n        return new THREE.MeshStandardMaterial(parameters);\r\n    },\r\n\r\n    __toon: function (parameters?: any) {\r\n        return new THREE.MeshToonMaterial(parameters);\r\n    },\r\n\r\n    __points: function (parameters?: any) {\r\n        return new THREE.PointsMaterial(parameters);\r\n    },\r\n    __shadow: function (parameters?: any) {\r\n        return new THREE.ShadowMaterial(parameters);\r\n    },\r\n\r\n    config: {\r\n        data: {\r\n            basic: {\r\n                type: \"BasicMaterial\",\r\n                props: {},\r\n            },\r\n            lambert: {\r\n                type: \"LambertMaterial\",\r\n                props: {},\r\n            },\r\n            normal: {\r\n                type: \"NormalMaterial\",\r\n                props: {},\r\n            },\r\n            phong: {\r\n                type: \"PhongMaterial\",\r\n                props: {},\r\n            },\r\n            physical: {\r\n                type: \"PhysicalMaterial\",\r\n                props: {},\r\n            },\r\n            standard: {\r\n                type: \"StandardMaterial\",\r\n                props: {},\r\n            },\r\n        },\r\n        availableInputs: [\r\n            \"type\",\r\n            \"color\",\r\n            \"map\",\r\n            \"bumpMap\",\r\n            \"bumpScale\",\r\n            \"normalMap\",\r\n            \"normalMapType\",\r\n            \"normalScale\",\r\n            \"side\",\r\n            \"opacity\",\r\n            \"transparent\",\r\n            \"visible\",\r\n\r\n        ],\r\n        options: {},\r\n        editable: {\r\n            name: 'String',\r\n            opacity: 'Float',\r\n            side: 'Integer:' + THREE.FrontSide + ',' + THREE.BackSide + ',' + THREE.DoubleSide,\r\n            shadowSide: 'Integer:' + THREE.FrontSide + ',' + THREE.BackSide + ',' + THREE.DoubleSide,\r\n            transparent: 'Boolean',\r\n            visible: 'Boolean',\r\n        },\r\n        properties: {\r\n            type: { type: \"String\", editable: false, data: {}, value: \"Material\" },\r\n            color: { type: \"Color\", editable: true, data: {} },\r\n            map: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            bumpMap: { type: \"Texture\", editable: true, data: { addons: [\"bumpScale\"] }, value: null },\r\n            bumpScale: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 1 },\r\n            normalMap: { type: \"Texture\", editable: true, data: { addons: [\"normalMapType\", \"normalScale\"] }, value: null },\r\n            normalMapType: { type: \"Integer\", editable: true, data: {}, value: 0 },\r\n            normalScale: { type: \"Vector2\", editable: true, data: {} },\r\n            side: { type: \"Integer:0,1,2\", editable: true, data: { inputType: \"select\", valueType: \"number\", options: sideOptions }, value: 0 },\r\n            opacity: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 1 },\r\n            transparent: { type: \"Boolean\", editable: true, data: {}, value: true },\r\n            visible: { type: \"Boolean\", editable: true, data: {}, value: true },\r\n\r\n\r\n\r\n            alphaMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            alphaTest: { type: \"number\", editable: false, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 0 },\r\n            aoMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            aoMapIntensity: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 1 },\r\n            blendDst: { type: \"integer\", editable: false, data: {}, value: 205 },\r\n            blendDstAlpha: { type: \"Integer\", editable: false, data: {}, value: null },\r\n            blendEquation: { type: \"Integer\", editable: false, data: {}, value: 100 },\r\n            blendEquationAlpha: { type: \"Integer\", editable: false, data: {}, value: null },\r\n            blendSrc: { type: \"Integer\", editable: false, data: {}, value: 204 },\r\n            blendSrcAlpha: { type: \"Integer\", editable: false, data: {}, value: null },\r\n            blending: { type: \"mixed\", editable: false, data: {}, value: 1 },\r\n            clearcoat: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 0 },\r\n            clearcoatMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            clearcoatNormalMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            clearcoatNormalScale: { type: \"Vector2\", editable: true, data: {} },\r\n            clearcoatRoughness: { type: \"Float\", editable: true, data: {}, value: 0 },\r\n            clearcoatRoughnessMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            clipIntersection: { type: \"Boolean\", editable: false, data: {}, value: false },\r\n            clipShadows: { type: \"Boolean\", editable: false, data: {}, value: false },\r\n            clippingPlanes: { type: \"Array\", editable: false, data: {}, value: null },\r\n            colorWrite: { type: \"Boolean\", editable: false, data: {}, value: true },\r\n            combine: { type: \"Integer\", editable: true, data: { min: 0, step: 1 }, value: 0 },\r\n            defines: { type: \"Object\", editable: false, data: {} },\r\n            depthFunc: { type: \"Integer\", editable: false, data: {}, value: 3 },\r\n            depthPacking: { type: \"Constant\", editable: true, data: {}, value: 3200 },\r\n            depthTest: { type: \"Boolean\", editable: false, data: {}, value: true },\r\n            depthWrite: { type: \"Boolean\", editable: false, data: {}, value: true },\r\n            displacementBias: { type: \"Float\", editable: true, data: { min: -1, max: 1, step: 0.01, inputType: \"range\" }, value: 0 },\r\n            displacementMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            displacementScale: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 1 },\r\n            dithering: { type: \"Boolean\", editable: false, data: {}, value: false },\r\n            emissive: { type: \"Color\", editable: true, data: {} },\r\n            emissiveIntensity: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 1 },\r\n            emissiveMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            envMap: { type: \"TextureCube\", editable: true, data: {}, value: null },\r\n            envMapIntensity: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 1 },\r\n            farDistance: { type: \"Float\", editable: true, data: { min: 0, step: 0.01, inputType: \"range\" }, value: 1000 },\r\n            flatShading: { type: \"Boolean\", editable: false, data: {}, value: false },\r\n            fog: { type: \"Boolean\", editable: false, data: {}, value: true },\r\n            gradientMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            id: { type: \"Integer\", editable: false, data: {} },\r\n            lightMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            lightMapIntensity: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 1 },\r\n            matcap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            metalness: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 0 },\r\n            metalnessMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            morphNormals: { type: \"boolean\", editable: true, data: {}, value: false },\r\n            morphTargets: { type: \"Boolean\", editable: true, data: {}, value: false },\r\n            name: { type: \"String\", editable: true, data: {}, value: \"\" },\r\n            nearDistance: { type: \"Float\", editable: true, data: { min: 0 }, value: 1 },\r\n            needsUpdate: { type: \"Boolean\", editable: false, data: {} },\r\n            polygonOffset: { type: \"Boolean\", editable: false, data: {}, value: false },\r\n            polygonOffsetFactor: { type: \"Integer\", editable: false, data: {}, value: 0 },\r\n            polygonOffsetUnits: { type: \"Integer\", editable: false, data: {}, value: 0 },\r\n            precision: { type: \"String: highp, mediump, lowp\", editable: false, data: {}, value: null },\r\n            premultipliedAlpha: { type: \"Boolean\", editable: false, data: {}, value: false },\r\n            referencePosition: { type: \"Vector3\", editable: true, data: {} },\r\n            reflectivity: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 1 },\r\n            refractionRatio: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 0.98 },\r\n            roughness: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 1 },\r\n            roughnessMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            shadowSide: { type: \"Integer:0,1,2\", editable: false, data: {}, value: null },\r\n            shininess: { type: \"Float\", editable: true, data: {}, value: 30 },\r\n            size: { type: \"Number\", editable: true, data: {}, value: 1 },\r\n            sizeAttenuation: { type: \"Boolean\", editable: true, data: {}, value: true },\r\n            skinning: { type: \"Boolean\", editable: true, data: {}, value: false },\r\n            specular: { type: \"Color\", editable: true, data: {} },\r\n            specularMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            stencilFail: { type: \"Integer\", editable: false, data: {}, value: 7680 },\r\n            stencilFunc: { type: \"Integer\", editable: false, data: {}, value: 519 },\r\n            stencilFuncMask: { type: \"Integer\", editable: false, data: {}, value: 255 },\r\n            stencilRef: { type: \"Integer\", editable: false, data: {}, value: 0 },\r\n            stencilWrite: { type: \"Boolean\", editable: false, data: {}, value: false },\r\n            stencilWriteMask: { type: \"Integer\", editable: false, data: {}, value: 255 },\r\n            stencilZFail: { type: \"Integer\", editable: false, data: {}, value: 7680 },\r\n            stencilZPass: { type: \"Integer\", editable: false, data: {}, value: 7680 },\r\n            toneMapped: { type: \"Boolean\", editable: false, data: {}, value: true },\r\n            transmission: { type: \"Float\", editable: true, data: { min: 0, max: 1, step: 0.01, inputType: \"range\" }, value: 0 },\r\n            transmissionMap: { type: \"Texture\", editable: true, data: {}, value: null },\r\n            userData: { type: \"object\", editable: false, data: {}, value: {} },\r\n            uuid: { type: \"String\", editable: false, data: {}, value: \"\" },\r\n            version: { type: \"Integer\", editable: false, data: {}, value: 0 },\r\n            vertexColors: { type: \"Boolean\", editable: false, data: {}, value: false },\r\n            vertexTangents: { type: \"Boolean\", editable: true, data: {}, value: false },\r\n            wireframe: { type: \"Boolean\", editable: true, data: {}, value: false },\r\n            wireframeLinecap: { type: \"String\", editable: true, data: {}, value: \"round\" },\r\n            wireframeLinejoin: { type: \"String\", editable: true, data: {}, value: \"round\" },\r\n            wireframeLinewidth: { type: \"Float\", editable: true, data: {}, value: 1 }\r\n        },\r\n\r\n        propGroup: {\r\n            default: [\r\n                \"opacity\",\r\n                \"side\",\r\n                \"alphaTest\",\r\n                \"blendDst\",\r\n                \"blendDstAlpha\",\r\n                \"blendEquation\",\r\n                \"blendEquationAlpha\",\r\n                \"blending\",\r\n                \"blendSrc\",\r\n                \"blendSrcAlpha\",\r\n                \"clipIntersection\",\r\n                \"clippingPlanes\",\r\n                \"clipShadows\",\r\n                \"colorWrite\",\r\n                \"defines\",\r\n                \"depthFunc\",\r\n                \"depthTest\",\r\n                \"depthWrite\",\r\n                \"stencilWrite\",\r\n                \"stencilWriteMask\",\r\n                \"stencilFunc\",\r\n                \"stencilRef\",\r\n                \"stencilFuncMask\",\r\n                \"stencilFail\",\r\n                \"stencilZFail\",\r\n                \"stencilZPass\",\r\n                \"flatShading\",\r\n                \"fog\",\r\n                \"id\",\r\n                \"name\",\r\n                \"needsUpdate\",\r\n                \"polygonOffset\",\r\n                \"polygonOffsetFactor\",\r\n                \"polygonOffsetUnits\",\r\n                \"precision\",\r\n                \"premultipliedAlpha\",\r\n                \"dithering\",\r\n                \"shadowSide\",\r\n                \"toneMapped\",\r\n                \"transparent\",\r\n                \"type\",\r\n                \"uuid\",\r\n                \"version\",\r\n                \"vertexColors\",\r\n                \"visible\",\r\n                \"userData\"\r\n            ],\r\n            basic: [\r\n                \"name\",\r\n\r\n                \"color\",\r\n                \"map\",\r\n                \"side\",\r\n                \"transparent\",\r\n                \"opacity\",\r\n                \"visible\",\r\n\r\n                \"aoMap\",\r\n                \"aoMapIntensity\",\r\n                \"combine\",\r\n                \"envMap\",\r\n                \"lightMap\",\r\n                \"lightMapIntensity\",\r\n                \"morphTargets\",\r\n                \"reflectivity\",\r\n                \"refractionRatio\",\r\n                \"skinning\",\r\n                \"specularMap\",\r\n                \"wireframe\",\r\n                \"wireframeLinecap\",\r\n                \"wireframeLinejoin\",\r\n                \"wireframeLinewidth\",\r\n                \"shadowSide\"\r\n\r\n            ],\r\n            depth: [\r\n                \"name\",\r\n                \"map\",\r\n                \"side\",\r\n                \"transparent\",\r\n                \"opacity\",\r\n                \"visible\",\r\n\r\n                \"alphaMap\",\r\n                \"depthPacking\",\r\n                \"displacementMap\",\r\n                \"displacementScale\",\r\n                \"displacementBias\",\r\n                \"fog\",\r\n                \"morphTargets\",\r\n                \"skinning\",\r\n                \"wireframe\",\r\n                \"wireframeLinewidth\",\r\n                \"shadowSide\"\r\n            ],\r\n            distance: [\r\n                \"name\",\r\n                \"map\",\r\n                \"side\",\r\n                \"transparent\",\r\n                \"opacity\",\r\n                \"visible\",\r\n\r\n                \"alphaMap\",\r\n                \"displacementMap\",\r\n                \"displacementScale\",\r\n                \"displacementBias\",\r\n                \"farDistance\", \"fog\", \"morphTargets\", \"nearDistance\", \"referencePosition\", \"skinning\", \"shadowSide\"\r\n            ],\r\n            lambert: [\r\n                \"name\", \"color\", \"map\", \"transparent\", \"opacity\", \"side\", \"visible\",\r\n                \"emissive\", \"emissiveMap\", \"emissiveIntensity\",\r\n                \"alphaMap\", \"aoMap\", \"aoMapIntensity\", \"combine\", \"envMap\", \"lightMap\", \"lightMapIntensity\", \"morphNormals\", \"morphTargets\", \"reflectivity\", \"refractionRatio\", \"skinning\", \"specularMap\", \"wireframe\", \"wireframeLinecap\", \"wireframeLinejoin\", \"wireframeLinewidth\", \"shadowSide\"\r\n            ],\r\n            matcap: [\r\n                \"name\", \"color\", \"map\", \"bumpMap\", \"bumpScale\", \"normalMap\", \"normalMapType\", \"normalScale\", \"transparent\", \"opacity\", \"side\", \"visible\",\r\n                \"alphaMap\", \"displacementMap\", \"displacementScale\", \"displacementBias\", \"matcap\", \"morphNormals\", \"morphTargets\", \"skinning\", \"shadowSide\"\r\n            ],\r\n            normal: [\r\n                \"name\", \"bumpMap\", \"bumpScale\", \"normalMap\", \"normalMapType\", \"normalScale\", \"transparent\", \"opacity\", \"side\", \"visible\", \"displacementMap\", \"displacementScale\", \"displacementBias\", \"fog\", \"morphNormals\", \"morphTargets\", \"skinning\", \"wireframe\", \"wireframeLinewidth\", \"shadowSide\"\r\n            ],\r\n            phong: [\r\n                \"name\", \"color\", \"map\", \"bumpMap\", \"bumpScale\", \"normalMap\", \"normalMapType\", \"normalScale\", \"opacity\", \"side\", \"transparent\", \"visible\", \"alphaMap\", \"aoMap\", \"aoMapIntensity\",\r\n                \"combine\", \"displacementMap\", \"displacementScale\", \"displacementBias\", \"emissive\", \"emissiveMap\", \"emissiveIntensity\", \"envMap\", \"lightMap\", \"lightMapIntensity\", \"morphNormals\", \"morphTargets\", \"reflectivity\", \"refractionRatio\", \"shininess\", \"skinning\", \"specular\", \"specularMap\", \"wireframe\", \"wireframeLinecap\", \"wireframeLinejoin\", \"wireframeLinewidth\", \"shadowSide\"\r\n            ],\r\n            physical: [\r\n                \"name\", \"color\", \"map\", \"bumpMap\", \"bumpScale\", \"normalMap\", \"normalMapType\", \"normalScale\", \"transparent\", \"opacity\", \"side\", \"visible\",\r\n                \"alphaMap\", \"aoMap\", \"aoMapIntensity\",\r\n                \"defines\", \"displacementMap\", \"displacementScale\", \"displacementBias\", \"emissive\", \"emissiveMap\", \"emissiveIntensity\", \"envMap\", \"envMapIntensity\", \"lightMap\", \"lightMapIntensity\", \"metalness\", \"metalnessMap\", \"morphNormals\", \"morphTargets\", \"refractionRatio\", \"roughness\", \"roughnessMap\", \"skinning\", \"vertexTangents\", \"wireframe\", \"wireframeLinecap\", \"wireframeLinejoin\", \"wireframeLinewidth\", \"clearcoat\", \"clearcoatMap\", \"clearcoatNormalMap\", \"clearcoatNormalScale\", \"clearcoatRoughness\", \"clearcoatRoughnessMap\", \"reflectivity\", \"transmission\", \"transmissionMap\", \"shadowSide\"\r\n            ],\r\n            standard: [\r\n                \"name\", \"color\", \"map\", \"bumpMap\", \"bumpScale\", \"normalMap\", \"normalMapType\", \"normalScale\", \"transparent\", \"opacity\", \"side\", \"visible\",\r\n                \"alphaMap\", \"aoMap\", \"aoMapIntensity\", \"defines\", \"displacementMap\", \"displacementScale\", \"displacementBias\", \"emissive\", \"emissiveMap\", \"emissiveIntensity\", \"envMap\", \"envMapIntensity\", \"lightMap\", \"lightMapIntensity\", \"metalness\", \"metalnessMap\", \"morphNormals\", \"morphTargets\", \"refractionRatio\", \"roughness\", \"roughnessMap\", \"skinning\", \"vertexTangents\", \"wireframe\", \"wireframeLinecap\", \"wireframeLinejoin\", \"wireframeLinewidth\", \"shadowSide\"\r\n            ],\r\n            toon: [\r\n                \"name\", \"alphaMap\", \"aoMap\", \"aoMapIntensity\", \"bumpMap\", \"bumpScale\", \"color\", \"displacementMap\", \"displacementScale\", \"displacementBias\", \"emissive\", \"emissiveMap\", \"emissiveIntensity\", \"gradientMap\", \"lightMap\", \"lightMapIntensity\", \"map\", \"morphNormals\", \"morphTargets\", \"normalMap\", \"normalMapType\", \"normalScale\", \"skinning\", \"wireframe\", \"wireframeLinecap\", \"wireframeLinejoin\", \"wireframeLinewidth\", \"opacity\", \"side\", \"shadowSide\", \"transparent\", \"visible\"\r\n            ],\r\n            points: [\r\n                \"name\", \"alphaMap\", \"color\", \"map\", \"morphTargets\", \"size\", \"sizeAttenuation\", \"opacity\", \"side\", \"shadowSide\", \"transparent\", \"visible\"\r\n            ],\r\n            shadow: [\r\n                \"name\", \"transparent\", \"opacity\", \"side\", \"shadowSide\", \"visible\"\r\n            ]\r\n        }\r\n\r\n    }\r\n\r\n});\r\n\r\nfor (const key in Materials.config.data) {\r\n    if (Object.hasOwnProperty.call(Materials.config.data, key)) {\r\n        const data = Materials.config.data[key];\r\n\r\n        data.props = {};\r\n        data.editable = [];\r\n        const material = Materials.get(key);\r\n        const properties = Materials.getPropData(material);\r\n        for (const k in properties) {\r\n            if (Object.hasOwnProperty.call(properties, k)) {\r\n                const vl = properties[k];\r\n                data.props[k] = assignValue({}, Materials.config.properties[k]);\r\n                data.props[k].value = vl;\r\n            }\r\n        }\r\n        data.editable = Materials.config.propGroup[key].filter(function (prop) {\r\n            if (Object.hasOwnProperty.call(data.props, prop)) {\r\n                return data.props[prop].editable;\r\n            }\r\n\r\n            return false;\r\n        });\r\n\r\n        data.getEditableProps = function () {\r\n            var props = {};\r\n            this.editable.map(function (prop) {\r\n                if (Object.hasOwnProperty.call(this.props, prop)) {\r\n                    props = data.props[prop];\r\n                }\r\n            });\r\n            return props;\r\n\r\n        };\r\n        // data.props = copyByList(Materials.config.properties, Materials.config.propGroup[key]);\r\n        Materials.config.options[key] = data.type;\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nObject.assign(Meshes, {\r\n\r\n    /**\r\n     * lay ve mot mesh\r\n     * @param {object} options thong tin khoi tao va thuoc tinh\r\n     */\r\n    getMesh: function (options?: any, success?:any) {\r\n        var self = this;\r\n        var opt = typeof options == \"object\" ? options : {};\r\n        var params = {};\r\n        var t = String(opt.type || \"\").toLowerCase();\r\n        var geometry = this.getGeometry(opt.geometry);\r\n        var material = this.getMaterial(\r\n            isObject(opt.material) ? opt.material : {}, \r\n            isObject(opt.geometry) ? opt.geometry : {},\r\n            success\r\n        );\r\n        if (!geometry || !material) return null;\r\n        var mesh = null;\r\n        if (t == 'instanced') {\r\n            mesh = new THREE.InstancedMesh(geometry, material, opt.count);\r\n        } else if (t == 'skinned') {\r\n            mesh = new THREE.SkinnedMesh(geometry, material);\r\n        } else {\r\n            mesh = new THREE.Mesh(geometry, material);\r\n        }\r\n        if (mesh) {\r\n            var props = Props.parse(opt.props || copyWithout(opt, ['geometry', 'material']));\r\n            this.setProperties(mesh, props);\r\n        }\r\n        return mesh;\r\n\r\n    },\r\n    /**\r\n     * giong ham tren\r\n     * @param {object} options \r\n     */\r\n    get: function (options?: any, success?:any) {\r\n        return this.getMesh(options, success);\r\n    },\r\n    /**\r\n     * lay ve mot geometry\r\n     * @param {object} options \r\n     */\r\n    getGeometry: function (options?: any) {\r\n        if (typeof options != \"object\") options = {};\r\n        var args = options.params || options.args || options.options || copyWithout(options, ['type']);\r\n        return Geometries.get(options.type, args);\r\n    },\r\n\r\n    /**\r\n     * lay ve material cho mesh\r\n     * @param {object} options thuoc tinh cua material\r\n     * @param {object} geometryOptions thuoc tinh cua geometry\r\n     */\r\n    getMaterial: function (options?: any, geometryOptions?: any, success?:any) {\r\n        var material;\r\n        var self = this;\r\n        var t = String(options ? (options.type || 'basic') : 'basic').toLowerCase();\r\n        // neu co thuoc tinh cua geometry va thuoc cac loai box\r\n        if (geometryOptions && inArray(['cube', 'box', 'boxbuffer'], String(geometryOptions.type).toLowerCase())) {\r\n            var item_type = options.item_type ? String(options.item_type).toLowerCase() : 'basic';\r\n            if (inArray(['images', 'boximages', 'boximg'], t)) {\r\n                if (t == 'images') {\r\n                    var cubeMaterials = [\r\n\r\n                    ];\r\n                    if (options.images && isArray(options.images)) {\r\n                        for (let i = 0; i < options.images.length; i++) {\r\n                            const image = options.images[i];\r\n                            let o: any = { file: image, ignoreFlipY: true };\r\n                            if (options.path) o.path = options.path;\r\n                            let opt = {\r\n                                map: LoaderLib.load('texture', o),\r\n                                side: inArray([THREE.DoubleSide, THREE.FrontSide, THREE.BackSide], options.side) ? options.side : THREE.DoubleSide\r\n                            };\r\n                            assignWithout(opt, options.item_params || options.item_args || options.params || options.args || options, ['type', 'images', 'files', 'file', 'imagge', 'props', 'path', 'side']);\r\n                            cubeMaterials.push(Materials.get(item_type, opt));\r\n                        }\r\n                    }\r\n                    return cubeMaterials;\r\n                }\r\n\r\n\r\n                var files = options.files || options.file || options.images;\r\n                if (isArray(files)) {\r\n                    var loadOpt = newObj({ file: files });\r\n                    if (options.path) loadOpt.path = options.path;\r\n                    let opt = newObj({\r\n                        envMap: this.parent.Loader.load('cubetexture', loadOpt)\r\n                    });\r\n\r\n                    // console.log(opt)\r\n                    assignWithout(opt, options.params || options.args || options, ['type', 'images', 'files', 'file', 'imagge', 'props', 'params', 'attrs', 'attributes', 'path', 'side']);\r\n                    var params = cutWithout(opt, ['tyoe', 'args', 'params', 'props']);\r\n                    var props = cutWithout(options.props || options.properties || options.attrs || options.attributes || cutWithout(options, ['type', 'images', 'files', 'file', 'imagge', 'props', 'params', 'attrs', 'attributes', 'path']), params);\r\n\r\n                    material = Materials.get(item_type, params, props, true);\r\n                    return material;\r\n                }\r\n            }\r\n\r\n            else if (t == 'list' || options.children) {\r\n                var materials = [];\r\n                var list = options.list || options.children;\r\n                if (isArray(list)) {\r\n                    for (let j = 0; j < list.length; j++) {\r\n                        const mat = list[j];\r\n                        if (typeof mat == \"object\") {\r\n                            let op = mat;\r\n                            let tc = op.type || options.item_type || (t != \"list\" ? t : item_type);\r\n                            let p = op.props || op;\r\n                            materials.push(Materials.get(tc, op.params || op, p));\r\n                        }\r\n                    }\r\n                }\r\n                return materials.length ? materials : Materials.get(t || item_type, {});\r\n            }\r\n            else {\r\n                var params = options.options || options.params || options.args || assignWithout({}, options, ['tyoe', 'args', 'params', 'props']);\r\n                var props = assignWithout({}, options.props || options.properties || options.attrs || options.attributes || assignWithout({}, options, ['tyoe', 'args', 'params', 'props']), params);\r\n                return Materials.get(t, params, props);\r\n            }\r\n        } else {\r\n            var params = options.options || options.params || options.args || assignWithout({}, options, ['tyoe', 'args', 'params', 'props']);\r\n            var props = assignWithout({}, options.props || options.properties || options.attrs || options.attributes || assignWithout({}, options, ['tyoe', 'args', 'params', 'props']), params);\r\n            return Materials.get(t, params, props, true, success);\r\n        }\r\n    },\r\n    setProperties: function (mesh?: any, props?: any) {\r\n        if (typeof props == \"object\") {\r\n            for (const key in props) {\r\n                if (props.hasOwnProperty(key) && typeof this.propertyTypes[key] != \"undefined\") {\r\n                    let val = props[key];\r\n                    const type = this.propertyTypes[key];\r\n                    if (!type || type == \"locked\") {\r\n                        continue;\r\n                    }\r\n                    else if (typeof type == \"function\") {\r\n                        if (type(val)) {\r\n                            mesh[key] = val;\r\n                        }\r\n                    } else if (typeof type == \"string\") {\r\n                        var ts = type.split(\"|\");\r\n                        var s = false;\r\n                        for (let i = 0; i < ts.length; i++) {\r\n                            const ti = ts[i];\r\n                            const tis = ti.split(':');\r\n                            if (tis.length == 1) {\r\n                                // console.log(key, type, val);\r\n                                if (ti.toLowerCase() == \"boolean\") {\r\n                                    val = val === true || val == 1 || String(val).toLowerCase() == \"on\" ? true : false;\r\n                                    s = true;\r\n                                    i += ts.length;\r\n                                } else if (checkType(ti.trim(), val)) {\r\n                                    s = true;\r\n                                    i += ts.length;\r\n                                }\r\n\r\n                            }\r\n                            else if (tis[0].toLowerCase() == \"boolean\") {\r\n                                val = val === true || val == 1 || String(val).toLowerCase() == \"on\" ? true : false;\r\n                                s = true;\r\n                                i += ts.length;\r\n                            }\r\n\r\n\r\n                            else if (checkType(tis[0].trim(), val)) {\r\n                                if (isString(val) || isNumber(val)) {\r\n                                    if (tis.length > 1) {\r\n                                        let vl = tis[1].trim().split(',').map(function (v) {\r\n                                            return String(v).trim();\r\n                                        });\r\n\r\n                                        if (inArray(vl, val)) {\r\n                                            s = true;\r\n                                            i += ts.length;\r\n                                        }\r\n                                    }\r\n                                } else {\r\n                                    s = true;\r\n                                }\r\n\r\n                            }\r\n                        }\r\n                        if (s) {\r\n                            assignValue(mesh, key, val);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return mesh;\r\n    },\r\n    propertyTypes: {\r\n        castShadow: 'Boolean',\r\n        children: 'Object3D',\r\n        customDepthMaterial: \"locked\",// 'Material',\r\n        customDistanceMaterial: \"locked\",// 'Material',\r\n        frustumCulled: 'Boolean',\r\n        id: \"locked\",// 'Integer',\r\n        layers: \"locked\",// 'Layers',\r\n        matrix: 'Matrix4',\r\n        matrixAutoUpdate: 'Boolean',\r\n        matrixWorld: \"locked\",// 'Matrix4',\r\n        matrixWorldNeedsUpdate: 'Boolean',\r\n        modelViewMatrix: \"locked\",// 'Matrix4',\r\n        name: \"string\",// 'String',\r\n        normalMatrix: \"locked\",// 'Matrix3',\r\n        onAfterRender: \"locked\",// 'Function',\r\n        onBeforeRender: \"locked\",// 'Function',\r\n        parent: \"locked\",// 'Object3D',\r\n        position: 'object',\r\n        quaternion: \"locked\",// 'Quaternion',\r\n        receiveShadow: 'Boolean',\r\n        renderOrder: 'Number',\r\n        rotation: 'object',\r\n        scale: 'object',\r\n        up: 'Vector3',\r\n        userData: 'Object',\r\n        uuid: \"locked\",// 'String',\r\n        visible: 'Boolean'\r\n    }\r\n\r\n\r\n});\r\n\r\n\r\nObject.assign(LoaderLib, {\r\n\r\n    loadingCount: 0,\r\n    engine: null,\r\n    /**\r\n     * @var {App} parent\r\n     */\r\n    parent: null,\r\n    setParent: function (parent: any) {\r\n        this.parent = parent;\r\n    },\r\n    setEngine: function (engine: any) {\r\n        LoaderLib.engine = engine;\r\n    },\r\n\r\n\r\n\r\n    /**\r\n     * load gì đó\r\n     * @param {string} format định dạng\r\n     * @param {object} options các tham số load\r\n     * @param {function} success hàm sẽ được gôi khi thành công\r\n     * @param {function} progressing \r\n     * @param {function} error \r\n     */\r\n    load: function (format?: any, options?: any, success?: any, progressing?: any, error?: any) {\r\n        var f;\r\n        if (isObject(format)) {\r\n            f = String(format.type || format.format).toLowerCase();\r\n            options = options || assignWithout({}, format, ['type', 'format'])\r\n        } else {\r\n            f = String(format).toLowerCase();\r\n        }\r\n\r\n        if (typeof options == \"string\" || !options) {\r\n            options = {\r\n                file: options\r\n            };\r\n        }\r\n        var loader = this.getLoader(f, options.path || null);\r\n\r\n\r\n        if (!loader) return undefined;\r\n        if (!options.file && !options.files) return false;\r\n        var self = this;\r\n\r\n        var file = options.file || options.files;\r\n\r\n        if (inArray(['texture', 'cubetexture'], f)) {\r\n            return loader.load(file, function (texture) {\r\n                var ps = copyWithout(options.props || options, ['file', 'files', 'images', 'path', 'type', 'format']);\r\n                if (!isEmpty(ps)) {\r\n                    assignValue(texture, ps);\r\n                    if (!ps.flipY && !options.ignoreFlipY) texture.flipY = false;\r\n                } else {\r\n                    if (!options.ignoreFlipY) texture.flipY = false;\r\n                }\r\n                if (typeof success == \"function\") success(texture);\r\n\r\n            }, progressing, error);\r\n        }\r\n\r\n        self.loadingCount++;\r\n        if ((f == \"gltf\" || f == \"glb\") && typeof loader.setDRACOLoader == \"function\") {\r\n            var dracoLoader = new DRACOLoader();\r\n            dracoLoader.setDecoderPath(String(getConfig('urls.assets')) + '/libs/draco/gltf/');\r\n            loader.setDRACOLoader(dracoLoader);\r\n        }\r\n\r\n        var roughnessMipmapper = null;\r\n        if (self.parent) {\r\n            roughnessMipmapper = new RoughnessMipmapper(self.parent.renderer)\r\n        }\r\n\r\n        var setMaterialNeedsUpdate = material => {\r\n            if (isArray(material)) {\r\n                for (let index = 0; index < material.length; index++) {\r\n                    const mat = material[index];\r\n                    setMaterialNeedsUpdate(mat);\r\n                }\r\n            } else if (isObject(material)) {\r\n                material.needsUpdate = true;\r\n            }\r\n        };\r\n\r\n        var ps = copyWithout(options.props || options, ['file', 'files', 'images', 'path', 'type', 'format']);\r\n\r\n\r\n        var traverseChild = function (obj, fn) {\r\n            obj.castShadow = ps.castShadow || false;\r\n            obj.receiveShadow = ps.receiveShadow || false;\r\n\r\n            if (obj.isMesh) {\r\n                if (options.materialNeedsUpdate) {\r\n                    setMaterialNeedsUpdate(obj.material);\r\n                }\r\n                // obj.geometry.computeFaceNormals();\r\n                // obj.geometry.computeVertexNormals();\r\n                if (options.useRoughnessMipmapper && roughnessMipmapper) {\r\n                    roughnessMipmapper.generateMipmaps(obj.material);\r\n                }\r\n\r\n                obj.traverse(function (child) {\r\n                    if (child.isMesh) {\r\n                        // child.geometry.computeFaceNormals();\r\n                        // child.geometry.computeVertexNormals();\r\n                        if (options.materialNeedsUpdate) {\r\n                            setMaterialNeedsUpdate(child.material);\r\n                        }\r\n                    }\r\n\r\n                    if (child.isMesh || (child.type && String(child.type).toLowerCase() == \"mesh\")) {\r\n                        // child.geometry.mergeVertices();\r\n\r\n                        // child.geometry.computeVertexNormals(true);\r\n                        if (options.useRoughnessMipmapper && roughnessMipmapper) {\r\n                            roughnessMipmapper.generateMipmaps(child.material);\r\n                        }\r\n                        child.castShadow = ps.castShadow || false;\r\n                        child.receiveShadow = ps.receiveShadow || false;\r\n                        if (options.materialNeedsUpdate) {\r\n                            setMaterialNeedsUpdate(child.material);\r\n                        }\r\n\r\n                        if (isFunction(fn)) {\r\n                            fn(child);\r\n                        }\r\n                    }\r\n\r\n                    if (typeof options.traverse == \"function\") {\r\n                        options.traverse(child);\r\n                    }\r\n\r\n                });\r\n\r\n            }\r\n            else if (obj.children && obj.children.length) {\r\n\r\n                for (let gi = 0; gi < obj.children.length; gi++) {\r\n                    const child = obj.children[gi];\r\n                    var ct = child.type ? String(child.type).toLowerCase() : \"\";\r\n                    if (child.isMesh || ct == \"mesh\") {\r\n                        child.castShadow = ps.castShadow || false;\r\n                        child.receiveShadow = ps.receiveShadow || false;\r\n\r\n                        if (options.materialNeedsUpdate) {\r\n                            setMaterialNeedsUpdate(obj.material);\r\n                        }\r\n\r\n                        child.traverse(traverseChild);\r\n                    }\r\n                    if (child.children && child.children.length) {\r\n                        traverseChild(child, fn);\r\n                    }\r\n                }\r\n\r\n\r\n            }\r\n\r\n        };\r\n\r\n        var loadArgs = [\r\n            file,\r\n            // called when the resource is loaded\r\n            function (modelData) {\r\n\r\n                var succ = typeof options.success == \"function\" ? options.success :\r\n                    typeof success == \"function\" ? success : function (data) {\r\n                        // console.log(data)\r\n                    };\r\n\r\n                if (typeof modelData.scene != \"undefined\") {\r\n                    modelData.scene.castShadow = true;\r\n                    modelData.scene.receiveShadow = true;\r\n                    modelData.scene.traverse(function (child) {\r\n                        traverseChild(child, options.traverse);\r\n                    });\r\n\r\n                }\r\n                else if (modelData.isMesh) {\r\n                    traverseChild(modelData, options.traverse);\r\n\r\n                }\r\n                else if (modelData.isGroup) {\r\n                    traverseChild(modelData, options.traverse);\r\n                } else if (modelData.isObject3D) {\r\n                    traverseChild(modelData, options.traverse);\r\n                }\r\n\r\n                \r\n\r\n\r\n                self.loadingCount--;\r\n                succ(modelData);\r\n                \r\n                if (self.parent) self.parent.emit('load.success', {data: modelData, tasks: self.loadingCount});\r\n\r\n            },\r\n            // called while loading is progressing\r\n            function (xhr) {\r\n                var pro = typeof options.progressing == \"function\" ? options.progressing :\r\n                    typeof progressing == \"function\" ? progressing : function (msg) {\r\n                        // console.log(msg + '% loaded');\r\n                    };\r\n\r\n\r\n                var pc = xhr.loaded / xhr.total * 100;\r\n                pro(pc);\r\n\r\n            },\r\n            // called when loading has errors\r\n            function (e) {\r\n\r\n                // console.log('An error happened');\r\n                var err = typeof options.error == \"function\" ? options.error :\r\n                    typeof error == \"function\" ? error : function (msg) {\r\n                        // console.log(\"Loõi\", e);\r\n                    }\r\n\r\n                self.loadingCount--;\r\n                err(e);\r\n                \r\n                if (self.parent) self.parent.emit('load.fail', {error: e, tasks: self.loadingCount});\r\n            }\r\n        ];\r\n        var result = null;\r\n        try {\r\n            result = f == \"obj\" ? loader.loadWithMaterials.apply(loader, loadArgs) : loader.load.apply(loader, loadArgs);\r\n        } catch (error) {\r\n            result = null;\r\n            this.loadingCount--;\r\n        }\r\n        return result;\r\n\r\n\r\n    },\r\n\r\n    getLoader: function (format: any, path?: any) {\r\n        var loader = null;\r\n        if (typeof this.loaders[format] != \"undefined\") {\r\n            loader = this.loaders[format]();\r\n            if (path) loader.setPath(path);\r\n        }\r\n        return loader;\r\n    },\r\n\r\n    loadFont: function (file?: any, success?: any, progressing?: any, error?: any) {\r\n        var self = this;\r\n\r\n        if (!file) return false;\r\n        // Instantiate a loader\r\n        var loader = new THREE.FontLoader();\r\n\r\n        loader.load(\r\n            file,\r\n            function (font) {\r\n                var succ = typeof success == \"function\" ? success :\r\n                    typeof success == \"function\" ? success : function (data) {\r\n                        // console.log(data)\r\n                    };\r\n\r\n\r\n\r\n                if (self.parent) self.parent.emit('font.load.success', font);\r\n\r\n                succ(font);\r\n\r\n            },\r\n            // called while loading is progressing\r\n            function (xhr?: any) {\r\n                var pro = typeof progressing == \"function\" ? progressing :\r\n                    typeof progressing == \"function\" ? progressing : function (msg?: any) {\r\n                        // console.log(msg + '% loaded');\r\n                    };\r\n\r\n\r\n                var pc = xhr.loaded / xhr.total * 100;\r\n                if (self.parent) self.parent.emit('font.load.progressing', pc);\r\n                pro(pc);\r\n\r\n            },\r\n            // called when loading has errors\r\n            function (e?: any) {\r\n\r\n                var err = typeof error == \"function\" ? error :\r\n                    typeof error == \"function\" ? error : function (msg?: any) {\r\n                        // console.log(\"Lỗi\", e);\r\n                    }\r\n\r\n                if (self.parent) self.parent.emit('font.load.error', e);\r\n                err(e);\r\n\r\n            }\r\n        );\r\n    },\r\n\r\n    /**\r\n     * Load moi truong\r\n     * @param {object} options tham so tải\r\n     * @param {function(Texture)} onSuccess ham xu ly khi load thanh cong\r\n     * @param {function(Error)} onError ham xử lý khi gặp lổi\r\n     */\r\n    LoadEnv: function LoadEnv(options?: any, onSuccess?: any, onError?: any) {\r\n        var opt = typeof options == \"object\" ? options : {};\r\n        Props.parse(opt);\r\n        var f = opt && opt.format ? String(opt.format).toLowerCase() : \"\";\r\n        var self = this;\r\n        if (opt.file) {\r\n            if (f == 'hdr') {\r\n                var engine = self.parent || LoaderLib.engine;\r\n                var pmremGenerator = new THREE.PMREMGenerator(engine.renderer);\r\n                pmremGenerator.compileEquirectangularShader();\r\n                var loader = new RGBELoader();\r\n                loader.setDataType(THREE.UnsignedByteType);\r\n                if (opt.path) {\r\n                    loader.setPath(opt.path);\r\n                }\r\n                loader.load(opt.file, function (texture) {\r\n\r\n                    var envMap = pmremGenerator.fromEquirectangular(texture).texture;\r\n                    if (typeof onSuccess == \"function\") {\r\n                        onSuccess(envMap, texture);\r\n                    }\r\n                    // texture.dispose();\r\n                    pmremGenerator.dispose();\r\n\r\n\r\n                }, function () { }, onError);\r\n            }\r\n        }\r\n    },\r\n\r\n    loaders: {\r\n        gltf: function () { return new GLTFLoader(); },\r\n        obj: function () { return new OBJLoader(); },\r\n        fbx: function () { return new FBXLoader(); },\r\n        texture: function () { return new THREE.TextureLoader(); },\r\n        cubetexture: function () { return new THREE.CubeTextureLoader(); },\r\n        max: function () { return new TDSLoader(); },\r\n        stl: function () { return new STLLoader(); },\r\n        mtl: function () { return new MTLLoader(); },\r\n        svg: function () { return new SVGLoader(); },\r\n        tds: function () { return new TDSLoader(); },\r\n        \"3ds\": function () { return new TDSLoader(); },\r\n\r\n    }\r\n});\r\n\r\n\r\nObject.assign(LightLib, {\r\n    /**\r\n     * \r\n     * @param {App} parent \r\n     */\r\n    setParent: function (parent?: any) {\r\n        this.parent = parent;\r\n    },\r\n\r\n    get: function (type?: any, args?: any, props?: any) {\r\n        return this.getLight(type, args, props);\r\n    },\r\n\r\n\r\n    /**\r\n     * hiệu ung anh sang\r\n     * @param {string} type loai hieu ung anh sang\r\n     * @param {object} options thiet lap\r\n     */\r\n    getLight: function (type?: any, options?: any, props?: any) {\r\n        return this.create(type, options, props);\r\n    },\r\n\r\n    /**\r\n     * hiệu ung anh sang\r\n     * @param {string} type loai hieu ung anh sang\r\n     * @param {object} options thiet lap\r\n     */\r\n    create: function (type?: any, options?: any, props?: any) {\r\n        var light: any, args: any, t: any, params = newObj(), udf = undefined, prop = newObj();\r\n        if (typeof type == \"object\") {\r\n            t = String(type.type || \"\").toLowerCase();\r\n            args = type.params || type.args || type;\r\n            prop = type.props || props || copyWithout(type, [\"params\", \"type\"]) || null;\r\n        } else {\r\n            args = typeof options == \"object\" ? (options.params || options.args || options) : {};\r\n            t = String(type).toLowerCase();\r\n            prop = typeof options == \"object\" ? (options.props || copyWithout(options, [\"params\", \"type\"])) : (props || null);\r\n        }\r\n        if (!t) t = 'light';\r\n\r\n        var config = this.getConfigData(t);\r\n        if (!config && isEmpty(config)) return null;\r\n        params = Props.parseParams(args, config.params);\r\n        var str = \"light = new THREE.\" + config.name + \"(\";\r\n        var i = 0;\r\n        for (const key in params) {\r\n            if (Object.hasOwnProperty.call(params, key)) {\r\n                const value = params[key];\r\n                if (config.props[key] == \"color\" && !isColor(value)) params[key] = Props.parseColorIntVal(value);\r\n                str += (i ? ', ' : '') + \"params.\" + key;\r\n                i++;\r\n            }\r\n        }\r\n        str += \");\";\r\n\r\n        try {\r\n            eval(str);\r\n        } catch (error) {\r\n            // console.log(error);\r\n        }\r\n        // console.log(light);\r\n        if (!light) return null;\r\n        if (light.type == \"ReactAreaLight\") {\r\n            var la = [0, 0, 0];\r\n            if (args.lookAt) {\r\n                if (isArray(args.lookAt)) {\r\n                    for (let i = 0; i < args.lookAt.length; i++) {\r\n                        const v = args.lookAt[i];\r\n                        la[i] = v;\r\n                    }\r\n                }\r\n                else if (isObject(args.lookAt)) {\r\n                    var p = [\"x\", \"y\", \"z\"];\r\n                    for (let i = 0; i < p.length; i++) {\r\n                        const v = p[i];\r\n                        if (typeof args.lookAt[v] != \"undefined\" && isNumber(args.lookAt[v])) la[i] = args.lookAt[v];\r\n                    }\r\n\r\n                }\r\n            }\r\n            light.lookAt.apply(light, la);\r\n        }\r\n        var lightProps = assignWithout({}, prop, params, [\"type\", \"params\", \"args\", \"options\"]);\r\n        this.setProperties(light, lightProps);\r\n        // console.log(light)\r\n        return light;\r\n\r\n    },\r\n\r\n    parseProperties: function parseProperties(light?: any, inputProps?: any) {\r\n        var outputProps = {};\r\n        if (typeof inputProps == \"object\") {\r\n            // console.log(\"light obj\");\r\n            var il = [];\r\n            for (let index = 2; index < arguments.length; index++) {\r\n                const list = arguments[index];\r\n                if (isArray(list)) {\r\n                    for (let i = 0; i < list.length; i++) {\r\n                        const field = list[i];\r\n                        il.push(field);\r\n                    }\r\n                } else if (isObject(list)) {\r\n                    for (const field in list) {\r\n                        if (list.hasOwnProperty(field)) {\r\n                            const val = list[field];\r\n                            il.push(field);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            var propTypes = this.getTypeProps(light.type);\r\n            for (const key in inputProps) {\r\n                if (inputProps.hasOwnProperty(key) && typeof propTypes[key] != \"undefined\" && !inArray(il, key)) {\r\n                    let val = inputProps[key];\r\n                    var setable = [\r\n                        \"Boolean\", \"Integer\", \"String\", \"Function\", \"Number\", \"Object\"\r\n                    ];\r\n                    var checkBefore = [\"Object3D\", \"Euler\", \"Vector3\", \"Euler\"];\r\n                    const type = typeof propTypes[key] != \"undefined\" ? propTypes[key] : null;\r\n                    if (!type || type == \"Locked\") {\r\n                        continue;\r\n                    }\r\n                    // else if (type == \"set\") {\r\n                    //     var tv = getType(val);\r\n                    //     if (!inArray([\"object\", \"array\"], tv)) continue;\r\n                    //     if (tv == \"array\") {\r\n                    //         if (typeof light[key] == \"object\" && typeof light[key].set == \"function\") {\r\n                    //             light[key].set.apply(light[key], val);\r\n                    //         }\r\n                    //     }\r\n                    //     else {\r\n                    //         assignValue(light, key, val);\r\n                    //     }\r\n\r\n                    // }\r\n                    else if (type === \"Color\") {\r\n                        outputProps[key] = parseColor(val);\r\n                    }\r\n                    else if (inArray(setable, type)) {\r\n                        if (checkType(type, val)) {\r\n                            assignValue(obj, key, val);\r\n                        }\r\n                    }\r\n\r\n                    else if (inArray(checkBefore, type)) {\r\n\r\n                        if (isObject(val)) {\r\n                            if (val[\"is\" + type]) {\r\n                                outputProps[key] = val\r\n                            } else if (val.$three) {\r\n                                var obj = Props.parse(val);\r\n                                if (obj && obj[\"is\" + type]) {\r\n                                    outputProps[key] = obj;\r\n                                }\r\n                            }\r\n                            else {\r\n                                if (light[key] && isObject(light[key])) {\r\n                                    assignValue(outputProps, key, val)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    else if (key == \"shadow\" && light[key] != undefined && isObject(val)) {\r\n\r\n                        assignValue(outputProps, key, val)\r\n\r\n                    }\r\n                    else if (typeof type == \"function\") {\r\n                        if (type(val)) {\r\n                            assignValue(outputProps, key, val);\r\n                        }\r\n                    } else if (typeof type == \"string\") {\r\n                        var ts = type.split(\"|\");\r\n                        var s = false;\r\n\r\n                        for (let i = 0; i < ts.length; i++) {\r\n                            const ti = ts[i];\r\n                            const tis = ti.split(\":\");\r\n                            if (tis.length == 1) {\r\n                                // console.log(key, type, val);\r\n                                if (ti.toLowerCase() == \"boolean\") {\r\n                                    val = val === true || val == 1 || String(val).toLowerCase() == \"on\" ? true : false;\r\n                                    s = true;\r\n                                    i += ts.length;\r\n                                } else if (checkType(ti.trim(), val)) {\r\n                                    s = true;\r\n                                    i += ts.length;\r\n                                }\r\n\r\n                            }\r\n                            else if (tis[0].toLowerCase() == \"boolean\") {\r\n                                val = val === true || val == 1 || String(val).toLowerCase() == \"on\" ? true : false;\r\n                                s = true;\r\n                                i += ts.length;\r\n                            }\r\n\r\n                            else if (checkType(tis[0].trim(), val)) {\r\n                                if (tis.length > 1) {\r\n                                    let vl = tis[1].trim().split(\",\").map(function (v) {\r\n                                        return String(v).trim();\r\n                                    });\r\n                                    if (inArray(vl, String(val))) {\r\n                                        s = true;\r\n                                        i += ts.length;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        if (s) {\r\n                            assignValue(outputProps, key, val);\r\n                            // console.log(obj[key])\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return outputProps;\r\n    },\r\n    setProperties: function setProperties(light?: any, props?: any) {\r\n        if (typeof props == \"object\") {\r\n            // console.log(\"light obj\");\r\n            var il = [];\r\n            for (let index = 2; index < arguments.length; index++) {\r\n                const list = arguments[index];\r\n                if (isArray(list)) {\r\n                    for (let i = 0; i < list.length; i++) {\r\n                        const field = list[i];\r\n                        il.push(field);\r\n                    }\r\n                } else if (isObject(list)) {\r\n                    for (const field in list) {\r\n                        if (list.hasOwnProperty(field)) {\r\n                            const val = list[field];\r\n                            il.push(field);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            var propTypes = this.getTypeProps(light.type);\r\n            for (const key in props) {\r\n\r\n                if (props.hasOwnProperty(key) && typeof propTypes[key] != \"undefined\" && !inArray(il, key)) {\r\n                    let val = props[key];\r\n                    var setable = [\r\n                        \"Boolean\", \"Integer\", \"String\", \"Function\", \"Number\", \"Object\"\r\n                    ];\r\n                    var checkBefore = [\"Object3D\", \"Euler\", \"Vector3\", \"Euler\"];\r\n                    const type = typeof propTypes[key] != \"undefined\" ? propTypes[key] : null;\r\n                    if (!type || type == \"Locked\") {\r\n                        continue;\r\n\r\n                    }\r\n                    else if (type == \"set\") {\r\n                        var tv = getType(val);\r\n                        if (!inArray([\"object\", \"array\"], tv)) continue;\r\n                        if (tv == \"array\") {\r\n                            if (typeof light[key] == \"object\" && typeof light[key].set == \"function\") {\r\n                                light[key].set.apply(light[key], val);\r\n                            }\r\n                        }\r\n                        else {\r\n                            assignValue(light, key, val);\r\n                        }\r\n\r\n                    }\r\n                    else if (type === \"Color\") {\r\n                        light[key] = parseColor(val);\r\n                    }\r\n                    else if (inArray(setable, type)) {\r\n                        if (checkType(type, val)) {\r\n                            assignValue(light, key, val);\r\n                        }\r\n                    }\r\n\r\n                    else if (inArray(checkBefore, type)) {\r\n\r\n                        if (isObject(val)) {\r\n                            if (val[\"is\" + type]) {\r\n                                light[key] = val\r\n                            } else if (val.$three) {\r\n                                var obj = Props.parse(val);\r\n                                if (obj && obj[\"is\" + type]) {\r\n                                    light[key] = obj;\r\n                                }\r\n                            }\r\n                            else {\r\n                                if (light[key] && isObject(light[key])) {\r\n                                    assignValue(light, key, val)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    else if (key == \"shadow\" && light[key] != undefined && isObject(val)) {\r\n\r\n                        assignValue(light[key], val)\r\n\r\n                    }\r\n                    else if (typeof type == \"function\") {\r\n                        if (type(val)) {\r\n                            assignValue(light, key, val);\r\n                        }\r\n                    } else if (typeof type == \"string\") {\r\n                        var ts = type.split(\"|\");\r\n                        var s = false;\r\n\r\n                        for (let i = 0; i < ts.length; i++) {\r\n                            const ti = ts[i];\r\n                            const tis = ti.split(\":\");\r\n                            if (tis.length == 1) {\r\n                                // console.log(key, type, val);\r\n                                if (ti.toLowerCase() == \"boolean\") {\r\n                                    val = val === true || val == 1 || String(val).toLowerCase() == \"on\" ? true : false;\r\n                                    s = true;\r\n                                    i += ts.length;\r\n                                } else if (checkType(ti.trim(), val)) {\r\n                                    s = true;\r\n                                    i += ts.length;\r\n                                }\r\n\r\n                            }\r\n                            else if (tis[0].toLowerCase() == \"boolean\") {\r\n                                val = val === true || val == 1 || String(val).toLowerCase() == \"on\" ? true : false;\r\n                                s = true;\r\n                                i += ts.length;\r\n                            }\r\n\r\n                            else if (checkType(tis[0].trim(), val)) {\r\n                                if (tis.length > 1) {\r\n                                    let vl = tis[1].trim().split(\",\").map(function (v) {\r\n                                        return String(v).trim();\r\n                                    });\r\n                                    if (inArray(vl, String(val))) {\r\n                                        s = true;\r\n                                        i += ts.length;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        if (s) {\r\n                            assignValue(light, key, val);\r\n                            // console.log(obj[key])\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // console.log(\"end light\");\r\n        }\r\n        return light;\r\n    },\r\n\r\n    getLightProperties: function getLightProperties(light?: any) {\r\n        var props = {};\r\n        if (isObject(light) && light.isLight) {\r\n            var propTypes = this.getTypeProps(light.type);\r\n            for (const key in propTypes) {\r\n                if (Object.hasOwnProperty.call(propTypes, key)) {\r\n                    const type = propTypes[key];\r\n                    if (typeof light[key] != \"undefined\") {\r\n                        props[key] = light[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return props;\r\n    },\r\n\r\n\r\n\r\n    /**\r\n     * lay thuoc tinh cua anh sang\r\n     * @param {string} lightType loai anh sanh\r\n     * @returns {object}\r\n     */\r\n    getTypeProps: function (lightType?: any) {\r\n        var propTypes = {},\r\n            type = String(lightType).toLowerCase();\r\n        if (typeof this.lightPropertyTypes[type] == \"undefined\") return propTypes;\r\n        assignValue(propTypes, this.lightPropertyTypes.object3d);\r\n        assignValue(propTypes, this.lightPropertyTypes.light);\r\n        if (type != \"light\") {\r\n            assignValue(propTypes, this.lightPropertyTypes[type]);\r\n        }\r\n        return propTypes;\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * lay thuoc tinh cua anh sang\r\n     * @param {string} lightType loai anh sanh\r\n     * @returns {object}\r\n     */\r\n    getShadowPropTypes: function (lightType?: any) {\r\n        var propTypes = {},\r\n            type = String(lightType).toLowerCase();\r\n\r\n        if (typeof this.shadowPropertyTypes[type] == \"undefined\") return propTypes;\r\n        assignValue(propTypes, this.shadowPropertyTypes.light);\r\n        if (type != \"light\") {\r\n            assignValue(propTypes, this.shadowPropertyTypes[type]);\r\n        }\r\n        return propTypes;\r\n    },\r\n\r\n    getConfigData: function (type?: any) {\r\n        type = String(type).toLowerCase();\r\n        for (const key in this.lightConfigData) {\r\n            if (Object.hasOwnProperty.call(this.lightConfigData, key)) {\r\n                const config = this.lightConfigData[key];\r\n                if (type == key || inArray(config.keywords, type)) {\r\n                    return config;\r\n                }\r\n            }\r\n        }\r\n        return {};\r\n    },\r\n\r\n    lightConfigData: {\r\n        ambientlight: {\r\n            name: \"AmbientLight\",\r\n            keywords: [\"ambient\", \"a\", \"ambientlight\", \"al\"],\r\n            params: [\"color\", \"intensity\"],\r\n            props: {}\r\n        },\r\n        ambientlightprobe: {\r\n            name: \"AmbientLightProbe\",\r\n            keywords: [\"ambientlightprobe\", \"ambientprobe\", \"ap\", \"alp\"],\r\n            params: [\"color\", \"intensity\"],\r\n            props: {}\r\n        },\r\n        directionallight: {\r\n            name: \"DirectionalLight\",\r\n            keywords: [\"directionallight\", \"directional\", \"direction\", \"d\"],\r\n            params: [\"color\", \"intensity\"],\r\n            props: {}\r\n        },\r\n        hemispherelight: {\r\n            name: \"HemisphereLight\",\r\n            keywords: [\"hemispherelight\", \"hemisphere\", \"h\", \"hl\"],\r\n            params: [\"color\", \"groundColor\", \"intensity\"],\r\n            props: {}\r\n        },\r\n        hemispherelightprobe: {\r\n            name: \"HemisphereLight\",\r\n            keywords: [\"hemispherelightprobe\", \"hemisphereprobe\", \"hp\", \"hlp\"],\r\n            params: [\"skyColor\", \"groundColor\", \"intensity\"],\r\n            props: {}\r\n        },\r\n        pointlight: {\r\n            name: \"PointLight\",\r\n            keywords: [\"pointlight\", \"point\", \"p\", \"pl\"],\r\n            params: [\"color\", \"intensity\", \"distance\", \"decay\"],\r\n            props: {}\r\n        },\r\n        rectarealight: {\r\n            name: \"RectAreaLight\",\r\n            keywords: [\"rectarealight\", \"rectarea\", \"rect\", \"rectlight\", \"r\", \"rl\", \"ral\"],\r\n            params: [\"color\", \"intensity\", \"width\", \"height\"],\r\n            props: {}\r\n        },\r\n        spotlight: {\r\n            name: \"SpotLight\",\r\n            keywords: [\"rectarealight\", \"rectarea\", \"rect\", \"rectlight\", \"r\", \"rl\", \"ral\"],\r\n            params: [\"color\", \"intensity\", \"distance\", \"angle\", \"penumbra\", \"decay\"],\r\n            props: {}\r\n        },\r\n        lightprobe: {\r\n            name: \"LightProbe\",\r\n            keywords: [\"lightprobe\", \"lp\", \"probe\"],\r\n            params: [],\r\n            props: {}\r\n        },\r\n        light: {\r\n            name: \"Light\",\r\n            keywords: [\"light\", \"l\"],\r\n            params: [\"color\", \"intensity\"],\r\n            props: {}\r\n        },\r\n\r\n    },\r\n\r\n\r\n    lightPropertyTypes: {\r\n        object3d: {\r\n            // animations: \"AnimationClip\",\r\n            castShadow: \"Locked\",\r\n            children: \"Object3D\",\r\n            // customDepthMaterial: \"Material\",\r\n            // customDistanceMaterial: \"Material\",\r\n            // frustumCulled: \"Boolean\",\r\n            // id: \"Integer\",\r\n            // layers: \"Layers\",\r\n            // matrix: \"Matrix4\",\r\n            // matrixAutoUpdate: \"Boolean\",\r\n            // matrixWorld: \"Matrix4\",\r\n            // matrixWorldNeedsUpdate: \"Boolean\",\r\n            // modelViewMatrix: \"Matrix4\",\r\n            name: \"String\",\r\n            // normalMatrix: \"Matrix3\",\r\n            // onAfterRender: \"Function\",\r\n            onBeforeRender: \"Function\",\r\n            // parent: \"Object3D\",\r\n            position: \"Vector3\",\r\n            // quaternion: \"Quaternion\",\r\n            // receiveShadow: \"Boolean\",\r\n            renderOrder: \"Number\",\r\n            rotation: \"Euler\",\r\n            scale: \"Vector3\",\r\n            up: \"Vector3\",\r\n            userData: \"Object\",\r\n            // uuid: \"String\",\r\n            visible: \"Boolean\"\r\n        },\r\n        light: {\r\n            color: \"Color\",\r\n            intensity: \"Float\"\r\n\r\n        },\r\n        lightprobe: {\r\n            sh: \"SphericalHarmonics3\"\r\n        },\r\n        ambientlight: {\r\n\r\n        },\r\n        ambientlightprobe: {\r\n\r\n        },\r\n        directionallight: {\r\n            castShadow: \"Boolean\",\r\n            position: \"Vector3\",\r\n            shadow: \"DirectionalLightShadow\",\r\n            target: \"Object3D\"\r\n        },\r\n        hemispherelight: {\r\n            color: \"Color\",\r\n            groundColor: \"Color\",\r\n            position: \"Vector3\"\r\n        },\r\n        hemispherelightprobe: {\r\n\r\n        },\r\n        pointlight: {\r\n            decay: \"Float\",\r\n            distance: \"Float\",\r\n            power: \"Float\",\r\n            shadow: \"PointLightShadow\",\r\n            castShadow: \"Boolean\"\r\n\r\n        },\r\n        rectarealight: {\r\n\r\n        },\r\n        spotlight: {\r\n            angle: \"Float\",\r\n            castShadow: \"Boolean\",\r\n            decay: \"Float\",\r\n            distance: \"Float\",\r\n            penumbra: \"Float\",\r\n            position: \"Vector3\",\r\n            power: \"Float\",\r\n            shadow: \"SpotLightShadow\",\r\n            target: \"Object3D\"\r\n        }\r\n\r\n    },\r\n    shadowPropertyTypes: {\r\n        light: {\r\n            autoUpdate: \"Boolean\",\r\n            camera: \"Camera\",\r\n            bias: \"Float\",\r\n            map: \"WebGLRenderTarget\",\r\n            mapPass: \"WebGLRenderTarget\",\r\n            mapSize: \"Vector2\",\r\n            matrix: \"Matrix4\",\r\n            needsUpdate: \"Boolean\",\r\n            normalBias: \"Float\",\r\n            radius: \"Float\"\r\n        },\r\n        pointlight: {\r\n\r\n        },\r\n        directionallight: {\r\n            camera: \"Camera\"\r\n        },\r\n        spotlight: {\r\n            camera: \"Camera\",\r\n            focus: \"Number\"\r\n        }\r\n\r\n    }\r\n});\r\n\r\n\r\nfor (const key in LightLib.lightConfigData) {\r\n    if (Object.hasOwnProperty.call(LightLib.lightConfigData, key)) {\r\n        const data = LightLib.lightConfigData[key];\r\n        data.props = LightLib.getTypeProps(key);\r\n        data.inputs = {};\r\n        for (const key in data.props) {\r\n            if (Object.prototype.hasOwnProperty.call(data.props, key)) {\r\n                const type = data.props[key];\r\n                let t = type.toLowerCase();\r\n                if (inArray(['Vector3', 'Color', 'Number', 'Boolean', 'Float', 'String'], type)) {\r\n                    let options: any = {};\r\n                    let val = null;\r\n                    if (type == \"Vector3\") {\r\n                        if (key == \"scale\") {\r\n                            val = {\r\n                                x: 1, y: 1, z: 1\r\n                            }\r\n                        } else {\r\n                            val = {\r\n                                x: 0, y: 0, z: 0\r\n                            }\r\n                        }\r\n                    } else if (type == \"Color\") {\r\n                        val = \"#FFF\";\r\n                    }\r\n                    else if (type == \"Boolean\") {\r\n                        val = false;\r\n                    }\r\n                    else if (key == \"intensity\") {\r\n                        t = \"range\";\r\n                        options = {\r\n                            min: 0,\r\n                            max: 4,\r\n                            step: 0.01,\r\n                            output: true\r\n                        }\r\n                        val = 1;\r\n                    }\r\n                    else if (type == \"Float\") {\r\n                        options = {\r\n                            min: 0,\r\n                            step: 0.01\r\n                        }\r\n                        val = 0;\r\n                    }\r\n                    let inpCfg = getInputCfg(t, key, val, options);\r\n                    // console.log(t, inpCfg);\r\n                    if (inpCfg != null) {\r\n                        data.inputs[key] = inpCfg;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ninterface AnyObject {\r\n    [x: string]: any\r\n}\r\n\r\nvar checkedValues = [];\r\nfunction addCheckedItem(item) {\r\n    if (inArray(checkedValues, item, true)) checkedValues.push(item);\r\n}\r\n/**\r\n * chuẩn hóa đối tượng và các giá trị của three js\r\n * @param {object} obj doi tuomg dau vao\r\n * @returns {object}\r\n */\r\nconst parseObject = function parseObject(obj: any, success?: any): AnyObject {\r\n    if (typeof obj != \"object\") return obj;\r\n    if (inArray(checkedValues, obj, true) || obj.uuid || obj.isMesh || obj.isColor || obj.isGeometry || obj.isMaterial) return obj;\r\n\r\n    if (isObject(obj)) {\r\n        if (obj.$three) {\r\n            var newObj = {};\r\n            let params = parseObject(assignWithout({}, obj.data || obj, ['$three']));\r\n            var t = obj.$three.toLowerCase();\r\n            switch (t) {\r\n                case 'geometry':\r\n                    newObj = Geometries.get(params);\r\n                    break;\r\n                case 'material':\r\n                    newObj = Materials.get(params);\r\n                    break;\r\n                case 'mesh':\r\n                    newObj = Meshes.get(params);\r\n                    break;\r\n                case 'texture':\r\n\r\n                    newObj = LoaderLib.load(t, params, success);\r\n                    break;\r\n                case 'cubetexture':\r\n                    newObj = LoaderLib.load(t, params, success);\r\n                    break;\r\n\r\n                case 'color':\r\n                    newObj = createColor(params.hex || params.rgb || params.hsl || params.color);\r\n                    break;\r\n\r\n\r\n                default:\r\n                    break;\r\n            }\r\n            return newObj;\r\n        }\r\n        else {\r\n            for (const key in obj) {\r\n                if (obj.hasOwnProperty(key)) {\r\n                    let element = obj[key];\r\n\r\n                    var s = String(key).substr(0, 1);\r\n                    if (s == '@') {\r\n                        let n = String(key).substr(1);\r\n                        let k = n.toLowerCase();\r\n                        let params = parseObject(element, success);\r\n                        if (k == 'geometry') {\r\n                            let geo = Geometries.get(params);\r\n                            delete obj[key];\r\n                            obj[n] = geo;\r\n                        } else if (k == 'material') {\r\n                            let mesh = Materials.get(params);\r\n                            delete obj[key];\r\n                            obj[n] = mesh;\r\n                        } else if (k == 'mesh') {\r\n                            let mesh = Meshes.get(params);\r\n                            delete obj[key];\r\n                            obj[n] = mesh;\r\n                        } else if (k == 'coler') {\r\n                            let color = createColor(element);\r\n                            delete obj[key];\r\n                            obj[n] = color;\r\n                        }\r\n                        else if (isArray(element)) {\r\n                            parse(obj[key], success);\r\n                            addCheckedItem(obj[key]);\r\n                        }\r\n\r\n                    }\r\n                    else if (isNumber(element)) {\r\n                        obj[key] = Number(element);\r\n                    }\r\n                    else if (isString(element)) {\r\n                        obj[key] = parseString(element);\r\n                    }\r\n                    else if (isObject(element)) {\r\n                        if (Object.hasOwnProperty.call(element, '$three')) {\r\n                            obj[key] = parseObject(element, success);\r\n\r\n                        } else {\r\n                            parseObject(obj[key], success);\r\n                            addCheckedItem(obj[key]);\r\n                        }\r\n                    } else if (isArray(element)) {\r\n                        parse(obj[key], success);\r\n                        addCheckedItem(obj[key]);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n    addCheckedItem(obj);\r\n    return obj;\r\n};\r\n\r\n\r\n/**\r\n * chuẩn hóa đối tượng và các giá trị của three js\r\n * @param {array} obj doi tuomg dau vao\r\n * @returns {object}\r\n */\r\nconst parseArray = function parseArray(obj?: any, success?: any) {\r\n    if (isArray(obj)) {\r\n        for (let index = 0; index < obj.length; index++) {\r\n            const element = obj[index];\r\n            if (isObject(element)) {\r\n                if (typeof element.$three != \"undefined\") {\r\n                    obj[index] = parseObject(element, success);\r\n                } else {\r\n                    parseObject(element, success);\r\n                }\r\n            }\r\n            else if (isArray(element)) {\r\n                parseArray(element, success);\r\n            } else if (isString(element)) {\r\n                obj[index] = parseString(element);\r\n            }\r\n        }\r\n        // if(typeof success == \"function\") success(obj);\r\n    }\r\n    return obj;\r\n\r\n};\r\n\r\n\r\nconst parseThree = (key:string) => getObjectPropDepth(THREE, key);\r\n\r\n\r\n/**\r\n * chuẩn hóa chuỗi thành giá trị trong js\r\n * @param {string} str chuoi dau vao\r\n * @returns {string}\r\n */\r\nconst parseString = function parseString(str?: any) {\r\n    var e = String(str);\r\n    // console.log(e);\r\n    if (e.substr(0, 1) == '{' && e.substr(e.length - 1) == '}') {\r\n        var f = e.substr(1, e.length - 2);\r\n        var fp = f.split(\".\");\r\n        var t = fp.shift();\r\n        if(t=='THREE') return parseThree(fp.join(\".\"));\r\n        var vl = null;\r\n        var exp = \"vl = \" + f + \";\";\r\n        try {\r\n            eval(exp);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        if (vl !== null) {\r\n            str = vl;\r\n        }\r\n    }\r\n    return str;\r\n};\r\n\r\n\r\n/**\r\n * chuẩn hóa đối tượng và các giá trị của three js\r\n * @param {object|array|string} obj doi tuomg dau vao\r\n * @returns {object|array|string}\r\n */\r\n\r\nconst parse = function parse(obj?: any, success?: any): AnyObject {\r\n    if (isObject(obj)) return parseObject(obj, success);\r\n    else if (isArray(obj)) return parseArray(obj, success);\r\n    else if (isString(obj)) return parseString(obj);\r\n    return obj;\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * lấy các tham số chứa trong phầm thông tin thiết lập đối tượng\r\n * @param {object|array} argms tham so cau hinh\r\n * @param {object|array} list tham so cau hinh\r\n * @param {array|object} opt danh sachs cac key trong constructor\r\n * @returns {object}\r\n */\r\nconst parseParams = function parseParams(argms?: any, list?: any, opt?: any): AnyObject {\r\n    var params = newObj();\r\n    opt = typeof opt == \"object\" ? opt : {};\r\n    var args = argms && (isArray(argms) || isObject(argms)) ? argms : [];\r\n    // nếu list đầu vào là một màng tên các tham số\r\n    if (isArray(list)) {\r\n        // và tham số cũng là 1 mảng\r\n        if (isArray(args)) {\r\n            for (let i = 0; i < list.length; i++) {\r\n                const p = list[i];\r\n                if (typeof args[i] != \"undefined\") {\r\n                    params[p] = args[i];\r\n                } else {\r\n                    params[p] = typeof opt[p] != \"undefined\" ? opt[p] : undefined\r\n                }\r\n            }\r\n        }\r\n        // nếu tham số là object\r\n        else {\r\n            for (let i = 0; i < list.length; i++) {\r\n                const p = list[i];\r\n                if (typeof args[p] != \"undefined\") {\r\n                    params[p] = args[p];\r\n                } else {\r\n                    params[p] = typeof opt[p] != \"undefined\" ? opt[p] : undefined\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    // nếu list là một object có dạng key là tên tham số còn value gla giá trị mặc định\r\n    else if (isObject(list)) {\r\n        // duyệt list với các giá trị mặc định\r\n        if (isArray(args)) {\r\n            // biến đếm để lấy giá trị tham số theo thứ tự\r\n            var i = 0;\r\n            for (const key in list) {\r\n                if (list.hasOwnProperty(key)) {\r\n                    const defVal = list[key];\r\n                    // opt là mảng giá trị mặc định không cần thứ tự\r\n                    // lấy giá trị opt trước\r\n                    params[key] = typeof opt[key] != 'undefined' ? opt[key] : (\r\n                        // không có sẽ lấy trong args. không có nữa sẽ lấy bên list cũng là default\r\n                        args && typeof args[i] != \"undefined\" ? args[i] : defVal\r\n                    )\r\n                    i++;\r\n                }\r\n            }\r\n        } else {\r\n            for (const key in list) {\r\n                if (list.hasOwnProperty(key)) {\r\n                    const defVal = list[key];\r\n                    params[key] = args && typeof args[key] != \"undefined\" ? args[key] : (\r\n                        typeof opt[key] != 'undefined' ? opt[key] : defVal\r\n                    );\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    if (params.color && (isString(params.color) || isNumber(params.color) || (isObject(params.color) && !params.color.isColor))) {\r\n        params.color = createColor(params.color);\r\n    }\r\n    return parse(params);\r\n};\r\n\r\nconst createColor = function createColor(color?: any) {\r\n    var c = new THREE.Color(0xffffff).convertSRGBToLinear();\r\n    if (isColor(color)) {\r\n        if (isObject(color)) {\r\n            c = new THREE.Color(color.r, color.g, color.b);\r\n            c.convertSRGBToLinear();\r\n        } else {\r\n            c = new THREE.Color(parseColorIntVal(color));\r\n            c.convertSRGBToLinear();\r\n        }\r\n    }\r\n    return c;\r\n}\r\n\r\n/**\r\n * \r\n * @param {THREE.Color} val \r\n * @returns \r\n */\r\nconst parseColor = (val) => {\r\n    // console.log(val);\r\n    return (isObject(val) && val.isColor) ? (val.totalSRGBToLinear ? val : val.convertSRGBToLinear()) : createColor(val);\r\n}\r\n\r\nconst parseColorIntVal = function (val) {\r\n    if (!isColor(val)) return 0;\r\n    if (typeof val == \"string\") {\r\n        if (val.substr(0, 1) == \"#\") {\r\n            var b = parseInt(val.substr(1), 16);\r\n            if (!isNaN(b) && isNumber(b)) {\r\n                return b;\r\n            }\r\n        } else {\r\n            var b = parseInt(val, 16);\r\n            if (!isNaN(b) && isNumber(b)) {\r\n                return b;\r\n            }\r\n        }\r\n    } else if (isNumber(val)) {\r\n        return val;\r\n    }\r\n\r\n    return 0;\r\n};\r\n\r\nconst isColor = function isColor(obj: any): boolean {\r\n    if (isInteger(obj)) return true;\r\n    if (isString(obj)) {\r\n        var re = /[0-9A-Fa-f]{6}/g;\r\n        var re2 = /[0-9A-Fa-f]{3}/g;\r\n\r\n        if (obj.substr(0, 1) == \"#\") {\r\n            var hex = obj.substr(1);\r\n            if (re.test(hex) || re2.test(hex)) return true;\r\n        }\r\n        else if (re.test(obj) || re2.test(obj)) return true;\r\n    } else if (isObject(obj) && obj.isColor) return true;\r\n\r\n    return false;\r\n}\r\n\r\n\r\nfunction getObjectAnimateHandler(options?: any): any {\r\n    if (!isObject(options)) return null;\r\n    var keys = [\r\n        \"updateHhndler\",\r\n        \"handler\",\r\n        \"animate\",\r\n        \"animatehandler\",\r\n        \"handlerdata\",\r\n        \"updatehandlerdata\",\r\n        \"animatedata\",\r\n        \"updateanimatedata\",\r\n        \"updateanimatehandlerdata\"\r\n    ];\r\n    if (isObject(options.props)) {\r\n        for (const key in options.props) {\r\n            if (options.props.hasOwnProperty(key)) {\r\n                const d = options.props[key];\r\n                if (inArray(keys, key)) {\r\n                    return d;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    for (const key in options) {\r\n        if (options.hasOwnProperty(key)) {\r\n            const d = options[key];\r\n            if (inArray(keys, key)) {\r\n                return d;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction Props(params?: any) {\r\n    this.origin = params;\r\n    this.parseData = parse(params);\r\n}\r\nObject.assign(Props.prototype, {\r\n    constructor: Props,\r\n    parse: parse,\r\n    parseArray: parseArray,\r\n    parseObject: parseObject,\r\n    parseString: parseString,\r\n    parseParams: parseParams,\r\n    parseColorIntVal: parseColorIntVal,\r\n    parseColor: parseColor,\r\n    isColor: isColor,\r\n    createColor: createColor,\r\n    getObjectAnimateHandler: getObjectAnimateHandler,\r\n    toString: function () {\r\n        return this.toJSON();\r\n    }\r\n});\r\nProps.parse = parse;\r\nProps.parseArray = parseArray;\r\nProps.parseObject = parseObject;\r\nProps.parseString = parseString;\r\nProps.createColor = createColor;\r\nProps.isColor = isColor;\r\nProps.parseColorIntVal = parseColorIntVal;\r\nProps.parseColor = parseColor;\r\nProps.parseParams = parseParams;\r\nProps.getObjectAnimateHandler = getObjectAnimateHandler;\r\n\r\n\r\nconst TransparentBase64Image = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAQAAAAm93DmAAAAJ0lEQVR42u3MMQEAAAgDIGf/vN6G0BMCkOl6FaFQKBQKhUKhUCi8WVAwJunuz1eHAAAAAElFTkSuQmCC\";\r\n\r\nexport {\r\n    Meshes, Geometries, Materials, LoaderLib, LightLib, TransparentBase64Image\r\n}\r\n\r\ninterface ThreeVector3 {\r\n    x: number,\r\n    y: number,\r\n    z: number\r\n}\r\n\r\ninterface ThreeVector2 {\r\n    x: number,\r\n    y: number\r\n}\r\n\r\ninterface ThreeColor {\r\n    r: number,\r\n    g: number,\r\n    b: number\r\n}\r\n\r\nexport interface MeshMaterial {\r\n    alphaMap: string,\r\n    alphaTest: number,\r\n    aoMap: string,\r\n    aoMapIntensity: number,\r\n    blendDst: number,\r\n    blendDstAlpha: number,\r\n    blendEquation: number,\r\n    blendEquationAlpha: number,\r\n    blendSrc: number,\r\n    blendSrcAlpha: number,\r\n    blending: any,\r\n    bumpMap: string,\r\n    bumpScale: number,\r\n    clearcoat: number,\r\n    clearcoatMap: string,\r\n    clearcoatNormalMap: string,\r\n    clearcoatNormalScale: ThreeVector3,\r\n    clearcoatRoughness: number,\r\n    clearcoatRoughnessMap: string,\r\n    clipIntersection: boolean,\r\n    clipShadows: boolean,\r\n    clippingPlanes: any[],\r\n    color: ThreeColor,\r\n    colorWrite: boolean,\r\n    combine: number,\r\n    defines: Object,\r\n    depthFunc: number,\r\n    depthPacking: any,\r\n    depthTest: boolean,\r\n    depthWrite: boolean,\r\n    displacementBias: number,\r\n    displacementMap: string,\r\n    displacementScale: number,\r\n    dithering: boolean,\r\n    emissive: ThreeColor,\r\n    emissiveIntensity: number,\r\n    emissiveMap: string,\r\n    envMap: any,\r\n    envMapIntensity: number,\r\n    farDistance: number,\r\n    flatShading: Boolean,\r\n    fog: Boolean,\r\n    gradientMap: string,\r\n    id: number,\r\n    lightMap: string,\r\n    lightMapIntensity: number,\r\n    map: string,\r\n    matcap: string,\r\n    metalness: number,\r\n    metalnessMap: string,\r\n    morphNormals: boolean,\r\n    morphTargets: Boolean,\r\n    name: String,\r\n    nearDistance: number,\r\n    needsUpdate: Boolean,\r\n    normalMap: string,\r\n    normalMapType: number,\r\n    normalScale: ThreeVector2,\r\n    opacity: number,\r\n    polygonOffset: Boolean,\r\n    polygonOffsetFactor: number,\r\n    polygonOffsetUnits: number,\r\n    precision: String,\r\n    premultipliedAlpha: Boolean,\r\n    referencePosition: ThreeVector3,\r\n    reflectivity: number,\r\n    refractionRatio: number,\r\n    roughness: number,\r\n    roughnessMap: string,\r\n    shadowSide: number,\r\n    shininess: number,\r\n    side: number,\r\n    size: number,\r\n    sizeAttenuation: boolean,\r\n    skinning: boolean,\r\n    specular: ThreeColor,\r\n    specularMap: string,\r\n    stencilFail: number,\r\n    stencilFunc: number,\r\n    stencilFuncMask: number,\r\n    stencilRef: number,\r\n    stencilWrite: Boolean,\r\n    stencilWriteMask: number,\r\n    stencilZFail: number,\r\n    stencilZPass: number,\r\n    toneMapped: Boolean,\r\n    transmission: number,\r\n    transmissionMap: string,\r\n    transparent: Boolean,\r\n    type: string,\r\n    userData: object,\r\n    uuid: String,\r\n    version: number,\r\n    vertexColors: Boolean,\r\n    vertexTangents: Boolean,\r\n    visible: Boolean,\r\n    wireframe: Boolean,\r\n    wireframeLinecap: String,\r\n    wireframeLinejoin: String,\r\n    wireframeLinewidth: number\r\n}\r\n\r\nexport interface MaterialSettingData {\r\n    index: number,\r\n    isArrayMAterial?: boolean,\r\n    material: {\r\n        ref: MeshMaterial,\r\n        settings: { [prop: string]: any },\r\n        editable: string[],\r\n        type: string,\r\n        inputs?: any[]\r\n    },\r\n    title: string\r\n}","import { assignValue, inArray, isArray, isEmpty, isNumber, isObject, isString, Str } from '@app/_core/helpers/utils';\r\nimport * as THREE from 'three';\r\nimport Props, { isColor } from '../libs/props';\r\nimport { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader.js';\r\nimport { RoomEnvironment } from 'three/examples/jsm/environments/RoomEnvironment.js';\r\n\r\n\r\n\r\n\r\n\r\n// var initCount = 0;\r\n/**\r\n * Các thuộc tính và phương thức xử lý scene\r\n */\r\nconst Scene = {\r\n    scene: null,\r\n\r\n    sceneHelper: null,\r\n    showSceneHelper: false,\r\n\r\n    sceneSettings: null,\r\n\r\n    getScene: function (opts:any, cmt?:any) {\r\n        var scene = new THREE.Scene();\r\n        // this.scene = scene;\r\n        // return null;\r\n        var opt:any = typeof opts == \"object\" ? opts : {};\r\n        Props.parse(opt);\r\n        if (opt.env) {\r\n            if (isString(opt.env)) {\r\n                var env = opt.env.toLowerCase();\r\n                this.addSimpleEnv(env, scene);\r\n            } else if (isObject(opt.env)) {\r\n                var t = opt.env.type ? String(opt.env.type).toLowerCase() : null;\r\n                switch (t) {\r\n                    case \"room\":\r\n                        this.addSimpleEnv(\"room\", scene);\r\n                        break;\r\n\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        if (opt.fog) {\r\n            if (isArray(opt.fog)) {\r\n                scene.fog = new THREE.Fog(\r\n                    typeof opt.fog[0] != \"undefined\" ? opt.fog[0] : 0xffffff,\r\n                    typeof opt.fog[1] != \"undefined\" ? opt.fog[1] : 0,\r\n                    typeof opt.fog[2] != \"undefined\" ? opt.fog[2] : 20000\r\n                );\r\n                this.renderer.setClearColor(scene.fog.color);\r\n            } else if (isObject(opt.fog)) {\r\n                if (opt.fog.type == 2) {\r\n                    var params = Props.parseParams(opt.fog, ['color', 'density']);\r\n                    scene.fog = new THREE.FogExp2(\r\n                        params.color,\r\n                        params.density\r\n                    );\r\n                } else {\r\n                    var params = Props.parseParams(opt.fog, ['color', 'near', 'far']);\r\n                    scene.fog = new THREE.Fog(\r\n                        params.color,\r\n                        params.near,\r\n                        params.far\r\n                    );\r\n                }\r\n                this.renderer.setClearColor(scene.fog.color);\r\n\r\n            }\r\n        } else if (opt.fogExp2) {\r\n            if (isArray(opt.fogExp2)) {\r\n                scene.fog = new THREE.FogExp2(\r\n                    typeof opt.fog[0] != \"undefined\" ? opt.fog[0] : 0xffffff,\r\n                    typeof opt.fog[1] != \"undefined\" ? opt.fog[1] : 0,\r\n                    typeof opt.fog[2] != \"undefined\" ? opt.fog[2] : 20000\r\n                );\r\n                this.renderer.setClearColor(scene.fog.color);\r\n            } else if (isObject(opt.fogExp2)) {\r\n\r\n                scene.fog = new THREE.FogExp2(\r\n                    typeof opt.fog.color != \"undefined\" ? opt.fog.color : 0xffffff,\r\n                    typeof opt.fog.near != \"undefined\" ? opt.fog.near : 0,\r\n                    typeof opt.fog.far != \"undefined\" ? opt.fog.far : 20000\r\n                );\r\n                this.renderer.setClearColor(scene.fog.color);\r\n\r\n            }\r\n\r\n            scene.fog = new THREE.Fog();\r\n        }\r\n        if (opt.background && !isEmpty(opt.background)) {\r\n            this.setBackground(opt.background, scene, cmt);\r\n        }\r\n        if (opt.axesHelper) {\r\n            this.addAxesHelper(opt.axesHelper, scene);\r\n        }\r\n\r\n        return scene;\r\n    },\r\n    /**\r\n     * khởi tạo scene\r\n     * @param {object} opts thuộc tính của scene\r\n     */\r\n    initScene: function (opts?:any) {\r\n        this.sceneSettings = assignValue({}, opts);\r\n        this.scene = this.getScene(opts, \"init\");\r\n        this.sceneHelper = this.getScene(opts);\r\n        // console.log(++initCount)\r\n        this.emit({\r\n            type: \"scene.inited\",\r\n            data: opts\r\n        });\r\n        return this;\r\n    },\r\n    updateSceneSettings: function(data){\r\n        assignValue(this.sceneSettings, data);\r\n        this.emit({\r\n            type:\"scene.settings.updated\",\r\n            data: data\r\n        });\r\n    },\r\n\r\n    updateSceneSizeSetting: function(size){\r\n        assignValue(this.sceneSettings.size, size);\r\n        this.emit({\r\n            type:\"scene.settings.updated:size\",\r\n            data: size\r\n        });\r\n\r\n    },\r\n    updateSceneFloorSetting: function(floor){\r\n        assignValue(this.sceneSettings.floor, floor);\r\n        this.emit({\r\n            type:\"scene.settings.updated:floor\",\r\n            data: floor\r\n        });\r\n\r\n    },\r\n    \r\n    setScene: function (scene?:any) {\r\n\r\n        this.scene.uuid = scene.uuid;\r\n        this.scene.name = scene.name;\r\n\r\n        this.scene.background = (scene.background !== null) ? scene.background.clone() : null;\r\n\r\n        if (scene.fog !== null) this.scene.fog = scene.fog.clone();\r\n\r\n        this.scene.userData = JSON.parse(JSON.stringify(scene.userData));\r\n\r\n        // avoid render per object\r\n\r\n        // this.signals.sceneGraphChanged.active = false;\r\n\r\n        while (scene.children.length > 0) {\r\n\r\n            this.addObject(scene.children[0]);\r\n\r\n        }\r\n\r\n        // this.signals.sceneGraphChanged.active = true;\r\n        // this.signals.sceneGraphChanged.dispatch();\r\n\r\n    },\r\n\r\n    /**\r\n     * Thêm môi trường\r\n     * @param {string} env môi trường\r\n     */\r\n    addSimpleEnv: function (env?:any) {\r\n        switch (env.toLowerCase()) {\r\n            case \"room\":\r\n                var environment = new RoomEnvironment();\r\n                var pmremGenerator = new THREE.PMREMGenerator(this.renderer);\r\n                this.scene.environment = pmremGenerator.fromScene(environment).texture;\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * set Màu nền\r\n     * @param {int|string} color màu\r\n     */\r\n    setBackgroundCokor: function (color?:any, scene?:any) {\r\n        if (!scene) scene = this.scene;\r\n        scene.background = new THREE.Color(color);\r\n    },\r\n\r\n    /**\r\n     * Set nền khung cảnh\r\n     * @param {object} opts tham số\r\n     */\r\n    setBackground: function (opts?:any, scene?:any, cmt?:any) {\r\n        if (!scene) scene = this.scene;\r\n\r\n        if (isString(opts)) {\r\n            if (isColor(opts)) {\r\n                scene.background = new THREE.Color(Props.parseColorIntVal(opts)).convertSRGBToLinear();\r\n                return true;\r\n            }\r\n        }\r\n        var opt = typeof opts == \"object\" ? opts : {};\r\n        Props.parse(opt);\r\n        var t = opt && opt.type ? String(opt.type).toLowerCase() : \"\";\r\n\r\n        var self = this;\r\n        if (t == \"color\") {\r\n            scene.environment = null;\r\n            scene.background = new THREE.Color(Props.parseColorIntVal(opt.color)).convertSRGBToLinear();\r\n            self.refresh();\r\n            return true;\r\n        }\r\n        else if (inArray(['file', 'texture'], t)) {\r\n            if (isObject(opt.texture)) opt = opt.texture;\r\n            var f = opt && opt.format ? String(opt.format).toLowerCase() : \"\";\r\n            if (opt.file) {\r\n                if (f == 'hdr') {\r\n\r\n                    if (this.inited) {\r\n                        this.Loader.LoadEnv({ format: f, file: opt.file, path: opt.path || null }, function (envMap, texture) {\r\n\r\n                            scene.background = envMap;\r\n                            scene.environment = envMap;\r\n                            texture.dispose();\r\n                            self.refresh();\r\n                        });\r\n                        \r\n                    }\r\n                    else{\r\n                        this.on('ready', function () {\r\n                            self.setBackground(opts, scene);\r\n                        });\r\n            \r\n                    }\r\n                }\r\n                else{\r\n                    this.Loader.load('texture', { format: f, file: opt.file, path: opt.path || null }, function (envMap, texture) {\r\n\r\n                        scene.background = envMap;\r\n                        // scene.environment = envMap;\r\n                        self.refresh();\r\n                    });\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n        scene.background = null;\r\n        scene.environment = null;\r\n        self.refresh();\r\n    },\r\n\r\n\r\n    /**\r\n     * them doi tuong vao khung\r\n     * @param {object} obj doi tuong\r\n     */\r\n    addToScene: function (obj?:any) {\r\n\r\n        if (!this.scene) return false;\r\n        this.scene.add(obj);\r\n        return true;\r\n    },\r\n\r\n\r\n\r\n    removeFromScene: function (object?:any) {\r\n        this.scene.remove(object);\r\n    },\r\n\r\n    addAxesHelper: function (size?:any) {\r\n        if (isNumber(size) && size > 0) {\r\n            this.scene.add(new THREE.AxesHelper(size));\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n\r\n    getSceneSize: function () {\r\n\r\n        var sceneData:any = {\r\n            min: {\r\n                x: null, y: null, z: null\r\n            },\r\n            max: {\r\n                x: null, y: null, z: null\r\n            }\r\n        };\r\n        if (this.objects) {\r\n            this.dispatchEvent({\r\n                type: \"scene.size.get.begin\"\r\n            });\r\n            for (var i = 0; i < this.objects.length; i++) {\r\n                // if (Object.hasOwnProperty.call(this.objects, id)) {\r\n                const obj = this.objects[i];\r\n                if (obj.type == 'mesh' || obj.type == 'model') {\r\n                    const box = new THREE.Box3().setFromObject(obj.object);\r\n                    for (const sizeKey in sceneData) {\r\n                        if (Object.hasOwnProperty.call(sceneData, sizeKey) && Object.hasOwnProperty.call(box, sizeKey)) {\r\n                            const sizeData = sceneData[sizeKey];\r\n                            const boxData = box[sizeKey];\r\n                            for (const posKey in boxData) {\r\n                                if (Object.hasOwnProperty.call(boxData, posKey)) {\r\n                                    if (sizeData[posKey] === null) sizeData[posKey] = boxData[posKey];\r\n                                    else if (sizeKey == 'min' && boxData[posKey] < sizeData[posKey]) sizeData[posKey] = boxData[posKey];\r\n                                    else if (sizeKey == 'max' && boxData[posKey] > sizeData[posKey]) sizeData[posKey] = boxData[posKey];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                // }\r\n\r\n            }\r\n\r\n            \r\n            this.dispatchEvent({\r\n                type: \"scene.size.get.end\"\r\n            });\r\n        }\r\n        sceneData.size = {\r\n            x: sceneData.max.x - sceneData.min.x,\r\n            y: sceneData.max.y - sceneData.min.y,\r\n            z: sceneData.max.z - sceneData.min.z\r\n        };\r\n        return sceneData;\r\n    }\r\n\r\n};\r\n\r\nexport default Scene;","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { User, Role } from '../models';\r\nimport { RestService } from '@app/_core/services/rest.service';\r\nimport { SettingService } from '@app/_core/services';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthenticationService {\r\n  public currentUser: Observable<User>;\r\n\r\n  constructor(private restService: RestService, private settingService: SettingService) {}\r\n\r\n  public get currentUserType(): string {\r\n    const roles = [];\r\n    if (roles.includes(Role.ADMIN)) {\r\n      return 'ROLE_ADMIN';\r\n    }\r\n    if (roles.includes(Role.AGENCY)) {\r\n      return 'ROLE_AGENCY';\r\n    }\r\n    if (roles.includes(Role.AFFILIATE)) {\r\n      return 'ROLE_AFFILIATE';\r\n    }\r\n  }\r\n\r\n  public get currentUserValue(): User {\r\n    return this.settingService.user;\r\n  }\r\n\r\n  login(email: string, password: string) {\r\n    return this.restService.post(`auth/login`, { email, password });\r\n  }\r\n\r\n  logout() {\r\n    // remove user from local storage to log user out\r\n    this.settingService.setUser(null);\r\n  }\r\n}\r\n","import createClass, { _class } from '@app/_core/helpers/es5.class';\r\nimport * as THREE from 'three';\r\n\r\nimport { assignValue, inArray, isArray, isEmpty, isObject, isString, queueTask } from '@app/_core/helpers/utils';\r\nimport Props from '../libs/props';\r\n\r\n\r\nconst meshes = [];\r\n\r\nconst PLANE_WIDTH = 2.5;\r\nconst PLANE_HEIGHT = 2.5;\r\nconst CAMERA_HEIGHT = 2;\r\n\r\nconst state = {\r\n    shadow: {\r\n        blur: 3.5,\r\n        darkness: 1,\r\n        opacity: 1,\r\n        pcss: true\r\n    },\r\n    plane: {\r\n        color: '#ffffff',\r\n        opacity: 1,\r\n        position_x: 0,\r\n        position_y: 0,\r\n        position_z: 0,\r\n        rotation_x: -Math.PI / 2,\r\n        rotation_y: 0,\r\n        rotation_z: 0\r\n    },\r\n    blur_plane: {\r\n        position: {\r\n            x: 0,\r\n            y: 0,\r\n            z: 0\r\n        },\r\n        rotation: {\r\n            x: 0,\r\n            y: 0,\r\n            z: 0\r\n        }\r\n\r\n\r\n\r\n    },\r\n\r\n    showWireframe: false,\r\n    camera: {\r\n        position_x: 0,\r\n        position_y: 0,\r\n        position_z: 0,\r\n        rotation_x: Math.PI / 2,\r\n        rotation_y: 0,\r\n        rotation_z: 0,\r\n        far: 2000\r\n    },\r\n    model: {\r\n        position_x: 0,\r\n        position_y: 0,\r\n        position_z: 0,\r\n        rotation_x: 0,\r\n        rotation_y: 0,\r\n        rotation_z: 0\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\nlet originShader, isAssigned = false;\r\nlet deployed = false;\r\nvar _ShaderChunk = {};\r\n\r\nif (!isAssigned) {\r\n    isAssigned = true;\r\n    originShader = THREE.ShaderChunk.shadowmap_pars_fragment + ``;\r\n    _ShaderChunk = assignValue(_ShaderChunk, THREE.ShaderChunk);\r\n}\r\n\r\n\r\n\r\n\r\nconst DynamicShadows = createClass('DynamicShadows')({\r\n    /**\r\n     * @property App\r\n     */\r\n    parent: null,\r\n    origin: originShader,\r\n    defaultProps: { frustrum: 3.75, size: 0.005, near: 9.5, samples: 17, rings: 11 },\r\n    options: {},\r\n    isActive: false,\r\n    queueTask: null,\r\n    shadowLights: {},\r\n    lightShadowList: {},\r\n    cloneLightShadowList: {},\r\n    meshes: {},\r\n\r\n    type: \"no\",\r\n    shader: \"\",\r\n    boots: [\"bootstrap\"],\r\n    bootstrap: function(){\r\n        this.options = {};\r\n        this.isActive = false;\r\n        this.queueTask = null;\r\n        this.shadowLights = {};\r\n        this.lightShadowList = {};\r\n        this.cloneLightShadowList = {};\r\n        this.meshes = {};\r\n    \r\n    },\r\n    constructor: function (parent, options) {\r\n        this.parent = parent;\r\n        if (isObject(options)) {\r\n            this.options = options;\r\n            this.defaultProps = Props.parseParams(options.data || options, this.defaultProps);\r\n        }\r\n    },\r\n\r\n    init: function () {\r\n        var self = this;\r\n        if (this.options.pcss || (this.options.type == 'pcss' && this.options.active)) {\r\n            self.pcssInit();\r\n        }\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n    pcssInit: function () {\r\n        var self = this;\r\n        self.type = 'pcss';\r\n        self.active();\r\n        // return false;\r\n        if (self.parent.lights && self.parent.lights.length) {\r\n            self.active();\r\n            // self.cloneLightShadows();\r\n            // self.active();\r\n            // self.refreshShadows();\r\n        } else {\r\n            self.parent.on('setdata', () => {\r\n                if (self.parent.lights && self.parent.lights.length) {\r\n                    // self.cloneLightShadows();\r\n                    self.active();\r\n                    // self.refreshShadows();\r\n                }\r\n            })\r\n        }\r\n\r\n\r\n    },\r\n\r\n    turnOffPcss: function () {\r\n        var self = this;\r\n        if (self.isActive) {\r\n            self.deactive();\r\n            this.type = \"no\";\r\n            self.refreshShadows();\r\n\r\n            // self.setAllLightProps({ castShadow: false, intensity: 0, visible: false });\r\n            // self.setCloneLightIntensityNyReference();\r\n        }\r\n    },\r\n    turnOnPcss: function () {\r\n        var self: any = this;\r\n        if (!state.shadow.pcss) return false;\r\n        this.type = \"pcss\";\r\n        self.active();\r\n        if (self.isActive) {\r\n            self.refreshShadows();\r\n            var light_intensity = 1;\r\n            var clone_intensity = 0;\r\n        }\r\n    },\r\n\r\n    active: function (args: any = undefined) {\r\n        if (this.isActive || deployed) return this;\r\n        var self = this;\r\n        var defaultProps = this.defaultProps;\r\n        var params = assignValue({}, defaultProps);\r\n        if (isObject(args)) {\r\n            params = Props.parseParams(args, defaultProps);\r\n        } else if (arguments.length) {\r\n            args = [];\r\n            for (let index = 0; index < arguments.length; index++) {\r\n                const element = arguments[index];\r\n                args[index] = element;\r\n            }\r\n            params = Props.parseParams(args, defaultProps);\r\n        }\r\n\r\n\r\n        this.isActive = true;\r\n        deployed = true;\r\n        let shader = this.shader;\r\n        if (!this.shader) {\r\n            shader = this.origin + \"\";\r\n            let pcss = this.getPCSS(params);\r\n\r\n\r\n            shader = shader.replace(\r\n                '#ifdef USE_SHADOWMAP',\r\n                '#ifdef USE_SHADOWMAP' +\r\n                pcss\r\n            );\r\n\r\n            shader = shader.replace(\r\n                '#if defined( SHADOWMAP_TYPE_PCF )',\r\n                `            \r\n\t\t\treturn PCSS( shadowMap, shadowCoord );\r\n\r\n            ` +\r\n                '#if defined( SHADOWMAP_TYPE_PCF )'\r\n            );\r\n\r\n\r\n            this.shader = shader;\r\n        }\r\n\r\n        THREE.ShaderChunk.shadowmap_pars_fragment = shader;\r\n\r\n        // self.refreshShadows();\r\n        return this;\r\n    },\r\n    deactive: function () {\r\n        if (!this.isActive || !deployed) return this;\r\n        var self = this;\r\n        THREE.ShaderChunk.shadowmap_pars_fragment = this.origin;\r\n        deployed = false;\r\n        this.isActive = false;\r\n        // self.refreshShadows();\r\n\r\n        return this;\r\n    },\r\n\r\n\r\n    addMesh: function (object: any = undefined) {\r\n        if ((typeof this.meshes[object.id] === \"undefined\" || !this.meshes[object.id]) && (object.castShadow || object.receiveShadow)) {\r\n            this.meshes[object.id] = {\r\n                castShadow: object.castShadow,\r\n                receiveShadow: object.receiveShadow\r\n            };\r\n        }\r\n        return object;\r\n    },\r\n\r\n    removeMesh: function (object) {\r\n        var id = isObject(object) ? object.id : object;\r\n        if (typeof this.meshes[id] != \"undefined\") {\r\n            this.meshes[id] = null;\r\n            delete this.meshes[id];\r\n        }\r\n\r\n    },\r\n\r\n    cloneLightShadows: function () {\r\n        var scope = this;\r\n        if (!scope.parent) return false;\r\n        // for (const id in scope.parent.l) {\r\n        //     if (Object.hasOwnProperty.call(scope.parent.objects, id)) {\r\n        //         if (scope.parent.objects[id].type == 'light') {\r\n        //             if (scope.parent.objects[id].object.castShadow == true) {\r\n        //                 if (typeof scope.lightShadowList[id] == \"undefined\") {\r\n        //                     scope.lightShadowList[id] = scope.parent.objects[id].object.intensity;\r\n        //                 }\r\n        //                 const light = scope.parent.objects[id].object.clone(true);\r\n        //                 light.intensity = 0;\r\n        //                 const sid = scope.parent.addToScene({\r\n        //                     $type: \"light\",\r\n        //                     object: light\r\n        //                 });\r\n        //                 if (sid) {\r\n        //                     scope.cloneLightShadowList[id] = sid;\r\n        //                 }\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n    },\r\n\r\n    /**\r\n     * thay doi thuoc tinh\r\n     * @param {string|object} prop thuoc tinh\r\n     * @param {*} val \r\n     */\r\n\r\n    setAllLightProps: function (prop, val) {\r\n        var scope = this;\r\n        if (prop) {\r\n            var props = {};\r\n            if (isString(prop)) props[prop] = val;\r\n            else if (isObject(prop)) props = prop;\r\n            else return null;\r\n            if (!isEmpty(scope.lightShadowList)) {\r\n                for (const id in scope.lightShadowList) {\r\n                    if (Object.hasOwnProperty.call(scope.lightShadowList, id)) {\r\n\r\n                        const intensity = scope.lightShadowList[id];\r\n                        if (typeof scope.parent.objects[id] != \"undefined\") {\r\n                            if (scope.parent.objects[id].type == \"light\") {\r\n\r\n                                assignValue(scope.parent.objects[id].object, props);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n\r\n    /**\r\n     * thay doi thuoc tinh\r\n     * @param {string|object} prop thuoc tinh\r\n     * @param {*} val \r\n     */\r\n\r\n    setAllCloneLightProps: function (prop, val) {\r\n        var scope = this;\r\n        if (prop && !isEmpty(scope.cloneLightShadowList)) {\r\n            var props = {};\r\n            if (isString(prop)) props[prop] = val;\r\n            else if (isObject(prop)) props = prop;\r\n            else return null;\r\n            for (const lightID in scope.cloneLightShadowList) {\r\n                if (Object.hasOwnProperty.call(scope.cloneLightShadowList, lightID)) {\r\n                    const cloneLightID = scope.cloneLightShadowList[lightID];\r\n                    if (typeof scope.parent.objects[cloneLightID] != \"undefined\" && scope.parent.objects[cloneLightID].type == \"light\") {\r\n                        assignValue(scope.parent.objects[cloneLightID].object, props);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * thiết lập cường độ ánh sáng cho tất cả ánh sáng đổ bóng\r\n     * @param {float} percentage phần trăn cường độ ánh sáng\r\n     */\r\n    setAllLightIntensityNyPercentage: function (percentage) {\r\n        var scope = this;\r\n        if (!isEmpty(scope.lightShadowList)) {\r\n            for (const id in scope.lightShadowList) {\r\n                if (Object.hasOwnProperty.call(scope.lightShadowList, id)) {\r\n                    const intensity = scope.lightShadowList[id];\r\n\r\n                    if (typeof scope.parent.objects[id] != \"undefined\") {\r\n                        if (scope.parent.objects[id].type == \"light\") {\r\n                            const pc = intensity * percentage;\r\n                            scope.parent.objects[id].object.intensity = pc;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * thay doi thuoc tinh\r\n     * @param {string|object} prop thuoc tinh\r\n     * @param {*} val \r\n     */\r\n\r\n    setCloneLightIntensityNyPercentage: function (percentage, visible) {\r\n        var scope = this;\r\n\r\n        if (!isEmpty(scope.lightShadowList)) {\r\n            for (const id in scope.lightShadowList) {\r\n                if (Object.hasOwnProperty.call(scope.lightShadowList, id) && Object.hasOwnProperty.call(scope.cloneLightShadowList, id)) {\r\n                    const intensity = scope.lightShadowList[id];\r\n                    const cloneLightID = scope.cloneLightShadowList[id];\r\n                    if (typeof scope.parent.objects[cloneLightID] != \"undefined\" && scope.parent.objects[cloneLightID].type == \"light\") {\r\n                        scope.parent.objects[cloneLightID].object.intensity = intensity * percentage;\r\n                        if (typeof visible == \"boolean\") scope.parent.objects[cloneLightID].object.visible = visible;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n\r\n    updateLightShadows: function () {\r\n        var scope = this;\r\n\r\n        if (scope.parent.lights) {\r\n            scope.parent.lights.map(function (lightData) {\r\n                var object = lightData.object;\r\n                if (object.isLight && (object.isDirectionalLight || object.isPointLight || object.isSpotLight)) {\r\n                    if (typeof scope.shadowLights[object.id] === \"undefined\" && object.castShadow) {\r\n                        scope.shadowLights[object.id] = object.castShadow;\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n    },\r\n    updateMeshShadows: function () {\r\n        var scope = this;\r\n        if (scope.parent.objects) {\r\n            scope.parent.objects.map(function (objectDAta) {\r\n                if (objectDAta.type == \"mesh\") {\r\n                    var object = objectDAta.object;\r\n                    scope.addMesh(object);\r\n                } else if (objectDAta.meshes) {\r\n                    objectDAta.meshes.map(function (object) {\r\n                        scope.addMesh(object);\r\n                    })\r\n                }\r\n\r\n            })\r\n        }\r\n    },\r\n\r\n    off: function () {\r\n        if (this.parent) {\r\n            var scope = this;\r\n            this.parent.renderer.shadowMap.enabled = false;\r\n            // if(this.type==\"pcss\") this.deactive();\r\n            if (this.type == 'pcss') {\r\n                if (scope.parent.lights) {\r\n                    scope.parent.lights.map(function (lightData) {\r\n                        var object = lightData.object;\r\n                        if (object.isLight && (object.isDirectionalLight || object.isPointLight || object.isSpotLight)) {\r\n                            if (typeof scope.shadowLights[object.id] !== \"boolean\" && object.castShadow) {\r\n                                scope.shadowLights[object.id] = object.castShadow;\r\n                            }\r\n                            object.castShadow = false;\r\n                            object.needsUpdate = true;\r\n                        }\r\n                    });\r\n\r\n                }\r\n            }\r\n\r\n            if (scope.parent.objects) {\r\n                scope.parent.objects.map(function (objectDAta) {\r\n                    if (objectDAta.type == \"mesh\") {\r\n                        var object = objectDAta.object;\r\n                        var o = scope.addMesh(object);\r\n                        o.castShadow = false;\r\n                        o.receiveShadow = false;\r\n                        o.needsUpdate = true;\r\n\r\n                    } else if (objectDAta.meshes) {\r\n                        objectDAta.meshes.map(function (object) {\r\n                            var o = scope.addMesh(object);\r\n                            o.castShadow = false;\r\n                            o.receiveShadow = false;\r\n                            o.needsUpdate = true;\r\n                        })\r\n                    }\r\n\r\n                })\r\n            }\r\n            if (scope.parent.floorObject && scope.parent.floorObject.isMesh && scope.parent.floorObject.inScene) {\r\n                var o = scope.addMesh(scope.parent.floorObject);\r\n                o.castShadow = false;\r\n                o.receiveShadow = false;\r\n                o.needsUpdate = true;\r\n            }\r\n\r\n\r\n        }\r\n    },\r\n\r\n    restore: function () {\r\n        if (this.parent) {\r\n            var scope = this;\r\n            this.parent.renderer.shadowMap.enabled = true;\r\n            // if(this.type==\"pcss\") this.active();\r\n            if (this.type == 'pcss') {\r\n                if (scope.parent.lights) {\r\n                    scope.parent.lights.map(function (lightData) {\r\n                        var object = lightData.object;\r\n                        if (object.isLight && (object.isDirectionalLight || object.isPointLight || object.isSpotLight)) {\r\n                            if (typeof scope.shadowLights[object.id] === \"boolean\") {\r\n                                object.castShadow = scope.shadowLights[object.id];\r\n                                object.needsUpdate = true;\r\n                                scope.shadowLights[object.id] = null;\r\n                                delete scope.shadowLights[object.id];\r\n                            }\r\n\r\n                        }\r\n                    });\r\n\r\n                }\r\n            }\r\n\r\n\r\n            if (scope.parent.objects) {\r\n                scope.parent.objects.map(function (objectDAta) {\r\n                    if (objectDAta.type == \"mesh\") {\r\n                        var object = objectDAta.object;\r\n                        var o = scope.addMesh(object);\r\n                        if(typeof scope.meshes[o.id] != \"undefined\"){\r\n                            object.castShadow = scope.meshes[o.id].castShadow;\r\n                            object.receiveShadow = scope.meshes[o.id].receiveShadow;\r\n                            object.needsUpdate = true;\r\n                            delete scope.meshes[o.id];\r\n                        }\r\n                        \r\n\r\n                    } else if (objectDAta.meshes) {\r\n                        objectDAta.meshes.map(function (object) {\r\n                            var o = scope.addMesh(object);\r\n                            if (typeof scope.meshes[o.id] != \"undefined\" && scope.meshes[o.id]) {\r\n                                object.castShadow = scope.meshes[o.id].castShadow;\r\n                                object.receiveShadow = scope.meshes[o.id].receiveShadow;\r\n                                object.needsUpdate = true;\r\n                                scope.meshes[o.id] = null;\r\n                                delete scope.meshes[o.id];\r\n                            }\r\n\r\n                        })\r\n                    }\r\n\r\n                })\r\n            }\r\n            if (scope.parent.floorObject && scope.parent.floorObject.isMesh) {\r\n                var o = scope.addMesh(scope.parent.floorObject);\r\n\r\n                o.castShadow = scope.meshes[o.id].castShadow;\r\n                o.receiveShadow = scope.meshes[o.id].receiveShadow;\r\n                o.needsUpdate = true;\r\n                delete scope.meshes[o.id];\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    refreshShadows: function () {\r\n        var self = this;\r\n        var _parent = self.parent;\r\n        self.off();\r\n        if (_parent) {\r\n            _parent.refresh();\r\n        }\r\n        self.restore();\r\n\r\n    },\r\n\r\n\r\n    updateShaderChunk: function () {\r\n        var list = ['shadowmap_pars_fragment', 'meshlambert_frag', 'meshtoon_frag', 'meshphong_frag', 'meshphysical_frag', 'shadow_frag'];\r\n        var updateList = {\r\n            basic: [\"meshbasic_vert\", \"meshbasic_frag\"],\r\n            lambert: [\"meshlambert_vert\", \"meshlambert_frag\"],\r\n            phong: [\"meshphong_vert\", \"meshphong_frag\"],\r\n            standard: [\"meshphysical_vert\", \"meshphysical_frag\"],\r\n            toon: [\"meshtoon_vert\", \"meshtoon_frag\"],\r\n            matcap: [\"meshmatcap_vert\", \"meshmatcap_frag\"],\r\n            points: [\"points_vert\", \"points_frag\"],\r\n            dashed: [\"linedashed_vert\", \"linedashed_frag\"],\r\n            depth: [\"depth_vert\", \"depth_frag\"],\r\n            normal: [\"normal_vert\", \"normal_frag\"],\r\n            sprite: [\"sprite_vert\", \"sprite_frag\"],\r\n            background: [\"background_vert\", \"background_frag\"],\r\n            /* -------------------------------------------------------------------------\r\n            //\tCube map shader\r\n             ------------------------------------------------------------------------- */\r\n            cube: [\"cube_vert\", \"cube_frag\"],\r\n            equirect: [\"equirect_vert\", \"equirect_frag\"],\r\n            distanceRGBA: [\"distanceRGBA_vert\", \"distanceRGBA_frag\"],\r\n            shadow: [\"shadow_vert\", \"shadow_frag\"],\r\n            physical: [\"meshphysical_vert\", \"meshphysical_frag\"]\r\n\r\n        }\r\n        for (const key in updateList) {\r\n            if (Object.hasOwnProperty.call(updateList, key)) {\r\n                const keyArr = updateList[key];\r\n                THREE.ShaderLib[key].vertexShader = THREE.ShaderChunk[keyArr[0]];\r\n                THREE.ShaderLib[key].fragmentShader = THREE.ShaderChunk[keyArr[0]];\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    updateAllMaterial: function () {\r\n        var self = this;\r\n        const setMaterialNeedsUpdate = material => {\r\n            if (isArray(material)) {\r\n                for (let index = 0; index < material.length; index++) {\r\n                    const mat = material[index];\r\n                    setMaterialNeedsUpdate(mat);\r\n                }\r\n            } else if (isObject(material)) {\r\n                material.needsUpdate = true;\r\n            }\r\n        };\r\n        if (this.parent.objects) {\r\n\r\n            for (const a in this.parent.objects) {\r\n                if (Object.hasOwnProperty.call(this.parent.objects, a)) {\r\n                    const obj = this.parent.objects[a];\r\n                    if (obj.meshes) {\r\n                        for (const b in obj.meshes) {\r\n                            if (Object.hasOwnProperty.call(obj.meshes, b)) {\r\n                                const mesh = obj.meshes[b];\r\n                                setMaterialNeedsUpdate(mesh.material);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    getCurrentFragment: function () {\r\n        return THREE.ShaderChunk.shadowmap_pars_fragment;\r\n    },\r\n    getPCSS: function (args) {\r\n        var defaultProps = this.defaultProps;\r\n        var params = assignValue({}, defaultProps);\r\n        if (isObject(args)) {\r\n            params = Props.parseParams(args, defaultProps);\r\n        } else if (arguments.length) {\r\n            args = [];\r\n            for (let index = 0; index < arguments.length; index++) {\r\n                const element = arguments[index];\r\n                args[index] = element;\r\n            }\r\n            params = Props.parseParams(args, defaultProps);\r\n        }\r\n        var frustrum = params.frustrum,\r\n            size = params.size,\r\n            near = params.near,\r\n            samples = params.samples,\r\n            rings = params.rings;\r\n\r\n        return `\r\n        \r\n\t\t\t\t#define LIGHT_WORLD_SIZE 0.005\r\n\t\t\t\t#define LIGHT_FRUSTUM_WIDTH 3.75\r\n\t\t\t\t#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\r\n\t\t\t\t#define NEAR_PLANE 9.5\r\n\r\n\t\t\t\t#define NUM_SAMPLES 17\r\n\t\t\t\t#define NUM_RINGS 11\r\n\t\t\t\t#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\r\n\t\t\t\t#define PCF_NUM_SAMPLES NUM_SAMPLES\r\n\r\n\t\t\t\tvec2 poissonDisk[NUM_SAMPLES];\r\n\r\n\t\t\t\tvoid initPoissonSamples( const in vec2 randomSeed ) {\r\n\t\t\t\t\tfloat ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\r\n\t\t\t\t\tfloat INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\r\n\r\n\t\t\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\r\n\t\t\t\t\tfloat angle = rand( randomSeed ) * PI2;\r\n\t\t\t\t\tfloat radius = INV_NUM_SAMPLES;\r\n\t\t\t\t\tfloat radiusStep = radius;\r\n\r\n\t\t\t\t\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\r\n\t\t\t\t\t\tpoissonDisk[i] = vec2( cos( angle ), sin( angle ) ) * pow( radius, 0.75 );\r\n\t\t\t\t\t\tradius += radiusStep;\r\n\t\t\t\t\t\tangle += ANGLE_STEP;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfloat penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\r\n\t\t\t\t\treturn (zReceiver - zBlocker) / zBlocker;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfloat findBlocker( sampler2D shadowMap, const in vec2 uv, const in float zReceiver ) {\r\n\t\t\t\t\t// This uses similar triangles to compute what\r\n\t\t\t\t\t// area of the shadow map we should search\r\n\t\t\t\t\tfloat searchRadius = LIGHT_SIZE_UV * ( zReceiver - NEAR_PLANE ) / zReceiver;\r\n\t\t\t\t\tfloat blockerDepthSum = 0.0;\r\n\t\t\t\t\tint numBlockers = 0;\r\n\r\n\t\t\t\t\tfor( int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++ ) {\r\n\t\t\t\t\t\tfloat shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\r\n\t\t\t\t\t\tif ( shadowMapDepth < zReceiver ) {\r\n\t\t\t\t\t\t\tblockerDepthSum += shadowMapDepth;\r\n\t\t\t\t\t\t\tnumBlockers ++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif( numBlockers == 0 ) return -1.0;\r\n\r\n\t\t\t\t\treturn blockerDepthSum / float( numBlockers );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius ) {\r\n\t\t\t\t\tfloat sum = 0.0;\r\n\t\t\t\t\tfor( int i = 0; i < PCF_NUM_SAMPLES; i ++ ) {\r\n\t\t\t\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadowMap, uv + poissonDisk[ i ] * filterRadius ) );\r\n\t\t\t\t\t\tif( zReceiver <= depth ) sum += 1.0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor( int i = 0; i < PCF_NUM_SAMPLES; i ++ ) {\r\n\t\t\t\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadowMap, uv + -poissonDisk[ i ].yx * filterRadius ) );\r\n\t\t\t\t\t\tif( zReceiver <= depth ) sum += 1.0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn sum / ( 2.0 * float( PCF_NUM_SAMPLES ) );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfloat PCSS ( sampler2D shadowMap, vec4 coords ) {\r\n\t\t\t\t\tvec2 uv = coords.xy;\r\n\t\t\t\t\tfloat zReceiver = coords.z; // Assumed to be eye-space z in this code\r\n\r\n\t\t\t\t\tinitPoissonSamples( uv );\r\n\t\t\t\t\t// STEP 1: blocker search\r\n\t\t\t\t\tfloat avgBlockerDepth = findBlocker( shadowMap, uv, zReceiver );\r\n\r\n\t\t\t\t\t//There are no occluders so early out (this saves filtering)\r\n\t\t\t\t\tif( avgBlockerDepth == -1.0 ) return 1.0;\r\n\r\n\t\t\t\t\t// STEP 2: penumbra size\r\n\t\t\t\t\tfloat penumbraRatio = penumbraSize( zReceiver, avgBlockerDepth );\r\n\t\t\t\t\tfloat filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\r\n\r\n\t\t\t\t\t// STEP 3: filtering\r\n\t\t\t\t\t//return avgBlockerDepth;\r\n\t\t\t\t\treturn PCF_Filter( shadowMap, uv, zReceiver, filterRadius );\r\n\t\t\t\t}\r\n\r\n        `;\r\n    }\r\n});\r\nexport default DynamicShadows;\r\nexport { DynamicShadows };","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { EditorIO, EditorMethods } from '@app/_shared/components/editor/base/editor-io';\nimport { ItemModel } from '@app/_store/item';\n\n@Component({\n    selector: 'model-list',\n    templateUrl: './model-list.component.html',\n    styleUrls: ['./model-list.component.scss']\n})\nexport class ModelListComponent extends BaseComponent implements OnInit {\n\n    @Input() title: string = 'All Item';\n\n    @Input() items: ItemModel[];\n\n\n    @Output() clickMore = new EventEmitter<any>();\n    @Output() clickItem = new EventEmitter<any>();\n    constructor(){\n        super();\n    }\n    onInit(){\n        \n    }\n}\n","<div class=\"model-list-header\">\n    <h4 class=\"list-title\">{{title}}</h4>\n    <div class=\"list-more\">\n        <i nz-icon nzType=\"right\" nzTheme=\"outline\"></i>\n    </div>\n</div>\n<div class=\"model-list-body\">\n    <model-item *ngFor=\"let item of items; let i=index\" [item]=\"item\"></model-item>\n</div>","import { Injectable } from '@angular/core';\r\nimport { Actions, Effect, ofType } from '@ngrx/effects';\r\nimport { map, switchMap, catchError, tap } from 'rxjs/operators';\r\nimport * as authActions from './auth.actions';\r\nimport { AuthenticationService } from '../services';\r\nimport { Router } from '@angular/router';\r\nimport { Observable, of } from 'rxjs';\r\nimport { SettingService } from '@app/_core/services/setting/setting.service';\r\n\r\nconst { AuthActionTypes } = authActions;\r\n\r\n@Injectable()\r\nexport class AuthEffects {\r\n  constructor(\r\n    private actions$: Actions<authActions.AuthActions>,\r\n    private authenticationService: AuthenticationService,\r\n    private settingService: SettingService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  @Effect()\r\n  login$: Observable<any> = this.actions$.pipe(\r\n    ofType(AuthActionTypes.LOGIN),\r\n    map((action: authActions.Login) => action.payload),\r\n    switchMap((payload) => {\r\n      return this.authenticationService.login(payload.email, payload.password).pipe(\r\n        map((user) => new authActions.LoginSuccess(user)),\r\n        catchError((error) => {\r\n          return of(new authActions.LoginFailure({ error }));\r\n        })\r\n      );\r\n    })\r\n  );\r\n\r\n  @Effect({ dispatch: false })\r\n  loginSuccess$: Observable<any> = this.actions$.pipe(\r\n    ofType(AuthActionTypes.LOGIN_SUCCESS),\r\n    tap((res) => {\r\n      this.settingService.setUser(res.payload);\r\n      this.router.navigate(['p/teams']);\r\n    })\r\n  );\r\n}\r\n","import { Directive, Input, HostListener, Output, EventEmitter } from '@angular/core';\r\nimport { debounce } from 'lodash-es';\r\n\r\n@Directive({\r\n  selector: '[appDebounceInput]',\r\n})\r\nexport class DebounceInputDirective {\r\n  private defaultDebounceTime = 1000;\r\n  @Input() time: number;\r\n\r\n  private debounceEmit = debounce(this.updateChange, this.defaultDebounceTime);\r\n\r\n  @Output() changeInput = new EventEmitter<string>();\r\n  @HostListener('keyup', ['$event']) onkeyup(e) {\r\n    const value = e.target.value;\r\n    this.debounceEmit(value);\r\n  }\r\n\r\n  updateChange(value) {\r\n    this.changeInput.emit(value);\r\n  }\r\n  constructor() {}\r\n}\r\n","import {\r\n\tEuler,\r\n\tEventDispatcher,\r\n\tVector3\r\n} from 'three';\r\n\r\nconst _euler = new Euler( 0, 0, 0, 'YXZ' );\r\nconst _vector = new Vector3();\r\n\r\nconst _changeEvent = { type: 'change' };\r\nconst _lockEvent = { type: 'lock' };\r\nconst _unlockEvent = { type: 'unlock' };\r\n\r\nconst _PI_2 = Math.PI / 2;\r\n\r\nclass PointerLockControls extends EventDispatcher {\r\n\r\n\tconstructor( camera, domElement ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tif ( domElement === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.PointerLockControls: The second parameter \"domElement\" is now mandatory.' );\r\n\t\t\tdomElement = document.body;\r\n\r\n\t\t}\r\n\r\n\t\tthis.domElement = domElement;\r\n\t\tthis.isLocked = false;\r\n\r\n\t\t// Set to constrain the pitch of the camera\r\n\t\t// Range is 0 to Math.PI radians\r\n\t\tthis.minPolarAngle = 0; // radians\r\n\t\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tfunction onMouseMove( event ) {\r\n\r\n\t\t\tif ( scope.isLocked === false ) return;\r\n\r\n\t\t\tconst movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\r\n\t\t\tconst movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\r\n\r\n\t\t\t_euler.setFromQuaternion( camera.quaternion );\r\n\r\n\t\t\t_euler.y -= movementX * 0.002;\r\n\t\t\t_euler.x -= movementY * 0.002;\r\n\r\n\t\t\t_euler.x = Math.max( _PI_2 - scope.maxPolarAngle, Math.min( _PI_2 - scope.minPolarAngle, _euler.x ) );\r\n\r\n\t\t\tcamera.quaternion.setFromEuler( _euler );\r\n\r\n\t\t\tscope.dispatchEvent( _changeEvent );\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerlockChange() {\r\n\r\n\t\t\tif ( scope.domElement.ownerDocument.pointerLockElement === scope.domElement ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( _lockEvent );\r\n\r\n\t\t\t\tscope.isLocked = true;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tscope.dispatchEvent( _unlockEvent );\r\n\r\n\t\t\t\tscope.isLocked = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerlockError() {\r\n\r\n\t\t\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.connect = function () {\r\n\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove );\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerlockchange', onPointerlockChange );\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerlockerror', onPointerlockError );\r\n\r\n\t\t};\r\n\r\n\t\tthis.disconnect = function () {\r\n\r\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove );\r\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerlockchange', onPointerlockChange );\r\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerlockerror', onPointerlockError );\r\n\r\n\t\t};\r\n\r\n\t\tthis.dispose = function () {\r\n\r\n\t\t\tthis.disconnect();\r\n\r\n\t\t};\r\n\r\n\t\tthis.getObject = function () { // retaining this method for backward compatibility\r\n\r\n\t\t\treturn camera;\r\n\r\n\t\t};\r\n\r\n\t\tthis.getDirection = function () {\r\n\r\n\t\t\tconst direction = new Vector3( 0, 0, - 1 );\r\n\r\n\t\t\treturn function ( v ) {\r\n\r\n\t\t\t\treturn v.copy( direction ).applyQuaternion( camera.quaternion );\r\n\r\n\t\t\t};\r\n\r\n\t\t}();\r\n\r\n\t\tthis.moveForward = function ( distance ) {\r\n\r\n\t\t\t// move forward parallel to the xz-plane\r\n\t\t\t// assumes camera.up is y-up\r\n\r\n\t\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\r\n\r\n\t\t\t_vector.crossVectors( camera.up, _vector );\r\n\r\n\t\t\tcamera.position.addScaledVector( _vector, distance );\r\n\r\n\t\t};\r\n\r\n\t\tthis.moveRight = function ( distance ) {\r\n\r\n\t\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\r\n\r\n\t\t\tcamera.position.addScaledVector( _vector, distance );\r\n\r\n\t\t};\r\n\r\n\t\tthis.lock = function () {\r\n\r\n\t\t\tthis.domElement.requestPointerLock();\r\n\r\n\t\t};\r\n\r\n\t\tthis.unlock = function () {\r\n\r\n\t\t\tscope.domElement.ownerDocument.exitPointerLock();\r\n\r\n\t\t};\r\n\r\n\t\tthis.connect();\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { PointerLockControls };\r\n","export const PriVacyStatusLabels = {\r\n    // cac trang thai duoi dang value: label\r\n    draft: 'Draft',\r\n    private: 'Private',\r\n    published: 'Published',\r\n}\r\n\r\n\r\nexport const PriVacyStatusOptions:Array<{value:any, label:any}> = [\r\n    {\r\n        value: \"draft\",\r\n        label: \"Draft\"\r\n    },\r\n    {\r\n        value: \"private\", \r\n        label: 'Private'\r\n    },\r\n    {\r\n        value: \"published\",\r\n        label: 'Published'\r\n    }\r\n\r\n]","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { zip } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { SettingService } from './setting/setting.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { MenuService } from '@delon/theme';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class StartupService {\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private settingService: SettingService,\r\n    private translateService: TranslateService,\r\n    private menuService: MenuService\r\n  ) {}\r\n\r\n  init(): void {}\r\n\r\n  load(): Promise<any> {\r\n    return new Promise((resolve) => {\r\n      zip(this.httpClient.get(`assets/data/i18n/vi-data.json`), this.httpClient.get('assets/data/app-data.json'))\r\n        .pipe(\r\n          catchError(([langData, appData]) => {\r\n            resolve(null);\r\n            return [langData, appData];\r\n          })\r\n        )\r\n        .subscribe(\r\n          ([langData, appData]) => {\r\n            // setting language data\r\n            this.translateService.setTranslation('vi', langData);\r\n            this.translateService.setDefaultLang('vi');\r\n\r\n            this.settingService.setApp(appData?.app);\r\n            this.settingService.setPaths(appData?.paths);\r\n\r\n            this.setupMenu(appData.menu);\r\n          },\r\n          () => {},\r\n          () => {\r\n            resolve(null);\r\n          }\r\n        );\r\n    });\r\n  }\r\n\r\n  setupMenu(myMenu) {\r\n    const menuItems = myMenu.map((item) => this.buildMenuItem(item));\r\n    this.menuService.add([\r\n      {\r\n        group: true,\r\n        children: menuItems,\r\n      },\r\n    ]);\r\n  }\r\n\r\n  buildMenuItem(item) {\r\n    let childrenItem = [];\r\n    if (Array.isArray(item.children)) {\r\n      childrenItem = item.children.map((c) => this.buildMenuItem(c));\r\n    }\r\n    return {\r\n      text: item.text,\r\n      i18n: item.text,\r\n      icon: item.iconCode,\r\n      link: item.link,\r\n      children: childrenItem,\r\n    };\r\n  }\r\n\r\n  getMenuData(menuDefault, myRoleData, hasAdminRole) {\r\n    try {\r\n      const myMenu = JSON.parse(myRoleData?.webMenu);\r\n      return myMenu?.children || [];\r\n    } catch (error) {\r\n      return hasAdminRole ? menuDefault : [];\r\n    }\r\n  }\r\n}\r\n","import {\r\n    assignValue,\r\n    assignWithout,\r\n    copyByList,\r\n    copyWithout,\r\n    getEl,\r\n    inArray,\r\n    isArray,\r\n    isEmpty,\r\n    isFunction,\r\n    isObject,\r\n    isString,\r\n    newObj\r\n} from '@app/_core/helpers/utils';\r\nimport * as THREE from 'three';\r\nimport {LoaderLib} from './three.libs';\r\n\r\nimport Props from './props';\r\n\r\n\r\nconst Models = {\r\n\r\n    /**\r\n     * \r\n     * @param {object} obj \r\n    */\r\n    getMeshFromObject: function (obj: any = undefined) {\r\n        var meshes = [];\r\n        if (obj && typeof obj.traverse == \"function\") {\r\n            try {\r\n                obj.traverse(function (object) {\r\n                    if (object.isMesh || (object.type && String(object.type).toLowerCase() == \"mesh\")) {\r\n                        meshes.push(object);\r\n                    }\r\n                });\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        return meshes;\r\n    },\r\n    /**\r\n     * load moidel\r\n     * @param {object} option các thông số load\r\n     * @param {function} success hoàn thành quá trình load\r\n     * @param {function} progress tiến trình load\r\n     * @param {function} error xảy ra lổi\r\n     */\r\n    loadModel: function (option: any = undefined, success: any = undefined, progress: any = undefined, error: any = undefined) {\r\n        if (typeof option != \"object\") return false;\r\n        if (!option.type || !isString(option.type)) return this;\r\n        var self = this;\r\n        var loadParams = [option.type.toLowerCase(), option, function (data) {\r\n            if (self.trigger) {\r\n                self.emit(\"model.load.success\", data);\r\n\r\n            }\r\n            if (typeof success == \"function\") {\r\n                success(data);\r\n            }\r\n        }, function (percentage) {\r\n            if (self.trigger) {\r\n                self.emit(\"model.load.proccessing\", percentage);\r\n            }\r\n            if (typeof progress == \"function\") {\r\n                progress(percentage)\r\n            }\r\n        }, function (e) {\r\n            if (self.trigger) {\r\n                self.emit(\"model.load.error\", e);\r\n            }\r\n            if (typeof error == \"function\") {\r\n                error(e)\r\n            }\r\n        }];\r\n        if (self.Loader) {\r\n            self.Loader.load.apply(self.Loader, loadParams);\r\n        } else {\r\n            LoaderLib.load.apply(self.Loader, loadParams);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * \r\n     * @param {Object3D} obj \r\n     * @param {Object} options \r\n     */\r\n    parseModel: function (obj:any=undefined, options:any=undefined, model:any=undefined) {\r\n        var data = newObj()\r\n        try {\r\n\r\n            var castShadow = (options.props ? (options.props.castShadow || false) : (options.data ? (options.data.castShadow || false) : (options.castShadow || false))),\r\n                receiveShadow = (options.props ? (options.props.receiveShadow || false) : (options.data ? (options.data.receiveShadow || false) : (options.receiveShadow || false)));\r\n            \r\n            data = newObj({\r\n                meshes: this.getMeshFromObject(obj)\r\n            });\r\n            \r\n            // neu co object\r\n            if (obj) {\r\n                obj.castShadow = true;\r\n                obj.receiveShadow = true;\r\n                var props = {};\r\n                if (options.props) {\r\n\r\n                    try {\r\n                        props = Props.parse(options.props);\r\n\r\n                    } catch (error) {\r\n                        console.log(error);\r\n                    }\r\n\r\n                    var ignore = ['params', 'animateData', 'handle', 'type', 'file', 'path', 'format', 'traverse', '__trans', 'custom', '$id', 'obj_id'];\r\n\r\n                    if (options.options && isObject(options.options)) ignore.push('position');\r\n                    assignWithout(obj, props || options, ignore);\r\n                }\r\n                var ot = obj.type ? String(obj.type).toLowerCase() : \"\";\r\n                if (castShadow || receiveShadow) {\r\n                    if (obj.isMesh || ot == \"mesh\") {\r\n                        if (castShadow) obj.castShadow = true;\r\n                        if (receiveShadow) obj.receiveShadow = receiveShadow;\r\n                    }\r\n                    if (obj.traverse) {\r\n                        obj.traverse(function (child) {\r\n                            var ct = child.type ? String(child.type).toLowerCase() : \"\";\r\n                            if (child.isMesh || ct == \"mesh\") {\r\n                                if (castShadow) child.castShadow = true;\r\n                                if (receiveShadow) child.receiveShadow = receiveShadow;\r\n                            }\r\n                        });\r\n                    }\r\n                    else if (ot == \"group\" && obj.children && obj.children.length) {\r\n                        var trans;\r\n\r\n                        trans = function (o, lv) {\r\n                            for (let gi = 0; gi < o.children.length; gi++) {\r\n                                const child = o.children[gi];\r\n                                var ct = child.type ? String(child.type).toLowerCase() : \"\";\r\n                                if (child.isMesh || ct == \"mesh\") {\r\n                                    // data.meshes.push(child);\r\n                                    child.castShadow = castShadow;\r\n                                    child.receiveShadow = receiveShadow;\r\n                                }\r\n\r\n                                if (child.children && child.children.length) {\r\n                                    if (!lv) lv = 0;\r\n                                    lv++;\r\n                                    trans(child, lv);\r\n                                }\r\n                            }\r\n                        };\r\n                        trans(obj);\r\n                    }\r\n                }\r\n\r\n\r\n\r\n                var box = new THREE.Box3().setFromObject(obj);\r\n                box.getCenter(obj.position); // this re-sets the mesh position\r\n                const dimensions = new THREE.Vector3();\r\n                var size:any = box.getSize(dimensions);\r\n                data.size = newObj({\r\n                    origin: {\r\n                        width: size.x,\r\n                        height: size.y,\r\n                        depth: size.z\r\n                    }\r\n                });\r\n                assignValue(data.size.origin, size);\r\n                // console.log(box);\r\n                // return false;\r\n                var ps = copyByList(props || options, ['position']);\r\n                var opt = options.options;\r\n                // nếu can giua doi tuong\r\n                // data.raw = obj;\r\n                if (opt && isObject(opt)) {\r\n\r\n                    if (opt.pivot || opt.centerPivot) {\r\n                        obj.position.multiplyScalar(-1);\r\n                        var pivot = new THREE.Object3D();\r\n                        pivot.add(obj);\r\n                        if (opt.centerPivot) {\r\n                            assignValue(pivot, ps);\r\n                        }\r\n                        if (isString(opt.pivot)) {\r\n                            assignValue(pivot, ps);\r\n                        }\r\n                        else if (isObject(opt.pivot)) {\r\n                            if (opt.pivot.x) {\r\n\r\n                            }\r\n                            assignValue(pivot, ps);\r\n                        }\r\n                        pivot.castShadow = castShadow;\r\n                        pivot.receiveShadow = castShadow;\r\n                        data.object = pivot;\r\n                    } else {\r\n                        assignValue(obj, ps);\r\n                        data.object = obj;\r\n                    }\r\n\r\n\r\n                } else {\r\n\r\n                    assignValue(obj, ps);\r\n\r\n                    data.object = obj;\r\n                }\r\n                data.$type = 'model';\r\n\r\n                if (options.options && isObject(options.options)) {\r\n                    data.options = options.options;\r\n                }\r\n\r\n            }\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        return data;\r\n\r\n    },\r\n    /**\r\n     * Get model\r\n     * @param {Object} options các thong so load\r\n     * @param {function(obj, model)} onSuccess \r\n     * @param {function(error)} onError \r\n     * @param {function(proccessing)} onProgress\r\n     */\r\n    getModel: function getModel(options:any=undefined, onSuccess:any=undefined, onError:any=undefined, onProgress:any=undefined) {\r\n        if (typeof options != \"object\") return false;\r\n        var params = isObject(options.params) ? options.params : options;\r\n        var t = String(params.type ? params.type : (options.type ? options.type : '')).toLowerCase();\r\n        var self = this;\r\n\r\n\r\n        var select = params.select || options.select || null;\r\n\r\n\r\n        // load model\r\n        this.loadModel(params, function (model) {\r\n\r\n            // neu thuoc cac dinh dang thong thuong\r\n            if (inArray(['fbx', 'gltf', 'obj', 'max', '3ds', 'stl'], t)) {\r\n                try {\r\n                    // var animations = null;\r\n                    var obj = null;\r\n                    var box = null;\r\n                    // neu co kem thong tin select\r\n                    if (t == 'gltf') {\r\n                        if (model.scene) {\r\n                            if (select && select != 'default') {\r\n                                var o = getEl(model.scene, select);\r\n                                if (o) obj = o;\r\n\r\n                            } else {\r\n                                obj = model.scene;\r\n                            }\r\n                        }\r\n                        else {\r\n                            obj = model;\r\n                        }\r\n                    }\r\n                    else {\r\n                        obj = model;\r\n                    }\r\n\r\n                    if (typeof onSuccess == \"function\") {\r\n                        onSuccess(obj, model)\r\n                    }\r\n\r\n\r\n                } catch (error) {\r\n                    if (typeof onError == \"function\") {\r\n                        console.log(error)\r\n                        onError(error);\r\n                    }\r\n                }\r\n            }\r\n        }, function (p) {\r\n            if (typeof onProgress == \"function\") {\r\n                onProgress(p);\r\n            }\r\n        }, onError);\r\n\r\n    },\r\n\r\n    /**\r\n     * them model\r\n     * @param {object} options các thong so load\r\n     * @param {function(data)} onSuccess \r\n     * @param {function(s)} onError \r\n     */\r\n    getModelAndConvertToAppObjectData: function(options:any=undefined, onSuccess:any=undefined, onError:any=undefined, onProgress:any=undefined) {\r\n        if (typeof options != \"object\") return false;\r\n        var params = isObject(options.params) ? options.params : options;\r\n        var t = String(params.type ? params.type : (options.type ? options.type : '')).toLowerCase();\r\n        var self = this;\r\n\r\n        var data = newObj({\r\n            meshes:[]\r\n        });\r\n        \r\n        var select = params.select || options.select || null;\r\n        var trans = typeof params.traverse == \"function\" ? params.traverse :\r\n            typeof options.traverse == \"function\" ? options.traverse : null;\r\n\r\n        if (trans) {\r\n            params.__trans = trans;\r\n        }\r\n        params.traverse = function (object) {\r\n\r\n            try {\r\n                if (typeof params.__trans == \"function\") {\r\n                    params.__trans(object);\r\n                }\r\n                if (object.isMesh || (object.type && String(object.type).toLowerCase() == \"mesh\")) {\r\n\r\n                    if (data.meshes.indexOf(object) == -1) {\r\n                        data.meshes.push(object);\r\n                    }\r\n\r\n                    if (options.castShadow || (typeof options.props == \"object\" && options.props.castShadow)) {\r\n                        object.castShadow = true;\r\n                        object.receiveShadow = true;\r\n\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        };\r\n\r\n        // load model\r\n        this.loadModel(params, function (model) {\r\n\r\n            // neu thuoc cac dinh dang thong thuong\r\n            if (inArray(['fbx', 'gltf', 'obj', 'max', '3ds', 'stl'], t)) {\r\n                try {\r\n                    var animations = null;\r\n                    var obj = null;\r\n                    var box = null;\r\n                    // neu co kem thong tin select\r\n                    if (t == 'gltf') {\r\n                        if (model.scene) {\r\n                            if (select && select != 'default') {\r\n                                var o = getEl(model.scene, select);\r\n                                if (o) obj = o;\r\n\r\n                            } else {\r\n                                obj = model.scene;\r\n                            }\r\n                        }\r\n                        else {\r\n                            obj = model;\r\n                        }\r\n                    }\r\n                    else {\r\n                        obj = model;\r\n                    }\r\n                    if (model.animations) {\r\n                        animations = model.animations;\r\n                    }\r\n\r\n                    // neu co object\r\n                    if (obj) {\r\n                        obj.castShadow = true;\r\n                        obj.receiveShadow = true;\r\n                        var props = {};\r\n                        if (options.props) {\r\n\r\n                            try {\r\n                                props = Props.parse(options.props);\r\n\r\n                            } catch (error) {\r\n                                console.log(error);\r\n                            }\r\n\r\n                            var ignore = ['params', 'animateData', 'handle', 'type', 'file', 'path', 'format', 'traverse', '__trans', 'custom', '$id', 'obj_id'];\r\n\r\n                            if (options.options && isObject(options.options)) ignore.push('position');\r\n                            assignWithout(obj, props || options, ignore);\r\n                        }\r\n                        var ot = obj.type ? String(obj.type).toLowerCase() : \"\";\r\n                        if (obj.isMesh || ot == \"mesh\") {\r\n                            obj.castShadow = true;\r\n                            // data.meshes.push(obj);\r\n                        } else if (ot == \"group\" && obj.children && obj.children.length) {\r\n                            var trans;\r\n\r\n                            trans = function (o, lv) {\r\n                                for (let gi = 0; gi < o.children.length; gi++) {\r\n                                    const child = o.children[gi];\r\n                                    var ct = child.type ? String(child.type).toLowerCase() : \"\";\r\n                                    if (child.isMesh || ct == \"mesh\") {\r\n                                        // data.meshes.push(child);\r\n                                        child.castShadow = true;\r\n                                        child.receiveShadow = true;\r\n                                    }\r\n\r\n                                    if (child.children && child.children.length) {\r\n                                        if (!lv) lv = 0;\r\n                                        lv++;\r\n                                        trans(child, lv);\r\n                                    }\r\n                                }\r\n                            };\r\n                            trans(obj);\r\n                        } else if (typeof obj.traverse == \"function\") {\r\n                            obj.traverse(params.traverse);\r\n                        }\r\n\r\n\r\n                        var box = new THREE.Box3().setFromObject(obj);\r\n                        box.getCenter(obj.position); // this re-sets the mesh position\r\n                        // console.log(box.min, box.max, box.getSize());\r\n                        var sizeA = new THREE.Vector3();\r\n                        var size = box.getSize(sizeA);\r\n                        data.size = {\r\n                            origin: {\r\n                                length: size.x,\r\n                                width: size.z,\r\n                                height: size.y\r\n                            }\r\n                        };\r\n                        assignValue(data.size.origin, size);\r\n                        // console.log(box);\r\n                        // return false;\r\n                        var ps = copyByList(props || options, ['position']);\r\n                        var opt = options.options || (options.settings ? options.settings.options : undefined);\r\n                        // nếu can giua doi tuong\r\n                        if (opt && isObject(opt)) {\r\n                            if (opt.pivot || opt.centerPivot) {\r\n                                obj.position.multiplyScalar(-1);\r\n                                var pivot = new THREE.Object3D();\r\n                                pivot.add(obj);\r\n                                if (opt.centerPivot) {\r\n                                    assignValue(pivot, ps);\r\n                                }\r\n                                if (isString(opt.pivot)) {\r\n                                    assignValue(pivot, ps);\r\n                                }\r\n                                else if (isObject(opt.pivot)) {\r\n                                    if (opt.pivot.x) {\r\n\r\n                                    }\r\n                                    assignValue(pivot, ps);\r\n                                }\r\n                                pivot.castShadow = true;\r\n                                pivot.receiveShadow = true;\r\n                                data.object = pivot;\r\n                            } else {\r\n                                assignValue(obj, ps);\r\n                                data.object = obj;\r\n                            }\r\n\r\n\r\n                        } else {\r\n\r\n                            assignValue(obj, ps);\r\n\r\n                            data.object = obj;\r\n                        }\r\n                        data.$type = 'model';\r\n\r\n                        if (animations) {\r\n                            data.animations = animations;\r\n                        }\r\n                        if (typeof onSuccess == \"function\") {\r\n                            onSuccess(data);\r\n                        }\r\n                    }\r\n\r\n                } catch (error) {\r\n                    if (typeof onError == \"function\") {\r\n                        console.log(error)\r\n                        onError(error);\r\n                    }\r\n                }\r\n            }\r\n        }, function (p) {\r\n            if (typeof onProgress == \"function\") onProgress(p);\r\n        }, onError);\r\n\r\n    }\r\n};\r\n\r\nexport default Models;","import { Injectable } from '@angular/core';\nimport { DbTableColumns } from '@app/_core/helpers/local-db';\nimport { LostDbTableService } from '@app/_core/services/lost-db-table.service';\nimport { LostDbService } from '@app/_core/services/lost-db.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ItemTableService extends LostDbTableService {\n    name: string = 'items';\n    columns: DbTableColumns = {\n        id: {\n            type: \"number\",\n            autoIncrement: true\n        },\n        name: {\n            type: \"string\",\n            required: true,\n        },\n        category_id: {\n            type: \"number\",\n            defVal: 0\n        },\n        description: {\n            type: \"string\",\n            defVal: \"\"\n        },\n        status: {\n            type: \"string\",\n            defVal: \"draft\"\n        },\n        type: {\n            type: \"string\",\n            defVal: \"gltf\"\n        },\n        path: {\n            type: \"string\",\n            defVal: \"\"\n        },\n        file: {\n            type: \"string\",\n            defVal: \"\"\n        },\n        download_source_url: {\n            type: \"string\",\n            defVal: \"\"\n        },\n        thumbnail: {\n            type: \"string\",\n            defVal: \"\"\n        },\n        load_options: {\n            type: \"object\",\n            defVal: {\n                useRoughnessMipmapper: true,\n                materialNeedsUpdate: true\n            }\n        },\n        settings: {\n            type: \"object\",\n            defVal: {}\n        },\n        size: {\n            type: \"object\",\n            defVal: {\n                x: 0,\n                y: 0,\n                z: 0\n            }\n        },\n    }\n    constructor(private dbService: LostDbService) {\n        super(dbService);\n        this.init();\n    }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { isNumber } from '@app/_core/helpers/utils';\nimport { BaseInputComponent } from '../base-input/base-input.component';\n\n@Component({\n  selector: 'inp-textarea',\n  templateUrl: './inp-textarea.component.html',\n  styleUrls: ['./inp-textarea.component.scss']\n})\nexport class InpTextareaComponent extends BaseInputComponent implements OnInit {\n\n  @Input() minRows: number = 3;\n  @Input() maxRows: Number = 5;\n  \n  _old: any = null;\n\n  size: any = {\n    minRows: 3,\n    maxRows: 5\n  }\n  constructor() {\n    super();\n   }\n\n  ngOnInit(): void {\n    this._old = this.value;\n    if(!isNumber(this.minRows) || this.minRows < 1) this.minRows = 3;\n    if(!isNumber(this.maxRows) || this.maxRows < this.maxRows) this.maxRows = this.minRows;\n\n    this.size.minRows = this.minRows;\n    this.size.maxRows = this.maxRows;\n    \n  }\n\n  onChangeValue(event){\n    if(this._old !== this.value){\n      this.emit();\n      this._old = this.value;\n    }\n  }\n\n}\n","<textarea \n    nz-input\n    placeholder=\"{{placeholder?placeholder:name|translate}}\" \n    [(ngModel)]=\"value\" \n    (input)=\"onChangeValue($event)\" \n    (change)=\"onChangeValue($event)\" \n    [nzAutosize]=\"size\">\n</textarea>","import { Component, Output, EventEmitter, OnInit, Input } from '@angular/core';\r\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\r\nimport { EditorIO, EditorMethods } from '../../base/editor-io';\r\n\r\n@Component({\r\n  selector: 'app-tab-object',\r\n  templateUrl: './tab-object.component.html',\r\n  styleUrls: ['./tab-object.component.scss'],\r\n})\r\nexport class TabObjectComponent extends BaseComponent implements OnInit {\r\n  @Input() loaded: EventEmitter<any> = new EventEmitter();\r\n\r\n  @Output() loadedChange: EventEmitter<any> = new EventEmitter();\r\n\r\n  loadedPhoto = false;\r\n  loadedElement = false;\r\n  loadedBackground = false;\r\n\r\n  onInit(): void {\r\n    this.loadedChange.emit(true);\r\n  }\r\n}\r\n","<div class=\"tab-inner\">\r\n  <h2>Objects</h2>\r\n  <nz-tabset nzTabPosition=\"top\" nzType=\"line\" class=\"sub-tab\">\r\n    \r\n    <nz-tab [nzTitle]=\"iconModel\">\r\n      <ng-template #iconModel>\r\n        <img src=\"/assets/icons/new-design/tab-sub/model.svg\" alt=\"Item\" />\r\n        <div>Item</div>\r\n      </ng-template>\r\n      <app-tab-model></app-tab-model>\r\n    </nz-tab>\r\n\r\n    <nz-tab [nzTitle]=\"iconGeometry\" [nzForceRender]=\"loadedPhoto\">\r\n      <ng-template #iconGeometry>\r\n        <img src=\"/assets/icons/new-design/tab-sub/element.svg\" alt=\"Geometry\" />\r\n        <div>Geometry</div>\r\n      </ng-template>\r\n      <ng-template nz-tab>\r\n        <app-tab-geometry></app-tab-geometry>\r\n      </ng-template>\r\n    </nz-tab>\r\n  </nz-tabset>\r\n</div>\r\n","import { assignValue, assignWithout, inArray, isArray, isEmpty, isNumber, isObject, objectHasKey, Str } from '@app/_core/helpers/utils';\r\nimport * as THREE from 'three';\r\n\r\nimport Props from '../libs/props';\r\nimport { CameraSetting, FacePosKeyValues } from '../store/data.type';\r\nexport const caculateFacePos = (key: string, val: number) => {\r\n    const pos = {\r\n        x:0, y: 0, z: val\r\n    };\r\n\r\n    if(checkFacePos(key)){\r\n        const posRefs = FacePosKeyValues[key];\r\n        let i = 0;\r\n        for (const key in posRefs) {\r\n            if (Object.prototype.hasOwnProperty.call(posRefs, key)) {\r\n                const v = posRefs[key];\r\n                let c = Math.abs(v);\r\n                if(c > 0) i++;\r\n            }\r\n        }\r\n\r\n        if(i > 0){\r\n            let powVal = Math.pow(val, 2);\r\n            let p = Math.sqrt(powVal/i);\r\n            for (const k in posRefs) {\r\n                if (Object.prototype.hasOwnProperty.call(posRefs, k)) {\r\n                    const v = posRefs[k];\r\n                    pos[k] = p*v;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return pos;\r\n\r\n}\r\n\r\n// objectHasKey(FacePosKeys, key) ? (inArray(['left', 'bottom', 'back'], key) ? -val : val) : val;\r\nexport const checkFacePos = (face: string) => objectHasKey(FacePosKeyValues, face);\r\nconst Camera = {\r\n    camera: null,\r\n    cameraList: null,\r\n    boots: ['bootCamera'],\r\n    bootCamera: function () {\r\n        this.cameraList = {};\r\n    },\r\n    /**\r\n     * thiết lập cam chính\r\n     * @param {object} opts \r\n     */\r\n    setMainCamera: function (opts?: any) {\r\n        var self = this;\r\n        var opt = assignValue({}, opts);\r\n        Props.parse(opt);\r\n        var fov = isNumber(opt.fov) && opt.fov > 0 ? opt.fov : 45;\r\n        var aspect = isNumber(this.aspect) && this.aspect > 0 ? this.aspect : 1;\r\n        var near = isNumber(opt.near) && opt.near > 0 ? opt.near : 0.01;\r\n        var far = isNumber(opt.far) && opt.far > 0 ? opt.far : 10000;\r\n        \r\n        var camera = new THREE.PerspectiveCamera(fov, aspect, near, far);\r\n        this.camera = camera;\r\n        // return this;\r\n        if (camera) {\r\n            \r\n            // không có tác dụng gì nhiều nhưng không muốn dùng if\r\n            // var r = this.scene ? this.scene.add(this.camera) : 0;\r\n\r\n            // kiểm tra và set vị trí\r\n            if (opt.position) {\r\n                self.setCameraPosition(opt.position);\r\n            }\r\n\r\n            // kiểm tra và set góc xoay\r\n            if (opt.rotation) {\r\n                self.setCameraRotation(opt.rotation);\r\n            }\r\n\r\n            /**\r\n             * kiểm tra và thiết lập vị trí\r\n             */\r\n            if (this.data.control && !this.data.control.disabled && (opt.rotation || opt.position)) {\r\n                setTimeout(function () {\r\n                    if (opt.position) {\r\n                        assignValue(camera.position, opt.position);\r\n                    }\r\n                    if (opt.rotation) {\r\n                        assignValue(camera.rotation, opt.rotation);\r\n                    }\r\n                    if (opt.quaternion) {\r\n                        assignValue(camera.quaternion, opt.quaternion);\r\n                    }\r\n                    \r\n\r\n                }, 10);\r\n            }\r\n            var id = opt.id || \"main\";\r\n            this.cameraList[id] = camera;\r\n            if(isObject(opt.settings)) this.updateControlSettings({\r\n                settings: opt.settings\r\n            }, true);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    changeCameraLookFace: function (face, update?: any) {\r\n        if (checkFacePos(face)) {\r\n            let camera = this.camera;\r\n            let camPos = camera.position;\r\n            let distence = Math.sqrt(\r\n                Math.pow(camPos.x, 2) + Math.pow(camPos.y, 2) + Math.pow(camPos.z, 2)\r\n            );\r\n\r\n            // let pk = objectHasKey(FacePosKeyValues, face) ? FacePosKeyValues[face] : FacePosKeyValues.front;\r\n            assignValue(camera.position, caculateFacePos(face, distence));\r\n            this.camera.lookAt(0, 0, 0);\r\n            this.camera.updateProjectionMatrix();\r\n                \r\n            if (update) {\r\n                this.refresh()\r\n                this.emit({\r\n                    type: \"controls.change.camera\",\r\n                    camera: this.camera\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    /** \r\n     * thiết lập cam chính\r\n     * @param {object} opts \r\n    */\r\n    updateMainCameraSettings: function (setting, update?: boolean) {\r\n        let camera = this.camera;\r\n        var props = assignValue({}, setting);\r\n        assignWithout(camera, props, ['id', 'type', 'lookat', 'lookAt', 'settings', 'rotation', 'position']);\r\n        // var la = props.lookAt || props.lookat;\r\n        var refresh = false;\r\n        if (isObject(props.settings)) {\r\n            if (isObject(props.settings.position)) {\r\n                let camPos = camera.position;\r\n                let posSetting = props.settings.position;\r\n                if (posSetting.type == \"system\" || posSetting.type == \"faces\" || posSetting.type == \"face\") {\r\n                    this.changeCameraLookFace(posSetting.face);\r\n                    refresh = true;\r\n                } else if (update && posSetting.type == \"custom\") {\r\n                    assignValue(camera.position, posSetting.custom);\r\n                    refresh = true;\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n        if(objectHasKey(props, 'fov')) refresh = true;\r\n        if (refresh) {\r\n            this.camera.lookAt(0, 0, 0);\r\n            this.camera.updateProjectionMatrix();\r\n            this.refresh()\r\n            this.emit({\r\n                type: \"controls.change.camera\",\r\n                camera: this.camera\r\n            });\r\n        }\r\n        else{\r\n            this.emit({\r\n                type: \"camera.settings.updated\",\r\n                camera: this.camera\r\n            });\r\n        }\r\n\r\n\r\n        return this\r\n    },\r\n\r\n    /**\r\n     * thêm vào danh sách camera\r\n     * @param {option} options thuộc tính\r\n     */\r\n    addCamera: function (options?: any) {\r\n        if (!isObject(options) || isEmpty(options)) return null;\r\n        var id = options.id || \"camera_\" + Str.rand();\r\n\r\n        var camera = this.getCamera(options);\r\n        if (camera) {\r\n            this.cameraList[id] = camera;\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * thêm nhiều camera\r\n     * @param {Array} cameras array\r\n     */\r\n    addCameras: function (cameras?: any[]) {\r\n        if (isArray(cameras)) {\r\n            for (let i = 0; i < cameras.length; i++) {\r\n                const ctlopt = cameras[i];\r\n                if (isObject(ctlopt)) {\r\n                    this.addCamera(ctlopt);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * \r\n     * @param {object} opts \r\n     */\r\n    getCamera: function (opts?: any) {\r\n        var self = this;\r\n        var opt = typeof opts == \"object\" ? assignWithout({}, opts, ['id']) : {};\r\n\r\n        Props.parse(opt);\r\n        var pars = isObject(opt.params) || isArray(opt.params) ? opt.params : opt;\r\n\r\n        var params: any = {};\r\n        var camera;\r\n        if (opt.type == \"cube\") {\r\n            params = Props.parseParams(pars, {\r\n                near: 0.1,\r\n                far: 10000\r\n            });\r\n            var cubeRenderTarget = new THREE.WebGLCubeRenderTarget(128, {\r\n                format: THREE.RGBFormat,\r\n                generateMipmaps: true,\r\n                minFilter: THREE.LinearMipmapLinearFilter\r\n            });\r\n            camera = new THREE.CubeCamera(\r\n                params.near || 0.1,\r\n                params.far || 1000,\r\n                cubeRenderTarget\r\n            );\r\n        }\r\n        else if (opt.type == 'orthographic') {\r\n            params = Props.parseParams(pars, {\r\n                left: - this.width / 2,\r\n                right: this.width / 2,\r\n                top: this.height / 2,\r\n                bottom: - this.height / 2,\r\n                near: 0.1,\r\n                far: 10000\r\n            });\r\n\r\n            camera = new THREE.OrthographicCamera(\r\n                params.left,\r\n                params.right,\r\n                params.top,\r\n                params.bottom,\r\n                params.near,\r\n                params.far\r\n            );\r\n        }\r\n        else if (opt.type == \"stereo\") {\r\n            camera = new THREE.StereoCamera();\r\n        }\r\n        else {\r\n            params = Props.parseParams(pars, {\r\n                fov: 45,\r\n                aspect: this.aspect,\r\n                near: 0.1,\r\n                far: 10000\r\n            });\r\n\r\n            camera = new THREE.PerspectiveCamera(\r\n                params.fov,\r\n                params.aspect,\r\n                params.near,\r\n                params.far\r\n            );\r\n        }\r\n        if (camera) {\r\n            var props = assignWithout({}, opt.props || opt, params, ['id']);\r\n\r\n            assignWithout(camera, props, ['id', 'lookat', 'lookAt']);\r\n            var la = props.lookAt || props.lookat;\r\n\r\n            if (la) {\r\n                params = Props.parseParams(la, {\r\n                    x: 0,\r\n                    y: 0,\r\n                    z: 0\r\n                });\r\n\r\n                camera.lookAt(params.x, params.y, params.z);\r\n                camera.updateProjectionMatrix();\r\n            }\r\n\r\n\r\n        }\r\n        return camera;\r\n    },\r\n\r\n    /**\r\n     * thiết lập vị trí\r\n     * @param {int} x vĩ trí x\r\n     * @param {number} y vị trí y\r\n     * @param {number} z vị trí z\r\n     */\r\n    setCameraPosition: function (x?: any, y?: number, z?: number) {\r\n        if (typeof x == \"object\") {\r\n            if (x.x !== undefined && isNumber(x.x)) {\r\n                this.camera.position.x = x.x;\r\n            }\r\n            if (x.y !== undefined && isNumber(x.y)) {\r\n                this.camera.position.y = x.y;\r\n            }\r\n            if (x.z !== undefined && isNumber(x.z)) {\r\n                this.camera.position.z = x.z;\r\n            }\r\n        } else {\r\n            if (x !== undefined && isNumber(x)) {\r\n                this.camera.position.x = x;\r\n            }\r\n            if (y !== undefined && isNumber(y)) {\r\n                this.camera.position.y = y;\r\n            }\r\n            if (z !== undefined && isNumber(z)) {\r\n                this.camera.position.z = z;\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    setCameraRotation: function (x?: any, y?: number, z?: number) {\r\n        if (typeof x == \"object\") {\r\n            if (x.x !== undefined && isNumber(x.x)) {\r\n                this.camera.rotation.x = x.x;\r\n            }\r\n            if (x.y !== undefined && isNumber(x.y)) {\r\n                this.camera.rotation.y = x.y;\r\n            }\r\n            if (x.z !== undefined && isNumber(x.z)) {\r\n                this.camera.rotation.z = x.z;\r\n            }\r\n        } else {\r\n            if (x !== undefined && isNumber(x)) {\r\n                this.camera.rotation.x = x;\r\n            }\r\n            if (y !== undefined && isNumber(y)) {\r\n                this.camera.rotation.y = y;\r\n            }\r\n            if (z !== undefined && isNumber(z)) {\r\n                this.camera.rotation.z = z;\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * lấy ra các camera đã dc add\r\n     * @param {string} id \r\n     */\r\n    getAddedCamera: function (id: any) {\r\n        return typeof this.cameraList[id] != \"undefined\" ? this.cameraList[id] : null;\r\n    },\r\n\r\n    changeCamera: function (id: any, options?: any) {\r\n        var camera = this.getAddedCamera(id, options);\r\n        if (camera) {\r\n            const position = this.camera.position.clone();\r\n\r\n            this.camera = camera;\r\n            this.camera.position.copy(position);\r\n\r\n            this.control.object = camera;\r\n            this.camera.lookAt(this.control.target.x, this.control.target.y, this.control.target.z);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n};\r\n\r\nexport default Camera;\r\nexport { Camera }","import { ChangeDetectorRef, Component, OnInit, SimpleChanges } from '@angular/core';\nimport { LightLib } from '@app/_3D/libs/three.libs';\nimport { LightPropDefaultData, LightProps, ShadowMap } from '@app/_3D/store/data.type';\nimport { assignValue, assignWithout, inArray, isObject, Str } from '@app/_core/helpers/utils';\nimport { CallbackFunction } from '@app/_shared/shared.type';\nimport { BaseComponent } from '../../base/base.component';\nimport { PanelLightService } from './panel-light.service';\n\nenum TabIndex {\n    Params = 0,\n    Properties = 1,\n}\n\n@Component({\n    selector: 'panel-light',\n    templateUrl: './panel-light.component.html',\n    styleUrls: ['./panel-light.component.scss']\n})\nexport class PanelLightComponent extends BaseComponent implements OnInit {\n\n    title: string = 'Title';\n    hasTitle: boolean = false;\n    isShow: boolean = false;\n\n    btnDoneText: string = 'Done';\n    onUpdateHandle: CallbackFunction = null;\n    onDoneHandle: CallbackFunction = null;\n    _service: PanelLightService = null;\n\n\n\n    prevTab: number = TabIndex.Params;\n    currentTab: number = TabIndex.Params;\n\n    secretKey: string = '';\n\n    data: any = {};\n    object: any = null;\n\n    settings: any = {};\n\n    paramFormGroup: any[] = [];\n    params: any = {};\n    props: LightProps = assignValue({}, LightPropDefaultData);\n    hasShadow:boolean = true;\n    hasTarget: boolean = false;\n    hasShadowCamera: boolean = false;\n    shadow: ShadowMap = {};\n\n    constructor(private cd: ChangeDetectorRef, private service: PanelLightService) {\n        super();\n        this._service = service;\n        this.service.on(\"panel.show\", e => this.show(e.data));\n        this.service.on(\"panel.hide\", e => this.hide());\n        this.service.on(\"editor.update.props\", e => {\n\n            if(!this.isFocus) return;\n            if (isObject(e.data) && e.data.secret_key == this.secretKey) {\n                assignValue(this.settings.props, e.data.key, e.data.value);\n                assignValue(this.props, e.data.key, e.data.value);\n                if (e.data.key == \"rotation\") {\n                    setTimeout(() => {\n                        this.service.emit({\n                            type: \"props.rotation.change\"\n                        });\n                    }, 1);\n                }\n                this.cd.detectChanges();\n            }\n        });\n        this.service.on(\"editor.update.props.target\", e => {\n            if(!this.isFocus) return;\n            if (isObject(e.data) && e.data.secret_key == this.secretKey && this.hasTarget) {\n                assignValue(this.settings.props.target, e.data.key, e.data.value);\n                assignValue(this.props.target, e.data.key, e.data.value);\n                // if (e.data.key == \"rotation\") {\n                //     setTimeout(() => {\n                //         this.service.emit({\n                //             type: \"props.rotation.change\"\n                //         });\n                //     }, 1);\n                // }\n                this.cd.detectChanges();\n            }\n        });\n\n\n        this.service.on(\"component.checkchange\", () => this.cd.detectChanges());\n    }\n\n    onInit(): void {\n        // this._service = this.service;\n        this.cd.detectChanges();\n        \n\n    }\n\n    setData(data: any) {\n        this.secretKey = data.secret_key;\n        this.data = data.data;\n        this.object = data.ref;\n        this.setDefaultSettingData();\n        this.asyncSettings(data.data);\n    }\n\n    // dong bo setting cua item voi tab\n    asyncSettings(settings: any) {\n\n        this.paramFormGroup = [];\n        assignWithout(this.settings, settings, ['meshes']);\n        var config = LightLib.getConfigData(this.object.type);\n        let params: any = {}\n        for (const key in config.inputs) {\n            if (Object.prototype.hasOwnProperty.call(config.inputs, key)) {\n                const inp = config.inputs[key];\n                if (inArray(config.params, inp.name)) {\n                    inp.value = typeof this.settings.params[inp.name] != \"undefined\" ? this.settings.params[inp.name] : this.object[inp.name];\n                    params[inp.name] = inp;\n                }\n            }\n        }\n        config.params.map(name => Object.prototype.hasOwnProperty.call(params, name)? this.paramFormGroup.push(params[name]) : null);\n\n        var castShadow = config.props.castShadow == \"Boolean\";\n        this.initProps(castShadow);\n        this.hasShadow = false;\n        this.hasShadowCamera = false;\n        this.hasTarget = false;\n        if(castShadow){\n            this.hasShadow = true;\n            this.props.castShadow = typeof this.settings.props.castShadow == \"boolean\"?this.settings.props.castShadow:this.object.castShadow;\n\n            var lightShadow = this.object.shadow;\n            var mapSize = lightShadow.mapSize;\n            var camera = lightShadow.camera;\n            var shadowTemp = {\n                mapSize: {\n                    width: mapSize.width,\n                    height: mapSize.height\n                },\n                camera: {\n                    near: camera.near,\n                    far: camera.far,\n                    left: camera.left,\n                    right: camera.right,\n                    top: camera.top,\n                    bottom: camera.bottom\n                },\n                darkness: lightShadow.darkness,\n                bias: lightShadow.bias,\n                radius: lightShadow.radius\n            };\n\n            assignValue(shadowTemp, settings.props ? settings.props.shadow : {});\n            if(!this.object.isPointLight){\n                this.hasShadowCamera = true;\n            }\n            this.props.shadow = shadowTemp;\n\n\n        }\n        if(config.props.target && config.props.target == \"Object3D\"){\n            this.hasTarget = true;\n            let defPos = {x: 0, y: 0, z: 0};\n            this.props.target = {\n                position: {\n                    x: 0,\n                    y: 0, \n                    z: 0\n                }\n            }\n            for (const key in defPos) {\n                if (Object.prototype.hasOwnProperty.call(defPos, key)) {\n                    const vl = defPos[key];\n                    this.props.target.position[key] = typeof this.settings.props.target == \"object\" && typeof this.settings.props.target.position ==\"object\" && typeof this.settings.props.target.position[key] != \"undefined\" ? this.settings.props.target.position[key] : (\n                        typeof this.object.target == \"object\"? this.object.target.position[key] : vl\n                    );\n                }\n            }\n        }\n\n    }\n\n\n\n    initProps(castShadow?:boolean) {\n        for (const key in LightPropDefaultData) {\n            if (Object.prototype.hasOwnProperty.call(LightPropDefaultData, key)) {\n                const value = LightPropDefaultData[key];\n                assignValue(this.props, key, value);\n                if (isObject(value)) {\n                    if (Object.prototype.hasOwnProperty.call(this.object, key) && isObject(this.object[key]) && key != \"shadow\") {\n                        for (const k in value) {\n                            if (Object.prototype.hasOwnProperty.call(value, k)) {\n                                if (typeof this.object[key][k] != \"undefined\") {\n                                    this.props[key][k] = this.object[key][k];\n                                }\n                            }\n                        }\n                    }\n                    if (Object.prototype.hasOwnProperty.call(this.settings.props, key)) {\n                        for (const k in value) {\n                            if (Object.prototype.hasOwnProperty.call(value, k)) {\n                                if (Object.prototype.hasOwnProperty.call(this.settings.props[key], k)) {\n                                    this.props[key][k] = this.settings.props[key][k];\n                                }\n\n                            }\n                        }\n                    }\n                } else {\n                    if (Object.prototype.hasOwnProperty.call(this.object, key)) {\n                        this.props[key] = this.object[key];\n                    }\n                    if (Object.prototype.hasOwnProperty.call(this.settings.props, key)) {\n                        this.props[key] = this.settings.props[key];\n                    }\n                }\n\n\n            }\n        }\n    }\n\n    // updateProps(event: InpEvent) {\n\n    // }\n\n    onDone() {\n        this.hide();\n\n        return typeof this.onDoneHandle == \"function\" ? this.onDoneHandle() : 0;\n    }\n\n\n\n\n    /**\n     * thiết lập giá trị mặc định\n     */\n    setDefaultSettingData() {\n        this.settings = {\n            params: {},\n            props: assignValue({}, LightPropDefaultData),\n\n        }\n    }\n\n\n\n\n\n    updateProps(event) {\n        let name = event.name;\n        let value = event.value;\n        var accessName = Str.replace(name, [\"[\", \"]\"], [\".\", \"\"]);\n        var temp = {};\n        var accNs = accessName.split(\".\");\n        // if(!this.lightData[group]) this.lightData[group] = {};\n        // var d = this.lightData[group];\n        let updateName = accNs[0];\n        function mkObjMap(o, k, v) {\n            o[k] = v;\n            return v;\n        }\n        if (accNs.length == 1) {\n            temp[accessName] = value;\n        } else {\n            var d = null;\n            for (let i = 0; i < accNs.length; i++) {\n                const ns = accNs[i];\n                if (i == 0) {\n                    d = mkObjMap(temp, ns, {});\n                }\n                else if (i < accNs.length - 1) {\n                    d = mkObjMap(d, ns, {});\n\n                } else {\n                    mkObjMap(d, ns, value);\n                }\n            }\n        }\n        \n        assignValue(this.settings.props, temp);\n\n        if (typeof this.onUpdateHandle == \"function\") {\n            this.onUpdateHandle({\n                secret_key: this.secretKey,\n                type: \"props\",\n                name: updateName,\n                value: temp[updateName],\n                data: this.settings.props\n            });\n        }\n        this.service.emit({\n            type: \"props.change\",\n            secret_key: this.secretKey,\n            data: this.settings.props\n        });\n    }\n\n    updateParams(event) {\n        this.settings.params[event.name] = event.value;\n        if (typeof this.onUpdateHandle == \"function\") {\n            this.onUpdateHandle({\n                secret_key: this.secretKey,\n                type: \"params\",\n                name: event.name,\n                value: event.value,\n                data: this.settings.params\n            });\n        }\n        this.service.emit({\n            type: \"params.change\",\n            secret_key: this.secretKey,\n            data: this.settings.params\n        });\n    }\n\n\n\n    ngOnChanges(changes: SimpleChanges) {\n\n    }\n\n    onChangeTab(e) {\n        this.currentTab = e.index;\n        this.cd.detectChanges();\n    }\n\n    reset() {\n        this.settings = {};\n        this.object = null;\n        this.data = null;\n        this.btnDoneText = 'Done';\n    }\n\n\n\n    show(data: any) {\n        if(!this.isFocus) return;\n        if (isObject(data)) {\n\n            if (this.isShow) {\n                if (data.secret_key == this.secretKey) return false;\n                this.hide();\n                setTimeout(() => this.display(data), 10);\n            }\n            else {\n                this.currentTab = TabIndex.Params;\n                this.display(data);\n            }\n        }\n\n    }\n    hide() {\n        if(!this.isFocus) return;\n        this.isShow = false;\n        this.reset();\n    }\n\n    display(data: any) {\n        if(!this.isFocus) return;\n        if (data.title) {\n            this.title = data.title;\n            this.hasTitle = true;\n        }\n        if (data.btnDone || data.btnDoneText) {\n            this.btnDoneText = data.btnDone || data.btnDoneText;\n        }\n        this.onUpdateHandle = null;\n        if (typeof data.onUpdate == \"function\") {\n            this.onUpdateHandle = data.onUpdate;\n        }\n        if (typeof data.onChange == \"function\") {\n            this.onUpdateHandle = data.onChange;\n        }\n        if (typeof data.change == \"function\") {\n            this.onUpdateHandle = data.change;\n        }\n        if (typeof data.done == \"function\") {\n            this.onDoneHandle = data.done;\n        } else if (typeof data.onDone == \"function\") {\n            this.onDoneHandle = data.onDone;\n        }\n\n        if (isObject(data.data) && data.secret_key) {\n            this.setData(data);\n\n            this.isShow = true;\n        }\n    }\n\n}\n","<div class=\"panel inner-layout\" *ngIf=\"isShow\">\n    <div class=\"panel-body\">\n        <nz-tabset [nzSelectedIndex]=\"currentTab\" nzTabPosition=\"top\" nzType=\"line\" class=\"main-tab w100\" (nzSelectChange)=\"onChangeTab($event)\">\n            <nz-tab [nzTitle]=\"iconParams\">\n                <ng-template #iconParams>\n                    Params\n                </ng-template>\n                <!-- <mesh-geometry-tab-geometry [inputs]=\"geoInputs\" (subcribe)=\"onGeometryParamChange($event)\"></mesh-geometry-tab-geometry> -->\n                <panel-light-tab-params [inputs]=\"paramFormGroup\" (subcribe)=\"updateParams($event)\"></panel-light-tab-params>\n            </nz-tab>\n\n            <nz-tab [nzTitle]=\"iconProperties\">\n                <ng-template #iconProperties>\n                    Properties\n                </ng-template>\n                <ng-template nz-tab>\n                    <panel-light-tab-properties \n                        [(props)]=\"props\" \n                        (subcribe)=\"updateProps($event)\" \n                        [service]=\"_service\"\n                        [hasShadow]=\"hasShadow\"\n                        [hasTarget]=\"hasTarget\"\n                        [hasShadowCamera]=\"hasShadowCamera\"\n                    ></panel-light-tab-properties>\n                </ng-template>\n            </nz-tab>\n\n\n        </nz-tabset>\n    </div>\n\n\n\n    <div class=\"panel-footer\">\n        <h3>{{\"Actions\" | translate}}</h3>\n        <div class=\"buttons\">\n            <button nz-button nzType=\"primary\" (click)=\"onDone()\">{{btnDoneText}}</button>\n\n\n        </div>\n    </div>\n\n</div>","import { isArray, isEmpty, isObject, Str } from '@app/_core/helpers/utils';\r\nimport createClass, { _class } from '@app/_core/helpers/es5.class';\r\nimport * as THREE from 'three';\r\n\r\nimport ComposerEffects from '../libs/composer.effects';\r\n\r\n\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\r\nimport { TexturePass } from 'three/examples/jsm/postprocessing/TexturePass.js';\r\nimport { CubeTexturePass } from 'three/examples/jsm/postprocessing/CubeTexturePass.js';\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js';\r\nimport { ClearPass } from 'three/examples/jsm/postprocessing/ClearPass.js';\r\nimport { CopyShader } from 'three/examples/jsm/shaders/CopyShader.js';\r\n\r\n\r\nimport { GUI } from 'three/examples/jsm/libs/dat.gui.module.js';\r\n\r\nconst params = {\r\n\r\n    clearPass: true,\r\n    clearColor: 'white',\r\n    clearAlpha: 1.0,\r\n\r\n    texturePass: true,\r\n    texturePassOpacity: 1.0,\r\n    texturePass2: true,\r\n    texturePass2Opacity: 1.0,\r\n\r\n    cubeTexturePass: true,\r\n    cubeTexturePassOpacity: 1.0,\r\n\r\n    renderPass: true\r\n};\r\n\r\n\r\nconst Composer = _class('Composer').uses(ComposerEffects)({\r\n    /**\r\n     * @var {App}\r\n     */\r\n    parent: null,\r\n    options: {},\r\n    renderPass: null,\r\n    /**\r\n     * \r\n     * @param {App} parent doi tuong xha\r\n     * @param {object} options thiết lập\r\n     */\r\n    constructor: function (parent, options) {\r\n        this.parent = parent;\r\n        this.renderer = parent.renderer;\r\n        this.scene = parent.scene;\r\n        this.camera = parent.camera;\r\n        const clock = new THREE.Clock();\r\n        this.clock = clock;\r\n        if (isObject(options)) {\r\n            this.options = options;\r\n        }\r\n        this.setup();\r\n    },\r\n    setup: function () {\r\n        this.composer = new EffectComposer(this.renderer);\r\n        this.renderPass = new RenderPass(this.scene, this.camera);\r\n        this.composer.addPass(this.renderPass);\r\n\r\n        if (isObject(this.options.effects)) {\r\n            for (const key in this.options.effects) {\r\n                if (this.options.effects.hasOwnProperty(key)) {\r\n                    const opt = this.options.effects[key];\r\n                    if (!isObject(opt)) {\r\n                        continue;\r\n                    } else {\r\n                        if (!isObject(opt.params) && !opt.type) {\r\n                            this.addEffect(key, opt);\r\n                        } else if (!opt.type) {\r\n                            this.addEffect(key, opt.params || opt.options || opt.effectOptions || opt.effectParams || opt);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (isArray(this.options.effects)) {\r\n            for (let index = 0; index < this.options.effects.length; index++) {\r\n                const effect = this.options.effects[index];\r\n                if (!isObject(effect)) continue;\r\n                else {\r\n                    var type = effect.type || effect.effect || effect.effect_type;\r\n                    var options = effect.params || effect.options || effect.effect_options;\r\n                    if (type) {\r\n                        this.addEffect(type, options);\r\n                    }\r\n                }\r\n            }\r\n        } else if (this.options.effect) {\r\n            this.addEffect(\r\n                this.options.effect, isObject(options) ? this.options.effectOptions :\r\n                isObject(this.options.effect_options) ? this.options.effect_options :\r\n                    isObject(this.options.params) ? this.options.params :\r\n                        isObject(this.options.options) ? this.options.options : {}\r\n            );\r\n        }\r\n\r\n        if (this.options.pass) {\r\n            this.addPass();\r\n        }\r\n    },\r\n    render: function () {\r\n        this.composer.render(this.clock.getDelta());\r\n    },\r\n\r\n    addPass: function (pass, options) {\r\n        var self = this;\r\n        let clearPass, texturePass, texturePass2;\r\n        let cubeTexturePassP;\r\n        let gui, stats;\r\n\r\n        const genCubeUrls = function (prefix, postfix) {\r\n\r\n            return [\r\n                prefix + 'px' + postfix, prefix + 'nx' + postfix,\r\n                prefix + 'py' + postfix, prefix + 'ny' + postfix,\r\n                prefix + 'pz' + postfix, prefix + 'nz' + postfix\r\n            ];\r\n\r\n        };\r\n        // clearPass = new ClearPass(params.clearColor, params.clearAlpha);\r\n        // self.composer.addPass(clearPass);\r\n\r\n\r\n\r\n    }\r\n});\r\n\r\nexport default Composer;\r\n\r\nexport { Composer };","import { ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n    selector: 'inp-select-group',\n    templateUrl: './inp-select-group.component.html',\n    styleUrls: ['./inp-select-group.component.scss']\n})\nexport class InpSelectGroupComponent extends BaseInpGroupComponent implements OnInit, OnChanges {\n\n    @Input() options: any = null;\n    \n    configProps = [\"options\"];\n    constructor(private cd: ChangeDetectorRef) {\n        super();\n    }\n\n\n\n    onInit(): void {\n        assignValue(this.defaultValues, {\n            options: null\n          });\n        this.inpInit();\n        this.cd.detectChanges();\n        \n    }\n\n    \n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.options) {\n            this.cd.detectChanges();\n        }\n\n    }\n\n}\n","<div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\" class=\"input-group\">\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"10\">\n        <div class=\"inner-box\">{{label?label:name | translate}}</div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"14\">\n        <div class=\"inner-box text-right\">\n            <inp-select\n                [name]=\"name\"\n                [(value)]=\"value\"\n                [options]=\"options\"\n                [valueType]=\"valueType\"\n                (subcribe)=\"onChange($event)\"\n            ></inp-select>\n\n        </div>\n    </div>\n\n</div>","import { AfterViewInit, Component, ElementRef, OnInit } from '@angular/core';\nimport { CameraDefaultFacePositions } from '@app/_3D/store/data.type';\nimport { checkFacePos } from '@app/_3D/traits/camera';\nimport { objectHasKey } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '../../base/base.component';\nimport { ViewportService } from '../viewport.service';\nimport { VectorControlsService } from './vector-controls.service';\n\n\nconst faceOpts = [\n    {\n        value: \"custom\",\n        label: \"Custom\"\n    }\n]\nCameraDefaultFacePositions.map(opt=>faceOpts.push(opt));\n\n@Component({\n    selector: 'app-vector-controls',\n    templateUrl: './vector-controls.component.html',\n    styleUrls: ['./vector-controls.component.scss']\n})\nexport class VectorControlsComponent extends BaseComponent implements OnInit, AfterViewInit {\n\n    isShow: boolean = false;\n    canvas: Element = null;\n    css: string = '';\n    faceOptions = faceOpts;\n    currentFace = 'custom';\n    constructor(\n        private events: VectorControlsService,\n        // private viewportService: ViewportService,\n        private elemRef: ElementRef\n    ) {\n        super();\n\n        // this.initCanvas();\n\n        this.registerEventService(window, 'resize', e => this.updateCanvasSize(e));\n\n    }\n\n    onChangeSubEvents() {\n        this.registerEventService(this.subEvents, {\n            \"show|dispatch\": e => {\n                if(objectHasKey(e, 'value')){\n                    this.isShow = e.value\n                }else{\n                    this.isShow = true\n                }\n            },\n            \"hide|dispatch\": e => this.isShow = !1\n        });\n\n    }\n\n    onInit(): void {\n        // this.activeEventServiceRegistered(this.service);\n        this.activeEventServiceRegistered(window);\n    }\n    onDestroy() {\n        // this.deactiveEventServiceRegistered(this.service);\n        this.deactiveEventServiceRegistered(window);\n    }\n\n    changeFace(face: string) {\n        let f = face.toLowerCase();\n        if (checkFacePos(f)) {\n            this.subEvents.emit({\n                type: \"changeface\",\n                face: f\n            })\n        }\n    }\n\n\n    ngAfterViewInit(): void {\n        this.initCanvas();\n    }\n\n    updateCanvasSize(event?: Event) {\n        // if (this.app3D) {\n        //     this.app3D.engine.updateCanvasSize(event);\n        // }\n    }\n\n\n    initCanvas() {\n        // if (this.app3D && this.canvas3D && this.elementStatus) {\n        setTimeout(() => {\n            var wrapper = this.elemRef.nativeElement.querySelector(\".canvas-wrapper\");\n\n            if (wrapper) {\n                wrapper.innerHTML = '';\n                this.subEvents.setCanvasWrapper(wrapper);\n            }\n        }, 5);\n\n        // }\n    }\n\n    setApp(app) {\n\n        this.initCanvas();\n\n    }\n\n    setCanvas(canvas) {\n        // this.canvas3D = canvas;\n        this.initCanvas();\n    }\n}\n","<div class=\"fs\" *ngIf=\"isShow\">\n    <div class=\"face-selection\">\n        <inp-select name=\"face\" [(value)]=\"currentFace\" [options]=\"faceOptions\" [fullwidth]=\"true\" (subcribe)=\"changeFace($event.value)\"></inp-select>\n    </div>\n    <!-- <div class=\"face-matrix\">\n        <div class=\"row\" *ngFor=\"let faceRow of faceMatrix; let i=index\">\n            <div class=\"col\" *ngFor=\"let face of faceRow; let i=index\">\n                <div class=\"face-item\" *ngIf=\"face != null\" (click)=\"changeFace(face)\">{{face}}</div>\n            </div>\n        </div>\n    </div>\n     -->\n    <div class=\"canvas-wrapper\"></div>\n    \n</div>","\r\nimport { Injectable } from '@angular/core';\r\nimport { StorageService } from '@app/_core/services/storage.service';\r\nimport { AppStorageService } from './app-storage.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AppEditorStorageService extends AppStorageService {\r\n    constructor(){\r\n        super();\r\n    }\r\n}","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { BaseComponent } from '../../base/base.component';\n\n@Component({\n    selector: 'app-panel-mesh-customize',\n    templateUrl: './panel-mesh-customize.component.html',\n    styleUrls: ['./panel-mesh-customize.component.scss']\n})\nexport class PanelMeshCustomizeComponent extends BaseComponent implements OnInit {\n    title: string = \"Mesh\";\n    mesh: any = null;\n\n    isShow: boolean = false;\n\n    inputs: any[] = [];\n\n\n    constructor(private events: AppEditorEventService, private cd: ChangeDetectorRef) {\n        super();\n    }\n\n    onChangeSubEvents() {\n        this.registerEventService(this.subEvents, {\n            \"editor.select:mesh\": e => this.showPanel(e.mesh),\n            hidemeshpanel: e => this.hidePanel()\n        });\n    }\n\n\n\n    onInit(): void {\n\n    }\n\n    showPanel(mesh) {\n        if (!(mesh && mesh.editable && mesh.editable.length)) return;\n        if (this.isShow) {\n            this.isShow = false;\n            this.mesh = null;\n            setTimeout(() => {\n                this.asyncMeshSetting(mesh);\n                this.isShow = true;\n            }, 10);\n        } else {\n            this.asyncMeshSetting(mesh);\n            this.isShow = true;\n        }\n\n    }\n    hidePanel() {\n\n    }\n    asyncMeshSetting(mesh) {\n        this.mesh = mesh;\n        \n        this.title = mesh.title || mesh.name || \"name\";\n\n        this.inputs = mesh.__inputs__.filter(i=>i.editable);\n        this.cd.detectChanges();\n    }\n\n    updateMaterial(event) {\n        if (!this.mesh.data) this.mesh.data = {};\n        if (!this.mesh.data.material) this.mesh.data.material = {};\n\n        this.mesh.data.material[event.name] = event.value;\n\n        var app = this.subEvents.app;\n        var update: any = {};\n        update[event.name] = event.value\n        app.updateModelMeshMaterial(this.mesh.__parent__key__, this.mesh.name, update);\n\n\n        this.subEvents.emit({\n            type: \"panel.mesh.update:material\",\n            name: this.mesh.name,\n            data: update,\n            secretKey: this.mesh.__parent__key__\n        })\n    }\n\n\n\n    close() {\n        this.isShow = false;\n    }\n    onDone() {\n        this.isShow = false;\n\n    }\n}\n","<div class=\"panel inner-layout\" *ngIf=\"isShow\">\n    <div class=\"panel-header\">\n        <h3>{{title}}</h3>\n        <div class=\"btn-close\" (click)=\"close()\">\n            <i nz-icon nzType=\"close-circle\" nzTheme=\"outline\"></i>\n        </div>\n    </div>\n    <div class=\"panel-body\">\n        <div class=\"store\">\n            <div class=\"input-group-item\" [class.first]=\"i==0\" *ngFor=\"let inp of inputs; let i=index\">\n                <div class=\"input-item\" [ngSwitch]=\"inp.type\">\n                    <inp-switch-group *ngSwitchCase=\"'checkbox'\" [config]=\"inp\" (subcribe)=\"updateMaterial($event)\" class=\"input-group\"></inp-switch-group>\n                    <inp-texture-group *ngSwitchCase=\"'texture'\" [config]=\"inp\" (subcribe)=\"updateMaterial($event)\" class=\"input-group\"></inp-texture-group>\n                    <inp-color-group *ngSwitchCase=\"'color'\" [config]=\"inp\" (subcribe)=\"updateMaterial($event)\" class=\"input-group\"></inp-color-group>\n                    <inp-select-group *ngSwitchCase=\"'select'\" [config]=\"inp\" (subcribe)=\"updateMaterial($event)\" class=\"input-group\"></inp-select-group>\n                    <inp-range-group *ngSwitchCase=\"'range'\" [config]=\"inp\" (subcribe)=\"updateMaterial($event)\" class=\"input-group\"></inp-range-group>\n                    <inp-number-group *ngSwitchCase=\"'number'\" [config]=\"inp\" (subcribe)=\"updateMaterial($event)\" class=\"input-group\"></inp-number-group>\n                    <inp-text-group *ngSwitchDefault [config]=\"inp\" (subcribe)=\"updateMaterial($event)\" class=\"input-group\"></inp-text-group>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n\n    <div class=\"panel-footer\">\n        <h3>{{\"Actions\" | translate}}</h3>\n        <div class=\"buttons\">\n            <button nz-button nzType=\"primary\" (click)=\"onDone()\">{{\"Done\"|translate}}</button>\n\n\n        </div>\n    </div>\n\n</div>","import { Component } from '@angular/core';\r\nimport { Angulartics2Mixpanel } from 'angulartics2/mixpanel';\r\nimport { SettingService } from './_core/services';\r\nimport { environment } from '@env/environment';\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n})\r\nexport class AppComponent {\r\n  title = 'Brandgos - Admin';\r\n  constructor(\r\n    angulartics2Mixpanel: Angulartics2Mixpanel,\r\n    settingService: SettingService\r\n  ) {\r\n    if (environment.production) {\r\n      const { user } = settingService;\r\n      angulartics2Mixpanel.startTracking();\r\n      angulartics2Mixpanel.setUsername(user.username);\r\n    }\r\n  }\r\n}\r\n","<router-outlet></router-outlet>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorStorageService } from '@app/_3D/services/app-editor-storage.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { assignWithout, copyByList, isArray, isObject } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { InpEvent } from '@app/_shared/shared.type';\nimport { CategoryModel } from '@app/_store/category';\nimport { PriVacyStatusOptions } from '@app/_store/form';\nimport { ItemModel } from '@app/_store/item';\nimport { TemplateService } from '@app/_store/template';\nimport { TemplateTableService } from '@app/_store/template/table';\n\n@Component({\n    selector: 'app-tab-template-create-form',\n    templateUrl: './tab-template-create-form.component.html',\n    styleUrls: ['./tab-template-create-form.component.scss']\n})\nexport class TabTemplateCreateFormComponent extends BaseComponent implements OnInit, OnDestroy {\n    @Input() loaded: EventEmitter<any> = new EventEmitter();\n\n    @Output() loadedChange: EventEmitter<any> = new EventEmitter();\n\n    mode: string = \"explore\";\n\n    searchStatus: string = 'ready';\n\n    categories: CategoryModel[] = [];\n\n    searchResults: ItemModel[] = [];\n\n    q = {\n        s: null,\n        category_id: null,\n    };\n\n\n    isSearching: boolean = false;\n\n    hasResult: boolean = false;\n    info: any = {};\n    asyncForm: boolean = true;\n    categoryOptions: Array<{ label: string, value: any }> = [];\n    privacyStatusOptions: any[] = PriVacyStatusOptions.map(stt => ({ label: stt.label, value: stt.value }))\n\n    showForm: boolean = false;\n    app: AppEditorService;\n    constructor(\n        public templateService: TemplateService,\n        // public templateTable: TemplateTableService,\n        private events: AppEditorEventService,\n        private storage: AppEditorStorageService,\n        private cd: ChangeDetectorRef\n    ) {\n\n        super();\n        this.storage.subcribe(\"info\", (data) => {\n            this.syncInfo(data);\n        }, true);\n\n\n        this.storage.subcribe('categories', (categories) => {\n            this.updateCategories(categories);\n        }, true);\n\n        // this.storage.subcribe('editorMode', (mode) => {\n        //     this.mode = mode;\n        // }, true);\n    }\n\n    \n    \n    initOnce(){\n        this.app = this.events.app;\n     \n    }\n    init() {\n        if(this.isChangeSubEvents){\n            this.app = this.subEvents.app;\n        }\n        if (this.mode == \"explore\") {\n            this.explore();\n        } else {\n            this.search();\n        }\n    }\n    \n\n    explore() {\n        this.subEvents.emit(\"component.checkchange\");\n        this.templateService.getByCategories({}).subscribe(rs => {\n            if (rs.status) {\n                this.categories = rs.data;\n\n                if (rs.data.length) {\n                    rs.data.map(cate => this.parseItemList(cate.templates));\n                }\n                this.subEvents.emit(\"component.checkchange\");\n                this.cd.detectChanges();\n            }\n        })\n    }\n\n    search() {\n        this.searchStatus = 'searching';\n        this.searchResults.splice(0);\n        this.subEvents.emit(\"component.checkchange\");\n        this.templateService.getAll(this.q).subscribe(rs => {\n            if (rs.count > 0) {\n                this.searchResults = rs.data;\n                this.parseItemList(this.searchResults);\n                this.searchStatus = 'done';\n                this.cd.detectChanges();\n            } else {\n                this.searchStatus = 'notfound';\n                this.cd.detectChanges();\n            }\n            this.subEvents.emit(\"component.checkchange\");\n\n        }, error => {\n            this.searchStatus = 'error';\n            this.subEvents.emit(\"component.checkchange\");\n            this.cd.detectChanges();\n        });\n    }\n\n    parseItemList(list) {\n        if (isArray(list)) {\n            list.map(item => this.parseItem(item));\n        }\n    }\n    parseItem(item) {\n        if (isObject(item)) {\n            // var rs = this.templateTable.first('*', { id: item.id });\n            // if (rs) {\n            //     // assignValue(item, copyByList(rs, ['name', 'id', 'category_id', 'status', 'description', 'status', '']))\n            //     assignWithout(item, rs, ['id', 'lights', 'meshes', 'objects']);\n            //     item.objects = rs.objects;\n            //     item.lights = rs.lights;\n            //     item.meshes = rs.meshes;\n            // }\n        }\n    }\n\n\n\n\n    updateCategories(categories: CategoryModel[] = []) {\n        this.categories = categories;\n        let a: any[] = []\n        for (let index = 0; index < categories.length; index++) {\n            const cat = categories[index];\n            a.push({ label: cat.name, value: cat.id })\n        }\n        this.categoryOptions = a;\n    }\n\n    syncInfo(data: any) {\n        this.info = copyByList(data, ['name', 'description', 'category_id', 'status', 'allow_custom']);\n    }\n    onInpChange(event: InpEvent) {\n        this.info[event.name] = event.value;\n        this.app.updateInfo(this.info);\n    }\n    onClickSearch() {\n        if (String(this.q.s).length) {\n            this.mode = \"search\";\n            this.search();\n        } else if (this.mode == \"search\") {\n            this.mode = \"explore\";\n        }\n    }\n\n    onLayoutComplete({ isLayout, endLoading }) {\n        if (!isLayout) {\n            endLoading();\n        }\n    }\n\n    // getFileUrl(files) {\n    //   const file = files.find((f) => f.quanlity === EMediaFileQuanlity.screen);\n    //   return (file && file.url) || '';\n    // }\n\n}\n","<div class=\"tab-inner\">\n    <h2>{{\"Template\"|translate}}</h2>\n    <div class=\"search block\">\n        <div class=\"search-inner\">\n            <nz-input-group nzSearch [nzSuffix]=\"suffixIconSearch\">\n                <input type=\"text\" nz-input placeholder=\"Find in 1.000.000 items\" [(ngModel)]=\"q.s\" />\n            </nz-input-group>\n            <ng-template #suffixIconSearch>\n                <button nz-button nzType=\"link\" (click)=\"onClickSearch()\">\n                    <em nz-icon nzType=\"search\"></em>\n                </button>\n            </ng-template>\n        </div>\n    </div>\n    \n    <div class=\"store\">\n        <!-- <div class=\"info-form\">\n            <ng-container *ngIf=\"asyncForm; then formTemplate; else waitTemplate\"></ng-container>\n            <ng-template #formTemplate>\n                <div class=\"inputs\">\n                    <inp-text-group name=\"name\" label=\"Project Name\" [(value)]=\"info.name\" placeholder=\"Enter Name\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item-first\"></inp-text-group>\n                    <div class=\"sf\" *ngIf=\"showForm\">\n                        <inp-select-group name=\"category_id\" [(value)]=\"info.category_id\" [options]=\"categoryOptions\" label=\"Category\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-select-group>\n                        <inp-textarea-group name=\"description\" [(value)]=\"info.description\" label=\"Description\" placeholder=\"Enter Description\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-textarea-group>\n                        <inp-radio-group name=\"status\" [(value)]=\"info.status\" [options]=\"privacyStatusOptions\" label=\"Status\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-radio-group>\n\n                        <inp-switch-group name=\"allow_custom\" [(value)]=\"info.allow_custom\" label=\"Allow Custom in View\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-switch-group>\n\n                    </div>\n                    <div class=\"btn-show\" (click)=\"showForm = !showForm\">\n                        <i nz-icon nzType=\"down\" nzTheme=\"outline\" *ngIf=\"!showForm\"></i>\n                        <i nz-icon nzType=\"up\" nzTheme=\"outline\" *ngIf=\"showForm\"></i>\n                    </div>\n\n                </div>\n            </ng-template>\n            <ng-template #waitTemplate>\n                <div class=\"sys-alert\">\n                    <h2>Vui lòng chờ...</h2>\n                </div>\n            </ng-template>\n        </div>\n        <h3>{{\"Template\"|translate}}</h3> -->\n        <div class=\"templates\">\n            <ng-container *ngIf=\"mode=='explore'; then thenTemplate; else elseTemplate\"></ng-container>\n            <ng-template #thenTemplate>\n                <div *ngFor=\"let cate of categories; let i=index\" class=\"cate-item\">\n                    <template-list [items]=\"cate.templates\" [title]=\"cate.name\"></template-list>\n                </div>\n            </ng-template>\n            <ng-template #elseTemplate>\n                <ng-container [ngSwitch]=\"searchStatus\">\n                    <p *ngSwitchCase=\"'done'\">\n                        <template-list [items]=\"searchResults\" title=\"Tất cả\"></template-list>\n                    </p>\n                    <p *ngSwitchCase=\"'notfound'\">\n                        {{\"Not Found\" | translate}}\n                    </p>\n                    <p *ngSwitchCase=\"'error'\">\n                        {{\"Error\" | translate}}\n                    </p>\n                    <p *ngSwitchDefault>\n                        {{\"searching...\" | translate}}\n                    </p>\n                </ng-container>\n            </ng-template>\n        </div>\n    </div>\n</div>","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { MaterialSettingData } from '@app/_3D/libs/three.libs';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { assignValue, objectKeys } from '@app/_core/helpers/utils';\nimport { ItemMeshSettings } from '@app/_store/item';\nimport { CollapseBaseComponent } from '../collapse-base/collapse-base.component';\n\n\n\n@Component({\n    selector: 'collapse-mesh-material',\n    templateUrl: './collapse-mesh-material.component.html',\n    styleUrls: ['./collapse-mesh-material.component.scss']\n})\nexport class CollapseMeshMaterialComponent extends CollapseBaseComponent implements OnInit {\n    @Input() index: number = 0;\n    @Output() onUpdate = new EventEmitter<any>();\n    @Output() onUpdateTitle = new EventEmitter<{ index: number, title: string }>();\n    @Input() service: any = null;\n    @Input() mesh: ItemMeshSettings;\n\n    inputs: any[] = [];\n    constructor(private events: AppEditorEventService, private cd: ChangeDetectorRef) {\n        super();\n    }\n\n\n    onChangeSubEvents(){\n        this.registerEventService(this.subEvents, {\n            \"panel.mesh.update:material\": e => this.updateInputs(e)\n        })\n    }\n\n    onInit(): void {\n        if (this.mesh.title) {\n            this.title = this.mesh.title;\n        } else {\n            this.title = this.mesh.name;\n        }\n        this.inputs = this.mesh.__inputs__.filter(i => i.editable);\n    }\n    updateInputs(e){\n        if(e.secretKey == this.mesh.__parent_key__ && e.name == this.mesh.name){\n            if(!this.mesh.data) this.mesh.data={};\n            if(!this.mesh.data.material) this.mesh.data.material={};\n            assignValue(this.mesh.data.material, e.data);\n            \n            let ns = objectKeys(e.data);\n            let name = ns[0];\n            // console.log(objectKeys(e.data))\n            // console.log(name)\n            this.mesh.__inputs__.map(inp => {\n                if(inp.name == name && inp.value != e.data[name]){\n                    inp.value = e.data[name];\n                }\n            })\n            this.inputs = this.mesh.__inputs__.filter(i => i.editable);\n            if(this.show){\n                this.show = false;\n                setTimeout(() => {\n                    this.show = true;\n                    this.cd.detectChanges();\n                }, 10);\n                \n            }\n            this.cd.detectChanges();\n            \n        }\n    }\n    changeHandle(event) {\n        if (!this.mesh.data.material) this.mesh.data.material = {};\n        this.mesh.data.material[event.name] = event.value;\n        this.onUpdate.emit({\n            data: this.mesh.data,\n            index: this.index\n        })\n        this.subcribe.emit({\n            name: event.name,\n            value: event.value,\n            index: this.mesh.index,\n            settings: this.mesh.data.material\n        })\n    }\n}","<div class=\"collapse\" [class.expand]=\"show\">\n    <div class=\"collapse-header\" (click)=\"toggle()\">\n        <h3 class=\"title\">{{title}}</h3>\n        <div class=\"toggle-icon\">\n            <ng-container *ngIf=\"show; then showTemplate; else hideTemplate\"></ng-container>\n            <ng-template #showTemplate>\n                <i nz-icon nzType=\"down\" nzTheme=\"outline\"></i>\n            </ng-template>\n            <ng-template #hideTemplate>\n                <i nz-icon nzType=\"right\" nzTheme=\"outline\"></i>\n            </ng-template>\n        </div>\n    </div>\n    <div class=\"collapse-body\" *ngIf=\"show\">\n        <!-- <inp-text-group class=\"inp-group-item\" name=\"title\" label=\"Mesh Title\" [(value)]=\"data.title\" (subcribe)=\"onTitle($event)\"></inp-text-group> -->\n        <div class=\"inputs\">\n            <div class=\"input-group-item\" *ngFor=\"let inp of inputs; let i=index\">\n                <div class=\"input-item\" [ngSwitch]=\"inp.type\">\n                    <inp-switch-group *ngSwitchCase=\"'checkbox'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group inp-group-item\"></inp-switch-group>\n                    <inp-texture-group *ngSwitchCase=\"'texture'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group inp-group-item\"></inp-texture-group>\n                    <inp-color-group *ngSwitchCase=\"'color'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group inp-group-item\"></inp-color-group>\n                    <inp-select-group *ngSwitchCase=\"'select'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group inp-group-item\"></inp-select-group>\n                    <inp-range-group *ngSwitchCase=\"'range'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group inp-group-item\"></inp-range-group>\n                    <inp-number-group *ngSwitchCase=\"'number'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group inp-group-item\"></inp-number-group>\n                    <inp-text-group *ngSwitchDefault [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group inp-group-item\"></inp-text-group>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\n\n@Component({\n    selector: 'app-tab-light',\n    templateUrl: './tab-light.component.html',\n    styleUrls: ['./tab-light.component.scss']\n})\nexport class TabLightComponent extends BaseComponent implements OnInit {\n\n    height50: boolean = false;\n    constructor(\n        private cd: ChangeDetectorRef,\n        private events: AppEditorEventService\n    ){\n        super();\n        \n    }\n\n    \n    initOnce(){\n     \n    }\n    init() {\n        if(this.isChangeSubEvents){\n            this.registerEventService(this.subEvents, {\n                \"tab.light.refresh\": e => {\n                    // console.log('r11')\n                    this.height50 = true;\n                    this.cd.detectChanges();\n                    setTimeout(() => {\n                        this.height50 = false;\n                        this.cd.detectChanges();\n                            \n                    }, 100);\n                }\n            })\n        }\n        this.activeEventServiceRegistered(this.subEvents);\n        this.cd.detectChanges();\n    }\n    onDestroy(){\n        this.deactiveEventServiceRegistered(this.subEvents);\n    }\n}\n","<div class=\"tab-inner\" [class.height-50]=\"height50\">\n    <h2>Lights & Shadows</h2>\n    <nz-tabset nzTabPosition=\"top\" nzType=\"line\" class=\"sub-tab\">\n      <nz-tab [nzTitle]=\"iconLights\">\n        <ng-template #iconLights>\n          <img src=\"/assets/icons/new-design/tab-sub/light.svg\" alt=\"Light\" />\n          <div>Light</div>\n        </ng-template>\n        <app-tab-lights></app-tab-lights>\n      </nz-tab>\n      <nz-tab [nzTitle]=\"iconShadow\">\n        <ng-template #iconShadow>\n          <img src=\"/assets/icons/new-design/tab-sub/shadow.svg\" alt=\"Shadow\" />\n          <div>Shadow</div>\n        </ng-template>\n        <ng-template nz-tab>\n          <app-tab-shadow></app-tab-shadow>\n        </ng-template>\n      </nz-tab>\n      \n    </nz-tabset>\n  </div>\n  ","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { TemplateModel } from '@app/_store/template';\n\n@Component({\n    selector: 'template-list',\n    templateUrl: './template-list.component.html',\n    styleUrls: ['./template-list.component.scss']\n})\nexport class TemplateListComponent extends BaseComponent implements OnInit {\n\n    @Input() title: string = 'All Template';\n\n    @Input() items: TemplateModel[];\n\n\n    @Output() clickMore = new EventEmitter<any>();\n    @Output() clickItem = new EventEmitter<any>();\n    \n    \n}\n\n","<div class=\"template-list-header\">\n    <h4 class=\"list-title\">{{title}}</h4>\n    <div class=\"list-more\">\n        <i nz-icon nzType=\"right\" nzTheme=\"outline\"></i>\n    </div>\n</div>\n<div class=\"template-list-body\">\n    <template-item *ngFor=\"let item of items; let i=index\" [item]=\"item\"></template-item>\n</div>","import { date, getArguments, isBoolean, isFunction, isObject, isString, Str } from '@app/_core/helpers/utils';\n\nconst DEFAULT_VALUE = Str.rand(Str.rand(date('ms')));\n\n\ntype EventEmit = {\n    type: string,\n    data?:any,\n    [key:string]:any \n}\ntype Listener = (event?:EventEmit)=>any\n\n\ntype OnEventListener = {\n    [event:string]: (Listener | string)\n}\n\n\nexport interface EventDispatcherInstance {\n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} dispatch Thực thi trên tất cả các sự kiện trước đó\n     * @returns this\n     */\n    addEventListener (type:string, handler?:Listener, dispatch?:boolean) : Listener\n\n    /**\n     * Kiểm tra sự kiện có tồn tại hay không\n     * @param {string} type tên sự kiện\n     * @param {function} listener hàm xử lý\n     * @returns {boolean}\n     */\n    hasEventListener (type:string, listener?:Listener): boolean\n\n    /**\n     * Xóa / Gỡ sự kiện\n     * @param {string} type tên sự kiện\n     * @param {function} listener hàm xử lý\n     * @returns {boolean}\n     */\n    removeEventListener(type:string, listener?:Listener): boolean\n\n\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @returns {boolean}\n     */\n    dispatchEvent (event:(EventEmit | String), data?:any):boolean \n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} passed tham số báo có cần kiểm tra hay ko\n     * @returns this\n     */\n    on(type:(OnEventListener|string), listener?:Listener|string|boolean, dispatch?:boolean) : this\n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} passed tham số báo có cần kiểm tra hay ko\n     * @returns this\n     */\n    subcribe(type:(OnEventListener|string), listener?:Listener, dispatch?:boolean): this\n\n    off(type?:any, listener?:Listener):this\n\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @returns {boolean}\n     */\n    emit(event:(EventEmit | String), data?:any): boolean\n\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @returns {boolean}\n     */\n    trigger(event:(EventEmit | String), data?:any): boolean\n}\n\nexport const EventDispatcher = {\n\n    $_listeners: null,\n    $_dispatchedEvents: null,\n    boots: ['setDefaultEventOptions'],\n    setDefaultEventOptions: function(){\n        this._listeners = {};\n        this._dispatchedEvents = {};\n    },\n    \n\n    /**\n     * chuẩn hóa hàn lắng nghe sự kiện\n     * @param {string|function} handler tên phương thức hoạc hàm handler\n     * @returns function\n     */\n\n     parseEventHandler(handler:any):Listener{\n        var self = this;\n        if (typeof handler == \"function\") {\n            return handler;\n        }\n        var fnt = handler ? handler : function (e) {\n            console.log(e);\n        };\n        if (typeof handler == \"string\") {\n            var params = [];\n            var handleParams = handler.split(\":\");\n            if (handleParams.length == 2) {\n                handler = handleParams[0];\n                params = handleParams[1].split(\",\").map(function (s) { return s.trim(); });\n\n            }\n\n            fnt = function (e) {\n                var args = [e];\n                params.map(function (p) { args.push(p); });\n                \n                if (typeof self[handler] == \"function\") {\n                    return self[handler].apply(self, args);\n                }\n            };\n\n\n        }\n        return fnt;\n    },\n\n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} dispatch Thực thi trên tất cả các sự kiện trước đó\n     * @returns this\n     */\n     addEventListener (type:string, handler:any, dispatch?:any) {\n        var self = this;\n        var listener = this.parseEventHandler(handler);\n        \n        if (this._listeners === undefined || this._listeners === null) this._listeners = {};\n\n        type = String(type).toLowerCase();\n\n\n\n        // if (isDomEvent(type)) return this.addDomEvent(type, listener, DEFAULT_VALUE);\n        const listeners = this._listeners;\n\n        if (listeners[type] === undefined) {\n\n            listeners[type] = [];\n\n        }\n        if(dispatch === true){\n            this.handleDispatchedEvents(type, listener);\n        }\n        \n        if (listeners[type].indexOf(listener) === - 1) {\n            listeners[type].push(listener);\n        }\n        return listener;\n    },\n\n    /**\n     * Kiểm tra sự kiện có tồn tại hay không\n     * @param {string} type tên sự kiện\n     * @param {function} listener hàm xử lý\n     * @returns {boolean}\n     */\n    hasEventListener (type:string, listener:any = undefined): boolean {\n\n        if (this._listeners === undefined || this._listeners === null) return false;\n\n        const listeners = this._listeners;\n        type = String(type).toLowerCase();\n        return listeners[type] !== undefined && (listener?listeners[type].indexOf(listener) !== - 1:true);\n\n    },\n\n    /**\n     * Xóa / Gỡ sự kiện\n     * @param {string} type tên sự kiện\n     * @param {function} listener hàm xử lý\n     * @returns {boolean}\n     */\n    removeEventListener(type:string, listener:any = undefined): boolean {\n\n        if (this._listeners === undefined || this._listeners === null) return false;\n        type = String(type).toLowerCase();\n        const listeners = this._listeners;\n        const listenerArray = listeners[type];\n        if (listenerArray !== undefined) {\n            if(!listener){\n                this._listeners[type].splice(0, this._listeners[type].length);\n                return true;\n            }\n\n            const index = listenerArray.indexOf(listener);\n\n            if (index !== - 1) {\n\n                listenerArray.splice(index, 1);\n\n                return true;\n            }\n\n        }\n        return false;\n\n\n    },\n\n\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @returns {boolean}\n     */\n    dispatchEvent (event:any, data:any=undefined):boolean {\n        if (this._listeners === undefined || this._listeners === null || !event) return null;\n        var e:any = {};\n        if(isString(event)){\n            e.type = event;\n            if(data){\n                e.data = data;\n            }\n            // console.log(event, data);\n        }else if(isObject(event)){\n            if(!event.type) return false;\n            e = event;\n            if(!e.data && data){\n                e.data = data;\n            }\n        }\n        else{\n            return false;\n        }\n\n        // if (isDomEvent(event.type)) return this.trigger.apply(this, getArguments(arguments));\n        const listeners = this._listeners;\n        const listenerArray = listeners[e.type];\n        var s = true;\n        if(!e.target){\n            e.target = this;\n        }\n\n        e.stopImmediatePropagation = function () {\n            s = false;\n        }\n\n        this.addDispatchedEvent(e);\n\n        if (listenerArray !== undefined) {\n            // Make a copy, in case listeners are removed while iterating.\n            const array = listenerArray.slice(0);\n\n            for (var i = 0, l = array.length; i < l; i++) {\n                array[i].call(this, e);\n                if (!s) break;\n\n            }\n            return s;\n        }\n        \n    },\n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} passed tham số báo có cần kiểm tra hay ko\n     * @returns this\n     */\n    on(type:any, listener?:any, dispatch?:any){\n        if(isObject(type)){\n            var listeners = {};\n            var d = isBoolean(listener)?listener:dispatch;\n            for (const key in type) {\n                if (Object.hasOwnProperty.call(type, key)) {\n                    const fn = type[key];\n                    if(isFunction(fn) || isString(fn)){\n                        const fnAdded = this.addEventListener(key, fn, d);\n                        if(fnAdded){\n                            listeners[type]=fnAdded;\n                        }\n                    }\n                }\n            }\n            return listeners;\n        }\n        return this.addEventListener(type, listener, dispatch);\n    },\n\n    off(type:any=undefined, listener:any=undefined){\n        if(isObject(type)){\n            for (const key in type) {\n                if (Object.prototype.hasOwnProperty.call(type, key)) {\n                    const l = type[key];\n                    this.removeEventListener(key, l);\n                }\n            }\n            return true;\n        }\n        return this.removeEventListener(type, listener);\n    },\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @returns {boolean}\n     */\n    emit(event:any=undefined, data:any=undefined): boolean{\n        return this.dispatchEvent.apply(this, getArguments(arguments));\n    },\n    \n    addDispatchedEvent(event:any=undefined){\n        if(this._dispatchedEvents[event.type] === undefined) this._dispatchedEvents[event.type] = [];\n        this._dispatchedEvents[event.type].push(event);\n        // console.log(event.type, this._pendingListeners[event.type])\n        return this\n    },\n\n    handleDispatchedEvents(type:string, handler:(...args:any[]) => any){\n        var listenerArray = this._dispatchedEvents[type];\n        // console.log(type, this._pendingListeners[type], this);\n        if (listenerArray !== undefined) {\n            \n        \n            // console.log(type)\n            // Make a copy, in case listeners are removed while iterating.\n            const array = listenerArray.slice(0);\n\n            for (var i = 0, l = array.length; i < l; i++) {\n                // array[i].call(this, e);\n                var s = handler.call(this, array[i]);\n                if(s === false){\n                    return s;\n                }\n\n            }\n        }\n    }\n    \n}\n","import { assignValue, assignWithout, date, getType, inArray, isArray, isObject, objectKeys, Str } from '@app/_core/helpers/utils';\r\nimport * as THREE from 'three';\r\n\r\nimport Props from '../libs/props';\r\n\r\nimport { LightLib } from '../libs/three.libs';\r\n\r\nimport { Lensflare, LensflareElement } from 'three/examples/jsm/objects/Lensflare.js';\r\n// const textureLoader = new THREE.TextureLoader();\r\n\r\n// const textureFlare0 = textureLoader.load('/textures/lensflare/lensflare0.png');\r\n// const textureFlare3 = textureLoader.load('/textures/lensflare/lensflare3.png');\r\nconst Lights = {\r\n    lightTypes: [\r\n        \"AmbientLight\",\r\n        \"AmbientLightProbe\",\r\n        \"DirectionalLight\",\r\n        \"HemisphereLight\",\r\n        \"HemisphereLightProbe\",\r\n        \"Light\",\r\n        \"LightProbe\",\r\n        \"PointLight\",\r\n        \"RectAreaLight\",\r\n        \"SpotLight\"\r\n    ],\r\n    $lights: null,\r\n    resetLights: function(){\r\n        var self = this;\r\n        var lights = [];\r\n        if(isArray(this.lights)){\r\n            this.lights.map(function(light){\r\n                lights.push(light.secret_key);\r\n            });\r\n        }\r\n        \r\n        lights.map(function(light){\r\n            self.removeLight(light);\r\n        });\r\n    },\r\n    /**\r\n     * them doi tuong vao khung\r\n     * @param {object} obj doi tuong\r\n     * @param {function(<object>)} success\r\n     */\r\n    addLightObject: function (obj:any, secret_key?:string, success?:(...args:any[])=>any) {\r\n\r\n        if (!this.scene) return false;\r\n        if (this.lights == null) this.lights = [];\r\n        var t = obj.$type ? String(obj.$type) : \"\";\r\n        if (inArray(this.lightTypes, t)) {\r\n            var data:any = {\r\n                type: t,\r\n                object: obj.light || obj.object\r\n            };\r\n\r\n            this.scene.add(data.object);\r\n            var key = obj.secret_key ? obj.secret_key : (secret_key ? secret_key : date().time + '_' + Str.rand(6));\r\n            data.secret_key = key;\r\n            // if (obj.model) data.model = obj.model;\r\n            this.lights.push(data);\r\n            if (typeof success == \"function\") {\r\n                success(data);\r\n            }\r\n            this.emit('light.added', data);\r\n            this.refresh();\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n\r\n    removeLightObject: function (args:any) {\r\n        if (this.lights == null) return false;\r\n        for (let index = 0; index < this.lights.length; index++) {\r\n            const obj = this.lights[index];\r\n            if (args == obj || args == obj.object || args == obj.secret_key) {\r\n                this.scene.remove(obj.object);\r\n                this.emit('light.removed', obj);\r\n                this.lights.splice(index, 1);\r\n                return true;\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * them êm hiệu ung anh sang\r\n     * @param {string} type loai hieu ung anh sang\r\n     * @param {function(lightData:<Object>)} success \r\n     */\r\n    addLight: function (lightOptions:any, success?:(...args:any[])=>any) {\r\n        var light:any, opt:any, t:any;\r\n\r\n        if (isObject(lightOptions)) {\r\n            if (lightOptions.data && isObject(lightOptions.data)) {\r\n                opt = assignWithout({}, lightOptions.data, ['type']);\r\n                if (lightOptions.data.type) t = lightOptions.data.type;\r\n            }\r\n            else {\r\n                opt = assignWithout({}, lightOptions, ['type']);\r\n\r\n            }\r\n            if (!t && lightOptions.type) t = lightOptions.type;\r\n        }\r\n        \r\n        if (t && opt) {\r\n            light = LightLib.getLight(t, opt);\r\n            \r\n            if (light) {\r\n\r\n                if(light.target){\r\n                    if(!(opt.props && opt.props.target && opt.target.position)){\r\n                        light.target.position.y = this.dropbyPositionY;\r\n                    }\r\n                }\r\n\r\n                return this.addLightObject({\r\n                    $type: light.type,\r\n                    secret_key: lightOptions.id || lightOptions.secret_key || undefined,\r\n                    light: light\r\n                }, null, success);\r\n            }\r\n\r\n        }\r\n        return false;\r\n    },\r\n\r\n\r\n\r\n    /**\r\n     * Thêm nhiều ánh sáng\r\n     * @param {array} lights mảng các tham số\r\n     */\r\n    addLights: function (lights:any[]) {\r\n        if (isArray(lights)) {\r\n            for (let index = 0; index < lights.length; index++) {\r\n                const light = lights[index];\r\n                if (isObject(light)) {\r\n                    this.addLight(light);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * \r\n     * @param {string} secret_key\r\n     * @returns \r\n     */\r\n    getLight: function (secret_key:any) {\r\n        var t = getType(secret_key);\r\n        if (t == \"string\" || t == \"number\") {\r\n            for (let i = 0; i < this.lights.length; i++) {\r\n                const obj = this.lights[i];\r\n                // console.log(obj.secret_key == secret_key);\r\n                if (obj.secret_key == secret_key) return obj;\r\n            }\r\n        } else if (t == \"object\") {\r\n            if (secret_key.uuid) {\r\n                for (let i = 0; i < this.lights.length; i++) {\r\n                    const obj = this.lights[i];\r\n                    if (obj.object == secret_key) return obj;\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 0; i < this.lights.length; i++) {\r\n                    var s = true;\r\n                    const objectData = this.lights[i];\r\n                    for (const key in secret_key) {\r\n                        if (secret_key.hasOwnProperty(key)) {\r\n                            const cvalue = secret_key[key];\r\n                            if (objectData[key] != cvalue) s = false;\r\n                        }\r\n                    }\r\n                    if (s) return objectData;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {string} secret_key\r\n     * @returns \r\n     */\r\n     removeLight: function (secret_key?:any) {\r\n        var t = getType(secret_key);\r\n        var light = null;\r\n        var index = -1;\r\n        if (t == \"string\" || t == \"number\") {\r\n            for (let i = 0; i < this.lights.length; i++) {\r\n                const obj = this.lights[i];\r\n                // console.log(obj.secret_key == secret_key);\r\n                if (obj.secret_key == secret_key) {\r\n                    light = obj;\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n        } else if (t == \"object\") {\r\n            if (secret_key.uuid) {\r\n                for (let i = 0; i < this.lights.length; i++) {\r\n                    const obj = this.lights[i];\r\n                    if (obj.object == secret_key) {\r\n                        light = obj;\r\n                        index = i;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 0; i < this.lights.length; i++) {\r\n                    var s = true;\r\n                    const objectData = this.lights[i];\r\n                    for (const key in secret_key) {\r\n                        if (secret_key.hasOwnProperty(key)) {\r\n                            const cvalue = secret_key[key];\r\n                            if (objectData[key] != cvalue) s = false;\r\n                        }\r\n                    }\r\n                    if (s) {\r\n\r\n                        light = objectData;\r\n                        index = i;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if(light && index !== -1){\r\n            this.emit({\r\n                type: \"light.removing\",\r\n                light: light\r\n            });\r\n            \r\n            this.scene.remove(light.object);\r\n            this.lights.splice(index, 1);\r\n            this.emit({\r\n                type:\"light.removed\",\r\n                data: light\r\n            });\r\n            return light;\r\n        }\r\n        return false;\r\n    },\r\n\r\n\r\n    updateLightProps: function(secret_key?:any, properties?:any){\r\n        var data = this.getLight(secret_key);\r\n        if(!data) return false;\r\n        var props = Props.parse(properties);\r\n        var light = data.object;\r\n        LightLib.setProperties(light, props);\r\n        light.needsUpdate = true;\r\n        // console.log(light.object);\r\n        this.emit({\r\n            type: \"light.update\",\r\n            data: data\r\n        })\r\n\r\n    },\r\n\r\n    addFlare: function (light) {\r\n\r\n        const lensflare = new Lensflare();\r\n        // lensflare.addElement(new LensflareElement(textureFlare0, 700, 0, light.color));\r\n        // lensflare.addElement(new LensflareElement(textureFlare3, 60, 0.6));\r\n        // lensflare.addElement(new LensflareElement(textureFlare3, 70, 0.7));\r\n        // lensflare.addElement(new LensflareElement(textureFlare3, 120, 0.9));\r\n        // lensflare.addElement(new LensflareElement(textureFlare3, 70, 1));\r\n        light.add(lensflare);\r\n    },\r\n\r\n    getLightTemplateData: function(type?:any){\r\n        var t = String(type).toLowerCase();\r\n        return this.lightTemplateData[t] || this.lightTemplateData[t+\"light\"] || null;\r\n    },\r\n    lightTemplateData: {\r\n        ambientlight: {\r\n            type: \"ambientlight\",\r\n            data: {\r\n                params: {\r\n                    color: \"#222222\"\r\n                },\r\n                props: {\r\n\r\n                }\r\n            }\r\n        },\r\n        directionallight: {\r\n            type: \"Directionallight\",\r\n            data: {\r\n                params: {\r\n                    color: \"#FFE0B5\",\r\n                    intensity: 1\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: 10,\r\n                        y: 10,\r\n                        z: 0\r\n                    },\r\n                    castShadow: true,\r\n                    shadow: {\r\n                        mapSize: {\r\n                            width: 4096,\r\n                            height: 4096\r\n                        },\r\n                        camera: {\r\n                            near: 0.1,\r\n                            far: 100,\r\n                            left: 10,\r\n                            right: -10,\r\n                            top: 10,\r\n                            bottom: -10\r\n                        },\r\n                        darkness: 0.1,\r\n                        bias: -0.0002,\r\n                        radius: 5\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        hemispherelight: {\r\n            type: \"hemispherelight\",\r\n            data: {\r\n                params: {\r\n\r\n                    color: \"#00aaff\",\r\n                    groundColor: \"#ffaa00\",\r\n                    intensity: 1\r\n\r\n                }\r\n            }\r\n\r\n        },\r\n        pointlight: {\r\n\r\n            type: \"pointlight\",\r\n            data: {\r\n                params: {\r\n\r\n                    color: \"#00aaff\",\r\n                    intensity: 1\r\n\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: 0,\r\n                        y: 1,\r\n                        z: 0\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        rectarealight: {\r\n            type: \"rectarealight\",\r\n            data: {\r\n                params: {\r\n                    color: 0xffffff,\r\n                    intensity: 1,\r\n                    width: 10,\r\n                    height: 10\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: -2,\r\n                        y: 2,\r\n                        z: 1\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        spotlight: {\r\n            type: \"spotlight\",\r\n            data: {\r\n                params: {\r\n                    color: 0xffffff,\r\n                    intensity: 1,\r\n                    distance: 0,\r\n                    angle: Math.PI * 0.1,\r\n                    penumbra: 0\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: 5, y: 10, z: 6\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n};\r\n\r\nexport default Lights;\r\nexport {Lights}","import { Component, Input, OnInit } from '@angular/core';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n  selector: 'inp-range-group',\n  templateUrl: './inp-range-group.component.html',\n  styleUrls: ['./inp-range-group.component.scss']\n})\nexport class InpRangeGroupComponent extends BaseInpGroupComponent implements OnInit {\n\n  @Input() step: number = 1;\n  @Input() max: number = 9999999999999999;\n  @Input() min: number =-9999999999999999;\n\n  @Input() output: boolean = false;\n\n  \n  configProps = [\"step\", \"min\", \"max\", \"spin\", \"output\"];\n\n  constructor() {\n    super();\n  }\n\n  onInit(): void {\n    assignValue(this.defaultValues, {\n      step: 1,\n      min: -9999999999999999,\n      max:  9999999999999999,\n      output: false\n    });\n    this.inpInit();\n  }\n\n  \n  valChange(value){\n    this.onChange({value});\n  }\n\n  \n}\n","<div class=\"input-group text-group\">\n    <div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\">\n        <div nz-col class=\"gutter-row\" [nzSpan]=\"24\">\n            <div class=\"inner-box\">{{label?label:name | translate}}</div>\n        </div>\n    </div>\n    <div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\" class=\"input-wrapper\">\n        <div nz-col class=\"gutter-row\" [nzSpan]=\"16\">\n            <nz-slider [name]=\"name\" [nzMin]=\"min\" [nzMax]=\"max\" [nzStep]=\"step\" [(ngModel)]=\"value\" (ngModelChange)=\"valChange($event)\"></nz-slider>\n        </div>\n        <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n            <div class=\"inner-box\">\n                <nz-input-number [name]=\"name\" [nzMin]=\"min\" [nzMax]=\"max\" [nzStep]=\"step\" [(ngModel)]=\"value\" (ngModelChange)=\"valChange($event)\" [ngStyle]=\"{ marginLeft: '0px' }\"></nz-input-number>\n            </div>\n        </div>\n    </div>\n</div>","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"import { Component, OnInit } from '@angular/core';\nimport { BaseInputComponent } from '../base-input/base-input.component';\n\n@Component({\n  selector: 'inp-text',\n  templateUrl: './inp-text.component.html',\n  styleUrls: ['./inp-text.component.scss']\n})\nexport class InpTextComponent extends BaseInputComponent implements OnInit {\n\n  _old: any = null;\n  constructor() {\n    super();\n   }\n\n  ngOnInit(): void {\n    this._old = this.value;\n  }\n\n  onChangeValue(event){\n    if(this._old !== this.value){\n      this.emit();\n      this._old = this.value;\n    }\n  }\n\n}\n","<input nz-input \n    placeholder=\"{{placeholder?placeholder:name|translate}}\" \n    [(ngModel)]=\"value\" \n    (input)=\"onChangeValue($event)\" \n    (change)=\"onChangeValue($event)\" \n/>","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { Object3DPropDataModel, Object3DPropDefaultData } from '@app/_3D/store/data.type';\nimport { assignValue, isObject } from '@app/_core/helpers/utils';\n\n\n@Component({\n    selector: 'prop-inputs',\n    templateUrl: './prop-inputs.component.html',\n    styleUrls: ['./prop-inputs.component.scss']\n})\nexport class PropInputsComponent implements OnInit, OnChanges {\n    @Input() props: Object3DPropDataModel = null;\n    @Input() index: number = 0;\n    @Output() onUpdate = new EventEmitter<Object3DPropDataModel>();\n    constructor() { }\n\n    ngOnInit(): void {\n        let defData = assignValue({}, Object3DPropDefaultData);\n        let finalData = assignValue(defData, this.props);\n        if (!isObject(this.props)) this.props = finalData;\n        else assignValue(this.props, finalData);\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        //Called before any other lifecycle hook. Use it to inject dependencies, but avoid any serious work here.\n        //Add '${implements OnChanges}' to the class.\n        console.log(changes)\n\n    }\n    onInputChange(event) {\n        if (event && isObject(event) && event.name) {\n            if (isObject(this.props[event.name]) && isObject(event.value)) {\n                assignValue(this.props[event.name], event.value);\n            }\n            else {\n                this.props[event.name] = event.value;\n            }\n            this.emitUpdate();\n        }\n    }\n\n    emitUpdate() {\n        this.onUpdate.emit(this.props);\n    }\n\n}\n","<div *ngIf=\"props\">\n    \n    <inp-switch-group name=\"castShadow\" [(value)]=\"props.castShadow\" label=\"Cast Shadow\" (subcribe)=\"onInputChange($event)\"></inp-switch-group>\n\n    <inp-switch-group name=\"receiveShadow\" [(value)]=\"props.receiveShadow\" label=\"Receive Shadow\" (subcribe)=\"onInputChange($event)\"></inp-switch-group>\n\n    <inp-vector3-group name=\"scale\" [(value)]=\"props.scale\" label=\"Scale\" (subcribe)=\"onInputChange($event)\"></inp-vector3-group>\n    \n    <inp-rotation-group name=\"rotation\" [(value)]=\"props.rotation\" label=\"Rotation\" (subcribe)=\"onInputChange($event)\"></inp-rotation-group>\n    \n    <inp-vector3-group name=\"position\" [(value)]=\"props.position\" label=\"Position\" (subcribe)=\"onInputChange($event)\"></inp-vector3-group>\n</div>","import { assignValue, assignWithout, combineElenentsJoinStringList, copyByList, copyWithout, date, getEl, getType, inArray, isArray, isEmpty, isNumber, isObject, isString, newObj, Str } from '@app/_core/helpers/utils';\r\nimport * as THREE from 'three';\r\n\r\nimport Props, { parseParams } from '../libs/props';\r\n\r\n\r\nimport { GLTFExporter } from 'three/examples/jsm/exporters/GLTFExporter.js';\r\nimport { Geometries, LightLib, LoaderLib, Materials, Meshes } from '../libs/three.libs';\r\n\r\nconst ObjectManager = {\r\n    $meshes: null,\r\n    $models: null,\r\n\r\n    $objects: null,\r\n\r\n\r\n    draggablePanel: null,\r\n\r\n    floorStatus: false,\r\n\r\n    downloadLink: null,\r\n    objectLoadingCount: 0,\r\n    objectLoadingTotal: 0,\r\n    boots: ['objectManagerBoot'],\r\n    pendingModels: null,\r\n    pendingObjects: null,\r\n\r\n    objectManagerBoot: function () {\r\n        this.meshes = [];\r\n        this.models = {};\r\n        this.objects = [];\r\n\r\n        this.pendingModels = [];\r\n        this.pendingObjects = [];\r\n\r\n    },\r\n\r\n\r\n    resetObjects: function () {\r\n        var self = this;\r\n        var objects = [];\r\n        this.meshes.map(function (mesh) {\r\n            objects.push(mesh.secret_key);\r\n        })\r\n        this.objects.map(function (mesh) {\r\n            objects.push(mesh.secret_key);\r\n        })\r\n        objects.map(function (mesh) {\r\n            self.removeObject(mesh);\r\n        })\r\n    },\r\n\r\n    /**\r\n     * them doi tuong vao khung\r\n     * @param {object} obj doi tuong\r\n     * @param {function} updateHandler hanh dong khi update\r\n     */\r\n    addObjectData: function (obj: any, updateHandler?: (...args: []) => any, secret_key?: any): string {\r\n\r\n        if (!this.scene) return null;\r\n        var type = obj.$type ? String(obj.$type).toLowerCase() : \"\";\r\n        if (inArray(['smartobject', '3dobject', 'sm', 'model', 'mesh', 'light', 'group'], type)) {\r\n            var data: any = {\r\n                type: type,\r\n                object: obj.object\r\n            };\r\n            const t = typeof updateHandler;\r\n            if (updateHandler && (t == \"function\" || (t == \"object\" && !isEmpty(updateHandler)))) {\r\n                data.handler = this.parseUpdateHandler(updateHandler);\r\n            }\r\n            if (obj.animations && isArray(obj.animations) && obj.animations.length) {\r\n                data.animations = obj.animations;\r\n            }\r\n            var propList = [\"meshes\", 'textures', 'wrapper', 'size', 'raw'];\r\n            for (let index = 0; index < propList.length; index++) {\r\n                const key = propList[index];\r\n                if (typeof obj[key] && obj[key]) {\r\n                    data[key] = obj[key];\r\n                }\r\n            }\r\n\r\n            // if (type == 'model') {\r\n                this.scene.add(obj.object);\r\n            // }\r\n\r\n            var key = obj.secret_key ? obj.secret_key :\r\n                (secret_key ? secret_key : date().time + '_' + Str.rand(6));\r\n            data.secret_key = key;\r\n            // if (obj.model) data.model = obj.model;\r\n            this.objects.push(data);\r\n            var s = this.emit('object.added', data);\r\n            // console.log(s);\r\n            this.refresh();\r\n            return key;\r\n        }\r\n\r\n        else {\r\n            var data: any = {\r\n                object: obj\r\n            };\r\n            const t = typeof updateHandler;\r\n            if (updateHandler && (t == \"function\" || (t == \"object\" && !isEmpty(updateHandler)))) {\r\n                data.handler = this.parseUpdateHandler(updateHandler);\r\n            }\r\n            this.scene.add(obj);\r\n            var key = obj.secret_key ? obj.secret_key :\r\n                (secret_key ? secret_key : date().time + '_' + Str.rand(6));\r\n            data.secret_key = key;\r\n            this.objects.push(data);\r\n            var s = this.emit('object.added', data);\r\n            // console.log(s);\r\n\r\n            this.refresh();\r\n            return key;\r\n        }\r\n        return null;\r\n    },\r\n\r\n\r\n    removeObjectData: function (args?: any) {\r\n        for (let index = 0; index < this.objects.length; index++) {\r\n            const obj = this.objects[index];\r\n            if (args == obj || args == obj.object || args == obj.secret_key) {\r\n                this.scene.remove(obj.object);\r\n                this.emit('object.removed', obj);\r\n                this.objects.splice(index, 1);\r\n                this.refresh();\r\n                return true;\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * Thêm model item để thiết lập \r\n     * @param {Object} options \r\n     * @param {function(obj, model)} onSuccess \r\n     * @param {function(error)} onError \r\n     * @param {function(proccessing)} onProgress\r\n     */\r\n    addSettingModelItem: function (options: any, onSuccess?: (obj?: any, model?: any) => any, onError?: (error?: any) => any, onProgress?: (percent?: number) => any) {\r\n        var params = copyByList(options, ['type', 'path', 'file', 'custom_file']);\r\n        assignValue(params, options.load_options);\r\n\r\n        if (params.custom_file) {\r\n            params.file = params.custom_file;\r\n        }\r\n        var optionData = options.settings || {};\r\n        // console.log(object);\r\n        optionData.options = {\r\n            pivot: {\r\n                x: \"center\",\r\n                y: \"center\",\r\n                z: \"center\"\r\n            }\r\n        };\r\n\r\n        var self = this;\r\n\r\n\r\n        return this.getModel(params, function (obj, model) {\r\n            var data = self.parseModel(obj, optionData);\r\n            if (!data) return console.log(\r\n                \"loi\"\r\n            )\r\n            // data.model = model;\r\n            data.name = options.name;\r\n            data.secret_key = options.secret_key;\r\n            var secret_key = self.addObjectData(data);\r\n            var ob = self.getObject(secret_key);\r\n            // console.log(options)\r\n            if (options.settings) {\r\n                self.updateObjectSettings(secret_key, options.settings);\r\n            }\r\n            onSuccess(ob);\r\n            self.refresh();\r\n        }, onError, onProgress);\r\n    },\r\n\r\n\r\n\r\n    /**\r\n     * Thêm model item để thiết lập templates\r\n     * @param {string} secret_key \r\n     * @param {Object} options \r\n     * @param {function(obj, model)} onSuccess \r\n     * @param {function(error)} onError \r\n     * @param {function(proccessing)} onProgress\r\n     */\r\n    addItemToTemplateSettingWorkspace: function (secret_key: string, options?: any, onSuccess?: (object?: any, model?: any) => any, onError?: (error?: any) => any, onProgress?: (percent?: number) => any) {\r\n        var params = copyByList(options, ['type', 'path', 'file', 'custom_file']);\r\n        assignValue(params, options.load_options);\r\n\r\n        if (params.custom_file) {\r\n            params.file = params.custom_file;\r\n        }\r\n        var optionData = options.settings || {};\r\n        optionData.options = {\r\n            pivot: {\r\n                x: \"center\",\r\n                y: \"center\",\r\n                z: \"center\"\r\n            }\r\n        };\r\n\r\n        var self = this;\r\n\r\n\r\n        return this.getModel(params, function (obj, model) {\r\n            var data = self.parseModel(obj, optionData);\r\n            if (!data) return console.log(\r\n                \"loi\"\r\n            )\r\n            // data.model = model;\r\n            data.name = options.name;\r\n            data.secret_key = secret_key || options.secret_key;\r\n            var _secret_key = self.addObjectData(data);\r\n            var ob = self.getObject(_secret_key);\r\n            if (options.settings) {\r\n                self.updateObjectSettings(_secret_key, options.settings);\r\n            }\r\n            onSuccess(ob);\r\n            self.refresh();\r\n        }, onError, onProgress);\r\n    },\r\n\r\n\r\n    /**\r\n     * them model\r\n     * @param {object} options các thong so load\r\n     * @param {function} success \r\n     * @param {function} onError \r\n     */\r\n    addModel: function (options: any, success?: (data?: any) => any, onError?: (error?: any) => any, onProgress?: (percent?: number) => any) {\r\n        if (typeof options != \"object\") return false;\r\n        var self = this;\r\n        this.getModelAndConvertToAppObjectData(options, function (data) {\r\n            var hd = Props.getObjectAnimateHandler(options);\r\n            if (hd) {\r\n                data.handler = hd;\r\n            }\r\n\r\n            // console.log(data)\r\n            // self.scene.add(data.object);\r\n            var secret_key = self.addObjectData(data, hd, options.secret_key);\r\n\r\n            // self.models[_id] = data;\r\n            // if (data.custom) {\r\n            //     self.Custom.add(_id);\r\n            // }\r\n            if (options.settings) {\r\n                self.updateObjectSettings(secret_key, options.settings);\r\n            }\r\n            if (typeof success == \"function\") {\r\n                success(self.getObject(secret_key));\r\n            }\r\n\r\n            self.refresh();\r\n        }, onError, onProgress);\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * Thêm nhiều ánh model\r\n     * @param {array} models mảng các tham số\r\n     */\r\n    addModels: function (models?: any[]) {\r\n        if (isArray(models)) {\r\n\r\n            for (let index = 0; index < models.length; index++) {\r\n                const model = models[index];\r\n\r\n                if (isObject(model)) {\r\n                    this.pendingModels.push(model)\r\n\r\n                }\r\n            }\r\n            var self = this;\r\n            var fn;\r\n            fn = function () {\r\n                if (self.pendingModels.length) {\r\n                    self.addModel(self.pendingModels.shift(), fn, fn);\r\n                }\r\n            };\r\n            fn()\r\n        }\r\n        return this;\r\n    },\r\n\r\n    addMesh: function addMesh(options: any, success?: (data?: any) => any) {\r\n        // console.log(options, typeof options == \"object\" && typeof options.geometry == \"object\" && typeof options.material == \"object\")\r\n        if (!isObject(options)) return null;\r\n        var self = this;\r\n        var meshData = isObject(options.data) ? options.data : options;\r\n        if (typeof meshData == \"object\" && typeof meshData.geometry == \"object\" && typeof meshData.material == \"object\") {\r\n\r\n            var mesh = this.Mesh.get(meshData, function (e) {\r\n                self.refresh();\r\n            });\r\n\r\n            if (mesh) {\r\n                assignWithout(mesh, meshData.props || meshData, ['type', 'geometry', 'material', 'props', 'update', 'handler', 'updateHandler', 'handlerData', 'id', \"custom\"]);\r\n                var hd = Props.getObjectAnimateHandler(meshData);\r\n                if (!mesh.name) mesh.name = meshData.geometry.type;\r\n                // console.log(mesh);\r\n                var data: any = {\r\n                    $type: \"mesh\",\r\n                    object: mesh,\r\n                    size: {}\r\n                }\r\n                var box = new THREE.Box3().setFromObject(mesh);\r\n                // box.getCenter(obj['position']); // this re-sets the mesh position\r\n                const dimensions = new THREE.Vector3();\r\n                var size: any = box.getSize(dimensions);\r\n                data.size = newObj({\r\n                    origin: {\r\n                        width: size.x,\r\n                        height: size.y,\r\n                        depth: size.z\r\n                    }\r\n                });\r\n                assignValue(data.size.origin, size);\r\n                var secret_key = this.addObjectData(data, hd, options.secret_key || options.id);\r\n\r\n                // this.meshes[secret_key] = data;\r\n                if (typeof success == \"function\") {\r\n                    success(this.getObject(secret_key))\r\n                }\r\n                this.refresh();\r\n\r\n                return secret_key;\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    addMeshes: function addMeshes(meshes: any[]) {\r\n        if (isArray(meshes)) {\r\n            for (let index = 0; index < meshes.length; index++) {\r\n                const mesh = meshes[index];\r\n                if (isObject(mesh)) {\r\n                    this.addMesh(mesh);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    addObject: function (object: any, onSuccess?: (data?: any) => any, onError?: (error?: any) => any, onProgress?: (p?: any) => any) {\r\n        try {\r\n            if (isObject(object) && object.type && isObject(object.data)) {\r\n                // console.log(object);\r\n                var data = object.data;\r\n                var type = String(object.type).toLowerCase();\r\n                // if (object.custom && !data.custom) {\r\n                //     data.custom = object.custom;\r\n                // }\r\n                if (object.secret_key) {\r\n                    data.secret_key = object.secret_key;\r\n                }\r\n                if (type == 'mesh') {\r\n                    this.addMesh(data, onSuccess, onError);\r\n                } else if (type == 'model') {\r\n                    this.addModel(data, onSuccess, onError, onProgress)\r\n                } else if (type == 'grid') {\r\n                    this.addGrid(data, onSuccess, onError)\r\n                } else if (type == 'group') {\r\n                    try {\r\n                        this.addGroup(data, onSuccess, onError);\r\n                    } catch (error) {\r\n                        // console.log(error);\r\n                        if (typeof onError == \"function\") {\r\n                            onError(error);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } catch (e) {\r\n            if (typeof onError == \"function\") {\r\n                onError(e);\r\n            }\r\n        }\r\n    },\r\n\r\n    addObjects: function addObjects(objects?: any[]) {\r\n        try {\r\n            var self = this;\r\n            this.objectLoadingCount = objects.length;\r\n            this.objectLoadingTotal = objects.length;\r\n            var currentLoad = 0;\r\n            if (isArray(objects)) {\r\n                if (objects.length == 0) {\r\n                    this.emit(\"object.load.completed\");\r\n                } else {\r\n                    this.emit(\"object.load.starting\");\r\n                }\r\n                for (let index = 0; index < objects.length; index++) {\r\n                    const obj = objects[index];\r\n                    if (isObject(obj)) {\r\n                        this.pendingObjects.push(obj);\r\n                    }\r\n                }\r\n                var fn;\r\n                fn = function () {\r\n                    if (self.pendingObjects.length) {\r\n                        self.addObject(self.pendingObjects.shift(), function (data) {\r\n                            self.objectLoadingCount--;\r\n                            currentLoad++;\r\n                            if (self.objectLoadingCount == 0) {\r\n                                self.emit(\"object.load.completed\");\r\n                            }\r\n                            else {\r\n                                fn();\r\n                            }\r\n                        }, function (e) {\r\n                            self.objectLoadingCount--;\r\n                            currentLoad++;\r\n                            if (self.objectLoadingCount == 0) {\r\n                                self.emit(\"object.load.completed\");\r\n                            }else {\r\n                                fn();\r\n                            }\r\n                        }, function(p){\r\n                            var n = currentLoad+(p/100);\r\n                            var pc:number = n/self.objectLoadingTotal;\r\n                            var a = parseInt(String(pc*10000)) / 100;\r\n                            self.emit({\r\n                                type: \"loadmore.progress\",\r\n                                percent: a\r\n                            })\r\n                        });\r\n                    }\r\n                };\r\n                fn()\r\n            } else if (isObject(objects)) {\r\n                for (const key in objects) {\r\n                    if (objects.hasOwnProperty(key)) {\r\n                        const object = objects[key];\r\n                        if (isObject(object)) {\r\n                            if (!object.id) object.secret_key = key;\r\n                            this.objectLoadingCount += 1;\r\n                            this.addObject(object, function (data) {\r\n                                self.objectLoadingCount--;\r\n                                if (self.objectLoadingCount == 0) {\r\n                                    this.emit(\"object.load.completes\");\r\n                                }\r\n                            }, function (e) {\r\n                                self.objectLoadingCount--;\r\n                                if (self.objectLoadingCount == 0) {\r\n                                    this.emit(\"object.load.completes\");\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n        return this;\r\n    },\r\n\r\n\r\n    /**\r\n     * Nhóm các đối tượng\r\n     * @param {object} groupData dữ liệu nhóm\r\n     */\r\n    addGroup: function addGroup(groupData: any, success?: (data?: any) => any) {\r\n        var id = \"group_\" + Str.rand();\r\n        var objects = [];\r\n        var meshes: any = {};\r\n        var self = this;\r\n        var getObj = function getObj(object: any) {\r\n            var o = null;\r\n            if (isObject(object) && object.type && isObject(object.data)) {\r\n                var data = object.data;\r\n                var type = String(object.type).toLowerCase();\r\n                if (type == 'mesh') {\r\n                    o = self.Mesh.get(data);\r\n                    if (o) {\r\n                        objects.push(o);\r\n                    }\r\n                }\r\n            }\r\n            return o;\r\n        }\r\n\r\n        try {\r\n            var children = [];\r\n            if (groupData.children && inArray(['array', 'object'], getType(groupData.children))) {\r\n                children = groupData.children;\r\n            } else if (groupData.objects && inArray(['array', 'object'], getType(groupData.objects))) {\r\n                children = groupData.objects;\r\n            }\r\n\r\n            if (isArray(children)) {\r\n                for (let index = 0; index < children.length; index++) {\r\n                    const obj = children[index];\r\n                    if (isObject(obj)) {\r\n                        const m = getObj(obj);\r\n                        if (m) {\r\n                            const n = m.name || \"mesh-\" + Str.rand();\r\n                            meshes[n] = m;\r\n                        }\r\n                    }\r\n                }\r\n            } else if (isObject(children)) {\r\n                for (const key in children) {\r\n                    if (children.hasOwnProperty(key)) {\r\n                        const object = children[key];\r\n                        if (isObject(object)) {\r\n                            const m = getObj(object);\r\n                            if (m) {\r\n                                const n = m.name || key;\r\n                                meshes[n] = m;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n            if (objects.length) {\r\n                var group = new THREE.Group();\r\n                for (let i = 0; i < objects.length; i++) {\r\n                    const obj = objects[i];\r\n                    group.add(obj);\r\n                }\r\n                if (isObject(groupData.props)) {\r\n                    assignValue(group, groupData.props);\r\n                }\r\n\r\n                meshes.main = group;\r\n                var hd = Props.getObjectAnimateHandler(groupData);\r\n                var d: any = {\r\n                    $type: \"group\",\r\n                    object: group,\r\n                    meshes: meshes\r\n                };\r\n\r\n                if (groupData.options && isObject(groupData.options)) {\r\n                    d.options = groupData.options;\r\n                }\r\n                if (groupData.id) {\r\n                    d.secret_key = groupData.id;\r\n                }\r\n                if (hd) {\r\n                    d.handler = hd;\r\n                }\r\n                if (isObject(groupData.textures) || isArray(groupData.textures)) {\r\n                    d.textures = groupData.textures;\r\n                }\r\n\r\n                var _id = this.addObjectData(d);\r\n\r\n                if (typeof success == \"function\") {\r\n                    success(this.getObject(_id))\r\n                }\r\n                this.refresh();\r\n\r\n\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n\r\n    },\r\n\r\n    getObject: function (secret_key: any): any {\r\n        var t = getType(secret_key);\r\n        if (t == \"string\" || t == \"number\") {\r\n            for (let i = 0; i < this.objects.length; i++) {\r\n                const obj = this.objects[i];\r\n                if (obj.secret_key == secret_key) return obj;\r\n            }\r\n        } else if (t == \"object\") {\r\n            if (secret_key.uuid) {\r\n                for (let i = 0; i < this.objects.length; i++) {\r\n                    const obj = this.objects[i];\r\n                    if (obj.object == secret_key) return obj;\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 0; i < this.objects.length; i++) {\r\n                    var s = true;\r\n                    const objectData = this.objects[i];\r\n                    for (const key in secret_key) {\r\n                        if (secret_key.hasOwnProperty(key)) {\r\n                            const cvalue = secret_key[key];\r\n                            if (objectData[key] != cvalue) s = false;\r\n                        }\r\n                    }\r\n                    if (s) return objectData;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    removeObject: function (args: any) {\r\n        var t = getType(args);\r\n        if (t == \"string\" || t == \"number\") {\r\n            for (let i = 0; i < this.objects.length; i++) {\r\n                const obj = this.objects[i];\r\n                if (obj.secret_key == args) {\r\n                    this.objects.splice(i, 1);\r\n                    this.emit('object.removed', obj);\r\n                    this.scene.remove(obj.object);\r\n                    this.refresh();\r\n                    return obj;\r\n                }\r\n            }\r\n        } else if (t == \"object\") {\r\n            if (args.uuid) {\r\n                for (let i = 0; i < this.objects.length; i++) {\r\n                    const obj = this.objects[i];\r\n                    if (obj.object == args) {\r\n                        this.objects.splice(i, 1);\r\n                        this.emit('object.removed', obj);\r\n                        this.scene.remove(obj.object);\r\n                        this.refresh();\r\n                        return obj;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n\r\n                for (let i = 0; i < this.objects.length; i++) {\r\n                    var s = true;\r\n                    const objectData = this.objects[i];\r\n                    for (const key in args) {\r\n                        if (args.hasOwnProperty(key)) {\r\n                            const cvalue = args[key];\r\n                            if (objectData[key] != cvalue) s = false;\r\n                        }\r\n                    }\r\n                    if (s) {\r\n                        this.scene.remove(objectData.object);\r\n                        this.objects.splice(i, 1);\r\n                        this.emit('object.removed', objectData);\r\n                        return objectData;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    getMesh: function (args: any) {\r\n        if (typeof args == \"undefined\") return null;\r\n        if (typeof args == \"object\") {\r\n            args.type = 'mesh';\r\n        } else {\r\n            args = {\r\n                secret_key: args,\r\n                type: \"mesh\"\r\n            }\r\n        }\r\n        return this.getObject(args);\r\n    },\r\n    parseUpdateHandler: function (handler: any) {\r\n        return function (obj) {\r\n            // lặp qua các option opdate\r\n            for (const key in handler) {\r\n                if (handler.hasOwnProperty(key)) {\r\n                    const props = handler[key];\r\n                    if (isObject(props)) {\r\n                        // nếu là object pos hoac rota\r\n                        if (inArray(['rotation', 'position'], key)) {\r\n                            for (const p in props) {\r\n                                if (props.hasOwnProperty(p) && inArray(['x', 'y', 'z'], p)) {\r\n                                    const prop = props[p];\r\n                                    if (prop.hasOwnProperty('value') && isNumber(prop.value)) {\r\n                                        var v = Number(prop.value);\r\n                                        if (prop.hasOwnProperty('action')) {\r\n                                            if (inArray(['dec', 'decrement', '-'], prop.action)) {\r\n                                                obj[key][p] -= v;\r\n                                            } else {\r\n                                                obj[key][p] += v;\r\n                                            }\r\n\r\n                                        } else {\r\n                                            obj[key][p] = v;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        // end pos or rota\r\n                    }\r\n                    // nếu là phương thức hoặc\r\n                    else if (isArray(props) && key.substr(0, 1) == \"@\" && typeof obj[key.substr(1)] == \"function\") {\r\n                        obj[key.substr(1)].apply(obj, props);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * Cập nhật thuộc tính cho đối tượng\r\n     * @param {string} id key nhan dien doi tuong trong scene\r\n     * @param {*} settings \r\n     */\r\n    updateObjectSettings: function (id: any, settings?: any, updateList?: any, meshIndex?: any, materialIndex?: number) {\r\n\r\n        var objectData = this.getObject(id);\r\n        var self = this;\r\n        if (objectData && settings && isObject(settings)) {\r\n            var settingData = assignValue({}, settings);\r\n            var obj = objectData.object;\r\n            if (isObject(settingData.props) && !isEmpty(settingData.props)) {\r\n                var props = settingData.props;\r\n                var cast = typeof props.castShadow == \"boolean\";\r\n                var receive = typeof props.receiveShadow == \"boolean\";\r\n                var ot = obj.type ? String(obj.type).toLowerCase() : \"\";\r\n                if (cast || receive) {\r\n                    if (obj.isMesh || ot == \"mesh\") {\r\n                        if (cast) obj.castShadow = props.castShadow;\r\n                        if (receive) obj.receiveShadow = props.receiveShadow;\r\n                        self.Shadows.removeMesh(obj);\r\n                    }\r\n                    if (obj.traverse) {\r\n                        obj.traverse(function (child) {\r\n                            var ct = child.type ? String(child.type).toLowerCase() : \"\";\r\n                            if (child.isMesh || ct == \"mesh\") {\r\n                                if (cast) child.castShadow = props.castShadow;\r\n                                if (receive) child.receiveShadow = props.receiveShadow;\r\n                                self.Shadows.removeMesh(obj);\r\n                            }\r\n                        });\r\n                    }\r\n                    else if (ot == \"group\" && obj.children && obj.children.length) {\r\n                        var trans;\r\n                        trans = function (o, lv) {\r\n                            for (let gi = 0; gi < o.children.length; gi++) {\r\n                                const child = o.children[gi];\r\n                                var ct = child.type ? String(child.type).toLowerCase() : \"\";\r\n                                if (child.isMesh || ct == \"mesh\") {\r\n                                    // data.meshes.push(child);\r\n                                    if (cast) child.castShadow = props.castShadow;\r\n                                    if (receive) child.receiveShadow = props.receiveShadow;\r\n                                    self.Shadows.removeMesh(obj);\r\n                                }\r\n                                if (child.children && child.children.length) {\r\n                                    if (!lv) lv = 0;\r\n                                    lv++;\r\n                                    trans(child, lv);\r\n                                }\r\n                            }\r\n                        };\r\n                        trans(obj);\r\n                    }\r\n                }// end if cast shadow\r\n                assignWithout(obj, props, ['receiveShadow', 'castShadow']);\r\n                this.dispatchEvent({\r\n                    type: \"object.update.props\",\r\n                    data: objectData\r\n                })\r\n            }// endd props\r\n\r\n            var setMeshData = function (mesh: any, data?: any) {\r\n                const paramData = Props.parse(assignWithout({}, data, ['material']), function (x) {\r\n                    self.refresh();\r\n                });\r\n                assignValue(mesh, paramData);\r\n                if (mesh.material && data.material) {\r\n                    if (isArray(mesh.material)) {\r\n                        const inb = isNumber(materialIndex) && materialIndex >= 0;\r\n                        if (isArray(data.material)) {\r\n                            for (let index = 0; index < mesh.material.length; index++) {\r\n                                const mat = mesh.material[index];\r\n                                const a = !inb || materialIndex == index;\r\n                                if (data.material[index] || a) {\r\n                                    const updateData = (updateList && isArray(updateList)) ? copyByList(data.material[index], updateList) : data.material[index];\r\n                                    Materials.setProperties(mat.type, mat, updateData, function (x) {\r\n                                        self.refresh();\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (!isArray(data.material)) {\r\n                        const updateData = (updateList && isArray(updateList)) ? copyByList(data.material, updateList) : data.material;\r\n                        Materials.setProperties(mesh.material.type, mesh.material, updateData, function (x) {\r\n                            self.refresh();\r\n                        });\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            if (settingData.meshes && isArray(settingData.meshes)) {\r\n                const ism = isString(meshIndex);\r\n                const isn = isNumber(meshIndex);\r\n                const hasInd = (ism || isn);\r\n                for (let i = 0; i < settingData.meshes.length; i++) {\r\n                    const mesh = settingData.meshes[i];\r\n                    for (let j = 0; j < objectData.meshes.length; j++) {\r\n                        const meshData = objectData.meshes[j];\r\n                        if (meshData.name == \"\" || mesh.name == \"\") {\r\n                            if ((meshData.name == mesh.name && i == j)) {\r\n                                if (!isn || meshIndex == i) {\r\n                                    setMeshData(meshData, mesh.data);\r\n                                    meshData.needsUpdate = true;\r\n                                }\r\n\r\n                            }\r\n                        }\r\n                        else if (meshData.name == mesh.name) {\r\n                            // assignValue(meshData, Props.parse(mesh.data));\r\n                            if (!hasInd || ((ism && mesh.name == meshIndex) || (isn && i == meshIndex))) {\r\n                                setMeshData(meshData, mesh.data);\r\n                                meshData.needsUpdate = true;\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n                }\r\n\r\n                this.dispatchEvent({\r\n                    type: \"object.update.meshes\",\r\n                    data: objectData\r\n                });\r\n            }\r\n\r\n            this.dispatchEvent({\r\n                type: \"object.update\",\r\n                data: objectData\r\n            })\r\n            this.refresh();\r\n        }\r\n    },\r\n\r\n    updateMeshMaterial: function (secret_key: any, meshName: any, material: any, materialIndex?: any) {\r\n        var objectData = this.getObject(secret_key);\r\n        var self = this;\r\n        if (objectData && material && isObject(material)) {\r\n            const isSn = isString(meshName);\r\n            const isNi = isNumber(meshName);\r\n\r\n            for (let index = 0; index < objectData.meshes.length; index++) {\r\n                const mesh = objectData.meshes[index];\r\n                if ((isNi && meshName == index) || (isSn && mesh.name == meshName)) {\r\n                    if (isArray(mesh.material)) {\r\n                        if (isNumber(materialIndex) && materialIndex >= 0) {\r\n                            if (typeof mesh.material[materialIndex] != \"undefined\") {\r\n                                if (material.type) {\r\n                                    let updateType = Materials.parseType(material.type);\r\n                                    let materialType = Materials.parseType(mesh.material[materialIndex].type);\r\n                                    if (updateType != materialType) {\r\n                                        mesh.material[materialIndex] = Materials.get(updateType, assignValue(Materials.getPropData(mesh.material[materialIndex]), assignWithout({}, material, ['type'])));\r\n                                    }\r\n                                    else {\r\n                                        Materials.setProperties(mesh.material[materialIndex].type, mesh.material[materialIndex], material, () => self.refresh());\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    Materials.setProperties(mesh.material[materialIndex].type, mesh.material[materialIndex], material, () => self.refresh());\r\n                                }\r\n                                break;\r\n                            }\r\n\r\n                        }\r\n                        else {\r\n                            if (material.type) {\r\n                                let updateType = Materials.parseType(material.type);\r\n                                let materialType = Materials.parseType(mesh.material[index].type);\r\n                                if (updateType != materialType) {\r\n                                    mesh.material[index] = Materials.get(updateType, assignValue(Materials.getPropData(mesh.material[index]), assignWithout({}, material, ['type'])));\r\n                                }\r\n                                else {\r\n                                    Materials.setProperties(mesh.material[index].type, mesh.material[index], material, () => self.refresh());\r\n                                }\r\n                            }\r\n                            else {\r\n                                Materials.setProperties(mesh.material[index].type, mesh.material[index], material, () => self.refresh());\r\n                            }\r\n                        }\r\n                    } else {\r\n\r\n                        if (material.type) {\r\n                            let updateType = Materials.parseType(material.type);\r\n                            let materialType = Materials.parseType(mesh.material.type);\r\n                            let m = assignWithout({}, material, ['type']);\r\n                            if (updateType != materialType) {\r\n                                mesh.material = Materials.get(updateType, assignValue(Materials.getPropData(mesh.material), m));\r\n                            }\r\n                            else {\r\n                                Materials.setProperties(mesh.material.type, mesh.material, m, () => self.refresh());\r\n                            }\r\n                        }\r\n                        else {\r\n                            Materials.setProperties(mesh.material.type, mesh.material, material, () => self.refresh());\r\n                        }\r\n\r\n                    }\r\n                    break;\r\n                }\r\n\r\n            }\r\n        }\r\n        self.refresh();\r\n    },\r\n\r\n    updateMeshesSettings: function updateMeshesSettings(secret_key: any, settings?: any, onlyProp?: string) {\r\n        var objectData = this.getMesh(secret_key);\r\n        var self = this;\r\n        if (objectData && settings && isObject(settings)) {\r\n\r\n            var settingData = assignValue({}, settings);\r\n            var obj = objectData.object;\r\n            if (isObject(settingData.props) && !isEmpty(settingData.props)) {\r\n                var props = settingData.props;\r\n                var cast = typeof props.castShadow == \"boolean\";\r\n                var receive = typeof props.receiveShadow == \"boolean\";\r\n                var ot = obj.type ? String(obj.type).toLowerCase() : \"\";\r\n                if (cast || receive) {\r\n                    if (obj.isMesh || ot == \"mesh\") {\r\n                        if (cast) obj.castShadow = props.castShadow;\r\n                        if (receive) obj.receiveShadow = props.receiveShadow;\r\n                        self.Shadows.removeMesh(obj);\r\n                    }\r\n\r\n                    if (obj.traverse) {\r\n                        obj.traverse(function (child) {\r\n                            var ct = child.type ? String(child.type).toLowerCase() : \"\";\r\n                            if (child.isMesh || ct == \"mesh\") {\r\n                                if (cast) child.castShadow = props.castShadow;\r\n                                if (receive) child.receiveShadow = props.receiveShadow;\r\n                                self.Shadows.removeMesh(obj);\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                }// end if cast shadow\r\n                assignValue(obj, copyWithout(props, ['receiveShadow', 'castShadow']));\r\n\r\n                this.dispatchEvent({\r\n                    type: \"object.update.props\",\r\n                    data: objectData\r\n                });\r\n            }// endd props\r\n            if (settingData.geometry) {\r\n                var geometry = Geometries.get(settingData.geometry);\r\n                if (geometry) obj.geometry = geometry;\r\n                this.dispatchEvent({\r\n                    type: \"object.update.geometry\",\r\n                    data: objectData\r\n                });\r\n            }\r\n            if (settingData.material) {\r\n                try {\r\n\r\n                    if (isArray(obj.material)) {\r\n                        if (isArray(settingData.material)) {\r\n                            for (let i = 0; i < obj.material.length; i++) {\r\n                                if (typeof settingData.material[i] != \"undefined\") {\r\n                                    let material = assignWithout({}, settingData.material[i], ['type']);\r\n                                    let type = settingData.material[i].type;\r\n                                    if (type) {\r\n                                        let updateType = Materials.parseType(type);\r\n                                        let materialType = Materials.parseType(obj.material[i].type);\r\n                                        if (updateType != materialType) {\r\n                                            obj.material[i] = Materials.get(updateType, assignValue(Materials.getPropData(obj.material[i]), material));\r\n                                        }\r\n                                        else {\r\n                                            Materials.setProperties(obj.material[i].type, obj.material[i], material, () => self.refresh(), true);\r\n                                        }\r\n                                    }\r\n                                    else {\r\n                                        Materials.setProperties(obj.material[i].type, obj.material[i], material, () => self.refresh(), true);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            let material = assignWithout({}, settingData.material, ['type']);\r\n                            let type = settingData.material.type;\r\n                            for (let i = 0; i < obj.material.length; i++) {\r\n                                if (type) {\r\n                                    let updateType = Materials.parseType(type);\r\n                                    let materialType = Materials.parseType(obj.material[i].type);\r\n                                    if (updateType != materialType) {\r\n                                        obj.material[i] = Materials.get(updateType, assignValue(Materials.getPropData(obj.material[i]), material));\r\n                                    }\r\n                                    else {\r\n                                        Materials.setProperties(obj.material[i].type, obj.material[i], material, () => self.refresh(), true);\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    Materials.setProperties(obj.material[i].type, obj.material[i], material, () => self.refresh(), true);\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    } else {\r\n\r\n                        let material = assignWithout({}, settingData.material, ['type']);\r\n                        let type = settingData.material.type;\r\n                        if (type) {\r\n                            let updateType = Materials.parseType(type);\r\n                            let materialType = Materials.parseType(obj.material.type);\r\n                            if (updateType != materialType) {\r\n                                obj.material = Materials.get(updateType, assignValue(Materials.getPropData(obj.material), material));\r\n                            }\r\n                            else {\r\n                                Materials.setProperties(obj.material.type, obj.material, material, () => self.refresh(), true);\r\n                            }\r\n                        }\r\n                        else {\r\n                            Materials.setProperties(obj.material.type, obj.material, material, () => self.refresh(), true);\r\n                        }\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    console.log(e);\r\n                }\r\n\r\n                this.dispatchEvent({\r\n                    type: \"object.update.material\",\r\n                    data: objectData\r\n                });\r\n            }\r\n\r\n            obj.needsUpdate = true;\r\n\r\n            self.refresh();\r\n            this.dispatchEvent({\r\n                type: \"object.update\",\r\n                data: objectData\r\n            })\r\n\r\n        }\r\n    },\r\n\r\n    getObjectSize: function (secret_key: any) {\r\n        let objectData = this.getObject(secret_key);\r\n        if (!objectData) return null;\r\n        let obj = objectData.object;\r\n        var box = new THREE.Box3().setFromObject(obj);\r\n        // box.getCenter(obj['position']); // this re-sets the mesh position\r\n        const dimensions = new THREE.Vector3();\r\n        var size: any = box.getSize(dimensions);\r\n        return size;\r\n    },\r\n\r\n    getDownloadLinkElement: function () {\r\n        if (!this.downloadLink) {\r\n            const link = document.createElement('a');\r\n            link.style.display = 'none';\r\n            document.body.appendChild(link); // Firefox workaround, see #6594\r\n            this.downloadLink = link;\r\n        }\r\n        return this.downloadLink;\r\n\r\n\r\n    },\r\n\r\n    downloadUrl: function (url?: string, filename?: string) {\r\n        var link = this.getDownloadLinkElement();\r\n        link.href = url;\r\n        link.download = filename;\r\n        link.click();\r\n    },\r\n    exportItemAsGltf: function (id: any, options?: any, callback?: (data: any) => any) {\r\n        var self = this;\r\n        var objectData = this.getObject(id);\r\n        if (objectData) {\r\n\r\n            const gltfExporter = new GLTFExporter();\r\n\r\n            var opt = {\r\n                trs: false,\r\n                onlyVisible: true,\r\n                truncateDrawRange: true,\r\n                binary: false,\r\n                maxTextureSize: Infinity // To prevent NaN value\r\n            };\r\n            assignValue(opt, options);\r\n            gltfExporter.parse(objectData.raw, function (result) {\r\n\r\n                if (typeof callback == \"function\") {\r\n                    callback(result);\r\n                }\r\n                else if (result instanceof ArrayBuffer) {\r\n\r\n                    self.saveArrayBuffer(result, 'scene.glb');\r\n\r\n                } else {\r\n\r\n                    const output = JSON.stringify(result, null, 2);\r\n                    self.saveString(output, 'scene.gltf');\r\n\r\n                }\r\n\r\n            }, opt);\r\n\r\n\r\n\r\n\r\n        }\r\n    },\r\n    save: function save(blob: any, filename?: string) {\r\n        var url = window.URL || window.webkitURL;\r\n        var link = url.createObjectURL(blob);\r\n        this.downloadUrl(link, filename);\r\n\r\n\r\n        // URL.revokeObjectURL( url ); breaks Firefox...\r\n\r\n    },\r\n\r\n    saveString: function (text: string, filename: string) {\r\n\r\n        this.save(new Blob([text], { type: 'text/plain' }), filename);\r\n\r\n    },\r\n\r\n\r\n    saveArrayBuffer: function (buffer: any, filename: string) {\r\n\r\n        this.save(new Blob([buffer], { type: 'application/octet-stream' }), filename);\r\n\r\n    }\r\n};\r\n\r\nexport default ObjectManager;\r\nexport { ObjectManager }","import { Injectable } from '@angular/core';\nimport LocalDB, { DbTableColumns, DbTableRow } from '../helpers/local-db';\nimport { isEmpty } from '../helpers/utils';\nimport { LocalStorageService } from './local-storage.service';\nimport { LostDbService } from './lost-db.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class LostDbTableService {\n\n    name: string = 'test';\n    dbname: string = '__LOSTDB__';\n    columns: DbTableColumns = {};\n    database: LostDbService;\n\n    primaryKey: string = \"id\";\n    constructor(private service: LostDbService) {\n        if (service) {\n            this.database = service;\n        }\n\n    }\n    init() {\n        if (isEmpty(this.columns)) {\n            throw new Error(\"column is not config\");\n\n        }\n        if (!this.database) {\n            this.database = new LostDbService(new LocalStorageService);\n        }\n        this.database.useDatabase(this.dbname);\n\n        this.database.createIfNotExists(this.name, this.columns);\n        if (this.primaryKey == \"id\") {\n            for (const col in this.columns) {\n                if (Object.prototype.hasOwnProperty.call(this.columns, col)) {\n                    const cfg = this.columns[col];\n                    if (cfg.autoIncrement) {\n                        this.primaryKey = cfg.name || col\n                    }\n                }\n            }\n        }\n\n    }\n\n    hasMany(table: string, foreinKey: string, localKey: string = 'id') {\n\n        return (row: DbTableRow) => {\n\n        }\n    }\n    addColumn(name: string, config?: any) {\n        return this.database.addColumn(this.name, name, config);\n    }\n    modifyTable(columns?: any) {\n        return this.database.modifyTable(this.name, columns);\n    }\n    dropColumn(...args: any[]) {\n        return this.database.dropColumn(this.name, ...args);\n    }\n    /**\n     * Thêm dữ liệu vào bảng\n     * @param data dữ liệu của một bản ghi\n     * @returns \n     */\n    insert(data) {\n        return this.database.insert(this.name, data);\n    }\n    /**\n     * Thêm dữ liệu vào bảng\n     * @param data dữ liệu của một bản ghi\n     * @returns \n     */\n    add(data) {\n        return this.database.insert(this.name, data);\n    }\n    /**\n     * cập nhật bảng\n     * @param data dữ liệu của một bản ghi\n     * @param condition diều kiện\n     * @returns \n     */\n    update(data, condition?: any) {\n        return this.database.update(this.name, data, condition);\n    }\n    /**\n     * lấy tất cã dữ liệu trong bảng\n     * @param condition diều kiện\n     * @param select\n     * @returns \n     */\n    getAll(condition?: any, select?: any): DbTableRow[] {\n        return this.database.select(this.name, select, condition);\n    }\n    /**\n     * lấy tất cã dữ liệu trong bảng\n     * @param condition diều kiện\n     * @param select các cột cần lấy\n     * @param orderBy kiểu sắp sếp\n     * @param limit Giới hạn\n     * @returns \n     */\n    get(condition?: any, select?: any, orderBy?: any, limit?: any): DbTableRow[] {\n        return this.database.select(this.name, select, condition, orderBy, limit);\n    }\n    /**\n     * lấy tất cã dữ liệu trong bảng\n     * @param condition diều kiện\n     * @param select các cột cần lấy\n     * @param orderBy kiểu sắp sếp\n     * @param limit Giới hạn\n     * @returns \n     */\n    select(columns?: any, condition?: any, orderBy?: any, limit?: any): DbTableRow[] {\n        return this.database.select(this.name, columns, condition, orderBy, limit);\n    }\n    /**\n     * lấy Một bản ghi trong bảng\n     * @param condition diều kiện\n     * @param select các cột cần lấy\n     * @param orderBy kiểu sắp sếp\n     * @returns \n     */\n    getOne(columns?: any, condition?: any, orderBy?: any): DbTableRow {\n        let rs = this.database.select(this.name, columns, condition, orderBy);\n        return rs.length == 1 ? rs[0] : null;\n    }\n    /**\n     * lấy Một bản ghi trong bảng\n     * @param condition diều kiện\n     * @param select các cột cần lấy\n     * @param orderBy kiểu sắp sếp\n     * @returns \n     */\n    first(columns?: any, condition?: any, orderBy?: any): DbTableRow {\n        let rs = this.database.select(this.name, columns, condition, orderBy);\n        return rs.length == 1 ? rs[0] : null;\n    }\n    /**\n     * lấy Một bản ghi trong bảng\n     * @returns \n     */\n    find(id: any): DbTableRow {\n        var params: any = {};\n        params[this.primaryKey] = id;\n        return this.first('*', params);\n    }\n    get lastInsertID(): number {\n        return this.database.getLastInsertID(this.name);\n    }\n    get lastInsertItem(): DbTableRow {\n        let lii = this.lastInsertID;\n        if (lii > 0) {\n            let params: any = {};\n            params[this.primaryKey] = lii;\n            return this.first('*', params);\n        }\n        return null;\n    }\n}\n","import { date, getArguments, isBoolean, isFunction, isObject, isString, Str } from '@app/_core/helpers/utils';\r\nconst DEFAULT_VALUE = Str.rand(Str.rand(date('ms')));\r\n\r\nexport type EventEmit = {\r\n    type?: string,\r\n    data?: any,\r\n    [key: string]: any\r\n}\r\nexport type Listener = (event?: EventEmit) => any\r\n\r\n\r\nexport type OnEventListener = {\r\n    [event: string]: (Listener | string)\r\n}\r\n\r\nexport class EventManager {\r\n    [prop: string]: any\r\n    constructor() {\r\n        Object.defineProperty(this, \"_listeners\", {\r\n            configurable: false,\r\n            enumerable: false,\r\n            value: {}\r\n        })\r\n        Object.defineProperty(this, \"_dispatchedEvents\", {\r\n            configurable: false,\r\n            enumerable: false,\r\n            value: {}\r\n        })\r\n        \r\n    }\r\n\r\n    /**\r\n     * chuẩn hóa hàn lắng nghe sự kiện\r\n     * @param {string|function} handler tên phương thức hoạc hàm handler\r\n     * @returns function\r\n     */\r\n\r\n    parseEventHandler(handler: any): (...args: any[]) => any {\r\n        var self = this;\r\n        if (typeof handler == \"function\") {\r\n            return handler;\r\n        }\r\n        var fnt = handler ? handler : function (e) {\r\n            console.log(e);\r\n        };\r\n\r\n        if (typeof handler == \"string\") {\r\n            var params = [];\r\n            var handleParams = handler.split(\":\");\r\n            if (handleParams.length == 2) {\r\n                handler = handleParams[0];\r\n                params = handleParams[1].split(\",\").map(function (s) { return s.trim(); });\r\n\r\n            }\r\n\r\n            fnt = function (e) {\r\n                var args = [e];\r\n                params.map(function (p) { args.push(p); });\r\n\r\n                if (typeof self[handler] == \"function\") {\r\n                    return self[handler].apply(self, args);\r\n                }\r\n            };\r\n\r\n\r\n        }\r\n        return fnt;\r\n    }\r\n\r\n    /**\r\n     * lắng nghe sự kiện\r\n     * @param {string} type loại hoạc tên sự kiện\r\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\r\n     * @param {boolean} dispatch Thực thi trên tất cả các sự kiện trước đó\r\n     * @returns this\r\n     */\r\n    addEventListener(type: string, handler?: Listener, dispatch?: boolean) {\r\n        var self = this;\r\n        var listener = this.parseEventHandler(handler);\r\n\r\n        if (this._listeners === undefined || this._listeners === null) this._listeners = {};\r\n\r\n        type = String(type).toLowerCase();\r\n\r\n\r\n\r\n        // if (isDomEvent(type)) return this.addDomEvent(type, listener, DEFAULT_VALUE);\r\n        const listeners = this._listeners;\r\n\r\n        if (listeners[type] === undefined) {\r\n\r\n            listeners[type] = [];\r\n\r\n        }\r\n        if (dispatch === true) {\r\n            this.handleDispatchedEvents(type, listener);\r\n        }\r\n\r\n        if (listeners[type].indexOf(listener) === - 1) {\r\n            listeners[type].push(listener);\r\n        }\r\n        return listener;\r\n    }\r\n\r\n    /**\r\n     * Kiểm tra sự kiện có tồn tại hay không\r\n     * @param {string} type tên sự kiện\r\n     * @param {function} listener hàm xử lý\r\n     * @returns {boolean}\r\n     */\r\n    hasEventListener(type: string, listener?: Listener): boolean {\r\n\r\n        if (this._listeners === undefined || this._listeners === null) return false;\r\n\r\n        const listeners = this._listeners;\r\n        type = String(type).toLowerCase();\r\n        return listeners[type] !== undefined && (listener ? listeners[type].indexOf(listener) !== - 1 : true);\r\n\r\n    }\r\n\r\n    /**\r\n     * Xóa / Gỡ sự kiện\r\n     * @param {string} type tên sự kiện\r\n     * @param {function} listener hàm xử lý\r\n     * @returns {boolean}\r\n     */\r\n    removeEventListener(type: string, listener?: Listener): boolean {\r\n        if (this._listeners === undefined || this._listeners === null) return false;\r\n        type = String(type).toLowerCase();\r\n        const listeners = this._listeners;\r\n        const listenerArray = listeners[type];\r\n        if (listenerArray !== undefined) {\r\n            if (!listener) {\r\n                this._listeners[type].splice(0, this._listeners[type].length);\r\n                return true;\r\n            }\r\n            const index = listenerArray.indexOf(listener);\r\n            if (index !== - 1) {\r\n                listenerArray.splice(index, 1);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Tạo, gọi ra một sự kiện\r\n     * @param {string|object} event Tên hoặc sự kiện\r\n     * @param {*} data dữ liệu\r\n     * @param {boolean} log lưu lại du lieu khi emit\r\n     * @returns {boolean}\r\n     */\r\n    dispatchEvent(event: (EventEmit | String), data?: any, log?: boolean): boolean {\r\n        if (this._listeners === undefined || this._listeners === null || !event) return null;\r\n\r\n        var e: any = {};\r\n        if (isString(event)) {\r\n            e.type = event;\r\n            if (data) {\r\n                e.data = data;\r\n            }\r\n            // console.log(event, data);\r\n        } else if (isObject(event)) {\r\n            e = event;\r\n            if (!e.type) return false;\r\n            if (!e.data && data) {\r\n                e.data = data;\r\n            }\r\n            if (isBoolean(data) && typeof log == \"undefined\") {\r\n                log = data;\r\n            }\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n        if(e.constructor === Object) e.type = String(e.type).toLowerCase();\r\n        const listeners = this._listeners;\r\n        const listenerArray = listeners[e.type];\r\n        var s = true;\r\n        if (!e.target) {\r\n            e.target = this;\r\n        }\r\n\r\n        if (!e.stopImmediatePropagation)\r\n            e.stopImmediatePropagation = function () {\r\n                s = false;\r\n            };\r\n\r\n        if (log === true) {\r\n            this.addDispatchedEvent(e);\r\n        }\r\n\r\n\r\n        if (listenerArray !== undefined) {\r\n            // Make a copy, in case listeners are removed while iterating.\r\n            const array1 = listenerArray.slice(0);\r\n            var rs: any[] = [];\r\n            for (var i = 0, l = array1.length; i < l; i++) {\r\n                let a = array1[i].call(this, e);\r\n                if (!s) break;\r\n                if (a !== undefined) {\r\n                    rs.push(a)\r\n                }\r\n\r\n            }\r\n            if (s && rs.length) {\r\n                return rs.length == 1 && array1.length == 1 ? rs[0] : rs;\r\n            }\r\n            return s;\r\n        }\r\n\r\n    }\r\n    /**\r\n     * lắng nghe sự kiện\r\n     * @param {string} type loại hoạc tên sự kiện\r\n     * @param {function|string} listener hàm hoặc tên phương thức xử lý sự kiện\r\n     * @param {boolean} dispatch có cần cần gọi ham voi cac su kien truoc do hay ko\r\n     * @returns this\r\n     */\r\n    on(type: (OnEventListener | string), listener?: Listener | boolean, dispatch?: boolean) {\r\n        if (isObject(type)) {\r\n            var listeners = {};\r\n            const events: OnEventListener = type as OnEventListener;\r\n            var d: boolean = isBoolean(listener) ? listener as boolean : (isBoolean(dispatch) ? dispatch : false);\r\n            for (const key in events) {\r\n                if (Object.hasOwnProperty.call(events, key)) {\r\n                    const fn = type[key];\r\n                    if (isFunction(fn) || isString(fn)) {\r\n                        const fnAdded = this.addEventListener(key, fn, d);\r\n                        if (fnAdded) {\r\n                            listeners[key] = fnAdded;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return listeners;\r\n        }\r\n        return this.addEventListener(type as string, listener as Listener, dispatch);\r\n    }\r\n    \r\n    off(type?: any, listener?: Listener) {\r\n        return this.removeEventListener(type, listener);\r\n    }\r\n    /**\r\n     * Tạo, gọi ra một sự kiện\r\n     * @param {string|object} event Tên hoặc sự kiện\r\n     * @param {*} data dữ liệu\r\n     * @returns {boolean}\r\n     */\r\n    emit(event: (EventEmit | String), data?: any, log?: boolean): boolean {\r\n        return this.dispatchEvent.apply(this, getArguments(arguments));\r\n    }\r\n    \r\n    addDispatchedEvent(event: EventEmit) {\r\n        if (this._dispatchedEvents[event.type] === undefined) this._dispatchedEvents[event.type] = [];\r\n        this._dispatchedEvents[event.type].push(event);\r\n        // console.log(event.type, this._pendingListeners[event.type])\r\n        return this\r\n    }\r\n\r\n    handleDispatchedEvents(type: string, handler: Listener) {\r\n        var listenerArray = this._dispatchedEvents[type];\r\n        // console.log(type, this._pendingListeners[type], this);\r\n        if (listenerArray !== undefined) {\r\n\r\n\r\n            // console.log(type)\r\n            // Make a copy, in case listeners are removed while iterating.\r\n            const array = listenerArray.slice(0);\r\n\r\n            for (var i = 0, l = array.length; i < l; i++) {\r\n                // array[i].call(this, e);\r\n                var s = handler.call(this, array[i]);\r\n                if (s === false) {\r\n                    return s;\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","import * as fromAuth from './auth.reducer';\r\nimport { createSelector } from '@ngrx/store';\r\n\r\nexport const getIsAuthenticating = createSelector(fromAuth.selectAuthState, (state: fromAuth.AuthState) => state.isAuthenticating);\r\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { ModalConfirmService } from '@app/_shared/services/modal-confirm.service';\nimport { EditorIO, EditorMethods } from '../../../base/editor-io';\n\n@Component({\n    selector: 'app-tab-lights',\n    templateUrl: './tab-lights.component.html',\n    styleUrls: ['./tab-lights.component.scss']\n})\nexport class TabLightsComponent extends BaseComponent implements OnInit {\n\n    // app: TemplateEditorService = null;\n    isShow: boolean = false;\n    lights: any[] = [];\n    lightTemplates: string[] = [\n        \"Ambient\",\n        \"Directional\",\n        \"Hemisphere\",\n        \"Point\",\n        \"RectArea\",\n        \"Spot\"\n    ];\n    height50: boolean = false;\n    app: AppEditorService;\n\n    constructor(\n        private confirmService: ModalConfirmService, \n        private cd: ChangeDetectorRef,\n        private events: AppEditorEventService\n    ) {\n        super();\n        \n    }\n\n    \n    initFirst(){\n        this.app = this.events.app;\n        this.registerEventService(this.confirmService, {\n            \"close\": e => {\n                this.changeHeight()\n                this.subEvents.emit(\"tab.light.refresh\");\n            }\n        })\n    }\n    onInit() {\n        if(this.isChangeSubEvents){\n            this.app = this.subEvents.app;\n            this.registerEventService(this.app, {\n                \"light.deleted\": l => {\n                    this.loadLight();\n                    this.subEvents.emit(\"component.checkchange\");\n                }\n            })\n        \n        }\n        this.activeEventServiceRegistered(this.app);\n        this.activeEventServiceRegistered(this.confirmService);\n        this.loadLight();\n        this.isShow = true;\n        this.cd.detectChanges();\n    }\n    onDestroy(){\n        \n        this.deactiveEventServiceRegistered(this.app);\n        this.deactiveEventServiceRegistered(this.confirmService);\n        this.isShow = false;\n    }\n\n    changeHeight(){\n        this.height50 = true;\n            this.cd.detectChanges();\n            setTimeout(() => {\n                this.height50 = false;\n                this.cd.detectChanges();\n                    \n            }, 50);\n    }\n\n    loadLight() {\n        this.lights = this.app.getLightList();\n    }\n\n    addLight(name) {\n        if (this.app) {\n            this.app.addLightByTemplate(name, e => {\n                this.loadLight();\n                this.subEvents.emit(\"component.checkchange\");\n            })\n        }\n    }\n\n    deleteLight(secret_key) {\n        if (this.app) {\n            var name: string;\n            this.lights.map(light => {\n                if (light.secret_key == secret_key) {\n                    name = light.name;\n                }\n            });\n\n            if (name) {\n                this.confirmService.showDeleteConfirm(\"Are you sure delete \" + name + \" light?\", () => {\n                    this.app.deleteLight(secret_key);\n                })\n            }\n        }\n    }\n\n    clickLight(secret_key) {\n        if (this.app) {\n            this.app.attachLightInEditor(secret_key);\n            this.app.engine.refresh();\n        }\n        this.subEvents.emit({\n            type: \"show:light.panel\",\n            secret_key: secret_key\n        })\n    }\n\n}\n","<div class=\"tab-inner\" [class.height-50]=\"height50\">\n    <div class=\"tab-header\">\n        <h3>Light</h3>\n        <div class=\"btns\">\n            <button nz-button nz-dropdown nzTrigger=\"click\" [nzDropdownMenu]=\"menu\">\n                <span>+</span>\n                <i nz-icon nzType=\"down\"></i>\n            </button>\n            <nz-dropdown-menu #menu=\"nzDropdownMenu\">\n                <ul nz-menu>\n                    <li nz-menu-item *ngFor=\"let name of lightTemplates; let i=index\" (click)=\"addLight(name)\">{{name}}</li>\n                </ul>\n            </nz-dropdown-menu>\n        </div>\n    </div>\n    <div class=\"tab-body store\">\n        <ng-container *ngIf=\"lights.length; then lightList; else noLight\"></ng-container>\n        <ng-template #lightList>\n            <tab-light-item *ngFor=\"let light of lights; let i=index\" [light]=\"light\" (clickDelete)=\"deleteLight($event)\" (clickLight)=\"clickLight($event)\"></tab-light-item>\n        </ng-template>\n        <ng-template #noLight>\n            <div class=\"alert\">\n                there are no Light\n            </div>\n        </ng-template>\n\n    </div>\n</div>","/**\n * author Doan Le\n */\nimport { Injectable } from '@angular/core';\nimport { Database, DbTableRow, defaultTypeValues } from '../helpers/local-db';\nimport { checkType, getType, inArray, isObject, isString, isEmpty, isNumber, isBoolean, assignValue, isFunction, isInteger, isArray, Str, objectHasKey } from '../helpers/utils';\nimport { LocalStorageService } from './local-storage.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class LostDbService {\n    key = '__LOSTDB__';\n    db: Database = null;\n    taskCount: number = 0;\n    constructor(private storage: LocalStorageService) {\n        this.useDatabase(this.key);\n\n    }\n    open(){\n        if(this.taskCount == 0){\n            this.db = this.storage.get(this.key);\n            if (!this.db) {\n                this.storage.set(this.key, {\n                    version: 1.0,\n                    tables: {}\n                })\n                this.db = this.storage.get(this.key);\n            }\n        }\n        this.taskCount++;\n    }\n    close(){\n        if(this.taskCount > 0){\n            this.taskCount--;\n            if(this.taskCount==0){\n                this.db = null;\n            }\n        }\n    }\n    useDatabase(dbname: string) {\n        this.key = dbname;\n    }\n    getDB() {\n        return this.db;\n    }\n\n    isTableExists(tableName: string) {\n        this.open();\n        let exists = Object.prototype.hasOwnProperty.call(this.db.tables, tableName);\n        this.close();\n        return exists;\n    }\n\n    getTable(tableName) {\n        this.open();\n        var tables = this.db.tables;\n        let tb = Object.prototype.hasOwnProperty.call(tables, tableName) ? tables[tableName] : null;\n        this.close();\n        return tb;\n    }\n\n    updateTable(tableName, data: any) {\n        this.open();\n        var table = this.getTable(tableName);\n        if (!table) {\n            this.close();\n            return false;\n        }\n        table.data = data;\n        this.db.tables[tableName] = table;\n        this.storage.set(this.key, this.db);\n        this.close();\n    }\n    /**\n     * \n     * @param {string} name tên cộ\n     * @param {string} type loại dự liệu\n     * @param {*} defaultValue gia tri mac dinh\n     * @param {booluan} autoIncrement \n     * @returns {{name, type, defaultValue, autoIncrement}}\n     */\n    parseColumn(name, type?, length?, required?, defaultValue?, autoIncrement?): any {\n        var t = String(type).toLowerCase();\n        if (t == \"text\") t = \"string\";\n\n        if (!defaultTypeValues.hasOwnProperty(t) || !isString(name) || String(name).length == 0) {\n            return null;\n        }\n        return {\n            name: name,\n            type: t,\n            length: length,\n            required: isBoolean(required) ? required : false,\n            defVal: typeof defaultValue !== \"undefined\" ? defaultValue : defaultTypeValues[t],\n            autoIncrement: isBoolean(autoIncrement) ? autoIncrement : false\n        };\n    }\n\n\n    /**\n     * chuẩn hóa tất cả các cột\n     * @param {array|object} columns các cột\n     * @param {boolean} isA isArray\n     * @param {boolean} isO isObject\n     * @returns {object}\n     */\n    parseColumns(config): any {\n        let cfg: any = {};\n        let defTypeVals = {\n            boolean: false,\n            number: 0,\n            object: {},\n            array: [],\n            string: ''\n        }\n        for (const key in config) {\n            if (Object.prototype.hasOwnProperty.call(config, key)) {\n                const type = config[key];\n                let ty = getType(type);\n                if (ty == \"object\" && type.type) {\n                    let t = String(type.type).toLowerCase();\n                    if (inArray(['boolean', 'object', 'number', 'array', \"string\"], t)) {\n                        cfg[key] = {\n                            type: t,\n                            length: isNumber(type.length) && type.length > 0 ? type.length : null,\n                            required: isBoolean(type.required) ? type.required : false,\n                            defval: typeof type['default'] != \"undefined\" && getType(type['default']) == t ? type['default'] : (typeof type['defVal'] != \"undefined\" && getType(type['defValt']) == t ? type['defVal'] : defTypeVals[t]),\n                            autoIncrement: isBoolean(type.autoIncrement) ? type.autoIncrement : false\n                        }\n                    } else {\n                        cfg[key] = {\n                            type: ty,\n                            length: null,\n                            required: false,\n                            defVal: type,\n                            autoIncrement: false\n                        }\n                    }\n                }\n                else if (inArray(['boolean', 'object', 'number', 'array'], ty)) {\n                    cfg[key] = {\n                        type: ty,\n                        length: null,\n                        required: false,\n                        defVal: type,\n                        autoIncrement: false\n                    }\n                }\n                else if (ty == \"string\") {\n                    let t = String(type).toLowerCase();\n                    if (inArray(['boolean', 'object', 'number', 'array', \"string\"], t)) {\n                        cfg[key] = {\n                            type: t,\n                            length: null,\n                            required: false,\n                            autoIncrement: false,\n                            defval: defTypeVals[t]\n                        }\n                    } else {\n                        cfg[key] = {\n                            type: ty,\n                            length: null,\n                            required: false,\n                            autoIncrement: false,\n                            defVal: type\n                        }\n                    }\n\n                }\n            }\n        }\n        return cfg;\n    }\n\n    createIfNotExists(name: string, config: any) {\n        this.open();\n        var stt = false;\n        if (!this.isTableExists(name) && isObject(config)) {\n            let cfg = this.parseColumns(config);\n            if (!isEmpty(cfg)) {\n\n                this.db.tables[name] = {\n                    name: name,\n                    config: cfg,\n                    data: [],\n                    autoIncrement: 0\n                }\n                this.storage.set(this.key, this.db);\n\n                stt = true;\n            }\n        }\n        this.close()\n        return stt;\n    }\n\n    /**\n     * sửa bảng\n     * @param {string} tableName tên bảng\n     * @param {array|object} columns các cột\n     * @returns {boolean}\n     */\n    modifyTable(tableName, columns) {\n\n        this.open();\n        if (!Object.prototype.hasOwnProperty.call(this.db.tables, tableName)) {\n            this.close();\n            return false;\n        }\n        const table = this.db.tables[tableName];\n\n        var columns = this.parseColumns(columns);\n\n        if (!isEmpty(columns)) {\n            for (var key in columns) {\n                if (Object.hasOwnProperty.call(columns, key)) {\n                    var cfg = columns[key];\n                    table.config[key] = cfg;\n                }\n            }\n            if (table.data.length) {\n                for (var i = 0; i < table.data.length; i++) {\n                    var row = table.data.length[i];\n                    for (var key in columns) {\n                        if (Object.hasOwnProperty.call(columns, key)) {\n                            var cfg = columns[key];\n                            if (Object.hasOwnProperty.call(row, key)) {\n                                var t = getType(row[key]);\n                                if (t != cfg.type) {\n                                    if (t == \"number\" && cfg.type == \"string\") {\n                                        row[key] = String(row[key]);\n                                    } else if (t == \"string\" && cfg.type == \"number\") {\n                                        var a = Number(row[key]);\n                                        row[key] = !isNaN(a) ? a : cfg.defaultValue;\n                                    } else if (cfg.type == \"boolean\" && t == \"number\") {\n                                        row[key] = row[key] > 0;\n                                    } else if (cfg.type == \"array\") {\n                                        row[key] = [row[key]];\n                                    }\n                                    else if (cfg.type == \"object\") {\n                                        row[key] = Object.create(row[key]);\n                                    }\n                                    else {\n                                        row[key] = cfg.defVal;\n                                    }\n                                }\n                            } else {\n                                row[key] = cfg.defVal;\n                            }\n                        }\n                    }\n                }\n            }\n            // this.database.tables[tableName] = table;\n            this.storage.set(this.key, this.db);\n            this.close();\n            return true;\n        }\n        this.close();\n        return false;\n    }\n    dropTable(tableName) {\n        this.open();\n        var s = false;\n        if (Object.prototype.hasOwnProperty.call(this.db.tables, tableName)) {\n            delete this.db.tables[tableName];\n            this.storage.set(this.key, this.db);\n            s = true;\n\n        }\n        this.close();\n        return s;\n    }\n\n    /**\n    * thêm cột\n    * @param {string} tableName tên bảng\n    * @param {string} columnName tên cột\n    * @param {object} config cấu hình cột\n    */\n    addColumn(tableName, columnName, config): any {\n        this.open();\n        if (!Object.prototype.hasOwnProperty.call(this.db.tables, tableName)) {\n            this.close();\n            return false;\n        }\n        const table = this.db.tables[tableName];\n\n        var ct = getType(columnName);\n        var column = null;\n        if (ct == \"string\") {\n            if (isObject(config)) {\n                var col = this.parseColumn(columnName, config.type || \"string\", config.length || null, config.required || false, config.default || config.defaultValue, config.autoIncrement);\n                if (col) {\n                    column = col;\n                }\n            } else if (isString(config)) {\n                var type, defVal;\n                if (typeof defaultTypeValues[String(config).toLowerCase()] != \"undefined\") {\n                    type = config;\n                } else {\n                    type = 'string';\n                    defVal = config;\n                }\n                var col = this.parseColumn(columnName, type, null, false, defVal);\n                if (col) {\n                    column = col;\n                }\n            } else {\n                var col = this.parseColumn(columnName, typeof config != \"undefined\" ? getType(config) : \"string\", config);\n                if (col) {\n                    column = col;\n                }\n            }\n        } else if (ct == \"object\" && Object.prototype.hasOwnProperty.call(columnName, 'name')) {\n            var col = this.parseColumn(\n                columnName.name,\n                typeof columnName.type != \"undefined\" ? columnName.type : \"string\",\n                isNumber(columnName.length) ? columnName.length : null,\n                columnName.default || columnName.defaultValue,\n                columnName.autoIncrement || false\n            );\n            if (col) {\n                column = col;\n            }\n        }\n        if (column) {\n            if (Object.prototype.hasOwnProperty.call(table.config, column.name)) {\n                this.close();\n                return false;\n            }\n            table.config[column.name] = column;\n            for (var index = 0; index < table.data.length; index++) {\n                var row = table.data[index];\n                row[column.name] = column.defVal;\n            }\n\n            this.storage.set(this.key, this.db);\n        }\n        this.close();\n    }\n    /**\n     * xóa cột\n     * @param {string} tableName tyên bảng\n     * @param {string} columns danh sách cột cần xóa\n     * @returns {boolean}\n     */\n    dropColumn(tableName: string, ...args: any[]) {\n        this.open();\n        if (!Object.prototype.hasOwnProperty.call(this.db.tables, tableName)) {\n            this.close();\n            return false;\n        }\n        const table = this.db.tables[tableName];\n\n        var list = []\n        for (var index = 0; index < args.length; index++) {\n            var a = args[index];\n            if (isArray(a)) {\n                a.map(function (s) {\n                    if (Object.prototype.hasOwnProperty.call(table.config, s)) {\n                        table.config[s] = null;\n                        list.push(s);\n                        try {\n                            delete table.config[s];\n\n                        } catch (error) {\n\n                        }\n                    }\n                })\n            } else if (Object.prototype.hasOwnProperty.call(table.config, a)) {\n                table.config[a] = null;\n                list.push(a);\n                try {\n                    delete table.config[a];\n                } catch (error) {\n\n                }\n\n            }\n        }\n        if (list.length && table.data.length) {\n            table.data.map(function (row) {\n                list.map(function (col) {\n                    row[col] = null;\n                    try {\n                        delete row[col];\n                    } catch (error) {\n\n                    }\n                })\n            })\n        }\n        this.storage.set(this.key, this.db);\n        this.close();\n        return true;\n    }\n\n\n    parseColumnData(tableName, data, $id: number = 0) {\n        this.open();\n        let config = this.db.tables[tableName].config;\n        let d: any = {};\n        for (const k in config) {\n            if (Object.prototype.hasOwnProperty.call(config, k)) {\n                let dhk = Object.prototype.hasOwnProperty.call(data, k);\n                const column = config[k];\n                if (column.autoIncrement) {\n                    if ($id) {\n                        d[k] = $id;\n                    }\n                }\n                else if (!((column.type == \"string\" && isNumber(data[k])) || (column.type == \"number\" && isNumber(data[k]))) && column.type != getType(data[k])) {\n                    this.close();\n                    throw new Error(k + \" type is not match\");\n                }\n                else if (column.required && !dhk && $id) {\n                    this.close();\n                    throw new Error(k + \" is required\");\n                }\n                else if ($id && !column.required && !dhk) {\n                    d[k] = column.defVal;\n                } else if (dhk && column.type == \"number\") {\n                    d[k] = Number(data[k]);\n                } else if (dhk) {\n                    d[k] = data[k];\n                }\n            }\n        }\n        this.close();\n        return d;\n    }\n\n    insert(tableName: string, data: any) {\n        this.open();\n        if (!Object.prototype.hasOwnProperty.call(this.db.tables, tableName) || !isObject(data))\n        {\n            this.close();\n            return false;\n        }\n            \n        const table = this.db.tables[tableName];\n        let $id = table.autoIncrement +1;\n\n        let d = this.parseColumnData(tableName, data, $id);\n        if(d){\n            table.data.push(d);\n            table.autoIncrement++;\n            this.storage.set(this.key, this.db);\n        }\n        this.close();\n        return true;\n\n    }\n\n    /**\n     * cập nhật dữ liệu \n     * @param {string} tableName tên bảng\n     * @param {object} data dữ liệu\n     * @param {function|object} condition diều kiện\n     * @returns {integer}\n     */\n    update(tableName: string, data: any, condition?: any) {\n        this.open();\n        if (!Object.prototype.hasOwnProperty.call(this.db.tables, tableName) || !isObject(data)){\n            this.close();\n            return 0;\n        }\n            \n        const table = this.db.tables[tableName];\n        var d: any = this.parseColumnData(tableName, data, 0);\n        if (!d){\n            this.close();\n            return 0;\n        }\n        var count = 0;\n        if (!condition) {\n            table.data.map(function (row) {\n                for (const k in d) {\n                    if (Object.prototype.hasOwnProperty.call(d, k)) {\n                        const v = d[k];\n                        row[k] = v;\n                    }\n                }\n                count++;\n            });\n        }\n        else if (isObject(condition) && !isEmpty(condition)) {\n            table.data.map(function (row) {\n                var s = true;\n                for (var key in condition) {\n                    if (Object.hasOwnProperty.call(condition, key)) {\n                        if (!Object.hasOwnProperty.call(row, key)) s = false;\n                        if (isFunction(condition[key])) {\n                            if (!condition[key](row[key])) s = false;\n                        }\n                        else if (row[key] != condition[key]) s = false;\n                    }\n                }\n                if (s) {\n                    for (const k in d) {\n                        if (Object.prototype.hasOwnProperty.call(d, k)) {\n                            const v = d[k];\n                            row[k] = v;\n                        }\n                    }\n                    count++;\n                }\n            });\n        }\n        else if (isFunction(condition)) {\n            table.data.map(function (row) {\n                var s = condition(assignValue({}, row));\n                if (s) {\n                    for (const k in d) {\n                        if (Object.prototype.hasOwnProperty.call(d, k)) {\n                            const v = d[k];\n                            row[k] = v;\n                        }\n                    }\n                    count++;\n                }\n            });\n        }\n        this.storage.set(this.key, this.db);\n        this.close();\n        return count;\n    }\n\n    delete(tableName: string, condition?: any) {\n        this.open();\n        if (!Object.prototype.hasOwnProperty.call(this.db.tables, tableName)) {\n            return 0;\n        }\n        const table = this.db.tables[tableName];\n       var count = 0;\n        if (!condition) {\n            count = table.data.length;\n            table.data.splice(0);\n        }\n        else if (isObject(condition) && !isEmpty(condition)) {\n            var i = 0;\n            while (i < table.data.length) {\n                var s = true;\n                var row = table.data[i];\n                for (var key in condition) {\n                    if (Object.hasOwnProperty.call(condition, key)) {\n                        if (!Object.hasOwnProperty.call(row, key)) s = false;\n                        if (isFunction(condition[key])) {\n                            if (!condition[key](row[key])) s = false;\n                        }\n                        else if (row[key] != condition[key]) s = false;\n                    }\n                }\n                if (s) {\n                    table.data.splice(i, 1);\n                    count++;\n                } else {\n                    i++;\n                }\n            }\n        }\n        else if (isFunction(condition)) {\n            var i = 0;\n            while (i < table.data.length) {\n                var s = true;\n                var row = table.data[i];\n                s = condition(assignValue({}, row));\n                if (s) {\n                    table.data.splice(i, 1);\n                    count++;\n                } else {\n                    i++;\n                }\n            }\n        }\n        this.storage.set(this.key, this.db);\n        this.close();\n        return count;\n    }\n\n    /**\n    * lấy về dữ liệu\n    * @param tableName tên bảng\n    * @param columns danh sach cot\n    * @param condition dieu kien lay du lieu\n    * @param orderBy sap xep\n    * @param limit gioi han\n    * @returns \n    */\n    select(tableName: string, columns?: any, condition?: any, orderBy?: any, limit?: any): DbTableRow[] {\n        this.open();\n        if (!Object.prototype.hasOwnProperty.call(this.db.tables, tableName)) {\n            this.close();\n            return [];\n        }\n        const table = this.db.tables[tableName];\n\n        var maskTable = null;\n        var m = null;\n\n        var isN = isInteger(limit) && limit > 0;\n        // var count = 0;\n        var raw = [];\n        var results = [];\n        var selectColumns: any = '*';\n        if (!columns || columns == '*') {\n            // ko lam gi\n        }\n        else {\n            selectColumns = [];\n\n            if (isString(columns)) {\n                var ca = columns.split(\",\").map(function (a) {\n                    return a.trim();\n                }).filter(function (t) {\n                    return t.length > 0;\n                }).map(function (t) {\n                    var a = t.split(\" \").filter(function (v) {\n                        return v.length > 0\n                    });\n                    if (a.length == 3 && a[1].toLowerCase() == \"as\") {\n                        return [a[0], a[2]];\n                    }\n                    return a;\n                }).filter(function (a) {\n                    return a.length > 0;\n                }).map(function (a) {\n                    if (Object.prototype.hasOwnProperty.call(table.config, a[0])) {\n                        selectColumns.push(a);\n                    }\n                });\n            }\n            else if (isArray(columns) && columns.length) {\n                columns.map(function (t) {\n                    var a = t.split(\" \").filter(function (v) {\n                        return v.length > 0\n                    });\n                    if (a.length == 3 && a[1].toLowerCase() == \"as\") {\n                        return [a[0], a[2]];\n                    }\n                    return a;\n                }).filter(function (a) {\n                    return a.length > 0;\n                }).map(function (a) {\n                    if (Object.prototype.hasOwnProperty.call(table.config, a[0])) {\n                        selectColumns.push(a);\n                    }\n                });\n            }\n        }\n        var isCondFunc = isFunction(condition);\n        var isCondObj = isObject(condition);\n        if (!condition) {\n            // count = this.data.length;\n            table.data.map(function (row) {\n                raw.push(assignValue({}, row));\n            });\n        }\n        else if (isCondFunc || isCondObj) {\n            var masks = [];\n            var types = {};\n            var cfg = table.config;\n            if (selectColumns != \"*\") {\n                selectColumns.map(function (a) {\n                    if(objectHasKey(cfg, a[0])){\n                        types[a[0]] = cfg[a[0]].type;\n                        if(a.length > 1){\n                            types[a[1]] = cfg[a[0]].type;\n                        }\n                    }\n                    masks.push({\n                        column: a[0],\n                        mask: a.length > 1 ? a[1] : null\n                    });\n                })\n            }\n            else {\n                for (var key in table.config) {\n                    if (Object.hasOwnProperty.call(table.config, key)) {\n                        var col = table.config[key];\n                        types[key] = col.type;\n                        masks.push({\n                            column: col.name,\n                            mask: null\n                        });\n                    }\n                }\n            }\n\n            table.data.map(function (row) {\n                var b = assignValue({}, row);\n                masks.map(function (c) {\n                    if (c.mask) {\n                        b[c.mask] = b[c.column];\n                    }\n                });\n                if (isCondFunc) {\n                    var whereStt = condition(b);\n                    if (whereStt === true) {\n                        raw.push(b);\n                    }\n                } else if (isCondObj) {\n                    var s = true;\n                    for (const key in condition) {\n                        if (Object.hasOwnProperty.call(condition, key)) {\n                            const vl = condition[key];\n                            if (isFunction(vl)) {\n                                if (!vl(b[key])) s = false;\n                            }\n                            else if(objectHasKey(types, key) && types[key] != \"array\" && isArray(vl)){\n                                if(!inArray(vl, b[key])){\n                                    s = false;\n                                }\n                            }\n                            else if (b[key] != vl) {\n                                s = false;\n                            }\n                        }\n                    }\n                    if (s) {\n                        raw.push(b);\n                    }\n                }\n            })\n        }\n\n        if (raw.length) {\n            if (isObject(orderBy) && !isEmpty(orderBy)) {\n                var orderByList = [];\n                for (var key in orderBy) {\n                    if (Object.hasOwnProperty.call(orderBy, key)) {\n                        var type = String(orderBy[key]).toLowerCase();\n                        if (Object.hasOwnProperty.call(raw[0], key) && inArray(['asc', 'desc', 1, 0], type)) {\n                            orderByList.push({\n                                key: key,\n                                type: type\n                            })\n                        }\n\n                    }\n                }\n                for (var i = 0; i < orderByList.length; i++) {\n                    var order = orderByList[i];\n\n                    if (i == 0) {\n                        for (var j = 0; j < raw.length - 1; j++) {\n                            for (var k = j + 1; k < raw.length; k++) {\n                                var a = Str.compare(raw[j][order.key], raw[k][order.key]);\n                                // console.log(`${raw[j][order.key]} <> ${raw[k][order.key]}`, a)\n                                if (order.type == 'desc') {\n                                    if (a == -1) {\n                                        var t = raw[j];\n                                        raw[j] = raw[k];\n                                        raw[k] = t;\n                                    }\n                                } else if (a == 1) {\n                                    var t = raw[j];\n                                    raw[j] = raw[k];\n                                    raw[k] = t;\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        for (var j = 0; j < raw.length - 1; j++) {\n                            for (var k = j + 1; k < raw.length; k++) {\n                                var s = true;\n                                for (var l = 0; l < i; l++) {\n                                    var o = orderByList[l];\n\n                                    if (raw[j] == raw[k] || raw[j][o.key] != raw[k][o.key]) {\n                                        s = false;\n                                    }\n\n                                }\n                                if (s) {\n                                    var a = Str.compare(raw[j][order.key], raw[k][order.key]);\n                                    if (order.type == 'desc') {\n                                        if (a == -1) {\n                                            var t = raw[j];\n                                            raw[j] = raw[k];\n                                            raw[k] = t;\n                                        }\n                                    } else if (a == 1) {\n                                        var t = raw[j];\n                                        raw[j] = raw[k];\n                                        raw[k] = t;\n                                    }\n                                }\n\n                            }\n                        }\n                    }\n                }\n            }\n            if (isN) {\n                results = raw.slice(0, limit);\n            }\n            else {\n                results = raw;\n            }\n        }\n        if (selectColumns != \"*\") {\n            var rs = results.map(function (row) {\n                var obj = {};\n                for (var i = 0; i < selectColumns.length; i++) {\n                    var col = selectColumns[i];\n                    if (col[1]) {\n                        obj[col[1]] = row[col[0]];\n                    }\n                }\n                return obj;\n            }) as DbTableRow[];\n            this.close();\n            return rs;\n        }\n        this.close();\n        return results;\n    }\n    getLastInsertID(table: string): number {\n        this.open();\n        var count = Object.prototype.hasOwnProperty.call(this.db.tables, table) ? this.db.tables[table].autoIncrement : 0;\n        this.close();\n        return count;\n    }\n\n    getLastRecord(tableName) {\n        this.open();\n        if (!Object.prototype.hasOwnProperty.call(this.db.tables, tableName)) {\n            this.close();\n            return null;\n        }\n        const table = this.db.tables[tableName];\n        const rs = table.data.length ? table.data[table.data.length - 1] : null;\n        this.close();\n        return rs;\n\n    }\n\n}\n","import { Component, Output, EventEmitter, OnDestroy, OnInit, Input, ChangeDetectorRef } from '@angular/core';\r\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\r\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\r\nimport { assignValue, assignWithout, isArray, isObject } from '@app/_core/helpers/utils';\r\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\r\nimport { CategoryModel, CategoryResultsModel } from '@app/_store/category';\r\nimport { ItemModel, ItemService, ItemTableService } from '@app/_store/item';\r\nimport { ItemResultsModel } from '@app/_store/item/results.model';\r\n\r\n\r\n@Component({\r\n    selector: 'app-tab-model',\r\n    templateUrl: './tab-model.component.html',\r\n    styleUrls: ['./tab-model.component.scss'],\r\n})\r\nexport class TabModelComponent extends BaseComponent implements OnInit, OnDestroy {\r\n    @Output()\r\n    clickItem: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Input()\r\n    loaded: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output()\r\n    loadedChange: EventEmitter<any> = new EventEmitter();\r\n\r\n    mode: string = \"explore\";\r\n\r\n    searchStatus: string = 'ready';\r\n\r\n    categories: CategoryModel[] = [];\r\n\r\n    searchResults: ItemModel[] = [];\r\n\r\n    q = {\r\n        s: null,\r\n        category_id: \"\",\r\n    };\r\n\r\n\r\n    isSearching: boolean = false;\r\n\r\n    hasMoreResult: boolean = false;\r\n    \r\n    hasMoreCategories: boolean = true;\r\n\r\n    searchData: ItemResultsModel = null;\r\n\r\n    categoryData: CategoryResultsModel = null;\r\n\r\n\r\n    hasResult: boolean = false;\r\n    app: AppEditorService;\r\n    constructor(\r\n        private itemService: ItemService,\r\n        // private itemTable: ItemTableService,\r\n        private events: AppEditorEventService,\r\n        private cd: ChangeDetectorRef\r\n    ) {\r\n        super();\r\n    }\r\n\r\n    onInit(): void {\r\n        if (this.mode == \"explore\") {\r\n            this.explore();\r\n        } else {\r\n            this.search();\r\n        }\r\n    }\r\n\r\n    onDestroy() {\r\n\r\n\r\n    }\r\n\r\n    explore() {\r\n        // this.subEvents.emit(\"component.checkchange\");\r\n        this.refresh(1);\r\n        this.itemService.getByCategories({}).subscribe(rs => {\r\n            this.categoryData = rs;\r\n            this.hasMoreCategories = rs.current_page < rs.page_total;\r\n            if (rs.status) {\r\n                this.categories = rs.data;\r\n\r\n                if (rs.data.length) {\r\n                    rs.data.map(cate => this.parseItemList(cate.items));\r\n                }\r\n                // this.subEvents.emit(\"component.checkchange\");\r\n                // this.cd.checkNoChanges();\r\n            }\r\n            this.refresh(20);\r\n        })\r\n    }\r\n\r\n    search() {\r\n        this.searchStatus = 'searching';\r\n        this.searchResults.splice(0);\r\n        // this.subEvents.emit(\"component.checkchange\");\r\n        this.refresh(20);\r\n        this.itemService.getAll(this.q).subscribe(rs => {\r\n            this.searchData = rs;\r\n            this.hasMoreResult = rs.current_page < rs.page_total;\r\n            if (rs.count > 0) {\r\n                this.searchResults = rs.data;\r\n                this.parseItemList(this.searchResults);\r\n                this.searchStatus = 'done';\r\n                this.refresh(50);\r\n            } else {\r\n                this.searchStatus = 'notfound';\r\n                this.refresh(50);\r\n            }\r\n            // this.cd.checkNoChanges();\r\n            // this.subEvents.emit(\"component.checkchange\");\r\n\r\n        }, error => {\r\n            this.searchStatus = 'error';\r\n\r\n            // this.subEvents.emit(\"component.checkchange\");\r\n            this.refresh(20);\r\n            // this.cd.checkNoChanges();\r\n        });\r\n    }\r\n\r\n    moreCategory(){\r\n        if(this.hasMoreCategories){\r\n            this.itemService.getByCategories({page: this.categoryData.current_page+1}).subscribe(rs => {\r\n                this.categoryData = rs;\r\n                this.hasMoreCategories = rs.current_page < rs.page_total;\r\n                if (rs.status) {\r\n                    \r\n                    if (rs.data.length) {\r\n                        rs.data.map(cate => this.parseItemList(cate.items));\r\n                    }\r\n                    rs.data.map(cate => {\r\n                        this.categories.push(cate);\r\n                    });\r\n                    // this.subEvents.emit(\"component.checkchange\");\r\n                    this.refresh(20);\r\n                    // this.cd.checkNoChanges();\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    moreResult(){\r\n        let a = assignValue({}, this.q);\r\n        a.page = this.searchData.current_page+1;\r\n        this.itemService.getAll(a.page).subscribe(rs => {\r\n            this.searchData = rs;\r\n            this.hasMoreResult = rs.current_page < rs.page_total;\r\n            if (rs.count > 0) {\r\n                rs.data.map(item => this.searchResults.push(item));\r\n                this.parseItemList(rs.data);\r\n                this.searchStatus = 'done';\r\n            } else {\r\n                // this.searchStatus = 'notfound';\r\n            }\r\n            this.refresh(20);\r\n            // this.cd.checkNoChanges();\r\n            // this.subEvents.emit(\"component.checkchange\");\r\n\r\n        }, error => {\r\n            // this.searchStatus = 'error';\r\n            this.refresh(20);\r\n            // this.subEvents.emit(\"component.checkchange\");\r\n            // this.cd.checkNoChanges();\r\n        });\r\n    }\r\n\r\n    parseItemList(list) {\r\n        if (isArray(list)) {\r\n            list.map(item => this.parseItem(item));\r\n        }\r\n    }\r\n    parseItem(item) {\r\n        if (isObject(item)) {\r\n            // var rs = this.itemTable.first('*', { id: item.id });\r\n            // if (rs) {\r\n            //     assignWithout(item, rs, ['id', 'settings']);\r\n            //     item.settings = rs.settings;\r\n            // }\r\n        }\r\n    }\r\n\r\n    onClickSearch() {\r\n        if (String(this.q.s).length) {\r\n            this.mode = \"search\";\r\n            this.search();\r\n        } else if (this.mode == \"search\") {\r\n            this.mode = \"explore\";\r\n            this.refresh(20);\r\n        }\r\n    }\r\n\r\n    onLayoutComplete({ isLayout, endLoading }) {\r\n        if (!isLayout) {\r\n            endLoading();\r\n        }\r\n    }\r\n\r\n    // getFileUrl(files) {\r\n    //   const file = files.find((f) => f.quanlity === EMediaFileQuanlity.screen);\r\n    //   return (file && file.url) || '';\r\n    // }\r\n\r\n}","<div class=\"tab-inner\">\r\n    <div class=\"block search\">\r\n        <div class=\"search-inner\">\r\n            <nz-input-group nzSearch [nzSuffix]=\"suffixIconSearch\">\r\n                <input type=\"text\" nz-input placeholder=\"Find in 1.000.000 items\" [(ngModel)]=\"q.s\" />\r\n            </nz-input-group>\r\n            <ng-template #suffixIconSearch>\r\n                <button nz-button nzType=\"link\" (click)=\"onClickSearch()\">\r\n                    <em nz-icon nzType=\"search\"></em>\r\n                </button>\r\n            </ng-template>\r\n        </div>\r\n    </div>\r\n    <div class=\"store\" *ngIf=\"__show__\">\r\n        <ng-container *ngIf=\"mode=='explore'; then thenTemplate; else elseTemplate\"></ng-container>\r\n        <ng-template #thenTemplate>\r\n            <div *ngFor=\"let cate of categories; let i=index\" class=\"cate-item\">\r\n                <model-list [items]=\"cate.items\" [title]=\"cate.name\"></model-list>\r\n            </div>\r\n            <div class=\"view-more\" *ngIf=\"hasMoreCategories\">\r\n                <button class=\"btn btn-ghost btn-icon\" nz-button nzType=\"text\" (click)=\"moreCategory()\">\r\n                    <!-- <img src=\"/assets/icons/new-design/header/save.svg\" /> -->\r\n                    <span>See More...</span>\r\n                </button>\r\n            </div>\r\n        </ng-template>\r\n        <ng-template #elseTemplate>\r\n\r\n            <ng-container [ngSwitch]=\"searchStatus\">\r\n                <div *ngSwitchCase=\"'done'\">\r\n                    <model-list [items]=\"searchResults\" title=\"Tất cả\"></model-list>\r\n                    <div class=\"view-more\" *ngIf=\"hasMoreCategories\">\r\n                        <button class=\"btn btn-ghost btn-icon\" nz-button nzType=\"text\" (click)=\"moreCategory()\">\r\n                            <!-- <img src=\"/assets/icons/new-design/header/save.svg\" /> -->\r\n                            <span>See More...</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div *ngSwitchCase=\"'notfound'\">\r\n                    {{\"Not Found\" | translate}}\r\n                </div>\r\n                <div *ngSwitchCase=\"'error'\">\r\n                    {{\"Error\" | translate}}\r\n                </div>\r\n                <div *ngSwitchDefault>\r\n                    {{\"searching...\" | translate}}\r\n                </div>\r\n\r\n\r\n            </ng-container>\r\n\r\n        </ng-template>\r\n    </div>\r\n</div>","import { Component, Output, EventEmitter, OnDestroy, OnInit, Input } from '@angular/core';\nimport { Geometries } from '@app/_3D/libs/three.libs';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { inArray, isEmpty, Str } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { MeshGeometryService } from '@app/_shared/components/panels/mesh-geometry/mesh-geometry.service';\n\n@Component({\n    selector: 'app-tab-geometry',\n    templateUrl: './tab-geometry.component.html',\n    styleUrls: ['./tab-geometry.component.scss']\n})\nexport class TabGeometryComponent extends BaseComponent implements OnInit, OnDestroy {\n    geometries: any[] = Geometries.config.options;\n\n    constructor(private geoService: MeshGeometryService, private events: AppEditorEventService) {\n        super();\n        \n    }\n    onChangeSubEvents(){\n        this.registerEventService(this.subEvents, \"geometry.added\", e => this.onAddSuccess(e.data));\n    }\n    initFirst(){\n        \n    }\n\n\n    onAddSuccess(data) {\n        if(!this.isFocus) return false;\n        this.geoService.open(data, e => {\n            let d: any = {};\n            if (inArray(['props', 'geometry', 'material'], e.key)) {\n                d[e.key] = e.data[e.key];\n                switch (e.key) {\n                    case \"props\":\n\n                        break;\n                    case \"geometry\":\n\n                        break;\n\n                    case \"material\":\n\n                        break;\n\n\n                    default:\n                        break;\n                }\n                this.subEvents.emit({\n                    type: \"mesh.setting.update\",\n                    secret_key: data.secret_key,\n                    data: d\n                });\n            }\n\n        });\n\n    }\n}\n","<div class=\"tab-inner\">\n    <h2>Geometry</h2>\n    <div class=\"store store-text\">\n        <geometry-item [geometry]=\"geo\" *ngFor=\"let geo of geometries\"></geometry-item>\n    </div>\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { AuthRoutingModule, COMPONENTS } from './auth-routing.module';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { reducer, AuthEffects } from './store';\r\n\r\nimport { AuthComponent } from './auth.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { SharedModule } from '../_shared/shared.module';\r\nimport { AppUIModule } from '../app-ui.module';\r\n\r\n@NgModule({\r\n  declarations: [AuthComponent, ...COMPONENTS],\r\n  imports: [\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    CommonModule,\r\n    AuthRoutingModule,\r\n    SharedModule,\r\n    AppUIModule,\r\n    EffectsModule.forFeature([AuthEffects]),\r\n    StoreModule.forFeature('authStore', reducer),\r\n  ],\r\n  providers: [],\r\n})\r\nexport class AuthModule {}\r\n","import { Injectable } from '@angular/core';\nimport { date, getArguments, isBoolean, isEmpty, isFunction, isObject, isString, objectHasKey, Str } from '@app/_core/helpers/utils';\nconst DEFAULT_VALUE = Str.rand(Str.rand(date('ms')));\n\ntype EventEmit = {\n    type: string,\n    data?: any,\n    [key: string]: any\n}\ntype Listener = (event?: EventEmit) => any\n\n\ntype OnEventListener = {\n    [event: string]: (Listener | string)\n}\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class EventManagerService {\n    [prop:string]: any;\n    app: any;\n    _listeners = {};\n    _dispatchedEvents = {};\n    __subServices: {\n        [id:string]: EventManagerService\n    } = {};\n    constructor() { }\n\n    sub(id?:string): this{\n        return this;\n        if(objectHasKey(this.__subServices, id)) return this.__subServices[id] as any;\n        this.__subServices[id] = new (<typeof EventManagerService> this.constructor);\n        return this.__subServices[id] as any;\n    }\n\n    addSub(id: string, sub?: EventManagerService){\n        if(!sub){\n            if(objectHasKey(this.__subServices, id)){\n                this.__subServices[id].off();\n            }\n            this.__subServices[id] = new this.prototype.constructor();\n        }else{\n            if(objectHasKey(this.__subServices, id)){\n                this.__subServices[id].off();\n            }\n            this.__subServices[id] = sub;\n        }\n    }\n    removeSub(id?:string){\n        if(id!==undefined && String(id).length){\n            if(objectHasKey(this.__subServices, id)){\n                this.__subServices[id].off();\n                delete this.__subServices[id];\n            }\n        }else if(!isEmpty(this.__subServices)){\n            for (const key in this.__subServices) {\n                if (Object.prototype.hasOwnProperty.call(this.__subServices, key)) {\n                    this.removeSub(key);\n                    \n                }\n            }\n        }\n    }\n    onSub(id:string, type:any, listenner?:any, dispatch?:any){\n        return this.on(type, listenner, dispatch);\n        // return this.sub(id).on(type, listenner, dispatch)\n    }\n    offSub(id:string, type:any, listenner?:any){\n        return this.off(type, listenner);\n        // return this.sub(id).off(type, listenner)\n    }\n    addSubEvent(id:string, type:any, listenner?:any, dispatch?:any){\n        return this.addEventListener(type, listenner, dispatch);\n        // return this.sub(id).addEventListener(type, listenner, dispatch);\n    }\n    removeSubEvent(id:string, type:any, listenner?:any){\n        return this.sub(id).removeEventListener(type, listenner);\n    }\n    emitSub(id:string, type:any, listenner?:any, dispatch?:any){\n        return this.emit(type, listenner, dispatch);\n        // return this.sub(id).emit(type, listenner, dispatch);\n    }\n    \n\n\n    /**\n     * chuẩn hóa hàn lắng nghe sự kiện\n     * @param {string|function} handler tên phương thức hoạc hàm handler\n     * @returns function\n     */\n\n    parseEventHandler(handler: any): (...args: any[]) => any {\n        var self = this;\n        if (typeof handler == \"function\") {\n            return handler;\n        }\n        var fnt = handler ? handler : function (e) {\n            console.log(e);\n        };\n\n        if (typeof handler == \"string\") {\n            var params = [];\n            var handleParams = handler.split(\":\");\n            if (handleParams.length == 2) {\n                handler = handleParams[0];\n                params = handleParams[1].split(\",\").map(function (s) { return s.trim(); });\n\n            }\n\n            fnt = function (e) {\n                var args = [e];\n                params.map(function (p) { args.push(p); });\n\n                if (typeof self[handler] == \"function\") {\n                    return self[handler].apply(self, args);\n                }\n            };\n\n\n        }\n        return fnt;\n    }\n\n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} dispatch Thực thi trên tất cả các sự kiện trước đó\n     * @returns this\n     */\n    addEventListener(type: string, handler?: Listener, dispatch?: boolean) {\n        var self = this;\n        var listener = this.parseEventHandler(handler);\n        if(this.hasEventListener(type, handler)) return;\n        \n        if (this._listeners === undefined || this._listeners === null) this._listeners = {};\n\n        type = String(type).toLowerCase();\n\n\n\n        // if (isDomEvent(type)) return this.addDomEvent(type, listener, DEFAULT_VALUE);\n        const listeners = this._listeners;\n\n        if (listeners[type] === undefined) {\n\n            listeners[type] = [];\n\n        }\n        if (dispatch === true) {\n            this.handleDispatchedEvents(type, listener);\n        }\n\n        if (listeners[type].indexOf(listener) === - 1) {\n            listeners[type].push(listener);\n        }\n        return listener;\n    }\n\n    /**\n     * Kiểm tra sự kiện có tồn tại hay không\n     * @param {string} type tên sự kiện\n     * @param {function} listener hàm xử lý\n     * @returns {boolean}\n     */\n    hasEventListener(type: string, listener?: Listener): boolean {\n\n        if (this._listeners === undefined || this._listeners === null) return false;\n\n        const listeners = this._listeners;\n        type = String(type).toLowerCase();\n        return listeners[type] !== undefined && (listener ? listeners[type].indexOf(listener) !== - 1 : true);\n\n    }\n\n    /**\n     * Xóa / Gỡ sự kiện\n     * @param {string} type tên sự kiện\n     * @param {function} listener hàm xử lý\n     * @returns {boolean}\n     */\n    removeEventListener(type: string, listener?: Listener): boolean {\n        if (this._listeners === undefined || this._listeners === null) return false;\n        type = String(type).toLowerCase();\n        const listeners = this._listeners;\n        const listenerArray = listeners[type];\n        if (listenerArray !== undefined) {\n            if (!listener) {\n                this._listeners[type].splice(0, this._listeners[type].length);\n                return true;\n            }\n            const index = listenerArray.indexOf(listener);\n            if (index !== - 1) {\n                listenerArray.splice(index, 1);\n                return true;\n            }\n        }\n        return false;\n    }\n\n\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @param {boolean} log lưu lại du lieu khi emit\n     * @returns {boolean}\n     */\n    dispatchEvent(event: (EventEmit | String), data?: any, log?: boolean): boolean {\n        if (this._listeners === undefined || this._listeners === null || !event) return null;\n\n        var e: any = {};\n        if (isString(event)) {\n            e.type = event;\n            if (data) {\n                e.data = data;\n            }\n            // console.log(event, data);\n        } else if (isObject(event)) {\n            e = event;\n            if (!e.type) return false;\n            if (!e.data && data) {\n                e.data = data;\n            }\n            if (isBoolean(data) && typeof log == \"undefined\") {\n                log = data;\n            }\n        }\n        else {\n            return false;\n        }\n        if(e.constructor === Object) e.type = String(e.type).toLowerCase();\n        const listeners = this._listeners;\n        const listenerArray = listeners[e.type];\n        var s = true;\n        if (!e.target) {\n            e.target = this;\n        }\n\n        if (!e.stopImmediatePropagation)\n            e.stopImmediatePropagation = function () {\n                s = false;\n            };\n\n        if (log === true) {\n            this.addDispatchedEvent(e);\n        }\n\n\n        if (listenerArray !== undefined) {\n            // Make a copy, in case listeners are removed while iterating.\n            const array1 = listenerArray.slice(0);\n            var rs: any[] = [];\n            for (var i = 0, l = array1.length; i < l; i++) {\n                let a = array1[i].call(this, e);\n                if (!s) break;\n                if (a !== undefined) {\n                    rs.push(a)\n                }\n\n            }\n            if (s && rs.length) {\n                return rs.length == 1 && array1.length == 1 ? rs[0] : rs;\n            }\n            return s;\n        }\n\n    }\n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} listener hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} dispatch có cần cần gọi ham voi cac su kien truoc do hay ko\n     * @returns this\n     */\n    on(type: (OnEventListener | string), listener?: Listener | boolean, dispatch?: boolean) {\n        if (isObject(type)) {\n            var listeners = {};\n            const events: OnEventListener = type as OnEventListener;\n            var d: boolean = isBoolean(listener) ? listener as boolean : (isBoolean(dispatch) ? dispatch : false);\n            for (const key in events) {\n                if (Object.hasOwnProperty.call(events, key)) {\n                    const fn = type[key];\n                    if (isFunction(fn) || isString(fn)) {\n                        const fnAdded = this.addEventListener(key, fn, d);\n                        if (fnAdded) {\n                            listeners[key] = fnAdded;\n                        }\n                    }\n                }\n            }\n            return listeners;\n        }\n        return this.addEventListener(type as string, listener as Listener, dispatch);\n    }\n    /**\n     * lắng nghe sự kiện\n     * @param {string} type loại hoạc tên sự kiện\n     * @param {function|string} listener hàm hoặc tên phương thức xử lý sự kiện\n     * @param {boolean} dispatch có cần cần gọi ham voi cac su kien truoc do hay ko\n     * @returns this\n     */\n    subcribe(type: (OnEventListener | string), listener?: Listener, dispatch?: boolean) {\n        return this.on(type, listener, dispatch);\n    }\n\n    off(type?: any, listener?: Listener) {\n        if(isObject(type)){\n            for (const key in type) {\n                if (Object.prototype.hasOwnProperty.call(type, key)) {\n                    const fn = type[key];\n                    this.removeEventListener(key,fn);\n                }\n            }\n            return this;\n        }\n        return this.removeEventListener(type, listener);\n    }\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @returns {boolean}\n     */\n    emit(event: (EventEmit | String), data?: any, log?: boolean): boolean {\n        return this.dispatchEvent.apply(this, getArguments(arguments));\n    }\n    /**\n     * Tạo, gọi ra một sự kiện\n     * @param {string|object} event Tên hoặc sự kiện\n     * @param {*} data dữ liệu\n     * @returns {boolean}\n     */\n    trigger(event: (EventEmit | String), data?: any, log?: boolean): boolean {\n        return this.dispatchEvent.apply(this, getArguments(arguments));\n    }\n\n    addDispatchedEvent(event: EventEmit) {\n        if (this._dispatchedEvents[event.type] === undefined) this._dispatchedEvents[event.type] = [];\n        this._dispatchedEvents[event.type].push(event);\n        // console.log(event.type, this._pendingListeners[event.type])\n        return this\n    }\n\n    handleDispatchedEvents(type: string, handler: Listener) {\n        var listenerArray = this._dispatchedEvents[type];\n        // console.log(type, this._pendingListeners[type], this);\n        if (listenerArray !== undefined) {\n\n\n            // console.log(type)\n            // Make a copy, in case listeners are removed while iterating.\n            const array = listenerArray.slice(0);\n\n            for (var i = 0, l = array.length; i < l; i++) {\n                // array[i].call(this, e);\n                var s = handler.call(this, array[i]);\n                if (s === false) {\n                    return s;\n                }\n\n            }\n        }\n    }\n\n}\n","import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@app/_core/services/http.service';\r\nimport { Observable } from 'rxjs';\r\nimport { CategoryResultsModel } from '../category';\r\n\r\nimport { TemplateModel } from './model';\r\nimport { TemplateResultModel, TemplateResultsModel } from './results.model';\r\n\r\nconst API_CUSTOMERS_URL = 'templates';\r\n\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class TemplateService {\r\n    results: TemplateResultsModel;\r\n\r\n    constructor(private httpService: HttpService) { }\r\n\r\n\r\n\r\n    getAll(params: {}): Observable<TemplateResultsModel> {\r\n        return this.httpService.get(API_CUSTOMERS_URL + \"/list\", params);\r\n    }\r\n\r\n    // get(key): Observable<TemplateResultModel> {\r\n    //   return this.httpService.get(`${API_CUSTOMERS_URL}/${key}.json`);\r\n    // }\r\n\r\n    get(key): Observable<TemplateModel> {\r\n        return this.httpService.get(`${API_CUSTOMERS_URL}/detail/${key}`);\r\n    }\r\n\r\n    getByCategories(params: {}): Observable<CategoryResultsModel> {\r\n        return this.httpService.get(API_CUSTOMERS_URL + \"/categories\", params);\r\n    }\r\n    create(model: TemplateModel): Observable<TemplateResultModel> {\r\n        return this.httpService.post(API_CUSTOMERS_URL + \"/create\", model);\r\n    }\r\n\r\n    update(model: TemplateModel): Observable<TemplateResultModel> {\r\n        const key = model.id;\r\n        // return this.httpService.patch(`${API_CUSTOMERS_URL}/${key}.json`, model);\r\n        // return this.httpService.patch(`${API_CUSTOMERS_URL}/actions.json`, model);\r\n        return this.httpService.put(`${API_CUSTOMERS_URL}/update/${key}`, model);\r\n    }\r\n\r\n\r\n    updateThumbnail(model: TemplateModel): Observable<TemplateResultModel> {\r\n        const key = model.id;\r\n        // return this.httpService.patch(`${API_CUSTOMERS_URL}/${key}.json`, model);\r\n        // return this.httpService.patch(`${API_CUSTOMERS_URL}/actions.json`, model);\r\n        return this.httpService.put(`${API_CUSTOMERS_URL}/thumbnail/${key}`, model);\r\n    }\r\n\r\n\r\n\r\n    delete(key): Observable<TemplateResultModel> {\r\n        // return this.httpService.delete(`${API_CUSTOMERS_URL}/${key}`);\r\n        return this.httpService.delete(`${API_CUSTOMERS_URL}/delete/${key}`);\r\n    }\r\n\r\n    search(query: { tag?: string; key?: string; collectionCode?: string }) {\r\n        return this.httpService.get(`${API_CUSTOMERS_URL}/list`, query);\r\n    }\r\n\r\n    searchNounProject(query: { tag?: string; key?: string; collectionCode?: string }) {\r\n        return this.httpService.get(`${API_CUSTOMERS_URL}/search/nounproject`, query);\r\n    }\r\n\r\n    render(params) {\r\n        return this.httpService.download(`Templates/render`, params);\r\n    }\r\n\r\n    getTemplateData(url) {\r\n        return this.httpService.getOut(url);\r\n    }\r\n\r\n    useTemplate(TemplateId): Observable<TemplateResultModel> {\r\n        return this.httpService.post(`${API_CUSTOMERS_URL}/${TemplateId}/use`, {}, false);\r\n    }\r\n}\r\n","import { NgModule, APP_INITIALIZER } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { HTTP_INTERCEPTORS, HttpClient } from '@angular/common/http';\r\nimport { JwtInterceptor, ErrorInterceptor } from '@app/_core/interceptors';\r\nimport { services, StartupService } from '@app/_core/services';\r\n\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\n\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { reducers, metaReducers } from './_store';\r\nimport { AuthModule } from './auth/auth.module';\r\nimport { AppUIModule } from './app-ui.module';\r\nimport { AppRoutingModule } from './app-routing.module';\r\n\r\nimport { NgxOneSignalModule } from 'ngx-onesignal-plus';\r\n\r\nimport { SharedModule } from './_shared/shared.module';\r\n\r\nimport en from '@angular/common/locales/en';\r\nimport { registerLocaleData } from '@angular/common';\r\nimport { environment } from '../environments/environment';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { SHARE_SERVICES } from './_shared/shared-services';\r\n\r\nregisterLocaleData(en);\r\n\r\nexport function I18nHttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http, `assets/data/i18n/`, '.json');\r\n}\r\n\r\nexport function StartupServiceFactory(startupService: StartupService) {\r\n  return () => startupService.load();\r\n}\r\n\r\nconst APPINIT_PROVIDES = [\r\n  StartupService,\r\n  {\r\n    provide: APP_INITIALIZER,\r\n    useFactory: StartupServiceFactory,\r\n    deps: [StartupService],\r\n    multi: true,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  declarations: [AppComponent],\r\n  imports: [\r\n    CommonModule,\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    BrowserAnimationsModule,\r\n    AppUIModule,\r\n    AuthModule,\r\n    SharedModule,\r\n    BrowserAnimationsModule,\r\n\r\n    EffectsModule.forRoot([]),\r\n\r\n    StoreModule.forRoot(reducers, {\r\n      metaReducers,\r\n      runtimeChecks: {\r\n        strictStateImmutability: true,\r\n        strictActionImmutability: true,\r\n      },\r\n    }),\r\n\r\n    !environment.production ? StoreDevtoolsModule.instrument() : [],\r\n    TranslateModule.forRoot({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: I18nHttpLoaderFactory,\r\n        deps: [HttpClient],\r\n      },\r\n    }),\r\n    NgxOneSignalModule.forRoot({\r\n      appId: 'abc',\r\n      autoRegister: false,\r\n      autoResubscribe: false,\r\n\r\n      notificationClickHandlerMatch: 'exact',\r\n      notificationClickHandlerAction: 'navigate',\r\n      notifyButton: {\r\n        enable: true,\r\n      },\r\n    }),\r\n\r\n    ServiceWorkerModule.register('OneSignalSDKWorker.js', {\r\n      enabled: true,\r\n    }),\r\n  ],\r\n  providers: [\r\n    ...services,\r\n\r\n    { provide: HTTP_INTERCEPTORS, useClass: JwtInterceptor, multi: true },\r\n    { provide: HTTP_INTERCEPTORS, useClass: ErrorInterceptor, multi: true },\r\n    ...APPINIT_PROVIDES,\r\n    ...SHARE_SERVICES\r\n  ],\r\n  bootstrap: [AppComponent],\r\n  exports: [TranslateModule, RouterModule],\r\n})\r\nexport class AppModule {}\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\n\n@Component({\n  selector: 'tab-light-item',\n  templateUrl: './light-item.component.html',\n  styleUrls: ['./light-item.component.scss']\n})\nexport class LightItemComponent extends BaseComponent implements OnInit {\n  @Input() light: any;\n  @Output() clickLight = new EventEmitter<any>();\n  @Output() clickDelete = new EventEmitter<any>();\n  \n  ngOnInit(): void {\n  }\n\n  onClick(){\n    this.clickLight.emit(this.light.secret_key);\n  }\n\n  onClickDelete(){\n    this.clickDelete.emit(this.light.secret_key);\n  }\n\n}\n\n","<div class=\"text text-subheading\">\n    <div class=\"item-text\">\n        <div class=\"text-content\">\n            <div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\" class=\"light-group\">\n                <div nz-col class=\"gutter-row\" [nzSpan]=\"18\">\n                    <div class=\"inner-box light-name\" (click)=\"onClick()\">\n                        {{light.name}}\n                    </div>\n                </div>\n                <div nz-col class=\"gutter-row\" [nzSpan]=\"6\">\n                    <div class=\"inner-box text-right\">\n                        <div class=\"delete\" (click)=\"onClickDelete()\">\n                            <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","import { Injectable } from '@angular/core';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\nimport { AppEditorService } from './app-editor.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AppEditorEventService extends EventManagerService {\n    app: AppEditorService = null;\n    [prop: string]: any;\n    constructor() {\n        super();\n    }\n\n  \n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { BaseInputComponent } from '../base-input/base-input.component';\n\n@Component({\n  selector: 'inp-number',\n  templateUrl: './inp-number.component.html',\n  styleUrls: ['./inp-number.component.scss']\n})\nexport class InpNumberComponent extends BaseInputComponent implements OnInit {\n\n  @Input() step: number = 1;\n  @Input() max: number = 9999999999999999;\n  @Input() min: number =-9999999999999999;\n\n  @Input() spin: boolean = false;\n  \n\n  constructor() {\n    super()\n   }\n\n  ngOnInit(): void {\n  }\n\n  valChange(value){\n    this.onChange({value});\n  }\n}\n","<ng-container *ngIf=\"spin; then thenTemplate; else elseTemplate\"></ng-container>\n<ng-template #thenTemplate>\n    <nz-input-number \n    [name]=\"name\" \n    [nzMin]=\"min\" \n    [nzMax]=\"max\" \n    [nzStep]=\"step\" \n    [(ngModel)]=\"value\" \n    (ngModelChange)=\"valChange($event)\"\n></nz-input-number>    \n</ng-template>\n<ng-template #elseTemplate>\n    <nz-input-number \n    [name]=\"name\" \n    [(ngModel)]=\"value\" \n    (ngModelChange)=\"valChange($event)\"\n></nz-input-number>\n</ng-template>\n\n","import { assignValue, assignWithout, isObject, objectHasKey } from \"@app/_core/helpers/utils\";\r\nimport { parseParams } from \"../libs/props\";\r\nimport { FloorDefaultData } from \"../store/data.type\";\r\nimport * as THREELibs from 'three';\r\nconst THREE = THREELibs;\r\n\r\nexport const Floor = {\r\n    enableFloor: false,\r\n\r\n    aboveFloor: false,\r\n\r\n    dropbyPositionY: FloorDefaultData.props.position.y,\r\n\r\n\r\n    floorSettings: {},\r\n\r\n    floorObject: null,\r\n    boots: ['bootFloor'],\r\n    inits: ['initFloor'],\r\n    bootFloor: function () {\r\n        this.floorSettings = {}\r\n    },\r\n    initFloor: function () {\r\n        // this.floorSettings = assignValue({}, FloorDefaultData);\r\n        // assignValue(this.floorSettings, this.data.scene.floor);\r\n        this.on(\"scene.inited\", () => this.updateFloorSetting(this.data.scene.floor));\r\n        var self = this;\r\n        this.on(\"scene.settings.updated:floor\", function (e) {\r\n            self.updateFloorSetting(e.data);\r\n        })\r\n    },\r\n    updateFloorSetting: function (setting) {\r\n        if (objectHasKey(setting, 'enabled')) {\r\n            this.enableFloor = setting.enabled;\r\n        } else if (objectHasKey(setting, \"above\")) {\r\n            this.aboveFloor = setting.above;\r\n        }\r\n        else if (objectHasKey(setting, \"props\")) {\r\n            if (objectHasKey(setting, \"position\")) {\r\n                this.dropbyPositionY = setting.props.position.y;\r\n            }\r\n        }\r\n\r\n        assignValue(this.floorSettings, setting);\r\n\r\n        this.updateFloorObject(this.floorSettings);\r\n        \r\n        this.updateGridHelper();\r\n\r\n        // this.updateAxesHelper();\r\n\r\n    },\r\n\r\n    gridHelperObject: null,\r\n    updateGridHelper: function () {\r\n        if (this.env != \"production\") {\r\n            if (this.gridHelperObject) {\r\n                this.scene.remove(this.gridHelperObject)\r\n            }\r\n\r\n            if (!this.floorSettings.enableGrid) {\r\n                return;\r\n            }\r\n            const size = this.floorSettings.params.width;\r\n            const divisions = size < 10 ? 10 : size;\r\n\r\n            const gridHelper = new THREE.GridHelper(size, divisions);\r\n            gridHelper.position.y = this.floorSettings.props.position.y;\r\n            this.gridHelperObject = gridHelper;\r\n\r\n            this.scene.add(gridHelper);\r\n            this.refresh();\r\n        }\r\n    },\r\n    showGridHelper: function(){\r\n        if (this.gridHelperObject) {\r\n            this.scene.remove(this.gridHelperObject);\r\n            this.scene.add(this.gridHelperObject);\r\n        }\r\n    },\r\n    hideGridHelper: function(){\r\n        if (this.gridHelperObject) {\r\n            this.scene.remove(this.gridHelperObject);\r\n        }\r\n    },\r\n    \r\n    axesHelperObject: null,\r\n    updateAxesHelper: function () {\r\n        if (this.env != \"production\") {\r\n            if (this.axesHelperObject) {\r\n                this.scene.remove(this.axesHelperObject)\r\n            }\r\n\r\n            if (!this.floorSettings.enableAxes) {\r\n                return;\r\n            }\r\n            let ss = this.sceneSettings.size;\r\n            let min = ss.width;\r\n            if (ss.height < min) min = ss.height;\r\n            else if (ss.depth < min) min = ss.depth;\r\n\r\n            const axesHelper = new THREE.AxesHelper(min / 10);\r\n            axesHelper.position.y = this.floorSettings.props.position.y;;\r\n            this.axesHelperObject = axesHelper;\r\n\r\n            this.scene.add(axesHelper);\r\n\r\n\r\n            this.refresh();\r\n        }\r\n    },\r\n\r\n    showAxesHelper: function(){\r\n        if (this.axesHelperObject) {\r\n            this.scene.remove(this.axesHelperObject);\r\n            this.scene.add(this.axesHelperObject);\r\n        }\r\n    },\r\n    hideAxesHelper: function(){\r\n        if (this.axesHelperObject) {\r\n            this.scene.remove(this.axesHelperObject);\r\n        }\r\n    },\r\n    updateFloorObject: function (setting) {\r\n        let floorParams = {\r\n            geometry: setting.params,\r\n            material: setting.material,\r\n            props: setting.props\r\n        };\r\n        if (!this.floorObject) {\r\n            this.floorObject = this.Mesh.get(floorParams);\r\n        }\r\n        else {\r\n            this.floorObject.copy(this.Mesh.get(floorParams));\r\n        }\r\n        if (setting.enabled) {\r\n            if (this.floorObject && this.floorObject.isMesh) {\r\n                this.floorObject.rotation.x = -Math.PI / 2;\r\n                if (!this.floorObject.inScene) {\r\n                    this.scene.add(this.floorObject);\r\n                    this.floorObject.inScene = true;\r\n                }\r\n                this.refresh();\r\n            }\r\n\r\n        } else {\r\n            if (this.floorObject && this.floorObject.isMesh && this.floorObject.inScene) {\r\n                this.scene.remove(this.floorObject);\r\n                this.floorObject.inScene = false;\r\n                this.refresh();\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    floorStatus: false,\r\n\r\n    __floorObject: null,\r\n    addFloor: function (options: any) {\r\n        var self = this;\r\n        if (this.Loader.loadingCount) {\r\n            this.on('model.load.success', function (data) {\r\n                if (!self.Loader.loadingCount && !self.floorStatus) {\r\n                    self.addFloor(options);\r\n                }\r\n            });\r\n            return this;\r\n        }\r\n        this.floorStatus = true;\r\n        var option = isObject(options) ? options : {};\r\n        var params = parseParams(option.params || option, { type: \"circle\", radius : 0.5, segments : 50 });\r\n        if (params.type == 'square') params.type = \"planebuffer\";\r\n\r\n        if (!params.radius) params.radius = 0.5;\r\n\r\n\r\n        var materialOptions = {\r\n            type: \"physical\",\r\n            params: {\r\n                roughness: 0.8,\r\n                color: \"#d9d9d9\",\r\n                metalness: 0.2,\r\n                bumpScale: 0.5\r\n            },\r\n            props: {\r\n                transparent: true,\r\n                opacity: 0.8,\r\n                receiveShadow: true,\r\n            }\r\n        };\r\n        assignValue(materialOptions, option.material);\r\n        var props = assignWithout({}, option.props || option, ['rotation'], params);\r\n        var sceneSize = this.getSceneSize();\r\n        if (sceneSize.size.x/2 > params.radius) params.radius = sceneSize.size.x * 1.6;\r\n        if (sceneSize.size.z/2 > params.radius) params.radius = sceneSize.size.z * 1.6;\r\n\r\n        assignValue(props, {\r\n            receiveShadow: true,\r\n            position: {\r\n                y: sceneSize.min.y - 0.001\r\n            },\r\n            rotation: {\r\n                x: - Math.PI / 2\r\n            }\r\n        });\r\n\r\n        this.addMesh({\r\n            geometry: params,\r\n            material: materialOptions,\r\n            props: props\r\n        }, function (object) {\r\n            self.__floorObject = object;\r\n        });\r\n        // console.log(self.__floorObject);\r\n\r\n        this.on('scene.size.get.begin', function () {\r\n            if (self.floorStatus) {\r\n                let index = this.objects.indexOf(self.__floorObject);\r\n                if (index != -1) {\r\n                    self.objects.splice(index, 1);\r\n                }\r\n                self.scene.remove(self.__floorObject.object);\r\n            }\r\n        })\r\n        this.on('scene.size.get.end', function () {\r\n            if (self.floorStatus && self.__floorObject) {\r\n                self.scene.add(self.__floorObject.object);\r\n                let index = self.objects.indexOf(self.__floorObject);\r\n                if (index == -1) {\r\n                    self.objects.push(self.__floorObject);\r\n                }\r\n            }\r\n        })\r\n\r\n\r\n    },\r\n\r\n    updateFloor: function () {\r\n        if (!this.__floorObject) {\r\n            this.addFloor({});\r\n        } else {\r\n            var sceneSize = this.getSceneSize();\r\n            assignValue(this.__floorObject.object, {\r\n                position: {\r\n                    y: sceneSize.min.y - 0.0001\r\n                },\r\n                rotation: {\r\n                    x: - Math.PI / 2\r\n                }\r\n            });\r\n            var params = this.__floorObject.object.geometry.parameters\r\n\r\n            if (sceneSize.size.x/2 > params.radius) params.radius = sceneSize.size.x * 2;\r\n            if (sceneSize.size.z/2 > params.radius) params.radius = sceneSize.size.z * 2;\r\n            this.__floorObject.object.needsUpdate = true;\r\n\r\n        }\r\n        this.refresh();\r\n    },\r\n\r\n    removeFloor: function(){\r\n        this.scene.remove(this.__floorObject.object);\r\n    }\r\n}","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\n\n@Component({\n    selector: 'app-tab-project-setting',\n    templateUrl: './tab-project-setting.component.html',\n    styleUrls: ['./tab-project-setting.component.scss']\n})\nexport class TabProjectSettingComponent extends BaseComponent implements OnInit, OnDestroy {\n    \n}\n","<div class=\"tab-inner\">\n    <h2>{{ 'Settings' | translate }}</h2>\n    <nz-tabset nzTabPosition=\"top\" nzType=\"line\" class=\"sub-tab\">\n\n        <nz-tab [nzTitle]=\"iconInfo\">\n            <ng-template #iconInfo>\n                <img src=\"/assets/icons/new-design/tab-sub/info.svg\" alt=\"Info\" />\n                <div>Info</div>\n            </ng-template>\n            <app-tab-project-info class=\"tab-info\"></app-tab-project-info>\n        </nz-tab>\n\n        <!-- <nz-tab [nzTitle]=\"iconForeground\">\n          <ng-template #iconForeground>\n            <img src=\"/assets/icons/new-design/tab-sub/foreground.svg\" alt=\"Foreground\" />\n            <div>Foreground</div>\n          </ng-template>\n          <ng-template nz-tab>\n            <app-tab-foreground></app-tab-foreground>\n          </ng-template>\n        </nz-tab> -->\n\n    </nz-tabset>\n\n</div>","import { Component, ElementRef, Input, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { getTimeStamp } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { ItemModel } from '@app/_store/item';\n\n@Component({\n    selector: 'model-item',\n    templateUrl: './model-item.component.html',\n    styleUrls: ['./model-item.component.scss']\n})\nexport class ModelItemComponent extends BaseComponent implements OnInit {\n    @Input() item: ItemModel;\n    pos = {\n        x: 0,\n        y: 0\n    }\n    curTime = getTimeStamp();\n\n    constructor(\n        private elem: ElementRef,\n        private events: AppEditorEventService\n    ) {\n        super()\n    }\n    onInit(){}\n\n    onPointerDown(event){\n        this.onDragStart(event)\n    }\n\n    onPointerUp(event){\n        let ct = getTimeStamp();\n        if(event.clientX == this.pos.x && event.clientY == this.pos.y && ct - this.curTime <= 300){\n            let evt = {\n                type: \"item.dropcenter\",\n                clientX: event.clientX,\n                clientY: event.clientY\n            };\n            this.subEvents.emit(evt);\n        }\n        this.curTime = ct;\n        this.pos.x = event.clientX;\n        this.pos.y = event.clientY;\n        \n    }\n\n    onDragStart(event) {\n        event.preventDefault();\n        let item = this.item;\n        var itemElement = this.elem.nativeElement.querySelector('.model-item');\n        var rect = itemElement.getBoundingClientRect();\n        \n        let evt = {\n            type: \"item.dragstart\",\n            clientX: event.clientX,\n            clientY: event.clientY,\n            width: rect.width,\n            height: rect.height,\n            left: rect.left,\n            top: rect.top,\n            item: item,\n            data: item\n        };\n        this.subEvents.emit(evt);\n        // this.templateEvent.dragItem(item);\n    }\n\n}\n","<div class=\"model-item\" (pointerdown)=\"onPointerDown($event)\" (pointerup)=\"onPointerUp($event)\">\n    <div class=\"thumbnail\">\n        <img src=\"{{item.thumbnail}}\" alt=\"{{item.name}}\">\n    </div>\n    <div class=\"name\">\n        {{item.name}}\n    </div>\n</div>","import { AppEditorEventService } from \"@app/_3D/services/app-editor-event.service\";\r\nimport { AppEditorService } from \"@app/_3D/services/app-editor.service\";\r\nimport { MeshGeometryService } from \"./components/panels/mesh-geometry/mesh-geometry.service\";\r\nimport { PanelLightService } from \"./components/panels/panel-light/panel-light.service\";\r\nimport { PanelModelObjectService } from \"./components/panels/panel-model-object/panel-model-object.service\";\r\nimport { EditorToolbarService } from \"./components/viewport/editor-toolbar/editor-toolbar.service\";\r\nimport { ObjectToolbarService } from \"./components/viewport/object-toolbar/object-toolbar.service\";\r\nimport { VectorControlsService } from \"./components/viewport/vector-controls/vector-controls.service\";\r\nimport { ViewportService } from \"./components/viewport/viewport.service\";\r\nimport { AppEditorStorageService } from \"../_3D/services/app-editor-storage.service\";\r\nimport { ModalConfirmService } from \"./services/modal-confirm.service\";\r\nimport { SidebarLockService } from \"./components/editor/sidebar/sidebar-lock/sidebar-lock.service\";\r\nimport { ClientViewportService } from \"./components/viewport/client-viewport.service\";\r\nimport { ClientEditToolbarService } from \"./components/viewport/client-edit-toolbar/client-edit-toolbar.service\";\r\n\r\nexport const SHARE_SERVICES = [\r\n    ViewportService,\r\n    MeshGeometryService,\r\n    ObjectToolbarService,\r\n    ModalConfirmService,\r\n    PanelModelObjectService,\r\n    PanelLightService,\r\n    EditorToolbarService,\r\n    VectorControlsService,\r\n    SidebarLockService,\r\n\r\n\r\n    AppEditorService,\r\n    AppEditorEventService,\r\n    AppEditorStorageService,\r\n    ClientViewportService,\r\n    ClientEditToolbarService\r\n]","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { assignValue, assignWithout, inArray } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { ImageLibraryService } from '@app/_shared/components/modals/image-library/image-library.service';\nimport { ModalConfirmService } from '@app/_shared/services/modal-confirm.service';\nimport { FG_DEFAULT_DATA, FG_ITEM } from '@app/_shared/shared.type';\n\n@Component({\n    selector: 'app-tab-foreground',\n    templateUrl: './tab-foreground.component.html',\n    styleUrls: ['./tab-foreground.component.scss']\n})\nexport class TabForegroundComponent extends BaseComponent implements OnInit {\n    foregrounds: FG_ITEM[] = [];\n\n    app: AppEditorService = null;\n    isInited: boolean = false;\n    appEvents: any = {\n        \"scene.foregrounds.added\": () => this.loadForeground(),\n        \"scene.foregrounds.deleted\": () => {\n            this.loadForeground();\n            this.emitRefresh();\n        }\n    };\n    constructor(\n        private cd: ChangeDetectorRef,\n        private library: ImageLibraryService,\n        private cfm: ModalConfirmService,\n        // private app: AppEditorService,\n        private events: AppEditorEventService\n    ) {\n        super();\n    }\n\n    initOnce(){\n        this.app = this.events.app;\n     \n    }\n    init() {\n        if(this.isChangeSubEvents){\n            this.app = this.subEvents.app;\n        }\n        this.app.on(this.appEvents);\n        this.loadForeground();\n        this.cd.detectChanges();\n    }\n    onDestroy(){\n        this.app.off(this.appEvents);\n    }\n\n\n    loadForeground() {\n        this.foregrounds = this.app.getForegrounds();\n        this.cd.detectChanges();\n    }\n\n    add() {\n        this.library.open({\n            title: \"Choose Foreground Image\",\n            listType: \"foreground\",\n            mode: \"simple\"\n        }, image => this.addForeground(image.source), e => this.onLibraryModalCancel());\n    }\n\n    addForeground(url: string): void {\n        if (this.app) {\n            let fg: FG_ITEM = {\n                url: url\n            };\n            assignWithout(fg, FG_DEFAULT_DATA, 'url');\n            this.app.addForegroundData(fg);\n        }\n    }\n\n    updateForeground(data) {\n        this.app.updateForegroundData(data.secret_key, data);\n    }\n\n    deleteForeground(fg: FG_ITEM) {\n        this.cfm.showDeleteConfirm(\"Are you sure delete \" + fg.name + \"?\", () => {\n            this.app.deleteForeground(fg.secret_key);\n        })\n    }\n\n    onLibraryModalCancel() {\n\n    }\n\n\n    emitRefresh() {\n        setTimeout(() => {\n            this.subEvents.emit(\"tab.scene.refresh\");\n        }, 200);\n    }\n\n}\n","<div class=\"tab-inner\">\n    <div class=\"tab-header\">\n        <h2>{{\"Foregrounds\"|translate}}</h2>\n        <div class=\"btns\">\n            <button nz-button (click)=\"add()\">\n                {{\"Add\"|translate}}\n            </button>\n            \n        </div>\n    </div>\n    <div class=\"store tab-body\">\n        <app-foreground-item \n           \n            *ngFor=\"let foreground of foregrounds; let i=index\" \n            [data]=\"foreground\" \n            (update)=\"updateForeground($event)\"\n            (clickDelete)=\"deleteForeground($event)\"\n            \n            (emitter)=\"listen($event)\"\n        ></app-foreground-item>\n\n    </div>\n</div>\n\n","import { Injectable } from '@angular/core';\nimport { isArray, isObject, isString, objectHasKey } from '@app/_core/helpers/utils';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class EditorToolbarService extends EventManagerService {\n    keyListenners: any = {};\n    constructor() {\n        super();\n        this.on(\"click\", e => {\n            this.onClickHandle(e);\n        });\n\n    }\n    onClickHandle(event){\n        if(objectHasKey(this.keyListenners, event.key)){\n            this.keyListenners[event.key].map(f => f(event));\n        }\n    }\n    show(...buttons: any[]) {\n        let btns: any[] = [];\n        for (let index = 0; index < buttons.length; index++) {\n            const btn = buttons[index];\n            if (isArray(btn)) btn.map(b => btns.push(b));\n            else if (isObject(btn)) {\n                for (const bk in btn) {\n                    if (Object.prototype.hasOwnProperty.call(btn, bk)) {\n                        const listener = btn[bk];\n                        if (typeof listener == \"function\") {\n                            this.listen(bk, listener);\n                            btns.push(bk);\n                        }\n                    }\n                }\n            }\n            else btns.push(btn);\n        }\n        this.emit({\n            type: \"show\",\n            buttons: btns\n        }, null, true);\n    }\n\n    listen(key, callback) {\n        if(typeof callback == \"function\" && isString(key)){\n            if(!objectHasKey(this.keyListenners, key)) this.keyListenners[key] = [];\n            this.keyListenners[key].push(callback);\n        }\n    }\n\n    hide() {\n        this.keyListenners = {};\n        this.emit({\n            type: \"show\",\n            buttons: []\n        }, null, true);\n    }\n}\n","export * from './auth.service';\r\n","import { AfterViewInit, Component, ElementRef, Input, OnInit } from '@angular/core';\nimport { BaseComponent } from '../../base/base.component';\nimport { ViewportService } from '../viewport.service';\n\n@Component({\n    selector: 'canvas-layer',\n    templateUrl: './canvas-layer.component.html',\n    styleUrls: ['./canvas-layer.component.scss']\n})\nexport class CanvasLayerComponent extends BaseComponent implements OnInit, AfterViewInit {\n\n    @Input() canvas: Element;\n    @Input() app: any;\n    app3D: any = null;\n    canvas3D: Element = null;\n    appStatus: boolean = false;\n    elementStatus: boolean = false;\n    constructor(\n        private elemRef: ElementRef, \n        private events: ViewportService\n    ) {\n        super();\n    }\n    onChangeSubEvents(){\n        this.registerEventService(this.subEvents, \"resetcanvas\", () => {\n            let s = true;\n            const fn = () => {\n                if(!s){\n                    let t = this.initCanvas();\n                    s=!t;\n                }\n                if(s){\n                    setTimeout(fn, 1000);\n                }\n            };\n            fn();\n        })\n    }\n\n    initFirst(){\n        this.registerEventService(window, 'resize',  e => this.updateCanvasSize(e));\n    }\n\n    onInit(): void {\n        let a: any = {};\n        a.canvas = this.canvas ? this.setCanvas(this.canvas) : this.subEvents.on('canvas.set', e => this.setCanvas(e.canvas), true);\n        a.app = this.app ? this.setApp(this.app) : this.subEvents.on('app.set', e => this.setApp(e.app), true);\n        // this.initCanvas();\n        a = null;\n\n        this.activeEventServiceRegistered(window);\n    }\n    onDestroy(){\n        this.deactiveEventServiceRegistered(window);\n    }\n\n\n    ngAfterViewInit(): void {\n        this.elementStatus = true;\n        this.initCanvas();\n    }\n\n    updateCanvasSize(event?:Event){\n        if(this.app3D){\n            this.app3D.engine.updateCanvasSize(event);\n        }\n    }\n    \n\n    initCanvas() {\n        if(this.app3D && this.canvas3D && this.elementStatus){\n            var wrapper = this.elemRef.nativeElement;\n            wrapper.innerHTML = '';\n            // wrapper.appendChild(this.canvas3D);\n            this.app3D.engine.setWrapper(wrapper);\n            setTimeout(() => {\n                this.updateCanvasSize();\n            }, 10);\n            return true;\n        }\n        return false;\n    }\n\n    setApp(app) {\n        this.app3D = app;\n        if(!this.canvas3D){\n            this.canvas3D = this.app3D.engine.getCanvas();\n        }\n        this.initCanvas();\n\n    }\n\n    setCanvas(canvas){\n        this.canvas3D = canvas;\n        this.initCanvas();\n    }\n}\n","import { Component, Output, EventEmitter, OnInit, ChangeDetectionStrategy, ChangeDetectorRef, Input } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorStorageService } from '@app/_3D/services/app-editor-storage.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\n\nenum TabIndex {\n    CreateForm = 0,\n    Object = 1,\n    Scene = 2,\n    Light = 3,\n    Controls = 4,\n    settings = 5\n}\nenum TabIndex2 {\n    Object = 0,\n    Scene = 1,\n    Light = 2,\n    Controls = 3,\n    settings = 4\n}\n@Component({\n    selector: 'app-project-sidebar',\n    templateUrl: './project-sidebar.component.html',\n    styleUrls: ['./project-sidebar.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProjectSidebarComponent extends BaseComponent implements OnInit {\n\n    prevTab: number = 0;\n    currentTab: number = 0;\n\n    loadedTemplate = false;\n    loadedObject = false;\n\n    mode: string = 'create';\n\n    isInit : boolean = false;\n    app: AppEditorService;\n    constructor(private cd: ChangeDetectorRef, private storage: AppEditorStorageService, private events: AppEditorEventService) {\n        super();\n    }\n    initFirst(){\n        this.app = this.events.app;\n        this.storage.subcribe(\"editMode\", mode => {\n            this.mode = mode;\n            if(this.isFocus){\n                this.cd.detectChanges();\n            }\n        }, true);\n    }\n    onInit() {\n        if(this.isChangeSubEvents){\n            this.app = this.subEvents.app;\n        }\n        this.cd.detectChanges();\n    }\n\n    onChangeTab(e) {\n        if (this.app && this.app.editor) {\n            \n            if ((this.mode == \"create\" && e.index == TabIndex.Light) || (this.mode == \"update\" && e.index == TabIndex2.Light)) {\n                this.app.editor.showLightHelpers();\n            } else {\n                this.app.editor.hideLightHelpers();\n                this.app.editor.detachLight();\n            }\n        }\n        this.currentTab = e.index;\n\n        this.cd.detectChanges();\n    }\n\n    onClickSearch(event) {\n        console.log(event);\n    }\n\n\n}","<ng-container *ngIf=\"mode == 'create'; then createFormTabs; else updateFormTabs\"></ng-container>\n<ng-template #createFormTabs>\n    <nz-tabset [nzSelectedIndex]=\"currentTab\" nzTabPosition=\"top\" nzType=\"line\" class=\"main-tab\" (nzSelectChange)=\"onChangeTab($event)\">\n\n        <nz-tab [nzTitle]=\"iconTemplate\" [nzForceRender]=\"loadedTemplate\">\n            <ng-template #iconTemplate>\n                <img src=\"/assets/icons/new-design/tab-top/template.svg\" alt=\"Template\" />\n            </ng-template>\n            <app-tab-template-create-form></app-tab-template-create-form>\n        </nz-tab>\n\n\n        <nz-tab [nzTitle]=\"iconObject\">\n            <ng-template #iconObject>\n                <img src=\"/assets/icons/new-design/tab-top/object.svg\" alt=\"Object\" />\n            </ng-template>\n            <ng-template nz-tab>\n                <app-tab-object></app-tab-object>\n            </ng-template>\n        </nz-tab>\n        <nz-tab [nzTitle]=\"iconScene\">\n            <ng-template #iconScene>\n                <img src=\"/assets/icons/new-design/tab-top/scene.svg\" alt=\"Scene\" />\n            </ng-template>\n            <ng-template nz-tab>\n                <app-tab-scene></app-tab-scene>\n            </ng-template>\n        </nz-tab>\n\n        <nz-tab [nzTitle]=\"iconLight\">\n            <ng-template #iconLight>\n                <img src=\"/assets/icons/new-design/tab-top/light.svg\" alt=\"Lighr\" />\n            </ng-template>\n            <ng-template nz-tab>\n                <app-tab-light></app-tab-light>\n            </ng-template>\n        </nz-tab>\n\n        <nz-tab [nzTitle]=\"iconControls\">\n            <ng-template #iconControls>\n                <img src=\"/assets/icons/new-design/tab-top/control-camera.svg\" alt=\"Control Camera\" />\n            </ng-template>\n            <ng-template nz-tab>\n                <app-tab-controls></app-tab-controls>\n            </ng-template>\n        </nz-tab>\n\n\n    </nz-tabset>\n</ng-template>\n<ng-template #updateFormTabs>\n    <nz-tabset [nzSelectedIndex]=\"currentTab\" nzTabPosition=\"top\" nzType=\"line\" class=\"main-tab\" (nzSelectChange)=\"onChangeTab($event)\">\n\n        <nz-tab [nzTitle]=\"iconObject\" [nzForceRender]=\"loadedObject\">\n            <ng-template #iconObject>\n                <img src=\"/assets/icons/new-design/tab-top/object.svg\" alt=\"Object\" />\n            </ng-template>\n            <app-tab-object></app-tab-object>\n        </nz-tab>\n\n        <nz-tab [nzTitle]=\"iconScene\">\n            <ng-template #iconScene>\n                <img src=\"/assets/icons/new-design/tab-top/scene.svg\" alt=\"Scene\" />\n            </ng-template>\n            <ng-template nz-tab>\n                <app-tab-scene></app-tab-scene>\n            </ng-template>\n        </nz-tab>\n\n        <nz-tab [nzTitle]=\"iconLight\">\n            <ng-template #iconLight>\n                <img src=\"/assets/icons/new-design/tab-top/light.svg\" alt=\"Lighr\" />\n            </ng-template>\n            <ng-template nz-tab>\n                <app-tab-light></app-tab-light>\n            </ng-template>\n        </nz-tab>\n\n        <nz-tab [nzTitle]=\"iconControls\">\n            <ng-template #iconControls>\n                <img src=\"/assets/icons/new-design/tab-top/control-camera.svg\" alt=\"Control Camera\" />\n            </ng-template>\n            <ng-template nz-tab>\n                <app-tab-controls></app-tab-controls>\n            </ng-template>\n        </nz-tab>\n\n\n        <nz-tab [nzTitle]=\"iconSetting\">\n            <ng-template #iconSetting>\n                <img src=\"/assets/icons/new-design/tab-top/more.svg\" alt=\"More\" />\n            </ng-template>\n            <app-tab-project-setting></app-tab-project-setting>\n        </nz-tab>\n\n\n    </nz-tabset>\n</ng-template>","import { Component, OnInit } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport * as fromAuth from '../store';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss'],\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  loginForm: FormGroup;\r\n  submitted = false;\r\n  error = false;\r\n  isAuthenticating$: Observable<boolean>;\r\n  constructor(private store: Store<fromAuth.AuthState>, private formBuilder: FormBuilder) {}\r\n\r\n  ngOnInit() {\r\n    this.loginForm = this.formBuilder.group({\r\n      email: ['', Validators.required],\r\n      password: ['', Validators.required],\r\n      remember: [false, Validators.required],\r\n    });\r\n\r\n    this.isAuthenticating$ = this.store.select(fromAuth.getIsAuthenticating);\r\n  }\r\n\r\n  get f(): any {\r\n    if (typeof this.loginForm !== 'undefined') {\r\n      return this.loginForm.controls;\r\n    }\r\n  }\r\n\r\n  onSubmit(): void {\r\n    this.submitted = true;\r\n    if (this.loginForm.valid) {\r\n      const actionPayload = {\r\n        email: this.f.email.value,\r\n        password: this.f.password.value,\r\n      };\r\n      this.store.dispatch(new fromAuth.Login(actionPayload));\r\n    }\r\n  }\r\n}\r\n","<div class=\"login-wrapper\">\r\n  <form nz-form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\" role=\"form\">\r\n    <section class=\"title\">\r\n      Brandgos\r\n      <h5 class=\"hint\">Make your logo</h5>\r\n    </section>\r\n    <div class=\"login-group\">\r\n      <nz-alert *ngIf=\"error\" [nzType]=\"'error'\" [nzMessage]=\"error\" [nzShowIcon]=\"true\" class=\"mb-lg\"></nz-alert>\r\n      <nz-form-item>\r\n        <nz-form-control>\r\n          <nz-input-group nzSize=\"large\" nzPrefixIcon=\"user\">\r\n            <input nz-input formControlName=\"email\" placeholder=\"Email\" />\r\n          </nz-input-group>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n\r\n      <nz-form-item>\r\n        <nz-form-control>\r\n          <nz-input-group nzSize=\"large\" nzPrefixIcon=\"lock\">\r\n            <input nz-input type=\"password\" formControlName=\"password\" placeholder=\"Password\" />\r\n          </nz-input-group>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n      <nz-form-item>\r\n        <!-- <nz-col [nzSpan]=\"12\">\r\n        <label nz-checkbox formControlName=\"remember\">{{\r\n          'Remember me' | translate\r\n        }}</label>\r\n      </nz-col> -->\r\n        <!-- <nz-col [nzSpan]=\"12\" class=\"text-right\">\r\n        <a class=\"forgot\">{{ 'Forgot password' | translate }}</a>\r\n      </nz-col> -->\r\n      </nz-form-item>\r\n      <nz-form-item>\r\n        <button nz-button type=\"submit\" nzType=\"primary\" nzSize=\"large\" [nzLoading]=\"isAuthenticating$ | async\" nzBlock>\r\n          {{ 'Login' }}\r\n        </button>\r\n      </nz-form-item>\r\n    </div>\r\n  </form>\r\n</div>\r\n","import createClass from '@app/_core/helpers/es5.class';\r\nimport { assignValue, isArray, isEmpty, isNumber, isObject, isString, objectHasKey } from '@app/_core/helpers/utils';\r\n\r\n\r\nimport Scene from '../traits/scene';\r\nimport Camera from '../traits/camera';\r\nimport Renderer from '../traits/renderer';\r\nimport Controls from '../traits/controls';\r\nimport Lights from '../traits/lights';\r\nimport ObjectManager from '../traits/object-manager';\r\nimport { EventDispatcher } from '../libs/event-dispatcher';\r\n\r\n\r\n\r\nimport { Geometries, LightLib, LoaderLib, Materials, Meshes } from '../libs/three.libs';\r\n\r\n\r\n\r\n\r\nimport Loader from '../modules/loader'\r\nimport Composer from '../modules/composer'\r\nimport DynamicShadows from '../modules/dynamic-shadows'\r\nimport { EngineClass } from './engine.doc';\r\nimport { AppData, AppDefaultData } from '../store/data.type';\r\n\r\n\r\nvar ControlsEngine = createClass(\"ControlsEngine\").uses(Scene, Camera, Renderer, Controls, Lights, ObjectManager, EventDispatcher)({\r\n    $data: {},\r\n    $options: {},\r\n\r\n    $Mesh: {},\r\n    $Geometry: {},\r\n    $Material: {},\r\n    $Light: {},\r\n    $Composer: {},\r\n    Shadows: {},\r\n    inited: false,\r\n    $mainEngine: null,\r\n    boots: [\"bootstrap\"],\r\n    bootstrap: function () {\r\n        this.data = {};\r\n        this.options = {};\r\n\r\n        this.Mesh = {};\r\n        this.Geometry = {};\r\n        this.Material = {};\r\n        this.Light = {};\r\n        this.Composer = {};\r\n        this.Shadows = {};\r\n\r\n    },\r\n    /**\r\n     * Hàm khởi tạo\r\n     * @param {Dom} viewport \r\n     * @param {*} data \r\n     */\r\n    constructor: function (data?: any) {\r\n        if (data && isObject(data)) {\r\n            this.data = assignValue({}, data);\r\n        }\r\n        this.Geometry = Geometries;\r\n        this.Material = Materials;\r\n        this.Mesh = Meshes;\r\n        this.Light = LightLib;\r\n        this.Loader = new Loader(this);\r\n\r\n        this.Shadows = new DynamicShadows(this, data.shadow || data.shadows || {});\r\n        this.startup();\r\n    },\r\n\r\n    startup: function startup(data?: any) {\r\n        if (this.inited) return this;\r\n\r\n\r\n        if (data && isObject(data) && !isEmpty(data)) {\r\n            this.data = assignValue({}, data);\r\n        }\r\n\r\n\r\n\r\n\r\n        this.emit('startup', this.data);\r\n\r\n        this.initScene(this.data.scene || {});\r\n        this.setMainCamera(this.data.camera || {});\r\n        this.createRenderer(this.data.renderer || {}, this.data.shadow ? this.data.shadow.enabled : true);\r\n\r\n        this.camera.updateProjectionMatrix();\r\n        this.setMainControl(this.data.control || {});\r\n\r\n\r\n        var self = this;\r\n        this.inited = true;\r\n        \r\n        \r\n        // this.Shadows.init();\r\n        self.ready();\r\n        if (!this.autoRenderStatus) {\r\n            setTimeout(function () {\r\n                self.render();\r\n            }, 500);\r\n        }\r\n        \r\n        var canvas = this.getCanvas();\r\n        var focusIn = false;\r\n        canvas.addEventListener('pointerdown', function(e){\r\n            self.canChangeCamera = false\r\n            focusIn = true;\r\n        }, false)\r\n        document.addEventListener('pointerup', function(e){\r\n            if(focusIn){\r\n                self.canChangeCamera = true\r\n                focusIn = false;\r\n            }\r\n            \r\n        }, false)\r\n\r\n        this.setData(this.data);\r\n        return this;\r\n\r\n    },\r\n\r\n    setData: function (data?: any) {\r\n        // if (data.composer && !isEmpty(data.composer)) {\r\n        //     this.composer = new Composer(this, data.composer);\r\n        // }\r\n        if (data.lights && isArray(data.lights)) {\r\n            this.addLights(data.lights);\r\n        }\r\n        if (data.meshes && isArray(data.meshes)) {\r\n            this.addMeshes(data.meshes);\r\n        }\r\n        if (data.objects && (isArray(data.objects) || isObject(data.objects))) {\r\n            this.addObjects(data.objects);\r\n        }\r\n        if (data.cameras && isArray(data.cameras)) {\r\n            this.addCameras(data.cameras);\r\n        }\r\n        if (data.controls && isArray(data.controls)) {\r\n            this.addControls(data.controls);\r\n        }\r\n\r\n        this.emit('setdata', data);\r\n    },\r\n    canChangeCamera: true,\r\n    setMainEngine: function(engine){\r\n        if(engine == this.mainEngine) return false;\r\n        this.mainEngine = engine;\r\n        var self = this\r\n        engine.on(\"controls.change.camera\", function(e){\r\n            self.changeCameraByMain(e.camera);\r\n        });\r\n        engine.on(\"controls.main.updated\", function(e){\r\n            self.control.enabled = e.control.enabled;\r\n            self.control.enableRotate = e.control.enableRotate;\r\n\r\n            \r\n        });\r\n        \r\n        \r\n\r\n        self.on(\"controls.change.camera.end\", function(){\r\n            engine.emit(\"controls.change.camera.end\");\r\n        });\r\n        self.on(\"controls.change.camera.animate.end\", function(){\r\n            engine.emit(\"controls.change.camera.animate.end\");\r\n        });\r\n        let propKeys = {\r\n            rotation: ['x', 'y', 'z'],\r\n            quaternion: ['x', 'y', 'z', 'z']\r\n            \r\n        }\r\n        for (const key in propKeys) {\r\n            if (objectHasKey(propKeys, key)) {\r\n                const arrKeys = propKeys[key];\r\n                arrKeys.map(s => this.camera[key][s]=engine.camera[key][s]);\r\n            }\r\n        }\r\n        \r\n        self.changeCameraByMain(engine.camera);\r\n        self.control.enabled = engine.control.enabled;\r\n        self.control.enableRotate = engine.control.enableRotate;\r\n\r\n        setTimeout(function () {\r\n            self.changeCameraByMain(engine.camera);\r\n        }, 100)\r\n    },\r\n    changeCameraByMain: function(camera){\r\n        if(this.canChangeCamera){\r\n            var p = camera.position;\r\n            var q = this.camera.position;\r\n            var mainX = p.x, mainY = p.y, mainZ = p.z;\r\n            var ctrlX = q.x, ctrlY = q.y, ctrlZ = q.z;\r\n            var mainDistance = Math.sqrt(\r\n                Math.pow(mainX, 2) + Math.pow(mainY, 2) + Math.pow(mainZ, 2)\r\n            );\r\n            var ctrlDistance = Math.sqrt(\r\n                Math.pow(ctrlX, 2) + Math.pow(ctrlY, 2) + Math.pow(ctrlZ, 2)\r\n            );\r\n            var ratio = mainDistance/ctrlDistance;\r\n            q.x = p.x/ratio;\r\n            q.y = p.y/ratio;\r\n            q.z = p.z/ratio;\r\n            this.camera.lookAt(0, 0, 0);\r\n            this.refresh();\r\n\r\n        }\r\n    }\r\n}) as EngineClass;\r\n\r\n\r\nconst controlData: AppData = assignValue({}, AppDefaultData);\r\nassignValue(controlData, {\r\n    scene: {\r\n        floor: {\r\n            enabled: false,\r\n            above: false\r\n        }\r\n    },\r\n    renderer: {\r\n        params: {\r\n            alpha: true\r\n        }\r\n    },\r\n    control: {\r\n        type: \"orbit\",\r\n        autoUpdateScene: true,\r\n        maxDistance: 3,\r\n        minDistance: 3,\r\n        enableDamping: true,\r\n        dampingFactor: 0.1,\r\n        enablePan: false,\r\n        enabled: true,\r\n        highPerformance: false,\r\n        constraint: {\r\n            smoothZoom: true,\r\n            zoomDampingFactor: 0.2,\r\n            smoothZoomSpeed: 5\r\n        },\r\n        settings: {\r\n            enabled: true\r\n        }\r\n    },\r\n    camera: {\r\n        fov: 45,\r\n        near: 0.001,\r\n        far: 10,\r\n        position: {\r\n            x: 0,\r\n            y: 0,\r\n            z: 3\r\n        },\r\n\r\n        autofit: true,\r\n        settings: {\r\n            position: {\r\n                type: \"default\",\r\n                face: \"front\",\r\n                custom: {\r\n                    x: 0,\r\n                    y: 0,\r\n                    z: 2\r\n                }\r\n            }\r\n        }\r\n    },\r\n    shadow:{\r\n        enabled: false,\r\n    },\r\n    lights: [\r\n        {\r\n            type: \"ambient\",\r\n            data: {\r\n                params: {\r\n                    color: \"#ffffff\",\r\n                    intensity: 0.5\r\n                }\r\n            },\r\n            secret_key: \"DUkWmYXqHLn30h8srtGc1fClZ5VBh7Vs\"\r\n        },\r\n        {\r\n            type: \"point\",\r\n            data: {\r\n                params: {\r\n                    color: \"#4444cc\",\r\n                    intensity: 0.3\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: 0,\r\n                        y: -10\r\n                    }\r\n                }\r\n            },\r\n            secret_key: \"QT2uvl11GYiE9lBJ31kWLN7uZ4LVUY5h\"\r\n        },\r\n        {\r\n            type: \"Directionallight\",\r\n            data: {\r\n                params: {\r\n                    color: \"#FFE0B5\",\r\n                    intensity: 0.4\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: 4,\r\n                        y: 4,\r\n                        z: 3\r\n                    }\r\n                }\r\n            },\r\n            secret_key: \"4SBlh9qasmkym2qVinqXZQmrE1wyPz4g\"\r\n        },\r\n        {\r\n            type: \"Directionallight\",\r\n            data: {\r\n                params: {\r\n                    color: \"#FFE0B5\",\r\n                    intensity: 0.4\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: 6,\r\n                        y: 3,\r\n                        z: 3\r\n                    }\r\n                }\r\n            },\r\n            secret_key: \"FSFhrzuO3FGYgYwdNRfMIaTuF0vwNr53\"\r\n        },\r\n        {\r\n            type: \"Directionallight\",\r\n            data: {\r\n                params: {\r\n                    color: \"#FFE0B5\",\r\n                    intensity: 0.4\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: -6,\r\n                        y: -2,\r\n                        z: 1\r\n                    }\r\n                }\r\n            },\r\n            secret_key: \"FSFhrzuO3FGYgYwdNRfMIaTuF0vwNr53\"\r\n        },\r\n        {\r\n            secret_key: \"wnrnh6P4c3lYDTJDWv3MUOkjp1ds3eOF\",\r\n            type: \"Directionallight\",\r\n            data: {\r\n                params: {\r\n                    color: \"#FFE0B5\",\r\n                    intensity: 0.28\r\n                },\r\n                props: {\r\n                    position: {\r\n                        x: 5.521934041179776,\r\n                        y: 10,\r\n                        z: -9.240062491735568\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    ],\r\n    meshes: [\r\n        {\r\n            secret_key: \"GvhCqPx4aBGSCkBQUvPoyMI2uw0EGWWj\",\r\n            data: {\r\n                geometry: {\r\n                    type: \"plane\",\r\n                    width: 1,\r\n                    height: 1\r\n                },\r\n                material: {\r\n                    type: \"physical\",\r\n                    color: \"#b9e6ff\",\r\n                    side: \"2\",\r\n                    map: \"/assets/images/controls/cube/front.png\"\r\n\r\n                },\r\n                props: {\r\n                    name: \"front\",\r\n                    position: {\r\n                        x: 0,\r\n                        y: 0,\r\n                        z: 0.5\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            secret_key: \"GvhCqPx4aBGSCkBQUvPoyMI2uhityurtfut\",\r\n            data: {\r\n                geometry: {\r\n                    type: \"plane\",\r\n                    width: 1,\r\n                    height: 1\r\n                },\r\n                material: {\r\n                    type: \"physical\",\r\n                    color: \"#b9e6ff\",\r\n                    side: \"2\",\r\n                    map: \"/assets/images/controls/cube/back.png\"\r\n\r\n                },\r\n                props: {\r\n                    name: \"back\",\r\n                    position: {\r\n                        x: 0,\r\n                        y: 0,\r\n                        z: -0.5\r\n                    },\r\n                    rotation: {\r\n                        y: Math.PI\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            secret_key: \"GvhCqPx4aBGSCkBQUvPoyMI5452uhityurtfut\",\r\n            data: {\r\n                geometry: {\r\n                    type: \"plane\",\r\n                    width: 1,\r\n                    height: 1\r\n                },\r\n                material: {\r\n                    type: \"physical\",\r\n                    color: \"#b9e6ff\",\r\n                    side: \"2\",\r\n                    map: \"/assets/images/controls/cube/left.png\"\r\n\r\n                },\r\n                props: {\r\n                    name: \"left\",\r\n                    position: {\r\n                        x: -0.5,\r\n                        y: 0,\r\n                        z: 0\r\n                    },\r\n                    rotation: {\r\n                        y: -Math.PI / 2\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            secret_key: \"GvhCqP5452uhityurtfut\",\r\n            data: {\r\n                geometry: {\r\n                    type: \"plane\",\r\n                    width: 1,\r\n                    height: 1\r\n                },\r\n                material: {\r\n                    type: \"physical\",\r\n                    color: \"#b9e6ff\",\r\n                    side: \"2\",\r\n                    map: \"/assets/images/controls/cube/right.png\"\r\n\r\n                },\r\n                props: {\r\n                    name: \"right\",\r\n                    position: {\r\n                        x: 0.5,\r\n                        y: 0,\r\n                        z: 0\r\n                    },\r\n                    rotation: {\r\n                        y: Math.PI / 2\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            secret_key: \"GvhCqP54mkljh52uhityurtfut\",\r\n            data: {\r\n                geometry: {\r\n                    type: \"plane\",\r\n                    width: 1,\r\n                    height: 1\r\n                },\r\n                material: {\r\n                    type: \"physical\",\r\n                    color: \"#b9e6ff\",\r\n                    side: \"2\",\r\n                    map: \"/assets/images/controls/cube/top.png\"\r\n\r\n                },\r\n                props: {\r\n                    name: \"top\",\r\n                    position: {\r\n                        x: 0,\r\n                        y: 0.5,\r\n                        z: 0\r\n                    },\r\n                    rotation: {\r\n                        x: -Math.PI / 2\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            secret_key: \"GvhCqPkojojibh52uhityurtfut\",\r\n            data: {\r\n                geometry: {\r\n                    type: \"plane\",\r\n                    width: 1,\r\n                    height: 1\r\n                },\r\n                material: {\r\n                    type: \"physical\",\r\n                    color: \"#b9e6ff\",\r\n                    side: \"2\",\r\n                    map: \"/assets/images/controls/cube/bottom.png\"\r\n\r\n                },\r\n                props: {\r\n                    name: \"bottom\",\r\n                    position: {\r\n                        x: 0,\r\n                        y: -0.5,\r\n                        z: 0\r\n                    },\r\n                    rotation: {\r\n                        x: Math.PI / 2\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    ]\r\n});\r\n\r\nexport const ControlSyncEngine = new ControlsEngine(controlData);\r\nexport const getControlEngine = () => new ControlsEngine(controlData);\r\nexport { ControlsEngine };\r\nexport default ControlsEngine;\r\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { Object3DPropDataModel, Object3DPropDefaultData } from '@app/_3D/store/data.type';\nimport { assignValue, isObject } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { InpEvent } from '@app/_shared/shared.type';\n\n@Component({\n    selector: 'panel-model-object-tab-properties',\n    templateUrl: './panel-model-object-tab-properties.component.html',\n    styleUrls: ['./panel-model-object-tab-properties.component.scss']\n})\nexport class PanelModelObjectTabPropertiesComponent extends BaseComponent implements OnInit, OnChanges {\n    @Input() props: Object3DPropDataModel = null;\n    @Input() index: number = 0;\n    @Output() onUpdate = new EventEmitter<Object3DPropDataModel>();\n    @Input() events: any = null;\n\n    @Output() subcribe = new EventEmitter<InpEvent>();\n    constructor(private cd: ChangeDetectorRef) {\n        super();\n    }\n\n    onInit(): void {\n        let defData = assignValue({}, Object3DPropDefaultData);\n        let finalData = assignValue(defData, this.props);\n        if (!isObject(this.props)) this.props = finalData;\n        else assignValue(this.props, finalData);\n        this.cd.detectChanges();\n    }\n\n    ngOnChanges(change: SimpleChanges){\n        if(change.props){\n            this.doAfterViewInit(()=>this.cd.detectChanges());\n        }\n    }\n    onInputChange(event) {\n        if (event && isObject(event) && event.name) {\n            if (isObject(this.props[event.name]) && isObject(event.value)) {\n                assignValue(this.props[event.name], event.value);\n            }\n            else {\n                this.props[event.name] = event.value;\n            }\n            this.emitUpdate(event.name, event.value);\n        }\n    }\n\n    emitUpdate(name, value) {\n        this.onUpdate.emit(this.props);\n        this.subcribe.emit({\n            name: name,\n            value: value,\n            props: this.props\n        });\n    }\n\n}\n","<div class=\"tab-inner\">\n    <div class=\"inputs store\">\n        <div class=\"inp-list\" *ngIf=\"props\">\n\n            <inp-switch-group class=\"inp-group-item-first\" name=\"castShadow\" [(value)]=\"props.castShadow\" label=\"Cast Shadow\" (subcribe)=\"onInputChange($event)\"></inp-switch-group>\n\n            <inp-switch-group class=\"inp-group-item\" name=\"receiveShadow\" [(value)]=\"props.receiveShadow\" label=\"Receive Shadow\" (subcribe)=\"onInputChange($event)\"></inp-switch-group>\n\n            <inp-vector3-group class=\"inp-group-item\" name=\"scale\" [(value)]=\"props.scale\" label=\"Scale\" (subcribe)=\"onInputChange($event)\" [events]=\"events\"></inp-vector3-group>\n\n            <inp-rotation-group class=\"inp-group-item\" name=\"rotation\" [(value)]=\"props.rotation\" label=\"Rotation\" (subcribe)=\"onInputChange($event)\" [events]=\"events\"></inp-rotation-group>\n\n            <inp-vector3-group class=\"inp-group-item\" name=\"position\" [(value)]=\"props.position\" label=\"Position\" (subcribe)=\"onInputChange($event)\" [events]=\"events\" [btnCenter]=\"true\"></inp-vector3-group>\n\n        </div>\n    </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { TemplateModel } from '@app/_store/template';\n\n@Component({\n    selector: 'template-item',\n    templateUrl: './template-item.component.html',\n    styleUrls: ['./template-item.component.scss']\n})\nexport class TemplateItemComponent extends BaseComponent implements OnInit {\n    @Input() item: TemplateModel;\n    constructor(private events: AppEditorEventService) {\n        super();\n    }\n\n    onInit(): void {\n    }\n\n    importTemplate(){\n        this.subEvents.emit({\n            type: \"template.import\",\n            template: this.item\n        })\n    }\n}\n","<div class=\"template-item\">\n    <div class=\"thumbnail\">\n        <img src=\"{{item.thumbnail}}\" alt=\"{{item.name}}\">\n        <div class=\"dynamic-buttons\" (click)=\"importTemplate()\">\n            <div class=\"btn-import\">\n                Import\n            </div>\n        </div>\n    </div>\n    <div class=\"name\">\n        {{item.name}}\n    </div>\n    \n</div>","import { assignValue, assignWithout, date, getType, inArray, isArray, isBoolean, isCallable, isEmpty, isFunction, isNull, isNumber, isObject, isString, objectHasProperty, Str, _defineProperty, _instanceof } from './utils';\r\n// import Dom, { $, Query, query } from './dom.js';\r\nimport createClass, { _class, ES5AbstractClass } from './es5.class';\r\n\"use strict\";\r\n\r\nconst global = window;\r\n\r\nconst DEFAULT_VALUE = Str.rand(Str.rand(date('ms')));\r\n\r\nvar $document = window.document, div = $document.createElement(\"div\"), simpleTags = ['img', 'meta', 'link', 'input', 'br', 'hr'], createElement = $document.createElement;\r\n\r\n/**\r\n * thao tác với dom thông qua html query gần giống jquery nhưng ít chức năng hơn\r\n */\r\nvar domEvents = (\r\n    \"blur focus focusin focusout resize scroll click dblclick \" +\r\n    \"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\r\n    \"change select submit keydown keypress keyup contextmenu load input\"\r\n).split(\" \");\r\nvar allEvents = (\r\n    \"abort afterprint animationend animationiteration animationstart beforeprint beforeunload blur canplay canplaythrough \" +\r\n    \"change click contextmenu copy cut dblclick drag dragend dragenter dragleave dragover dragstart drop durationchange \" +\r\n    \"ended error focus focusin focusout fullscreenchange fullscreenerror hashchange input invalid keydown keypress keyup \" +\r\n    \"load loadeddata loadedmetadata loadstart message \" +\r\n    \"mousedown mouseenter mouseleave mousemove mouseover mouseout mouseup mousewheel pointerdown pointerup pointermove \" +\r\n    \"offline online open pagehide pageshow paste pause play playing popstate progress ratechange resize reset scroll \" +\r\n    \"search seeked seeking select show stalled storage submit suspend timeupdate toggle \" +\r\n    \"touchcancel touchend touchmove touchstart transitionend unload volumechange waiting wheel\"\r\n).split(\" \").filter(function (s) { return s.length > 0 });\r\n\r\n// danh sách tag hợp lệ\r\nvar htmlTags = (\"a abbr acronym address applet area article aside audio b base basefont bb bdo big blockquote body br button canvas caption center cite code col colgroup command datagrid datalist dd del details dfn dialog dir div dl dt em embed eventsource fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr  html i iframe img input ins isindex kbd keygen label legend li link map mark menu meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strike strong style sub sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr\").split(\" \");\r\n\r\n\r\n/**\r\n* mảng chứ các event sự kiện\r\n* mỗi phần tử trong mảng chứa element, tên sự kiện, handle, và task\r\n* task là một danh sách gồm callback và data\r\n*/\r\nvar events = [];\r\n\r\n\r\nvar inputTypes = [\r\n    \"button\", \"submit\", \"image\", \"reset\", \"checkbox\", \"radio\", // click\r\n\r\n    \"color\", \"range\",\r\n    \"file\", \"hidden\",\r\n\r\n    \"date\", \"datetime-local\", \"month\", \"time\", \"week\",\r\n\r\n    \"text\", \"number\", \"email\", \"password\", \"search\", \"tel\", \"url\"\r\n\r\n];\r\nvar inputTags = ['input', 'textarea', 'select'];\r\n\r\n\r\nvar $window = null, $root = null;\r\n\r\nvar oneTimeData: any = {};\r\n\r\nvar isset = false;\r\n\r\n\r\n/**\r\n * \r\n */\r\nvar stopCallChildrenTask: any = {};\r\n\r\nvar curremtCallChildrenMethodID: any = null;\r\n/**\r\n * các phương thức và thuộc tính của dom element\r\n */\r\n\r\n/**\r\n * Lấy ra phần tử cha có kết quả trùng khớp\r\n * @param {Element} element\r\n * @param {string|Element|Query|Dom} selector \r\n * @returns {Element}\r\n */\r\nfunction closest(selector: any, element?: any) {\r\n    if (!element) return null;\r\n    if (selector == undefined) return element ? element.parentNode || null : null;\r\n    var finder = [];\r\n    if (isObject(selector)) {\r\n        if (selector.isDom) {\r\n            finder.push(selector.el);\r\n        }\r\n        else if (selector.isQuery) {\r\n            for (var index = 0; index < selector.length; index++) {\r\n                var el = selector[index];\r\n                finder.push(el);\r\n            }\r\n        }\r\n        else if (selector instanceof Element) {\r\n            finder.push(selector);\r\n        }\r\n    }\r\n    else if (selector instanceof Element) {\r\n        finder.push(selector);\r\n    }\r\n    else if (isString(selector)) {\r\n        var els = document.querySelectorAll(selector);\r\n        if (els.length) {\r\n            for (var index = 0; index < els.length; index++) {\r\n                var el = els[index];\r\n                finder.push(el);\r\n            }\r\n        }\r\n    }\r\n    var closestList = null;\r\n    var findLength = finder.length;\r\n    if (findLength) {\r\n        var parents: any = getParentNodes(element);\r\n        var parentLength = parents.length;\r\n        var parent: any = undefined, find: any = undefined;\r\n\r\n        for (let n = 0; n < parentLength; n++) {\r\n            parent = parents[n];\r\n            for (let m = 0; m < findLength; m++) {\r\n                find = finder[m];\r\n                if (parent == find) {\r\n                    closestList = parent;\r\n\r\n                    m += findLength;\r\n                    n += parentLength;\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    return closestList;\r\n}\r\ninterface DomEl {\r\n    el: HTMLElement,\r\n    isDom: boolean,\r\n    tagName: string,\r\n    id: string,\r\n    className: string,\r\n    children: DomEl[],\r\n    parent: DomEl,\r\n    setup: (...args: any[]) => this,\r\n    /**\r\n     * thêm lang nghe su kien\r\n     */\r\n    addEventListener: (type: string, handler: (arg0: Event) => any, passed?: any) => this,\r\n    hasEventListener: (type: string, handler: (arg0: Event) => any) => boolean,\r\n    removeEventListener: (type: string, handler?: (arg0: Event) => any) => this,\r\n    dispatchEvent: (event: any) => this,\r\n    addDomEvent: (event: any, handler?: (arg0: Event) => any, passed?: any) => this,\r\n    hasEvent: (type: string, handler?: (arg0: Event) => any) => boolean,\r\n    off: (events: any, handler?: (arg0: Event) => any) => this,\r\n    trigger: (event: any, data: any) => this,\r\n    on: (event: any, handler?: (arg0: Event) => any) => this,\r\n    fn: (method: any) => (e: Event) => any,\r\n    is: (selector: any, el: any) => boolean,\r\n    closest: (selector: any, el: any) => any,\r\n    getProp: (prop: any, all?: any) => any,\r\n    setProp: (prop: any, value?: any) => this,\r\n    removeProp: (prop: any) => this,\r\n    prop: (prop: any, value?: any) => this,\r\n    val: (value?: any) => any,\r\n    getHtml: () => any,\r\n    setHtml: (html?: any) => any,\r\n    html: (html?: any) => string,\r\n    getAttribute: (attr?: any) => any,\r\n    setAttribute: (attr: any, value?: any) => this,\r\n    attr: (attr?: any, value?: any) => any,\r\n    attrData: (key?: any) => any,\r\n    addClass: (className: any) => this,\r\n    removeClass: (classname?: any) => this,\r\n    hasClass: (classname: any) => boolean,\r\n    css: (prop: any, value?: any) => any,\r\n    height: (height?: any) => number,\r\n    width: (width?: any) => number,\r\n    append: (child: any) => this,\r\n    prepend: (child: any) => this,\r\n    appendTo: (parent: any) => this,\r\n    prependTo: (parent: any) => this,\r\n    hasDomChild: (child?: any) => boolean,\r\n    removeDomChild: (child?: any) => void,\r\n    removeChild: (child?: any, removeDomEl?: any) => this,\r\n    remove: () => this,\r\n    setContent: (content: any) => this,\r\n    sendToChildren: (channel: any, data: any) => boolean,\r\n    onParentTransmission: (channel: any, handler?: (arg0: Event) => any) => this,\r\n    onParentData: (channel: any, handler?: (arg0: Event) => any) => this,\r\n    sendToParent: (channel: any, data?: any) => this,\r\n    onChildrenTransmission: (channel: any, handler?: (arg0: Event) => any) => this,\r\n    onChildrenData: (channel: any, handler?: (arg0: Event) => any) => this,\r\n    callParentMethod: (method: any, args?: any[]) => any,\r\n    cpm: (method: string, args?: any[]) => any,\r\n    parentCall: (method: string, args?: any[]) => any,\r\n    callParent: (method: string, args?: any[]) => any,\r\n    onChildrenCallMethod: (method: string, args?: any[]) => any,\r\n    callChildrenMethod: (method: string, args: any, className: any) => any,\r\n    ccm: (method: string, args: any, className: any) => any,\r\n    childrenCall: (method: string, args: any, className: any) => any,\r\n    callChildren: (method: string, args: any, className: any) => any,\r\n    onCallMethodFromParent: (method: string, args: any, className: any) => any,\r\n    sendToSiblings: (slug: any, data: any) => any,\r\n    onReceiveFromSiblings: (channel: any, data: any) => any,\r\n    callSiblingMethod: (method: string, args: any) => any,\r\n    callSiblings: (method: string, args: any) => any,\r\n    siblingCall: (method: string, args: any) => any,\r\n    csm: (method: string, args: any) => any,\r\n    getRootElement: () => DomEl,\r\n    moveTo: (parent: any, pos: any) => any,\r\n    moveChild: (child: any, receiveDomEl: any, pos: any) => any,\r\n    moveIn: (child: any, pos: any, oldparent: any) => any\r\n}\r\n\r\n\r\ninterface DomFactory extends ES5AbstractClass {\r\n\r\n    /**\r\n     * Tạo đối tượng dome element với 3 tham số:\r\n     * @param {string} selector selector không băt buộc có dạng #id.class[attribute=\"value\"]:prop tất caa3 cá thành phần đều không bắt buộc và có thể lặp lại nhiều lần tức là nhiều class hoặc thuộc tính. chỉ có id là duy nhất\r\n     * @param {Element[]|DomEl[]|string[]} children Mảng các phần tử con\r\n     * @param {object} attributes các thuộc tính\r\n     * @returns {DomEl}\r\n     */\r\n    new(selector: string, children?: (DomEl | string | Element)[], attributes?: { [x: string]: any }, ...args: any[]): DomEl,\r\n    new(selector: string, attributes?: { [x: string]: any }, children?: (DomEl | string | Element)[], ...args: any[]): DomEl,\r\n    new(selector?: string, children?: (DomEl | string | Element)[], attributes?: { [x: string]: any }, ...args: ((DomEl | string | Element) | ((DomEl | string | Element))[] | any)[]): DomEl,\r\n    new(children?: (DomEl | string | Element)[], attributes?: { [x: string]: any }, ...args: any[]): DomEl,\r\n    new(attributes?: { [x: string]: any }, children?: (DomEl | string | Element)[], ...args: ((DomEl | string | Element) | ((DomEl | string | Element))[] | any)[]): DomEl,\r\n    new(attributes?: { [x: string]: any }, ...args: ((DomEl | string | Element) | ((DomEl | string | Element))[] | any)[]): DomEl,\r\n    new(): DomEl,\r\n\r\n    (selector: string, children?: (DomEl | string | Element)[], attributes?: { [x: string]: any }, ...args: ((DomEl | string | Element) | ((DomEl | string | Element))[] | any)[]): DomEl,\r\n    (children: (DomEl | string | Element)[], attributes?: { [x: string]: any }, ...args: ((DomEl | string | Element) | ((DomEl | string | Element))[] | any)[]): DomEl,\r\n    (attributes: { [x: string]: any }, ...args: ((DomEl | string | Element) | ((DomEl | string | Element))[] | any)[]): DomEl,\r\n    (child: (DomEl | string | Element), attributes?: { [x: string]: any }, ...args: ((DomEl | string | Element) | ((DomEl | string | Element))[] | any)[]): DomEl,\r\n    (attributes: { [x: string]: any }, child: (DomEl | string | Element), ...args: ((DomEl | string | Element) | ((DomEl | string | Element))[] | any)[]): DomEl,\r\n    (attributes: { [x: string]: any }, children?: (DomEl | string | Element)[], ...args: ((DomEl | string | Element) | ((DomEl | string | Element))[] | any)[]): DomEl,\r\n    (): DomEl\r\n    // with(key:any, value?:any):DomEl,\r\n    withParent?(parent: DomEl): DomEl\r\n\r\n}\r\n\r\n/**\r\n * Tạo đối tượng dom\r\n * @param {string|object} selector\r\n * @param {string|Element|string[]|Element[]} children\r\n * @param {object} attributes\r\n * @returns {DomEl}\r\n * @note {string} Đoạn này thật ra không cần thiết. nhưng viết bào để trình soạn thảo sử dụng gợi ỳ\r\n */\r\n//  var Dom = function Dom(selector?: any, children?: any, attributes?: any):DomEl {\r\n//     this.setup.apply(this, getArguments(arguments));\r\n//     this.isDom = true;\r\n//     return this;\r\n// };\r\n\r\n// Dom.prototype.isDom = true;\r\n\r\n/**\r\n * tạo đối tượng với phẩn tử cha\r\n * @param {DomElement} parent phần tử cha\r\n * @param {*} args danh sách tham số\r\n */\r\n\r\n\r\nvar Dom: DomFactory = _class(\"Dom\")({\r\n    static$isDomClass: true,\r\n    $el: null,\r\n    // const$isQuery: true,\r\n    const$isDom: true,\r\n    $tagName: null,\r\n    $id: \"\",\r\n    $className: \"\",\r\n\r\n    $children: null,\r\n    $parent: null,\r\n\r\n    // gọi hàm hoặc truyền dữ liệu\r\n    $__transmissionEventListeners: null,\r\n\r\n    $__transmissionStatus: true,\r\n\r\n    $dynamicCreateMode: true,\r\n\r\n    $__canSetChildren: false,\r\n\r\n    $__dynamicSync: false,\r\n\r\n    // khai bao ham se dc boot\r\n    boots: [\"__boot__\", '__setBootData__', '___assignDynamicProperties___'],\r\n\r\n    inits: [\"__init__\"],\r\n\r\n    $__dynamicAttrs: null,\r\n\r\n    $_listeners: null,\r\n\r\n    $_pendingContents: null,\r\n    $___show___: false,\r\n    $___parentNode___: null,\r\n    $___markcomment___: null,\r\n\r\n    $__dataTypes__: null,\r\n    $__syncOnChange__: true,\r\n    $__dataSync__: true,\r\n\r\n    __setBootData__: function () {\r\n        if (oneTimeData && isObject(oneTimeData) && !isEmpty(oneTimeData)) {\r\n            for (const key in oneTimeData) {\r\n                if (Object.hasOwnProperty.call(oneTimeData, key)) {\r\n                    const value = oneTimeData[key];\r\n                    this[key] = value;\r\n                }\r\n            }\r\n            oneTimeData = {};\r\n        }\r\n    },\r\n\r\n\r\n    __boot__: function () {\r\n        this.__transmissionEventListeners = {\r\n            fromChildren: {},\r\n            fromParent: {},\r\n            fromSiblings: {},\r\n\r\n            events: {},\r\n        };\r\n        this.__dynamicAttrs = {};\r\n        this._pendingContents = [];\r\n        this.__canSetChildren = true;\r\n        this.children = [];\r\n        this.__dataTypes__ = [];\r\n        this.__canSetChildren = false;\r\n        // this.static.__addAccessorKey(\"hide\");\r\n        // this.static.__addAccessorKey(\"show\");\r\n        // this.static.__addAccessorKey(\"next\");\r\n        // this.static.__addAccessorKey(\"previous\");\r\n\r\n\r\n    },\r\n\r\n    __init__: function () {\r\n        if (!this.el) {\r\n            this.setup(this.getDefaultSelector())\r\n        }\r\n\r\n        var self = this;\r\n        if (typeof this.render == \"function\") {\r\n            var children = this.render();\r\n            if (children) {\r\n                this.removeChild();\r\n                this.append(children);\r\n            }\r\n        }\r\n        // bắt sự kiện change và thay đổi cá thuộc tính dộng cho nó dồng bộ\r\n        this.on(\"change\", function (event) {\r\n            if (event.target == self.el) {\r\n                if (this.__dynamicSync) {\r\n                    var attrs = self.attr();\r\n                    for (var key in self.__dynamicAttrs) {\r\n                        if (Object.hasOwnProperty.call(self.dyna1micAttrs, key)) {\r\n                            var val = self.__dynamicAttrs[key];\r\n                            var camelKey = Str.slugToCamel(key),\r\n                                slugKey = Str.camelToSlug(key);\r\n                            var s = null;\r\n                            var v = null;\r\n                            if (Object.hasOwnProperty.call(attrs, key) && attrs[key] != val) {\r\n                                self.__changeAccessorValue__(key, attrs[key]);\r\n                                s = key;\r\n                                v = attrs[key];\r\n                            }\r\n                            else if (Object.hasOwnProperty.call(attrs, slugKey) && attrs[slugKey] != val) {\r\n                                self.__changeAccessorValue__(key, attrs[slugKey]);\r\n                                s = camelKey;\r\n                                v = attrs[camelKey];\r\n                            }\r\n                            else if (Object.hasOwnProperty.call(attrs, camelKey) && attrs[camelKey] != val) {\r\n                                self.__changeAccessorValue__(key, attrs[camelKey]);\r\n                                s = slugKey;\r\n                                v = attrs[slugKey];\r\n                            }\r\n                            if (s) {\r\n                                self.trigger({\r\n                                    type: \"change.attr.\" + s,\r\n                                    preventDefault: function () {\r\n                                        // stt = false;\r\n                                    },\r\n                                    target: self.el,\r\n                                    data: {\r\n                                        attr: s,\r\n                                        value: v\r\n                                    }\r\n                                });\r\n                            } // end if status == true\r\n                        } // end has prop\r\n                    } // wnd for\r\n                } // end if dynamic sync\r\n            } // end if target == el\r\n        }) // end call \r\n    },\r\n\r\n    ___assignDynamicProperties___: function () {\r\n        var self: any = this;\r\n        function show(time?: any, callback?: any) {\r\n\r\n            // function _show() {\r\n            if (self.___show___) return self;\r\n            var t = isNumber(time) ? parseInt(time) : 0;\r\n            var cb = isCallable(time) ? time : (isCallable(callback) ? callback : emptyFunc);\r\n\r\n            function _show() {\r\n                var e = self.el;\r\n                if (t > 0) {\r\n                    var vpt = 1 / time;\r\n                    var opc = 0;\r\n\r\n                    var opacity = getCssProp(e, \"opacity\");\r\n\r\n                    if (opacity == \"1\") {\r\n                        setTimeout(function () {\r\n                            cb.call(e);\r\n                        }, t);\r\n                        return;\r\n                    }\r\n                    self.setCssProp(e, \"opacity\", 0);\r\n                    for (var i = 0; i < t; i++) {\r\n                        setTimeout(function () {\r\n                            opc += vpt;\r\n                            setCssProp(e, \"opacity\", opc);\r\n                        }, i + 1);\r\n                    }\r\n                    setTimeout(function () {\r\n                        setCssProp(e, \"opacity\", 1);\r\n                        cb.call(e);\r\n                    }, t);\r\n                } else {\r\n                    var opacity = getCssProp(e, \"opacity\");\r\n                    if (opacity == \"1\") {\r\n                        cb.call(e);\r\n                        return;\r\n                    }\r\n                    setCssProp(e, \"opacity\", 1);\r\n                    cb.call(e);\r\n                }\r\n\r\n            }\r\n\r\n            // if(!_show()) return this;\r\n\r\n            if (self.___markcomment___) {\r\n                self.___markcomment___.parentNode.insertBefore(self.el, self.___markcomment___);\r\n                self.___show___ = true;\r\n                _show();\r\n            } else {\r\n                var next = next({ ___show___: true });\r\n                if (next) {\r\n                    next.el.parentNode.insertBefore(self.el, next.el);\r\n                    self.___show___ = true;\r\n                    _show();\r\n                } else if (self.parent) {\r\n                    self.parent.el.appendChild(self.el);\r\n                    self.___show___ = true;\r\n                    _show();\r\n                }\r\n            }\r\n\r\n\r\n            return self;\r\n        }\r\n\r\n        /**\r\n         * \r\n         * @param {int} time thời gian tinh bang ms\r\n         * @param {function} callback làm gì đó sau khi hoàn thành\r\n         */\r\n        function hide(time: any = 0, callback?: any) {\r\n            var e = self.el;\r\n            var t = isNumber(time) ? parseInt(time) : 0;\r\n            var cb = isCallable(time) ? time : (isCallable(callback) ? callback : emptyFunc);\r\n            if (!self.el.parentNode) return self;\r\n            if (!self.___parentNode___) self.___parentNode___ = self.el.parentNode;\r\n            if (!self.___markcomment___) {\r\n                self.___markcomment___ = document.createComment(\"/\" + self.tagName + (self.el.id ? \"#\" + self.id : \"\") + (self.el.className ? \".\" + self.el.className.split(\" \").map(function (t) { return t.trim(); }).filter(function (t) { return t.length > 0; }).join(\".\") : \"\"))\r\n                self.___parentNode___.insertBefore(self.___markcomment___, self.el);\r\n            }\r\n            self.___show___ = false;\r\n            if (t > 0) {\r\n                var vpt = 1 / time;\r\n                var opc = 1;\r\n                var opacity = getCssProp(e, \"opacity\");\r\n                if (opacity == \"0\" || opacity == \"\") {\r\n                    setTimeout(function () {\r\n                        self.el.parentNode.removeChild(self.el);\r\n                        cb.call(e);\r\n\r\n                    }, t);\r\n                    return;\r\n                }\r\n                for (var i = 0; i < t; i++) {\r\n                    setTimeout(function () {\r\n                        opc -= vpt;\r\n                        setCssProp(e, \"opacity\", opc);\r\n                    }, i + 1);\r\n                }\r\n                setTimeout(function () {\r\n                    setCssProp(e, \"opacity\", 0);\r\n                    self.el.parentNode.removeChild(self.el);\r\n                    cb.call(e);\r\n                }, t);\r\n            } else {\r\n                setCssProp(e, \"opacity\", 0);\r\n                self.el.parentNode.removeChild(self.el);\r\n                cb.call(e);\r\n            }\r\n\r\n            return self;\r\n        }\r\n\r\n        function next(args?: any) {\r\n\r\n            if (self.parent) {\r\n                let index = self.parent.children.indexOf(self);\r\n                var s = false;\r\n                for (let i = index+1; i < self.parent.children.length; i++) {\r\n                    const child = self.parent.children[i];\r\n                    if (isObject(args)) {\r\n                        var a = true;\r\n                        for (const key in args) {\r\n                            if (Object.hasOwnProperty.call(args, key)) {\r\n                                const value = args[key];\r\n                                if (child[key] != value) a = false;\r\n                            }\r\n                        }\r\n                        if (a) return child;\r\n                    }\r\n                    else if (isFunction(args) && args(child)) return child;\r\n                    else if (!args) return child;\r\n\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function previous(args?: any) {\r\n            if (self.parent) {\r\n                let index = self.parent.children.indexOf(self);\r\n                for (let i = index-1; i > -1; i--) {\r\n                    const child = self.parent.children[i];\r\n                    if (isObject(args)) {\r\n                        var a = true;\r\n                        for (const key in args) {\r\n                            if (Object.hasOwnProperty.call(args, key)) {\r\n                                const value = args[key];\r\n                                if (child[key] != value) a = false;\r\n                            }\r\n                        }\r\n                        if (a) return child;\r\n                    }\r\n                    else if (isFunction(args) && args(child)) return child;\r\n                    else if (!args) return child;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        Object.defineProperties(show, {\r\n            toString: {\r\n                configurable: false,\r\n                enumerable: false,\r\n                value: function () {\r\n                    return self.___show___;\r\n                }\r\n            },\r\n            __toData__: {\r\n                configurable: false,\r\n                enumerable: false,\r\n                value: function () {\r\n                    return self.___show___;\r\n                }\r\n            },\r\n            isBoolean: {\r\n                value: true,\r\n                writable: false,\r\n                configurable: false,\r\n                enumerable: false\r\n            }\r\n        })\r\n        Object.defineProperties(hide, {\r\n            toString: {\r\n                configurable: false,\r\n                enumerable: false,\r\n                value: function () {\r\n                    return !self.___show___;\r\n                }\r\n            },\r\n            __toData__: {\r\n                configurable: false,\r\n                enumerable: false,\r\n                value: function () {\r\n                    return !self.___show___;\r\n                }\r\n            },\r\n            isBoolean: {\r\n                value: true,\r\n                writable: false,\r\n                configurable: false,\r\n                enumerable: false\r\n            }\r\n        })\r\n\r\n        Object.defineProperties(this, {\r\n            show: {\r\n                configurable: false,\r\n                enumerable: false,\r\n                set: function (status) {\r\n                    if (isBoolean(status)) {\r\n                        if (status) show();\r\n                        else hide();\r\n                    }\r\n                },\r\n                get: function () {\r\n                    return show;\r\n                }\r\n            },\r\n            hide: {\r\n                configurable: false,\r\n                enumerable: false,\r\n                set: function (status) {\r\n                    if (isBoolean(status)) {\r\n                        if (status) hide();\r\n                        else show();\r\n                    }\r\n                },\r\n                get: function () {\r\n                    return hide;\r\n                }\r\n            },\r\n            next: {\r\n                configurable: false,\r\n                enumerable: false,\r\n                set: function (value) {\r\n                    // lam gi do\r\n                },\r\n                get: function () {\r\n                    return next();\r\n                }\r\n            },\r\n            previous: {\r\n                configurable: false,\r\n                enumerable: false,\r\n                set: function (value) {\r\n                    // lam gi do\r\n                },\r\n                get: function () {\r\n                    return previous();\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n    },\r\n\r\n    /**\r\n     * set id cho element khi set cho object\r\n     * @param {string} id id của element\r\n     */\r\n    onSet$id: function (id) {\r\n        this.attr('id', id);\r\n    },\r\n    onSet$className: function (className) {\r\n        this.removeClass().addClass(className);\r\n    },\r\n\r\n    onSet$children: function onSetChildren(value) {\r\n        if (!this.__canSetChildren) console.warn(\"Bạn không thể set giá trị cho children\");\r\n        return this.__canSetChildren;\r\n    },\r\n    onGet$children: function getChildren(value) {\r\n        var returnValue = value;\r\n        if (!isArray(value)) {\r\n            returnValue = [];\r\n            this.__canSetChildren = true;\r\n            this.children = returnValue;\r\n            this.__canSetChildren = false;\r\n        }\r\n        return returnValue;\r\n    },\r\n\r\n    onSet$parent: function onSetParent(parent) {\r\n        if (!parent || !parent.isDom) {\r\n            return false;\r\n        }\r\n        var s = this.dispatchEvent({\r\n            type: \"setparent\",\r\n            target: this.el,\r\n            eventData: parent,\r\n            parent: parent\r\n        });\r\n        if (s !== false) {\r\n            if (typeof this.onSetParent == \"function\") {\r\n                s = this.onSetParent(parent);\r\n            }\r\n\r\n            if (s !== false) {\r\n                this.___parentNode___ = parent.el;\r\n                if (typeof this.becomeAChild == \"function\") {\r\n                    this.becomeAChild(parent);\r\n                }\r\n            }\r\n        }\r\n\r\n    },\r\n    constructor: function Dom() {\r\n        if (arguments.length) {\r\n            this.setElement.apply(this, arguments);\r\n        }\r\n    },\r\n    const$getDefaultSelector: function () {\r\n        return \"div#\" + (\r\n            this.id ? this.id : Str.rand()\r\n        ) + \".\" + (\r\n                this.className ? this.className.split(\" \").map(function (v) {\r\n                    return v.trim();\r\n                }).filter(function (v) {\r\n                    return v.length > 0;\r\n                }).join('.') : 'dom-element'\r\n            );\r\n    },\r\n    /**\r\n     * thiết lập\r\n     * @param {string|object}\r\n     */\r\n    final$setElement: function setElement(params) {\r\n        var args = getArguments(arguments);\r\n        if (args.length && typeof args[0] != \"string\") {\r\n            args.unshift(this.getDefaultSelector());\r\n        }\r\n        var elem = create.apply(this, args);\r\n        var el = elem.el;\r\n        if (el) {\r\n\r\n            if (!el.id && this.id) el.id = this.id;\r\n            if (!el.className && this.className) el.className = this.className;\r\n\r\n            this.el = el;\r\n            if (!isEmpty(elem.__dynamicAttrs)) {\r\n                this.addDynamicAttr(elem.__dynamicAttrs);\r\n            }\r\n            if (!isEmpty(elem.dataTypeAttrs)) {\r\n                for (const key in elem.dataTypeAttrs) {\r\n                    if (Object.hasOwnProperty.call(elem.dataTypeAttrs, key)) {\r\n                        const vl = elem.dataTypeAttrs[key];\r\n                        this.setDataTypeAttribute(key, vl);\r\n\r\n                    }\r\n                }\r\n            }\r\n            // console.log(this, args, elem.contents);\r\n            if (!isEmpty(elem.contents)) {\r\n                for (var index = 0; index < elem.contents.length; index++) {\r\n                    this.append(elem.contents[index]);\r\n\r\n                }\r\n            }\r\n            if (!isEmpty(elem.events)) {\r\n                this.on(elem.events);\r\n            }\r\n\r\n            if (!isEmpty(elem.methods)) {\r\n                for (var method in elem.methods) {\r\n                    if (Object.hasOwnProperty.call(elem.methods, method)) {\r\n                        var fn = elem.methods[method];\r\n                        // console.log(method, fn)\r\n                        _defineProperty(this, method, fn);\r\n                    }\r\n                }\r\n            }\r\n            if (this._pendingContents.length) {\r\n                while (this._pendingContents.length) {\r\n                    var a = this._pendingContents.shift();\r\n                    this[a.key] = a.content;\r\n                    this.append(a.content);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    /**\r\n     * giống element\r\n     * @param {*} args thông tin element\r\n     */\r\n    final$setup: function setElement(args) {\r\n        return this.setElement.apply(this, getArguments(arguments));\r\n    },\r\n    final$setDataTypeAttribute: function (key, value, sync) {\r\n        if (!((isObject(value) && (value.isObjectData || value.isArrayData) || value.isPrimitive) || (isFunction(value) && value.isPrimitive))) return sync ? this.addDynamicAttr(key, value) : this.setAttribute(key, value);\r\n        this.__dataSync__ = false;\r\n        this.setAttribute(key, value.__toData__());\r\n        var vl = value;\r\n        if (this.__dataTypes__[key] === undefined) {\r\n            var self = this;\r\n            this.__dataTypes__[key] = value;\r\n            value.__addChangeEvent__(function (e) {\r\n                self.__dataSync__ = false;\r\n                self.__syncOnChange__ = false;\r\n                vl = e.value;\r\n                this.setAttribute(key, e.value.__toData__());\r\n                self.__dataSync__ = true;\r\n                self.__syncOnChange__ = true;\r\n            });\r\n            Object.defineProperty(this, key, {\r\n                configurable: true,\r\n                enumerable: true,\r\n                get: function () {\r\n                    return vl;\r\n                },\r\n                set: function (value2) {\r\n                    if (vl.__PARENT__) {\r\n                        var key = vl.__PARENT__.keyOf(vl);\r\n                        if (key !== undefined) {\r\n                            self.__syncOnChange__ = false;\r\n                            self.__dataSync__ = false;\r\n                            vl.__PARENT__[key] = value2;\r\n                            self.__dataSync__ = true;\r\n                            self.__syncOnChange__ = true;\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            if (sync) {\r\n                this.on(\"change\", function (e) {\r\n                    if (e.target == self.el) {\r\n                        var vlchange = self.attr(key);\r\n                        if (vlchange != vl.__toData__() && self.__syncOnChange__) {\r\n                            self.__syncOnChange__ = false;\r\n                            self[key] = vlchange;\r\n                            self.__syncOnChange__ = true;\r\n\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * Thêm thuộc tính động\r\n     * @param {string} attr tên thuộc tính\r\n     * @param {string|number} value \r\n     * @returns this\r\n     */\r\n    final$addDynamicAttr: function (attr, value) {\r\n        if (isString(attr)) {\r\n            var self = this;\r\n            if ((isObject(value) && (value.isObjectData || value.isArrayData) || value.isPrimitive) || (isFunction(value) && value.isPrimitive)) return this.setDataTypeAttribute(key, value);\r\n            this.attr(attr, value);\r\n            this.__addSetGetValue__({\r\n                key: attr,\r\n                value: value,\r\n                set: function (val) {\r\n                    self.__dynamicSync = false;\r\n                    var stt = true;\r\n                    this.trigger({\r\n                        type: \"change.attr.\" + attr,\r\n                        preventDefault: function () {\r\n                            stt = false;\r\n                        },\r\n                        target: this.el,\r\n                        data: {\r\n                            attr: attr,\r\n                            value: val\r\n                        }\r\n                    });\r\n\r\n                    if (stt) {\r\n                        this.__dynamicAttrs[attr] = val;\r\n                        this.attr(attr, val);\r\n\r\n                    }\r\n                    self.__dynamicSync = true;\r\n                },\r\n                get: function () {\r\n                    return this.dyna1micAttrs[attr] || null;\r\n                }\r\n            })\r\n        }\r\n        else if (isObject(attr)) {\r\n            for (var key in attr) {\r\n                if (Object.hasOwnProperty.call(attr, key)) {\r\n                    this.addDynamicAttr(key, attr[key]);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * chuẩn hóa hàn lắng nghe sự kiện\r\n     * @param {string|function} handler tên phương thức hoạc hàm handler\r\n     * @returns function\r\n     */\r\n\r\n    parseEventHandler: function (handler?: any) {\r\n        var self: any = this;\r\n        var element = this.el;\r\n\r\n        var fnt = handler ? handler : function (e) {\r\n            console.log(e);\r\n        };\r\n\r\n        if (typeof handler == \"string\") {\r\n            var instanceID: any = undefined;\r\n\r\n\r\n            var handleInfo = handler.split(\".\");\r\n            if (handleInfo.length == 2) {\r\n                instanceID = handleInfo[0];\r\n                handler = handleInfo[1];\r\n            }\r\n            var params = [];\r\n            var handleParams = handler.split(\":\");\r\n            if (handleParams.length == 2) {\r\n                handler = handleParams[0];\r\n                params = handleParams[1].split(\",\").map(function (s) { return s.trim(); });\r\n\r\n            }\r\n\r\n            if (this.parent && this.parent.isDom) {\r\n\r\n                if (!instanceID) {\r\n                    params.unshift(handler);\r\n                    var fn = self.getTreeMethod.apply(self, params);\r\n                    if (fn) {\r\n                        fnt = fn;\r\n                    }\r\n                    else fnt = function (e) {\r\n                        e.component = self;\r\n                        console.log(e);\r\n                    };\r\n                } else {\r\n                    fnt = function (e) {\r\n                        // e.preventDefault();\r\n                        e.component = self;\r\n                        var args = [e];\r\n\r\n                        params.map(function (p) { args.push(p); });\r\n                        if (!instanceID) {\r\n                            params.unshift(handler);\r\n                            var fn = self.getTreeMethod.apply(self, params);\r\n\r\n                            if (typeof fn == \"function\") {\r\n                                return fn.apply(self, args);\r\n                            }\r\n                        }\r\n\r\n                        if (typeof self[handler] == \"function\") {\r\n                            return self[handler].apply(self, args);\r\n                        } else {\r\n                            return self.callChildrenMethod(handler, args, instanceID);\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else {\r\n                fnt = function (e) {\r\n                    // e.preventDefault();\r\n                    e.component = self;\r\n                    var args = [e];\r\n                    params.map(function (p) { args.push(p); });\r\n                    if (!instanceID) {\r\n                        params.unshift(handler);\r\n                        var fn = self.getTreeMethod.apply(self, params);\r\n\r\n                        if (typeof fn == \"function\") {\r\n                            return fn.apply(self, args);\r\n                        }\r\n                    }\r\n\r\n                    if (typeof self[handler] == \"function\") {\r\n                        return self[handler].apply(self, args);\r\n                    } else {\r\n                        return self.callChildrenMethod(handler, args, instanceID);\r\n                    }\r\n                };\r\n            }\r\n\r\n        }\r\n        else if (typeof handler == \"function\") {\r\n            fnt = function (e) {\r\n                return handler.call(self, e);\r\n            };\r\n        }\r\n\r\n        return fnt;\r\n    },\r\n\r\n    /**\r\n     * lắng nghe sự kiện\r\n     * @param {string} type loại hoạc tên sự kiện\r\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\r\n     * @param {boolean} passed tham số báo có cần kiểm tra hay ko\r\n     * @returns this\r\n     */\r\n    addEventListener: function (type?: any, handler?: any, passed?: any) {\r\n        var self = this;\r\n        var element = this.el;\r\n        var listener = passed === DEFAULT_VALUE ? handler : this.parseEventHandler(handler);\r\n\r\n\r\n        if (this._listeners === undefined || this._listeners === null) this._listeners = {};\r\n\r\n        type = String(type).toLowerCase();\r\n\r\n\r\n\r\n        if (isDomEvent(type)) return this.addDomEvent(type, listener, DEFAULT_VALUE);\r\n        const listeners = this._listeners;\r\n\r\n        if (listeners[type] === undefined) {\r\n\r\n            listeners[type] = [];\r\n\r\n        }\r\n\r\n        if (listeners[type].indexOf(listener) === - 1) {\r\n\r\n            listeners[type].push(listener);\r\n\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    hasEventListener: function (type?: any, listener?: any) {\r\n\r\n        if (this._listeners === undefined || this._listeners === null) return false;\r\n\r\n        const listeners = this._listeners;\r\n        type = String(type).toLowerCase();\r\n        return listeners[type] !== undefined && listeners[type].indexOf(listener) !== - 1;\r\n\r\n    },\r\n\r\n    removeEventListener: function (type?: any, listener?: any) {\r\n\r\n        if (this._listeners === undefined || this._listeners === null) return;\r\n        type = String(type).toLowerCase();\r\n        if (isDomEvent(type)) return this.off.apply(getArguments(arguments));\r\n        const listeners = this._listeners;\r\n        const listenerArray = listeners[type];\r\n\r\n        if (listenerArray !== undefined) {\r\n\r\n            const index = listenerArray.indexOf(listener);\r\n\r\n            if (index !== - 1) {\r\n\r\n                listenerArray.splice(index, 1);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n\r\n    dispatchEvent: function (event?: any) {\r\n        if (this._listeners === undefined || this._listeners === null) return;\r\n\r\n        if (isDomEvent(event.type)) return this.trigger.apply(this, getArguments(arguments));\r\n        const listeners = this._listeners;\r\n        const listenerArray = listeners[event.type];\r\n\r\n        if (listenerArray !== undefined) {\r\n\r\n            var s = true;\r\n            event.target = this.el;\r\n\r\n            event.stopImmediatePropagation = function () {\r\n                s = false;\r\n            }\r\n            // Make a copy, in case listeners are removed while iterating.\r\n            const array = listenerArray.slice(0);\r\n\r\n            for (var i = 0, l = array.length; i < l; i++) {\r\n\r\n                array[i].call(this, event);\r\n                if (!s) break;\r\n\r\n            }\r\n            return s;\r\n\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * lắng nghe sự kiện của dom\r\n     * @param {string} type loại hoạc tên sự kiện\r\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\r\n     * @param {boolean} passed tham số báo có cần kiểm tra hay ko\r\n     * @returns this\r\n     */\r\n    addDomEvent: function (event?: any, handler?: any, passed?: any) {\r\n        var self = this;\r\n        var element = this.el;\r\n        var listener = passed === DEFAULT_VALUE ? handler : this.parseEventHandler(handler);\r\n\r\n\r\n        if (!isDomEvent(event)) return this.addEventListener(event, listener, DEFAULT_VALUE);\r\n\r\n        event.split(\" \").filter(function (evt) { return (allEvents.indexOf(evt) >= 0); }).map(function (evt) {\r\n            addEvent(element, evt, listener, null);\r\n        });\r\n        return this;\r\n    },\r\n    hasEvent: function (event?: any, listener?: any) {\r\n        return isDomEvent(event) ? hasEvent(this.el, event, listener) : this.hasEventListener(event, listener);\r\n    },\r\n    /**\r\n     * Huỷ sự kiện \r\n     * @param {string} events Danh sách sự kiện\r\n     * @param {function} handler \r\n     * @returns {Query|Dom}\r\n     */\r\n    off: function (events?: any, handler?: any) {\r\n        handler = handler || null;\r\n        if (this.el) {\r\n            var evs = (events && events.length) ? events.split(\" \") : domEvents;\r\n            if (evs.length) {\r\n                for (var j = 0; j < evs.length; j++) {\r\n                    var ev = evs[j];\r\n                    if (!isDomEvent(ev)) {\r\n                        this.removeEventListener(ev, handler);\r\n                    }\r\n                    else {\r\n                        removeEvent(this.el, ev, null, handler);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    /**\r\n     * Gán sự kiện\r\n     * @param {string|Event} event sự kiện\r\n     * @returns {Query|Dom}\r\n     */\r\n    trigger: function trigger(event?: any, data?: any) {\r\n        var ev = isString(event) ? event : (event ? event.type : null);\r\n        var e = !isObject(event) ? { type: ev } : event;\r\n        var el = this.el;\r\n        if (!e.target) {\r\n            e.target = el;\r\n        }\r\n        if (!e.data && data !== undefined) e.data = data;\r\n        if (!isDomEvent(ev)) return this.dispatchEvent(e);\r\n\r\n        triggerEvent(el, ev, e);\r\n        return this;\r\n    },\r\n\r\n    emit: function(){\r\n        return this.trigger.apply(this, arguments);\r\n    },\r\n    /**\r\n     * Huỳ sự kiện\r\n     */\r\n    unbind: function () {\r\n        this.off.apply(this, arguments);\r\n        return this;\r\n    },\r\n    /**\r\n     * lang nghe su kien\r\n     * @param {string} event tên sự kiện\r\n     * @param {function(Event)} handler hàm xử lý sự kiện\r\n     * @returns {this}\r\n     * \r\n     */\r\n    on: function on(event?: any, handler?: any) {\r\n        if (isString(event)) {\r\n            var args = getArguments(arguments);\r\n            var self = this;\r\n\r\n            var s = event.toLowerCase().split(\".\");\r\n            if (event == 'transmission' || (s.length > 1 && s[0] == 'transmission')) {\r\n                event = event.toLowerCase();\r\n                if (typeof handler != \"function\") return this;\r\n                if (event != 'transmission') {\r\n                    if (typeof this.__transmissionEventListeners.events[event] == \"undefined\") {\r\n                        this.__transmissionEventListeners.events[event] = [];\r\n                    }\r\n                    this.__transmissionEventListeners.events[event].push(handler);\r\n                } else {\r\n                    if (typeof this.__transmissionEventListeners.events.transmission == \"undefined\") {\r\n                        this.__transmissionEventListeners.events.transmission = [];\r\n                    }\r\n                    this.__transmissionEventListeners.events.transmission.push(handler);\r\n                }\r\n                return this;\r\n            }\r\n            else if (isDomEvent(event)) {\r\n                self.addDomEvent.apply(this, args);\r\n            } else {\r\n                this.addEventListener(event, handler);\r\n            }\r\n\r\n        }\r\n        else if (isObject(event)) {\r\n            for (var key in event) {\r\n                if (Object.hasOwnProperty.call(event, key)) {\r\n                    this.on(key, event[key]);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    /**\r\n     * lấy về một callback đến hàm hiện tại\r\n     * @param {string} method tên phương thức\r\n     * @returns function(e:Event)\r\n     */\r\n    const$fn: function fn(method?: any) {\r\n        var self = this;\r\n        if (!isString(method) || typeof self[method] != \"function\") return function (e) { console.log(e) };\r\n        var args = getArguments(arguments);\r\n        var fn = self[method];\r\n        return function (e) {\r\n            e.component = this;\r\n            args[0] = e;\r\n            return fn.apply(self, args);\r\n        };\r\n    },\r\n    /**\r\n     * lấy về một callback đến hàm hiện tại\r\n     * @param {string} method tên phương thức\r\n     * @returns {function(Event)}\r\n     */\r\n    const$getTreeMethod: function getTreeMethod(method?: any) {\r\n        var self = this;\r\n        if (!isString(method)) return function (e) { console.log(e) };\r\n        var args = getArguments(arguments);\r\n        if (typeof self[method] != \"function\") {\r\n            if (this.parent && typeof this.parent.getTreeMethod == \"function\") {\r\n                return this.parent.getTreeMethod.apply(this.parent, args);\r\n            }\r\n            return null;\r\n        }\r\n\r\n        var fn = self[method];\r\n        return function (e) {\r\n            e.component = this;\r\n            args[0] = e;\r\n            return fn.apply(self, args);\r\n        };\r\n    },\r\n    /**\r\n     * Kiểm tra phần từ có trùng khớp với trạng thái hay phần tử đầu vào hay không\r\n     * @param {string|Element} selector \r\n     * @returns {boolean}\r\n     */\r\n    is: function is(selector?: any, el?: any) {\r\n        var e = null;\r\n        if (el) {\r\n            if (isObject(el)) {\r\n                if (el.isDom) {\r\n                    e = el.el;\r\n                }\r\n                else if (_instanceof(el, Element)) {\r\n                    e = el;\r\n                }\r\n                else return false;\r\n            }\r\n            else if (isString(el)) {\r\n                var elm = $document.querySelectorAll(el);\r\n                if (elm.length) {\r\n                    e = elm;\r\n                }\r\n                else return false;\r\n            }\r\n            else return false;\r\n        }\r\n        else if (this.el) {\r\n            e = this.el;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n\r\n\r\n        if (isString(selector)) {\r\n            if (selector.length > 1 && selector.substring(0, 1) == \":\") {\r\n                var s = selector.substring(1);\r\n                if (_instanceof(e, Element)) return (typeof e[s] != 'undefined' && e[s]) ? true : false;\r\n                for (let i = 0; i < e.length; i++) {\r\n                    const ell = e[i];\r\n                    if (typeof ell[s] != 'undefined' && ell[s]) return true;\r\n                }\r\n                return false;\r\n            }\r\n            var elem = $document.querySelectorAll(selector);\r\n            for (let i = 0; i < elem.length; i++) {\r\n                const ele = elem[i];\r\n                if (_instanceof(e, Element)) {\r\n                    if (e == ele) return true;\r\n                }\r\n                else if (e.length) {\r\n                    for (let j = 0; j < e.length; j++) {\r\n                        const ee = e[j];\r\n                        if (ee == ele) return true;\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n        if (selector instanceof Element) {\r\n            if (_instanceof(e, Element)) {\r\n                if (e == selector) return true;\r\n            }\r\n            else if (e.length) {\r\n                for (let j = 0; j < e.length; j++) {\r\n                    const ee = e[j];\r\n                    if (ee == selector) return true;\r\n                }\r\n            }\r\n        }\r\n        if (isObject(selector) && selector.isDom) {\r\n            if (_instanceof(e, Element)) {\r\n                if (e == selector.el) return true;\r\n            }\r\n            else if (e.length) {\r\n                for (let j = 0; j < e.length; j++) {\r\n                    const ee = e[j];\r\n                    if (ee == selector.el) return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    closest: function (selector?: any, el?: any) {\r\n        if (!(el instanceof Element)) el = this.el;\r\n        return closest(selector, el);\r\n    },\r\n\r\n\r\n    getProp: function (prop?: any, all?: any) {\r\n        if (!this.el) return \"\";\r\n        return (typeof this.el[prop] != \"undefined\") ? this.el[prop] : null;\r\n    },\r\n    setProp: function (prop?: any, value?: any) {\r\n        if (!this.el) return this;\r\n        var props = {};\r\n        if (typeof prop == \"object\") {\r\n            props = prop\r\n        } else {\r\n            props[prop] = value;\r\n        }\r\n        // var elements = this.getElements();\r\n        for (var p in props) {\r\n            if (props.hasOwnProperty(p)) {\r\n                var val = props[p];\r\n                this.el[prop] = val;\r\n            }\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    removeProp: function (prop?: any) {\r\n        if (typeof prop != \"undefined\") {\r\n            if (isString(prop)) prop = [prop];\r\n            if (isArray(prop)) {\r\n                prop.map(function (p) {\r\n                    if (isString(p)) {\r\n                        delete this.el[p];\r\n                    }\r\n                })\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * \r\n     * @param {string|string{}} prop \r\n     * @param {*} value \r\n     */\r\n    prop: function (prop?: any, value?: any) {\r\n        if (!this.el) return this;\r\n        if (prop) {\r\n            if (typeof value != \"undefined\") {\r\n\r\n                if (value === false) {\r\n                    this.el[prop] = value;\r\n                    delete this.el[prop];\r\n                }\r\n                else this.el[prop] = value;\r\n                return this;\r\n            } else {\r\n                return this.el[prop] || null;\r\n            }\r\n        } else {\r\n            var props = {};\r\n            for (var key in this[0]) {\r\n                if (this.el.hasOwnProperty(key)) {\r\n                    var propVal = this.el[key];\r\n                    props[key] = propVal;\r\n                }\r\n            }\r\n            return props;\r\n        }\r\n    },\r\n    val: function val(value?: any) {\r\n        if (typeof value == \"undefined\" || value === null) {\r\n            var input = this.el;\r\n            var tag = input.tagName.toLowerCase();\r\n            var type = input.getAttribute(\"type\");\r\n            if (tag == \"textarea\" || type == \"textarea\") {\r\n                return input.value || input.innerText;\r\n            } else if ([\"radio\", \"checkbox\"].indexOf(type) >= 0) {\r\n                if (input.checked) {\r\n                    if (input.value != undefined) {\r\n                        return input.value;\r\n                    } else {\r\n                        return \"on\";\r\n                    }\r\n                }\r\n                return null;\r\n            }\r\n            else {\r\n                return input.value;\r\n            }\r\n        } else {\r\n            var input = this.el;\r\n            var tag = input.tagName.toLowerCase();\r\n            if (tag == \"textarea\") {\r\n                input.innerText = value\r\n            } else {\r\n                input.value = value;\r\n            }\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    getHtml: function () {\r\n        if (!this.el || isGlobalOrRoot(this.el)) return \"\";\r\n        return this.el.innerHTML;\r\n    },\r\n    setHtml: function (html?: any) {\r\n        if (this.el) {\r\n            this.removeChild();\r\n            this.el.innerHTML = html;\r\n        }\r\n        return this;\r\n    },\r\n    html: function (str?: any) {\r\n        if (this.el) {\r\n            if (typeof str == \"undefined\" || str === null) {\r\n                return this.getHtml();\r\n            } else {\r\n                this.setContent(str)\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    getAttribute: function (attr?: any) {\r\n        return this.el ? this.el.getAttribute(attr) : null;\r\n    },\r\n    setAttribute: function (attr?: any, value?: any) {\r\n        this.el.setAttribute(attr, value);\r\n        return this;\r\n    },\r\n    attr: function attr(attr?: any, value?: any) {\r\n        if (typeof attr == \"undefined\" || attr === null) {\r\n            return this.el ? this.el.attributes : {};\r\n        }\r\n        else if ((typeof value == \"undefined\" || value === null) && typeof attr != \"object\") {\r\n            return this.getAttribute(attr);\r\n        }\r\n        else if (typeof attr != \"undefined\" && getType(attr) == \"object\") {\r\n\r\n            for (var key in attr) {\r\n                if (attr.hasOwnProperty(key)) {\r\n                    var ava = attr[key];\r\n                    this.setAttribute(key, value)\r\n                }\r\n            }\r\n        }\r\n\r\n        return this.setAttribute(attr, value)\r\n    },\r\n    attrData: function (key?: any) {\r\n        if (!this.el) return null;\r\n        if (!this.__data) {\r\n            var data = {};\r\n            var dataRaw = {};\r\n\r\n            var attrs = this.el.attributes;\r\n            if (attrs.length) {\r\n                for (var i = 0; i < attrs.length; i++) {\r\n                    var attr = attrs[i];\r\n                    if (attr.name.toLowerCase().indexOf(\"data-\") === 0) {\r\n                        var a = attr.name.substring(5);\r\n                        dataRaw[a] = attr.value;\r\n                        var b = a.split(\"-\");\r\n                        var c = b.shift();\r\n                        var d = b.map(function (v) { return Str.ucfirst(v) });\r\n                        var k = c + (d.length ? d.join(\"\") : \"\");\r\n                        data[k] = attr.value;\r\n                    }\r\n                }\r\n            }\r\n            this.__addSetGetValue__({\r\n                key: '__data',\r\n                value: {\r\n                    raw: dataRaw,\r\n                    parse: data\r\n                }\r\n            });\r\n        }\r\n        if (typeof key == \"undefined\" || key == null) {\r\n            return this.__data.parse;\r\n        }\r\n        if (typeof key == \"string\") {\r\n            return (typeof this.__data.raw[key] != \"undefined\") ? this.__data.raw[key] : null;\r\n        }\r\n        if (isArray(key)) {\r\n            var arrData = {};\r\n            for (var i = 0; i < key.length; i++) {\r\n                var kk = key[i];\r\n                if (typeof this.__data.raw[kk] != \"undefined\") {\r\n                    arrData[kk] = this.__data.raw[kk];\r\n                }\r\n            }\r\n            return arrData;\r\n        }\r\n        return null;\r\n    },\r\n    /**\r\n     * thêm class\r\n     * @param {string} className \r\n     */\r\n    addClass: function (className?: any) {\r\n        var classlist = [];\r\n        var mapFunc = function (val) {\r\n            if (isString(val)) {\r\n                classlist.push(val);\r\n            } else if (isArray(val)) {\r\n                val.map(mapFunc);\r\n            }\r\n        };\r\n        if (arguments.length) {\r\n            for (var i = 0; i < arguments.length; i++) {\r\n                var arg = arguments[i];\r\n                if (isString(arg)) {\r\n                    mapFunc(arg.split(\" \").map(function (v) {\r\n                        return v.trim();\r\n                    }).filter(function (v) { return v.length > 0 }));\r\n                } else {\r\n                    mapFunc(arg);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        var self = this;\r\n        classlist.map(function (str) {\r\n            self.el.classList.add(str);\r\n        });\r\n        return this;\r\n    },\r\n\r\n    removeClass: function (classname?: any) {\r\n        var classlist = [];\r\n        var mapFunc = function (val?: any) {\r\n            if (isString(val)) {\r\n                classlist.push(val);\r\n            } else if (isArray(val)) {\r\n                val.map(mapFunc);\r\n            }\r\n        };\r\n        var args = [];\r\n        var self = this;\r\n        if (arguments.length) {\r\n            for (var i = 0; i < arguments.length; i++) {\r\n                var arg = arguments[i];\r\n                if (isString(arg)) {\r\n                    mapFunc(arg.split(\" \").map(function (v) {\r\n                        return v.trim();\r\n                    }).filter(function (v) { return v.length > 0 }));\r\n                } else {\r\n                    mapFunc(arg);\r\n                }\r\n            }\r\n            classlist.map(function (str) {\r\n                self.el.classList.remove(str);\r\n            });\r\n        } else {\r\n            self.el.className = \"\";\r\n        }\r\n        return this;\r\n    },\r\n\r\n    hasClass: function (classname?: any) {\r\n        if (this.el) {\r\n            return this.el.classList.contains(classname);\r\n        }\r\n        return false;\r\n    },\r\n\r\n    css: function (prop?: any, value?: any) {\r\n        var self = this;\r\n        if (!this.el) {\r\n            return {};\r\n        }\r\n        else if (!prop) {\r\n            return this.el.style;\r\n        }\r\n        else if (isString(prop) && isEmpty(value)) {\r\n            var style = this.el.style;\r\n            var p = Str.camelToSlug(prop, '-');\r\n            var s = p[0].toLowerCase() + prop.substr(1);\r\n            if (Object.hasOwnProperty.call(style, p)) return style[p];\r\n            if (Object.hasOwnProperty.call(style, s)) return style[s];\r\n            return \"\";\r\n        }\r\n        if (isString(prop)) {\r\n            setCssProp(this.el, prop, value);\r\n        } else if (isObject(prop)) {\r\n            for (var key in prop) {\r\n                if (prop.hasOwnProperty(key)) {\r\n                    var v = prop[key];\r\n                    setCssProp(this.el, key, v);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    height: function (height?: any) {\r\n        return typeof height == \"undefined\" ? (this.el ? (this.el.clientHeight || this.el.offsetHeight) : 0) : this.css({ height: height });\r\n    },\r\n    width: function (width?: any) {\r\n        return typeof width == \"undefined\" ? (this.el ? (this.el.clientWidth || this.el.offsetWidth) : 0) : this.css({ width: width });\r\n    },\r\n    /**\r\n     * Thêm phần tử con vào cuối danh danh sách phần tử con của element\r\n     * @param {*} child \r\n     * @returns {DomElement}\r\n     */\r\n    const$append: function (child?: any) {\r\n        if (typeof child == \"undefined\" || isNull(child) || simpleTags.indexOf(this.tagName) !== -1) return this;\r\n        var self = this;\r\n        if (isFunction(child) && child.isDomClass) child = child('#inp-' + Str.rand());\r\n        if (isObject(child)) {\r\n            if (child.isDom) {\r\n                child.parent = this;\r\n                this.el.appendChild(child.el);\r\n                this.children.push(child);\r\n            }\r\n            else if (child.isDomQuery) {\r\n                this.el.appendChild(child.el);\r\n                this.children.push(child);\r\n            }\r\n            else if (child.isQuery) {\r\n                child.map(function (el) {\r\n                    self.el.appendChild(el);\r\n                });\r\n                this.children.push(child);\r\n            }\r\n            else if (child instanceof Element) {\r\n                this.el.appendChild(child);\r\n                this.children.push(child);\r\n            }\r\n        }\r\n        else if (isArray(child)) {\r\n            for (var index = 0; index < child.length; index++) {\r\n                this.append(child[index]);\r\n\r\n            }\r\n        } else if (child instanceof Element) {\r\n            this.el.appendChild(child);\r\n            this.children.push(child);\r\n        }\r\n        else {\r\n            var c = parse(child);\r\n            if (c) {\r\n                this.el.appendChild(c);\r\n                this.children.push(c);\r\n            }\r\n\r\n\r\n        }\r\n\r\n        return this;\r\n    },\r\n    /**\r\n     * Thêm phần tử con vào Đầu danh sách phần tử con cvua3 element\r\n     * @param {*} child \r\n     * @returns {Query|Dom}\r\n     */\r\n    const$prepend: function (child?: any) {\r\n        if (typeof child == \"undefined\" || isNull(child) || simpleTags.indexOf(this.tagName) !== -1) return this;\r\n\r\n        var self = this;\r\n        if (isFunction(child) && child.isDomClass) child = child('#inp-' + Str.rand());\r\n\r\n        if (isObject(child)) {\r\n            if (child.isDom) {\r\n                child.parent = self;\r\n                this.children.unshift(child);\r\n                this.el.insertBefore(child.el, this.el.firstChild);\r\n            }\r\n            else if (child.isDomQuery) {\r\n                this.el.insertBefore(child.el, this.el.firstChild);\r\n                this.children.unshift(child);\r\n            }\r\n            else if (child.isQuery) {\r\n                for (var index = child.length - 1; index > -1; index--) {\r\n                    const c = child[index];\r\n                    this.el.insertBefore(c, this.el.firstChild);\r\n                }\r\n                this.children.unshift(child);\r\n            }\r\n            else if (child instanceof Element) {\r\n                this.el.insertBefore(child, this.el.firstChild);\r\n                this.children.unshift(child);\r\n            }\r\n\r\n\r\n        } else {\r\n            var c = parse(child);\r\n            this.el.insertBefore(c, this.el.firstChild);\r\n            this.children.unshift(c);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Thêm phần tử con vào cuối danh danh sách phần tử con cvua3 element\r\n     * @param {*} parent \r\n     * @returns {Query|Dom}\r\n     */\r\n\r\n    const$appendTo: function (parent?: any) {\r\n        if (typeof parent == \"undefined\") return this;\r\n        if (parent.isDom) {\r\n            parent.append(this);\r\n        } else if (parent instanceof Element) {\r\n            parent.appendChild(this.el);\r\n            this.___parentNode___ = parent;\r\n\r\n        }\r\n        else if (isString(parent)) {\r\n            var domEl = $document.querySelector(parent);\r\n            if (domEl && _instanceof(domEl, Element)) {\r\n                domEl.appendChild(this.el);\r\n                this.___parentNode___ = domEl;\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    const$prependTo: function (parent?: any) {\r\n        if (typeof parent == \"undefined\") return this;\r\n        if (parent.isDom) {\r\n            parent.prepend(this);\r\n        } else if (parent instanceof Element) {\r\n            parent.insertBefore(this.el, parent.firstChild);\r\n            this.___parentNode___ = parent;\r\n        } else if (isString(parent)) {\r\n            var domEl = $document.querySelector(parent);\r\n            if (domEl && _instanceof(domEl, Element)) {\r\n                domEl.insertBefore(this.el, domEl.firstChild)\r\n                this.___parentNode___ = domEl;\r\n            }\r\n        }\r\n\r\n\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * kiểm tra vó phần tử dom con của el hay không\r\n     * @param {Element} child Dom Element - phàn tử html con cần kiểm tra\r\n     * @returns {boolean}\r\n     */\r\n    hasDomChild: function (child?: any) {\r\n        if (_instanceof(child, Element)) {\r\n            if (this.el.children.length) {\r\n                for (var index = 0; index < this.el.children.length; index++) {\r\n                    var chl = this.el.children[index];\r\n                    if (chl === child) return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    removeDomChild: function (child?: any) {\r\n        if (this.hasDomChild(child)) {\r\n            this.el.removeChild(child);\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * xóa phần tử con\r\n     * @param {Element|Dom|DomElement|Dom.Query} child \r\n     * @param {boolean} removeDomEl Xóa dom el\r\n     */\r\n    final$removeChild: function (child?: any, removeDomEl?: any) {\r\n        if (typeof removeDomEl == \"undefined\") removeDomEl = true;\r\n        if (!isBoolean(removeDomEl)) removeDomEl = true;\r\n\r\n        if (child) {\r\n            var self = this;\r\n            if (child.isDom || child.isDomQuery) {\r\n                if (removeDomEl) {\r\n                    this.removeDomChild(child.el);\r\n                }\r\n            }\r\n            else if (child.isQuery) {\r\n                child.map(function (ch) {\r\n                    try {\r\n                        self.el.removeChild(ch)\r\n                    } catch (error) {\r\n                        if (ch.parentNode) {\r\n                            ch.parentNode.removeChild(ch)\r\n                        }\r\n                    }\r\n\r\n                });\r\n\r\n            }\r\n            else if (child instanceof Element) {\r\n                this.removeDomChild(child);\r\n\r\n            }\r\n\r\n            if (!isArray(this.children)) return this;\r\n\r\n            for (var index = 0; index < this.children.length; index++) {\r\n                const c = this.children[index];\r\n                if (c == child) {\r\n                    this.children.splice(index, 1);\r\n                }\r\n            }\r\n            if (this.children.length == 0) {\r\n                this.el.innerHTML = \"\";\r\n            }\r\n        }\r\n        else {\r\n            if (!isArray(this.children)) return this;\r\n\r\n            while (this.children.length) {\r\n                this.removeChild(this.children[0]);\r\n            }\r\n        }\r\n        return this;\r\n\r\n    },\r\n\r\n    /**\r\n     * Xóa\r\n     */\r\n    final$remove: function () {\r\n        var children = getArguments(arguments);\r\n        if (children.length) {\r\n            var self = this;\r\n            children.map(function (child) {\r\n                self.removeChild(child);\r\n            });\r\n        }\r\n        else if (this.parent) {\r\n            this.parent.removeChild(this);\r\n        }\r\n        else if (this.el.parentNode) {\r\n            this.el.parentNode.removeChild(this.el);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * thay thế / thêm nội dung cho thẻ\r\n     * @param {Element|DomElement|string|Element[]|DomElement[]|string[]} content nội dung\r\n     */\r\n    final$setContent: function (content?: any) {\r\n        this.removeChild();\r\n        return this.append(content);\r\n    },\r\n\r\n\r\n    final$stopTransmission: function () {\r\n        this.__transmissionStatus = false;\r\n    },\r\n\r\n\r\n    /**\r\n     * nhận dữ liệu giữ các component cha -> con\r\n     * @param {string} channel tên sự kiện\r\n     * @param {*} data dữ liệu bất kỳ\r\n     */\r\n    final$receiveFromParent: function receiveFromParent(channel?: any, data?: any, sentId?: any) {\r\n        var next = true;\r\n        var self = this;\r\n        var a = 0;\r\n        var stop = false;\r\n        var arr, fn, s = undefined;\r\n        var eventData = {\r\n            type: \"\",\r\n            preventDefault: function () {\r\n                next = false;\r\n                a++;\r\n            },\r\n            stopTransmission: function () {\r\n                next = false;\r\n                self.stopTransmission();\r\n                a++;\r\n            },\r\n            stopPropagation: function stopPropagation() {\r\n                self.stopTransmission();\r\n                next = false;\r\n                a++;\r\n            },\r\n            data: data\r\n        };\r\n\r\n        if (Object.hasOwnProperty.call(this.__transmissionEventListeners.fromParent, channel)) {\r\n            arr = this.__transmissionEventListeners.fromParent[channel];\r\n            try {\r\n                if (arr.length) {\r\n                    for (var index = 0; index < arr.length; index++) {\r\n                        fn = arr[index];\r\n                        if (typeof fn == \"function\") {\r\n                            a++;\r\n                            s = fn.call(this, data);\r\n                            if (s === false) {\r\n                                next = false;\r\n                                self.parent.stopTransmission();\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }\r\n\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        if (next) {\r\n            if (!a) {\r\n                var c = Str.replace(\r\n                    Str.ucword(\r\n                        channel.split(\"-\").join(\" \")\r\n                    ),\r\n                    \" \",\r\n                    \"\"\r\n                );\r\n                var listFn = [\r\n                    \"onReceive\" + c + \"FromParent\",\r\n                    \"on\" + c + \"FromParent\",\r\n                    \"onReceive\" + c + \"Data\",\r\n                    \"onReceive\" + c,\r\n                    \"onParent\" + c + \"Data\"\r\n                ];\r\n                var mt = \"\";\r\n                for (var i = 0; i < listFn.length; i++) {\r\n                    mt = listFn[i];\r\n                    if (next && typeof self[mt] == \"function\") {\r\n                        var stt = self[mt].call(self, data);\r\n                        if (stt === false) {\r\n                            next = false;\r\n                            self.parent.stopTransmission();\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (next) {\r\n            var slug = channel.toLowerCase();\r\n            var mtfs = [\"transmission.fromparent.\" + slug, \"transmission.fromparent\", \"transmission\"];\r\n            var mt = \"\";\r\n            for (var n = 0; n < mtfs.length; n++) {\r\n                mt = mtfs[n];\r\n                if (next && Object.hasOwnProperty.call(self.__transmissionEventListeners.events, mt)) {\r\n                    eventData.type = mt;\r\n                    arr = self.__transmissionEventListeners.events[mt];\r\n                    if (arr.length) {\r\n                        for (var index = 0; index < arr.length; index++) {\r\n                            fn = arr[index];\r\n                            if (typeof fn == \"function\") {\r\n                                // a++;\r\n                                s = fn.call(self, eventData);\r\n                                if (s === false || !next) {\r\n                                    next = false;\r\n                                    self.parent.stopTransmission();\r\n                                    index += arr.length;\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                }\r\n                if (!next) break;\r\n\r\n            }\r\n        }\r\n        // truyền cho các thằng con\r\n        if (next) {\r\n            this.__sendToChildren__(channel, data, sentId);\r\n        }\r\n    },\r\n    /**\r\n     * tuyền dữ liệu giữ các component cha -> con\r\n     * @param {string} channel tên sự kiện\r\n     * @param {*} data dữ liệu bất kỳ\r\n     * @param {string} sentId id của class gửi\r\n     */\r\n    final$__sendToChildren__: function (channel?: any, data?: any, sentId?: any) {\r\n        var instanceID = this.getInstanceID();\r\n        if (!sentId) sentId = instanceID;\r\n        this.__transmissionStatus = true;\r\n        // truyền cho các thằng con\r\n        if (this.children.length) {\r\n            for (var i = 0; i < this.children.length; i++) {\r\n                var child = this.children[i];\r\n                if (typeof child.receiveFromParent == \"function\") {\r\n                    child.receiveFromParent(channel, data, sentId);\r\n                    if (this.__transmissionStatus == false) {\r\n                        if (sentId != instanceID && this.parent) {\r\n                            this.parent.stopTransmission();\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.__transmissionStatus = true;\r\n        return this;\r\n    },\r\n    /**\r\n     * tuyền dữ liệu giữ các component cha -> con\r\n     * @param {string} channel tên sự kiện\r\n     * @param {*} data dữ liệu bất kỳ\r\n     */\r\n    final$sendToChildren: function (channel?: any, data?: any) {\r\n        return this.__sendToChildren__(channel, data);\r\n    },\r\n    /**\r\n     * Nhận dữ liệu từ cha\r\n     * @param {string} channel tên đường truyền\r\n     * @param {function} handler \r\n     * @returns {DomElement}\r\n     */\r\n    final$onParentTransmission: function (channel?: any, handler?: any) {\r\n        if (isString(channel) && isFunction(handler)) {\r\n            if (typeof this.__transmissionEventListeners.fromParent[channel] == \"undefined\") {\r\n                this.__transmissionEventListeners.fromParent[channel] = [];\r\n            }\r\n            this.__transmissionEventListeners.fromParent[channel].push(handler);\r\n        }\r\n        if (isObject(channel)) {\r\n            for (var s in channel) {\r\n                if (Object.hasOwnProperty.call(channel, s)) {\r\n                    if (typeof channel[s] == \"function\") {\r\n                        this.onParentTransmission(s, channel[s]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    /**\r\n     * Nhận dữ liệu từ cha\r\n     * @param {string} channel tên đường truyền\r\n     * @param {function} handler \r\n     * @returns {DomElement}\r\n     */\r\n    final$onParentData: function (channel?: any, handler?: any) {\r\n        return this.onParentTransmission(channel, handler);\r\n    },\r\n\r\n    /**\r\n     * tuyền dữ liệu giữ các component con -> cha\r\n     * @param {string} channel tên sự kiện\r\n     * @param {*} data dữ liệu bất kỳ\r\n     */\r\n    final$receiveFromChildren: function (channel?: any, data?: any) {\r\n        var self = this;\r\n        var next = true;\r\n        var a = 0;\r\n        var arr, fn, s = undefined;\r\n        this.__transmissionStatus = true;\r\n        if (Object.hasOwnProperty.call(this.__transmissionEventListeners.fromChildren, channel)) {\r\n            arr = this.__transmissionEventListeners.fromChildren[channel];\r\n            if (arr.length) {\r\n                for (var index = 0; index < arr.length; index++) {\r\n                    fn = arr[index];\r\n                    if (typeof fn == \"function\") {\r\n                        a++;\r\n                        s = fn.call(this, data);\r\n                        if (s === false) {\r\n                            next = false;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        if (next) {\r\n            if (!a) {\r\n                var c = Str.replace(\r\n                    Str.ucword(\r\n                        channel.split(\"-\").join(\" \")\r\n                    ),\r\n                    \" \",\r\n                    \"\"\r\n                );\r\n\r\n                var fnList = [\"onReceive\" + c + \"FromChildren\", \"on\" + c + \"FromChildren\", \"onChildren\" + c + \"Data\", \"onReceive\" + c, \"onReceive\" + c + \"Data\"];\r\n                fnList.map(function (mt, i) {\r\n                    if (next && typeof self[mt] == \"function\") {\r\n\r\n                        var stt = self[mt].call(self, data);\r\n                        if (stt === false) {\r\n                            next = false\r\n                        }\r\n                    }\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n        if (next) {\r\n            var eventData = {\r\n                type: \"\",\r\n                preventDefault: function () {\r\n                    next = false;\r\n                    a++;\r\n                },\r\n                stopTransmission: function () {\r\n                    next = false;\r\n                    self.stopTransmission();\r\n                    a++;\r\n                },\r\n                stopPropagation: function stopPropagation() {\r\n                    self.stopTransmission();\r\n                    next = false;\r\n                    a++;\r\n                },\r\n                data: data\r\n            }\r\n\r\n            var slug = channel.toLowerCase();\r\n            [\"transmission.fromchildren.\" + slug, \"transmission.fromchildren\", \"transmission\"].map(function (mt) {\r\n                if (next && Object.hasOwnProperty.call(self.__transmissionEventListeners.events, mt)) {\r\n                    eventData.type = mt;\r\n                    arr = self.__transmissionEventListeners.events[mt];\r\n\r\n                    if (arr.length) {\r\n                        for (var index = 0; index < arr.length; index++) {\r\n                            fn = arr[index];\r\n                            if (typeof fn == \"function\") {\r\n                                // a++;\r\n                                s = fn.call(self, eventData);\r\n                                if (s === false || !next) {\r\n                                    next = false;\r\n                                    self.parent.stopTransmission();\r\n                                    break;\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                }\r\n\r\n            });\r\n\r\n\r\n\r\n        }\r\n        // truyền cho các thằng con\r\n        if (next && this.parent) {\r\n\r\n            this.sendToParent(channel, data);\r\n        }\r\n        this.__transmissionStatus = true;\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * tuyền dữ liệu giữ các component con -> cha\r\n     * @param {string} channel tên sự kiện\r\n     * @param {*} data dữ liệu bất kỳ\r\n     */\r\n    final$sendToParent: function (channel?: any, data?: any) {\r\n        if (this.parent && this.parent != this && this.parent.receiveFromChildren) {\r\n            this.parent.receiveFromChildren(channel, data);\r\n        } else {\r\n            console.warn(\"Không có đối tượng cha\");\r\n        }\r\n        return this;\r\n    },\r\n\r\n\r\n\r\n    /**\r\n     * Nhận dữ liệu từ con\r\n     * @param {string} channel tên đường truyền\r\n     * @param {function} handler \r\n     * @returns {DomElement}\r\n     */\r\n    final$onChildrenTransmission: function (channel?: any, handler?: any) {\r\n        if (isString(channel) && isFunction(handler)) {\r\n            if (typeof this.__transmissionEventListeners.fromChildren[channel] == \"undefined\") {\r\n                this.__transmissionEventListeners.fromChildren[channel] = [];\r\n            }\r\n            this.__transmissionEventListeners.fromChildren[channel].push(handler);\r\n        }\r\n        if (isObject(channel)) {\r\n            for (var s in channel) {\r\n                if (Object.hasOwnProperty.call(channel, s)) {\r\n                    if (typeof channel[s] == \"function\") {\r\n                        this.onChildrenTransmission(s, channel[s]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Nhận dữ liệu từ con\r\n     * @param {string} channel tên đường truyền\r\n     * @param {function} handler \r\n     * @returns {DomElement}\r\n     */\r\n    final$onChildrenData: function (channel?: any, handler?: any) {\r\n        return this.onChildrenTransmission(channel, handler);\r\n    },\r\n\r\n    /**\r\n     * gọi phương thức của cha, ngược cây phả hệ cho đến khi có tồn tại phương thức dược định nghĩa hoặc hết cây phả hệ\r\n     * @param {string} method tên phuong thức của thằng cha\r\n     * @param {array} args các tham số dưới dạng mảng\r\n     * @returns {mixed}\r\n     */\r\n    final$callParentMethod: function (method?: any, args?: any) {\r\n        if (this.parent && typeof this.parent.onChildrenCallMethod == \"function\") {\r\n            return this.parent.onChildrenCallMethod(method, args);\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    /**\r\n     * gọi phương thức của cha, ngược cây phả hệ cho đến khi có tồn tại phương thức dược định nghĩa hoặc hết cây phả hệ\r\n     * @param {string} method tên phuong thức của thằng cha\r\n     * @param {array} args các tham số dưới dạng mảng\r\n     * @returns {mixed}\r\n     */\r\n    final$cpm: function cpm(method?: any, args?: any) {\r\n        return this.callParentMethod.call(this, method, args);\r\n    },\r\n    /**\r\n     * gọi phương thức của cha, ngược cây phả hệ cho đến khi có tồn tại phương thức dược định nghĩa hoặc hết cây phả hệ\r\n     * @param {string} method tên phuong thức của thằng cha\r\n     * @param {array} args các tham số dưới dạng mảng\r\n     * @returns {mixed}\r\n     */\r\n    final$parentCall: function (method?: any, args?: any) {\r\n        return this.callParentMethod.call(this, method, args);\r\n    },\r\n\r\n    /**\r\n     * gọi phương thức của cha, ngược cây phả hệ cho đến khi có tồn tại phương thức dược định nghĩa hoặc hết cây phả hệ\r\n     * @param {string} method tên phuong thức của thằng cha\r\n     * @param {array} args các tham số dưới dạng mảng\r\n     * @returns {mixed}\r\n     */\r\n    final$callParent: function (method?: any, args?: any) {\r\n        return this.callParentMethod.call(this, method, args);\r\n    },\r\n\r\n    /**\r\n     * lsng81 nghe lời gọi hàm của thằng con\r\n     * @param {string} method tên phương thức\r\n     * @param {array} args tham số\r\n     */\r\n    final$onChildrenCallMethod: function (method?: any, args?: any) {\r\n        if (typeof this[method] == \"function\") {\r\n            var fn = this[method];\r\n            return fn.apply(this, isArray(args) ? args : [args]);\r\n        }\r\n        return this.callParentMethod(method, args);\r\n    },\r\n\r\n    /**\r\n     * gọi phương thức của thang con trong cây phả hệ\r\n     * @param {string} method phương thức\r\n     * @param {array} args tham so\r\n     */\r\n    final$callChildrenMethod: function (method?: any, args?: any, className?: any) {\r\n        curremtCallChildrenMethodID = this.getInstanceID();\r\n        return this.__callChildrenMethod__(method, args, className);\r\n    },\r\n\r\n    /**\r\n     * gọi phương thức của thang con trong cây phả hệ\r\n     * @param {string} method phương thức\r\n     * @param {array} args tham so\r\n     */\r\n    final$ccm: function (method?: any, args?: any, className?: any) {\r\n        return this.callChildrenMethod(method, args, className);\r\n    },\r\n\r\n    /**\r\n     * gọi phương thức của thang con trong cây phả hệ\r\n     * @param {string} method phương thức\r\n     * @param {array} args tham so\r\n     */\r\n    final$childrenCall: function (method?: any, args?: any, className?: any) {\r\n        return this.callChildrenMethod(method, args, className);\r\n    },\r\n\r\n    /**\r\n     * gọi phương thức của thang con trong cây phả hệ\r\n     * @param {string} method phương thức\r\n     * @param {array} args tham so\r\n     */\r\n    final$callChildren: function (method?: any, args?: any, className?: any) {\r\n        return this.callChildrenMethod(method, args, className);\r\n    },\r\n\r\n    /**\r\n     * gọi phương thức của thang con trong cây phả hệ\r\n     * @param {string} method phương thức\r\n     * @param {array} args tham so\r\n     */\r\n\r\n    final$__callChildrenMethod__: function (method?: any, args?: any, className?: any) {\r\n        var instanceId = this.getInstanceID();\r\n        if (!curremtCallChildrenMethodID) curremtCallChildrenMethodID = instanceId;\r\n        stopCallChildrenTask[instanceId] = false;\r\n        var result = DEFAULT_VALUE;\r\n        if (this.children.length) {\r\n            for (var index = 0; index < this.children.length; index++) {\r\n                var child = this.children[index];\r\n                if (child && child.isDom && typeof child.onCallMethodFromParent == \"function\") {\r\n                    var r = child.onCallMethodFromParent(method, args, className);\r\n                    if (r !== DEFAULT_VALUE && typeof r != \"undefined\") {\r\n                        result = r;\r\n                        break;\r\n                    } else if (stopCallChildrenTask[curremtCallChildrenMethodID]) {\r\n                        result = undefined;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n        stopCallChildrenTask[instanceId] = false;\r\n\r\n        if (instanceId == curremtCallChildrenMethodID) {\r\n            stopCallChildrenTask[curremtCallChildrenMethodID] = false;\r\n            curremtCallChildrenMethodID = null;\r\n            if (result == DEFAULT_VALUE) {\r\n                return undefined;\r\n            }\r\n        }\r\n        return result;\r\n    },\r\n\r\n    /**\r\n     * lắng nghe sự kiện từ parent\r\n     * @param {string} method phương thức \r\n     * @param {array} args mảng tham số\r\n     * @param {string} className Tên claass cuối\r\n     */\r\n    final$onCallMethodFromParent: function (method?: any, args?: any, className?: any) {\r\n        var self = this;\r\n        function f() {\r\n            if (typeof self[method] == \"function\") {\r\n                var fn = self[method];\r\n                var res = fn.apply(self, isArray(args) ? args : [args]);\r\n                if (typeof res != \"undefined\") stopCallChildrenTask[curremtCallChildrenMethodID] = true;\r\n                return res;\r\n            }\r\n            return DEFAULT_VALUE;\r\n\r\n        }\r\n        if (className) {\r\n            return f();\r\n        }\r\n        var r = f();\r\n        return r != DEFAULT_VALUE ? r : this.__callChildrenMethod__(method, args);\r\n    },\r\n    final$stopCallChildrenMethod: function () {\r\n        if (curremtCallChildrenMethodID) stopCallChildrenTask[curremtCallChildrenMethodID] = true;\r\n    },\r\n\r\n    /**\r\n     * gui data cho dong bon\r\n     * @param {string} cslug chuoi key\r\n     * @param {*} data du lieu\r\n     */\r\n    final$sendToSiblings: function (slug?: any, data?: any) {\r\n        if (this.parent && this.parent.children && this.parent.children.length > 1) {\r\n            for (var index = 0; index < this.parent.children.length; index++) {\r\n                var sibling = this.parent.children[index];\r\n                if (typeof sibling == \"object\" && sibling != this && typeof sibling.onReceiveFromSiblings == \"function\") {\r\n                    var s = sibling.onReceiveFromSiblings(slug, data)\r\n                    if (s === false) break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * nhan du liieu tu dong bon\r\n     * @param {string} slug chuoi khoa\r\n     * @param {*} data du lieu\r\n     */\r\n    final$onReceiveFromSiblings: function (channel?: any, data?: any) {\r\n        var self = this;\r\n        var next = true;\r\n        var a = 0;\r\n        var arr, fn, s = undefined;\r\n        var eventData = {\r\n            type: \"\",\r\n            preventDefault: function () {\r\n                next = false;\r\n                a++;\r\n            },\r\n            stopTransmission: function () {\r\n                next = false;\r\n                a++;\r\n            },\r\n            stopPropagation: function stopPropagation() {\r\n                next = false;\r\n                a++;\r\n            },\r\n            data: data\r\n        };\r\n\r\n        if (Object.hasOwnProperty.call(this.__transmissionEventListeners.fromSiblings, channel)) {\r\n            arr = this.__transmissionEventListeners.fromSiblings[channel];\r\n            try {\r\n                if (arr.length) {\r\n                    for (var index = 0; index < arr.length; index++) {\r\n                        fn = arr[index];\r\n                        if (typeof fn == \"function\") {\r\n                            a++;\r\n                            s = fn.call(this, data);\r\n                            if (s === false) {\r\n                                return false;\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }\r\n\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        if (!a) {\r\n            var c = Str.replace(\r\n                Str.ucword(\r\n                    channel.split(\"-\").join(\" \")\r\n                ),\r\n                \" \",\r\n                \"\"\r\n            );\r\n            var listFn = [\r\n                \"onReceive\" + c + \"fromSiblings\",\r\n                \"onReceive\" + c\r\n            ];\r\n            var mt = \"\";\r\n            for (var i = 0; i < listFn.length; i++) {\r\n                mt = listFn[i];\r\n                if (typeof self[mt] == \"function\") {\r\n                    var stt = self[mt].call(self, data);\r\n                    if (stt === false) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var slug = channel.toLowerCase();\r\n        var mtfs = [\"transmission.fromsiblings.\" + slug, \"transmission.fromsiblings\", \"transmission\"];\r\n        var mt = \"\";\r\n        for (var n = 0; n < mtfs.length; n++) {\r\n            mt = mtfs[n];\r\n            if (Object.hasOwnProperty.call(self.__transmissionEventListeners.events, mt)) {\r\n                eventData.type = mt;\r\n                arr = self.__transmissionEventListeners.events[mt];\r\n                if (arr.length) {\r\n                    for (var index = 0; index < arr.length; index++) {\r\n                        fn = arr[index];\r\n                        if (typeof fn == \"function\") {\r\n                            // a++;\r\n                            s = fn.call(self, eventData);\r\n                            if (s === false || !next) {\r\n                                return false;\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * gọi hàm của dong bọn\r\n     * @param {string} method tên phương thưc\r\n     * @param {*[]} args tham số\r\n     */\r\n    final$callSiblingMethod: function (method?: any, args?: any) {\r\n        if (this.parent && this.parent.children && this.parent.children.length > 1) {\r\n            var a = typeof args == \"undefined\" ? [] : (isArray(args) ? args : [args]);\r\n            for (var i = 0; i < this.parent.children.length; i++) {\r\n                var child = this.parent.children[i];\r\n                if (isObject(child) && child != this && typeof child[method] == \"function\") {\r\n                    var fn = child[method];\r\n                    var r = fn.apply(child, a);\r\n                    if (r !== undefined) return r;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * gọi hàm của dong bọn\r\n     * @param {string} method tên phương thưc\r\n     * @param {*[]} args tham số\r\n     */\r\n    final$callSiblings: function (method?: any, args?: any) {\r\n        return this.callSiblingMethod(method, args);\r\n    },\r\n\r\n    /**\r\n     * gọi hàm của dong bọn\r\n     * @param {string} method tên phương thưc\r\n     * @param {*[]} args tham số\r\n     */\r\n    final$siblingCall: function (method?: any, args?: any) {\r\n        return this.callSiblingMethod(method, args);\r\n    },\r\n\r\n\r\n    /**\r\n     * gọi hàm của dong bọn\r\n     * @param {string} method tên phương thưc\r\n     * @param {*[]} args tham số\r\n     */\r\n    final$csm: function (method?: any, args?: any) {\r\n        return this.callSiblingMethod(method, args);\r\n    },\r\n\r\n\r\n\r\n    getElementArgsData: function (args?: any, rules?: any) {\r\n        // var rules = {\r\n\r\n        // };\r\n        var selector = '';\r\n        var attrs: any = {};\r\n        var data: any = [];\r\n        var hasTag = false;\r\n        // duyệt qua mảng tham so\r\n        for (var index = 0; index < args.length; index++) {\r\n            var vl = args[index];\r\n            if (isString(vl)) {\r\n                if (index == 0) {\r\n                    var a: any = getDomInf(vl);\r\n                    if (a.isElement) {\r\n                        if (a.isDefault) {\r\n                            selector = args[0];\r\n                        } else {\r\n                            selector = args[0].substr(a.tagName.length);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * lấy về Element cha   \r\n     * @returns {Dom}\r\n     */\r\n    final$getRootElement: function () {\r\n        if (this.parent && isObject(this.parent) && this.parent.isDom) return this.parent.getRootElement();\r\n        return this;\r\n    },\r\n\r\n\r\n    // dịch chuyển element trong dom\r\n    final$moveTo: function (parent?: any, pos?: any) {\r\n        if (!isObject(parent)) return false;\r\n        if (_instanceof(parent, Element)) {\r\n            parent.appendChild(this.el);\r\n            return this;\r\n        }\r\n        if (!pos) pos = 'bottom';\r\n        if (parent.isDom) {\r\n            parent.moveIn(this, pos, this.parent);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * \r\n     * @param {DomeElement|Element} child doi tuong con\r\n     * @param {DomeElement|Element} receiveDomEl \r\n     * @param {string} pos \r\n     * @returns {Dom}\r\n     */\r\n    final$moveChild: function moveChild(child?: any, receiveDomEl?: any, pos?: any) {\r\n        if (!isObject(receiveDomEl)) return false;\r\n\r\n        for (var index = 0; index < this.children.length; index++) {\r\n            var ch = this.children[index];\r\n            if (ch == child) {\r\n                this.children.splice(index, 1);\r\n                if (ch.isDom) {\r\n                    ch.parent = null;\r\n                    ch.moveTo(receiveDomEl, pos);\r\n\r\n                }\r\n                else if (_instanceof(ch, Element)) {\r\n                    if (receiveDomEl.isDom) {\r\n                        receiveDomEl.moveIn(ch);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n        return this;\r\n    },\r\n    /**\r\n     * \r\n     * @param {DomElement} child \r\n     * @param {boolean} pos \r\n     */\r\n    final$moveIn: function moveIn(child?: any, pos?: any, oldparent?: any) {\r\n        if (isObject(child)) {\r\n            var t;\r\n            if ((isBoolean(pos) && pos === true) || inArray(['top', 'start', 'prepend'], pos)) t = true;\r\n            else t = false;\r\n            var self = this;\r\n            if (t) {\r\n                if (child.isDom) {\r\n\r\n                    this.children.unshift(child);\r\n                    if (this.el.firstChild) this.el.insertBefore(child.el, this.el.firstChild);\r\n                    else this.el.appendChild(child.el);\r\n\r\n                    if (child.parent && child.parent.isDom) {\r\n                        child.parent.removeChild(child, false);\r\n                    }\r\n                    child.parent = this;\r\n                }\r\n                else if (child.isDomQuery) {\r\n                    this.el.insertBefore(child.el, this.el.firstChild);\r\n                    this.children.unshift(child);\r\n                }\r\n                else if (child.isQuery) {\r\n                    for (var index = child.length - 1; index > -1; index--) {\r\n                        const c = child[index];\r\n                        this.el.insertBefore(c, this.el.firstChild);\r\n                    }\r\n                    this.children.unshift(child);\r\n                }\r\n                else if (child instanceof Element) {\r\n                    this.el.insertBefore(child, this.el.firstChild);\r\n                    this.children.unshift(child);\r\n                }\r\n\r\n            } else {\r\n                if (child.isDom) {\r\n                    this.el.appendChild(child.el);\r\n                    this.children.push(child);\r\n\r\n                    if (child.parent && child.parent.isDom) {\r\n                        child.parent.removeChild(child, false);\r\n                    }\r\n                    child.parent = this;\r\n\r\n                }\r\n                else if (child.isDomQuery) {\r\n                    this.el.appendChild(child.el);\r\n                    this.children.push(child);\r\n                }\r\n                else if (child.isQuery) {\r\n                    child.map(function (el) {\r\n                        self.el.appendChild(el);\r\n                    });\r\n                    this.children.push(child);\r\n                }\r\n                else if (child instanceof Element) {\r\n                    this.el.appendChild(child);\r\n                    this.children.push(child);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n    static$toString: function () {\r\n        var self = this;\r\n        return self('#' + Str.rand());\r\n    },\r\n    static$withParent: function (parent?: any) {\r\n        var self = this;\r\n        if (!isObject(parent) || !parent.isDom) {\r\n            console.error(\"Parent must be instance of DomElement\");\r\n            return false;\r\n        }\r\n        if (typeof self != \"function\") {\r\n            console.error(\"The context of withParent Method mush be Dom or Dom's Children\");\r\n            return false;\r\n        }\r\n        var params = [];\r\n        for (let i = 1; i < arguments.length; i++) {\r\n            const arg = arguments[i];\r\n            params.push(arg);\r\n        }\r\n        oneTimeData = {\r\n            parent: parent\r\n        };\r\n        return self.apply(null, params);\r\n\r\n    }\r\n}) as DomFactory;\r\nDom['$doc'] = $document;\r\n/**\r\n * Tạo đối tượng dom\r\n * @param {string|object} tag ten the hoặc tất cả các thông tin của thẻ\r\n */\r\nfunction create(tag?: any, children?: any, attributes?: any) {\r\n    var tagName = 'div',\r\n        id = '',\r\n        className = '',\r\n        attrs: any = {},\r\n        __dynamicAttrs: any = {},\r\n        events: any = {},\r\n        props: any = {},\r\n        methods: any = {},\r\n        contents: any = [],\r\n        contentf = \"\",\r\n        inf: any = { isElement: false },\r\n        isSimple = false,\r\n        isArrayContent = false,\r\n        isTwoContent = 0,\r\n        dataTypeAttrs: any = {},\r\n        biddingAttrs: any = {}\r\n        ;\r\n\r\n    function addAttrValue(k, vl) {\r\n\r\n        var s = String(k).toLowerCase();\r\n        if (s.substr(0, 1) == '$') {\r\n            __dynamicAttrs[k.substr(1)] = vl;\r\n        }\r\n        else if (inArray(['tag', 'tagname'], s)) {\r\n            // tagName = vl;\r\n        }\r\n        else if (s.substr(0, 2) == 'on' && isDomEvent(s.substr(2))) {\r\n            events[s.substr(2)] = vl;\r\n        }\r\n        else if (s.substr(0, 1) == '@' && isDomEvent(s.substr(1))) {\r\n            events[s.substr(1)] = vl;\r\n        }\r\n        else if (s == \"on\" && isObject(vl)) {\r\n            for (const v in vl) {\r\n                if (Object.hasOwnProperty.call(vl, v)) {\r\n                    const ev = vl[v];\r\n                    events[v] = ev;\r\n                }\r\n            }\r\n\r\n        }\r\n        else if (inArray([\"content\", \"children\"], s)) {\r\n            if (isArray(vl)) {\r\n                for (var j = 0; j < vl.length; j++) {\r\n                    contents.push(vl[j]);\r\n                }\r\n            } else {\r\n                contents.push(vl);\r\n            }\r\n        }\r\n        else if (typeof vl == \"function\") {\r\n            if (vl.isPrimitive) {\r\n                dataTypeAttrs[k] = vl;\r\n            } else {\r\n                methods[k] = vl;\r\n            }\r\n        }\r\n        else if (isString(vl) && !isNumber(vl) && vl.substr(0, 2) == '{{' && vl.substr(vl, length - 2) == '}}') {\r\n            biddingAttrs[k] = vl.substr(2, vl, length - 4).trim();\r\n        }\r\n        else if (isObject(vl) && (vl.isArrayData || vl.isObjectData)) {\r\n            dataTypeAttrs[k] = vl;\r\n        }\r\n        else {\r\n            attrs[k] = vl;\r\n        }\r\n    }\r\n    if ((isObject(tag) && (tag.isQuery || tag.isDomQuery))) {\r\n        contents.push(tag);\r\n    }\r\n    else if (isObject(tag) && tag.isDom) {\r\n        contents.push(tag);\r\n    }\r\n\r\n    else if (isObject(tag)) {\r\n        for (var k in tag) {\r\n            if (tag.hasOwnProperty(k)) {\r\n                var vl = tag[k];\r\n                var s = String(k).toLowerCase();\r\n                if (inArray(['tag', 'tagname'], s)) {\r\n                    tagName = vl;\r\n                }\r\n                else if (inArray([\"content\", \"children\"], s)) {\r\n                    if (isArray(vl)) {\r\n                        for (var j = 0; j < vl.length; j++) {\r\n                            var cnt = vl[j];\r\n                            contents.push(cnt);\r\n                        }\r\n                    } else {\r\n                        contents.push(vl);\r\n                    }\r\n                }\r\n                else {\r\n                    addAttrValue(k, vl);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    else if (isString(tag)) tagName = tag;\r\n\r\n\r\n    for (var i = 1; i < arguments.length; i++) {\r\n        var arg = arguments[i];\r\n        if (isObject(arg) && (arg.isQuery || arg.isDomQuery)) {\r\n            contents.push(arg);\r\n        }\r\n        else if (isObject(arg) && arg.isDom) {\r\n            contents.push(arg);\r\n        }\r\n        else if (_instanceof(arg, Element)) {\r\n            contents.push(arg);\r\n        }\r\n        else if (_instanceof(arg, Dom)) {\r\n            contents.push(arg.el);\r\n        }\r\n        else if (isObject(arg)) {\r\n            for (var k in arg) {\r\n                if (arg.hasOwnProperty(k)) {\r\n                    addAttrValue(k, arg[k]);\r\n                }\r\n            }\r\n\r\n        }\r\n        else if (isString(arg)) {\r\n            isTwoContent = 0;\r\n            contents.push(arg);\r\n        } else if (isArray(arg)) {\r\n            isArrayContent = true;\r\n            for (var j = 0; j < arg.length; j++) {\r\n                contents.push(arg[j]);\r\n            }\r\n        } else if (isFunction(arg) && arg.isDomClass) {\r\n            contents.push(arg);\r\n        }\r\n    }\r\n\r\n    inf = getDomInf(tagName);\r\n\r\n    if (inf.isElement) {\r\n        if (tagName != inf.tagName) {\r\n            tagName = inf.tagName;\r\n            isSimple = simpleTags.indexOf(tagName.toLowerCase()) >= 0;\r\n            if (inf.id) {\r\n                id = inf.id;\r\n            }\r\n            if (inf.className) {\r\n                className = inf.className;\r\n            }\r\n            if (!isEmpty(inf.attrs)) {\r\n                for (var k in inf.attrs) {\r\n                    if (Object.hasOwnProperty.call(inf.attrs, k)) {\r\n                        addAttrValue(k, inf.attrs[k]);\r\n                    }\r\n                }\r\n            }\r\n            if (!isEmpty(inf.props)) {\r\n                assignValue(props, inf.props);\r\n            }\r\n            if (inf.content) {\r\n                if (!isSimple) {\r\n                    contentf = inf.content;\r\n                }\r\n                // else if (typeof attrs.content == \"undefined\") attrs.content = inf.content;\r\n            }\r\n        }\r\n    }\r\n    if (id) {\r\n        if (typeof attrs.id == \"undefined\") {\r\n            attrs.id = id;\r\n        }\r\n    }\r\n\r\n    if (this && this.tagName && this.tagName != tagName && tagName == 'div') {\r\n        tagName = this.tagName;\r\n    }\r\n\r\n    isSimple = simpleTags.indexOf(tagName.toLowerCase()) >= 0;\r\n    var htmlObject = $document.createElement(tagName);\r\n    if (!isEmpty(attrs)) {\r\n\r\n        var csk, v;\r\n        var css = {};\r\n        for (var prop in attrs) {\r\n            if (Object.prototype.hasOwnProperty.call(attrs, prop)) {\r\n                var val = attrs[prop];\r\n                var key = prop.toLowerCase();\r\n                var k = key;\r\n                var f = k.substring(0, 1);\r\n                var f2 = k.substring(0, 2);\r\n                var isEvent = domEvents.indexOf(key) >= 0;\r\n                if (inArray(['tag', 'tagname'], s)) {\r\n                    // tagName = vl;\r\n                }\r\n                else if (f == '$' && (isString(vl) || isNumber(vl) || getType(vl) == \"boolean\")) {\r\n                    __dynamicAttrs[k.substr(1)] = vl;\r\n                }\r\n                else if (key == \"style\") {\r\n\r\n                    if (typeof val == \"object\") {\r\n                        for (var cssKey in val) {\r\n                            if (Object.prototype.hasOwnProperty.call(val, cssKey)) {\r\n                                v = val[cssKey];\r\n                                css[cssKey] = v;\r\n                            }\r\n                        }\r\n\r\n                        for (var ck in css) {\r\n                            if (css.hasOwnProperty(ck)) {\r\n                                var cv = css[ck];\r\n                                // htmlObject.style[ck] = cv;\r\n                                // console.log(`htmlObject.style['${ck}'] = ${cv};`)\r\n                                setCssProp(htmlObject, ck, cv);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        htmlObject.setAttribute(key, val);\r\n                    }\r\n                }\r\n                else if (isObject(val)) {\r\n                    if (val.isDom || val.isDomQuery || _instanceof(val, Element)) {\r\n                        this._pendingContents.push({ key: key, content: val });\r\n                    }\r\n                    else if (val.constructor != Object) {\r\n                        this[key] = val;\r\n                    }\r\n                    else {\r\n\r\n                        var attrObj = Str.convertTextObject({}, val, prop, '-');\r\n                        for (var ak in attrObj) {\r\n                            if (attrObj.hasOwnProperty(ak)) {\r\n                                var v = attrObj[ak];\r\n                                htmlObject.setAttribute(ak, v);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n\r\n                }\r\n                else if (key == 'class' || key == 'classname') {\r\n                    htmlObject.className = val;\r\n                }\r\n                else if (typeof vl == \"function\") {\r\n                    methods[k] = vl;\r\n                }\r\n                else if (isBoolean(val)) {\r\n                    if (val === false) {\r\n                        htmlObject.removeAttribute(key);\r\n\r\n                    } else {\r\n                        htmlObject.setAttribute(key, key);\r\n                    }\r\n                }\r\n                else if (key != \"content\" || isSimple) {\r\n                    var slug = Str.camelToSlug(prop, '-');\r\n                    htmlObject.setAttribute(slug, val);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!isEmpty(props)) {\r\n        for (const key in props) {\r\n            if (Object.hasOwnProperty.call(props, key)) {\r\n                const value = props[key];\r\n                htmlObject[key] = value;\r\n            }\r\n        }\r\n    }\r\n    var childrenContents = [];\r\n    if (!isSimple) {\r\n        var cnt = null;\r\n        var tn = tagName.toLowerCase();\r\n        if (contents.length) {\r\n            if (tn == 'textarea') {\r\n                htmlObject.innerText = contents[0];\r\n                if (contentf) {\r\n                    htmlObject.innerText += contentf;\r\n                }\r\n            }\r\n            else if (tn == 'a' && !attrs.hasOwnProperty('href') && isTwoContent == 2 && !isArrayContent && contents.length == 2) {\r\n                attrs.href = contents[0];\r\n                childrenContents[0] = contents[1];\r\n            }\r\n            else {\r\n                childrenContents = contents.slice(0);\r\n\r\n            }\r\n        }\r\n        else if (contentf) {\r\n            if (tagName.toLowerCase() == 'textarea') {\r\n                htmlObject.innerText += contentf;\r\n                childrenContents = [];\r\n            } else {\r\n                childrenContents.unshift(parse(contentf));\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n    else if (tagName == 'img') {\r\n        if (!attrs.hasOwnProperty('src')) {\r\n            if (contents.length) {\r\n                htmlObject['src'] = contents[0];\r\n            }\r\n            else if (contentf) {\r\n                htmlObject['src'] = contentf;\r\n            }\r\n        }\r\n    }\r\n\r\n    else if (contentf && !attrs.hasOwnProperty('content')) {\r\n        htmlObject.setAttribute('content', contentf);\r\n    }\r\n    if (className) {\r\n        className.split(\" \").filter(function (str) {\r\n            return str.length > 0;\r\n        }).map(function (str) {\r\n            htmlObject.classList.add(str);\r\n        })\r\n\r\n    }\r\n\r\n    return {\r\n        el: htmlObject,\r\n        contents: childrenContents,\r\n        __dynamicAttrs: __dynamicAttrs,\r\n        biddingAttrs: biddingAttrs,\r\n        dataTypeAttrs: dataTypeAttrs,\r\n        events: events,\r\n        methods: methods,\r\n        tag: tagName\r\n    };\r\n\r\n}\r\n\r\n/**\r\n * Tạo đối tượng dom\r\n * @param {string|object} tag ten the hoặc tất cả các thông tin của thẻ\r\n * @returns {Element}\r\n */\r\nvar createEl = function createEl(tag?: any, ...args: any[]): HTMLElement {\r\n    var tagName = 'div',\r\n        id = '',\r\n        className = '',\r\n        attrs: any = {},\r\n        __dynamicAttrs: any = {},\r\n        events: any = {},\r\n        props: any = {},\r\n        contents = [],\r\n        contentf = \"\",\r\n        inf: any = { isElement: false },\r\n        isSimple = false,\r\n        boot = null,\r\n        init = null;\r\n\r\n    /**\r\n     * phan tich objec chưa cac thuoc tinh\r\n     * @param {object} object doi tuong thuoc tinh\r\n     * @param {boolean} changeTagName \r\n     */\r\n    var parseAttrs = function (object = undefined, changeTagName = undefined) {\r\n        for (var k in object) {\r\n            if (object.hasOwnProperty(k)) {\r\n                var vl = object[k];\r\n                var s = String(k).toLowerCase();\r\n                if (s.substr(0, 1) == '$') {\r\n                    __dynamicAttrs[k.substr(1)] = vl;\r\n                }\r\n                else if (inArray(['tag', 'tagname'], s)) {\r\n                    // tagName = vl;\r\n                    if (changeTagName) {\r\n                        tagName = vl;\r\n                    }\r\n                }\r\n                else if (inArray(['init', 'boot'], s)) {\r\n                    if (s == 'boot') boot = vl;\r\n                    else init = vl;\r\n                }\r\n                else if (s.substr(0, 2) == 'on' && isDomEvent(s.substr(2))) {\r\n                    events[s.substr(2)] = vl;\r\n                }\r\n                else if (s.substr(0, 1) == '@' && isDomEvent(s.substr(1))) {\r\n                    events[s.substr(1)] = vl;\r\n                }\r\n                else if (inArray([\"content\", \"content\", \"children\"], s)) {\r\n                    if (isArray(vl)) {\r\n                        for (var j = 0; j < vl.length; j++) {\r\n                            var cnt = vl[j];\r\n                            contents.push(cnt);\r\n                        }\r\n                    } else {\r\n                        contents.push(vl);\r\n                    }\r\n                }\r\n                else {\r\n                    attrs[k] = vl;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if ((isObject(tag) && (tag.isQuery || tag.isDomQuery))) {\r\n        contents.push(tag);\r\n    }\r\n    else if (isObject(tag) && tag.isDom) {\r\n        contents.push(tag.el);\r\n    }\r\n    else if (isObject(tag)) {\r\n        parseAttrs(tag, true);\r\n    }\r\n    else if (isString(tag)) tagName = tag;\r\n    var max = arguments.length > 3 ? 3 : arguments.length;\r\n    for (var i = 1; i < max; i++) {\r\n        var arg = arguments[i];\r\n        if (isObject(arg) && arg.isDom) {\r\n            contents.push(arg.el);\r\n        }\r\n        else if (_instanceof(arg, Element)) {\r\n            contents.push(arg);\r\n        }\r\n        else if (_instanceof(arg, Dom)) {\r\n            contents.push(arg.el);\r\n        }\r\n        else if (isObject(arg)) {\r\n            parseAttrs(arg);\r\n        }\r\n        else if (isString(arg)) {\r\n            contents.push(arg);\r\n        } else if (isArray(arg)) {\r\n            for (var j = 0; j < arg.length; j++) {\r\n                var cnt = arg[j];\r\n                contents.push(cnt);\r\n            }\r\n        }\r\n    }\r\n\r\n    // lọc xong tất cả content va attr\r\n\r\n\r\n    inf = getDomInf(tagName);\r\n    if (inf.isElement) {\r\n\r\n        if (tagName != inf.tagName) {\r\n\r\n            tagName = inf.tagName;\r\n            isSimple = simpleTags.indexOf(tagName.toLowerCase()) >= 0;\r\n            if (inf.id) {\r\n                id = inf.id;\r\n            }\r\n            if (inf.className) {\r\n                className = inf.className;\r\n            }\r\n            if (!isEmpty(inf.attrs)) {\r\n                parseAttrs(inf.attrs);\r\n            }\r\n            if (!isEmpty(inf.props)) {\r\n                assignValue(props, inf.props);\r\n            }\r\n            if (inf.content) {\r\n                if (!isSimple) {\r\n                    contentf = inf.content;\r\n                }\r\n                // else if (typeof attrs.content == \"undefined\") attrs.content = inf.content;\r\n            }\r\n        }\r\n    }\r\n    if (id) {\r\n        if (typeof attrs.id == \"undefined\") {\r\n            attrs.id = id;\r\n        }\r\n    }\r\n\r\n    isSimple = simpleTags.indexOf(tagName.toLowerCase()) >= 0;\r\n    /**\r\n     * \r\n     */\r\n    var htmlObject = document.createElement(tagName);\r\n    if (typeof boot == \"function\") boot.call(htmlObject, attrs, events);\r\n    if (!isEmpty(attrs)) {\r\n        var csk, v;\r\n        var css = {};\r\n        for (var prop in attrs) {\r\n            if (attrs.hasOwnProperty(prop)) {\r\n                var val = attrs[prop];\r\n                var key = prop.toLowerCase();\r\n                var k = key;\r\n                var f = k.substring(0, 1);\r\n                var f2 = k.substring(0, 2);\r\n                var isEvent = isDomEvent(key)\r\n                if (inArray(['tag', 'tagname'], key)) {\r\n                    // tagName = vl;\r\n                }\r\n                else if (key == \"style\") {\r\n                    if (typeof val == \"object\") {\r\n                        for (var cssKey in val) {\r\n                            if (val.hasOwnProperty(cssKey)) {\r\n                                v = val[cssKey];\r\n                                css[cssKey] = v;\r\n                            }\r\n                        }\r\n\r\n                        for (var ck in css) {\r\n                            if (css.hasOwnProperty(ck)) {\r\n                                var cv = css[ck];\r\n                                htmlObject.style[ck] = cv;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        htmlObject.setAttribute(key, val);\r\n                    }\r\n                }\r\n                else if (typeof val == 'object') {\r\n                    if (val.isQuery || val.isDomQuery || val.isDom) {\r\n\r\n                    } else {\r\n                        let attrObj = Str.convertTextObject({}, val, prop, '-');\r\n                        for (var ak in attrObj) {\r\n                            if (attrObj.hasOwnProperty(ak)) {\r\n                                var v = attrObj[ak];\r\n                                htmlObject.setAttribute(ak, v);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                } else if (key == 'class' || key == 'classname') {\r\n                    htmlObject.className = val;\r\n                }\r\n                else if (key != \"content\" || isSimple) {\r\n                    var slug = Str.camelToSlug(prop, '-');\r\n                    htmlObject.setAttribute(slug, val);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!isSimple) {\r\n        if (contents.length) {\r\n            if (tagName.toLowerCase() == 'textarea') {\r\n                htmlObject.innerText = contents[0];\r\n                if (contentf) {\r\n                    htmlObject.innerText += contentf;\r\n                }\r\n            } else {\r\n                for (var i = 0; i < contents.length; i++) {\r\n                    var el = contents[i];\r\n                    if (isObject(el) && el.isDom) {\r\n                        htmlObject.appendChild(el.el);\r\n                    }\r\n                    else if (el instanceof Element) {\r\n                        htmlObject.appendChild(el);\r\n                    }\r\n                    else if (isObject(el) || isString(el)) {\r\n                        var a = parse(el);\r\n                        if (a) htmlObject.appendChild(a);\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n        else if (contentf) {\r\n            if (tagName.toLowerCase() == 'textarea') {\r\n                htmlObject.innerText += contentf;\r\n            } else {\r\n                htmlObject.appendChild(parse(contentf));\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n    else if (contentf && !attrs.hasOwnProperty('content')) {\r\n        htmlObject.setAttribute('content', contentf);\r\n        contents = [];\r\n    }\r\n\r\n    if (className) {\r\n        className.split(\" \").filter(function (str) {\r\n            return str.length > 0;\r\n        }).map(function (str) {\r\n            htmlObject.classList.add(str);\r\n        })\r\n\r\n    }\r\n\r\n    var addEv = function (ev, fn) {\r\n        var cb = (typeof fn == \"function\") ? fn : function (e) {\r\n\r\n        };\r\n        if (htmlObject.addEventListener) {\r\n            htmlObject.addEventListener(ev, cb);\r\n        }\r\n    };\r\n\r\n\r\n    if (!isEmpty(events)) {\r\n        for (var key in events) {\r\n            if (Object.hasOwnProperty.call(events, key)) {\r\n                var fn = events[key];\r\n                addEv(key, fn);\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n    if (typeof init == \"function\") {\r\n        init.call(htmlObject);\r\n    }\r\n\r\n    return htmlObject;\r\n\r\n}\r\n/**\r\n * lấy ra đối tượng dom từ tham số đầu vào\r\n * @param {*} str giá trị bất kì\r\n * @returns {Element}\r\n */\r\nfunction parse(str: any) {\r\n    var div = document.createElement('div');\r\n    if ((str instanceof Element)) return str;\r\n    else if (typeof str == \"object\" && !isNull(str)) {\r\n        if (isQuery(str)) {\r\n            if (str.length > 0) {\r\n                return str[0];\r\n            } else {\r\n                return div;\r\n            }\r\n        }\r\n        else if (str instanceof Dom || str.constructor == Dom) {\r\n            return str.el;\r\n        }\r\n        else if (str.isDom) {\r\n            return str.el;\r\n        }\r\n\r\n        else {\r\n            return createEl(str);\r\n        }\r\n    }\r\n    div.innerHTML = isString(str) && !isNumber(str) ? String(str).trim() : str;\r\n\r\n    // Change this to div.childNodes to support multiple top-level nodes\r\n    return div.firstChild;\r\n}\r\n\r\n\r\n/**\r\n * gán sự kiện cho đối tượng dom\r\n * @param {Element} el đối tượng dom\r\n * @param {string} event sự kiện\r\n * @param {dunction} handler hàm xử lý sự kiện\r\n */\r\nfunction addEventListener(el?: any, event?: any, handler?: any) {\r\n    if (!(el instanceof Element) && el != document && el != window) return false;\r\n    var cb = (typeof handler == \"function\") ? handler : function (e) {\r\n        // func.call(handler, [e.target]);\r\n    };\r\n    if (el.addEventListener) {\r\n        el.addEventListener(event, cb);\r\n    } else if (el.attachEvent) {\r\n        el.attachEvent(event, cb);\r\n    }\r\n}\r\n/**\r\n * Hủy một sự kiện trong dom\r\n * @param {Element} el\r\n * @param {string} event\r\n * @param {function} callback\r\n */\r\nfunction removeEventListener(el?: any, event?: any, callback?: any) {\r\n    if (!(el instanceof Element) && el != document) return false;\r\n    var cb = (typeof callback == \"function\") ? callback : function (e) {\r\n        // func.call(callback, [e.target]);\r\n    };\r\n    if (el.removeEventListener) {\r\n        el.removeEventListener(event, cb);\r\n    }\r\n}\r\nfunction documentReady() {\r\n    if (document.readyState !== 'complete') return;\r\n    return true;\r\n\r\n}\r\n\r\nfunction isGlobalOrRoot(obj?: any) {\r\n    return obj == global || obj == document;\r\n}\r\n\r\n\r\n\r\n/**\r\n * lấy thông tin thẻ từ chuỗi đầu vào có dạng css selector\r\n * @param {string} s css selector\r\n */\r\nfunction getDomInf(s?: any) {\r\n    var obj: any = { tagName: \"\", id: \"\", className: \"\", props: \"\", attrs: \"\", content: \"\", other: \"\" };\r\n    var a = String(s).split(\"\");\r\n    var m = \"tagName\";\r\n    // số lượng các cổng đang mở \r\n    var contentMode = 0;\r\n    var attrMode = 0;\r\n\r\n    var isDefault = false;\r\n    var status = false;\r\n    var fail = false;\r\n    // lặp qua từng ký tự để tách chuỗi thông qua việc đêm các ký tự đặc biệt\r\n    for (var i = 0; i < a.length; i++) {\r\n        var c = a[i];\r\n        // nếu nội dung dang được kích hoạt\r\n        if (c == \" \") {\r\n            if (!obj.id && !obj.className && !obj.props && !obj.attrs && !obj.content) fail = true;\r\n        }\r\n        if (contentMode > 0) {\r\n            if (c == \"{\") {\r\n                contentMode++;\r\n            }\r\n            else if (c == \"}\") {\r\n                contentMode--;\r\n            }\r\n            if (contentMode) {\r\n                obj[m] += \"\" + c;\r\n            }\r\n            else {\r\n                m = \"other\";\r\n                obj.other += \" \";\r\n            }\r\n\r\n\r\n\r\n        }\r\n        // bắt đầu đọc thuộc tính có giá trị\r\n        else if (attrMode > 0) {\r\n            if (c == \"[\") {\r\n                attrMode++;\r\n            }\r\n            else if (c == \"]\") {\r\n                attrMode--;\r\n            }\r\n            if (attrMode) {\r\n                obj[m] += \"\" + c;\r\n            } else {\r\n                m = \"other\";\r\n                obj.other += \" \";\r\n            }\r\n\r\n        }\r\n\r\n        // bắt đầu dặc id\r\n        else if (c == \"#\") {\r\n            m = \"id\";\r\n        }\r\n        // bắt đầu dọc class\r\n        else if (c == \".\") {\r\n            m = \"className\";\r\n            obj.className += \" \";\r\n        }\r\n        // bắt đầu đọc thuộc tính trạng thái\r\n        else if (c == \":\") {\r\n            m = \"props\";\r\n            obj.props += \" \";\r\n        }\r\n        // bắt đầu đọc thuộc tính có giá trị\r\n        else if (c == \"[\") {\r\n            m = \"attrs\";\r\n            attrMode++;\r\n            obj.attrs += \"\\n\";\r\n        }\r\n        // kết thúc việc đọc\r\n        else if (c == \"]\") {\r\n            attrMode--;\r\n            m = \"other\";\r\n            obj.other += \" \";\r\n\r\n        }\r\n        // dọc nội dung\r\n        else if (c == \"{\") {\r\n            m = \"content\";\r\n            // obj.content+= \"\";\r\n            contentMode++;\r\n        }\r\n        // kết thúc đọc nội dung\r\n        else if (c == \"}\") {\r\n            m = \"other\";\r\n            obj.other += \" \";\r\n            contentMode--;\r\n        }\r\n        // đang làm việc gì tiếp tục làm việc đó\r\n        else {\r\n            obj[m] += \"\" + c;\r\n        }\r\n    }\r\n    var obj2: any = { tagName: \"\", id: \"\", className: \"\", props: {}, attrs: {}, other: \"\", content: '', isElement: false };\r\n    var tagName = obj.tagName.trim();\r\n    var id = obj.id.trim();\r\n    var className = obj.className.trim();\r\n    var props = obj.props.trim();\r\n    var attrs = obj.attrs.trim();\r\n    var content = obj.content.trim();\r\n\r\n    if (tagName) {\r\n        obj2.tagName = tagName;\r\n        status = true;\r\n    } else if (s) {\r\n        obj2.tagName = \"div\";\r\n        isDefault = true;\r\n    }\r\n\r\n    if (id) {\r\n        obj2.id = id;\r\n        status = true;\r\n    }\r\n\r\n    if (className) {\r\n        obj2.className = className;\r\n        status = true;\r\n    }\r\n\r\n    if (props) {\r\n        var p = props.split(\" \");\r\n        for (var i = 0; i < p.length; i++) {\r\n            var prop = p[i];\r\n            obj2.props[prop] = true;\r\n            status = true;\r\n        }\r\n    }\r\n    if (attrs) {\r\n        var p = attrs.split(\"\\n\");\r\n        for (var i = 0; i < p.length; i++) {\r\n            var attr = p[i].split(\"=\");\r\n            if (attr.length == 2) {\r\n                status = true;\r\n                if (inArray(['\"', \"'\"], attr[1][0]) && inArray(['\"', \"'\"], attr[1][attr[1].length - 1])) {\r\n                    obj2.attrs[attr[0]] = attr[1].substr(1, attr[1].length - 2);\r\n                }\r\n                else {\r\n                    obj2.attrs[attr[0]] = attr[1];\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    if (content) {\r\n        obj2.content = content;\r\n    }\r\n\r\n    if (!obj.id && !obj.className && !obj.props && !obj.attrs && !obj.content && fail && (tagName.split(\" \").length > 1 || htmlTags.indexOf(tagName) == -1)) {\r\n        return { tagName: \"\", id: \"\", className: \"\", props: {}, attrs: {}, other: \"\", content: '', isElement: false };\r\n    }\r\n\r\n    obj2.isDefault = isDefault;\r\n\r\n    obj2.isElement = status;\r\n\r\n    obj2.isHtmlTag = htmlTags.indexOf(obj2.tagName.toLowerCase()) !== -1;\r\n    return obj2;\r\n\r\n}\r\n\r\n\r\n\r\nfunction make(tag?: any, attributes?: any, content?: any) {\r\n    return Dom(tag, attributes, content);\r\n}\r\n\r\n\r\nfunction eventHandler(e?: any) {\r\n    console.log(e.target);\r\n}\r\n\r\n\r\n/**\r\n* them su kien cho element\r\n* @param {Element} element dom element\r\n* @param {string} event ten su kien\r\n* @param {function} callback\r\n* @param {string} data\r\n* @return {boolean}\r\n*/\r\nfunction addEvent(element?: any, event?: any, callback?: any, data?: any) {\r\n    if (!element || !event || (!(element instanceof Element) && !isGlobalOrRoot(element)) || !isString(event) || !callback || !isCallable(callback)) return false;\r\n    event = event.toLowerCase();\r\n    data = data || null;\r\n\r\n    // tìm trong danh sách sự kiện có tồn tại sự kiện này chưa\r\n    for (var i = 0; i < events.length; i++) {\r\n        var eventData = events[i];\r\n        // một cặp element và event là key của một bản ghi dom event\r\n        if (eventData.element === element && eventData.event === event) {\r\n            for (var j = 0; j < eventData.tasks.length; j++) {\r\n                var evCallback = eventData.tasks[j];\r\n                if (data) {\r\n                    if (data == evCallback.data && evCallback.callback === callback) return true;\r\n                } else if (evCallback.callback === callback) return true;\r\n            }\r\n            addEventListener(element, event, callback);\r\n            events[i].tasks.push({\r\n                callback: callback,\r\n                data: data\r\n            });\r\n\r\n\r\n            return true;\r\n        }\r\n    }\r\n    addEventListener(element, event, callback);\r\n    events.push({\r\n        element: element,\r\n        event: event,\r\n        data: data,\r\n        tasks: [\r\n            {\r\n                callback: callback,\r\n                data: data\r\n            }\r\n        ]\r\n    });\r\n    return true;\r\n}\r\n\r\n/**\r\n* them su kien cho element\r\n* @param {Element} element dom element\r\n* @param {string} event ten su kien\r\n* @param {function} callback\r\n* @param {string} data\r\n* @return {boolean}\r\n*/\r\nfunction removeEvent(element?: any, event?: any, callback?: any, data?: any) {\r\n    // trưởng hợp không gửi element nào thì xóa tất cả\r\n    if (!element || (!(element instanceof Element) && !isGlobalOrRoot(element)) || !isString(event)) {\r\n        for (var i = 0; i < events.length; i++) {\r\n            var eventData = events[i];\r\n            if (eventData.tasks.length) {\r\n                eventData.tasks.map(function (task) {\r\n                    removeEventListener(eventData.element, eventData.event, task.callback);\r\n                });\r\n            }\r\n\r\n        }\r\n        events = [];\r\n\r\n        //\r\n        return false;\r\n    }\r\n    event = event ? event.toLowerCase() : null;\r\n    data = data || null;\r\n    // duyệt mảng để tím element và event phù hợp\r\n    for (var i = 0; i < events.length; i++) {\r\n        var eventData = events[i];\r\n        if (eventData.element === element) {\r\n            if (!event) {\r\n                if (eventData.tasks.length) {\r\n                    eventData.tasks.map(function (task) {\r\n                        removeEventListener(eventData.element, eventData.event, task.callback);\r\n                    });\r\n                }\r\n                events.splice(i, 1);\r\n                i--;\r\n            }\r\n            else if (eventData.event === event) {\r\n                for (var j = 0; j < eventData.tasks.length; j++) {\r\n                    var evCallback = eventData.tasks[j];\r\n                    if (data) {\r\n                        if (data == evCallback.data) {\r\n                            if (callback && isFunction(callback)) {\r\n                                if (evCallback.callback === callback) {\r\n                                    removeEventListener(eventData.element, eventData.event, evCallback.callback);\r\n                                    events[i].tasks.splice(j, 1);\r\n                                    j--;\r\n                                }\r\n                            }\r\n                        }\r\n                    } else if (callback && isFunction(callback)) {\r\n                        if (evCallback.callback === callback) {\r\n                            removeEventListener(eventData.element, eventData.event, evCallback.callback);\r\n                            events[i].tasks.splice(j, 1);\r\n                            j--;\r\n                        }\r\n                    } else {\r\n                        removeEventListener(eventData.element, eventData.event, evCallback.callback);\r\n                        events[i].tasks.splice(j, 1);\r\n                        j--;\r\n                    }\r\n                }\r\n                if (!events[i].tasks.length) {\r\n                    // removeEventListener(eventData.element, eventData.event, eventData.handle);\r\n                    events.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction getEvents(element?: any, event?: any, data?: any) {\r\n    event = event || null;\r\n    element = element || null;\r\n    data = data || null;\r\n    var list = [];\r\n    if (!element && !event) return events;\r\n    for (var i = 0; i < events.length; i++) {\r\n        var eventData = events[i];\r\n        if ((!element || element == eventData.element) && (!event || event == eventData.event)) {\r\n            list.push(eventData);\r\n        }\r\n    }\r\n    return list;\r\n}\r\n\r\n/**\r\n* kiem tra su kien cua element\r\n* @param {Element} element dom element\r\n* @param {string} event ten su kien\r\n* @param {function} callback\r\n* @param {string} data\r\n* @return {boolean}\r\n*/\r\nfunction hasEvent(element?: any, event?: any, callback?: any, data?: any) {\r\n    // trưởng hợp không gửi element nào thì xóa tất cả\r\n    if (!element || (!(element instanceof Element) && !isGlobalOrRoot(element)) || !isString(event)) {\r\n        return false;\r\n    }\r\n    event = event ? event.toLowerCase() : null;\r\n    data = data || null;\r\n    // duyệt mảng để tím element và event phù hợp\r\n    for (var i = 0; i < events.length; i++) {\r\n        var eventData = events[i];\r\n        if (eventData.element === element) {\r\n            if (eventData.event === event) {\r\n                for (var j = 0; j < eventData.tasks.length; j++) {\r\n                    var evCallback = eventData.tasks[j];\r\n                    if (data) {\r\n                        if (data == evCallback.data) {\r\n                            if (callback && isFunction(callback)) {\r\n                                if (evCallback.callback === callback) {\r\n                                    removeEventListener(eventData.element, eventData.event, evCallback.callback);\r\n                                    events[i].tasks.splice(j, 1);\r\n                                    j--;\r\n                                }\r\n                            }\r\n                        }\r\n                    } else if (callback && isFunction(callback)) {\r\n                        if (evCallback.callback === callback) {\r\n                            removeEventListener(eventData.element, eventData.event, evCallback.callback);\r\n                            events[i].tasks.splice(j, 1);\r\n                            j--;\r\n                        }\r\n                    } else {\r\n                        removeEventListener(eventData.element, eventData.event, evCallback.callback);\r\n                        events[i].tasks.splice(j, 1);\r\n                        j--;\r\n                    }\r\n                }\r\n                if (!events[i].tasks.length) {\r\n                    // removeEventListener(eventData.element, eventData.event, eventData.handle);\r\n                    events.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction triggerEvent(element?: any, event?: any, data?: any) {\r\n    event = event || null;\r\n    element = element || null;\r\n    data = data || null;\r\n    if (!element && !event) return events;\r\n    for (var i = 0; i < events.length; i++) {\r\n        var eventData = events[i];\r\n        if (element == eventData.element && event == eventData.event) {\r\n            if (eventData.tasks.length) {\r\n                eventData.tasks.map(function (task) {\r\n                    // removeEventListener(eventData.element, eventData.event,);\r\n                    if (typeof task.callback == \"function\") {\r\n                        task.callback.apply(eventData.element, data)\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction getEventData(element?: any, event?: any, data?: any) {\r\n    event = event || null;\r\n    element = element || null;\r\n    data = data || null;\r\n    if (!element && !event) return null;\r\n    for (var i = 0; i < events.length; i++) {\r\n        var eventData = events[i];\r\n        if ((!element || element == eventData.element) && (!event || event == eventData.event)) {\r\n            return eventData;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * kiểm tra xem có phải sự kiện dom hay ko\r\n * @param {string|string[]} eventName \r\n * @returns {boolean}\r\n */\r\nfunction isDomEvent(eventName?: any) {\r\n    var stt = false;\r\n    if (isArray(eventName)) eventName.map(function (e) { if (allEvents.indexOf(String(e).toLowerCase()) != -1) stt = true; });\r\n    else if (isString(eventName) && allEvents.indexOf(eventName.toLowerCase()) != -1) stt = true;\r\n    return stt;\r\n};\r\n\r\n\r\n/**\r\n * kiểm tra xem có phải sự kiện dom hay ko\r\n * @param {string|string[]} eventName \r\n * @returns {boolean}\r\n */\r\nfunction isDomBasicEvent(eventName?: any) {\r\n    var stt = false;\r\n    if (isArray(eventName)) eventName.map(function (e) { if (domEvents.indexOf(String(e).toLowerCase()) != -1) stt = true; });\r\n    else if (isString(eventName) && domEvents.indexOf(eventName.toLowerCase()) != -1) stt = true;\r\n    return stt;\r\n};\r\n\r\n\r\n\r\nfunction setCssProp(element: HTMLElement, prop: string, value: any) {\r\n    if (element instanceof HTMLElement && isString(prop)) {\r\n        try {\r\n            var c = Str.slugToCamel(prop);\r\n            var s = \"element.style.\" + c + \" = value;\";\r\n            eval(s);\r\n        } catch (error) {\r\n            element['style'][prop] = value;\r\n        }\r\n    }\r\n}\r\nfunction getCssProp(element?: any, prop?: any) {\r\n    if (element instanceof Element && isString(prop)) {\r\n        return typeof element['style'][prop] != \"undefined\" ? String(element['style'][prop]) : \"\";\r\n    }\r\n    return \"\";\r\n}\r\n\r\nfunction getTree(elem?: any, list?: any) {\r\n    if (typeof elem == \"undefined\") return [];\r\n    if (typeof list == \"undefined\" || !isArray(list)) {\r\n        list = [];\r\n    }\r\n    if (elem instanceof Element) {\r\n        var self = this;\r\n        if (!elem.children.length) return list;\r\n        for (var i = 0; i < elem.children.length; i++) {\r\n            var child = elem.children[i];\r\n            list.push(child);\r\n            if (child.children.length) {\r\n                list = getTree(child, list);\r\n            }\r\n        }\r\n    }\r\n    return list;\r\n}\r\nfunction getParentNodes(elem?: any, list?: any, elementStop?: any) {\r\n    if (typeof elem == \"undefined\") return [];\r\n    if (typeof list == \"undefined\" || !isArray(list)) {\r\n        list = [];\r\n    }\r\n    if (elem instanceof Element) {\r\n        if (!elem.parentNode || (elementStop && elementStop == elem)) return list;\r\n        list.push(elem.parentNode);\r\n        list = getParentNodes(elem.parentNode, list, elementStop);\r\n    }\r\n    return list;\r\n}\r\n\r\nfunction isQuery(obj?: any) {\r\n    if (!isObject(obj)) return false;\r\n    if (obj.isQuery || obj.isDomQuery) return true;\r\n    return false;\r\n}\r\n\r\nfunction getArguments(args?: any) {\r\n    var a = [];\r\n    if (args && args.length) {\r\n        for (var i = 0; i < args.length; i++) {\r\n            const arg = args[i];\r\n            a.push(arg);\r\n        }\r\n    }\r\n    return a;\r\n}\r\n\r\nfunction isHTML(str?: any) {\r\n    return isString(str) ? (\r\n        /<(?=.*? .*?\\/*>|br|hr|input|!--|wbr)[a-z\\-_\\:]+.*?>|<([a-z\\-_\\:]+).*?<\\/\\1>/i.test(str)\r\n    ) :\r\n        _instanceof(str, Element);\r\n}\r\n\r\n\r\nfunction checkHtmlStr(str?: any) {\r\n    return !(str || '')\r\n        // replace html tag with content\r\n        .replace(/<([^>]+?)([^>]*?)>(.*?)<\\/\\1>/ig, '')\r\n        // remove remaining self closing tags\r\n        .replace(/(<([^>]+)>)/ig, '')\r\n        // remove extra space at start and end\r\n        .trim();\r\n}\r\n\r\nfunction emptyFunc() { }\r\nwindow['Dom'] = Dom\r\n\r\nexport default Dom;\r\n\r\nexport {\r\n    createEl, create, getDomInf, Dom, DomEl, DomFactory, inputTypes, inputTags, htmlTags, domEvents\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { ControlSyncEngine, getControlEngine } from '@app/_3D/engines/controls.engine';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\nimport { ViewportService } from '../viewport.service';\nvar secret_id = 1;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class VectorControlsService extends EventManagerService {\n    engine = getControlEngine();\n\n    constructor() {\n        super();\n        this.start()\n    }\n\n    start() {\n        this.on(\"changeface\", e => this.engine.changeCameraLookFace(e.face, true));\n    }\n    getCanvas(){\n        return this.engine.getCanvas();\n    }\n\n    setCanvasWrapper(element){\n        this.engine.setWrapper(element);\n    }\n\n    show(){\n        this.emit({\n            type: \"show\",\n            value: true\n        });\n    }\n    hide(){\n        this.emit({\n            type: \"show\",\n            value: false\n        });\n    }\n\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { EditorIO, EditorMethods } from '../../base/editor-io';\n\n@Component({\n    selector: 'app-tab-scene',\n    templateUrl: './tab-scene.component.html',\n    styleUrls: ['./tab-scene.component.scss']\n})\nexport class TabSceneComponent extends BaseComponent implements OnInit {\n    @Input() loaded: EventEmitter<any> = new EventEmitter();\n\n    @Output() loadedChange: EventEmitter<any> = new EventEmitter();\n\n    loadedForeground = false;\n    loadedBackground = false;\n    height50: boolean = false;\n\n    constructor(private cd: ChangeDetectorRef) {\n        super()\n    }\n    onInit(): void {\n        this.loadedChange.emit(true);\n        \n    }\n\n}\n","<div class=\"tab-inner\" [class.height-50]=\"height50\">\n  <h2>{{\"Scene\"|translate}}</h2>\n  <nz-tabset nzTabPosition=\"top\" nzType=\"line\" class=\"sub-tab\">\n\n    <nz-tab [nzTitle]=\"iconBackground\">\n      <ng-template #iconBackground>\n        <img src=\"/assets/icons/new-design/tab-sub/background.svg\" alt=\"Background\" />\n        <div>Background</div>\n      </ng-template>\n      <app-tab-background class=\"tab-background\"></app-tab-background>\n    </nz-tab>\n\n    <nz-tab [nzTitle]=\"iconForeground\">\n      <ng-template #iconForeground>\n        <img src=\"/assets/icons/new-design/tab-sub/foreground.svg\" alt=\"Foreground\" />\n        <div>Foreground</div>\n      </ng-template>\n      <ng-template nz-tab>\n        <app-tab-foreground></app-tab-foreground>\n      </ng-template>\n    </nz-tab>\n    \n    <nz-tab [nzTitle]=\"iconSettings\">\n      <ng-template #iconSettings>\n        <img src=\"/assets/icons/new-design/tab-top/setting.svg\" alt=\"Settings\" />\n        <div>Settings</div>\n      </ng-template>\n      <ng-template nz-tab>\n        <app-tab-scene-settings></app-tab-scene-settings>\n      </ng-template>\n    </nz-tab>\n    \n  </nz-tabset>\n</div>","export * from './error.interceptor';\r\nexport * from './jwt.interceptor';\r\n","import { assignValue, getArguments, getType, inArray, isArray, isBoolean, isEmpty, isFunction, isInteger, isNumber, isObject, isString, Str } from \"./utils\";\r\nimport LocalStorageEngine from \"./local-storage\";\r\n\r\nexport const defaultTypeValues = {\r\n    string: \"\",\r\n    number: 0,\r\n    boolean: false,\r\n    object: {},\r\n    array: [],\r\n    html: \"<div></div>\",\r\n\r\n}\r\n\r\nexport interface DbTableColumn {\r\n    name?: string\r\n    type: string\r\n    length?:number\r\n    required?: boolean\r\n    defVal?: any\r\n    autoIncrement?: boolean\r\n}\r\nexport interface DbTableColumns{\r\n    [column: string]: DbTableColumn\r\n}\r\n\r\nexport interface DbTableRow{\r\n    [column:string]: any\r\n}\r\n\r\nexport interface DbTable{\r\n    name: string,\r\n    config: DbTableColumns,\r\n    data: DbTableRow[],\r\n    autoIncrement: number\r\n}\r\n\r\nexport interface Database {\r\n    version: string\r\n    name: string,\r\n    tables: {\r\n        [tableName:string]: DbTable\r\n    }\r\n}\r\n\r\nclass LocalDB {\r\n    key: string = \"__storage__database__\";\r\n    storage: LocalStorageEngine;\r\n\r\n    dbname: string;\r\n\r\n    database: Database;\r\n    constructor(database) {\r\n        if (!(isString(database) && database == Str.objectKey(database))) {\r\n            throw new Error(\"Database Name is not valid\");\r\n        }\r\n        this.dbname = database;\r\n        this.storage = new LocalStorageEngine(this.key);\r\n\r\n        this.init();\r\n    }\r\n\r\n    init(){\r\n        var db = this.storage.get(this.dbname);\r\n        if(db){\r\n            this.database = db;\r\n        }\r\n        else{\r\n            this.database = {\r\n                version: \"1.0\",\r\n                name: this.dbname,\r\n                tables: {}\r\n            };\r\n            this.storage.set(this.dbname, this.database);\r\n        }\r\n    }\r\n    \r\n    updateDatabase(){\r\n        this.storage.set(this.dbname, this.database);\r\n    }\r\n\r\n    getTable(tableName: string): (DbTable|null){\r\n        return typeof this.database.tables[tableName] == \"object\" && isArray(this.database.tables[tableName].data) ? this.database.tables[tableName] : null;\r\n    }\r\n\r\n\r\n    parseTableRowData(table, data, isUpdate?: any): any {\r\n        var d = {};\r\n\r\n        var $id = table.autoIncrement + 1;\r\n        for (var k in table.config) {\r\n            if (Object.prototype.hasOwnProperty.call(table.config, k)) {\r\n                var dhk = Object.prototype.hasOwnProperty.call(data, k);\r\n                var column = table.config[k];\r\n                if (column.autoIncrement) {\r\n                    if (!isUpdate) {\r\n                        d[k] = $id;\r\n                    }\r\n                }\r\n                else if (!((column.type == \"string\" && isNumber(data[k]) || column.type == \"number\" && isNumber(data[k]))) && column.type != getType(data[k])) {\r\n                    return null;\r\n                }\r\n                else if (!dhk) {\r\n                    if (!isUpdate) {\r\n                        d[k] = column.defVal;\r\n                    }\r\n                } else if (column.type == \"number\") {\r\n                    d[k] = Number(data[k]);\r\n                } else {\r\n                    d[k] = data[k];\r\n                }\r\n            }\r\n        }\r\n\r\n        return d;\r\n    }\r\n    /**\r\n     * \r\n     * @param {string} name tên cộ\r\n     * @param {string} type loại dự liệu\r\n     * @param {*} defaultValue gia tri mac dinh\r\n     * @param {booluan} autoIncrement \r\n     * @returns {{name, type, defaultValue, autoIncrement}}\r\n     */\r\n    parseColumn(name, type?, defaultValue?, autoIncrement?): any {\r\n        var t = String(type).toLowerCase();\r\n        if (t == \"text\") t = \"string\";\r\n\r\n        if (!defaultTypeValues.hasOwnProperty(t) || !isString(name) || String(name).length == 0) {\r\n            return null;\r\n        }\r\n        return {\r\n            name: name,\r\n            type: t,\r\n            length: null,\r\n            defVal: typeof defaultValue !== \"undefined\" ? defaultValue : defaultTypeValues[t],\r\n            autoIncrement: isBoolean(autoIncrement) ? autoIncrement : false\r\n        };\r\n    }\r\n\r\n    /**\r\n     * chuẩn hóa tất cả các cột\r\n     * @param {array|object} columns các cột\r\n     * @param {boolean} isA isArray\r\n     * @param {boolean} isO isObject\r\n     * @returns {object}\r\n     */\r\n    parseColumns(columns, isA, isO): any {\r\n        var cols = {};\r\n        var columnCount = 0;\r\n        var self = this;\r\n        var addColumn = function (name, type, defaultValue?, autoIncrement?) {\r\n            var cl = self.parseColumn(name, type, defaultValue, autoIncrement);\r\n            if (cl) {\r\n                columnCount++;\r\n                cols[name] = cl;\r\n                return true;\r\n\r\n            }\r\n            return false;\r\n        }\r\n        if (isA) {\r\n            columns.map(function (col: any) {\r\n                if (isObject(col) && col.name) {\r\n                    addColumn(col.name, col.type || \"string\", col.defaultValue || col['default'], col.autoIncrement);\r\n                } else if (isString(col)) {\r\n                    addColumn(col, \"string\");\r\n                }\r\n            })\r\n        }\r\n        else if (isO) {\r\n            for (var key in columns) {\r\n                if (Object.hasOwnProperty.call(columns, key)) {\r\n                    var col = columns[key];\r\n                    var type = getType(col);\r\n                    if (type == \"object\") {\r\n                        if (col.type === undefined) {\r\n                            addColumn(key, \"object\", col);\r\n                        } else if (Object.hasOwnProperty.call(defaultTypeValues, String(col.type).toLowerCase())) {\r\n                            addColumn(col.name || key, col.type, defaultTypeValues[String(col.type).toLowerCase()], col.autoIncrement);\r\n                        }\r\n                    } else {\r\n                        if (type == \"string\") {\r\n                            var t = String(col).toLowerCase();\r\n                            if (Object.hasOwnProperty.call(defaultTypeValues, t)) {\r\n                                addColumn(key, t);\r\n                            } else {\r\n                                addColumn(key, type, col);\r\n                            }\r\n                        } else {\r\n                            addColumn(key, type, col);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            count: columnCount,\r\n            columns: cols\r\n        };\r\n    }\r\n    /**\r\n     * \r\n     * @param {string} tableName tên tên bảng\r\n     * @param {*} columns \r\n     * @returns \r\n     */\r\n    createTable(tableName: string, columns: any) {\r\n        if (!(isString(tableName) && tableName == Str.objectKey(tableName))) {\r\n            return false;\r\n        }\r\n        var isA = isArray(columns);\r\n        var isO = isObject(columns);\r\n        if (!(isA || isO)) {\r\n            return false;\r\n        }\r\n        if (this.getTable(tableName)) {\r\n            return false;\r\n        }\r\n        var colCfg = this.parseColumns(columns, isA, isO);\r\n        if (colCfg.count) {\r\n            this.database.tables[tableName] = {\r\n                name: tableName,\r\n                config: colCfg.columns,\r\n                data: [],\r\n                autoIncrement: 0\r\n            };\r\n            this.updateDatabase();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Xóa bảng\r\n     * @param {string} tableName tên bảng\r\n     * @returns {boolean}\r\n     */\r\n    dropTable(tableName: string):boolean {\r\n        if(typeof this.database.tables[tableName] == \"object\"){\r\n            this.database.tables[tableName] = null;\r\n            delete this.database.tables[tableName];\r\n            this.updateDatabase();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * sửa bảng\r\n     * @param {string} tableName tên bảng\r\n     * @param {array|object} columns các cột\r\n     * @returns {boolean}\r\n     */\r\n    modifyTable(tableName, columns) {\r\n        \r\n        var table = this.getTable(tableName);\r\n        if (!table) {\r\n            throw new Error(\"Table is not exists\");\r\n        }\r\n        var isA = isArray(columns);\r\n        var isO = isObject(columns);\r\n        if (!(isA || isO)) {\r\n            throw new Error(\"Table columns is not valid\");\r\n        }\r\n        var colCfg = this.parseColumn(columns, isA, isO);\r\n\r\n        if (colCfg.count) {\r\n            for (var key in colCfg.config) {\r\n                if (Object.hasOwnProperty.call(colCfg.config, key)) {\r\n                    var cfg = colCfg.config[key];\r\n                    table.config[key] = cfg;\r\n                }\r\n            }\r\n            if (table.data.length) {\r\n                for (var i = 0; i < table.data.length; i++) {\r\n                    var row = table.data.length[i];\r\n                    for (var key in colCfg.columns) {\r\n                        if (Object.hasOwnProperty.call(colCfg.columns, key)) {\r\n                            var cfg = colCfg.columns[key];\r\n                            if (Object.hasOwnProperty.call(row, key)) {\r\n                                var t = getType(row[key]);\r\n                                if (t != cfg.type) {\r\n                                    if (t == \"number\" && cfg.type == \"string\") {\r\n                                        row[key] = String(row[key]);\r\n                                    } else if (t == \"string\" && cfg.type == \"number\") {\r\n                                        var a = Number(row[key]);\r\n                                        row[key] = !isNaN(a) ? a : cfg.defVal;\r\n                                    } else if (cfg.type == \"boolean\" && t == \"number\") {\r\n                                        row[key] = row[key] > 0;\r\n                                    } else if (cfg.type == \"array\") {\r\n                                        row[key] = [row[key]];\r\n                                    }\r\n                                    else if (cfg.type == \"object\") {\r\n                                        row[key] = Object.create(row[key]);\r\n                                    }\r\n                                    else {\r\n                                        row[key] = cfg.defVal;\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                row[key] = cfg.defVal;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // this.database.tables[tableName] = table;\r\n            this.updateDatabase();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * thêm cột\r\n     * @param {string} tableName tên bảng\r\n     * @param {string} columnName tên cột\r\n     * @param {object} config cấu hình cột\r\n     */\r\n    addColumn(tableName, columnName, config): any {\r\n        if (!(isString(tableName) && tableName == Str.objectKey(tableName))) {\r\n            return false;\r\n        }\r\n        var ct = getType(columnName);\r\n        var table = this.getTable(tableName);\r\n        if (!table) {\r\n            return false;\r\n        }\r\n        var column = null;\r\n        if (ct == \"string\") {\r\n            if (isObject(config)) {\r\n                var col = this.parseColumn(columnName, config.type || \"string\", columnName.default || config.defVal, config.autoIncrement);\r\n                if (col) {\r\n                    column = col;\r\n                }\r\n            } else if (isString(config)) {\r\n                var type, defVal;\r\n                if (typeof defaultTypeValues[String(config).toLowerCase()] != \"undefined\") {\r\n                    type = config;\r\n                } else {\r\n                    type = 'string';\r\n                    defVal = config;\r\n                }\r\n                var col = this.parseColumn(columnName, type, defVal);\r\n                if (col) {\r\n                    column = col;\r\n                }\r\n            } else {\r\n                var col = this.parseColumn(columnName, typeof config != \"undefined\" ? getType(config) : \"string\", config);\r\n                if (col) {\r\n                    column = col;\r\n                }\r\n            }\r\n        } else if (ct == \"object\" && Object.prototype.hasOwnProperty.call(columnName, 'name')) {\r\n            var col = this.parseColumn(columnName.name, typeof columnName.type != \"undefined\" ? columnName.type : \"string\", columnName.default || columnName.defVal);\r\n            if (col) {\r\n                column = col;\r\n            }\r\n        }\r\n        if (column) {\r\n            if (Object.prototype.hasOwnProperty.call(table.config, column.name)) {\r\n                return false;\r\n            }\r\n            table.config[column.name] = column;\r\n            for (var index = 0; index < table.data.length; index++) {\r\n                var row = table.data[index];\r\n                row[column.name] = column.defVal;\r\n            }\r\n\r\n            this.updateDatabase();\r\n        }\r\n    }\r\n    /**\r\n     * xóa cột\r\n     * @param {string} tableName tyên bảng\r\n     * @param {string} columns danh sách cột cần xóa\r\n     * @returns {boolean}\r\n     */\r\n    dropColumn(tableName: string, columns?: any) {\r\n        \r\n        var table = this.getTable(tableName);\r\n        if (!table) {\r\n            return false;\r\n        }\r\n        var list = [];\r\n        var args = getArguments(arguments, 1);\r\n        for (var index = 0; index < args.length; index++) {\r\n            var a = args[index];\r\n            if (isArray(a)) {\r\n                a.map(function (s) {\r\n                    if (Object.prototype.hasOwnProperty.call(table.config, s)) {\r\n                        table.config[s] = null;\r\n                        list.push(s);\r\n                        try {\r\n                            delete table.config[s];\r\n\r\n                        } catch (error) {\r\n\r\n                        }\r\n                    }\r\n                })\r\n            } else if (Object.prototype.hasOwnProperty.call(table.config, a)) {\r\n                table.config[a] = null;\r\n                list.push(a);\r\n                try {\r\n                    delete table.config[a];\r\n                } catch (error) {\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n        if (list.length && table.data.length) {\r\n            table.data.map(function (row) {\r\n                list.map(function (col) {\r\n                    row[col] = null;\r\n                    try {\r\n                        delete row[col];\r\n                    } catch (error) {\r\n\r\n                    }\r\n                })\r\n            })\r\n        }\r\n        this.updateDatabase();\r\n        return true;\r\n    }\r\n    /**\r\n     * thêm dữ liệu\r\n     * @param {string} tableName tên bảng\r\n     * @param {object} data dữ liệu\r\n     * @returns {boolean}\r\n     */\r\n    insert(tableName: any, data: any) {\r\n        var table = this.getTable(tableName);\r\n        if (!table || !isObject(data)) {\r\n            return false;\r\n        }\r\n        var rowData = this.parseTableRowData(table, data);\r\n        if (!rowData) return false;\r\n        table.data.push(rowData);\r\n        table.autoIncrement++;\r\n        this.updateDatabase();\r\n        return true;\r\n    }\r\n    /**\r\n     * cập nhật dữ liệu \r\n     * @param {string} tableName tên bảng\r\n     * @param {object} data dữ liệu\r\n     * @param {function|object} condition diều kiện\r\n     * @returns {integer}\r\n     */\r\n    update(tableName:string, data:any, condition?:any) {\r\n        var table = this.getTable(tableName);\r\n        if (!table || !isObject(data)) {\r\n            return 0;\r\n        }\r\n        var d: any = this.parseTableRowData(table, data, true);\r\n        if (!d) return 0;\r\n        var count = 0;\r\n        if (!condition) {\r\n            table.data.map(function (row) {\r\n                assignValue(row, d);\r\n                count++;\r\n            });\r\n        }\r\n        else if (isObject(condition) && !isEmpty(condition)) {\r\n            table.data.map(function (row) {\r\n                var s = true;\r\n                for (var key in condition) {\r\n                    if (Object.hasOwnProperty.call(condition, key)) {\r\n                        if (!Object.hasOwnProperty.call(row, key) || row[key] != condition[key]) {\r\n                            s = false;\r\n                        }\r\n                    }\r\n                }\r\n                if (s) {\r\n                    assignValue(row, d);\r\n                    count++;\r\n                }\r\n            });\r\n        }\r\n        else if (isFunction(condition)) {\r\n            table.data.map(function (row) {\r\n                var s = condition(assignValue({}, row));\r\n                if (s) {\r\n                    assignValue(row, d);\r\n                    count++;\r\n                }\r\n            });\r\n        }\r\n        this.updateDatabase();\r\n        return count;\r\n    }\r\n\r\n    delete(tableName: string, condition?: any) {\r\n        var table = this.getTable(tableName);\r\n        if (!table) {\r\n            return 0;\r\n        }\r\n        var count = 0;\r\n        if (!condition) {\r\n            count = table.data.length;\r\n            table.data.splice(0);\r\n        }\r\n        else if (isObject(condition) && !isEmpty(condition)) {\r\n            var i = 0;\r\n            while (i < table.data.length) {\r\n                var s = true;\r\n                var row = table.data[i];\r\n                for (var key in condition) {\r\n                    if (Object.hasOwnProperty.call(condition, key)) {\r\n                        if (!Object.hasOwnProperty.call(row, key) || row[key] != condition[key]) {\r\n                            s = false;\r\n                        }\r\n                    }\r\n                }\r\n                if (s) {\r\n                    table.data.splice(i, 1);\r\n                    count++;\r\n                } else {\r\n                    i++;\r\n                }\r\n            }\r\n        }\r\n        else if (isFunction(condition)) {\r\n            var i = 0;\r\n            while (i < table.data.length) {\r\n                var s = true;\r\n                var row = table.data[i];\r\n                s = condition(assignValue({}, row));\r\n                if (s) {\r\n                    table.data.splice(i, 1);\r\n                    count++;\r\n                } else {\r\n                    i++;\r\n                }\r\n            }\r\n        }\r\n        this.updateDatabase();\r\n        return count;\r\n    }\r\n    /**\r\n     * lấy về dữ liệu\r\n     * @param tableName tên bảng\r\n     * @param columns danh sach cot\r\n     * @param condition dieu kien lay du lieu\r\n     * @param orderBy sap xep\r\n     * @param limit gioi han\r\n     * @returns {DbTable[]}\r\n     */\r\n    select(tableName: string, columns?: any, condition?: any, orderBy?: any, limit?: any): DbTableRow[] {\r\n        var maskTable = null;\r\n        var m = null;\r\n        var table = this.getTable(tableName);\r\n\r\n        if (!table) {\r\n            return [];\r\n        }\r\n        var isN = isInteger(limit) && limit > 0;\r\n        // var count = 0;\r\n        var raw = [];\r\n        var results = [];\r\n        var selectColumns: any = '*';\r\n        if (!columns || columns == '*') {\r\n            // ko lam gi\r\n        }\r\n        else {\r\n            selectColumns = [];\r\n\r\n            if (isString(columns)) {\r\n                var ca = columns.split(\",\").map(function (a) {\r\n                    return a.trim();\r\n                }).filter(function (t) {\r\n                    return t.length > 0;\r\n                }).map(function (t) {\r\n                    var a = t.split(\" \").filter(function (v) {\r\n                        return v.length > 0\r\n                    });\r\n                    if (a.length == 3 && a[1].toLowerCase() == \"as\") {\r\n                        return [a[0], a[2]];\r\n                    }\r\n                    return a;\r\n                }).filter(function (a) {\r\n                    return a.length > 0;\r\n                }).map(function (a) {\r\n                    if (Object.prototype.hasOwnProperty.call(table.config, a[0])) {\r\n                        selectColumns.push(a);\r\n                    }\r\n                });\r\n            }\r\n            else if (isArray(columns) && columns.length) {\r\n                columns.map(function (t) {\r\n                    var a = t.split(\" \").filter(function (v) {\r\n                        return v.length > 0\r\n                    });\r\n                    if (a.length == 3 && a[1].toLowerCase() == \"as\") {\r\n                        return [a[0], a[2]];\r\n                    }\r\n                    return a;\r\n                }).filter(function (a) {\r\n                    return a.length > 0;\r\n                }).map(function (a) {\r\n                    if (Object.prototype.hasOwnProperty.call(table.config, a[0])) {\r\n                        selectColumns.push(a);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        var isCondFunc = isFunction(condition);\r\n        var isCondObj = isObject(condition);\r\n        if (!condition) {\r\n            // count = this.data.length;\r\n            table.data.map(function (row) {\r\n                raw.push(assignValue({}, row));\r\n            });\r\n        }\r\n        else if (isCondFunc || isCondObj) {\r\n            var masks = [];\r\n            if (selectColumns != \"*\") {\r\n                selectColumns.map(function (a) {\r\n                    masks.push({\r\n                        column: a[0],\r\n                        mask: a.length > 1 ? a[1] : null\r\n                    });\r\n                })\r\n            }\r\n            else {\r\n                for (var key in table.config) {\r\n                    if (Object.hasOwnProperty.call(table.config, key)) {\r\n                        var col = table.config[key];\r\n                        masks.push({\r\n                            column: col.name,\r\n                            mask: null\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            table.data.map(function (row) {\r\n                var b = assignValue({}, row);\r\n                masks.map(function (c) {\r\n                    if (c.mask) {\r\n                        b[c.mask] = b[c.column];\r\n                    }\r\n                });\r\n                if (isCondFunc) {\r\n                    var whereStt = condition(b);\r\n                    if (whereStt === true) {\r\n                        raw.push(b);\r\n                    }\r\n                } else if (isCondObj) {\r\n                    var s = true;\r\n                    for (const key in condition) {\r\n                        if (Object.hasOwnProperty.call(condition, key)) {\r\n                            const vl = condition[key];\r\n                            if (b[key] != vl) {\r\n                                s = false;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (s) {\r\n                        raw.push(b);\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        if (raw.length) {\r\n            if (isObject(orderBy) && !isEmpty(orderBy)) {\r\n                var orderByList = [];\r\n                for (var key in orderBy) {\r\n                    if (Object.hasOwnProperty.call(orderBy, key)) {\r\n                        var type = String(orderBy[key]).toLowerCase();\r\n                        if (Object.hasOwnProperty.call(raw[0], key) && inArray(['asc', 'desc', 1, 0], type)) {\r\n                            orderByList.push({\r\n                                key: key,\r\n                                type: type\r\n                            })\r\n                        }\r\n\r\n                    }\r\n                }\r\n                for (var i = 0; i < orderByList.length; i++) {\r\n                    var order = orderByList[i];\r\n\r\n                    if (i == 0) {\r\n                        for (var j = 0; j < raw.length - 1; j++) {\r\n                            for (var k = j + 1; k < raw.length; k++) {\r\n                                var a = Str.compare(raw[j][order.key], raw[k][order.key]);\r\n                                // console.log(`${raw[j][order.key]} <> ${raw[k][order.key]}`, a)\r\n                                if (order.type == 'desc') {\r\n                                    if (a == -1) {\r\n                                        var t = raw[j];\r\n                                        raw[j] = raw[k];\r\n                                        raw[k] = t;\r\n                                    }\r\n                                } else if (a == 1) {\r\n                                    var t = raw[j];\r\n                                    raw[j] = raw[k];\r\n                                    raw[k] = t;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        for (var j = 0; j < raw.length - 1; j++) {\r\n                            for (var k = j + 1; k < raw.length; k++) {\r\n                                var s = true;\r\n                                for (var l = 0; l < i; l++) {\r\n                                    var o = orderByList[l];\r\n\r\n                                    if (raw[j] == raw[k] || raw[j][o.key] != raw[k][o.key]) {\r\n                                        s = false;\r\n                                    }\r\n\r\n                                }\r\n                                if (s) {\r\n                                    var a = Str.compare(raw[j][order.key], raw[k][order.key]);\r\n                                    if (order.type == 'desc') {\r\n                                        if (a == -1) {\r\n                                            var t = raw[j];\r\n                                            raw[j] = raw[k];\r\n                                            raw[k] = t;\r\n                                        }\r\n                                    } else if (a == 1) {\r\n                                        var t = raw[j];\r\n                                        raw[j] = raw[k];\r\n                                        raw[k] = t;\r\n                                    }\r\n                                }\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (isN) {\r\n                results = raw.slice(0, limit);\r\n            }\r\n            else {\r\n                results = raw;\r\n            }\r\n        }\r\n        if (selectColumns != \"*\") {\r\n            return results.map(function (row) {\r\n                var obj = {};\r\n                for (var i = 0; i < selectColumns.length; i++) {\r\n                    var col = selectColumns[i];\r\n                    if (col[1]) {\r\n                        obj[col[1]] = row[col[0]];\r\n                    }\r\n                }\r\n                return obj;\r\n            }) as DbTableRow[]\r\n        }\r\n        return results;\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default LocalDB;\r\nexport { LocalDB };\r\n","import { Component, Input, OnInit } from '@angular/core';\nimport { BaseInputComponent } from '../base-input/base-input.component';\n\n@Component({\n  selector: 'inp-range',\n  templateUrl: './inp-range.component.html',\n  styleUrls: ['./inp-range.component.scss']\n})\nexport class InpRangeComponent extends BaseInputComponent implements OnInit {\n\n  @Input() step: number = 1;\n  @Input() max: number = 9999999999999999;\n  @Input() min: number =-9999999999999999;\n\n  @Input() output: boolean = false;\n\n  constructor() {\n    super()\n   }\n\n  ngOnInit(): void {\n  }\n\n}\n","<ng-container *ngIf=\"output; then thenTemplate; else elseTemplate\"></ng-container>\n<ng-template #thenTemplate>\n    <div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\">\n        <div nz-col class=\"gutter-row\" [nzSpan]=\"16\">\n            <nz-slider [name]=\"name\" [nzMin]=\"min\" [nzMax]=\"max\" [nzStep]=\"step\" [(ngModel)]=\"value\" (ngModelChange)=\"onChange($event)\"></nz-slider>\n        </div>\n\n        <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n            <div class=\"inner-box\">\n                <nz-input-number [name]=\"name\" [nzMin]=\"min\" [nzMax]=\"max\" [nzStep]=\"step\" [(ngModel)]=\"value\" (ngModelChange)=\"onChange($event)\" [ngStyle]=\"{ marginLeft: '0px' }\"></nz-input-number>\n            </div>\n        </div>\n    </div>\n</ng-template>\n<ng-template #elseTemplate>\n    <nz-slider [name]=\"name\" [nzMin]=\"min\" [nzMax]=\"max\" [nzStep]=\"step\" [(ngModel)]=\"value\" (ngModelChange)=\"onChange($event)\"></nz-slider>\n</ng-template>\n\n","import { Injectable } from '@angular/core';\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { SettingService } from '../services';\r\n\r\n@Injectable()\r\nexport class JwtInterceptor implements HttpInterceptor {\r\n  constructor(private settingService: SettingService) {}\r\n\r\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    const auth = this.settingService.auth;\r\n    if (request.url.includes('original.cjson')) {\r\n      return next.handle(request);\r\n    }\r\n\r\n    if (auth && typeof auth.accessToken === 'string') {\r\n      request = request.clone({\r\n        setHeaders: {\r\n          Authorization: `Bearer ${auth.accessToken}`,\r\n        },\r\n      });\r\n    }\r\n\r\n    return next.handle(request);\r\n  }\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\nimport { share } from 'rxjs/operators';\r\nimport { Menu, menuData } from './menu.model';\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class MenuService implements OnDestroy {\r\n  private items: any[] = menuData;\r\n  change$: BehaviorSubject<Menu[]> = new BehaviorSubject<Menu[]>([]);\r\n  constructor() {}\r\n\r\n  add(items: Menu[]) {\r\n    this.items = items;\r\n    this.resume();\r\n  }\r\n\r\n  get menus() {\r\n    return this.items;\r\n  }\r\n\r\n  resume() {\r\n    this.change$.next(this.items);\r\n  }\r\n\r\n  get change(): Observable<Menu[]> {\r\n    return this.change$.pipe(share());\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.change$.unsubscribe();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { inArray } from '@app/_core/helpers/utils';\r\nimport { HttpService } from '@app/_core/services/http.service';\r\n// import { StateService } from '@app/_core/services/state.service';\r\nimport { Observable, of } from 'rxjs';\r\n// import { RestService } from '../../../_core/services/rest.service';\r\n\r\nimport { ImageModel } from './model';\r\nimport { ImageResultModel, ImageResultsModel } from './results.model';\r\n// import { ImageResultsModel, ImageResultModel } from './results.model';\r\n\r\nconst API_CUSTOMERS_URL = 'images';\r\n\r\nexport const imgListTypes = ['images', 'list', 'foreground', 'background'];\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ImageService {\r\n  results: ImageResultsModel;\r\n\r\n  constructor(private httpService: HttpService) { }\r\n\r\n\r\n\r\n  getAll(params: {[key:string]:any}): Observable<ImageResultsModel> {\r\n    return this.httpService.get(API_CUSTOMERS_URL + \"/list.json\", params);\r\n  }\r\n  getImageFromUrl(url: string, params: {[key:string]:any}): Observable<ImageResultsModel> {\r\n    return this.httpService.get(API_CUSTOMERS_URL + \"/list.json\", params);\r\n  }\r\n  \r\n  getImages(list: string, params: {[key:string]:any}): Observable<ImageResultsModel> {\r\n    if(!inArray(imgListTypes, list)) return of({\r\n      data: [],\r\n      pageCount: 0,\r\n      total: 0,\r\n      page: 1,\r\n      count: 0,\r\n      message: \"image list not found\",\r\n      status: 0\r\n    });\r\n    if(list == \"image\") list = \"list\";\r\n    return this.httpService.get(API_CUSTOMERS_URL + \"/\"+list+\".json\", params);\r\n  }\r\n\r\n  getBackgrounds(params: {[key:string]:any}): Observable<ImageResultsModel> {\r\n    return this.httpService.get(API_CUSTOMERS_URL + \"/background.json\", params);\r\n  }\r\n  getForegrounds(params: {[key:string]:any}): Observable<ImageResultsModel> {\r\n    return this.httpService.get(API_CUSTOMERS_URL + \"/foreground.json\", params);\r\n  }\r\n\r\n  // get(key): Observable<ImageResultModel> {\r\n  //   return this.httpService.get(`${API_CUSTOMERS_URL}/${key}.json`);\r\n  // }\r\n\r\n  get(key): Observable<ImageModel> {\r\n    return this.httpService.get(`${API_CUSTOMERS_URL}/${key}.json`);\r\n  }\r\n\r\n  create(model: ImageModel): Observable<ImageResultModel> {\r\n    return this.httpService.post(API_CUSTOMERS_URL + \"/actions.json\", model);\r\n  }\r\n\r\n  update(model: ImageModel): Observable<ImageResultModel> {\r\n    const key = model.id;\r\n    // return this.httpService.patch(`${API_CUSTOMERS_URL}/${key}.json`, model);\r\n    return this.httpService.patch(`${API_CUSTOMERS_URL}/actions.json`, model);\r\n  }\r\n\r\n\r\n  delete(key): Observable<ImageResultModel> {\r\n    // return this.httpService.delete(`${API_CUSTOMERS_URL}/${key}`);\r\n    return this.httpService.delete(`${API_CUSTOMERS_URL}/actions.json`);\r\n  }\r\n\r\n  search(query: { tag?: string; key?: string; collectionCode?: string }) {\r\n    return this.httpService.get(`${API_CUSTOMERS_URL}/list.json`, query);\r\n  }\r\n\r\n  searchNounProject(query: { tag?: string; key?: string; collectionCode?: string }) {\r\n    return this.httpService.get(`${API_CUSTOMERS_URL}/search/nounproject`, query);\r\n  }\r\n\r\n  render(params) {\r\n    return this.httpService.download(`Images/render`, params);\r\n  }\r\n\r\n  getImageData(url) {\r\n    return this.httpService.getOut(url);\r\n  }\r\n\r\n  useImage(ImageId): Observable<ImageResultModel> {\r\n    return this.httpService.post(`${API_CUSTOMERS_URL}/${ImageId}/use`, {}, false);\r\n  }\r\n}\r\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { BackgroundSetting } from '@app/_3D/store/data.type';\nimport { assignValue, inArray } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { EditorIO, EditorMethods } from '../../../base/editor-io';\n\n\ninterface BgOption{\n    type: string,\n    label: string,\n    value?: any,\n    selected: boolean\n}\n\ntype BgOptions = Array<BgOption>;\n\n\n@Component({\n    selector: 'app-tab-background',\n    templateUrl: './tab-background.component.html',\n    styleUrls: ['./tab-background.component.scss']\n})\nexport class TabBackgroundComponent extends BaseComponent implements OnInit {\n\n\n    background: BackgroundSetting = {\n        type: \"none\"\n    };\n\n    bgOptions: BgOptions = [\n        {\n            type: \"none\",\n            label: \"Không có hình nền\",\n            selected: true\n        },\n        {\n            type: \"color\",\n            label: \"Màu sắc\",\n            value: \"#000\",\n            selected: false\n        },\n        {\n            type: \"texture\",\n            label: \"Hình Nền\",\n            value: null,\n            selected: false\n        }\n\n    ];\n\n    appEvent = {\n        \n    }\n\n    constructor(\n        private events: AppEditorEventService,\n        private cd: ChangeDetectorRef\n    ) {\n        super();\n    }\n    \n    initOnce(){\n        this.app = this.events.app;\n     \n    }\n    init() {\n        if(this.isChangeSubEvents){\n            this.app = this.subEvents.app;\n        \n        }\n        this.setBackground(this.app.getBackgroundSetting());\n    \n        this.cd.detectChanges();\n    }\n    onDestroy(){\n        \n    }\n\n    setBackground(background:BackgroundSetting){\n        assignValue(this.background, background);\n        this.bgOptions.map(opt => {\n            opt.selected = opt.type == this.background.type;\n            if(typeof this.background[opt.type]!=\"undefined\"){\n                opt.value = this.background[opt.type];\n            }\n        });\n    }\n\n    changeType(type: string){\n        if(inArray(['none', 'color', 'texture'], type) && this.background.type != type){\n            this.background.type = type;\n            this.bgOptions.map(opt => {\n                opt.selected = opt.type == type;\n            });\n            this.updateBackground();\n\n        }\n    }\n\n    updateColor(event){\n        this.background.color = event.value;\n        this.bgOptions.map(opt => {\n            if(opt.type==\"color\"){\n                opt.value = event.value;\n            }\n        });\n        \n        this.updateBackground();\n    }\n\n    updateTexture(event){\n        if(event.file && (event.file.extension == \"hdr\" || event.file.format == \"hdr\")){\n            \n            this.background.texture = {\n                file: event.file.source,\n                format: \"hdr\"\n            }\n        }else{\n            this.background.texture = {\n                file: event.value,\n                format: \"jpg\"\n            }\n        }\n        this.bgOptions.map(opt => {\n            if(opt.type==\"texture\"){\n                opt.value = this.background.texture;\n            }\n        });\n        this.updateBackground();\n        this.emitRefresh();\n    }\n\n    updateBackground(){\n        if(this.app){\n            this.app.updateBackgroundData(this.background);\n        }\n\n     \n    }\n\n    emitRefresh(){\n        setTimeout(() => {\n            this.subEvents.emit(\"tab.scene.refresh\");\n        }, 200);\n    }\n}\n","<div class=\"tab-inner\">\n    <div class=\"store\">\n        <div class=\"background-options\">\n            <div class=\"bg-item\" *ngFor=\"let option of bgOptions; let i=index\" [class.active]=\"option.selected\">\n                <div class=\"item-header\" (click)=\"changeType(option.type)\">\n                    <span class=\"icon\">\n                        <ng-container *ngIf=\"option.selected; then selectedTemplate; else notSelectedTemplate\"></ng-container>\n                        <ng-template #selectedTemplate>\n                            <i nz-icon [nzType]=\"'check-circle'\" [nzTheme]=\"'twotone'\" [nzTwotoneColor]=\"'#52c41a'\"></i>\n                        </ng-template>\n                        <ng-template #notSelectedTemplate>\n                            <i nz-icon [nzType]=\"'check-circle'\"></i>\n                        </ng-template>\n                        \n                    </span>\n                    <span class=\"label\">\n                        {{option.label}}\n                    </span>\n                </div>\n                <div class=\"item-body\" *ngIf=\"option.selected && option.type!='none'\">\n                    <inp-color *ngIf=\"option.type == 'color'\" [name]=\"option.type\" [label]=\"option.label\" [(value)]=\"option.value\" (subcribe)=\"updateColor($event)\"></inp-color>\n                    <inp-texture *ngIf=\"option.type == 'texture'\" [name]=\"option.type\" [label]=\"option.label\" [(value)]=\"option.value\" (subcribe)=\"updateTexture($event)\" [listType]=\"'background'\" (modalCancelSelect)=\"emitRefresh()\"></inp-texture>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n","export type InpEvent = {\r\n    name: string,\r\n    value: any,\r\n    old?: any,\r\n    [prop: string]: any\r\n}\r\n\r\n\r\n\r\nexport type DynamicEvent = {\r\n    type: string,\r\n    data?: any,\r\n    [extra: string]: any\r\n}\r\n\r\nexport type CallbackFunction = (...args: any[]) => any;\r\n\r\nexport const FG_POSKEYS = {\r\n    x: [\"left\", \"center\", \"right\"],\r\n    y: [\"top\", \"center\", \"bottom\"],\r\n    xy: [\r\n        \"left-top\", \"center-top\", \"right-top\",\r\n        \"left-center\", \"center-center\", \"right-center\",\r\n        \"left-bottom\", \"center-bottom\", \"right-bottom\"\r\n    ]\r\n};\r\nexport const FG_REPEAT = {\r\n    repeat: \"Auto\",\r\n    no: \"no-repeat\",\r\n    x: \"repeat-x\",\r\n    y: \"repeat-y\"\r\n};\r\n\r\nexport const FG_BGSIZES = {\r\n    auto: \"Auto\",\r\n    contain: \"Contain\",\r\n    cover: \"Cover\"\r\n}\r\n\r\n\r\nexport interface FG_ITEM {\r\n    secret_key?: string\r\n    name?: string\r\n    url?: string\r\n    position?: { x: string, y: string }\r\n    size?: string\r\n    opacity?: number\r\n    repeat?: string\r\n}\r\nexport const FG_DEFAULT_DATA: FG_ITEM = {\r\n    name: \"foreground\",\r\n    url: \"\",\r\n    position: {\r\n        x: \"center\",\r\n        y: \"center\"\r\n    },\r\n    repeat: \"no\",\r\n    opacity: 1,\r\n    size: \"contain\",\r\n};\r\n","import { _class } from '@app/_core/helpers/es5.class';\r\nimport { LoaderLib } from '../libs/three.libs';\r\n\r\nvar Loader = _class('Loader').uses(LoaderLib)({\r\n\r\n    /**\r\n     * \r\n     * @param {App} parent \r\n     */\r\n\r\n    constructor: function (parent:any=undefined) {\r\n        this.setParent(parent);\r\n    }\r\n});\r\n\r\nexport default Loader;","import { Injectable } from '@angular/core';\nimport { isObject } from '@app/_core/helpers/utils';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class MeshGeometryService extends EventManagerService {\n\n    constructor() {\n        super();\n    }\n\n    open(data: any, onChange?: (...args: any[]) => any, onDone?: (...args: any[]) => any) {\n        if (!isObject(data)) return false;\n        if (typeof onChange == \"function\") {\n            if (typeof data.onChange != \"function\") {\n                data.onChange = onChange;\n            }\n            else if (typeof data.change != \"function\") {\n                data.change = onChange;\n            }\n        }\n\n        if (typeof onChange == \"function\") {\n            if (typeof data.onDone != \"function\") {\n                data.onDone = onDone;\n            }\n            else if (typeof data.done != \"function\") {\n                data.done = onDone;\n            }\n        }\n\n        this.emit({\n            type: \"panel.show\",\n            data: data\n        })\n    }\n    close(){\n        this.emit(\"panel.hide\");\n    }\n  \n\n\n    updateProps(data){\n        if(isObject(data) && data.secret_key){\n            this.emit({\n                type: \"editor.update.props\",\n                data: data\n            })\n        }\n    }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { isArray, isObject, isString } from '@app/_core/helpers/utils';\nimport { BaseInputComponent } from '../base-input/base-input.component';\n\n@Component({\n    selector: 'select-box',\n    templateUrl: './select-box.component.html',\n    styleUrls: ['./select-box.component.scss']\n})\nexport class SelectBoxComponent extends BaseInputComponent implements OnInit {\n\n    @Input() options: any;\n    _options: Array<{ label: string, value: string }> = [];\n    constructor() {\n        super();\n    }\n\n    ngOnInit(): void {\n        if(isArray(this.options)){\n            this.options.map((value) => {\n                if(isObject(value)){\n                    if(Object.prototype.hasOwnProperty.call(value, 'value') && Object.prototype.hasOwnProperty.call(value, 'label')){\n                        this._options.push(value);\n                    }\n                }else if(isString(value)){\n                    this._options.push({\n                        value: value,\n                        label: value\n                    });\n                }\n            })\n        }else if(isObject(this.options)){\n            for (const key in this.options) {\n                if (Object.prototype.hasOwnProperty.call(this.options, key)) {\n                    const value = this.options[key];\n                    if(isObject(value)){\n                        if(Object.prototype.hasOwnProperty.call(value, 'value') && Object.prototype.hasOwnProperty.call(value, 'label')){\n                            this._options.push(value);\n                        }\n                    }else if(isString(value)){\n                        this._options.push({\n                            value: key,\n                            label: value\n                        });\n                    }\n                }\n            }\n        }\n    }\n}\n","<label>{{label | translate}}</label>\n<div class=\"input-wrapper\">\n    <nz-select [(ngModel)]=\"value\" (ngModelChange)=\"onChange($event)\">\n        <nz-option *ngFor=\"let p of _options\" [nzValue]=\"p.value\" [nzLabel]=\"p.label\"></nz-option>\n    </nz-select>\n</div>","import { Injectable } from '@angular/core';\nimport { isObject } from '@app/_core/helpers/utils';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class PanelLightService extends EventManagerService {\n\n    constructor() {\n        super();\n    }\n\n\n    open(data: any, onChange?: (...args: any[]) => any, onDone?: (...args: any[]) => any) {\n        if (!isObject(data)) return false;\n        if (typeof onChange == \"function\") {\n            if (typeof data.onChange != \"function\") {\n                data.onChange = onChange;\n            }\n            else if (typeof data.change != \"function\") {\n                data.change = onChange;\n            }\n        }\n\n        if (typeof onChange == \"function\") {\n            if (typeof data.onDone != \"function\") {\n                data.onDone = onDone;\n            }\n            else if (typeof data.done != \"function\") {\n                data.done = onDone;\n            }\n        }\n\n        this.emit({\n            type: \"panel.show\",\n            data: data\n        })\n    }\n    close() {\n        this.emit(\"panel.hide\");\n    }\n\n\n    updateProps(data) {\n        if (isObject(data) && data.secret_key) {\n            this.emit({\n                type: \"editor.update.props\",\n                data: data\n            })\n        }\n    }\n\n\n    updateTargetProps(data) {\n        if (isObject(data) && data.secret_key) {\n            this.emit({\n                type: \"editor.update.props.target\",\n                data: data\n            })\n        }\n    }\n\n    \n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n  selector: 'inp-number-group',\n  templateUrl: './inp-number-group.component.html',\n  styleUrls: ['./inp-number-group.component.scss']\n})\nexport class InpNumberGroupComponent extends BaseInpGroupComponent implements OnInit {\n\n  @Input() step: number = 1;\n  @Input() max: number = 9999999999999999;\n  @Input() min: number =-9999999999999999;\n\n  @Input() spin: boolean = false;\n\n  configProps = [\"step\", \"min\", \"max\", \"spin\"];\n  constructor() {\n    super();\n  }\n\n  onInit(): void {\n    assignValue(this.defaultValues, {\n      step: 1,\n      min: -9999999999999999,\n      max:  9999999999999999,\n      spin: false\n    });\n    this.inpInit();\n  }\n\n  \n  valChange(value){\n    this.onChange({value});\n  }\n\n  \n}\n","<div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\" class=\"input-group\">\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"16\">\n        <div class=\"inner-box\">{{label?label:name | translate}}</div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n        <div class=\"inner-box text-right\">\n            <inp-number \n                [name]=\"name\" \n                [(value)]=\"value\" \n                [min]=\"min\" \n                [max]=\"max\" \n                [step]=\"step\" \n                [spin]=\"spin\" \n                (subcribe)=\"onChange($event)\"\n            ></inp-number>\n        </div>\n    </div>\n\n</div>","import { Injectable } from '@angular/core';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ClientEditToolbarService extends EventManagerService {\n\n    constructor() {\n        super();\n    }\n\n    show(type: string, secret_key: string, mode?: string) {\n        this.emit({\n            type: \"show\",\n            data: {\n                type: type,\n                secret_key: secret_key,\n                mode: mode\n            }\n        })\n    }\n    hide() {\n        this.emit({\n            type: \"hide\"\n        })\n    }\n\n    changeMode(mode) {\n        this.emit({\n            type: \"mode.change\",\n            mode: mode\n        })\n    }\n    selectMode(mode) {\n        this.emit({\n            type: \"mode.select\",\n            mode: mode\n        })\n    }\n\n}\n","export * from './model';\r\nexport * from './service';\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { pipes } from './pipes';\r\nimport { directives } from './directives';\r\nimport { DebounceInputDirective } from './directives/debounce-input.directive';\r\nimport { CanAccessDirective } from '@app/_core/directives/can-access.directive';\r\nimport { UploadFileComponent } from './components/upload/upload.component';\r\nimport { AppUIModule } from '../app-ui.module';\r\nimport { Vector3Component } from './components/inputs/vector3/vector3.component';\r\nimport { InpSwitchComponent } from './components/inputs/inp-switch/inp-switch.component';\r\nimport { InpRotationComponent } from './components/inputs/inp-rotation/inp-rotation.component';\r\nimport { InpTextComponent } from './components/inputs/inp-text/inp-text.component';\r\nimport { SelectBoxComponent } from './components/inputs/select-box/select-box.component';\r\nimport { InpColorComponent } from './components/inputs/inp-color/inp-color.component';\r\nimport { TransparentImgComponent } from './components/transparent-img/transparent-img.component';\r\nimport { InpTextureComponent } from './components/inputs/inp-texture/inp-texture.component';\r\nimport { InpSelectComponent } from './components/inputs/inp-select/inp-select.component';\r\nimport { ImageLibraryComponent } from './components/modals/image-library/image-library.component';\r\nimport { ImageLibraryItemComponent } from './components/modals/image-library/image-library-item/image-library-item.component';\r\nimport { InpRangeComponent } from './components/inputs/inp-range/inp-range.component';\r\nimport { InpSwitchGroupComponent } from './components/input-groups/inp-switch-group/inp-switch-group.component';\r\nimport { InpColorGroupComponent } from './components/input-groups/inp-color-group/inp-color-group.component';\r\nimport { InpRangeGroupComponent } from './components/input-groups/inp-range-group/inp-range-group.component';\r\nimport { InpRotationGroupComponent } from './components/input-groups/inp-rotation-group/inp-rotation-group.component';\r\nimport { InpVector3GroupComponent } from './components/input-groups/inp-vector3-group/inp-vector3-group.component';\r\nimport { InpSelectGroupComponent } from './components/input-groups/inp-select-group/inp-select-group.component';\r\nimport { InpTextGroupComponent } from './components/input-groups/inp-text-group/inp-text-group.component';\r\nimport { InpNumberComponent } from './components/inputs/inp-number/inp-number.component';\r\nimport { InpNumberGroupComponent } from './components/input-groups/inp-number-group/inp-number-group.component';\r\nimport { ViewportComponent } from './components/viewport/viewport.component';\r\nimport { MaskLayerComponent } from './components/viewport/mask-layer/mask-layer.component';\r\nimport { DroppableLayerComponent } from './components/viewport/droppable-layer/droppable-layer.component';\r\nimport { ForegroundLayerComponent } from './components/viewport/foreground-layer/foreground-layer.component';\r\nimport { CanvasLayerComponent } from './components/viewport/canvas-layer/canvas-layer.component';\r\nimport { MeshGeometryComponent } from './components/panels/mesh-geometry/mesh-geometry.component';\r\nimport { MaterialInputsComponent } from './components/form-group/material-inputs/material-inputs.component';\r\nimport { InpTextureGroupComponent } from './components/input-groups/inp-texture-group/inp-texture-group.component';\r\nimport { PropInputsComponent } from './components/form-group/prop-inputs/prop-inputs.component';\r\nimport { ObjectToolbarComponent } from './components/viewport/object-toolbar/object-toolbar.component';\r\nimport { MeshGeometryTabMaterialComponent } from './components/panels/mesh-geometry/mesh-geometry-tab-material/mesh-geometry-tab-material.component';\r\nimport { MeshGeometryTabGeometryComponent } from './components/panels/mesh-geometry/mesh-geometry-tab-geometry/mesh-geometry-tab-geometry.component';\r\nimport { MeshGeometryTabPropertiesComponent } from './components/panels/mesh-geometry/mesh-geometry-tab-properties/mesh-geometry-tab-properties.component';\r\nimport { PanelModelObjectComponent } from './components/panels/panel-model-object/panel-model-object.component';\r\nimport { PanelModelObjectTabMeshesComponent } from './components/panels/panel-model-object/panel-model-object-tab-meshes/panel-model-object-tab-meshes.component';\r\nimport { PanelModelObjectTabPropertiesComponent } from './components/panels/panel-model-object/panel-model-object-tab-properties/panel-model-object-tab-properties.component';\r\nimport { CollapseMeshMaterialComponent } from './components/collapses/collapse-mesh-material/collapse-mesh-material.component';\r\nimport { PanelLightComponent } from './components/panels/panel-light/panel-light.component';\r\nimport { PanelLightTabParamsComponent } from './components/panels/panel-light/panel-light-tab-params/panel-light-tab-params.component';\r\nimport { PanelLightTabPropertiesComponent } from './components/panels/panel-light/panel-light-tab-properties/panel-light-tab-properties.component';\r\nimport { ForegroundLayerItemComponent } from './components/viewport/foreground-layer/foreground-layer-item/foreground-layer-item.component';\r\nimport { EditorToolbarComponent } from './components/viewport/editor-toolbar/editor-toolbar.component';\r\nimport { InpTextareaComponent } from './components/inputs/inp-textarea/inp-textarea.component';\r\nimport { InpTextareaGroupComponent } from './components/input-groups/inp-textarea-group/inp-textarea-group.component';\r\nimport { InpRadioComponent } from './components/inputs/inp-radio/inp-radio.component';\r\nimport { InpRadioGroupComponent } from './components/input-groups/inp-radio-group/inp-radio-group.component';\r\nimport { VectorControlsComponent } from './components/viewport/vector-controls/vector-controls.component';\r\nimport { TabEditorInfoComponent } from './components/editor/tabs/tab-setting/tab-info/tab-info.component';\r\nimport { TabEditorSettingComponent } from './components/editor/tabs/tab-setting/tab-setting.component';\r\nimport { TabObjectComponent } from './components/editor/tabs/tab-object/tab-object.component';\r\nimport { TabModelComponent } from './components/editor/tabs/tab-object/tab-model/tab-model.component';\r\nimport { ModelListComponent } from './components/editor/tabs/tab-object/tab-model/model-list/model-list.component';\r\nimport { DraggingItemComponent } from './components/editor/drag-drop/dragging-item/dragging-item.component';\r\nimport { ModelItemComponent } from './components/editor/tabs/tab-object/tab-model/model-item/model-item.component';\r\nimport { DroppableAreaComponent } from './components/editor/drag-drop/droppable-area/droppable-area.component';\r\nimport { TabGeometryComponent } from './components/editor/tabs/tab-object/tab-geometry/tab-geometry.component';\r\nimport { TabLightComponent } from './components/editor/tabs/tab-light/tab-light.component';\r\nimport { TabSceneComponent } from './components/editor/tabs/tab-scene/tab-scene.component';\r\nimport { TabBackgroundComponent } from './components/editor/tabs/tab-scene/tab-background/tab-background.component';\r\nimport { TabForegroundComponent } from './components/editor/tabs/tab-scene/tab-foreground/tab-foreground.component';\r\nimport { ForegroundItemComponent } from './components/editor/tabs/tab-scene/tab-foreground/foreground-item/foreground-item.component';\r\nimport { TabCameraComponent } from '../_shared/components/editor/tabs/tab-controls/tab-camera/tab-camera.component';\r\nimport { ModelSearchComponent } from './components/editor/tabs/tab-object/tab-model/model-search/model-search.component';\r\nimport { DraggingGeometryComponent } from '../_shared/components/editor/drag-drop/dragging-geometry/dragging-geometry.component';\r\nimport { GeometryItemComponent } from './components/editor/tabs/tab-object/tab-geometry/geometry-item/geometry-item.component';\r\nimport { LightItemComponent } from './components/editor/tabs/tab-light/light-item/light-item.component';\r\nimport { TabShadowComponent } from './components/editor/tabs/tab-light/tab-shadow/tab-shadow.component';\r\nimport { TabLightsComponent } from './components/editor/tabs/tab-light/tab-lights/tab-lights.component';\r\nimport { TabControlsComponent } from '../_shared/components/editor/tabs/tab-controls/tab-controls.component';\r\nimport { TabControlComponent } from '../_shared/components/editor/tabs/tab-controls/tab-control/tab-control.component';\r\nimport { TabSceneSettingsComponent } from './components/editor/tabs/tab-scene/tab-scene-settings/tab-scene-settings.component';\r\nimport { TemplateSidebarComponent } from './components/editor/sidebar/template-sidebar/sidebar.component';\r\nimport { ProjectSidebarComponent } from './components/editor/sidebar/project-sidebar/project-sidebar.component';\r\nimport { TabTemplateComponent } from './components/editor/tabs/tab-template/tab-template.component';\r\nimport { TemplateListComponent } from './components/editor/tabs/tab-template/template-list/template-list.component';\r\nimport { TemplateItemComponent } from './components/editor/tabs/tab-template/template-item/template-item.component';\r\nimport { LoadingLayerComponent } from './components/viewport/loading-layer/loading-layer.component';\r\nimport { SidebarLockComponent } from './components/editor/sidebar/sidebar-lock/sidebar-lock.component';\r\nimport { TabTemplateCreateFormComponent } from './components/editor/tabs/tab-template-create-form/tab-template-create-form.component';\r\nimport { TabProjectInfoComponent } from './components/editor/tabs/tab-project-info/tab-project-info.component';\r\nimport { TabProjectSettingComponent } from './components/editor/tabs/tab-project-setting/tab-project-setting.component';\r\nimport { ViewerSidebarComponent } from './components/editor/sidebar/viewer-sidebar/viewer-sidebar.component';\r\nimport { ClientEditToolbarComponent } from './components/viewport/client-edit-toolbar/client-edit-toolbar.component';\r\nimport { ClientViewportComponent } from './components/viewport/client-viewport.component';\r\nimport { TabViewerSceneComponent } from './components/editor/tabs/tab-viewer-scene/tab-viewer-scene.component';\r\nimport { PanelMeshCustomizeComponent } from './components/panels/panel-mesh-customize/panel-mesh-customize.component';\r\nimport { ModalExportImageComponent } from './components/modals/modal-export-image/modal-export-image.component';\r\nimport { ItemViewportComponent } from './components/viewport/item-viewport.component';\r\n\r\n\r\n// Shared\r\n\r\n@NgModule({\r\n    declarations: [\r\n        ...pipes,\r\n        ...directives,\r\n        DebounceInputDirective,\r\n        CanAccessDirective,\r\n        UploadFileComponent,\r\n        Vector3Component,\r\n        InpSwitchComponent,\r\n        InpRotationComponent,\r\n        InpTextComponent,\r\n        SelectBoxComponent,\r\n        InpColorComponent,\r\n        TransparentImgComponent,\r\n        InpTextureComponent,\r\n        InpSelectComponent,\r\n        ImageLibraryComponent,\r\n        ImageLibraryItemComponent,\r\n        InpRangeComponent,\r\n        InpSwitchGroupComponent,\r\n        InpColorGroupComponent,\r\n        InpRangeGroupComponent,\r\n        InpRotationGroupComponent,\r\n        InpVector3GroupComponent,\r\n        InpSelectGroupComponent,\r\n        InpTextGroupComponent,\r\n        InpNumberComponent,\r\n        InpNumberGroupComponent,\r\n        ViewportComponent,\r\n        MaskLayerComponent,\r\n        DroppableLayerComponent,\r\n        ForegroundLayerComponent,\r\n        CanvasLayerComponent,\r\n        MeshGeometryComponent,\r\n        MaterialInputsComponent,\r\n        InpTextureGroupComponent,\r\n        PropInputsComponent,\r\n        ObjectToolbarComponent,\r\n        MeshGeometryTabMaterialComponent,\r\n        MeshGeometryTabPropertiesComponent,\r\n        MeshGeometryTabGeometryComponent, \r\n        PanelModelObjectComponent, \r\n        PanelModelObjectTabMeshesComponent, \r\n        PanelModelObjectTabPropertiesComponent,\r\n        CollapseMeshMaterialComponent,\r\n        PanelLightComponent, \r\n        PanelLightTabParamsComponent, \r\n        PanelLightTabPropertiesComponent,\r\n        ForegroundLayerItemComponent, \r\n        EditorToolbarComponent,\r\n        InpTextareaComponent, \r\n        InpTextareaGroupComponent,\r\n        InpRadioComponent, \r\n        InpRadioGroupComponent, \r\n        VectorControlsComponent,\r\n        TabEditorInfoComponent,\r\n        TabEditorSettingComponent,\r\n        TabGeometryComponent,\r\n        TabModelComponent,\r\n        TabObjectComponent,\r\n        ModelListComponent,\r\n        ModelItemComponent,\r\n        DraggingItemComponent,\r\n        DroppableAreaComponent,\r\n        TabLightComponent,\r\n        TabSceneComponent,\r\n        TabBackgroundComponent,\r\n        TabForegroundComponent,\r\n        ForegroundItemComponent,\r\n        TabCameraComponent,\r\n        ModelSearchComponent,\r\n        DraggingGeometryComponent,\r\n        GeometryItemComponent,\r\n        LightItemComponent,\r\n        TabShadowComponent,\r\n        TabLightsComponent,\r\n        TabControlsComponent,\r\n        TabControlComponent,\r\n        TabSceneSettingsComponent,\r\n        TemplateSidebarComponent,\r\n        ProjectSidebarComponent,\r\n        TabTemplateComponent,\r\n        TemplateListComponent,\r\n        TemplateItemComponent,\r\n        LoadingLayerComponent,\r\n        SidebarLockComponent,\r\n        TabTemplateCreateFormComponent,\r\n        TabProjectInfoComponent,\r\n        TabProjectSettingComponent,\r\n        ViewerSidebarComponent,\r\n        ClientEditToolbarComponent,\r\n        ClientViewportComponent,\r\n        TabViewerSceneComponent,\r\n        PanelMeshCustomizeComponent,\r\n        ModalExportImageComponent,\r\n        ItemViewportComponent\r\n\r\n    ],\r\n    imports: [CommonModule, FormsModule, RouterModule, HttpClientModule, ReactiveFormsModule, TranslateModule, AppUIModule],\r\n    exports: [\r\n        ...pipes,\r\n        ...directives,\r\n        FormsModule,\r\n        RouterModule,\r\n        HttpClientModule,\r\n        ReactiveFormsModule,\r\n        CanAccessDirective,\r\n        TranslateModule,\r\n        ImageLibraryComponent,\r\n        UploadFileComponent,\r\n        InpSwitchComponent,\r\n        Vector3Component,\r\n        InpRotationComponent,\r\n        InpTextComponent,\r\n        SelectBoxComponent,\r\n        InpColorComponent,\r\n        InpTextureComponent,\r\n        InpSelectComponent,\r\n        InpRangeComponent,\r\n        InpNumberComponent,\r\n        InpSwitchGroupComponent,\r\n        InpVector3GroupComponent,\r\n        InpRotationGroupComponent,\r\n        InpTextGroupComponent,\r\n        InpColorGroupComponent,\r\n        InpSelectGroupComponent,\r\n        InpRangeGroupComponent,\r\n        InpNumberGroupComponent,\r\n        InpTextureGroupComponent,\r\n        PropInputsComponent,\r\n        ViewportComponent,\r\n        ForegroundLayerComponent,\r\n        MaskLayerComponent,\r\n        DroppableLayerComponent,\r\n        CanvasLayerComponent,\r\n        MeshGeometryComponent,\r\n        MaterialInputsComponent,\r\n        CollapseMeshMaterialComponent,\r\n        ObjectToolbarComponent,\r\n        MeshGeometryTabGeometryComponent,\r\n        MeshGeometryTabMaterialComponent,\r\n        MeshGeometryTabPropertiesComponent,\r\n        PanelModelObjectComponent,\r\n        PanelModelObjectTabMeshesComponent,\r\n        PanelModelObjectTabPropertiesComponent,\r\n        PanelLightComponent,\r\n        PanelLightTabParamsComponent,\r\n        PanelLightTabPropertiesComponent,\r\n        ForegroundLayerItemComponent,\r\n        EditorToolbarComponent,\r\n        InpTextareaComponent,\r\n        InpTextareaGroupComponent,\r\n        InpRadioComponent,\r\n        InpRadioGroupComponent,\r\n        VectorControlsComponent,\r\n        TabEditorInfoComponent,\r\n        TabEditorSettingComponent,\r\n        TabGeometryComponent,\r\n        TabModelComponent,\r\n        TabObjectComponent,\r\n        ModelListComponent,\r\n        ModelItemComponent,\r\n        DraggingItemComponent,\r\n        DroppableAreaComponent,\r\n        TabLightComponent,\r\n        TabSceneComponent,\r\n        TabBackgroundComponent,\r\n        TabForegroundComponent,\r\n        ForegroundItemComponent,\r\n        TabCameraComponent,\r\n        ModelSearchComponent,\r\n        DraggingGeometryComponent,\r\n        GeometryItemComponent,\r\n        LightItemComponent,\r\n        TabShadowComponent,\r\n        TabLightsComponent,\r\n        TabControlsComponent,\r\n        TabControlComponent,\r\n        TabSceneSettingsComponent,\r\n        TemplateSidebarComponent,\r\n        ProjectSidebarComponent,\r\n        TabTemplateComponent,\r\n        TemplateListComponent,\r\n        TemplateItemComponent,\r\n        SidebarLockComponent,\r\n        LoadingLayerComponent,\r\n        TabTemplateCreateFormComponent,\r\n        TabProjectInfoComponent,\r\n        TabProjectSettingComponent,\r\n        ViewerSidebarComponent,\r\n        ClientEditToolbarComponent,\r\n        ClientViewportComponent,\r\n        TabViewerSceneComponent,\r\n        PanelMeshCustomizeComponent,\r\n        ItemViewportComponent\r\n\r\n    ]\r\n})\r\nexport class SharedModule { }","export interface MenuIcon {\r\n  type: 'class' | 'icon' | 'img';\r\n  value: string;\r\n  theme?: 'outline' | 'twotone' | 'fill';\r\n  spin?: boolean;\r\n  twoToneColor?: string;\r\n  iconfont?: string;\r\n}\r\n\r\nexport interface Menu {\r\n  [key: string]: any;\r\n  text: string;\r\n  i18n?: string;\r\n  group?: boolean;\r\n  link?: string;\r\n\r\n  linkExact?: boolean;\r\n  externalLink?: string;\r\n  target?: '_blank' | '_self' | '_parent' | '_top';\r\n  icon?: string | MenuIcon | null;\r\n  badge?: number;\r\n  badgeDot?: boolean;\r\n  badgeStatus?: string;\r\n  disabled?: boolean;\r\n  hide?: boolean;\r\n  hideInBreadcrumb?: boolean;\r\n  acl?: any;\r\n  shortcut?: boolean;\r\n  shortcutRoot?: boolean;\r\n  reuse?: boolean;\r\n  open?: boolean;\r\n  children?: Menu[];\r\n}\r\n\r\nexport const menuData = [\r\n  {\r\n    title: 'Dashboard',\r\n    path: 'dashboard',\r\n    icon: 'bar-chart',\r\n    roles: ['ROLE_ADMIN', 'ROLE_AGENCY', 'ROLE_AFFILIATE'],\r\n    childs: [\r\n      {\r\n        title: 'Overview',\r\n        path: 'overview',\r\n        icon: 'radar-chart',\r\n        roles: ['ROLE_ADMIN', 'ROLE_AGENCY', 'ROLE_AFFILIATE']\r\n      },\r\n      {\r\n        title: 'Analysis',\r\n        path: 'analysis',\r\n        icon: 'radar-chart',\r\n        roles: ['ROLE_ADMIN', 'ROLE_AGENCY']\r\n      },\r\n      {\r\n        title: 'Report',\r\n        path: 'report',\r\n        icon: 'radar-chart',\r\n        roles: ['ROLE_ADMIN', 'ROLE_AGENCY']\r\n      }\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: 'Telco',\r\n    path: '',\r\n    icon: 'global',\r\n    roles: ['ROLE_ADMIN'],\r\n    childs: [\r\n      {\r\n        title: 'Telcos',\r\n        path: 'telcos',\r\n        icon: 'bank',\r\n        roles: ['ROLE_ADMIN', 'ROLE_AGENCY']\r\n      },\r\n      {\r\n        title: 'Telco Categories',\r\n        path: 'payment-packages',\r\n        icon: 'bank',\r\n        roles: ['ROLE_ADMIN', 'ROLE_AGENCY']\r\n      }\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: 'SIM',\r\n    path: 'sims',\r\n    icon: 'pages',\r\n    roles: ['ROLE_AGENCY', 'ROLE_AFFILIATE', 'ROLE_ADMIN'],\r\n    childs: [\r\n      {\r\n        title: 'Sims',\r\n        path: 'sims',\r\n        roles: ['ROLE_ADMIN']\r\n      },\r\n      {\r\n        title: 'Sims Agency',\r\n        path: 'sims-agency',\r\n        roles: ['ROLE_AGENCY']\r\n      },\r\n      {\r\n        title: 'Sims Affiliate',\r\n        path: 'sims-affiliate',\r\n        roles: ['ROLE_AFFILIATE']\r\n      },\r\n      {\r\n        title: 'Sim Categories',\r\n        path: 'simcategories',\r\n        roles: ['ROLE_AGENCY', 'ROLE_ADMIN']\r\n      },\r\n      {\r\n        title: 'Sims Reservations',\r\n        path: 'sims-affiliate-reservations',\r\n        roles: ['ROLE_AFFILIATE']\r\n      },\r\n      {\r\n        title: 'Sim Categories',\r\n        path: 'simcategories',\r\n        roles: ['ROLE_AFFILIATE']\r\n      }\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: 'Agency',\r\n    path: 'agencies',\r\n    icon: 'user',\r\n\r\n    roles: ['ROLE_ADMIN'],\r\n    childs: [\r\n      {\r\n        title: 'Agencies List',\r\n        path: 'agencies',\r\n        roles: ['ROLE_ADMIN']\r\n      },\r\n      {\r\n        title: 'Agencies Approval',\r\n        path: 'agencies-approval',\r\n        roles: ['ROLE_ADMIN']\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Sub Agency',\r\n    path: 'sub-agencies',\r\n    icon: 'user',\r\n    roles: ['ROLE_AGENCY']\r\n  },\r\n  {\r\n    title: 'E-Commerce',\r\n    path: 'ecommerce',\r\n    icon: 'shop',\r\n    roles: ['ROLE_AFFILIATE', 'ROLE_AGENCY'],\r\n    childs: [\r\n      {\r\n        title: 'Orders Waiting',\r\n        icon: 'shopping-cart',\r\n        path: 'agency-orders-waiting',\r\n        roles: ['ROLE_AGENCY']\r\n      },\r\n      {\r\n        title: 'Orders',\r\n        icon: 'shopping-cart',\r\n        path: 'agency-orders',\r\n        roles: ['ROLE_AGENCY']\r\n      },\r\n      {\r\n        title: 'Carts',\r\n        icon: 'shopping-cart',\r\n        path: 'affiliate-carts',\r\n        roles: ['ROLE_AFFILIATE']\r\n      }\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: 'Affiliate',\r\n    path: 'affiliates',\r\n    icon: 'team',\r\n    roles: ['ROLE_ADMIN'],\r\n    childs: [\r\n      {\r\n        title: 'Affiliates List',\r\n        path: 'affiliates',\r\n        roles: ['ROLE_ADMIN']\r\n      },\r\n      {\r\n        title: 'Affiliates Approval',\r\n        path: 'affiliates-approval',\r\n        roles: ['ROLE_ADMIN']\r\n      }\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: 'Messages',\r\n    path: 'messages',\r\n    icon: 'message',\r\n    roles: ['ROLE_ADMIN']\r\n  },\r\n\r\n  {\r\n    title: 'Pages',\r\n    path: 'cms-pages',\r\n    icon: 'copy',\r\n    roles: ['ROLE_ADMIN'],\r\n    childs: [\r\n      { title: 'Page List', path: 'cms-pages', roles: ['ROLE_ADMIN'] },\r\n      { title: 'New Page', path: 'cms-pages/item', roles: ['ROLE_ADMIN'] }\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: 'Posts',\r\n    path: 'cms-posts',\r\n    icon: 'copy',\r\n    roles: ['ROLE_ADMIN'],\r\n    childs: [\r\n      { title: 'Post List', path: 'cms-posts', roles: ['ROLE_ADMIN'] },\r\n      { title: 'New Post', path: 'cms-posts/item', roles: ['ROLE_ADMIN'] }\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: 'Location',\r\n    path: '/pages',\r\n    icon: 'compass',\r\n    roles: ['ROLE_ADMIN'],\r\n    childs: [\r\n      { title: 'Ward', path: 'wards', roles: ['ROLE_ADMIN'] },\r\n      { title: 'District', path: 'districts', roles: ['ROLE_ADMIN'] },\r\n      { title: 'Province', path: 'provinces', roles: ['ROLE_ADMIN'] }\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: 'Reports',\r\n    path: 'reports',\r\n    icon: 'fund',\r\n    roles: ['ROLE_ADMIN', 'ROLE_AGENCY', 'ROLE_AFFILIATE'],\r\n    childs: [\r\n      { title: 'Report', path: 'reports2', roles: ['ROLE_ADMIN'] },\r\n      { title: 'Report', path: 'report-agencies', roles: ['ROLE_AGENCY'] },\r\n      {\r\n        title: 'Invoices',\r\n        icon: 'file',\r\n        path: 'affiliate-invoices',\r\n        roles: ['ROLE_AFFILIATE']\r\n      }\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: 'Settings',\r\n    path: '/page/settings',\r\n    icon: 'setting',\r\n    roles: ['ROLE_ADMIN'],\r\n    childs: [\r\n      { title: 'Genaral', path: 'settings/genaral', roles: ['ROLE_ADMIN'] }\r\n    ]\r\n  }\r\n];\r\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { LoaderLib, TransparentBase64Image } from '@app/_3D/libs/three.libs';\nimport Object2Image from '@app/_3D/modules/object-image';\nimport { App3DService } from '@app/_3D/services/app-3d.service';\nimport { assignValue, inArray, isArray, isObject } from '@app/_core/helpers/utils';\nimport { ImageModel, ImageService, imgListTypes } from '@app/_store/images';\nimport { BaseComponent } from '../../base/base.component';\nimport { ImageLibraryService, ApiParams } from './image-library.service';\n\n@Component({\n    selector: 'modal-image-library',\n    templateUrl: './image-library.component.html',\n    styleUrls: ['./image-library.component.scss']\n})\nexport class ImageLibraryComponent extends BaseComponent implements OnInit {\n\n    @Input() app: App3DService;\n    title: string = \"Image Library\";\n    oldTitle: string = \"Image Library\";\n    \n    url: string = '';\n    params: ApiParams = {};\n    lastUrl: string = '';\n    lastParams: ApiParams = {};\n    \n\n    mode = 'single';\n\n    results: any;\n\n    images: any[] = [];\n\n\n    isVisible = false;\n    isConfirmLoading = false;\n\n    onDone: (...args:any[]) => any = null;\n\n    onCancel: (...args:any[]) => any = null;\n\n    listType:string = \"list\";\n    oldListType: string = \"list\";\n\n\n\n\n    constructor(\n        private events: ImageLibraryService,\n        private imageService: ImageService,\n        private cd: ChangeDetectorRef\n    ) {\n        super();\n        this.registerEventService(events, {\n            open: e => this.show(e.config, e.callback, e.cancel)\n        });\n    }\n    \n\n    onInit() {\n        this.activeEventServiceRegistered(this.events);\n    }\n    onDestroy(){\n        this.deactiveEventServiceRegistered(this.events);\n    }\n\n    show(config, callback?:any, cancel?:any) {\n        this.onDone = null;\n        this.onCancel = null;\n        if (isObject(config)) {\n            if(config.title) this.title = config.title;\n            if(config.url) this.url = config.url;\n            if(config.mode && inArray(['single', 'simple', 'many', 'one'], String(config.mode).toLowerCase())) this.mode = config.mode;\n            if(isObject(config.params)) assignValue(this.params, config.params);\n            if(config.listType && inArray(imgListTypes, config.listType)){\n                this.listType = config.listType;\n            }else{\n                this.listType = \"list\";\n            }\n            if(typeof callback == \"function\"){\n                this.onDone = callback;\n            }\n            else if(typeof config.done == \"function\"){\n                this.onDone = config.done;\n            }\n            if(typeof cancel == \"function\"){\n                this.onCancel = cancel;\n            }\n            \n            else if(typeof config.cancel == \"function\"){\n                this.onCancel = config.cancel;\n            }\n\n        }\n        this.showModal();\n    }\n\n    showModal(): void {\n        this.isVisible = true;\n        if(this.images.length == 0){\n            this.firstLoad();\n        }else if(this.listType != this.oldListType){\n            this.images = [];\n            this.firstLoad();\n        }\n    }\n\n\n    firstLoad(){\n        this.imageService.getImages(this.listType,this.params).subscribe(res => {\n            if(res.status){\n                if(res.data && res.data.length){\n                    this.appendImageFiles(res.data);\n                }\n            }\n        })\n    }\n\n    appendImageFiles(images:ImageModel[]){\n        images.map((image) => {\n            image.selected = false;\n            this.images.push(image);\n            if(image.extension == \"hdr\"){\n                this.proccessHDRThumbnail(image);\n            }\n        });\n    }\n\n    proccessHDRThumbnail(image: ImageModel){\n        image.thumbnail = TransparentBase64Image;\n        if(this.app){\n            this.app.engine.Loader.LoadEnv({\n                format: \"hdr\",\n                file: image.source || image.url || image.file\n            }, function (envMap, texture) {\n                var src = Object2Image.get2DMap(texture, 240, 120);\n                if(src){\n                    image.thumbnail = src;\n                }\n            });\n        }\n    }\n\n    selectImage(id:any){\n\n        if(this.mode != \"many\"){\n            this.images.map((image, index, array) => {\n                image.selected = image.id == id;\n            })\n        }\n\n        // this.handleOk();\n    }\n\n    handleOk(): void {\n        let result = null;\n        if(this.mode != \"many\"){\n            this.images.map((image, index, array) => {\n                if(image.selected) {\n                    result = image;\n                    image.selected = false;\n                }\n            });\n            if(!result) return window.alert(\"Vui lòng chọn ảnh\");\n            \n        }else{\n            result = [];\n            this.images.map((image, index, array) => {\n                if(image.selected) {\n                    result.push(image);\n                    image.selected = false;\n                }\n            });\n            if(!result.length) return window.alert(\"Vui lòng chọn ảnh\");\n            \n        }\n\n\n        this.isConfirmLoading = true;\n        setTimeout(() => {\n            if(typeof this.onDone == \"function\"){\n                this.onDone(result);\n            }\n\n            this.isVisible = false;\n            this.oldListType = this.listType;\n            this.isConfirmLoading = false;\n        }, 1000);\n    }\n\n    handleCancel(): void {\n        this.isVisible = false;\n        this.oldListType = this.listType;\n        if(typeof this.onCancel == \"function\"){\n            this.onCancel();\n        }\n    }\n\n}\n","<nz-modal \n    [(nzVisible)]=\"isVisible\" \n    [nzTitle]=\"modalTitle\" \n    [nzContent]=\"modalContent\" \n    [nzFooter]=\"modalFooter\" \n    (nzOnCancel)=\"handleCancel()\"\n    [nzWidth]=\"1200\"\n    >\n    \n    <ng-template #modalTitle>{{title}}</ng-template>\n\n    <ng-template #modalContent>\n        <div class=\"images image-results\">\n            <div class=\"img-preview img-processing img-image-preview\" [class.selected]=\"image.selected\"  *ngFor=\"let image of images\" (click)=\"selectImage(image.id)\">\n                <div class=\"img-image\">\n                    <img src=\"{{image.thumbnail}}\" alt=\"{{image.filename}}\">\n                </div>\n                <div class=\"img-details\">\n                    <div class=\"img-size\">\n                        <span>\n                            <strong>{{image.size}}</strong> {{image.size_unit}}\n                        </span>\n                    </div>\n                    <div class=\"img-filename\">\n                        {{image.filename}}\n                    </div>\n                </div>\n                <div class=\"img-success-mark\">\n                    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\"><title>Check</title><defs></defs><g id=\"Page-1\" stroke=\"none\" stroke-width=\"4\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\"><path d=\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" stroke-opacity=\"0.198794158\" stroke=\"#ffffff\" fill-opacity=\"0.816519475\" fill=\"#00bc00\" sketch:type=\"MSShapeGroup\"></path></g></svg>\n                </div>\n                <a href=\"javascript:void(0);\" class=\"img-remove btn-remove-image-file\">\n                    <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\"><title>Xóa</title><defs></defs><g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\"><g id=\"Check-+-Oval-2\" sketch:type=\"MSLayerGroup\" stroke=\"#747474\" stroke-opacity=\"0.198794158\" fill=\"#FF0000\" fill-opacity=\"0.816519475\"><path d=\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" sketch:type=\"MSShapeGroup\"></path></g></g></svg>\n                </a>\n                <div class=\"img-outer-filename\">\n                    <span>\n                        {{image.filename}}\n                    </span>\n                </div>\n            </div>\n\n        </div>\n    </ng-template>\n\n    <ng-template #modalFooter>\n        <button nz-button nzType=\"primary\" (click)=\"handleOk()\" [nzLoading]=\"isConfirmLoading\">{{'Choose' | translate}}</button>\n        <button nz-button nzType=\"default\" (click)=\"handleCancel()\">{{'Cancel' | translate}}</button>\n    </ng-template>\n</nz-modal>","import { NgModule } from '@angular/core';\r\nimport { registerLocaleData } from '@angular/common';\r\nimport en from '@angular/common/locales/en';\r\n\r\nimport { ToastrModule, ToastContainerModule } from 'ngx-toastr';\r\nimport { Angulartics2Module } from 'angulartics2';\r\n\r\nimport { NzNotificationModule } from 'ng-zorro-antd/notification';\r\nimport { NzRadioModule } from 'ng-zorro-antd/radio';\r\nimport { NzButtonModule } from 'ng-zorro-antd/button';\r\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\r\nimport { NzLayoutModule } from 'ng-zorro-antd/layout';\r\nimport { NzPopoverModule } from 'ng-zorro-antd/popover';\r\nimport { NzSliderModule } from 'ng-zorro-antd/slider';\r\nimport { NzSwitchModule } from 'ng-zorro-antd/switch';\r\nimport { NzModalModule } from 'ng-zorro-antd/modal';\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\nimport { NzMessageModule } from 'ng-zorro-antd/message';\r\nimport { NzAlertModule } from 'ng-zorro-antd/alert';\r\nimport { NzTransferModule } from 'ng-zorro-antd/transfer';\r\nimport { NzTimelineModule } from 'ng-zorro-antd/timeline';\r\nimport { NzCheckboxModule } from 'ng-zorro-antd/checkbox';\r\nimport { NzPopconfirmModule } from 'ng-zorro-antd/popconfirm';\r\nimport { NzEmptyModule } from 'ng-zorro-antd/empty';\r\nimport { NzPaginationModule } from 'ng-zorro-antd/pagination';\r\nimport { NzDatePickerModule } from 'ng-zorro-antd/date-picker';\r\nimport { NzInputModule } from 'ng-zorro-antd/input';\r\nimport { NzInputNumberModule } from 'ng-zorro-antd/input-number';\r\nimport { NzStatisticModule } from 'ng-zorro-antd/statistic';\r\nimport { NzDrawerModule } from 'ng-zorro-antd/drawer';\r\nimport { NzSkeletonModule } from 'ng-zorro-antd/skeleton';\r\nimport { NzProgressModule } from 'ng-zorro-antd/progress';\r\nimport { NzBadgeModule } from 'ng-zorro-antd/badge';\r\nimport { NzPageHeaderModule } from 'ng-zorro-antd/page-header';\r\nimport { NzListModule } from 'ng-zorro-antd/list';\r\nimport { NzTagModule } from 'ng-zorro-antd/tag';\r\nimport { NzAvatarModule } from 'ng-zorro-antd/avatar';\r\nimport { NzBreadCrumbModule } from 'ng-zorro-antd/breadcrumb';\r\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\r\nimport { NzDividerModule } from 'ng-zorro-antd/divider';\r\nimport { NzFormModule } from 'ng-zorro-antd/form';\r\nimport { NzToolTipModule } from 'ng-zorro-antd/tooltip';\r\nimport { NzRateModule } from 'ng-zorro-antd/rate';\r\nimport { NzDescriptionsModule } from 'ng-zorro-antd/descriptions';\r\nimport { NzTableModule } from 'ng-zorro-antd/table';\r\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\r\nimport { NzUploadModule } from 'ng-zorro-antd/upload';\r\nimport { NzSelectModule } from 'ng-zorro-antd/select';\r\nimport { NzCardModule } from 'ng-zorro-antd/card';\r\nimport { en_US, NZ_I18N } from 'ng-zorro-antd/i18n';\r\nimport { NzPipesModule } from 'ng-zorro-antd/pipes';\r\nimport { NzAffixModule } from 'ng-zorro-antd/affix';\r\n\r\nregisterLocaleData(en);\r\n\r\nconst ANT_MODULES = [\r\n    NzAffixModule,\r\n    NzCardModule,\r\n    NzSelectModule,\r\n    NzUploadModule,\r\n    NzDropDownModule,\r\n    NzTableModule,\r\n    NzDescriptionsModule,\r\n    NzToolTipModule,\r\n    NzRateModule,\r\n    NzFormModule,\r\n    NzDividerModule,\r\n    NzSpinModule,\r\n    NzButtonModule,\r\n    NzBreadCrumbModule,\r\n    NzAvatarModule,\r\n    NzTagModule,\r\n    NzListModule,\r\n    NzPageHeaderModule,\r\n    NzBadgeModule,\r\n    NzProgressModule,\r\n    NzSkeletonModule,\r\n    NzDrawerModule,\r\n    NzStatisticModule,\r\n    NzInputModule,\r\n    NzInputNumberModule,\r\n    NzDatePickerModule,\r\n    NzPaginationModule,\r\n    NzEmptyModule,\r\n    NzPopconfirmModule,\r\n    NzCheckboxModule,\r\n    NzTimelineModule,\r\n    NzTransferModule,\r\n    NzAlertModule,\r\n    NzMessageModule,\r\n    NzSliderModule,\r\n    NzSwitchModule,\r\n    NzModalModule,\r\n    NzIconModule,\r\n    NzPopoverModule,\r\n    NzLayoutModule,\r\n    NzRadioModule,\r\n    NzTabsModule,\r\n    NzNotificationModule,\r\n    NzPipesModule,\r\n];\r\nimport { NgxInfiniteGridModule } from '@egjs/ngx-infinitegrid';\r\n\r\n@NgModule({\r\n    imports: [\r\n        ToastrModule.forRoot({\r\n            preventDuplicates: true,\r\n        }),\r\n        Angulartics2Module.forRoot(),\r\n        ToastContainerModule,\r\n        ...ANT_MODULES,\r\n        NgxInfiniteGridModule,\r\n    ],\r\n    exports: [Angulartics2Module, ...ANT_MODULES, NgxInfiniteGridModule],\r\n    providers: [{ provide: NZ_I18N, useValue: en_US }],\r\n})\r\nexport class AppUIModule { }\r\n","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { BaseComponent } from '../../base/base.component';\nimport { ViewportService } from '../viewport.service';\n\n@Component({\n    selector: 'viewport-loading-layer',\n    templateUrl: './loading-layer.component.html',\n    styleUrls: ['./loading-layer.component.scss']\n})\nexport class LoadingLayerComponent extends BaseComponent implements OnInit {\n    isActive: boolean = false;\n    isInited: boolean = false;\n    constructor(private events: ViewportService, private cd: ChangeDetectorRef) {\n        super();\n    }\n\n    onChangeSubEvents(){\n        this.registerEventService(this.subEvents, {\n            \"show:loading|dispatch\": () => {\n                this.isActive = true;\n                // this.cd.checkNoChanges();\n            },\n            \"hide:loading|dispatch\": () => {\n                this.isActive = false;\n                // this.cd.checkNoChanges();\n            }\n        });\n    }\n    onInit(): void {\n        // this.activeEventServiceRegistered(this.viewport);\n\n    }\n    onDestroy(){\n        // this.deactiveEventServiceRegistered(this.viewport);\n    }\n\n}\n","<div class=\"loading-wrapper\" [class.active]=\"isActive\">\n    <div id=\"ctn-preloader\" class=\"ctn-preloader\">\n        <div class=\"round_spinner\">\n            <Div class=\"spinner\"></Div>\n            <Div class=\"text\">\n                <H4 class=\"title\">Đang Tải...</H4>\n            </Div>\n        </div>\n    </div>\n    \n</div>","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { FG_DEFAULT_DATA, FG_ITEM, FG_POSKEYS } from '@app/_shared/shared.type';\nimport { ViewportService } from '../../viewport.service';\n\n@Component({\n    selector: 'foreground-layer-item',\n    templateUrl: './foreground-layer-item.component.html',\n    styleUrls: ['./foreground-layer-item.component.scss']\n})\nexport class ForegroundLayerItemComponent extends BaseComponent implements OnInit {\n\n    @Input() data: FG_ITEM = null;\n    @Input() index: number = 0;\n    @Output() update = new EventEmitter<any>();\n    @Output() clickDelete = new EventEmitter<FG_ITEM>();\n    bgImageUrl: string;\n    zIndex: number = 0;\n\n    app: AppEditorService = null;\n\n    updateEvent: (e) => any = e => {\n        \n        if (e.data.secret_key == this.data.secret_key) {\n            this.data = e.data;\n            this.setStyle();\n        }\n    }\n    constructor(private events: ViewportService, private cd: ChangeDetectorRef) {\n        super();\n    }\n    onChangeSubEvents(){\n        this.registerEventService(this.subEvents, 'app.set', e => this.setApp(e.app), true)\n    }\n\n    onInit(): void {\n        this.setStyle();\n\n    }\n    onDestroy(){\n        if(this.app){\n            this.app.off(\"scene.foregrounds.updated\", this.updateEvent)\n        }\n    }\n    setStyle() {\n        let a = assignValue({}, FG_DEFAULT_DATA);\n        this.data = assignValue(a, this.data);\n        this.bgImageUrl = \"url(\" + this.data.url + \")\";\n        this.zIndex = 1 + this.index;\n        this.cd.detectChanges();\n    }\n\n    setApp(app: AppEditorService) {\n        this.app = app;\n        app.on(\"scene.foregrounds.updated\", this.updateEvent)\n\n    }\n}\n","<div \n    class=\"foreground-item\"\n    [style.background-image]=\"bgImageUrl\"\n    [style.z-index]=\"zIndex\"\n    [style.opacity]=\"data.opacity\"\n    [attr.data-repeat]=\"data.repeat\"\n    [attr.data-bg-size]=\"data.size\"\n    [attr.data-pos-x]=\"data.position.x\"\n    [attr.data-pos-y]=\"data.position.y\"\n></div>","import { Component, Output, EventEmitter, OnInit, ChangeDetectionStrategy, ChangeDetectorRef, Input } from '@angular/core';\r\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\r\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\r\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\r\n\r\nenum TabIndex {\r\n    Object = 0,\r\n    Scene = 1,\r\n    Light = 2,\r\n    Controls = 3,\r\n    settings  = 4\r\n}\r\n\r\n@Component({\r\n    selector: 'app-template-sidebar',\r\n    templateUrl: './sidebar.component.html',\r\n    styleUrls: ['./sidebar.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class TemplateSidebarComponent extends BaseComponent implements OnInit {\r\n\r\n    \r\n    prevTab: number = TabIndex.Object;\r\n    currentTab: number = TabIndex.Object;\r\n\r\n    loadedObject = false;\r\n    app: AppEditorService = null;\r\n    constructor(private cd: ChangeDetectorRef, private events: AppEditorEventService) {\r\n        super();\r\n    }\r\n    initFirst(){\r\n        this.app = this.events.app;\r\n    }\r\n    onInit() {\r\n        if(this.isChangeSubEvents){\r\n            this.app = this.subEvents.app;\r\n        }\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n\r\n\r\n    onChangeTab(e) {\r\n        if(this.app && this.app.editor){\r\n            if(e.index == TabIndex.Light){\r\n                this.app.editor.showLightHelpers();\r\n            }else{\r\n                this.app.editor.hideLightHelpers();\r\n                this.app.editor.detachLight();\r\n            }\r\n        }\r\n        this.currentTab = e.index;\r\n        \r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    onClickSearch(event) {\r\n        console.log(event);\r\n    }\r\n\r\n\r\n}\r\n","<nz-tabset [nzSelectedIndex]=\"currentTab\" nzTabPosition=\"top\" nzType=\"line\" class=\"main-tab\" (nzSelectChange)=\"onChangeTab($event)\">\r\n\r\n    <nz-tab [nzTitle]=\"iconObject\" [nzForceRender]=\"loadedObject\">\r\n        <ng-template #iconObject>\r\n            <img src=\"/assets/icons/new-design/tab-top/object.svg\" alt=\"Object\" />\r\n        </ng-template>\r\n        <app-tab-object></app-tab-object>\r\n    </nz-tab>\r\n\r\n\r\n    <nz-tab [nzTitle]=\"iconScene\">\r\n        <ng-template #iconScene>\r\n            <img src=\"/assets/icons/new-design/tab-top/scene.svg\" alt=\"Scene\" />\r\n        </ng-template>\r\n        <ng-template nz-tab>\r\n            <app-tab-scene></app-tab-scene>\r\n        </ng-template>\r\n    </nz-tab>\r\n\r\n    <nz-tab [nzTitle]=\"iconLight\">\r\n        <ng-template #iconLight>\r\n            <img src=\"/assets/icons/new-design/tab-top/light.svg\" alt=\"Lighr\" />\r\n        </ng-template>\r\n        <ng-template nz-tab>\r\n            <app-tab-light></app-tab-light>\r\n        </ng-template>\r\n    </nz-tab>\r\n\r\n    <nz-tab [nzTitle]=\"iconControls\">\r\n        <ng-template #iconControls>\r\n            <img src=\"/assets/icons/new-design/tab-top/control-camera.svg\" alt=\"Control Camera\" />\r\n        </ng-template>\r\n        <ng-template nz-tab>\r\n            <app-tab-controls></app-tab-controls>\r\n        </ng-template>\r\n    </nz-tab>\r\n    \r\n\r\n\r\n\r\n</nz-tabset>","import { Injectable } from '@angular/core';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ViewportService extends EventManagerService {\n\n  constructor() {\n    super();\n  }\n}\n","import { Component, Output, EventEmitter, OnDestroy, OnInit, Input, ChangeDetectorRef } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { assignValue, assignWithout, copyByList, isArray, isObject } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { CategoryModel } from '@app/_store/category';\nimport { ItemModel, ItemService, ItemTableService } from '@app/_store/item';\nimport { TemplateService } from '@app/_store/template';\nimport { TemplateTableService } from '@app/_store/template/table';\n@Component({\n    selector: 'app-tab-template',\n    templateUrl: './tab-template.component.html',\n    styleUrls: ['./tab-template.component.scss']\n})\nexport class TabTemplateComponent extends BaseComponent implements OnInit, OnDestroy {\n    @Output()\n    clickItem: EventEmitter<any> = new EventEmitter();\n\n    @Input()\n    loaded: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    loadedChange: EventEmitter<any> = new EventEmitter();\n\n    mode: string = \"explore\";\n\n    searchStatus: string = 'ready';\n\n    categories: CategoryModel[] = [];\n\n    searchResults: ItemModel[] = [];\n\n    q = {\n        s: null,\n        category_id: null,\n    };\n\n\n    isSearching: boolean = false;\n\n    hasResult: boolean = false;\n\n    constructor(\n        public templateService: TemplateService,\n        // public templateTable: TemplateTableService,\n        private events: AppEditorEventService,\n        private cd: ChangeDetectorRef\n    ) {\n        super();\n    }\n\n    onInit(): void {\n        if (this.mode == \"explore\") {\n            this.explore();\n        } else {\n            this.search();\n        }\n    }\n\n    onDestroy() {\n\n\n    }\n\n    explore() {\n        this.subEvents.emit(\"component.checkchange\");\n        this.templateService.getByCategories({}).subscribe(rs => {\n            if (rs.status) {\n                this.categories = rs.data;\n\n                if (rs.data.length) {\n                    rs.data.map(cate => this.parseItemList(cate.templates));\n                }\n                this.subEvents.emit(\"component.checkchange\");\n                this.cd.detectChanges();\n            }\n        })\n    }\n\n    search() {\n        this.searchStatus = 'searching';\n        this.searchResults.splice(0);\n        this.subEvents.emit(\"component.checkchange\");\n        this.templateService.getAll(this.q).subscribe(rs => {\n            if (rs.count > 0) {\n                this.searchResults = rs.data;\n                this.parseItemList(this.searchResults);\n                this.searchStatus = 'done';\n                this.cd.detectChanges();\n            } else {\n                this.searchStatus = 'notfound';\n                this.cd.detectChanges();\n            }\n            this.subEvents.emit(\"component.checkchange\");\n\n        }, error => {\n            this.searchStatus = 'error';\n            this.subEvents.emit(\"component.checkchange\");\n            this.cd.detectChanges();\n        });\n    }\n\n    parseItemList(list) {\n        if (isArray(list)) {\n            list.map(item => this.parseItem(item));\n        }\n    }\n    parseItem(item) {\n        if (isObject(item)) {\n            // var rs = this.templateTable.first('*', { id: item.id });\n            // if (rs) {\n            //     // assignValue(item, copyByList(rs, ['name', 'id', 'category_id', 'status', 'description', 'status', '']))\n            //     assignWithout(item, rs, ['id', 'lights', 'meshes', 'objects']);\n            //     item.objects = rs.objects;\n            //     item.lights = rs.lights;\n            //     item.meshes = rs.meshes;\n            // }\n        }\n    }\n\n    onClickSearch() {\n        if (String(this.q.s).length) {\n            this.mode = \"search\";\n            this.search();\n        } else if (this.mode == \"search\") {\n            this.mode = \"explore\";\n        }\n    }\n\n    onLayoutComplete({ isLayout, endLoading }) {\n        if (!isLayout) {\n            endLoading();\n        }\n    }\n\n    // getFileUrl(files) {\n    //   const file = files.find((f) => f.quanlity === EMediaFileQuanlity.screen);\n    //   return (file && file.url) || '';\n    // }\n\n}\n","<div class=\"tab-inner\">\n    <h2>{{\"Template\"|translate}}</h2>\n    <div class=\"block search\">\n        <div class=\"search-inner\">\n            <nz-input-group nzSearch [nzSuffix]=\"suffixIconSearch\">\n                <input type=\"text\" nz-input placeholder=\"Find in 1.000.000 items\" [(ngModel)]=\"q.s\" />\n            </nz-input-group>\n            <ng-template #suffixIconSearch>\n                <button nz-button nzType=\"link\" (click)=\"onClickSearch()\">\n                    <em nz-icon nzType=\"search\"></em>\n                </button>\n            </ng-template>\n        </div>\n    </div>\n    <div class=\"store\">\n        <ng-container *ngIf=\"mode=='explore'; then thenTemplate; else elseTemplate\"></ng-container>\n        <ng-template #thenTemplate>\n            <div *ngFor=\"let cate of categories; let i=index\" class=\"cate-item\">\n                <template-list [items]=\"cate.templates\" [title]=\"cate.name\"></template-list>\n            </div>\n        </ng-template>\n        <ng-template #elseTemplate>\n            <ng-container [ngSwitch]=\"searchStatus\">\n                <p *ngSwitchCase=\"'done'\">\n                    <template-list [items]=\"searchResults\" title=\"Tất cả\"></template-list>\n                </p>\n                <p *ngSwitchCase=\"'notfound'\">\n                    {{\"Not Found\" | translate}}\n                </p>\n                <p *ngSwitchCase=\"'error'\">\n                    {{\"Error\" | translate}}\n                </p>\n                <p *ngSwitchDefault>\n                    {{\"searching...\" | translate}}\n                </p>\n            </ng-container>\n        </ng-template>\n    </div>\n</div>","import { ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { assignValue, degreeToRadians, radianToDegrees, Str } from '@app/_core/helpers/utils';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n  selector: 'inp-rotation-group',\n  templateUrl: './inp-rotation-group.component.html',\n  styleUrls: ['./inp-rotation-group.component.scss']\n})\nexport class InpRotationGroupComponent extends BaseInpGroupComponent implements OnInit, OnChanges {\n\n  @Input() events: EventManagerService;\n\n  degreSymbol : string = \"°\";\n  _value:any = {\n    x:0,\n    y:0,\n    z:0\n  };\n\n  canSync: boolean = false;\n\n  rotateCallnack =  e => {\n    if(e.value){\n      this.value = e.value;\n\n    }\n    this.syncFromParent();\n  };\n\n  constructor(private cd: ChangeDetectorRef) {\n    super();\n  }\n\n\n\n\n  onInit(): void {\n    this.inpInit();\n    this.syncFromParent();\n    this.canSync = true;\n    if(this.events){\n      this.events.on(\"props.rotation.change\",this.rotateCallnack)\n    }\n  }\n\n  onDestroy(){\n    if(this.events){\n      this.events.off(\"props.rotation.change\",this.rotateCallnack)\n    }\n  }\n\n\n  syncFromParent(){\n    assignValue(this._value, {\n      x: radianToDegrees(this.value.x),\n      y: radianToDegrees(this.value.y),\n      z: radianToDegrees(this.value.z)\n  });\n    this.cd.detectChanges();\n  }\n\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if(this.canSync){\n      \n      if(changes.value){\n        this.syncFromParent();\n      }\n    }\n    \n  }\n\n  updateVector(vector, event){\n    this.canSync = false;\n    assignValue(this.value, {\n      x: degreeToRadians(this._value.x),\n      y: degreeToRadians(this._value.y),\n      z: degreeToRadians(this._value.z),\n      \n    })\n    this.emitChange();\n    this.canSync = true;\n  }\n\n  formatterX = (value: number) => `x: ${value} ${this.degreSymbol}`;\n  parserX = (value: string) => Str.replace(value, ['x', ':', this.degreSymbol, ' '], '');\n\n  formatterY = (value: number) => `y: ${value} ${this.degreSymbol}`;\n  parserY = (value: string) => Str.replace(value, ['y', ':', this.degreSymbol, ' '], '');\n  \n  formatterZ = (value: number) => `z: ${value} ${this.degreSymbol}`;\n  parserZ = (value: string) => Str.replace(value, ['z', ':', this.degreSymbol, ' '], '');\n\n}\n","<div class=\"label\">{{label | translate}}</div>\n<div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\">\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n        <div class=\"inner-box\">\n            <nz-input-number \n                [(ngModel)]=\"_value.x\" \n                name=\"x\" [nzStep]=\"0.01\" \n                (ngModelChange)=\"updateVector('x', $event)\" \n                [nzFormatter]=\"formatterX\"\n                [nzParser]=\"parserX\">\n            </nz-input-number>\n        </div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n        <div class=\"inner-box\">\n            <nz-input-number \n                [(ngModel)]=\"_value.y\" \n                name=\"x\" \n                [nzStep]=\"0.01\" \n                (ngModelChange)=\"updateVector('y', $event)\"\n                [nzFormatter]=\"formatterY\"\n                [nzParser]=\"parserY\">\n            </nz-input-number>\n        </div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n        <div class=\"inner-box\">\n            <nz-input-number \n                [(ngModel)]=\"_value.z\" \n                name=\"x\" \n                [nzStep]=\"0.01\" \n                (ngModelChange)=\"updateVector('z', $event)\"\n                [nzFormatter]=\"formatterZ\"\n                [nzParser]=\"parserZ\">\n            </nz-input-number>\n        </div>\n    </div>\n</div>","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, Input, OnInit } from '@angular/core';\nimport { TransparentBase64Image } from '@app/_3D/libs/three.libs';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { CallbackFunction } from '@app/_shared/shared.type';\nimport { BaseComponent } from '../base/base.component';\nimport { ClientEditToolbarService } from './client-edit-toolbar/client-edit-toolbar.service';\nimport { ObjectToolbarService } from './object-toolbar/object-toolbar.service';\nimport { ViewportService } from './viewport.service';\nimport html2canvas from '@app/_core/libs/html2canvas.esm.js';\n@Component({\n    selector: 'app-client-viewport',\n    templateUrl: './client-viewport.component.html',\n    styleUrls: ['./client-viewport.component.scss']\n})\nexport class ClientViewportComponent extends BaseComponent implements OnInit {\n    @Input() app: any;\n    app3D: AppEditorService = null;\n    canvas: Element = null;\n    droppable: boolean = false;\n    isLoad: boolean = false;\n    appTem: AppEditorService = null;\n    subToolbar: ClientEditToolbarService = null;\n    previewImage = TransparentBase64Image;\n    \n    constructor(\n        private elemRef: ElementRef,\n        private events: ViewportService,\n        private toolbar: ClientEditToolbarService,\n        private cd: ChangeDetectorRef\n    ) {\n        super();\n    }\n\n    onChangeSubEvents(){\n        // this.service.on(, true);\n\n        this.registerEventService(this.subEvents, {\n            'app.set|dispatch': e => {\n                this.appTem = e.app;\n            },\n            capture: e => this.capture(e.image, e.done)\n        })\n        this.registerEventService(document, {\n            pointerup: e => this.transferEvent(e),\n        })\n    }\n\n    onInit(): void {\n        const st = this.toolbar.sub(this.moduleKey);\n        if(this.subToolbar != st){\n            this.subToolbar = st;\n        }\n        this.hasChangeApp = false;\n        if (this.app) {\n            this.setApp(this.app);\n        }else if(!this.app3D){\n            if(this.appTem) this.setApp(this.appTem);\n            else this.subEvents.on('app.set', e => this.setApp(e.app), true);\n        }\n\n        if(!this.hasChangeApp && this.app3D){\n            this.activeEventServiceRegistered(this.app3D);\n        }\n        this.hasChangeApp = false;\n        this.cd.detectChanges();\n        this.activeEventServiceRegistered(document)\n    }\n\n    onDestroy(){\n        this.deactiveEventServiceRegistered(this.app3D)\n        this.deregisterAllEventService(document)\n    }\n\n    initCanvas() {\n        this.canvas = this.app3D.engine.getCanvas();\n    }\n\n    setApp(app) {\n        if(app == this.app3D) return this.initCanvas();\n        if(this.app3D){\n            this.deactiveEventServiceRegistered(this.app3D);\n            this.deregisterAllEventService(this.app3D);\n        }\n\n        this.app3D = app;\n        this.registerEventService(this.app3D, {\n            'viewport.pointer.check': e => this.checkPointerPosition(e.event, e.handle,  e.showDroppableLayer),\n            'viewport.droppable.show': () => this.droppable = true,\n            'viewport.droppable.hide': () => {\n                this.droppable = false;\n                this.isLoad = false;\n            },\n            'viewport.show:loading': () => {\n                this.isLoad = true;\n                this.subEvents.emit(\"show:loading\");\n            },\n            'viewport.hide:loading': () => {\n                this.isLoad = false;\n                this.subEvents.emit(\"hide:loading\");\n            },\n            'viewport.droppable.loading': () => {\n                this.isLoad = true;\n                this.subEvents.emit(\"show:loading\");\n            },\n    \n            \"control.mode.change\": e => this.subToolbar.changeMode(e.node),\n            \"init\": () => this.subEvents.emit(\"resetcanvas\")    \n        });\n\n        this.activeEventServiceRegistered(this.app3D);\n        this.hasChangeApp = true;\n        this.initCanvas();\n        \n    }\n\n    transferEvent(event){\n        if(this.app3D){\n            this.app3D.transferEventListenner(event)\n        }\n    }\n\n    checkPointerPosition(event:PointerEvent, callback?:any, showDroppableLayer?:boolean){\n        var rect = this.elemRef.nativeElement.getBoundingClientRect();\n        var clientX = event.clientX, clientY = event.clientY;\n        let pos: any = {\n            x: clientX - rect.x,\n            y: clientX - rect.y,\n            isHover: (\n                clientY > rect.y &&\n                clientY < rect.y + rect.height &&\n                clientX > rect.x &&\n                clientX < rect.x + rect.width\n            ),\n            rect: rect\n        };\n\n        if(showDroppableLayer && ((pos.isHover && !this.droppable) || (!pos.isHover && this.droppable))){\n            this.droppable = !this.droppable\n        }\n        if(typeof callback == \"function\"){\n            callback(pos);\n        }\n        this.app3D.emit({\n            type : \"viewport.pointer.emit\",\n            pointer: pos\n        }, false);\n        \n\n    }\n\n    capture(image, onDone: CallbackFunction){\n        this.previewImage = image;\n        setTimeout(() => {\n            html2canvas(this.elemRef.nativeElement.querySelector('.frame')).then(canvas => {\n                const img = canvas.toDataUrl();\n                this.previewImage = TransparentBase64Image;\n                \n            });\n        }, 20);\n    }\n}\n","<div class=\"frame\">\n    <canvas-layer [app]=\"app3D\" [canvas]=\"canvas\" *ngIf=\"canvas\"></canvas-layer>\n    <img src=\"{{previewImage}}\" alt=\"\" class=\"preview-image\">\n\n    <foreground-layer></foreground-layer>\n\n\n</div>\n<droppable-layer [class.active1]=\"droppable\"></droppable-layer>\n<viewport-loading-layer></viewport-loading-layer>\n<div class=\"mask-wrapper\">\n    <div class=\"mask-layer\" \n        (contextmenu)=\"transferEvent($event)\" \n        (pointerdown)=\"transferEvent($event)\" \n        (pointermove)=\"transferEvent($event)\" \n        (wheel)=\"transferEvent($event)\" \n        (touchstart)=\"transferEvent($event)\" \n        (touchend)=\"transferEvent($event)\"\n        (touchmove)=\"transferEvent($event)\" \n        (keydown)=\"transferEvent($event)\" \n    ></div>\n\n</div>\n<app-vector-controls></app-vector-controls>\n<viewport-editor-toolbar></viewport-editor-toolbar>\n<client-viewport-edit-toolbar></client-viewport-edit-toolbar>","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { TemplateEventsService } from '@app/template-page/_store/events.service';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { ShadowSetting, ShadowSettingDefaultData } from '@app/_3D/store/data.type';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { InpEvent } from '@app/_shared/shared.type';\nimport { EditorIO, EditorMethods } from '../../../base/editor-io';\n\n@Component({\n    selector: 'app-tab-shadow',\n    templateUrl: './tab-shadow.component.html',\n    styleUrls: ['./tab-shadow.component.scss']\n})\nexport class TabShadowComponent extends BaseComponent implements OnInit {\n    shadow: ShadowSetting = {};\n    app: AppEditorService;\n    constructor(\n        private cd: ChangeDetectorRef,\n        private events: AppEditorEventService\n    ) {\n        super();\n    }\n\n        \n    initOnce(){\n        this.app = this.events.app;\n     \n    }\n    init() {\n        if(this.isChangeSubEvents){\n            this.app = this.subEvents.app;\n        \n        }\n        assignValue(this.shadow, ShadowSettingDefaultData);\n        assignValue(this.shadow, this.app.getShadowSetting());\n\n        this.cd.detectChanges();\n    }\n    onDestroy(){\n        \n    }\n\n    updateSetting(event: InpEvent) {\n        this.shadow[event.name] = event.value;\n        let a: any = {};\n        a[event.name] = event.value;\n        this.app.updateShadowSetting(a);\n    }\n}\n","<div class=\"tab-inner\">\n    <div class=\"tab-header\">\n        <h2>Shadow</h2>\n        \n    </div>\n    <div class=\"store\">\n        <div class=\"inputs\">\n            <inp-switch-group name=\"enabled\" [(value)]=\"shadow.enabled\" label=\"Enable\" (subcribe)=\"updateSetting($event)\" class=\"inp-group-item-first\"></inp-switch-group>\n            <inp-switch-group name=\"pcss\" [(value)]=\"shadow.pcss\" label=\"PCSS\" (subcribe)=\"updateSetting($event)\" class=\"inp-group-item\" *ngIf=\"shadow.enabled\"></inp-switch-group>\n        </div>\n    </div>\n</div>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { Materials } from '@app/_3D/libs/three.libs';\nimport { isObject, isString, Str } from '@app/_core/helpers/utils';\nimport { InpEvent } from '@app/_shared/shared.type';\n\n@Component({\n    selector: 'material-inputs',\n    templateUrl: './material-inputs.component.html',\n    styleUrls: ['./material-inputs.component.scss']\n})\nexport class MaterialInputsComponent implements OnInit {\n    @Input() material: {\n        type: string,\n        [propKey: string]: any\n    } = null;\n    @Input() settings: {\n        type: string,\n        [propKey: string]: any\n    };\n\n    @Output() subcribe = new EventEmitter<any>();\n\n    types: any[] = [];\n    type: string = 'basic';\n\n    \n    inputs: any[] = [];\n\n    constructor() { }\n\n    emit(name:string){\n        this.subcribe.emit({\n            name: name,\n            value: this.settings[name],\n            settings: this.settings,\n            material:this.material\n        })\n    }\n\n    ngOnInit(): void {\n        if (!isObject(this.settings)) {\n            this.settings = {\n                type: (this.material?this.material.type:\"basic\")\n            }\n        }else if(!isString(this.settings.type) || !Materials.getMaterialType(this.material.type)){\n            this.settings.type = this.material?this.material.type:\"basic\";\n        }\n        this.settings.type = Materials.getMaterialType(this.settings.type)\n\n        this.settings.name = this.settings.name || this.material.name || \"\";\n        \n        this.types.splice(0);\n        for (const value in Materials.config.options) {\n            if (Object.prototype.hasOwnProperty.call(Materials.config.options, value)) {\n                const label = Materials.config.options[value];\n                this.types.push({value, label});\n            }\n        }\n\n        \n        this.setType(this.settings.type);\n    }\n\n\n    \n    setType(type:string){\n        var _type = Str.replace(String(type).toLowerCase(), ['mesh', 'material'], '');\n        if(typeof Materials.config.options[_type] != \"undefined\"){\n            this.type = _type;\n            this.inputs = Materials.getMaterialInputs(_type, this.material, this.settings);\n        }\n    }\n    changeType(event){\n        this.setType(event.value);\n        this.settings.type = event.value;\n        this.emit(\"type\");\n        \n\n    }\n\n    changeHandle(event: InpEvent){\n        this.settings[event.name] = event.value;\n        this.emit(event.name);\n    }\n\n}\n","<inp-select-group class=\"input-group-item py10\" name=\"type\" label=\"Material Type\" [(value)]=\"type\" [options]=\"types\" (subcribe)=\"changeType($event)\"></inp-select-group>\n<div class=\"material-inputs\">\n    <div class=\"input-group-item\" *ngFor=\"let inp of inputs; let i=index\">\n        <div class=\"input-item\" [ngSwitch]=\"inp.type\">\n            <inp-switch-group *ngSwitchCase=\"'checkbox'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-switch-group>\n            <inp-texture-group *ngSwitchCase=\"'texture'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-texture-group>\n            <inp-color-group *ngSwitchCase=\"'color'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-color-group>\n            <inp-select-group *ngSwitchCase=\"'select'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-select-group>\n            <inp-range-group *ngSwitchCase=\"'range'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-range-group>\n            <inp-number-group *ngSwitchCase=\"'number'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-number-group>\n            <inp-text-group *ngSwitchDefault [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-text-group>\n        </div>\n    </div>\n</div>","import { Injectable } from '@angular/core';\r\nimport { HttpService } from '@app/_core/services/http.service';\r\nimport { Observable } from 'rxjs';\r\nimport { CategoryResultsModel } from '../category';\r\n\r\nimport { ItemModel } from './model';\r\nimport { ItemResultModel, ItemResultsModel } from './results.model';\r\n\r\nconst API_CUSTOMERS_URL = 'items';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ItemService {\r\n  results: ItemResultsModel;\r\n\r\n  constructor(private httpService: HttpService) { }\r\n\r\n\r\n\r\n  getAll(params: {}): Observable<ItemResultsModel> {\r\n    return this.httpService.get(API_CUSTOMERS_URL + \"/list\", params);\r\n  }\r\n\r\n  getByCategories(params: {}): Observable<CategoryResultsModel> {\r\n    return this.httpService.get(API_CUSTOMERS_URL + \"/category\", params);\r\n  }\r\n\r\n  // get(key): Observable<ItemResultModel> {\r\n  //   return this.httpService.get(`${API_CUSTOMERS_URL}/${key}.json`);\r\n  // }\r\n\r\n  get(key): Observable<ItemModel> {\r\n    return this.httpService.get(`${API_CUSTOMERS_URL}/${key}`);\r\n  }\r\n\r\n  create(model: ItemModel): Observable<ItemResultModel> {\r\n    return this.httpService.post(API_CUSTOMERS_URL + \"/create\", model);\r\n  }\r\n\r\n  update(model: ItemModel): Observable<ItemResultModel> {\r\n    const key = model.id;\r\n    // return this.httpService.patch(`${API_CUSTOMERS_URL}/${key}.json`, model);\r\n    // return this.httpService.patch(`${API_CUSTOMERS_URL}/actions.json`, model);\r\n    return this.httpService.put(`${API_CUSTOMERS_URL}/update/${key}`, model);\r\n  }\r\n\r\n\r\n  updateSize(model: ItemModel): Observable<ItemResultModel> {\r\n    const key = model.id;\r\n    // return this.httpService.patch(`${API_CUSTOMERS_URL}/${key}.json`, model);\r\n    // return this.httpService.patch(`${API_CUSTOMERS_URL}/actions.json`, model);\r\n    return this.httpService.put(`${API_CUSTOMERS_URL}/size/${key}`, model);\r\n  }\r\n\r\n\r\n  updateThumbnail(model: ItemModel): Observable<ItemResultModel> {\r\n    const key = model.id;\r\n    // return this.httpService.patch(`${API_CUSTOMERS_URL}/${key}.json`, model);\r\n    // return this.httpService.patch(`${API_CUSTOMERS_URL}/actions.json`, model);\r\n    return this.httpService.put(`${API_CUSTOMERS_URL}/thumbnail/${key}`, model);\r\n  }\r\n\r\n\r\n  delete(key): Observable<ItemResultModel> {\r\n    return this.httpService.delete(`${API_CUSTOMERS_URL}/${key}`);\r\n    // return this.httpService.delete(`${API_CUSTOMERS_URL}/actions.json`);\r\n  }\r\n\r\n  search(query: { tag?: string; key?: string; collectionCode?: string }) {\r\n    return this.httpService.get(`${API_CUSTOMERS_URL}/list`, query);\r\n  }\r\n\r\n  searchNounProject(query: { tag?: string; key?: string; collectionCode?: string }) {\r\n    return this.httpService.get(`${API_CUSTOMERS_URL}/search/nounproject`, query);\r\n  }\r\n\r\n  render(params) {\r\n    return this.httpService.download(API_CUSTOMERS_URL + '/render', params);\r\n  }\r\n\r\n  getItemData(url) {\r\n    return this.httpService.getOut(url);\r\n  }\r\n\r\n  useItem(ItemId): Observable<ItemResultModel> {\r\n    return this.httpService.post(`${API_CUSTOMERS_URL}/${ItemId}/use`, {}, false);\r\n  }\r\n}\r\n","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, Input, OnInit } from '@angular/core';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { BaseComponent } from '../base/base.component';\nimport { ObjectToolbarService } from './object-toolbar/object-toolbar.service';\nimport { ViewportService } from './viewport.service';\n\n@Component({\n    selector: 'app-viewport',\n    templateUrl: './viewport.component.html',\n    styleUrls: ['./viewport.component.scss']\n})\nexport class ViewportComponent extends BaseComponent implements OnInit {\n    @Input() app: any;\n    app3D: AppEditorService = null;\n    canvas: Element = null;\n    droppable: boolean = false;\n    isLoad: boolean = false;\n    appTem: AppEditorService = null;\n    hasChangeApp: boolean = false;\n    subToolbar: ObjectToolbarService;\n    constructor(\n        private elemRef: ElementRef,\n        private events: ViewportService,\n        private toolbar: ObjectToolbarService,\n        private cd: ChangeDetectorRef\n    ) {\n        super();\n        \n    }\n\n    onChangeSubEvents(){\n        this.registerEventService(this.subEvents, \"app.set|dispatch\", e => this.appTem = e.app);\n        this.registerEventService(document, {\n            pointerup: e => this.transferEvent(e),\n        })\n    }\n\n\n    onInit(): void {\n        \n        const st = this.toolbar.sub(this.moduleKey);\n        if(st != this.subToolbar){\n            this.subToolbar = st;\n        }\n        this.hasChangeApp = false;\n        if (this.app) {\n            this.setApp(this.app);\n        }else if(!this.app3D){\n            if(this.appTem) this.setApp(this.appTem);\n            else this.subEvents.on('app.set', e => this.setApp(e.app), true);\n        }\n\n        if(!this.hasChangeApp){\n            this.activeEventServiceRegistered(this.app3D);\n        }\n\n        this.hasChangeApp = false;\n        \n        this.cd.detectChanges();\n        this.activeEventServiceRegistered(document)\n    }\n\n    onDestroy(){\n        this.deactiveEventServiceRegistered(this.app3D);\n        this.deregisterAllEventService(document)\n    }\n\n    initCanvas() {\n        this.canvas = this.app3D.engine.getCanvas();\n    }\n\n    setApp(app) {\n        if(app == this.app3D) return this.initCanvas();\n        if(this.app3D){\n            this.deactiveEventServiceRegistered(this.app3D);\n            this.deregisterAllEventService(this.app3D);\n        }\n\n        this.app3D = app;\n        this.registerEventService(this.app3D, {\n            'viewport.pointer.check': e => this.checkPointerPosition(e.event, e.handle,  e.showDroppableLayer),\n            'viewport.droppable.show': () => this.droppable = true,\n            'viewport.droppable.hide': () => {\n                this.droppable = false;\n                this.isLoad = false;\n            },\n            'viewport.show:loading': () => {\n                this.isLoad = true;\n                this.subEvents.emit(\"show:loading\");\n            },\n            'viewport.hide:loading': () => {\n                this.isLoad = false;\n                this.subEvents.emit(\"hide:loading\");\n            },\n            'viewport.droppable.loading': () => {\n                this.isLoad = true;\n                this.subEvents.emit(\"show:loading\");\n            },\n    \n            \"control.mode.change\": e => this.subToolbar.changeMode(e.node),\n            \"init\": () => this.subEvents.emit(\"resetcanvas\")    \n        });\n\n        this.activeEventServiceRegistered(this.app3D);\n        this.hasChangeApp = true;\n        this.initCanvas();\n        \n    }\n\n    transferEvent(event){\n        if(this.app3D){\n            this.app3D.transferEventListenner(event)\n        }\n    }\n\n    checkPointerPosition(event:PointerEvent, callback?:any, showDroppableLayer?:boolean){\n        var rect = this.elemRef.nativeElement.getBoundingClientRect();\n        var clientX = event.clientX, clientY = event.clientY;\n        let pos: any = {\n            x: clientX - rect.x,\n            y: clientX - rect.y,\n            isHover: (\n                clientY > rect.y &&\n                clientY < rect.y + rect.height &&\n                clientX > rect.x &&\n                clientX < rect.x + rect.width\n            ),\n            rect: rect\n        };\n\n        if(showDroppableLayer && ((pos.isHover && !this.droppable) || (!pos.isHover && this.droppable))){\n            this.droppable = !this.droppable\n        }\n        if(typeof callback == \"function\"){\n            callback(pos);\n        }\n        this.app3D.emit({\n            type : \"viewport.pointer.emit\",\n            pointer: pos\n        }, false);\n        \n\n    }\n}\n","<canvas-layer [app]=\"app3D\" [canvas]=\"canvas\" *ngIf=\"canvas\"></canvas-layer>\n    \n<div class=\"frame\">\n    <foreground-layer></foreground-layer>\n    \n</div>\n<droppable-layer [class.active1]=\"droppable\"></droppable-layer>\n<viewport-loading-layer></viewport-loading-layer>\n<div class=\"mask-wrapper\">\n    <div class=\"mask-layer\" \n        (contextmenu)=\"transferEvent($event)\" \n        (pointerdown)=\"transferEvent($event)\" \n        (pointermove)=\"transferEvent($event)\" \n        (wheel)=\"transferEvent($event)\" \n        (touchstart)=\"transferEvent($event)\" \n        (touchend)=\"transferEvent($event)\"\n        (touchmove)=\"transferEvent($event)\" \n        (keydown)=\"transferEvent($event)\" \n    ></div>\n</div>\n<app-vector-controls></app-vector-controls>\n<viewport-editor-toolbar></viewport-editor-toolbar>\n<viewport-object-toolbar></viewport-object-toolbar>\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Geometries, TransparentBase64Image } from '@app/_3D/libs/three.libs';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { Vector2 } from '@app/_3D/store/data.type';\nimport { assignValue, isEmpty } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\n\ninterface mousePosition {\n    x: number,\n    y: number\n}\n\nconst THUMBNAIL_ASSDT_URL = '/assets/icons/geometries/';\n\n@Component({\n    selector: 'dragging-geometry',\n    templateUrl: './dragging-geometry.component.html',\n    styleUrls: ['./dragging-geometry.component.scss']\n})\nexport class DraggingGeometryComponent extends BaseComponent implements OnInit, OnDestroy {\n    show: boolean = false;\n    droppable: boolean = false;\n    isDragging: boolean = false;\n    thumbnail: string = TransparentBase64Image;\n\n    pointer: mousePosition = {\n        x: 0,\n        y: 0\n    }; \n    viewportBounding: any = {\n        left:0,\n        top:0,\n        width: 0,\n        height: 0\n    };\n    currentPos: Vector2 = {\n        x: 0,\n        y: 0\n    };\n\n    geometryType: string = '';\n\n    draggingStyle: string = '';\n\n    previewSecretKey: string = '';\n\n\n    previewObject: any = null;\n    constructor(\n        private elemRef: ElementRef,\n        private events: AppEditorEventService\n        \n    ) { \n        super();\n    }\n\n    initEvents(){\n        this.registerEventService(this.subEvents, {\n            'geometry.dragstart': e => {\n                this.dragStart(e.geometryType);\n                this.updatePoistion(e);\n            },\n            'pointerup': e => {\n                if (this.isDragging) {\n                    e.preventDefault();\n                    this.dragEnd(e);\n                }\n            },\n            'pointermove': e => {\n                if (this.isDragging) {\n                    this.onMove(e);\n                }\n            },\n            'geometry.draghover': e => {\n                if (this.isDragging) {\n                    if(!this.droppable){\n                        this.droppable = true;\n                        this.createGeometryPreview();\n                    }\n                }\n            },\n            'geometry.dragout': e => {\n                if(this.droppable){\n                    this.removeGeometryPreview();\n                }\n                this.droppable = false;\n    \n            }\n        });\n    }\n    init(): void{\n        if(this.isChangeSubEvents){\n            this.initEvents();\n        }\n        this.activeEventServiceRegistered(this.subEvents);\n    }\n    onDestroy(){\n        this.deactiveEventServiceRegistered(this.subEvents);\n    }\n\n    dragStart(geometryType) {\n        this.geometryType = geometryType;\n        this.thumbnail = THUMBNAIL_ASSDT_URL + geometryType + \".svg\";\n        this.isDragging = true;\n    }\n\n    \n    onMove(event) {\n        this.updatePoistion(event, true);\n        this.subEvents.emit({\n            type: \"geometry.dragmove\",\n            clientX: event.clientX,\n            clientY: event.clientY,\n            checkArea: this.droppable,\n            position: this.currentPos\n        }, false);\n\n    }\n\n\n    dragEnd(e) {\n        if (this.isDragging) {\n            e.preventDefault();\n\n            if (!this.droppable) {\n\n                this.hideDraggingIten();\n            }else{\n                this.dropGeometry();\n                \n\n            }\n        }\n    }\n\n    hideDraggingIten(){\n        this.isDragging = false;\n        this.draggingStyle = '';\n        this.droppable = false;\n        this.previewSecretKey = \"\";\n    }\n\n    dropGeometry(){\n        const app = this.subEvents.app;\n        if(app.addItemMode == \"lock\"){\n            app.deleteMesh(this.previewSecretKey);\n        }else{\n            app.updateMeshSettingDataAndScene(this.previewSecretKey, {\n                material: {\n                    transparent: false,\n                    opacity: 1\n                },\n                props:{\n                    position:{\n                        y: this.previewObject.position.y\n                    }\n                }\n            }, true);\n\n            const meshEngineData = app.getMeshEngineData(this.previewSecretKey).object;\n            const meshSettingData = app.getMesh(this.previewSecretKey).data;\n            \n            this.subEvents.emit({\n                type: \"geometry.added\",\n                data: {\n                    mesh: meshEngineData,\n                    data: meshSettingData,\n                    secret_key:  this.previewSecretKey\n                }\n            }, false);\n            this.subEvents.emit({\n                type: \"droppable.areas.remove\"\n            });\n        }\n\n        this.previewObject = null;\n        this.hideDraggingIten();\n    }\n\n    updatePoistion(event, fixSize?:boolean) {\n        \n        this.currentPos.x = event.clientX;\n        this.currentPos.y = event.clientY;\n            \n        var itemElement = this.elemRef.nativeElement.querySelector('.mesh-geometry-handling');\n        if (itemElement) {\n            var width = 100, height = 100;\n            if(fixSize){\n                var rect = itemElement.getBoundingClientRect();\n                width = rect.width; \n                height = rect.height;\n            }\n\n            this.pointer.x = event.clientX - width / 2;\n            this.pointer.y = event.clientY - height / 2;\n            if (this.droppable) {\n                this.pointer.x = event.clientX + width * 0.5;\n                this.pointer.y = event.clientY - height * 1.5;\n\n            }\n            this.draggingStyle = `left: ${this.pointer.x}px; top: ${this.pointer.y}px;`;\n\n        }\n    }\n\n    createGeometryPreview(){\n        const config = Geometries.getConfig(this.geometryType);\n        if(!isEmpty(config)){\n            var self = this;\n            this.subEvents.app.addMesh({\n                geometry: assignValue({type:this.geometryType}, config.data.params),\n                material: {\n                    type: \"physical\",\n                    color: \"#9ad9f3\",\n                    transparent: true,\n                    opacity: 0.4\n                },\n                props: {\n                    castShadow: true\n                }\n            }, (object:any) => {\n                let eo = this.subEvents.app.engine.getObject(object.secret_key);\n                let io : any = {\n                    size: eo.size.origin,\n                    object: eo.object\n                };\n                this.previewObject = io.object;\n                this.subEvents.app.editor.detachObject();\n                this.subEvents.emit({\n                    type: \"droppable.areas.add\",\n                    item: io,\n                    position: this.currentPos\n                });\n                self.previewSecretKey = object.secret_key;\n\n            });\n            \n        }\n    }\n    removeGeometryPreview(){\n        this.subEvents.emit({\n            type: \"droppable.areas.remove\"\n        });\n        this.subEvents.emit({\n            type: \"engine.geometry.remove\",\n            secret_key: this.previewSecretKey\n        }, false);\n    }\n}\n","<div class=\"mesh-geometry-handling\" [style]=\"draggingStyle\" [class.droppable]=\"droppable\">\n    <div class=\"thumbnail\">\n        <img src=\"{{thumbnail}}\" alt=\"{{thumbnail}}\">\n    </div>\n</div>","import { assignValue, assignWithout, inArray, isArray, isEmpty, isObject, isString, objectValues, Str } from '@app/_core/helpers/utils';\r\nimport * as THREE from 'three';\r\n\r\nimport Props from '../libs/props';\r\n\r\nimport { OrbitControls } from '../threejs/jsm/controls/OrbitControls.js';\r\nimport { DragControls } from '../threejs/jsm/controls/DragControls.js';\r\nimport { FirstPersonControls } from '../threejs/jsm/controls/FirstPersonControls.js';\r\nimport { FlyControls } from '../threejs/jsm/controls/FlyControls.js';\r\nimport { PointerLockControls } from '../threejs/jsm/controls/PointerLockControls.js';\r\nimport { TransformControls } from '../threejs/jsm/controls/TransformControls.js';\r\n// import { DeviceOrientationControls } from '../threejs/jsm/controls/DeviceOrientationControls.js';\r\n// import { EditorControls } from '../libs/EditorControls.js';\r\n\r\n\r\nimport Dom from '@app/_core/helpers/dom';\r\n\r\n\r\n\r\nconst Controls = {\r\n\r\n    control: null,\r\n    enableControl: true,\r\n    controlEnableDamping: false,\r\n    controlList: null,\r\n\r\n    controlChangingStatus: false,\r\n\r\n    controlDoActionAfter: 0,\r\n\r\n    controlActionTimeout: 16,\r\n    \r\n    controlCheckTimer: 16,\r\n\r\n    controlEffectTimer: 2000,\r\n\r\n    controlActionTimeoutID: null,\r\n\r\n    controlActionWaiting: false,\r\n\r\n    maskLayer: null,\r\n\r\n    controlChangingByFPSStatus: false,\r\n    controlChangingByFPSID: null,\r\n\r\n    boots: ['controlBoot'],\r\n    controlBoot: function(){\r\n        this.controlList = {};\r\n    },\r\n    /**\r\n     * set control chính\r\n     * @param {object} opts thuộc tính, tham số tạo \r\n     */\r\n    setMainControl: function (opts?:any) {\r\n        var opt = typeof opts == \"object\" ? opts : {};\r\n        Props.parse(opt);\r\n        if (opt.disabled) return this;\r\n        var self = this;\r\n        var control = this.getControl(opt);\r\n        this.control = control;\r\n        var id = opt.id || \"main\";\r\n        this.controlEnableDamping = opt.enableDamping || false;\r\n        this.control.__id = id;\r\n        this.controlList[id] = this.control;\r\n        \r\n        this.control.autoUpdateScene = opt.autoUpdateScene || false;\r\n        this.enableControl = this.control.enabled;\r\n        // if(typeof this.control.addEventListener == \"function\"){\r\n        //     this.control.addEventListener('change',  e => {\r\n        //         self.emit('control.main.change', e);\r\n        //         if(control.autoUpdateScene && !self.autoRenderMode && !self.controlChangeAnimateStatus){ \r\n        //             self.refresh();\r\n        //         }\r\n        //     });\r\n        // }\r\n        \r\n        return this;\r\n    },\r\n\r\n    updateControlSettings: function(settings){\r\n        assignWithout(this.control, settings, ['type']);\r\n        if(isObject(settings)){\r\n            for (const key in settings) {\r\n                if (Object.prototype.hasOwnProperty.call(settings, key)) {\r\n                    const vl = settings[key];\r\n                    if(key==\"enableDamping\"){\r\n                        this.controlEnableDamping = vl;\r\n                    }else if(key == \"enabled\"){\r\n                        this.enableControl = vl;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.emit({\r\n            type: \"controls.main.updated\",\r\n            control: this.control\r\n        })\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * tao control\r\n     * @param {object} options tham số + thuộc tính\r\n     */\r\n    addControl: function (options?:any) {\r\n        options.type = Str.replace(String(options.type || \"\").toLowerCase(), ['controls', 'control'], '');\r\n        var control = this.getControl(options);\r\n        control.__id = options.id || \"control_\" + Str.rand();\r\n        this.scene.add(control);\r\n        this.controlList[control.__id] = control;\r\n\r\n        return control;\r\n    },\r\n\r\n    /**\r\n     * Tạo nhiều control\r\n     * @param {array} controls \r\n     */\r\n    addControls: function (controls?:any[]) {\r\n        if (isArray(controls)) {\r\n            for (let i = 0; i < controls.length; i++) {\r\n                const ctlopt = controls[i];\r\n                if (isObject(ctlopt)) {\r\n                    this.addControl(ctlopt);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * lấy control từ ThreeJS\r\n     * @param {object} options thuộc tính và tham số\r\n     */\r\n    getControl: function (options?:any) {\r\n        if (!isObject(options) || isEmpty(options)) return null;\r\n        var self = this;\r\n        Props.parse(options);\r\n        var control;\r\n        var type = Str.replace(String(options.type || \"\").toLowerCase(), ['controls', 'controls'], '');\r\n        var p = options.params || options;\r\n\r\n        // device animatetion\r\n        // if (inArray(['deviceorientation', 'device'], type)) {\r\n        //     if (options.object) {\r\n        //         control = new DeviceOrientationControls(options.object);\r\n        //     }\r\n        // }\r\n\r\n        // else \r\n        if (inArray(['drag', 'drop'], type)) {\r\n            var dfo = objectValues(this.objects).map(function (o:any) { return o.object });\r\n            var params = Props.parseParams(p, {\r\n                objects: [...dfo], camera: this.camera, domElement: this.renderer.domElement\r\n            });\r\n            control = new DragControls(params.objects, params.camera, params.domElement);\r\n\r\n            control.addEventListener('dragstart', function (event) {\r\n\r\n                event.object.material.emissive.set(0xaaaaaa);\r\n\r\n            });\r\n\r\n            control.addEventListener('dragend', function (event) {\r\n\r\n                event.object.material.emissive.set(0x000000);\r\n\r\n            });\r\n        }\r\n\r\n        else if (inArray(['firstperson', 'fp', 'person'], type)) {\r\n            var params = Props.parseParams(p, {\r\n                camera: this.camera, domElement: this.renderer.domElement\r\n            });\r\n            control = new FirstPersonControls(params.camera, params.domElement);\r\n\r\n        }\r\n\r\n        else if (inArray(['fly', 'f'], type)) {\r\n            var params = Props.parseParams(p, {\r\n                camera: this.camera, domElement: this.renderer.domElement\r\n            });\r\n            control = new FlyControls(params.camera, params.domElement);\r\n\r\n        }\r\n\r\n        else if (inArray(['pointerlock', 'pointer', 'pl'], type)) {\r\n            var params = Props.parseParams(p, {\r\n                camera: this.camera, domElement: document.body\r\n            });\r\n            control = new PointerLockControls(params.camera, params.domElement);\r\n\r\n            var instructions = Dom('div.instructions',{\r\n                    onClick: function () {\r\n                        control.lock();\r\n                    }\r\n                },\r\n                [\r\n                    Dom('span', 'Click to play', {\r\n                        style: {\r\n                            fontSize: '14px'\r\n                        }\r\n                    }),\r\n                    Dom(\"br\"),\r\n                    Dom(\"br\"),\r\n                    'Move: WASD',\r\n                    Dom(\"br\"),\r\n                    'Jump: SPACE',\r\n                    Dom(\"br\"),\r\n                    'Look: MOUSE'\r\n                ]\r\n            );\r\n\r\n\r\n            var blocker = Dom('div.blocker', instructions);\r\n\r\n            document.body.appendChild(blocker.el);\r\n\r\n\r\n            control.addEventListener('lock', function () {\r\n\r\n                instructions.el.style.display = 'none';\r\n                blocker.el.style.display = 'none';\r\n\r\n            });\r\n\r\n\r\n            control.addEventListener('unlock', function () {\r\n\r\n                blocker.el.style.display = 'block';\r\n                instructions.el.style.display = '';\r\n\r\n            });\r\n\r\n        }\r\n\r\n        else if (inArray(['transform', 'tf'], type)) {\r\n            var params = Props.parseParams(p, {\r\n                camera: this.camera, domElement: this.renderer.domElement\r\n            });\r\n            control = new TransformControls(params.camera, params.domElement);\r\n\r\n            var orbit = self.getAddedControl(options.orbit);\r\n            if (!orbit) return false;\r\n\r\n            var cameraOrtho = self.getAddedCamera(options.ortho);\r\n            var cameraPersp = self.getAddedCamera(options.persp);\r\n            if (!orbit || !cameraOrtho || cameraPersp) return false;\r\n\r\n            control.addEventListener('change', function (e) {\r\n                self.refresh();\r\n            });\r\n\r\n            control.addEventListener('dragging-changed', function (event) {\r\n\r\n                orbit.enabled = !event.value;\r\n\r\n            });\r\n\r\n            if (options.mesh) {\r\n                var mesh;\r\n                if (typeof options.mesh == \"object\") {\r\n                    if (options.mesh.isMesh) {\r\n                        mesh = options.mesh;\r\n                        this.addToScene(mesh);\r\n                    } else {\r\n                        var id = this.addMesh(options.mesh);\r\n                        if (id) {\r\n                            mesh = this.getObject(id).object;\r\n                        }\r\n                    }\r\n                } else {\r\n                    var o = this.getObject(options.mesh);\r\n                    if (o) {\r\n                        mesh = o.object;\r\n                    }\r\n                }\r\n                if (mesh) {\r\n                    control.attach(mesh);\r\n                }\r\n            } else if (options.object) {\r\n                var mesh;\r\n                if (typeof options.object == \"object\") {\r\n                    if (options.object.isMesh) {\r\n                        mesh = options.object;\r\n                        this.addToScene(mesh);\r\n                    } else {\r\n                        var id = this.addMesh(options.object);\r\n                        if (id) {\r\n                            mesh = this.getObject(id).object;\r\n                        }\r\n                    }\r\n                } else {\r\n                    var o = this.getObject(options.object);\r\n                    if (o) {\r\n                        mesh = o.object;\r\n                    }\r\n                }\r\n                if (mesh) {\r\n                    control.attach(mesh);\r\n                }\r\n            }\r\n\r\n            window.addEventListener('keydown', function (event) {\r\n                switch (event.keyCode) {\r\n\r\n                    case 81: // Q\r\n                        control.setSpace(control.space === \"local\" ? \"world\" : \"local\");\r\n                        break;\r\n\r\n                    case 16: // Shift\r\n                        control.setTranslationSnap(100);\r\n                        control.setRotationSnap(THREE.MathUtils.degToRad(15));\r\n                        control.setScaleSnap(0.25);\r\n                        break;\r\n\r\n                    case 87: // W\r\n                        control.setMode(\"translate\");\r\n                        break;\r\n\r\n                    case 69: // E\r\n                        control.setMode(\"rotate\");\r\n                        break;\r\n\r\n                    case 82: // R\r\n                        control.setMode(\"scale\");\r\n                        break;\r\n\r\n                    case 67: // C\r\n                        const position = self.camera.position.clone();\r\n\r\n                        self.camera = self.camera.isPerspectiveCamera ? cameraOrtho : cameraPersp;\r\n                        self.camera.position.copy(position);\r\n\r\n                        orbit.object = self.camera;\r\n                        control.camera = self.camera;\r\n\r\n                        self.camera.lookAt(orbit.target.x, orbit.target.y, orbit.target.z);\r\n                        self.windowResize();\r\n                        break;\r\n\r\n                    case 86: // V\r\n                        const randomFoV = Math.random() + 0.1;\r\n                        const randomZoom = Math.random() + 0.1;\r\n\r\n                        cameraPersp.fov = randomFoV * 160;\r\n                        cameraOrtho.bottom = - randomFoV * 500;\r\n                        cameraOrtho.top = randomFoV * 500;\r\n\r\n                        cameraPersp.zoom = randomZoom * 5;\r\n                        cameraOrtho.zoom = randomZoom * 5;\r\n                        self.windowResize();\r\n                        break;\r\n\r\n                    case 187:\r\n                    case 107: // +, =, num+\r\n                        control.setSize(control.size + 0.1);\r\n                        break;\r\n\r\n                    case 189:\r\n                    case 109: // -, _, num-\r\n                        control.setSize(Math.max(control.size - 0.1, 0.1));\r\n                        break;\r\n\r\n                    case 88: // X\r\n                        control.showX = !control.showX;\r\n                        break;\r\n\r\n                    case 89: // Y\r\n                        control.showY = !control.showY;\r\n                        break;\r\n\r\n                    case 90: // Z\r\n                        control.showZ = !control.showZ;\r\n                        break;\r\n\r\n                    case 32: // Spacebar\r\n                        control.enabled = !control.enabled;\r\n                        break;\r\n\r\n                }\r\n\r\n            });\r\n\r\n            window.addEventListener('keyup', function (event) {\r\n\r\n                switch (event.keyCode) {\r\n\r\n                    case 16: // Shift\r\n                        control.setTranslationSnap(null);\r\n                        control.setRotationSnap(null);\r\n                        control.setScaleSnap(null);\r\n                        break;\r\n\r\n                }\r\n\r\n            });\r\n\r\n\r\n        }\r\n        else if (inArray(['editor', 'editorcontrols', 'ec'], type)) {\r\n            var params = Props.parseParams(p, {\r\n                camera: this.camera, domElement: this.renderer.domElement\r\n            });\r\n            control = new FlyControls(params.camera, params.domElement);\r\n\r\n        }\r\n\r\n        else {\r\n            control = new OrbitControls(this.camera, this.renderer.domElement);\r\n            // control.enableDamping = true;\r\n        }\r\n\r\n        \r\n        assignWithout(control, options, ['type', 'disabled', 'params', 'args', 'useMask']);\r\n        return control;\r\n    },\r\n\r\n    getAddedControl: function (id) {\r\n        return typeof this.controlList[id] != \"undefined\" ? this.controlList[id] : null;\r\n    },\r\n\r\n    setCurrentConttrolProp: function (prop, value) {\r\n        if (isString(prop)) {\r\n            this.control[prop] = value;\r\n        } else if (isObject(prop) && !isEmpty(prop)) {\r\n            assignValue(this.control, prop);\r\n        }\r\n    }\r\n};\r\n\r\nexport default Controls;\r\nexport {Controls};\r\n","import {\r\n\tBoxGeometry,\r\n\tBufferGeometry,\r\n\tCylinderGeometry,\r\n\tDoubleSide,\r\n\tEuler,\r\n\tFloat32BufferAttribute,\r\n\tLine,\r\n\tLineBasicMaterial,\r\n\tMatrix4,\r\n\tMesh,\r\n\tMeshBasicMaterial,\r\n\tObject3D,\r\n\tOctahedronGeometry,\r\n\tPlaneGeometry,\r\n\tQuaternion,\r\n\tRaycaster,\r\n\tSphereGeometry,\r\n\tTorusGeometry,\r\n\tVector3\r\n} from 'three';\r\n\r\nconst _raycaster = new Raycaster();\r\n\r\nconst _tempVector = new Vector3();\r\nconst _tempVector2 = new Vector3();\r\nconst _tempQuaternion = new Quaternion();\r\nconst _unit = {\r\n\tX: new Vector3( 1, 0, 0 ),\r\n\tY: new Vector3( 0, 1, 0 ),\r\n\tZ: new Vector3( 0, 0, 1 )\r\n};\r\n\r\nconst _changeEvent = { type: 'change' };\r\nconst _mouseDownEvent = { type: 'mouseDown' };\r\nconst _mouseUpEvent = { type: 'mouseUp', mode: null };\r\nconst _objectChangeEvent = { type: 'objectChange' };\r\n\r\nclass TransformControls extends Object3D {\r\n\r\n\tconstructor( camera, domElement ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tif ( domElement === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.TransformControls: The second parameter \"domElement\" is now mandatory.' );\r\n\t\t\tdomElement = document;\r\n\r\n\t\t}\r\n\r\n\t\tthis.visible = false;\r\n\t\tthis.domElement = domElement;\r\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\r\n\r\n\t\tconst _gizmo = new TransformControlsGizmo();\r\n\t\tthis._gizmo = _gizmo;\r\n\t\tthis.add( _gizmo );\r\n\r\n\t\tconst _plane = new TransformControlsPlane();\r\n\t\tthis._plane = _plane;\r\n\t\tthis.add( _plane );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\t// Defined getter, setter and store for a property\r\n\t\tfunction defineProperty( propName, defaultValue ) {\r\n\r\n\t\t\tlet propValue = defaultValue;\r\n\r\n\t\t\tObject.defineProperty( scope, propName, {\r\n\r\n\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\treturn propValue !== undefined ? propValue : defaultValue;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\t\tif ( propValue !== value ) {\r\n\r\n\t\t\t\t\t\tpropValue = value;\r\n\t\t\t\t\t\t_plane[ propName ] = value;\r\n\t\t\t\t\t\t_gizmo[ propName ] = value;\r\n\r\n\t\t\t\t\t\tscope.dispatchEvent( { type: propName + '-changed', value: value } );\r\n\t\t\t\t\t\tscope.dispatchEvent( _changeEvent );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tscope[ propName ] = defaultValue;\r\n\t\t\t_plane[ propName ] = defaultValue;\r\n\t\t\t_gizmo[ propName ] = defaultValue;\r\n\r\n\t\t}\r\n\r\n\t\t// Define properties with getters/setter\r\n\t\t// Setting the defined property will automatically trigger change event\r\n\t\t// Defined properties are passed down to gizmo and plane\r\n\r\n\t\tdefineProperty( 'camera', camera );\r\n\t\tdefineProperty( 'object', undefined );\r\n\t\tdefineProperty( 'enabled', true );\r\n\t\tdefineProperty( 'axis', null );\r\n\t\tdefineProperty( 'mode', 'translate' );\r\n\t\tdefineProperty( 'translationSnap', null );\r\n\t\tdefineProperty( 'rotationSnap', null );\r\n\t\tdefineProperty( 'scaleSnap', null );\r\n\t\tdefineProperty( 'space', 'world' );\r\n\t\tdefineProperty( 'size', 1 );\r\n\t\tdefineProperty( 'dragging', false );\r\n\t\tdefineProperty( 'showX', true );\r\n\t\tdefineProperty( 'showY', true );\r\n\t\tdefineProperty( 'showZ', true );\r\n\r\n\t\t// Reusable utility variables\r\n\r\n\t\tconst worldPosition = new Vector3();\r\n\t\tconst worldPositionStart = new Vector3();\r\n\t\tconst worldQuaternion = new Quaternion();\r\n\t\tconst worldQuaternionStart = new Quaternion();\r\n\t\tconst cameraPosition = new Vector3();\r\n\t\tconst cameraQuaternion = new Quaternion();\r\n\t\tconst pointStart = new Vector3();\r\n\t\tconst pointEnd = new Vector3();\r\n\t\tconst rotationAxis = new Vector3();\r\n\t\tconst rotationAngle = 0;\r\n\t\tconst eye = new Vector3();\r\n\r\n\t\t// TODO: remove properties unused in plane and gizmo\r\n\r\n\t\tdefineProperty( 'worldPosition', worldPosition );\r\n\t\tdefineProperty( 'worldPositionStart', worldPositionStart );\r\n\t\tdefineProperty( 'worldQuaternion', worldQuaternion );\r\n\t\tdefineProperty( 'worldQuaternionStart', worldQuaternionStart );\r\n\t\tdefineProperty( 'cameraPosition', cameraPosition );\r\n\t\tdefineProperty( 'cameraQuaternion', cameraQuaternion );\r\n\t\tdefineProperty( 'pointStart', pointStart );\r\n\t\tdefineProperty( 'pointEnd', pointEnd );\r\n\t\tdefineProperty( 'rotationAxis', rotationAxis );\r\n\t\tdefineProperty( 'rotationAngle', rotationAngle );\r\n\t\tdefineProperty( 'eye', eye );\r\n\r\n\t\tthis._offset = new Vector3();\r\n\t\tthis._startNorm = new Vector3();\r\n\t\tthis._endNorm = new Vector3();\r\n\t\tthis._cameraScale = new Vector3();\r\n\r\n\t\tthis._parentPosition = new Vector3();\r\n\t\tthis._parentQuaternion = new Quaternion();\r\n\t\tthis._parentQuaternionInv = new Quaternion();\r\n\t\tthis._parentScale = new Vector3();\r\n\r\n\t\tthis._worldScaleStart = new Vector3();\r\n\t\tthis._worldQuaternionInv = new Quaternion();\r\n\t\tthis._worldScale = new Vector3();\r\n\r\n\t\tthis._positionStart = new Vector3();\r\n\t\tthis._quaternionStart = new Quaternion();\r\n\t\tthis._scaleStart = new Vector3();\r\n\r\n\t\tthis._getPointer = getPointer.bind( this );\r\n\t\tthis._onPointerDown = onPointerDown.bind( this );\r\n\t\tthis._onPointerHover = onPointerHover.bind( this );\r\n\t\tthis._onPointerMove = onPointerMove.bind( this );\r\n\t\tthis._onPointerUp = onPointerUp.bind( this );\r\n\r\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\r\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerHover );\r\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\r\n\t\t/**\r\n\t\t * Truyền một sự kiện vào control\r\n\t\t * @param {string} name tên sự kiện\r\n\t\t * @param {Event} event Sự kiện\r\n\t\t */\r\n\t\t this.transferEventListenner = function (name, event) {\r\n\r\n\t\t\tif (typeof name == \"string\") {\r\n\t\t\t\tvar ev = name.toLowerCase();\r\n\t\t\t\tswitch (ev) {\r\n\r\n\t\t\t\t\tcase 'pointerdown':\r\n\t\t\t\t\t\tthis._onPointerDown(event);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'pointermove':\r\n\t\t\t\t\t\tthis._onPointerHover(event);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'pointerup':\r\n\t\t\t\t\t\tthis._onPointerUp(event);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.warn(name + \" event is not define\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.getEventList = () => [\r\n\t\t\t'pointerdown',\r\n\t\t\t'pointermove',\r\n\t\t\t'pointerup'\r\n\t\t];\r\n\t}\r\n\r\n\t// updateMatrixWorld  updates key transformation variables\r\n\tupdateMatrixWorld() {\r\n\r\n\t\tif ( this.object !== undefined ) {\r\n\r\n\t\t\tthis.object.updateMatrixWorld();\r\n\r\n\t\t\tif ( this.object.parent === null ) {\r\n\r\n\t\t\t\tconsole.error( 'TransformControls: The attached 3D object must be a part of the scene graph.' );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.object.parent.matrixWorld.decompose( this._parentPosition, this._parentQuaternion, this._parentScale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.object.matrixWorld.decompose( this.worldPosition, this.worldQuaternion, this._worldScale );\r\n\r\n\t\t\tthis._parentQuaternionInv.copy( this._parentQuaternion ).invert();\r\n\t\t\tthis._worldQuaternionInv.copy( this.worldQuaternion ).invert();\r\n\r\n\t\t}\r\n\r\n\t\tthis.camera.updateMatrixWorld();\r\n\t\tthis.camera.matrixWorld.decompose( this.cameraPosition, this.cameraQuaternion, this._cameraScale );\r\n\r\n\t\tthis.eye.copy( this.cameraPosition ).sub( this.worldPosition ).normalize();\r\n\r\n\t\tsuper.updateMatrixWorld( this );\r\n\r\n\t}\r\n\r\n\tpointerHover( pointer ) {\r\n\r\n\t\tif ( this.object === undefined || this.dragging === true ) return;\r\n\r\n\t\t_raycaster.setFromCamera( pointer, this.camera );\r\n\r\n\t\tconst intersect = intersectObjectWithRay( this._gizmo.picker[ this.mode ], _raycaster );\r\n\r\n\t\tif ( intersect ) {\r\n\r\n\t\t\tthis.axis = intersect.object.name;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.axis = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpointerDown( pointer ) {\r\n\r\n\t\tif ( this.object === undefined || this.dragging === true || pointer.button !== 0 ) return;\r\n\r\n\t\tif ( this.axis !== null ) {\r\n\r\n\t\t\t_raycaster.setFromCamera( pointer, this.camera );\r\n\r\n\t\t\tconst planeIntersect = intersectObjectWithRay( this._plane, _raycaster, true );\r\n\r\n\t\t\tif ( planeIntersect ) {\r\n\r\n\t\t\t\tthis.object.updateMatrixWorld();\r\n\t\t\t\tthis.object.parent.updateMatrixWorld();\r\n\r\n\t\t\t\tthis._positionStart.copy( this.object.position );\r\n\t\t\t\tthis._quaternionStart.copy( this.object.quaternion );\r\n\t\t\t\tthis._scaleStart.copy( this.object.scale );\r\n\r\n\t\t\t\tthis.object.matrixWorld.decompose( this.worldPositionStart, this.worldQuaternionStart, this._worldScaleStart );\r\n\r\n\t\t\t\tthis.pointStart.copy( planeIntersect.point ).sub( this.worldPositionStart );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.dragging = true;\r\n\t\t\t_mouseDownEvent.mode = this.mode;\r\n\t\t\tthis.dispatchEvent( _mouseDownEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpointerMove( pointer ) {\r\n\r\n\t\tconst axis = this.axis;\r\n\t\tconst mode = this.mode;\r\n\t\tconst object = this.object;\r\n\t\tlet space = this.space;\r\n\r\n\t\tif ( mode === 'scale' ) {\r\n\r\n\t\t\tspace = 'local';\r\n\r\n\t\t} else if ( axis === 'E' || axis === 'XYZE' || axis === 'XYZ' ) {\r\n\r\n\t\t\tspace = 'world';\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === undefined || axis === null || this.dragging === false || pointer.button !== - 1 ) return;\r\n\r\n\t\t_raycaster.setFromCamera( pointer, this.camera );\r\n\r\n\t\tconst planeIntersect = intersectObjectWithRay( this._plane, _raycaster, true );\r\n\r\n\t\tif ( ! planeIntersect ) return;\r\n\r\n\t\tthis.pointEnd.copy( planeIntersect.point ).sub( this.worldPositionStart );\r\n\r\n\t\tif ( mode === 'translate' ) {\r\n\r\n\t\t\t// Apply translate\r\n\r\n\t\t\tthis._offset.copy( this.pointEnd ).sub( this.pointStart );\r\n\r\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\r\n\r\n\t\t\t\tthis._offset.applyQuaternion( this._worldQuaternionInv );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( axis.indexOf( 'X' ) === - 1 ) this._offset.x = 0;\r\n\t\t\tif ( axis.indexOf( 'Y' ) === - 1 ) this._offset.y = 0;\r\n\t\t\tif ( axis.indexOf( 'Z' ) === - 1 ) this._offset.z = 0;\r\n\r\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\r\n\r\n\t\t\t\tthis._offset.applyQuaternion( this._quaternionStart ).divide( this._parentScale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._offset.applyQuaternion( this._parentQuaternionInv ).divide( this._parentScale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.position.copy( this._offset ).add( this._positionStart );\r\n\r\n\t\t\t// Apply translation snap\r\n\r\n\t\t\tif ( this.translationSnap ) {\r\n\r\n\t\t\t\tif ( space === 'local' ) {\r\n\r\n\t\t\t\t\tobject.position.applyQuaternion( _tempQuaternion.copy( this._quaternionStart ).invert() );\r\n\r\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject.position.applyQuaternion( this._quaternionStart );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( space === 'world' ) {\r\n\r\n\t\t\t\t\tif ( object.parent ) {\r\n\r\n\t\t\t\t\t\tobject.position.add( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\r\n\r\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( object.parent ) {\r\n\r\n\t\t\t\t\t\tobject.position.sub( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( mode === 'scale' ) {\r\n\r\n\t\t\tif ( axis.search( 'XYZ' ) !== - 1 ) {\r\n\r\n\t\t\t\tlet d = this.pointEnd.length() / this.pointStart.length();\r\n\r\n\t\t\t\tif ( this.pointEnd.dot( this.pointStart ) < 0 ) d *= - 1;\r\n\r\n\t\t\t\t_tempVector2.set( d, d, d );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_tempVector.copy( this.pointStart );\r\n\t\t\t\t_tempVector2.copy( this.pointEnd );\r\n\r\n\t\t\t\t_tempVector.applyQuaternion( this._worldQuaternionInv );\r\n\t\t\t\t_tempVector2.applyQuaternion( this._worldQuaternionInv );\r\n\r\n\t\t\t\t_tempVector2.divide( _tempVector );\r\n\r\n\t\t\t\tif ( axis.search( 'X' ) === - 1 ) {\r\n\r\n\t\t\t\t\t_tempVector2.x = 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( axis.search( 'Y' ) === - 1 ) {\r\n\r\n\t\t\t\t\t_tempVector2.y = 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( axis.search( 'Z' ) === - 1 ) {\r\n\r\n\t\t\t\t\t_tempVector2.z = 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Apply scale\r\n\r\n\t\t\tobject.scale.copy( this._scaleStart ).multiply( _tempVector2 );\r\n\r\n\t\t\tif ( this.scaleSnap ) {\r\n\r\n\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tobject.scale.x = Math.round( object.scale.x / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tobject.scale.y = Math.round( object.scale.y / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\r\n\r\n\t\t\t\t\tobject.scale.z = Math.round( object.scale.z / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( mode === 'rotate' ) {\r\n\r\n\t\t\tthis._offset.copy( this.pointEnd ).sub( this.pointStart );\r\n\r\n\t\t\tconst ROTATION_SPEED = 20 / this.worldPosition.distanceTo( _tempVector.setFromMatrixPosition( this.camera.matrixWorld ) );\r\n\r\n\t\t\tif ( axis === 'E' ) {\r\n\r\n\t\t\t\tthis.rotationAxis.copy( this.eye );\r\n\t\t\t\tthis.rotationAngle = this.pointEnd.angleTo( this.pointStart );\r\n\r\n\t\t\t\tthis._startNorm.copy( this.pointStart ).normalize();\r\n\t\t\t\tthis._endNorm.copy( this.pointEnd ).normalize();\r\n\r\n\t\t\t\tthis.rotationAngle *= ( this._endNorm.cross( this._startNorm ).dot( this.eye ) < 0 ? 1 : - 1 );\r\n\r\n\t\t\t} else if ( axis === 'XYZE' ) {\r\n\r\n\t\t\t\tthis.rotationAxis.copy( this._offset ).cross( this.eye ).normalize();\r\n\t\t\t\tthis.rotationAngle = this._offset.dot( _tempVector.copy( this.rotationAxis ).cross( this.eye ) ) * ROTATION_SPEED;\r\n\r\n\t\t\t} else if ( axis === 'X' || axis === 'Y' || axis === 'Z' ) {\r\n\r\n\t\t\t\tthis.rotationAxis.copy( _unit[ axis ] );\r\n\r\n\t\t\t\t_tempVector.copy( _unit[ axis ] );\r\n\r\n\t\t\t\tif ( space === 'local' ) {\r\n\r\n\t\t\t\t\t_tempVector.applyQuaternion( this.worldQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.rotationAngle = this._offset.dot( _tempVector.cross( this.eye ).normalize() ) * ROTATION_SPEED;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Apply rotation snap\r\n\r\n\t\t\tif ( this.rotationSnap ) this.rotationAngle = Math.round( this.rotationAngle / this.rotationSnap ) * this.rotationSnap;\r\n\r\n\t\t\t// Apply rotate\r\n\t\t\tif ( space === 'local' && axis !== 'E' && axis !== 'XYZE' ) {\r\n\r\n\t\t\t\tobject.quaternion.copy( this._quaternionStart );\r\n\t\t\t\tobject.quaternion.multiply( _tempQuaternion.setFromAxisAngle( this.rotationAxis, this.rotationAngle ) ).normalize();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.rotationAxis.applyQuaternion( this._parentQuaternionInv );\r\n\t\t\t\tobject.quaternion.copy( _tempQuaternion.setFromAxisAngle( this.rotationAxis, this.rotationAngle ) );\r\n\t\t\t\tobject.quaternion.multiply( this._quaternionStart ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.dispatchEvent( _changeEvent );\r\n\t\tthis.dispatchEvent( _objectChangeEvent );\r\n\r\n\t}\r\n\r\n\tpointerUp( pointer ) {\r\n\r\n\t\tif ( pointer.button !== 0 ) return;\r\n\r\n\t\tif ( this.dragging && ( this.axis !== null ) ) {\r\n\r\n\t\t\t_mouseUpEvent.mode = this.mode;\r\n\t\t\tthis.dispatchEvent( _mouseUpEvent );\r\n\r\n\t\t}\r\n\r\n\t\tthis.dragging = false;\r\n\t\tthis.axis = null;\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\r\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerHover );\r\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\r\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\r\n\r\n\t\tthis.traverse( function ( child ) {\r\n\r\n\t\t\tif ( child.geometry ) child.geometry.dispose();\r\n\t\t\tif ( child.material ) child.material.dispose();\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\t// Set current object\r\n\tattach( object ) {\r\n\r\n\t\tthis.object = object;\r\n\t\tthis.visible = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t// Detatch from object\r\n\tdetach() {\r\n\r\n\t\tthis.object = undefined;\r\n\t\tthis.visible = false;\r\n\t\tthis.axis = null;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\tgetRaycaster() {\r\n\r\n\t\treturn _raycaster;\r\n\r\n\t}\r\n\r\n\t// TODO: deprecate\r\n\r\n\tgetMode() {\r\n\r\n\t\treturn this.mode;\r\n\r\n\t}\r\n\r\n\tsetMode( mode ) {\r\n\r\n\t\tthis.mode = mode;\r\n\r\n\t}\r\n\r\n\tsetTranslationSnap( translationSnap ) {\r\n\r\n\t\tthis.translationSnap = translationSnap;\r\n\r\n\t}\r\n\r\n\tsetRotationSnap( rotationSnap ) {\r\n\r\n\t\tthis.rotationSnap = rotationSnap;\r\n\r\n\t}\r\n\r\n\tsetScaleSnap( scaleSnap ) {\r\n\r\n\t\tthis.scaleSnap = scaleSnap;\r\n\r\n\t}\r\n\r\n\tsetSize( size ) {\r\n\r\n\t\tthis.size = size;\r\n\r\n\t}\r\n\r\n\tsetSpace( space ) {\r\n\r\n\t\tthis.space = space;\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tconsole.warn( 'THREE.TransformControls: update function has no more functionality and therefore has been deprecated.' );\r\n\r\n\t}\r\n\r\n}\r\n\r\nTransformControls.prototype.isTransformControls = true;\r\n\r\n// mouse / touch event handlers\r\n\r\nfunction getPointer( event ) {\r\n\r\n\tif ( this.domElement.ownerDocument.pointerLockElement ) {\r\n\r\n\t\treturn {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tbutton: event.button\r\n\t\t};\r\n\r\n\t} else {\r\n\r\n\t\tconst rect = this.domElement.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\tx: ( event.clientX - rect.left ) / rect.width * 2 - 1,\r\n\t\t\ty: - ( event.clientY - rect.top ) / rect.height * 2 + 1,\r\n\t\t\tbutton: event.button\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction onPointerHover( event ) {\r\n\r\n\tif ( ! this.enabled ) return;\r\n\r\n\tswitch ( event.pointerType ) {\r\n\r\n\t\tcase 'mouse':\r\n\t\tcase 'pen':\r\n\t\t\tthis.pointerHover( this._getPointer( event ) );\r\n\t\t\tbreak;\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction onPointerDown( event ) {\r\n\r\n\tif ( ! this.enabled ) return;\r\n\r\n\tthis.domElement.setPointerCapture( event.pointerId );\r\n\r\n\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\r\n\r\n\tthis.pointerHover( this._getPointer( event ) );\r\n\tthis.pointerDown( this._getPointer( event ) );\r\n\r\n}\r\n\r\nfunction onPointerMove( event ) {\r\n\r\n\tif ( ! this.enabled ) return;\r\n\r\n\tthis.pointerMove( this._getPointer( event ) );\r\n\r\n}\r\n\r\nfunction onPointerUp( event ) {\r\n\r\n\tif ( ! this.enabled ) return;\r\n\r\n\tthis.domElement.releasePointerCapture( event.pointerId );\r\n\r\n\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\r\n\r\n\tthis.pointerUp( this._getPointer( event ) );\r\n\r\n}\r\n\r\nfunction intersectObjectWithRay( object, raycaster, includeInvisible ) {\r\n\r\n\tconst allIntersections = raycaster.intersectObject( object, true );\r\n\r\n\tfor ( let i = 0; i < allIntersections.length; i ++ ) {\r\n\r\n\t\tif ( allIntersections[ i ].object.visible || includeInvisible ) {\r\n\r\n\t\t\treturn allIntersections[ i ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\n//\r\n\r\n// Reusable utility variables\r\n\r\nconst _tempEuler = new Euler();\r\nconst _alignVector = new Vector3( 0, 1, 0 );\r\nconst _zeroVector = new Vector3( 0, 0, 0 );\r\nconst _lookAtMatrix = new Matrix4();\r\nconst _tempQuaternion2 = new Quaternion();\r\nconst _identityQuaternion = new Quaternion();\r\nconst _dirVector = new Vector3();\r\nconst _tempMatrix = new Matrix4();\r\n\r\nconst _unitX = new Vector3( 1, 0, 0 );\r\nconst _unitY = new Vector3( 0, 1, 0 );\r\nconst _unitZ = new Vector3( 0, 0, 1 );\r\n\r\nconst _v1 = new Vector3();\r\nconst _v2 = new Vector3();\r\nconst _v3 = new Vector3();\r\n\r\nclass TransformControlsGizmo extends Object3D {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.type = 'TransformControlsGizmo';\r\n\r\n\t\t// shared materials\r\n\r\n\t\tconst gizmoMaterial = new MeshBasicMaterial( {\r\n\t\t\tdepthTest: false,\r\n\t\t\tdepthWrite: false,\r\n\t\t\tfog: false,\r\n\t\t\ttoneMapped: false,\r\n\t\t\ttransparent: true\r\n\t\t} );\r\n\r\n\t\tconst gizmoLineMaterial = new LineBasicMaterial( {\r\n\t\t\tdepthTest: false,\r\n\t\t\tdepthWrite: false,\r\n\t\t\tfog: false,\r\n\t\t\ttoneMapped: false,\r\n\t\t\ttransparent: true\r\n\t\t} );\r\n\r\n\t\t// Make unique material for each axis/color\r\n\r\n\t\tconst matInvisible = gizmoMaterial.clone();\r\n\t\tmatInvisible.opacity = 0.15;\r\n\r\n\t\tconst matHelper = gizmoLineMaterial.clone();\r\n\t\tmatHelper.opacity = 0.5;\r\n\r\n\t\tconst matRed = gizmoMaterial.clone();\r\n\t\tmatRed.color.setHex( 0xff0000 );\r\n\r\n\t\tconst matGreen = gizmoMaterial.clone();\r\n\t\tmatGreen.color.setHex( 0x00ff00 );\r\n\r\n\t\tconst matBlue = gizmoMaterial.clone();\r\n\t\tmatBlue.color.setHex( 0x0000ff );\r\n\r\n\t\tconst matRedTransparent = gizmoMaterial.clone();\r\n\t\tmatRedTransparent.color.setHex( 0xff0000 );\r\n\t\tmatRedTransparent.opacity = 0.5;\r\n\r\n\t\tconst matGreenTransparent = gizmoMaterial.clone();\r\n\t\tmatGreenTransparent.color.setHex( 0x00ff00 );\r\n\t\tmatGreenTransparent.opacity = 0.5;\r\n\r\n\t\tconst matBlueTransparent = gizmoMaterial.clone();\r\n\t\tmatBlueTransparent.color.setHex( 0x0000ff );\r\n\t\tmatBlueTransparent.opacity = 0.5;\r\n\r\n\t\tconst matWhiteTransparent = gizmoMaterial.clone();\r\n\t\tmatWhiteTransparent.opacity = 0.25;\r\n\r\n\t\tconst matYellowTransparent = gizmoMaterial.clone();\r\n\t\tmatYellowTransparent.color.setHex( 0xffff00 );\r\n\t\tmatYellowTransparent.opacity = 0.25;\r\n\r\n\t\tconst matYellow = gizmoMaterial.clone();\r\n\t\tmatYellow.color.setHex( 0xffff00 );\r\n\r\n\t\tconst matGray = gizmoMaterial.clone();\r\n\t\tmatGray.color.setHex( 0x787878 );\r\n\r\n\t\t// reusable geometry\r\n\r\n\t\tconst arrowGeometry = new CylinderGeometry( 0, 0.04, 0.1, 12 );\r\n\t\tarrowGeometry.translate( 0, 0.05, 0 );\r\n\r\n\t\tconst scaleHandleGeometry = new BoxGeometry( 0.08, 0.08, 0.08 );\r\n\t\tscaleHandleGeometry.translate( 0, 0.04, 0 );\r\n\r\n\t\tconst lineGeometry = new BufferGeometry();\r\n\t\tlineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0,\t1, 0, 0 ], 3 ) );\r\n\r\n\t\tconst lineGeometry2 = new CylinderGeometry( 0.0075, 0.0075, 0.5, 3 );\r\n\t\tlineGeometry2.translate( 0, 0.25, 0 );\r\n\r\n\t\tfunction CircleGeometry( radius, arc ) {\r\n\r\n\t\t\tconst geometry = new TorusGeometry( radius, 0.0075, 3, 64, arc * Math.PI * 2 );\r\n\t\t\tgeometry.rotateY( Math.PI / 2 );\r\n\t\t\tgeometry.rotateX( Math.PI / 2 );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\t// Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\r\n\r\n\t\tfunction TranslateHelperGeometry() {\r\n\r\n\t\t\tconst geometry = new BufferGeometry();\r\n\r\n\t\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 1, 1, 1 ], 3 ) );\r\n\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\t// Gizmo definitions - custom hierarchy definitions for setupGizmo() function\r\n\r\n\t\tconst gizmoTranslate = {\r\n\t\t\tX: [\r\n\t\t\t\t[ new Mesh( arrowGeometry, matRed ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\r\n\t\t\t\t[ new Mesh( arrowGeometry, matRed ), [ - 0.5, 0, 0 ], [ 0, 0, Math.PI / 2 ]],\r\n\t\t\t\t[ new Mesh( lineGeometry2, matRed ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]]\r\n\t\t\t],\r\n\t\t\tY: [\r\n\t\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, 0.5, 0 ]],\r\n\t\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, - 0.5, 0 ], [ Math.PI, 0, 0 ]],\r\n\t\t\t\t[ new Mesh( lineGeometry2, matGreen ) ]\r\n\t\t\t],\r\n\t\t\tZ: [\r\n\t\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]],\r\n\t\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, - 0.5 ], [ - Math.PI / 2, 0, 0 ]],\r\n\t\t\t\t[ new Mesh( lineGeometry2, matBlue ), null, [ Math.PI / 2, 0, 0 ]]\r\n\t\t\t],\r\n\t\t\tXYZ: [\r\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.1, 0 ), matWhiteTransparent.clone() ), [ 0, 0, 0 ]]\r\n\t\t\t],\r\n\t\t\tXY: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matBlueTransparent.clone() ), [ 0.15, 0.15, 0 ]]\r\n\t\t\t],\r\n\t\t\tYZ: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matRedTransparent.clone() ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\r\n\t\t\t],\r\n\t\t\tXZ: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matGreenTransparent.clone() ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tconst pickerTranslate = {\r\n\t\t\tX: [\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0.3, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ - 0.3, 0, 0 ], [ 0, 0, Math.PI / 2 ]]\r\n\t\t\t],\r\n\t\t\tY: [\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0.3, 0 ]],\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, - 0.3, 0 ], [ 0, 0, Math.PI ]]\r\n\t\t\t],\r\n\t\t\tZ: [\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, 0.3 ], [ Math.PI / 2, 0, 0 ]],\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, - 0.3 ], [ - Math.PI / 2, 0, 0 ]]\r\n\t\t\t],\r\n\t\t\tXYZ: [\r\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.2, 0 ), matInvisible ) ]\r\n\t\t\t],\r\n\t\t\tXY: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0.15, 0 ]]\r\n\t\t\t],\r\n\t\t\tYZ: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\r\n\t\t\t],\r\n\t\t\tXZ: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tconst helperTranslate = {\r\n\t\t\tSTART: [\r\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\r\n\t\t\t],\r\n\t\t\tEND: [\r\n\t\t\t\t[ new Mesh( new OctahedronGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\r\n\t\t\t],\r\n\t\t\tDELTA: [\r\n\t\t\t\t[ new Line( TranslateHelperGeometry(), matHelper ), null, null, null, 'helper' ]\r\n\t\t\t],\r\n\t\t\tX: [\r\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t\t],\r\n\t\t\tY: [\r\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t\t],\r\n\t\t\tZ: [\r\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tconst gizmoRotate = {\r\n\t\t\tXYZE: [\r\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 1 ), matGray ), null, [ 0, Math.PI / 2, 0 ]]\r\n\t\t\t],\r\n\t\t\tX: [\r\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matRed ) ]\r\n\t\t\t],\r\n\t\t\tY: [\r\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matGreen ), null, [ 0, 0, - Math.PI / 2 ]]\r\n\t\t\t],\r\n\t\t\tZ: [\r\n\t\t\t\t[ new Mesh( CircleGeometry( 0.5, 0.5 ), matBlue ), null, [ 0, Math.PI / 2, 0 ]]\r\n\t\t\t],\r\n\t\t\tE: [\r\n\t\t\t\t[ new Mesh( CircleGeometry( 0.75, 1 ), matYellowTransparent ), null, [ 0, Math.PI / 2, 0 ]]\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tconst helperRotate = {\r\n\t\t\tAXIS: [\r\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tconst pickerRotate = {\r\n\t\t\tXYZE: [\r\n\t\t\t\t[ new Mesh( new SphereGeometry( 0.25, 10, 8 ), matInvisible ) ]\r\n\t\t\t],\r\n\t\t\tX: [\r\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, - Math.PI / 2, - Math.PI / 2 ]],\r\n\t\t\t],\r\n\t\t\tY: [\r\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\r\n\t\t\t],\r\n\t\t\tZ: [\r\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.5, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\r\n\t\t\t],\r\n\t\t\tE: [\r\n\t\t\t\t[ new Mesh( new TorusGeometry( 0.75, 0.1, 2, 24 ), matInvisible ) ]\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tconst gizmoScale = {\r\n\t\t\tX: [\r\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\r\n\t\t\t\t[ new Mesh( lineGeometry2, matRed ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\r\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ - 0.5, 0, 0 ], [ 0, 0, Math.PI / 2 ]],\r\n\t\t\t],\r\n\t\t\tY: [\r\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, 0.5, 0 ]],\r\n\t\t\t\t[ new Mesh( lineGeometry2, matGreen ) ],\r\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, - 0.5, 0 ], [ 0, 0, Math.PI ]],\r\n\t\t\t],\r\n\t\t\tZ: [\r\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]],\r\n\t\t\t\t[ new Mesh( lineGeometry2, matBlue ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\r\n\t\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, - 0.5 ], [ - Math.PI / 2, 0, 0 ]]\r\n\t\t\t],\r\n\t\t\tXY: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matBlueTransparent ), [ 0.15, 0.15, 0 ]]\r\n\t\t\t],\r\n\t\t\tYZ: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matRedTransparent ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]]\r\n\t\t\t],\r\n\t\t\tXZ: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.15, 0.15, 0.01 ), matGreenTransparent ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]]\r\n\t\t\t],\r\n\t\t\tXYZ: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.1, 0.1, 0.1 ), matWhiteTransparent.clone() ) ],\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tconst pickerScale = {\r\n\t\t\tX: [\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0.3, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ - 0.3, 0, 0 ], [ 0, 0, Math.PI / 2 ]]\r\n\t\t\t],\r\n\t\t\tY: [\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0.3, 0 ]],\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, - 0.3, 0 ], [ 0, 0, Math.PI ]]\r\n\t\t\t],\r\n\t\t\tZ: [\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, 0.3 ], [ Math.PI / 2, 0, 0 ]],\r\n\t\t\t\t[ new Mesh( new CylinderGeometry( 0.2, 0, 0.6, 4 ), matInvisible ), [ 0, 0, - 0.3 ], [ - Math.PI / 2, 0, 0 ]]\r\n\t\t\t],\r\n\t\t\tXY: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0.15, 0 ]],\r\n\t\t\t],\r\n\t\t\tYZ: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]],\r\n\t\t\t],\r\n\t\t\tXZ: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.01 ), matInvisible ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]],\r\n\t\t\t],\r\n\t\t\tXYZ: [\r\n\t\t\t\t[ new Mesh( new BoxGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 0, 0, 0 ]],\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tconst helperScale = {\r\n\t\t\tX: [\r\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t\t],\r\n\t\t\tY: [\r\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t\t],\r\n\t\t\tZ: [\r\n\t\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\t// Creates an Object3D with gizmos described in custom hierarchy definition.\r\n\r\n\t\tfunction setupGizmo( gizmoMap ) {\r\n\r\n\t\t\tconst gizmo = new Object3D();\r\n\r\n\t\t\tfor ( const name in gizmoMap ) {\r\n\r\n\t\t\t\tfor ( let i = gizmoMap[ name ].length; i --; ) {\r\n\r\n\t\t\t\t\tconst object = gizmoMap[ name ][ i ][ 0 ].clone();\r\n\t\t\t\t\tconst position = gizmoMap[ name ][ i ][ 1 ];\r\n\t\t\t\t\tconst rotation = gizmoMap[ name ][ i ][ 2 ];\r\n\t\t\t\t\tconst scale = gizmoMap[ name ][ i ][ 3 ];\r\n\t\t\t\t\tconst tag = gizmoMap[ name ][ i ][ 4 ];\r\n\r\n\t\t\t\t\t// name and tag properties are essential for picking and updating logic.\r\n\t\t\t\t\tobject.name = name;\r\n\t\t\t\t\tobject.tag = tag;\r\n\r\n\t\t\t\t\tif ( position ) {\r\n\r\n\t\t\t\t\t\tobject.position.set( position[ 0 ], position[ 1 ], position[ 2 ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( rotation ) {\r\n\r\n\t\t\t\t\t\tobject.rotation.set( rotation[ 0 ], rotation[ 1 ], rotation[ 2 ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( scale ) {\r\n\r\n\t\t\t\t\t\tobject.scale.set( scale[ 0 ], scale[ 1 ], scale[ 2 ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobject.updateMatrix();\r\n\r\n\t\t\t\t\tconst tempGeometry = object.geometry.clone();\r\n\t\t\t\t\ttempGeometry.applyMatrix4( object.matrix );\r\n\t\t\t\t\tobject.geometry = tempGeometry;\r\n\t\t\t\t\tobject.renderOrder = Infinity;\r\n\r\n\t\t\t\t\tobject.position.set( 0, 0, 0 );\r\n\t\t\t\t\tobject.rotation.set( 0, 0, 0 );\r\n\t\t\t\t\tobject.scale.set( 1, 1, 1 );\r\n\r\n\t\t\t\t\tgizmo.add( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn gizmo;\r\n\r\n\t\t}\r\n\r\n\t\t// Gizmo creation\r\n\r\n\t\tthis.gizmo = {};\r\n\t\tthis.picker = {};\r\n\t\tthis.helper = {};\r\n\r\n\t\tthis.add( this.gizmo[ 'translate' ] = setupGizmo( gizmoTranslate ) );\r\n\t\tthis.add( this.gizmo[ 'rotate' ] = setupGizmo( gizmoRotate ) );\r\n\t\tthis.add( this.gizmo[ 'scale' ] = setupGizmo( gizmoScale ) );\r\n\t\tthis.add( this.picker[ 'translate' ] = setupGizmo( pickerTranslate ) );\r\n\t\tthis.add( this.picker[ 'rotate' ] = setupGizmo( pickerRotate ) );\r\n\t\tthis.add( this.picker[ 'scale' ] = setupGizmo( pickerScale ) );\r\n\t\tthis.add( this.helper[ 'translate' ] = setupGizmo( helperTranslate ) );\r\n\t\tthis.add( this.helper[ 'rotate' ] = setupGizmo( helperRotate ) );\r\n\t\tthis.add( this.helper[ 'scale' ] = setupGizmo( helperScale ) );\r\n\r\n\t\t// Pickers should be hidden always\r\n\r\n\t\tthis.picker[ 'translate' ].visible = false;\r\n\t\tthis.picker[ 'rotate' ].visible = false;\r\n\t\tthis.picker[ 'scale' ].visible = false;\r\n\r\n\t}\r\n\r\n\t// updateMatrixWorld will update transformations and appearance of individual handles\r\n\r\n\tupdateMatrixWorld( force ) {\r\n\r\n\t\tconst space = ( this.mode === 'scale' ) ? 'local' : this.space; // scale always oriented to local rotation\r\n\r\n\t\tconst quaternion = ( space === 'local' ) ? this.worldQuaternion : _identityQuaternion;\r\n\r\n\t\t// Show only gizmos for current transform mode\r\n\r\n\t\tthis.gizmo[ 'translate' ].visible = this.mode === 'translate';\r\n\t\tthis.gizmo[ 'rotate' ].visible = this.mode === 'rotate';\r\n\t\tthis.gizmo[ 'scale' ].visible = this.mode === 'scale';\r\n\r\n\t\tthis.helper[ 'translate' ].visible = this.mode === 'translate';\r\n\t\tthis.helper[ 'rotate' ].visible = this.mode === 'rotate';\r\n\t\tthis.helper[ 'scale' ].visible = this.mode === 'scale';\r\n\r\n\r\n\t\tlet handles = [];\r\n\t\thandles = handles.concat( this.picker[ this.mode ].children );\r\n\t\thandles = handles.concat( this.gizmo[ this.mode ].children );\r\n\t\thandles = handles.concat( this.helper[ this.mode ].children );\r\n\r\n\t\tfor ( let i = 0; i < handles.length; i ++ ) {\r\n\r\n\t\t\tconst handle = handles[ i ];\r\n\r\n\t\t\t// hide aligned to camera\r\n\r\n\t\t\thandle.visible = true;\r\n\t\t\thandle.rotation.set( 0, 0, 0 );\r\n\t\t\thandle.position.copy( this.worldPosition );\r\n\r\n\t\t\tlet factor;\r\n\r\n\t\t\tif ( this.camera.isOrthographicCamera ) {\r\n\r\n\t\t\t\tfactor = ( this.camera.top - this.camera.bottom ) / this.camera.zoom;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfactor = this.worldPosition.distanceTo( this.cameraPosition ) * Math.min( 1.9 * Math.tan( Math.PI * this.camera.fov / 360 ) / this.camera.zoom, 7 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\thandle.scale.set( 1, 1, 1 ).multiplyScalar( factor * this.size / 4 );\r\n\r\n\t\t\t// TODO: simplify helpers and consider decoupling from gizmo\r\n\r\n\t\t\tif ( handle.tag === 'helper' ) {\r\n\r\n\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\tif ( handle.name === 'AXIS' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\t\t\t\t\thandle.visible = !! this.axis;\r\n\r\n\t\t\t\t\tif ( this.axis === 'X' ) {\r\n\r\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, 0, 0 ) );\r\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\r\n\r\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'Y' ) {\r\n\r\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, 0, Math.PI / 2 ) );\r\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\r\n\r\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'Z' ) {\r\n\r\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, Math.PI / 2, 0 ) );\r\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( _tempQuaternion );\r\n\r\n\t\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\r\n\r\n\t\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'XYZE' ) {\r\n\r\n\t\t\t\t\t\t_tempQuaternion.setFromEuler( _tempEuler.set( 0, Math.PI / 2, 0 ) );\r\n\t\t\t\t\t\t_alignVector.copy( this.rotationAxis );\r\n\t\t\t\t\t\thandle.quaternion.setFromRotationMatrix( _lookAtMatrix.lookAt( _zeroVector, _alignVector, _unitY ) );\r\n\t\t\t\t\t\thandle.quaternion.multiply( _tempQuaternion );\r\n\t\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis === 'E' ) {\r\n\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} else if ( handle.name === 'START' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t} else if ( handle.name === 'END' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPosition );\r\n\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t} else if ( handle.name === 'DELTA' ) {\r\n\r\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\t\t\t\t\thandle.quaternion.copy( this.worldQuaternionStart );\r\n\t\t\t\t\t_tempVector.set( 1e-10, 1e-10, 1e-10 ).add( this.worldPositionStart ).sub( this.worldPosition ).multiplyScalar( - 1 );\r\n\t\t\t\t\t_tempVector.applyQuaternion( this.worldQuaternionStart.clone().invert() );\r\n\t\t\t\t\thandle.scale.copy( _tempVector );\r\n\t\t\t\t\thandle.visible = this.dragging;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\thandle.quaternion.copy( quaternion );\r\n\r\n\t\t\t\t\tif ( this.dragging ) {\r\n\r\n\t\t\t\t\t\thandle.position.copy( this.worldPositionStart );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\thandle.position.copy( this.worldPosition );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( this.axis ) {\r\n\r\n\t\t\t\t\t\thandle.visible = this.axis.search( handle.name ) !== - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If updating helper, skip rest of the loop\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Align handles to current local or world rotation\r\n\r\n\t\t\thandle.quaternion.copy( quaternion );\r\n\r\n\t\t\tif ( this.mode === 'translate' || this.mode === 'scale' ) {\r\n\r\n\t\t\t\t// Hide translate and scale axis facing the camera\r\n\r\n\t\t\t\tconst AXIS_HIDE_TRESHOLD = 0.99;\r\n\t\t\t\tconst PLANE_HIDE_TRESHOLD = 0.2;\r\n\r\n\t\t\t\tif ( handle.name === 'X' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'Y' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'Z' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'XY' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'YZ' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'XZ' ) {\r\n\r\n\t\t\t\t\tif ( Math.abs( _alignVector.copy( _unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_TRESHOLD ) {\r\n\r\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\r\n\t\t\t\t\t\thandle.visible = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( this.mode === 'rotate' ) {\r\n\r\n\t\t\t\t// Align handles to current local or world rotation\r\n\r\n\t\t\t\t_tempQuaternion2.copy( quaternion );\r\n\t\t\t\t_alignVector.copy( this.eye ).applyQuaternion( _tempQuaternion.copy( quaternion ).invert() );\r\n\r\n\t\t\t\tif ( handle.name.search( 'E' ) !== - 1 ) {\r\n\r\n\t\t\t\t\thandle.quaternion.setFromRotationMatrix( _lookAtMatrix.lookAt( this.eye, _zeroVector, _unitY ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'X' ) {\r\n\r\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitX, Math.atan2( - _alignVector.y, _alignVector.z ) );\r\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\r\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'Y' ) {\r\n\r\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitY, Math.atan2( _alignVector.x, _alignVector.z ) );\r\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\r\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( handle.name === 'Z' ) {\r\n\r\n\t\t\t\t\t_tempQuaternion.setFromAxisAngle( _unitZ, Math.atan2( _alignVector.y, _alignVector.x ) );\r\n\t\t\t\t\t_tempQuaternion.multiplyQuaternions( _tempQuaternion2, _tempQuaternion );\r\n\t\t\t\t\thandle.quaternion.copy( _tempQuaternion );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Hide disabled axes\r\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'X' ) === - 1 || this.showX );\r\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'Y' ) === - 1 || this.showY );\r\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'Z' ) === - 1 || this.showZ );\r\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( 'E' ) === - 1 || ( this.showX && this.showY && this.showZ ) );\r\n\r\n\t\t\t// highlight selected axis\r\n\r\n\t\t\thandle.material._color = handle.material._color || handle.material.color.clone();\r\n\t\t\thandle.material._opacity = handle.material._opacity || handle.material.opacity;\r\n\r\n\t\t\thandle.material.color.copy( handle.material._color );\r\n\t\t\thandle.material.opacity = handle.material._opacity;\r\n\r\n\t\t\tif ( this.enabled && this.axis ) {\r\n\r\n\t\t\t\tif ( handle.name === this.axis ) {\r\n\r\n\t\t\t\t\thandle.material.color.setHex( 0xffff00 );\r\n\t\t\t\t\thandle.material.opacity = 1.0;\r\n\r\n\t\t\t\t} else if ( this.axis.split( '' ).some( function ( a ) {\r\n\r\n\t\t\t\t\treturn handle.name === a;\r\n\r\n\t\t\t\t} ) ) {\r\n\r\n\t\t\t\t\thandle.material.color.setHex( 0xffff00 );\r\n\t\t\t\t\thandle.material.opacity = 1.0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tsuper.updateMatrixWorld( force );\r\n\r\n\t}\r\n\r\n}\r\n\r\nTransformControlsGizmo.prototype.isTransformControlsGizmo = true;\r\n\r\n//\r\n\r\nclass TransformControlsPlane extends Mesh {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper(\r\n\t\t\tnew PlaneGeometry( 100000, 100000, 2, 2 ),\r\n\t\t\tnew MeshBasicMaterial( { visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1, toneMapped: false } )\r\n\t\t);\r\n\r\n\t\tthis.type = 'TransformControlsPlane';\r\n\r\n\t}\r\n\r\n\tupdateMatrixWorld( force ) {\r\n\r\n\t\tlet space = this.space;\r\n\r\n\t\tthis.position.copy( this.worldPosition );\r\n\r\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\r\n\r\n\t\t_v1.copy( _unitX ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\r\n\t\t_v2.copy( _unitY ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\r\n\t\t_v3.copy( _unitZ ).applyQuaternion( space === 'local' ? this.worldQuaternion : _identityQuaternion );\r\n\r\n\t\t// Align the plane for current transform mode, axis and space.\r\n\r\n\t\t_alignVector.copy( _v2 );\r\n\r\n\t\tswitch ( this.mode ) {\r\n\r\n\t\t\tcase 'translate':\r\n\t\t\tcase 'scale':\r\n\t\t\t\tswitch ( this.axis ) {\r\n\r\n\t\t\t\t\tcase 'X':\r\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v1 );\r\n\t\t\t\t\t\t_dirVector.copy( _v1 ).cross( _alignVector );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Y':\r\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v2 );\r\n\t\t\t\t\t\t_dirVector.copy( _v2 ).cross( _alignVector );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Z':\r\n\t\t\t\t\t\t_alignVector.copy( this.eye ).cross( _v3 );\r\n\t\t\t\t\t\t_dirVector.copy( _v3 ).cross( _alignVector );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'XY':\r\n\t\t\t\t\t\t_dirVector.copy( _v3 );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'YZ':\r\n\t\t\t\t\t\t_dirVector.copy( _v1 );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'XZ':\r\n\t\t\t\t\t\t_alignVector.copy( _v3 );\r\n\t\t\t\t\t\t_dirVector.copy( _v2 );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'XYZ':\r\n\t\t\t\t\tcase 'E':\r\n\t\t\t\t\t\t_dirVector.set( 0, 0, 0 );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'rotate':\r\n\t\t\tdefault:\r\n\t\t\t\t// special case for rotate\r\n\t\t\t\t_dirVector.set( 0, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( _dirVector.length() === 0 ) {\r\n\r\n\t\t\t// If in rotate mode, make the plane parallel to camera\r\n\t\t\tthis.quaternion.copy( this.cameraQuaternion );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_tempMatrix.lookAt( _tempVector.set( 0, 0, 0 ), _dirVector, _alignVector );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( _tempMatrix );\r\n\r\n\t\t}\r\n\r\n\t\tsuper.updateMatrixWorld( force );\r\n\r\n\t}\r\n\r\n}\r\n\r\nTransformControlsPlane.prototype.isTransformControlsPlane = true;\r\n\r\nexport { TransformControls, TransformControlsGizmo, TransformControlsPlane };\r\n","import { Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { isArray, isNumber, isObject, isString } from '@app/_core/helpers/utils';\nimport { BaseInputComponent } from '../base-input/base-input.component';\n\n@Component({\n    selector: 'inp-radio',\n    templateUrl: './inp-radio.component.html',\n    styleUrls: ['./inp-radio.component.scss']\n})\nexport class InpRadioComponent extends BaseInputComponent implements OnInit, OnChanges {\n\n    @Input() options: any;\n    _options: Array<{ label: string, value: string }> = [];\n    constructor() {\n        super();\n    }\n\n\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.options) {\n            this.syncFromParent();\n        }\n\n    }\n\n\n    ngOnInit(): void {\n        this.syncFromParent();\n\n    }\n\n    syncFromParent() {\n        let hasValue = false;\n        if (isArray(this.options)) {\n            this._options = [];\n            \n            this.options.map((value) => {\n                if (isObject(value)) {\n                    if (Object.prototype.hasOwnProperty.call(value, 'value') && Object.prototype.hasOwnProperty.call(value, 'label')) {\n                        this._options.push(value);\n                    }\n                } else if (isString(value) || isNumber(value)) {\n                    this._options.push({\n                        value: value,\n                        label: value\n                    });\n                }\n            });\n            \n\n        } else if (isObject(this.options)) {\n            let s = false;\n            this._options.splice(0);\n            for (const key in this.options) {\n                if (Object.prototype.hasOwnProperty.call(this.options, key)) {\n                    const value = this.options[key];\n                    if (isObject(value)) {\n                        if (Object.prototype.hasOwnProperty.call(value, 'value') && Object.prototype.hasOwnProperty.call(value, 'label')) {\n                            this._options.push(value);\n                        }\n                    } else if (isString(value)) {\n                        s = true;\n                        this._options.push({\n                            value: key,\n                            label: value\n                        });\n                    }\n                }\n            }\n            if (s) {\n                this.value = String(this.value);\n            }\n        }\n        if(this._options.length){\n            this._options.map(opt => {\n                if(opt.value == this.value) hasValue = true;\n            })\n            if(!hasValue){\n                this.value = this._options[0].value;\n            }\n        }\n        \n\n\n    }\n\n}\n","<nz-radio-group [(ngModel)]=\"value\" (ngModelChange)=\"onChange($event)\">\n  <label nz-radio *ngFor=\"let p of _options\" [nzValue]=\"p.value\">{{p.label}}</label>\n</nz-radio-group>","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({ name: 'thumbnail' })\r\nexport class ThumbnailPipe implements PipeTransform {\r\n  transform(value: Array<any>, field: string): number {\r\n    if (!Array.isArray(value)) {\r\n      return null;\r\n    }\r\n    return value.find((v) => v.quanlity === field)?.url;\r\n  }\r\n}\r\n","import { isArray, isEmpty, isObject, Str } from '@app/_core/helpers/utils';\r\nimport * as THREE from 'three';\r\nimport * as POSTPROCESSING from '../modules/postprocessing.esm.js';\r\nimport {Props} from './props';\r\n\r\nconst params = {\r\n\r\n    clearPass: true,\r\n    clearColor: 'white',\r\n    clearAlpha: 1.0,\r\n\r\n    texturePass: true,\r\n    texturePassOpacity: 1.0,\r\n\r\n    cubeTexturePass: true,\r\n    cubeTexturePassOpacity: 1.0,\r\n\r\n    renderPass: true\r\n};\r\n\r\n\r\nconst ComposerEffects = {\r\n    \r\n    addEffect: function (type:any, options:any) {\r\n        var effectPass = new POSTPROCESSING.EffectPass(\r\n            this.camera,\r\n            // new POSTPROCESSING.BloomEffect()\r\n            this.getEffect(\r\n                type,\r\n                isObject(options) ? options : {}\r\n            )\r\n        );\r\n        effectPass.renderToScreen = true;\r\n        this.composer.addPass(effectPass);\r\n    },\r\n    \r\n    getEffect: function (key:any, options:any) {\r\n        var k = Str.replace(Str.lower(String(key)), \"effect\", \"\");\r\n        var ek = typeof this.effects[k] != \"undefined\" ? this.effects[k] : this.effects.bloom;\r\n        var eff = new POSTPROCESSING.ColorDepthEffect();\r\n        try {\r\n            if (typeof this[ek] == \"function\") {\r\n                var e = this[ek].apply(this, [options]);\r\n                eff = e;\r\n            }\r\n        } catch (error) {\r\n\r\n        }\r\n        return eff;\r\n    },\r\n\r\n    BloomEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.BloomEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.BloomEffect();\r\n\r\n    },\r\n    BokehEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.BokehEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.BokehEffect();\r\n    },\r\n\r\n    BrightnessContrastEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.BrightnessContrastEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.BrightnessContrastEffect();\r\n    },\r\n\r\n    ColorAverageEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            blendFunction: undefined\r\n        });\r\n        if (params.blendFunction !== undefined) {\r\n            return new POSTPROCESSING.ColorAverageEffect(params.blendFunction);\r\n        }\r\n        return new POSTPROCESSING.ColorAverageEffect();\r\n    },\r\n\r\n    ColorDepthEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.ColorDepthEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.ColorDepthEffect();\r\n    },\r\n\r\n\r\n    ChromaticAberrationEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.ChromaticAberrationEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.ChromaticAberrationEffect();\r\n    },\r\n\r\n\r\n\r\n    DepthEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.DepthEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.DepthEffect();\r\n    },\r\n\r\n    DepthOfFieldEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            camera: this.camera,\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.DepthOfFieldEffect(params.camera, params.options);\r\n        }\r\n        return new POSTPROCESSING.DepthOfFieldEffect(params.camera);\r\n    },\r\n\r\n\r\n\r\n    DotScreenEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.DotScreenEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.DotScreenEffect();\r\n    },\r\n\r\n\r\n    GammaCorrectionEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.GammaCorrectionEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.GammaCorrectionEffect();\r\n    },\r\n    GlitchEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.GlitchEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.GlitchEffect();\r\n    },\r\n\r\n    GodRaysEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            camera: this.camera,\r\n            lightSource: {},\r\n            options: {}\r\n        });\r\n        if (params.lightSource) return null;\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.GodRaysEffect(params.camera, params.lightSource, params.options);\r\n        }\r\n        return new POSTPROCESSING.GodRaysEffect(params.camera, params.lightSource);\r\n    },\r\n\r\n    GridEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.GridEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.GridEffect();\r\n    },\r\n    HueSaturationEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.HueSaturationEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.HueSaturationEffect();\r\n    },\r\n\r\n    NoiseEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.NoiseEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.NoiseEffect();\r\n    },\r\n\r\n    OutlineEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            scene: this.scene,\r\n            camera: this.camera,\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.OutlineEffect(params.scene, params.camera, params.options);\r\n        }\r\n        return new POSTPROCESSING.OutlineEffect(params.scene, params.camera);\r\n    },\r\n\r\n    PixelationEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            granularity: 30.0,\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.OutlineEffect(params.granularity);\r\n        }\r\n        return new POSTPROCESSING.OutlineEffect(params.granularity);\r\n    },\r\n\r\n\r\n    RealisticBokehEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.RealisticBokehEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.RealisticBokehEffect();\r\n    },\r\n\r\n    ScanlineEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.ScanlineEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.ScanlineEffect();\r\n    },\r\n\r\n    ShockWaveEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            camera: this.camera,\r\n            epicenter: new THREE.Vector3(),\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.ShockWaveEffect(params.camera, params.epicenter, params.options);\r\n        }\r\n        return new POSTPROCESSING.ShockWaveEffect(params.camera, params.epicenter);\r\n    },\r\n\r\n\r\n\r\n\r\n    SelectiveBloomEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            scene: this.scene,\r\n            camera: this.camera,\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.SelectiveBloomEffect(params.scene, params.camera, params.options);\r\n        }\r\n        return new POSTPROCESSING.SelectiveBloomEffect(params.scene, params.camera);\r\n    },\r\n\r\n\r\n\r\n    SepiaEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.SepiaEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.SepiaEffect();\r\n    },\r\n\r\n    TextureEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.TextureEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.TextureEffect();\r\n    },\r\n\r\n    ToneMappingEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.ToneMappingEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.ToneMappingEffect();\r\n    },\r\n\r\n    VignetteEffect: function (options:any) {\r\n        var params = Props.parseParams(options, {\r\n            options: {}\r\n        });\r\n        if (!isEmpty(params.options)) {\r\n            return new POSTPROCESSING.VignetteEffect(params.options);\r\n        }\r\n        return new POSTPROCESSING.VignetteEffect();\r\n    },\r\n\r\n\r\n    aaaaa: {\r\n        \"SMAAEffect\": {}, \"SSAOEffect\": {}, \"\": {}\r\n    },\r\n\r\n\r\n    effects: {\r\n        bloom: \"BloomEffect\", b: \"BloomEffect\", bl: \"BloomEffect\", be: \"BloomEffect\", bokeh: \"BokehEffect\", bk: \"BokehEffect\", bke: \"BokehEffect\", brightnesscontrast: \"BrightnessContrastEffect\", bc: \"BrightnessContrastEffect\", brctr: \"BrightnessContrastEffect\", bce: \"BrightnessContrastEffect\", chromaticaberration: \"ChromaticAberrationEffect\", cma: \"ChromaticAberrationEffect\", cmabe: \"ChromaticAberrationEffect\", coloraverage: \"ColorAverageEffect\", cla: \"ColorAverageEffect\", colordepth: \"ColorDepthEffect\", cd: \"ColorDepthEffect\", cde: \"ColorDepthEffect\", depth: \"DepthEffect\", d: \"DepthEffect\", de: \"DepthEffect\", depthoffield: \"DepthOfFieldEffect\", dof: \"DepthOfFieldEffect\", dofe: \"DepthOfFieldEffect\", dotscreen: \"DotScreenEffect\", ds: \"DotScreenEffect\", dse: \"DotScreenEffect\", gammacorrection: \"GammaCorrectionEffect\", gc: \"GammaCorrectionEffect\", gce: \"GammaCorrectionEffect\", glitch: \"GlitchEffect\", g: \"GlitchEffect\", ge: \"GlitchEffect\", godrays: \"GodRaysEffect\", gr: \"GodRaysEffect\", gre: \"GodRaysEffect\", grid: \"GridEffect\", huesaturation: \"HueSaturationEffect\", hs: \"HueSaturationEffect\", hse: \"HueSaturationEffect\", noise: \"NoiseEffect\", n: \"NoiseEffect\", ne: \"NoiseEffect\", outline: \"OutlineEffect\", o: \"OutlineEffect\", ol: \"OutlineEffect\", oe: \"OutlineEffect\", pixelation: \"PixelationEffect\", p: \"PixelationEffect\", px: \"PixelationEffect\", pe: \"PixelationEffect\", realisticbokeh: \"RealisticBokehEffect\", rb: \"RealisticBokehEffect\", rbe: \"RealisticBokehEffect\", smaa: \"SMAAEffect\", smaae: \"SMAAEffect\", ssao: \"SSAOEffect\", ssaoe: \"SSAOEffect\", scanline: \"ScanlineEffect\", s: \"ScanlineEffect\", se: \"ScanlineEffect\", selectivebloom: \"SelectiveBloomEffect\", sb: \"SelectiveBloomEffect\", sbe: \"SelectiveBloomEffect\", sepia: \"SepiaEffect\", shockwave: \"ShockWaveEffect\", sw: \"ShockWaveEffect\", swe: \"ShockWaveEffect\", texture: \"TextureEffect\", t: \"TextureEffect\", te: \"TextureEffect\", tonemapping: \"ToneMappingEffect\", tm: \"ToneMappingEffect\", tme: \"ToneMappingEffect\", vignette: \"VignetteEffect\", v: \"VignetteEffect\", ve: \"VignetteEffect\"\r\n    }\r\n};\r\nexport default ComposerEffects;\r\nexport { ComposerEffects };","import { assignValue, isNumber } from '@app/_core/helpers/utils';\r\n// import Dom from '../../libs/dom.js';\r\nimport * as THREE from 'three';\r\n\r\nimport { OrbitControls } from '@app/_3D/threejs/jsm/controls/OrbitControls.js';\r\n// import Meshes from '@app/_3D/libs/meshes';\r\nimport Dom from '@app/_core/helpers/dom';\r\nimport { Meshes } from '../libs/three.libs';\r\n// import LoaderLib from '../libs/LoaderLib.js';\r\nvar deploy = false;\r\nvar Object2Image = (function () {\r\n    var O2i = function () {\r\n        var scene = new THREE.Scene();\r\n        var renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\r\n        renderer.setClearColor(0x000000, 0); // the default\r\n\r\n        const WIDTH = 120, HEIGHT = 120;\r\n\r\n        var self = this;\r\n        renderer.setPixelRatio(window.devicePixelRatio);\r\n        renderer.setSize(WIDTH, HEIGHT);\r\n        // renderer.toneMapping = THREE.ACESFilmicToneMapping;\r\n        renderer.outputEncoding = THREE.sRGBEncoding;\r\n        renderer.toneMappingExposure = 0.85;\r\n        renderer.shadowMap.enabled = true;\r\n        renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n        renderer.colorManagement = true;\r\n\r\n\r\n        \r\n\r\n        var root = document.getElementById(\"object2image\");\r\n        if (root) {\r\n            root.appendChild(renderer.domElement);\r\n        }\r\n        var camera = new THREE.PerspectiveCamera(45, WIDTH / HEIGHT, 0.25, 10000);\r\n        camera.position.set(0, 0.3, 1.4);\r\n\r\n        var controls = new OrbitControls(camera, renderer.domElement);\r\n        controls.addEventListener(\"change\", function (e) {\r\n            render();\r\n        });\r\n\r\n        var ambient = new THREE.AmbientLight(0xffffff, 0.5);\r\n        scene.add(ambient);\r\n\r\n        var pointLight = new THREE.PointLight(0x4444cc, 0.3);\r\n        pointLight.position.set(0, -10, 0);\r\n        scene.add(pointLight);\r\n\r\n        var directionallight = new THREE.DirectionalLight(0xFFE0B5, 0.4);\r\n        assignValue(directionallight, {\r\n            position: { x: 40, y: 40, z: 30 },\r\n            castShadow: true,\r\n            shadow: {\r\n                mapSize: {\r\n                    width: 4096,\r\n                    height: 4096\r\n                },\r\n                camera: {\r\n                    near: 0.1,\r\n                    far: 100,\r\n                    left: 10,\r\n                    right: -10,\r\n                    top: 10,\r\n                    bottom: -10\r\n                },\r\n                darkness: 0.1,\r\n                bias: -0.0002,\r\n                radius: 5\r\n            }\r\n        });\r\n        var directionallight2 = new THREE.DirectionalLight(0xFFE0B5, 0.4);\r\n        assignValue(directionallight2, {\r\n            position: { x: 40, y: 40, z: 30 }\r\n        });\r\n\r\n        scene.add(directionallight);\r\n\r\n        scene.add(directionallight2);\r\n\r\n\r\n        function render() {\r\n            renderer.render(scene, camera);\r\n        }\r\n\r\n        this.width = WIDTH;\r\n        this.height = HEIGHT;\r\n\r\n        /**\r\n         * set kích thước ảnh\r\n         * @param {int} width do rộng ảnh\r\n         * @param {int} height độ cao ảnh\r\n         */\r\n        this.setSize = function setSize(width?:any, height?:any) {\r\n            if (!isNumber(width)) return false;\r\n            if (!isNumber(height)) height = width;\r\n            this.width = width;\r\n            this.height = height;\r\n            camera.aspect = width / height;\r\n            camera.updateProjectionMatrix();\r\n\r\n            renderer.setSize(width, height);\r\n\r\n            // render();\r\n\r\n        };\r\n\r\n        /**\r\n         * lấy url ảnh\r\n         * @param {object} object doi tuong 3D\r\n         * @param {int} width \r\n         * @param {int} height \r\n         * @returns {string}\r\n         */\r\n        this.getImage = function (object?:any, width?:any, height?:any) {\r\n            this.setSize(width, height);\r\n            if (!object) {\r\n\r\n            }\r\n            var obj = object.clone(true);\r\n            obj.position.set(0, 0, 0);\r\n            var box = new THREE.Box3().setFromObject(obj);\r\n            box.center(obj.position); // this re-sets the mesh position\r\n            var size = box.getSize();\r\n\r\n            obj.position.multiplyScalar(-1);\r\n            var pivot = new THREE.Object3D();\r\n\r\n            pivot.add(obj);\r\n            pivot.position.set(0, 0, 0);\r\n            try {\r\n                var rad = Math.PI / 8;\r\n                var d = size.z / 2;\r\n                var s = size.x > size.y ? size.x : size.y;\r\n                s += s * 0.1;\r\n                s /= 2;\r\n                var tan = Math.tan(rad);\r\n                var z = s / tan + d;\r\n                camera.position.x = z * 0.7;\r\n                camera.position.y = z * 0.2;\r\n                camera.position.z = z;\r\n                camera.lookAt(0, 0, 0);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n\r\n\r\n\r\n            scene.add(pivot);\r\n\r\n            render();\r\n\r\n            var url = renderer.domElement.toDataURL();\r\n            scene.remove(pivot);\r\n            render();\r\n            return url;\r\n        };\r\n\r\n        this.getImageByCustomSceneAndCamera = function(scene, camera, width, height){\r\n            renderer.setSize(width, height);\r\n\r\n            renderer.render(scene, camera);\r\n\r\n            var url = renderer.domElement.toDataURL();\r\n\r\n            renderer.setSize(this.width, this.height);\r\n\r\n            return url;\r\n        };\r\n\r\n        this.get2DMap = function (map?:any, cropWidth?:any, cropHeight?:any) {\r\n            if (map) {\r\n                // map.flipY = false;\r\n                if (cropWidth) {\r\n                    if (!cropHeight) cropHeight = cropWidth;\r\n                    // console.log(cropWidth, cropHeight)\r\n                    var w = map.image.width;\r\n                    var h = map.image.height;\r\n\r\n                    // console.log(map.image)\r\n                    var sw = w, sh = h;\r\n                    var g = w / h;\r\n                    var k = cropWidth / cropHeight;\r\n                    if (g < k) { // vd anhr la 3:4 resize là 4:3\r\n\r\n                        sw = cropWidth / 100;\r\n                        sh = sw / g;\r\n                    } else {\r\n                        sh = cropHeight / 100;\r\n                        sw = sh * g;\r\n                    }\r\n\r\n                    var mesh = Meshes.get({\r\n                        geometry: {\r\n                            type: \"plane\",\r\n                            params: {\r\n                                width: sw,\r\n                                height: sh\r\n                            }\r\n                        },\r\n                        material: {\r\n                            type: \"physical\",\r\n                            params: {\r\n                                depthWrite: false,\r\n                                side: THREE.DoubleSide,\r\n                                map: map\r\n                            }\r\n                        }\r\n                    });\r\n                    scene.add(mesh);\r\n\r\n                    var minImg = w > h ? h : w;\r\n                    var minCrop = cropWidth > cropHeight ? cropHeight : cropWidth;\r\n                    var min = minImg < minCrop ? minImg : minCrop;\r\n\r\n\r\n                    self.setSize(cropWidth, cropHeight);\r\n\r\n                    \r\n                    var rad = Math.PI / 8;\r\n                    var tan = Math.tan(rad);\r\n                    var z = (minCrop/2/100) / tan;\r\n                    camera.position.x = 0;\r\n                    camera.position.y = 0;\r\n                    camera.position.z = z;\r\n                    // console.log(sw, sh, tan, z)\r\n                    camera.lookAt(0, 0, 0);\r\n\r\n                    scene.add(mesh);\r\n\r\n                    render();\r\n                    var url = renderer.domElement.toDataURL();\r\n                    scene.remove(mesh);\r\n                    render();\r\n                    return url;\r\n                } else {\r\n\r\n                    var width = map.image.width;\r\n                    var height = map.image.height;\r\n                    var g = width / height;\r\n\r\n                    if(height > 1000 || width > 1000){\r\n                        if(g > 1){\r\n                            width = 1000;\r\n                            height = width / g;\r\n                        }else{\r\n                            height = 1000;\r\n                            width = height * g;\r\n                        }\r\n                        return this.get2DMap(map, width, height);\r\n                    }\r\n\r\n                    var w = width, h = height;\r\n                    \r\n                    \r\n                    var min = w > h ? h : w;\r\n\r\n                    this.setSize(min, min);\r\n                    var rad = Math.PI / 8;\r\n                    var tan = Math.tan(rad);\r\n                    var z = min / tan;\r\n                    camera.position.x = 0;\r\n                    camera.position.y = 0;\r\n                    camera.position.z = z;\r\n                    camera.lookAt(0, 0, 0);\r\n                    var mesh = Meshes.get({\r\n                        geometry: {\r\n                            type: \"plane\",\r\n                            params: {\r\n                                width: w,\r\n                                height: h\r\n                            }\r\n                        },\r\n                        material: {\r\n                            type: \"physical\",\r\n                            params: {\r\n                                depthWrite: false,\r\n                                side: THREE.DoubleSide,\r\n                                map: map\r\n                            }\r\n                        }\r\n                    });\r\n                    scene.add(mesh);\r\n\r\n                    render();\r\n                    var url = renderer.domElement.toDataURL();\r\n                    scene.remove(mesh);\r\n                    render();\r\n                    return url;\r\n\r\n                }\r\n                \r\n\r\n\r\n            }\r\n            // test\r\n            // console.log('end');\r\n            return null;\r\n        };\r\n\r\n\r\n\r\n        this.resizeImage = function (dataURL?:any, width?:any, height?:any, callback?:any) {\r\n            var url = null;\r\n\r\n            var map = new THREE.Texture();\r\n            var image = document.createElement('img');;\r\n            image.src = dataURL;\r\n            image.onload = function () {\r\n                map.image = image;\r\n                // JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\r\n                const isJPEG = dataURL.search(/\\.jpe?g($|\\?)/i) > 0 || dataURL.search(/^data\\:image\\/jpeg/) === 0;\r\n\r\n                map.format = isJPEG ? THREE.RGBFormat : THREE.RGBAFormat;\r\n                map.needsUpdate = true;\r\n\r\n                var w = map.image.width;\r\n                var h = map.image.height;\r\n\r\n                var sw = w, sh = h;\r\n                var g = w / h;\r\n                var k = width / height;\r\n                if (g < k) { // vd anhr la 3:4 resize là 4:3\r\n\r\n                    sw = width;\r\n                    sh = w / g;\r\n                } else {\r\n                    sh = height;\r\n                    sw = sh * g;\r\n                }\r\n\r\n                var mesh = Meshes.get({\r\n                    geometry: {\r\n                        type: \"plane\",\r\n                        params: {\r\n                            width: sw,\r\n                            height: sh\r\n                        }\r\n                    },\r\n                    material: {\r\n                        type: \"physical\",\r\n                        params: {\r\n                            depthWrite: false,\r\n                            side: THREE.DoubleSide,\r\n                            map: map\r\n                        }\r\n                    }\r\n                });\r\n                scene.add(mesh);\r\n\r\n\r\n                var minImg = w > h ? h : w;\r\n                var minCrop = width > height ? height : width;\r\n                var min = minImg < minCrop ? minImg : minCrop;\r\n\r\n\r\n                self.setSize(width, height);\r\n\r\n                var rad = Math.PI / 8;\r\n                var tan = Math.tan(rad);\r\n                var z = minCrop / tan;\r\n                camera.position.x = 0;\r\n                camera.position.y = 0;\r\n                camera.position.z = z;\r\n                camera.lookAt(0, 0, 0);\r\n\r\n                render();\r\n\r\n                url = renderer.domElement.toDataURL();\r\n                scene.remove(mesh);\r\n                render();\r\n                if (typeof callback == \"function\") {\r\n                    callback(url);\r\n                }\r\n\r\n\r\n            }\r\n\r\n            return null;\r\n        };\r\n\r\n\r\n    };\r\n\r\n    if (!deploy) {\r\n        deploy = true;\r\n        var imgDom = Dom(\"#object2image\", null, { style: { display: \"nome\" } });\r\n        // window['objimgdom'] = imgDom;\r\n        document.body.appendChild(imgDom.el);\r\n        imgDom.css(\"display\", \"none\");\r\n    }\r\n    return new O2i();\r\n}());\r\n\r\nexport default Object2Image;\r\n\r\nexport { Object2Image };","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { isString } from '@app/_core/helpers/utils';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n  selector: 'inp-texture-group',\n  templateUrl: './inp-texture-group.component.html',\n  styleUrls: ['./inp-texture-group.component.scss']\n})\nexport class InpTextureGroupComponent extends BaseInpGroupComponent implements OnInit {\n  @Output() modalCancelSelect = new EventEmitter<any>();\n  @Output() onCloseLibrary = new EventEmitter<any>();\n  @Input() output: boolean = false;\n  @Input() listType: string = \"list\";\n  filename: string = \"Chu7a chon5 file\";\n  constructor() {\n    super();\n  }\n\n  onInit(): void {\n    this.inpInit();\n    this.onInpValChange();\n  }\n  onInpValChange(){\n    this.filename = isString(this.value)? this.value.split(\"/\").pop():\"\";\n  }\n\n  onCancel(){\n    this.modalCancelSelect.emit(true);\n    this.onCloseLibrary.emit(true);\n  }\n}\n","<div class=\"inner-box\">{{label?label:name | translate}}</div>\n<div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\" class=\"texture-group\">\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"5\">\n        <div class=\"inner-box\">\n            <inp-texture [name]=\"name\" [(value)]=\"value\" [listType]=\"listType\" (subcribe)=\"onChange($event)\" (modalCancelSelect)=\"onCancel()\" (onCloseLibrary)=\"onCancel()\"></inp-texture>\n        </div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"19\">\n        <div *ngIf=\"hasAttach; then attachBlock else simpleBlock\"></div>\n        <ng-template #attachBlock>\n            <inp-range-group \n                [name]=\"attach.name\" \n                [min]=\"attach.min\" \n                [max]=\"attach.max\" \n                [step]=\"attach.step\" \n                [(value)]=\"attach.value\" \n                (subcribe)=\"onAttachChange($event)\" \n            ></inp-range-group>\n        </ng-template>\n        <ng-template #simpleBlock>\n            <span *ngIf=\"output\">{{filename}}</span>\n        </ng-template>\n        \n    </div>\n\n</div>\n\n","import { Component, Input, OnInit } from '@angular/core';\nimport { isObject } from '@app/_core/helpers/utils';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n  selector: 'inp-color-group',\n  templateUrl: './inp-color-group.component.html',\n  styleUrls: ['./inp-color-group.component.scss']\n})\nexport class InpColorGroupComponent extends BaseInpGroupComponent implements OnInit {\n\n  @Input() output: boolean = false;\n  @Input() typeEnable: boolean = false;\n  constructor() {\n    super();\n  }\n\n  onInit(): void {\n    this.inpInit();\n    this.value = this.value && isObject(this.value) ? (\n      this.value.isColor ? \"#\" + this.value.getHexString() : (\n        this.value.$three == \"color\" ? this.value.color : \"#000\"\n      )\n    ) : this.value as any;\n  }\n\n}\n","<div class=\"inner-box\">{{label?label:name | translate}}</div>\n<div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\" class=\"color-group\">\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"5\">\n        <div class=\"inner-box\">\n            <inp-color [name]=\"name\" [(value)]=\"value\" (subcribe)=\"onChange($event)\"></inp-color>\n        </div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"19\">\n        <div *ngIf=\"hasAttach; then attachBlock else simpleBlock\"></div>\n        <ng-template #attachBlock>\n            <inp-range-group \n                [name]=\"attach.name\" \n                [min]=\"attach.min\" \n                [max]=\"attach.max\" \n                [step]=\"attach.step\" \n                [(value)]=\"attach.value\" \n                (subcribe)=\"onAttachChange($event)\" \n            ></inp-range-group>\n        </ng-template>\n        <ng-template #simpleBlock>\n            <div class=\"max-100\">\n                <inp-text [name]=\"name\" [(value)]=\"value\" (subcribe)=\"onChange($event)\" *ngIf=\"typeEnable\"></inp-text>\n                <span *ngIf=\"output\">{{value}}</span>\n            </div>\n        </ng-template>\n        \n    </div>\n\n</div>\n","// tạo class theo phong cách php và dùng cú pháp es5 =))))))))\r\n\r\nimport {\r\n    isArray,\r\n    Str,\r\n    _defineProperties,\r\n    _createClass,\r\n    _defineProperty,\r\n    _instanceof,\r\n    isFunction,\r\n    objectKeys,\r\n    addToGlobal,\r\n    assignValue,\r\n    isEmpty,\r\n    isString,\r\n    isObject,\r\n    inArray,\r\n    getArguments,\r\n    date,\r\n    Num,\r\n    copyArray,\r\n    newObj,\r\n    objectHasKey\r\n} from './utils';\r\n\r\n\"use strict\";\r\n\r\nconst NORETURN_VALUE = date('time') + '-' + Str.rand(Str.rand(date('ms') + \"-\" + Num.rand(0, 999999)));\r\nconst getArgs = getArguments;\r\ninterface ES5Instance {\r\n    instanceID: string,\r\n\r\n    getInstanceID(): string,\r\n    __addAccessorValue__(): any,\r\n    __changeAccessorValue__(): any,\r\n    addBootMethod(): ES5Instance,\r\n    removeBootMethod(): ES5Instance,\r\n    resetInitMethods(): ES5Instance,\r\n    removeInitMethod(): ES5Instance,\r\n    resetBootMethods(): ES5Instance,\r\n    __update__properties__(): ES5Instance,\r\n    __callStatic(): any,\r\n    [x: string]: any\r\n}\r\n\r\ninterface ES5AbstractClass {\r\n    (...args: any[]): ES5Instance,\r\n    new(...args: any[]): ES5Instance,\r\n    getExtends(): { [x: string]: any },\r\n    getUses(): { [x: string]: any },\r\n    getMethods(): { [x: string]: any },\r\n    getProps(): { [x: string]: any },\r\n    getConstants(): { [x: string]: any },\r\n    getContructs(): { [x: string]: any },\r\n    getParents(): { [x: string]: any },\r\n    getParent(): { [x: string]: any },\r\n    getStatic(): { [x: string]: any },\r\n    getIntances(): { [x: string]: any },\r\n    getInits(): { [x: string]: any },\r\n    getAccessorMethods(): { [x: string]: any },\r\n    getBootMethods(): { [x: string]: any },\r\n    getInitMethods(): { [x: string]: any },\r\n    isInstance(): boolean,\r\n    with(key?: any, value?: any): ES5Instance,\r\n    withData(key?: any, value?: any): ES5Instance,\r\n    static(key?: any, value?: any): ES5AbstractClass,\r\n    __addAccessorKey(key): any;\r\n    __addAccessorValue(key): any;\r\n\r\n    [x: string]: any\r\n\r\n}\r\n\r\ninterface AbstractClass {\r\n    /**\r\n     * khai báo thuộc tính và phương thức\r\n     * @param props các thuộc tính và phương thức\r\n     */\r\n    (props?: {\r\n        [x: string]: any,\r\n    }): ES5AbstractClass,\r\n    new(...args: any[]): ES5Instance,\r\n    /**\r\n     * thực hiện khai báo và khóa các thuộc tính\r\n     */\r\n    commit(): ES5AbstractClass,\r\n    /**\r\n     * kế thừa class\r\n     * @param superClass Class cha\r\n     * @param superClasses danh sách các class cha khá\r\n     */\r\n    extends(superClass: any, ...superClasses: any[]): AbstractClass,\r\n    /**\r\n     * Sử dụng các trait\r\n     * @param trait đối tượng trait\r\n     * @param traits cá trait khác\r\n     */\r\n    uses(trait: any, ...traits: any[]): AbstractClass,\r\n    /**\r\n     * khai báo thuộc tính và phương thức\r\n     * @param props các thuộc tính và phương thức\r\n     */\r\n    uassign(props: {\r\n        constructor?: (...args: any) => void,\r\n        boots?: string[],\r\n        inits?: string[],\r\n        [x: string]: any,\r\n    }): ES5AbstractClass,\r\n\r\n    getExtends(): { [x: string]: any },\r\n    getUses(): { [x: string]: any },\r\n    getMethods(): { [x: string]: any },\r\n    getProps(): { [x: string]: any },\r\n    getConstants(): { [x: string]: any },\r\n    getContructs(): { [x: string]: any },\r\n    getParents(): { [x: string]: any },\r\n    getParent(): { [x: string]: any },\r\n    getStatic(): { [x: string]: any },\r\n    getIntances(): { [x: string]: any },\r\n    getInits(): { [x: string]: any },\r\n    getAccessorMethods(): { [x: string]: any },\r\n    getBootMethods(): { [x: string]: any },\r\n    getInitMethods(): { [x: string]: any },\r\n    isInstance(): boolean,\r\n    with(key?: any, value?: any): ES5Instance,\r\n    withData(key?: any, value?: any): ES5Instance,\r\n    static(key?: any, value?: any): AbstractClass,\r\n\r\n}\r\nconst _interface = (name: string, props: any) => {\r\n\r\n};\r\n\r\nconst objectCreated: any = {};\r\n\r\nfunction createConstructor(name, checkFn): ES5AbstractClass {\r\n    var esc: any = null;\r\n    var s = \"try {\" +\r\n        \"var \" + name + \" = function \" + name + \"(){\" +\r\n        \"var classChecked = checkFn.call(this, getArgs(arguments));\" +\r\n        \"if(classChecked!==NORETURN_VALUE) return classChecked;\" +\r\n        \"};\" +\r\n        \"esc = \" + name + \";\" +\r\n        \"} catch (error) {\" +\r\n        \"console.log(\\\"lỗi\\\");\" +\r\n        \"console.error(error);\" +\r\n        \"}\";\r\n    eval(s);\r\n    return esc;\r\n}\r\n\r\nfunction definePropertyGroup(target, groupConfig) {\r\n    var configurable = groupConfig.configurable || false,\r\n        enumerable = groupConfig.enumerable || false,\r\n        writable = groupConfig.writable || false;\r\n    for (const key in groupConfig.props) {\r\n        if (Object.prototype.hasOwnProperty.call(groupConfig.props, key)) {\r\n            const value = groupConfig.props[key];\r\n            Object.defineProperty(target, key, {\r\n                configurable: configurable,\r\n                enumerable: enumerable,\r\n                writable: writable,\r\n                value: value\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * khoi tao class\r\n * @param {string} className\r\n * @param {boolean} isGlobal\r\n * @returns {class}\r\n */\r\nconst createClass = function createClass(className: any, isGlobal?: any): AbstractClass {\r\n    return function createClass$($class?: any, $isGlobal?: any): any {\r\n        var $className = isString($class) ? Str.replace(Str.clearUnicode($class), [' ', '-', '+'], '') : (isFunction($class) ? $class.name : (isFunction($isGlobal) && $isGlobal.name ? $isGlobal.name : \"Class\" + Str.rand().substr(4, 4)));\r\n        var hasClassName = isString($class) && $class.length;\r\n        // khai báo hàm\r\n\r\n        // tình trạng commit\r\n        var commited = false;\r\n\r\n        var oneTimeData = newObj({});\r\n\r\n        // chứa dữ liệu hằng\r\n        var $constants = newObj({});\r\n\r\n        /**\r\n         * chứa dữ liệu\r\n         */\r\n        var $data = newObj({});\r\n\r\n\r\n        var $props = newObj({});\r\n\r\n        var $dynamics = newObj({});\r\n\r\n        /**\r\n         * chứa các phương thức boot\r\n         */\r\n        var $boots = newObj({});\r\n\r\n        var $inits = newObj({});\r\n\r\n        var $calls = [];\r\n\r\n        var $classData = newObj({\r\n            extends: {},\r\n            uses: {},\r\n            methods: {},\r\n            props: {},\r\n            constructs: {},\r\n            parents: {},\r\n            parent: {},\r\n            static: {},\r\n            instances: [],\r\n            constants: {},\r\n            accessorMethods: {},\r\n            events: {},\r\n            inits: [],\r\n            boots: [],\r\n            calls: []\r\n\r\n        });\r\n\r\n        var __contructs = [];\r\n\r\n        // khai báo  class\r\n        /**\r\n         * @var {class}\r\n         */\r\n        var ES5Class: ES5AbstractClass = function () {\r\n            var checked = checkConstructorCalled.call(this, getArgs(arguments));\r\n            if (checked !== NORETURN_VALUE) return checked;\r\n        } as ES5AbstractClass;\r\n\r\n\r\n        function stdParent(instance: any, cn: any, scope?: any) {\r\n            this.__instance = instance;\r\n            const self = this;\r\n\r\n\r\n            if (!scope) {\r\n                if (!isEmpty($classData.parent[cn])) {\r\n                    const props = $classData.parent[cn];\r\n                    for (const key in props) {\r\n                        if (props.hasOwnProperty(key)) {\r\n                            const val = props[key];\r\n                            if (typeof val == \"function\") {\r\n                                this[key] = function () {\r\n                                    val.apply(self, arguments);\r\n                                    self.instance[key].apply(self.instance, arguments);\r\n                                    return self;\r\n                                }\r\n                            } else {\r\n                                this[key] = val;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (!isEmpty($classData.parents[cn])) {\r\n                        for (const k in $classData.parents[cn]) {\r\n                            if (Object.prototype.hasOwnProperty.call($classData.parents[cn], k)) {\r\n                                this.__parent = new stdParent(this, k, cn);\r\n                                if (typeof self.__parents) {\r\n                                    self.__parents = {};\r\n                                }\r\n                                self.__parents[k] = this.__parent;\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n            else if (isString(scope) && objectHasKey($classData.parents, scope)) {\r\n                if (!isEmpty($classData.parents[scope][cn])) {\r\n                    const props = $classData.parents[scope][cn];\r\n                    for (const key in props) {\r\n                        if (props.hasOwnProperty(key)) {\r\n                            const val = props[key];\r\n                            if (typeof val == \"function\") {\r\n                                this[key] = function () {\r\n                                    val.apply(self, arguments);\r\n                                    self.instance[key].apply(self.instance, arguments);\r\n                                    return self;\r\n                                }\r\n                            } else {\r\n                                this[key] = val;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (!isEmpty($classData.parents[cn])) {\r\n                        for (const k in $classData.parents[cn]) {\r\n                            if (Object.prototype.hasOwnProperty.call($classData.parents[cn], k)) {\r\n                                this.__parent = new stdParent(this, k, cn);\r\n                                if (typeof self.__parents) {\r\n                                    self.__parents = {};\r\n                                }\r\n                                self.__parents[k] = this.__parent;\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n\r\n\r\n        }\r\n\r\n        var iof = _instanceof;\r\n\r\n\r\n        // hàm gọi trong construct\r\n\r\n        if (hasClassName) {\r\n            try {\r\n                let esc = createConstructor($className, checkConstructorCalled);\r\n                if (esc !== null) {\r\n                    ES5Class = esc;\r\n                }\r\n            } catch (error) {\r\n                console.log(\"lỗi\")\r\n                console.error(error);\r\n            }\r\n        }\r\n\r\n\r\n        function checkConstructorCalled(args?: any[]) {\r\n            if (!iof(this, ES5Class)) {\r\n                if (commited) {\r\n                    if ($calls.length) {\r\n                        const caller = $calls[$calls.length - 1];\r\n                        if (typeof caller == \"function\") {\r\n                            return caller.apply(this, args);\r\n                        }\r\n                    }\r\n                    if (checkCreateNewInstanceByStaticConstructorCall()) {\r\n                        return newInstance(args);\r\n                    }\r\n\r\n                }\r\n                return ES5Class.assign.apply(null, args);\r\n            }\r\n            else {\r\n                classContructor.apply(this, args);\r\n            }\r\n            return NORETURN_VALUE;\r\n        }\r\n\r\n\r\n\r\n        function newInstance(args?: any[]) {\r\n            var instance = null;\r\n            // console.log(\"create intance of \" + ES5Class.__class, args);\r\n            var a = 'instance = new ES5Class(';\r\n            if (args && args.length) {\r\n                for (var index = 0; index < args.length; index++) {\r\n                    a += 'args[' + index + ']' + (index < args.length - 1 ? ',' : '');\r\n                }\r\n            }\r\n            a += ');';\r\n            try {\r\n                eval(a);\r\n            } catch (error) {\r\n                console.warn(error);\r\n\r\n            }\r\n            return instance;\r\n        }\r\n\r\n        var copyContructs = [];\r\n        // hàm khởi tạo\r\n        function __contruct() {\r\n            var self = this;\r\n            copyContructs = copyArray(__contructs);\r\n\r\n            return (typeof this[$className] == \"function\" ? this[$className] : (\r\n                copyContructs.length ? copyContructs.pop() : function () { console.log(\"create instance of \" + ES5Class.__class) }\r\n            )).apply(this, arguments);\r\n\r\n        };\r\n\r\n        /**\r\n         * them ham khoi tao\r\n         * @param {function(...args)} constructor ham khoi tao\r\n         */\r\n        function addConstructor(constructor?: any) {\r\n\r\n            $classData.methods.constructor = $classData.methods[$className] = function () {\r\n                if (copyContructs.length) {\r\n                    copyContructs = copyArray(__contructs);\r\n                    Object.defineProperty(this, \"super\", {\r\n                        value: function parentConstructor() {\r\n                            var args1 = getArguments(arguments);\r\n                            var pConstructor = copyContructs.pop();\r\n                            pConstructor.apply(this, args1);\r\n                        },\r\n                        enumerable: false\r\n\r\n                    })\r\n                }\r\n                constructor.apply(this, arguments);\r\n            }\r\n        }\r\n\r\n\r\n\r\n        if ($isGlobal === true) {\r\n            // global[$className] = ES5Class;\r\n            addToGlobal($className, ES5Class);\r\n        }\r\n\r\n        /**\r\n         * ham dc goi trong constructor\r\n         */\r\n        function classContructor() {\r\n\r\n            if (!commited) {\r\n                ES5Class.commit();\r\n            }\r\n\r\n            this.__update__properties__(true);\r\n\r\n            var instanceID = \"a\" + Str.rand() + \"_\" + date(\"time\");\r\n            Object.defineProperty(this, '__instance__id__', {\r\n                value: instanceID,\r\n                enumerable: false,\r\n                configurable: false,\r\n                writable: false\r\n            });\r\n\r\n            \r\n            if (!isEmpty($dynamics)) {\r\n                for (var key in $dynamics) {\r\n                    if (Object.hasOwnProperty.call($dynamics, key)) {\r\n                        var val = $dynamics[key];\r\n                        __addAccessorValue(instanceID, key, val);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!isEmpty($classData.parent)) {\r\n                for (var key in $classData.parent) {\r\n                    if ($classData.parent.hasOwnProperty(key)) {\r\n                        var parentOpt = $classData.parent[key];\r\n                        __addAccessorValue(instanceID, \"__parent\",\r\n                            new stdParent(this, key)\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n            if (oneTimeData && isObject(oneTimeData) && !isEmpty(oneTimeData)) {\r\n                for (const key in oneTimeData) {\r\n                    if (Object.hasOwnProperty.call(oneTimeData, key)) {\r\n                        const value = oneTimeData[key];\r\n                        this[key] = value;\r\n                    }\r\n                }\r\n                oneTimeData = {};\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n            if (typeof this.boot == \"function\") {\r\n                this.boot();\r\n                this.boot = function () {\r\n                    console.warn(ES5Class.__class + \" boot đã được gọi khi khởi tạo\");\r\n                };\r\n            }\r\n            if (!isEmpty($boots)) {\r\n                for (var key in $boots) {\r\n                    if (Object.hasOwnProperty.call($boots, key)) {\r\n                        var params = $boots[key];\r\n                        if (typeof this[key] == \"function\") {\r\n                            this[key].apply(this, params);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            __contruct.apply(this, arguments);\r\n\r\n            if (typeof this.init == \"function\") {\r\n                // console.log(this)\r\n                this.init();\r\n                // this.boot = function () {\r\n                //     console.warn(ES5Class.__class + \" boot đã được gọi khi khởi tạo\");\r\n                // };\r\n            }\r\n            if (!isEmpty($inits)) {\r\n                for (var key in $inits) {\r\n                    if (Object.hasOwnProperty.call($inits, key)) {\r\n                        var params = $inits[key];\r\n                        if (typeof this[key] == \"function\") {\r\n                            this[key].apply(this, params);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            $classData.instances.push(this);\r\n        };\r\n\r\n        // gán biên\r\n\r\n\r\n        var $ignore = [\r\n            'getClass', 'getType', 'getExtends', 'getUses', 'getMethods', 'getProps', 'getConstructs', 'getParents', 'getParent',\r\n            'getStatic', 'getInstances', 'getInits', 'getAccessorMethods',\r\n            'constructor', ES5Class.__class, 'extends', 'uses', 'assign', 'inherit', 'static', '__update__properties__',\r\n            'resetBootMethods', 'resetInitMethods', 'commit', \"getInstanceID\"\r\n        ];\r\n\r\n        definePropertyGroup(ES5Class, {\r\n            configurable: false,\r\n            enumerable: false,\r\n            writable: false,\r\n            props: {\r\n                __type: 'class',\r\n                __class: $className,\r\n\r\n                /**\r\n                 * kế thừa class\r\n                 * @param {function|object|class|ES5Class} superClass class cha\r\n                 * @returns {ES5Class}\r\n                 */\r\n\r\n                inherit: function (superClass: any) {\r\n                    if (commited) {\r\n                        throw new Error(\"Không thể gọi hàm inherit sau khi đã khai báo phương thức cho class\");\r\n                    }\r\n\r\n                    if (superClass) {\r\n                        var _parents = {};\r\n                        var _extends = {\r\n                            props: {},\r\n                            methods: {},\r\n                            accessorMethods: {}\r\n                        };\r\n\r\n                        var cn = null;\r\n                        var _parent: any = {};\r\n\r\n                        if (superClass.__type == 'class') {// trường hợp là std class\r\n                            cn = superClass.__class;\r\n                            _parent.__class = superClass;\r\n                            var superContructs = superClass.getContructs();\r\n                            var superExtends = superClass.getExtends();\r\n                            var superInits = superClass.getInits();\r\n                            var superContants = superClass.getConstants();\r\n                            var superUses = superClass.getUses();\r\n                            var superProps = superClass.getProps();\r\n                            var superMethods = superClass.getMethods();\r\n                            var superAccessorMethods = superClass.getAccessorMethods();\r\n                            var superParents = superClass.getParents();\r\n                            var superStatic = superClass.getStatic();\r\n                            // console.log(\"set get\", superAccessorMethods);\r\n\r\n                            // lay danh sach construct\r\n                            var bms = superClass.getBootMethods();\r\n                            addBootMethod(bms);\r\n                            var ims = superClass.getInitMethods();\r\n                            addInitMethod(ims);\r\n\r\n                            for (var fn in superContructs) {\r\n                                if (superContructs.hasOwnProperty(fn)) {\r\n                                    $classData.constructs[fn] = superContructs[fn];\r\n                                }\r\n                            }\r\n                            if (superMethods[cn]) {\r\n                                $classData.constructs[cn] = superMethods[cn];\r\n\r\n                            }\r\n                            else if (superMethods.hasOwnProperty('constructor')) {\r\n                                $classData.constructs[cn] = superMethods.constructor;\r\n                            }\r\n\r\n\r\n                            // ke thua\r\n                            for (var cln in superExtends) {\r\n                                if (superExtends.hasOwnProperty(cln)) {\r\n                                    var exts = superExtends[cln];\r\n                                    for (var k in exts.props) {\r\n                                        if (exts.props.hasOwnProperty(k)) {\r\n                                            var p = exts.props[k];\r\n                                            _extends.props[k] = p;\r\n                                        }\r\n                                    }\r\n\r\n                                    for (var m in exts.methods) {\r\n                                        if (exts.methods.hasOwnProperty(m)) {\r\n                                            var mt = exts.methods[m];\r\n                                            _extends.methods[m] = mt;\r\n                                        }\r\n                                    }\r\n\r\n                                    for (var m in exts.accessorMethods) {\r\n                                        if (exts.accessorMethods.hasOwnProperty(m)) {\r\n                                            var mt = exts.accessorMethods[m];\r\n                                            _extends.accessorMethods[m] = mt;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n\r\n                            if (superInits && superInits.length) {\r\n                                for (var i = 0; i < superInits.length; i++) {\r\n                                    $classData.inits.push(superInits[i]);\r\n                                }\r\n                            }\r\n\r\n\r\n                            for (var key in superContants) {\r\n                                if (Object.hasOwnProperty.call(superContants, key)) {\r\n                                    if (!isConst(key)) {\r\n                                        $classData.constants[key] = superContants[key];\r\n                                    } else {\r\n                                        throwConstError(superClass.__class, key, superContants[key])\r\n                                    }\r\n                                }\r\n                            }\r\n                            // uses\r\n                            for (var key in superUses) {\r\n                                if (superUses.hasOwnProperty(key)) {\r\n                                    var vl = superUses[key];\r\n                                    // _extends.uses[key] = vl;\r\n                                    _parent[key] = vl;\r\n\r\n                                    if (isConst(key)) {\r\n                                        throwConstError(superClass.__class, key, vl)\r\n                                    }\r\n                                    else if (typeof vl == \"function\") {\r\n                                        _extends.methods[key] = vl;\r\n                                    }\r\n                                    else {\r\n                                        _extends.props[key] = vl;\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n\r\n                            // thuoc tinh\r\n                            for (var key in superProps) {\r\n                                if (superProps.hasOwnProperty(key)) {\r\n                                    var vl = superProps[key];\r\n\r\n                                    if (isConst(key)) {\r\n                                        throwConstError(superClass.__class, key, vl)\r\n                                    }\r\n                                    _extends.props[key] = vl;\r\n                                    if (!superExtends || !superExtends.props || !superExtends.props[key]) {\r\n                                        _parent[key] = vl;\r\n                                    }\r\n                                }\r\n                            }\r\n                            // phuong thuc\r\n                            for (var key in superMethods) {\r\n                                if (superMethods.hasOwnProperty(key)) {\r\n                                    var vl = superMethods[key];\r\n\r\n                                    if (isConst(key)) {\r\n                                        throwConstError(superClass.__class, key, vl)\r\n                                    }\r\n                                    if (key != \"constructor\") {\r\n                                        _extends.methods[key] = vl;\r\n                                        _parent[key] = vl;\r\n                                    }\r\n                                    if (!superExtends || !superExtends.methods || !superExtends.methods[key] || key == \"constructor\") {\r\n                                        _parent[key] = vl;\r\n                                    }\r\n\r\n                                }\r\n                            }\r\n\r\n\r\n                            for (var key in superAccessorMethods) {\r\n                                if (superAccessorMethods.hasOwnProperty(key)) {\r\n                                    assignValue(_extends.accessorMethods, key, superAccessorMethods[key]);\r\n                                    _parent[key] = superAccessorMethods[key];\r\n                                    $classData.accessorMethods[key] = superAccessorMethods[key];\r\n\r\n                                }\r\n                            }\r\n\r\n                            for (var fn in superParents) {\r\n                                if (superParents.hasOwnProperty(fn)) {\r\n                                    $classData.parents[fn] = superParents[fn];\r\n                                }\r\n                            }\r\n\r\n\r\n\r\n                            for (var fn in superStatic) {\r\n                                if (superStatic.hasOwnProperty(fn)) {\r\n                                    $classData.static[fn] = superStatic[fn];\r\n\r\n                                    _defineProperty(ES5Class, fn, superStatic[fn]);\r\n                                }\r\n                            }\r\n\r\n\r\n                            $classData.extends[superClass.__class] = _extends;\r\n                        }\r\n                        else if (typeof superClass == \"function\" && typeof superClass.prototype == \"object\") {\r\n                            cn = superClass.name || \"parent_\" + Str.rand(8);\r\n                            if (typeof superClass.prototype.constructor == \"function\") {\r\n                                _parent.constructor = superClass.prototype.constructor;\r\n                                _parent[cn] = superClass.prototype.constructor;\r\n                                _extends.methods[cn] = superClass.prototype.constructor;\r\n                                $classData.constructs[cn] = superClass.prototype.constructor;\r\n                            }\r\n                            for (let mt in superClass.prototype) {\r\n                                if (superClass.prototype.hasOwnProperty(mt)) {\r\n                                    var method = superClass.prototype[mt];\r\n\r\n                                    if (isConst(key)) {\r\n                                        throwConstError(superClass.__class, key, vl)\r\n                                    }\r\n                                    if (mt == \"constructor\") {\r\n                                        _parent.constructor = method;\r\n                                        _parent[cn] = method;\r\n                                        _extends.methods[cn] = method;\r\n                                        $classData.constructs[cn] = method;\r\n                                    }\r\n                                    else if (typeof method == \"function\") {\r\n                                        _extends.methods[mt] = method;\r\n                                    }\r\n                                    else {\r\n                                        _extends.props[mt] = method;\r\n                                    }\r\n                                    _parent[mt] = method;\r\n                                }\r\n                            }\r\n\r\n                            $classData.extends[cn] = _extends;\r\n                        }\r\n\r\n                        if (!isEmpty(_parent) && cn) {\r\n                            if (typeof $classData.parents[ES5Class.__class] == \"undefined\") {\r\n                                $classData.parents[ES5Class.__class] = {};\r\n                            }\r\n                            _parent.__class = cn;\r\n                            $classData.parent[cn] = _parent;\r\n                            $classData.parents[ES5Class.__class][cn] = _parent;\r\n                        }\r\n                    }\r\n                },\r\n\r\n                \"extends\": function (superClass?: any) {\r\n                    if (commited) {\r\n                        throw new Error(\"Không thể gọi hàm extends sau khi đã khai báo phương thức cho class\");\r\n                    }\r\n\r\n                    for (var index = 0; index < arguments.length; index++) {\r\n                        var arg = arguments[index];\r\n                        ES5Class.inherit(arg);\r\n                    }\r\n                    return ES5Class;\r\n                },\r\n                /**\r\n                 * kế thừa các trait\r\n                 * @param {object} trait các thuộc tính và phương thức\r\n                 * @returns {ES5Class}\r\n                 */\r\n                uses: function (...traits: any) {\r\n                    if (commited) {\r\n                        throw new Error(\"Không thể gọi hàm uses sau khi đã khai báo phương thức cho class\");\r\n                    }\r\n\r\n                    function assignUses(props?: any) {\r\n\r\n                        for (var key in props) {\r\n                            if (props.hasOwnProperty(key)) {\r\n                                var el = props[key];\r\n\r\n                                if (inArray(['constructor', ES5Class.__class], key)) {\r\n\r\n                                }\r\n                                else if (isConst(key)) {\r\n                                    throwConstError(\"trait\", key, el)\r\n                                }\r\n\r\n                                else if (inArray(['boots', 'bootmethods'], String(key).toLowerCase()) && typeof el != \"function\") {\r\n                                    addBootMethod(el);\r\n                                }\r\n\r\n                                else if (inArray(['inits', 'initmethods'], String(key).toLowerCase()) && typeof el != \"function\") {\r\n                                    addInitMethod(el);\r\n                                }\r\n\r\n                                else {\r\n                                    assignPropMethod('uses', key, el);\r\n                                    // $classData.uses[key] = el;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    var prototype = {};\r\n                    for (var index = 0; index < arguments.length; index++) {\r\n                        var props = arguments[index];\r\n                        if (typeof props == \"object\") {\r\n                            assignUses(props);\r\n                        } else if (isFunction(props)) {\r\n                            if (objectKeys(props.prototype).length > 1) {\r\n                                Object.assign(prototype, props.prototype);\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n                    assignUses(prototype);\r\n\r\n                    return ES5Class;\r\n                },\r\n\r\n\r\n                // khai báo\r\n\r\n                /**\r\n                 * khai báo thuộc tính hoặc phương thức\r\n                 * @param {object} props thuộc tính hoặc phuong thức\r\n                 * @returns {ES5Class}\r\n                 */\r\n                assign: function (props?: any) {\r\n                    if (typeof props == \"object\") {\r\n                        for (var key in props) {\r\n                            if (props.hasOwnProperty(key)) {\r\n                                var el = props[key];\r\n\r\n                                if (isConst(key)) {\r\n                                    throwConstError(ES5Class.__class, key, el)\r\n                                }\r\n                                else if ((key == \"constructor\" || key == ES5Class.__class)) {\r\n                                    if (typeof el == \"function\") addConstructor(el);\r\n                                }\r\n\r\n                                else if (inArray(['boots', 'bootmethods'], String(key).toLowerCase())) {\r\n                                    addBootMethod(el);\r\n                                }\r\n\r\n                                else if (inArray(['inits', 'initmethods'], String(key).toLowerCase()) && typeof el != \"function\") {\r\n                                    addInitMethod(el);\r\n                                }\r\n\r\n                                else if (typeof el == \"function\") {\r\n                                    assignPropMethod('methods', key, el);\r\n                                    // $classData.methods[key] = el;\r\n                                }\r\n\r\n                                else {\r\n                                    assignPropMethod('props', key, el);\r\n                                    // $classData.props[key] = el;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    ES5Class.commit();\r\n                    return ES5Class;\r\n                },\r\n\r\n                /**\r\n                 * khai báo static\r\n                 * @param {string|object} props\r\n                 * @param {mixed} value\r\n                 * @returns {ES5Class}\r\n                 */\r\n                static: function (props?: any, value?: any) {\r\n\r\n                    if (typeof props == \"object\") {\r\n                        for (var key in props) {\r\n                            if (props.hasOwnProperty(key)) {\r\n                                var el = props[key];\r\n\r\n                                if (!inArray($ignore, key)) {\r\n                                    $classData.static[key] = el;\r\n                                    _defineProperty(ES5Class, key, el);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (typeof props == \"string\") {\r\n                        var key = props;\r\n                        if (!inArray($ignore, key)) {\r\n                            $classData.static[key] = value;\r\n                            _defineProperty(ES5Class, key, el);\r\n                        }\r\n                    }\r\n                    return ES5Class;\r\n                },\r\n\r\n                /**\r\n                 * Cập nhật các thuộc tính mới\r\n                 */\r\n                commit: function () {\r\n\r\n                    if (commited) {\r\n                        return ES5Class;\r\n                    }\r\n\r\n                    for (var key in $classData.constants) {\r\n                        if (Object.hasOwnProperty.call($classData.constants, key)) {\r\n                            if (!inArray(['constructor', ES5Class.__class], key)) {\r\n                                Object.defineProperty(ES5Class.prototype, key, {\r\n                                    value: $classData.constants[key],\r\n                                    enumerable: true,\r\n                                    configurable: false,\r\n                                    writable: false\r\n                                })\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // for (var key in $constants) {\r\n                    //     if (Object.hasOwnProperty.call($constants, key)) {\r\n                    //         var constData = $constants[key];\r\n                    //         Object.defineProperty(this, key, {\r\n                    //             get: constData.get,\r\n                    //             set: constData.set\r\n                    //         });\r\n                    //     }\r\n                    // }\r\n\r\n\r\n                    var methods = {};\r\n                    if ($classData.extends) {\r\n                        for (var std in $classData.extends) {\r\n                            if ($classData.extends.hasOwnProperty(std)) {\r\n                                var _extends = $classData.extends[std];\r\n                                for (var method in _extends.methods) {\r\n                                    if (_extends.methods.hasOwnProperty(method)) {\r\n                                        var cb = _extends.methods[method];\r\n                                        methods[method] = cb;\r\n                                    }\r\n                                }\r\n\r\n\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if ($classData.uses) {\r\n                        for (var key in $classData.uses) {\r\n                            if ($classData.uses.hasOwnProperty(key)) {\r\n                                var val = $classData.uses[key];\r\n                                if (typeof val == \"function\") {\r\n                                    methods[key] = val;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n                    for (var method in $classData.methods) {\r\n                        if ($classData.methods.hasOwnProperty(method)) {\r\n                            var cb = $classData.methods[method];\r\n                            methods[method] = cb;\r\n                        }\r\n                    }\r\n\r\n                    var mts = {};\r\n                    Object.assign(mts, methods);\r\n                    for (var key in mts) {\r\n                        if (mts.hasOwnProperty(key) && key != \"constructor\") {\r\n                            var mt = mts[key];\r\n                            __addMethod(key, mt);\r\n                        }\r\n                    }\r\n\r\n                    commited = true;\r\n                    // __contructs = [];\r\n                    if ($classData.constructs) {\r\n                        for (var fn in $classData.constructs) {\r\n                            if ($classData.constructs.hasOwnProperty(fn)) {\r\n                                __contructs.push($classData.constructs[fn]);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n                    if (!isEmpty($dynamics)) {\r\n                        for (var key in $dynamics) {\r\n                            if (Object.hasOwnProperty.call($dynamics, key)) {\r\n                                var val = $dynamics[key];\r\n                                __addAccessorKey(key);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n\r\n                    parseDataProps();\r\n                    return ES5Class;\r\n                },\r\n\r\n\r\n\r\n\r\n                /**\r\n                 * kiểm tra xem có phải là instance của StdClas không\r\n                 * @param {mixed} instance bien doi tuong can kiem tra\r\n                 */\r\n                isInstance: function (instance?: any) {\r\n                    if (_instanceof(instance, ES5Class)) return true;\r\n                    if (isObject(instance)) {\r\n                        if (typeof instance.constructor == \"function\") {\r\n                            if (instance.constructor.__type == \"class\") {\r\n                                var cl = instance.constructor;\r\n                                var parents = instance.constructor.getParents();\r\n                                if (!isEmpty(parents)) {\r\n                                    for (var key in parents) {\r\n                                        if (parents.hasOwnProperty(key)) {\r\n                                            var pa = parents[key];\r\n                                            if (pa.__class == ES5Class) return true;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    return false;\r\n                },\r\n\r\n\r\n                getExtends: function () {\r\n                    return $classData.extends;\r\n                },\r\n                getUses: function () {\r\n                    return $classData.uses;\r\n                },\r\n                getMethods: function () {\r\n                    return $classData.methods;\r\n                },\r\n                getProps: function () {\r\n                    return $classData.props;\r\n                },\r\n                getConstants: function () {\r\n                    return $classData.constants;\r\n                },\r\n                getContructs: function () {\r\n                    return $classData.constructs;\r\n                },\r\n                getParents: function () {\r\n                    return $classData.parents;\r\n                },\r\n                getParent: function () {\r\n                    return $classData.parent;\r\n                },\r\n                getStatic: function () {\r\n                    return $classData.static;\r\n                },\r\n                getIntances: function () {\r\n                    return $classData.instances;\r\n                },\r\n                getInits: function () {\r\n                    return $classData.inits;\r\n                },\r\n                getAccessorMethods: function () {\r\n                    return $classData.accessorMethods;\r\n                },\r\n                getBootMethods: function () {\r\n                    return $boots;\r\n                },\r\n                getInitMethods: function () {\r\n                    return $inits;\r\n                },\r\n                /**\r\n                 * Thêm phương thức\r\n                 * @param {string|string[]|object|functiong} method \r\n                 */\r\n                addBootMethod: function (method?: any) {\r\n                    addBootMethod.apply(null, arguments);\r\n                },\r\n                /**\r\n                 * Thêm phương thức\r\n                 * @param {string|string[]|object|functiong} method \r\n                 */\r\n                removeBootMethod: function (method?: any) {\r\n                    if (isString(method)) {\r\n                        if (typeof $boots[method]) {\r\n                            delete $boots[method];\r\n                        }\r\n                    }\r\n                    else if (isArray(method)) {\r\n                        for (var i = 0; i < method.length; i++) {\r\n                            var mt = method[i];\r\n                            if (isString(mt)) {\r\n                                if (typeof $boots[mt]) {\r\n                                    delete $boots[mt];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n\r\n                resetBootMethods: function () {\r\n                    $boots = {};\r\n                },\r\n\r\n\r\n                /**\r\n                * Thêm phương thức\r\n                * @param {string|string[]|object|functiong} method \r\n                */\r\n                removeInitMethod: function (method?: any) {\r\n                    if (isString(method)) {\r\n                        if (typeof $inits[method]) {\r\n                            delete $inits[method];\r\n                        }\r\n                    }\r\n                    else if (isArray(method)) {\r\n                        for (var i = 0; i < method.length; i++) {\r\n                            var mt = method[i];\r\n                            if (isString(mt)) {\r\n                                if (typeof $inits[mt]) {\r\n                                    delete $inits[mt];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n\r\n\r\n\r\n                /**\r\n                 * thêm dữ liệu vho clSS trước khi tạo mới\r\n                 * @param {string} key key hoặc object\r\n                 * @param {mixed} value phần tử cha\r\n                 * @returns {ES5Class}\r\n                 */\r\n                \"with\": function (key: any, value?: any) {\r\n                    var self = this;\r\n                    if (isObject(key)) {\r\n                        for (const k in key) {\r\n                            if (Object.hasOwnProperty.call(key, k)) {\r\n                                const valu = key[k];\r\n                                oneTimeData[k] = valu;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (isString(key)) {\r\n                        oneTimeData[key] = value;\r\n                    }\r\n                    return self;\r\n                },\r\n                withData: function (key: any, value?: any) {\r\n                    var self = this;\r\n                    if (isObject(key)) {\r\n                        for (const k in key) {\r\n                            if (Object.hasOwnProperty.call(key, k)) {\r\n                                const valu = key[k];\r\n                                oneTimeData[k] = valu;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (isString(key)) {\r\n                        oneTimeData[key] = value;\r\n                    }\r\n                    return self;\r\n                },\r\n\r\n                /**\r\n                 * thêm dữ liệu vho clSS trước khi tạo mới\r\n                 * @param {...} args key hoặc object\r\n                 * @returns {ES5Class}\r\n                 */\r\n                create: function createInstance(...args) {\r\n                    var self = this;\r\n                    return self.apply(null, args);\r\n                },\r\n\r\n\r\n\r\n                resetInitMethods: function () {\r\n                    $inits = {};\r\n                }\r\n\r\n\r\n\r\n\r\n            }\r\n        })\r\n\r\n\r\n        definePropertyGroup(ES5Class.prototype, {\r\n            configurable: false,\r\n            enumerable: false,\r\n            writable: false,\r\n            props: {\r\n                noReturn: NORETURN_VALUE,\r\n\r\n                \"static\": ES5Class,\r\n                /**\r\n                 * cập nhật thuộc tính\r\n                 * @param {boolean} override ghi ghi đè\r\n                 */\r\n                __update__properties__: function updateProperties(override?: any) {\r\n\r\n\r\n                    for (var key in $props) {\r\n                        if ($props.hasOwnProperty(key)) {\r\n                            var val = $props[key];\r\n                            _defineProperty(this, key, val);\r\n                        }\r\n                    }\r\n\r\n                },\r\n\r\n\r\n                __callStatic: function __callStatic(name?: any, args?: any) {\r\n                    if (typeof ES5Class[name] == \"function\") {\r\n                        return ES5Class[name].apply(ES5Class, isArray(args) ? args : []);\r\n                    }\r\n                    return false;\r\n                },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                // boot\r\n\r\n                /**\r\n                 * Thêm phương thức\r\n                 * @param {string|string[]|object|functiong} method \r\n                 */\r\n                addBootMethod: function (method?: any) {\r\n                    addBootMethod.apply(this, arguments);\r\n                },\r\n\r\n                /**\r\n                 * Thêm phương thức\r\n                 * @param {string|string[]|object|functiong} method \r\n                 */\r\n                removeBootMethod: function (method?: any) {\r\n                    ES5Class.removeBootMethod.apply(this, arguments);\r\n                },\r\n                /**\r\n                 * Thêm phương thức\r\n                 */\r\n                resetBootMethods: function (method?: any) {\r\n                    $boots = {};\r\n                },\r\n\r\n                /**\r\n                 * Thêm phương thức\r\n                 * @param {string|string[]|object|functiong} method \r\n                 */\r\n                removeInitMethod: function (method?: any) {\r\n                    ES5Class.removeInitMethod.apply(this, arguments);\r\n                },\r\n                /**\r\n                 * Thêm phương thức\r\n                 */\r\n                resetInitMethods: function (method?: any) {\r\n                    $inits = {};\r\n                },\r\n\r\n\r\n\r\n\r\n                /**\r\n                 * get Intance ID\r\n                 * @return {string}\r\n                 */\r\n                getInstanceID: function getInstanceID() {\r\n                    return this.__instance__id__;\r\n                },\r\n\r\n\r\n\r\n                __addAccessorValue__: function (objectData?: any) {\r\n                    if (isObject(objectData) && objectData.key) {\r\n                        var key = objectData.key;\r\n                        var g, s;\r\n                        if (typeof objectData.get == \"function\")\r\n                            g = objectData.get;\r\n                        if (typeof objectData.set == \"function\")\r\n                            s = objectData.set;\r\n                        var instanceID = this.__instance__id__;\r\n                        if (typeof $data[instanceID] == \"undefined\") $data[instanceID] = {};\r\n                        var isExists = typeof $data[instanceID][key] != \"undefined\";\r\n                        $data[instanceID][key] = typeof objectData.value != \"undefined\" ? objectData.value : null;\r\n                        if (isExists) return;\r\n                        var da = {\r\n                            get: function () {\r\n                                var value = $data[instanceID][key];\r\n                                if (g) {\r\n                                    var r = g.apply(this, [value]);\r\n                                    if (typeof r != \"undefined\") return r;\r\n                                }\r\n                                return value;\r\n                            },\r\n                            set: function set(value) {\r\n                                var stt = true;\r\n                                var oldVal = $data[instanceID][key];\r\n\r\n                                if (this.isDom && key == \"parent\") {\r\n                                    $data[instanceID][key] = value;\r\n                                    if (s) {\r\n                                        var a = s.call(this, value, oldVal);\r\n                                        if (a === false) stt = false;\r\n                                    }\r\n                                    if (!stt) {\r\n                                        $data[instanceID][key] = oldVal;\r\n                                    }\r\n                                    return $data[instanceID][key];\r\n                                }\r\n                                if (s) {\r\n                                    var a = s.call(this, value, oldVal);\r\n                                    if (a === false) stt = false;\r\n                                }\r\n\r\n                                if (stt) $data[instanceID][key] = value;\r\n                                return $data[instanceID][key];\r\n                            }\r\n                        };\r\n\r\n                        Object.defineProperty(this, key, da);\r\n                    }\r\n                },\r\n\r\n                __changeAccessorValue__: function (key?: any, value?: any) {\r\n                    var instanceID = this.__instance__id__;\r\n                    if (typeof $data[instanceID] == \"undefined\") return false;\r\n                    if (isString(key)) {\r\n\r\n                        $data[instanceID][key] = value;\r\n                    }\r\n\r\n                    else if (isObject(key)) {\r\n                        for (var k in key) {\r\n                            if (Object.hasOwnProperty.call(key, k)) {\r\n                                this.__changeAccessorValue__(k, key[k]);\r\n                            }\r\n                        }\r\n                    }\r\n                    return true;\r\n                },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n            }\r\n        })\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        function parseDataProps() {\r\n            var props = {};\r\n            if ($classData.extends) {\r\n                for (var std in $classData.extends) {\r\n                    if ($classData.extends.hasOwnProperty(std)) {\r\n                        var _extends = $classData.extends[std];\r\n                        for (var prop in _extends.props) {\r\n                            if (_extends.props.hasOwnProperty(prop)) {\r\n                                var cb = _extends.props[prop];\r\n                                props[prop] = cb;\r\n\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n\r\n            if ($classData.uses) {\r\n                for (var key in $classData.uses) {\r\n                    if ($classData.uses.hasOwnProperty(key)) {\r\n                        var val = $classData.uses[key];\r\n                        if (typeof val != \"function\") {\r\n                            // if ((!override && typeof this[key] == \"undefined\") || override == true) {\r\n                            props[key] = val;\r\n                            // }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (var prop in $classData.props) {\r\n                if ($classData.props.hasOwnProperty(prop)) {\r\n                    var cb = $classData.props[prop];\r\n                    props[prop] = cb;\r\n                    // if ((!override && typeof this[prop] == \"undefined\") || override == true) {\r\n                    //     $props[prop] = cb;\r\n                    // }\r\n                }\r\n            }\r\n\r\n            for (var key in props) {\r\n                if (props.hasOwnProperty(key)) {\r\n                    var val = props[key];\r\n                    if (key.substr(0, 1) == '$') {\r\n                        var ks = key.substr(1);\r\n                        // __addAccessorValue(this, ks, val);\r\n\r\n                        __addAccessorKey(ks);\r\n                        $dynamics[ks] = val;\r\n                    }\r\n                    else {\r\n                        $props[key] = val;\r\n                        // _defineProperty(this, key, val);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n\r\n        function addBootMethod(method) {\r\n            if (isString(method)) {\r\n                $boots[method] = [];\r\n            } else if (isArray(method)) {\r\n                method.map(function (mt) {\r\n                    if (isString(mt)) {\r\n                        $boots[mt] = [];\r\n                    }\r\n                });\r\n            } else if (isObject(method)) {\r\n                for (var key in method) {\r\n                    if (Object.hasOwnProperty.call(method, key)) {\r\n                        var params = method[key];\r\n                        $boots[key] = isArray(params) ? params : [params];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        function addInitMethod(method?: any) {\r\n            if (isString(method)) {\r\n                $inits[method] = [];\r\n            } else if (isArray(method)) {\r\n                method.map(function (mt) {\r\n                    if (isString(mt)) {\r\n                        $inits[mt] = [];\r\n                    }\r\n                });\r\n            } else if (isObject(method)) {\r\n                for (var key in method) {\r\n                    if (Object.hasOwnProperty.call(method, key)) {\r\n                        var params = method[key];\r\n                        $inits[key] = isArray(params) ? params : [params];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n        function isConst(key?: any) {\r\n            return Object.hasOwnProperty.call($classData.constants, key);\r\n        }\r\n\r\n        function throwConstError(className?: any, key?: any, value?: any) {\r\n            throw new Error(\"Không thể kế thừa \" + (typeof value == \"function\" ? \"phương thức\" : \"thuộc tính\") + \" [\" + key + \"] từ class [\" + className + \"] do trùng vời hàng số đã được khai báo\");\r\n        }\r\n\r\n\r\n        function addConstValue(key?: any, value?: any) {\r\n            $constants[key] = {\r\n                value: value,\r\n                set: function (val: any) {\r\n                    console.warn(\"bạn không thể set giá trị cho một hằng \" + key);\r\n                },\r\n                get: function () {\r\n                    return $constants[key] ? $constants[key].value : null;\r\n                }\r\n            };\r\n        }\r\n\r\n        /**\r\n         * khai bao thuoc tinh hoac phuong thuc\r\n         * @param {string} scope \r\n         * @param {string} key \r\n         * @param {*} value \r\n         */\r\n        function assignPropMethod(scope?: any, key?: any, value?: any) {\r\n            if (!isString(key)) return false;\r\n            var a = String(key).split(\"$\");\r\n            if (a.length == 2 && a[0].length) {\r\n                var s = a[0].toLowerCase();\r\n                if (s == \"const\" || s == \"final\") {\r\n                    if (!isConst(a[1])) {\r\n                        if (a[1] == \"constructor\") {\r\n                            if (typeof value == 'function') addConstructor(value);\r\n                        }\r\n\r\n                        // if (typeof value != \"function\" && !inArray($ignore, a[1])) {\r\n                        //     _defineProperty(ES5Class.prototype, a[1], value);\r\n                        // }\r\n                        if (typeof value == \"function\" && (a[1] == \"call\" || a[1] == \"caller\" || a[1] == \"__call\" || a[1] == \"__call__\")) {\r\n                            $calls.push(value);\r\n                        }\r\n                        // else{\r\n                        $classData.constants[a[1]] = value;\r\n                        // }\r\n\r\n                    } else {\r\n                        throw new Error(\"Bạn không thể ghi đè một Hằng\");\r\n                    }\r\n                }\r\n                else if (s == 'onset' || s == 'set') {\r\n                    if (typeof value == \"function\") {\r\n                        if (typeof $classData.accessorMethods[a[1]] == \"undefined\") {\r\n                            $classData.accessorMethods[a[1]] = {};\r\n                        }\r\n                        $classData.accessorMethods[a[1]].set = value;\r\n                    }\r\n\r\n                }\r\n                else if (s == 'onget' || s == 'get') {\r\n                    if (typeof value == \"function\") {\r\n                        if (typeof $classData.accessorMethods[a[1]] == \"undefined\") {\r\n                            $classData.accessorMethods[a[1]] = {};\r\n                        }\r\n                        $classData.accessorMethods[a[1]].get = value;\r\n                    }\r\n                }\r\n                else if (s == 'static') {\r\n                    ES5Class.static(a[1], value);\r\n                }\r\n                else if (!isConst(key)) {\r\n                    $classData.constants[a[1]] = value;\r\n                    if (typeof value == \"function\" && (a[1] == \"call\" || a[1] == \"caller\" || a[1] == \"__call\" || a[1] == \"__call__\")) {\r\n                        $calls.push(value);\r\n                    }\r\n                    else if (typeof $classData[scope] == \"object\") {\r\n                        if (typeof $classData.uses[key] != \"undefined\") delete $classData.uses[key];\r\n                        if (typeof $classData.methods[key] != \"undefined\") delete $classData.methods[key];\r\n                        if (typeof $classData.props[key] != \"undefined\") delete $classData.props[key];\r\n                        $classData[scope][key] = value;\r\n                    }\r\n                }\r\n            }\r\n            else if (!isConst(key)) {\r\n                let kl = String(key).toLowerCase();\r\n                if (typeof value == \"function\" && (kl == \"call\" || kl == \"caller\" || kl == \"__call\" || kl == \"__call__\")) {\r\n                    $calls.push(value);\r\n                }\r\n\r\n                else if (typeof $classData[scope] == \"object\") {\r\n                    if (typeof $classData.uses[key] != \"undefined\") delete $classData.uses[key];\r\n                    if (typeof $classData.methods[key] != \"undefined\") delete $classData.methods[key];\r\n                    if (typeof $classData.props[key] != \"undefined\") delete $classData.props[key];\r\n                    $classData[scope][key] = value;\r\n                }\r\n            }\r\n        }\r\n\r\n        function __addAccessorValue(instanceID?: any, key?: any, val?: any) {\r\n            if (typeof $data[instanceID] == \"undefined\") $data[instanceID] = {};\r\n            // if (typeof $data[instanceID][key] != \"undefined\") return false;\r\n            $data[instanceID][key] = val;\r\n            return true;\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        function __addAccessorKey(key: any) {\r\n            \r\n            var g, s;\r\n            if (typeof $classData.accessorMethods[key] == \"object\") {\r\n                if (typeof $classData.accessorMethods[key].get == \"function\")\r\n                    g = $classData.accessorMethods[key].get;\r\n                if (typeof $classData.accessorMethods[key].set == \"function\")\r\n                    s = $classData.accessorMethods[key].set;\r\n            }\r\n\r\n            Object.defineProperty(ES5Class.prototype, key, {\r\n                get: function get() {\r\n                    var value = $data[this.__instance__id__][key];\r\n                    if (g) {\r\n                        var r = g.apply(this, [value]);\r\n                        if (typeof r != \"undefined\") return r;\r\n                    }\r\n                    return value;\r\n                },\r\n                set: function set(value) {\r\n                    var stt = true;\r\n                    var oldVal = $data[this.__instance__id__][key];\r\n\r\n                    if (s) {\r\n                        var a = s.call(this, value, oldVal);\r\n                        if (a === false) stt = false;\r\n                    }\r\n\r\n                    if (stt) $data[this.__instance__id__][key] = value;\r\n                    return $data[this.__instance__id__][key];\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n\r\n        function __addMethod(name?: any, handle?: any) {\r\n            if (name.length > 6) {\r\n                var pre = name.substr(0, 6).toLowerCase();\r\n\r\n                var n = name.substr(6, 1).toLowerCase() + (name.length > 7 ? name.substr(7) : '');\r\n                if (inArray(['$onset', 'onset$', '$set', 'set$'], pre)) {\r\n                    if (typeof $classData.accessorMethods[n] == \"undefined\") {\r\n                        $classData.accessorMethods[n] = {};\r\n                    }\r\n                    $classData.accessorMethods[n].set = handle;\r\n                    return;\r\n                }\r\n                else if (inArray(['$onget', 'onget$', '$get', 'get$'], pre)) {\r\n                    if (typeof $classData.accessorMethods[n] == \"undefined\") {\r\n                        $classData.accessorMethods[n] = {};\r\n                    }\r\n                    $classData.accessorMethods[n].get = handle;\r\n                    return;\r\n                }\r\n            }\r\n            _defineProperty(ES5Class.prototype, name, handle);\r\n\r\n        };\r\n\r\n\r\n        function checkCreateNewInstanceByStaticConstructorCall() {\r\n            if (commited && ($props.dynamicCreateMode || $dynamics.dynamicCreateMode || $constants.dynamicCreateMode)) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n\r\n        ES5Class.__addAccessorKey = __addAccessorKey;\r\n        ES5Class.__addAccessorValue = __addAccessorValue;\r\n\r\n\r\n        if (isObject($class)) {\r\n            ES5Class.assign($class);\r\n        }\r\n        else if (isFunction($class)) {\r\n            addConstructor($class);\r\n        }\r\n        else if (isFunction($isGlobal)) {\r\n            addConstructor($isGlobal);\r\n        }\r\n\r\n\r\n\r\n        // if(typeof $constants.noReturn == \"undefined\"){\r\n        //     addConstValue('noReturn', NORETURN_VALUE)\r\n        // }\r\n\r\n        return ES5Class;\r\n\r\n    }(className, isGlobal);\r\n};\r\n\r\nconst _class = createClass;\r\nexport default createClass;\r\nexport { createClass, _class, ES5AbstractClass, ES5Instance };\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { assignValue, isBoolean, isObject } from '@app/_core/helpers/utils';\nimport { InpEvent } from '@app/_shared/shared.type';\n\n@Component({\n    template: ''\n})\nexport abstract class BaseInputComponent {\n    @Input() name: string = 'input';\n    @Input() value: any = \"\";\n    @Input() label: string = '';\n    @Input() placeholder: string = '';\n    @Input() valueType: string;\n    old: any = '';\n    @Output() subcribe = new EventEmitter<InpEvent>();\n\n\n    pendingStatus: boolean = false;\n    emitAfter(time: number = 0) {\n        if (this.pendingStatus) return false;\n        if (time < 0) time = 0;\n\n        if (!time) {\n            var ov = isObject(this.value) ? assignValue({}, this.value) : this.value;\n            var old = this.old;\n\n            this.subcribe.emit({\n                name: this.name,\n                value: ov,\n                old: old\n            });\n            this.old = ov;\n            return false;\n        }\n\n\n        this.pendingStatus = true;\n        setTimeout(() => {\n            var ov = isObject(this.value) ? assignValue({}, this.value) : this.value;\n            var old = this.old;\n            this.old = ov;\n            this.subcribe.emit({\n                name: this.name,\n                value: ov,\n                old: old\n            });\n            this.pendingStatus = false;\n\n        }, time);\n\n    }\n    parseValue(value) {\n        switch (this.valueType) {\n            case \"number\":\n                return Number(value);\n                break;\n\n            case 'boolean':\n                return isBoolean(value) ? value : Boolean(value);\n                break;\n            default:\n                break;\n        }\n\n        return value;\n    }\n\n\n    onChange(event) {\n        if (isObject(event) && Object.prototype.hasOwnProperty.call(event, 'value')) {\n            this.value = event.value;\n        }\n        if (isObject(this.old) && isObject(this.value)) {\n            if (JSON.stringify(this.old) !== JSON.stringify(this.value)) {\n                this.emit();\n            }\n        } else if (this.old !== this.value) {\n            this.emit();\n        }\n\n    }\n\n    emit() {\n        var ov = isObject(this.value) ? assignValue({}, this.value) : this.value;\n        var old = this.old;\n\n        this.subcribe.emit({\n            name: this.name,\n            value: ov,\n            old: old\n        });\n        this.old = ov;\n    }\n\n    set val(value) {\n        this.value = value;\n        this.onChange({ type: \"change\", value: value });\n    }\n\n}\n","export enum Role {\r\n  ADMIN = 'ROLE_ADMIN',\r\n  AGENCY = 'ROLE_AGENCY',\r\n  AFFILIATE = 'ROLE_AFFILIATE'\r\n}\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { TemplateEventsService } from '@app/template-page/_store/events.service';\nimport { TransparentBase64Image } from '@app/_3D/libs/three.libs';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { FG_BGSIZES, FG_DEFAULT_DATA, FG_ITEM, FG_POSKEYS, FG_REPEAT } from '@app/_shared/shared.type';\n\nimport { EditorIO, EditorMethods } from '../../../../base/editor-io';\n\n@Component({\n    selector: 'app-foreground-item',\n    templateUrl: './foreground-item.component.html',\n    styleUrls: ['./foreground-item.component.scss']\n})\nexport class ForegroundItemComponent extends BaseComponent implements OnInit {\n\n    @Input() data: FG_ITEM = null;\n    @Output() update = new EventEmitter<any>();\n    @Output() clickDelete = new EventEmitter<FG_ITEM>();\n    isActive: boolean = false;\n    position: { x: string[], y: string[], xy: string[] } = FG_POSKEYS;\n    repeatOptions = FG_REPEAT;\n    sizeOptions = FG_BGSIZES;\n    posimg: string = TransparentBase64Image;\n\n    constructor(\n        private events: AppEditorEventService\n    ) {\n        super();\n    }\n    onInit(): void {\n        let a = assignValue({}, FG_DEFAULT_DATA);\n        this.data = assignValue(a, this.data);\n    }\n\n    toggleActive() {\n        this.isActive = !this.isActive;\n    }\n\n    onClickDelete() {\n        this.clickDelete.emit(this.data);\n    }\n\n    onChange(event) {\n        if (event.value != this.data[event.name]) {\n            this.data[event.name] = event.value;\n        }\n        this.update.emit(this.data);\n        if (event.name == \"url\") {\n            this.emitRefresh();\n        }\n\n    }\n\n    changePosition(x, y) {\n        this.data.position.x = x;\n        this.data.position.y = y;\n        this.update.emit(this.data);\n    }\n\n    modalCancelSelect() {\n        this.emitRefresh();\n    }\n\n    emitRefresh() {\n        setTimeout(() => {\n            this.subEvents.emit(\"tab.scene.refresh\");\n        }, 200);\n    }\n}\n\n","<div class=\"fg-item\" [class.active]=\"isActive\">\n    <div class=\"item-header\">\n        <div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\" class=\"fg-group\">\n            <div nz-col class=\"gutter-row\" [nzSpan]=\"19\">\n                <div class=\"inner-box fg-name\" (click)=\"toggleActive()\">\n                    <span class=\"icon\">\n                        <ng-container *ngIf=\"isActive; then showTemplate; else hideTemplate\"></ng-container>\n                        <ng-template #showTemplate>\n                            <i nz-icon nzType=\"down\" nzTheme=\"outline\"></i>\n                        </ng-template>\n                        <ng-template #hideTemplate>\n                            <i nz-icon nzType=\"right\" nzTheme=\"outline\"></i>\n                        </ng-template>\n                    </span>\n                    <span class=\"image\">\n                        <img src=\"{{data.url}}\" alt=\"{{data.name}}\">\n                    </span>\n                    <span class=\"name\">{{data.name}}</span>\n                </div>\n            </div>\n            <div nz-col class=\"gutter-row\" [nzSpan]=\"5\">\n                <div class=\"inner-box text-right\">\n                    <div class=\"delete\" (click)=\"onClickDelete()\">\n                        <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        \n        \n    </div>\n    <div class=\"item-body\" *ngIf=\"isActive\">\n        <div class=\"inputs\">\n            <inp-text-group class=\"inp-group-item-first\" name=\"name\" label=\"Foreground Name\" [(value)]=\"data.name\" (subcribe)=\"onChange($event)\"></inp-text-group>\n            <inp-texture-group class=\"inp-group-item\" name=\"url\" label=\"Foreground Image\" [(value)]=\"data.url\" (subcribe)=\"onChange($event)\" [output]=\"true\" (modalCancelSelect)=\"modalCancelSelect()\" [listType]=\"'foreground'\"></inp-texture-group>\n            <inp-select-group class=\"inp-group-item\" name=\"repeat\" [(value)]=\"data.repeat\" [options]=\"repeatOptions\" (subcribe)=\"onChange($event)\"></inp-select-group>\n            <inp-select-group class=\"inp-group-item\" name=\"size\" [(value)]=\"data.size\" [options]=\"sizeOptions\" (subcribe)=\"onChange($event)\"></inp-select-group>\n            <div class=\"inp-group-item\">\n                <div class=\"label\">{{\"Image position\"|translate}}</div>\n                <div class=\"input-group pos-group\">\n                    <div class=\"row\" *ngFor=\"let y of position.y; let i=index\">\n                        <div class=\"col\" *ngFor=\"let x of position.x; let i=index\">\n                            <div class=\"pos-item\" (click)=\"changePosition(x,y)\" [class.active]=\"x==data.position.x&&y==data.position.y\">\n                                <img src=\"{{posimg}}\" alt=\"{{x}}-{{y}}\">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <inp-range-group class=\"input-group-item\" name=\"opacity\" [(value)]=\"data.opacity\" [step]=\"0.01\" [min]=\"0\" [max]=\"1\" (subcribe)=\"onChange($event)\"></inp-range-group>\n        </div>\n    </div>\n</div>","import { AuthActions, AuthActionTypes } from './auth.actions';\r\nimport { User } from './../models/user';\r\nimport { createFeatureSelector, createReducer, on } from '@ngrx/store';\r\n\r\nexport interface AuthState {\r\n  user: User | null;\r\n  errorMessage: string | null;\r\n  isAuthenticating: boolean;\r\n  isAuthenticated: boolean;\r\n}\r\n\r\nexport const initialState: AuthState = {\r\n  user: null,\r\n  errorMessage: null,\r\n  isAuthenticating: false,\r\n  isAuthenticated: false,\r\n};\r\n\r\nexport function reducer(state = initialState, action: AuthActions): AuthState {\r\n  switch (action.type) {\r\n    case AuthActionTypes.LOGIN:\r\n      return {\r\n        ...state,\r\n        isAuthenticating: true,\r\n        errorMessage: null,\r\n        isAuthenticated: false,\r\n      };\r\n    case AuthActionTypes.LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        errorMessage: null,\r\n        isAuthenticated: true,\r\n        isAuthenticating: false,\r\n        user: {\r\n          accessToken: action.payload.accessToken,\r\n          id: action.payload.id,\r\n          email: action.payload.email,\r\n          username: action.payload.username,\r\n        },\r\n      };\r\n\r\n    case AuthActionTypes.LOGIN_FAILURE:\r\n      return {\r\n        ...state,\r\n        errorMessage: action.payload.error,\r\n        isAuthenticating: false,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const selectAuthState = createFeatureSelector<AuthState>('authStore');\r\n","import { Directive, HostListener, EventEmitter, Output, ElementRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appScrollable]',\r\n})\r\nexport class ScrollableDirective {\r\n  @Output() scrollBottom = new EventEmitter();\r\n  @Output() scrollTop = new EventEmitter();\r\n  @Output() scrollDown = new EventEmitter();\r\n\r\n  constructor(public el: ElementRef) {}\r\n\r\n  @HostListener('scroll', ['$event'])\r\n  onScroll(event) {\r\n    try {\r\n      const top = event.target.scrollTop;\r\n      const height = this.el.nativeElement.scrollHeight;\r\n      const offset = this.el.nativeElement.offsetHeight;\r\n      if (top > 0) {\r\n        this.scrollDown.emit();\r\n      }\r\n      // emit bottom event\r\n      if (top > height - offset - 1) {\r\n        this.scrollBottom.emit();\r\n      }\r\n\r\n      // emit top event\r\n      if (top === 0) {\r\n        this.scrollTop.emit();\r\n      }\r\n    } catch (err) {}\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ObjectToolbarService extends EventManagerService {\n\n    constructor() {\n        super();\n    }\n\n    show(type:string, secret_key:string, mode?:string) {\n        this.emit({\n            type: \"show\",\n            data: {\n                type: type,\n                secret_key: secret_key,\n                mode: mode\n            }\n        })\n    }\n    hide() {\n        this.emit({\n            type: \"hide\"\n        })\n    }\n\n    changeMode(mode){\n        this.emit({\n            type: \"mode.change\",\n            mode: mode\n        })\n    }\n    selectMode(mode){\n        this.emit({\n            type: \"mode.select\",\n            mode: mode\n        })\n    }\n    \n}\n","import { Component, OnInit } from '@angular/core';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n  selector: 'inp-switch-group',\n  templateUrl: './inp-switch-group.component.html',\n  styleUrls: ['./inp-switch-group.component.scss']\n})\nexport class InpSwitchGroupComponent extends BaseInpGroupComponent implements OnInit {\n\n  constructor() {\n    super();\n  }\n\n  onInit(): void {\n    this.inpInit();\n  }\n\n}\n","<div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\" class=\"input-group\">\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"18\">\n        <div class=\"inner-box\">{{label | translate}}</div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"6\">\n        <div class=\"inner-box text-right\">\n            <inp-switch\n                [name]=\"name\"\n                [(value)]=\"value\"\n                (subcribe)=\"onChange($event)\"\n            ></inp-switch>\n        </div>\n    </div>\n</div>","import { ChangeDetectorRef, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\nimport { BaseInpGroupComponent } from '../base-inp-group/base-inp-group.component';\n\n@Component({\n    selector: 'inp-vector3-group',\n    templateUrl: './inp-vector3-group.component.html',\n    styleUrls: ['./inp-vector3-group.component.scss']\n})\nexport class InpVector3GroupComponent extends BaseInpGroupComponent implements OnInit {\n\n    @Input() btnCenter: boolean = false;\n\n    @Input() events: EventManagerService;\n\n    degreSymbol: string = \"°\";\n    _value: any = {\n        x: 0,\n        y: 0,\n        z: 0\n    };\n\n    canSync: boolean = false;\n\n    vectorCallback = e => {\n        if (e.name == this.name) {\n            \n            if (e.value) {\n                this.value = e.value;\n            }\n            this.syncFromParent();\n        }\n    };\n\n\n    constructor(private cd: ChangeDetectorRef) {\n        super();\n    }\n\n\n\n    onInit(): void {\n        this.inpInit();\n        this.syncFromParent();\n        this.canSync = true;\n        if (this.events) {\n            this.events.on(\"props.vector.change\", this.vectorCallback);\n        }\n    }\n\n    onDestroy() {\n        if (this.events) {\n            this.events.off(\"props.vector.change\", this.vectorCallback);\n        }\n    }\n\n    syncFromParent() {\n        assignValue(this._value, {\n            x: this.value.x,\n            y: this.value.y,\n            z: this.value.z\n        });\n        this.cd.detectChanges();\n    }\n\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (this.canSync) {\n            if (changes.value) {\n                this.syncFromParent();\n            }\n        }\n    }\n\n    updateVector(event) {\n        this.canSync = false;\n        assignValue(this.value, {\n            x: this._value.x,\n            y: this._value.y,\n            z: this._value.z,\n\n        })\n        this.emitChange();\n        this.canSync = true;\n    }\n    setCenter() {\n        this.value.x = 0;\n        this.value.z = 0;\n        this.syncFromParent();\n        this.emitChange();\n        this.cd.detectChanges();\n    }\n\n\n}\n","<ng-container *ngIf=\"btnCenter; then centerTemplate; else labelTemplate\"></ng-container>\n<ng-template #centerTemplate>\n    <div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\">\n        <div nz-col class=\"gutter-row\" [nzSpan]=\"16\">\n            <div class=\"label\">{{label | translate}}</div>\n        </div>\n        <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n            <div class=\"text-right\">\n                <button nz-button nzType=\"default\" [nzSize]=\"'small'\" (click)=\"setCenter()\">Center</button>\n            </div>\n        </div>\n    </div>\n</ng-template>\n<ng-template #labelTemplate>\n    <div class=\"label\">{{label | translate}}</div>    \n</ng-template>\n\n\n<inp-vector3\n    [name]=\"name\"\n    [(value)]=\"_value\"\n    (subcribe)=\"updateVector($event)\"\n></inp-vector3>","import { AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\r\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\r\nimport { getArguments, getTimeStamp, isArray, isBoolean, isCallable, isEmpty, isFunction, isNumber, isObject, isString, objectHasKey } from '@app/_core/helpers/utils';\r\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\r\nimport { CallbackFunction } from '@app/_shared/shared.type';\r\n\r\ntype Listenner = (...args: any[]) => any;\r\n\r\n/**\r\n * mang chua cac object bao gom service va cac event\r\n */\r\ntype EventContainers = Array<{\r\n    service: EventManagerService,\r\n    events: {\r\n        [type: string]: [[Listenner, boolean]]\r\n    }\r\n}>;\r\n\r\nexport type EventEmit = {\r\n    type?: string,\r\n    data?: any,\r\n    [key: string]: any\r\n}\r\nexport type Listener = (event?: EventEmit) => any\r\n\r\n\r\nexport type OnEventListener = {\r\n    [event: string]: (Listener | string)\r\n}\r\n\r\nexport interface BaseComponent {\r\n    /**\r\n     * the method will call before instance constructor method\r\n     * \r\n     */\r\n    boot?(): void\r\n    /**\r\n     * the method will call before instance constructor method like as boot\r\n     * \r\n     */\r\n    onBoot?(): void\r\n\r\n    /**\r\n     * method will call on default ngOnInit defined in BaseComponent\r\n     */\r\n    initFirst?(): void\r\n    /**\r\n         * method will call on default ngOnInit defined in BaseComponent\r\n         */\r\n    initOnce?(): void\r\n\r\n    /**\r\n     * method will call on default ngOnInit\r\n     */\r\n    init?(): void\r\n    /**\r\n     * method alias init\r\n     */\r\n    onInit?(): void\r\n\r\n\r\n    afterViewInit?(): void\r\n    /**\r\n     * method alias init\r\n     */\r\n    onAfterViewInit?(): void\r\n\r\n    /**\r\n     * the method will call on default ngOnDestroy defined in BaseComponent\r\n     */\r\n    destroy?(): void\r\n    /**\r\n     * alias \r\n     */\r\n    onDestroy?(): void\r\n\r\n    onChangeSubEvents?(): void\r\n\r\n\r\n    // doAfterViewInit?(fn: CallbackFunction, time: number = 100): any\r\n    // doAfterViewInit?(fn: CallbackFunction, args:any[], time: number = 100): any\r\n\r\n}\r\n\r\n@Component({\r\n    template: ''\r\n})\r\nexport abstract class BaseComponent implements OnInit, OnDestroy, AfterViewInit {\r\n    [prop: string]: any\r\n\r\n    // @Input() moduleKey: string = '';\r\n    // @Input() eventService: EventManagerService = null;\r\n    moduleKey: string = '';\r\n    // @Input() eventService: EventManagerService = null;\r\n\r\n    @Output() emitter = new EventEmitter<any>();\r\n\r\n    eventServiceContainers: EventContainers = [];\r\n\r\n    isFocus: boolean = false;\r\n    isInited: boolean = false;\r\n\r\n    subEvents: AppEditorEventService = null;\r\n\r\n    isChangeSubEvents: boolean = false;\r\n\r\n    __show__: boolean = true;\r\n\r\n    __refresh_expire__: number = getTimeStamp();\r\n    __refresh_status__: boolean = false;\r\n    viewInited: boolean = false;\r\n\r\n\r\n    constructor() {\r\n        Object.defineProperty(this, \"_listeners\", {\r\n            configurable: false,\r\n            enumerable: false,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dispatchedEvents\", {\r\n            configurable: false,\r\n            enumerable: false,\r\n            value: {}\r\n        });\r\n        if (typeof this.boot == \"function\") {\r\n            this.boot();\r\n        }\r\n        if (typeof this.onBoot == \"function\") {\r\n            this.onBoot();\r\n        }\r\n    }\r\n    ngOnInit(): void {\r\n        this.isFocus = true;\r\n        this.isChangeSubEvents = false;\r\n        // if (objectHasKey(this, 'events') && this.events && this.moduleKey) {\r\n        if (objectHasKey(this, 'events') && this.events) {\r\n            const sub = this.events;\r\n            // console.log(sub);\r\n            if (sub && sub !== this.subEvents) {\r\n                this.subEvents = sub;\r\n                this.deactiveEventServiceRegistered(this.subEvents);\r\n                this.deregisterAllEventService(this.subEvents);\r\n                this.isChangeSubEvents = true;\r\n                if (typeof this.onChangeSubEvents == \"function\") {\r\n                    this.onChangeSubEvents();\r\n                    this.activeEventServiceRegistered(this.subEvents);\r\n                }\r\n            }\r\n        }\r\n        if (!this.isInited) {\r\n            if (typeof this.initOnce == \"function\") {\r\n                this.initOnce();\r\n            }\r\n            else if (typeof this.initFirst == \"function\") {\r\n                this.initFirst();\r\n            }\r\n        }\r\n        if (typeof this.init == \"function\") {\r\n            this.init();\r\n        }\r\n        if (typeof this.onInit == \"function\") {\r\n            this.onInit();\r\n        }\r\n\r\n\r\n        this.isChangeSubEvents = false;\r\n    }\r\n    ngOnDestroy(): void {\r\n        //Called once, before the instance is destroyed.\r\n        //Add 'implements OnDestroy' to the class.\r\n        this.isFocus = false;\r\n        if (typeof this.destroy == \"function\") {\r\n            this.destroy()\r\n        }\r\n        if (typeof this.onDestroy == \"function\") {\r\n            this.onDestroy()\r\n        }\r\n        if (typeof this.onChangeSubEvents == \"function\") {\r\n            this.deactiveEventServiceRegistered(this.subEvents);\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.viewInited = true;\r\n        if (typeof this.afterViewInit == \"function\") {\r\n            this.afterViewInit();\r\n        }\r\n        if (typeof this.onAfterViewInit == \"function\") {\r\n            this.onAfterViewInit();\r\n        }\r\n    }\r\n\r\n\r\n    doAfterViewInit(fn: CallbackFunction, ...args: any[]) {\r\n        if (this.viewInited) {\r\n            var params: any[] = [];\r\n            if (args.length >= 1) {\r\n                for (let index = 0; index < args.length; index++) {\r\n                    const v = args[index];\r\n                    if (isArray(v)) {\r\n                        params = v;\r\n                    }\r\n                }\r\n            }\r\n            return fn(...params);\r\n        }\r\n        var time = 100;\r\n        if (args.length >= 1) {\r\n            for (let index = 0; index < args.length; index++) {\r\n                const v = args[index];\r\n                if (isNumber(v) && v > 0) {\r\n                    time = v;\r\n                }\r\n            }\r\n        }\r\n        return setTimeout(() => this.doAfterViewInit(fn, ...args), time);\r\n    }\r\n\r\n    __refresh__callback__(time: number = 100) {\r\n        if (getTimeStamp() >= this.__refresh_expire__ && this.__refresh_status__) {\r\n            this.__refresh_status__ = false;\r\n            this.__show__ = true;\r\n            if (this.cd) {\r\n                this.cd.detectChanges();\r\n            }\r\n            return true;\r\n        }\r\n        if (time <= 0) time = 10;\r\n        return setTimeout(() => this.__refresh__callback__(), time);\r\n    }\r\n\r\n    refresh(time: number = 10) {\r\n        if (time <= 0) time = 10;\r\n        if (!this.__refresh_status__) this.__refresh_expire__ = getTimeStamp() + time;\r\n        else this.__refresh_expire__ += time;\r\n        if (!this.__refresh_status__) this.__refresh_status__ = true;\r\n        if (this.__show__) {\r\n            if (this.cd) {\r\n                this.cd.detectChanges();\r\n            }\r\n            this.__show__ = false;\r\n        }\r\n        this.__refresh__callback__(20);\r\n    }\r\n    /**\r\n     * đang ký dịch vụ xử lý xự kiện\r\n     * @param service dịch vụ\r\n     * @param type sự kiện\r\n     * @param listenner hàm xử lý\r\n     * @param disptch gọi ngay\r\n     */\r\n    registerEventService(service: EventManagerService | any, type: any, listenner?: Listenner | boolean, disptch?: boolean) {\r\n        let events: {\r\n            [type: string]: [[Listenner, boolean]]\r\n        } = {};\r\n        if (isObject(type)) {\r\n            let dp = isBoolean(listenner) ? (listenner) : disptch;\r\n            for (const key in type) {\r\n                if (Object.prototype.hasOwnProperty.call(type, key)) {\r\n                    const callback = type[key];\r\n                    if (typeof callback == \"function\") {\r\n                        let k = key.split(\"|\");\r\n\r\n\r\n                        const d: any = k.length > 1 ? (k[1] == \"dispatch\" ? true : dp) : dp;\r\n                        // service.on(k[0], callback, d);\r\n                        events[k[0]] = [[callback, d]];\r\n                    }\r\n                }\r\n            }\r\n        } else if (isString(type) && isCallable(listenner)) {\r\n            // service.on(type, listenner, disptch);\r\n            events[type] = [[listenner as Listenner, disptch]];\r\n        }\r\n\r\n        let index = -1;\r\n\r\n        for (let i = 0; i < this.eventServiceContainers.length; i++) {\r\n            const container = this.eventServiceContainers[i];\r\n            if (container.service == service) {\r\n                index = i;\r\n                for (const key in events) {\r\n                    if (Object.prototype.hasOwnProperty.call(events, key)) {\r\n                        const ev = events[key][0];\r\n                        if (typeof container.events[key] == \"undefined\") {\r\n                            container.events[key] = [ev];\r\n                        } else {\r\n                            container.events[key].push(ev);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        if (index == -1) {\r\n            this.eventServiceContainers.push({\r\n                service: service,\r\n                events: events\r\n            })\r\n        }\r\n    }\r\n\r\n    activeEventServiceRegistered(service: EventManagerService | any, type?: any) {\r\n        this.eventServiceContainers.map(container => {\r\n            if (container.service == service) {\r\n                if (type) {\r\n                    if (isString(type)) {\r\n                        if (isArray(container.events[type])) {\r\n                            container.events[type].map(listennerParams => {\r\n                                container.service.removeEventListener(type, listennerParams[0]);\r\n                                container.service.addEventListener(type, listennerParams[0], listennerParams[1])\r\n\r\n                            })\r\n                        }\r\n                    } else if (isArray(type)) {\r\n                        type.map((t) => {\r\n                            if (isArray(container.events[t])) {\r\n                                container.events[t].map(listennerParams => {\r\n                                    container.service.removeEventListener(t, listennerParams[0]);\r\n                                    container.service.addEventListener(t, listennerParams[0], listennerParams[1])\r\n\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    for (const key in container.events) {\r\n                        if (Object.prototype.hasOwnProperty.call(container.events, key)) {\r\n                            const list = container.events[key];\r\n                            list.map(listennerParams => {\r\n                                container.service.removeEventListener(key, listennerParams[0]);\r\n                                container.service.addEventListener(key, listennerParams[0], listennerParams[1])\r\n\r\n                            });\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    deactiveEventServiceRegistered(service: EventManagerService | any, type?: any) {\r\n        this.eventServiceContainers.map(container => {\r\n            if (container.service == service) {\r\n                if (type) {\r\n                    if (isString(type)) {\r\n                        if (isArray(container.events[type])) {\r\n                            container.events[type].map(listennerParams => {\r\n                                container.service.removeEventListener(type, listennerParams[0]);\r\n                                // container.service.addEventListener(type, listennerParams[0], listennerParams[1])\r\n\r\n                            })\r\n                        }\r\n                    } else if (isArray(type)) {\r\n                        type.map((t) => {\r\n                            if (isArray(container.events[t])) {\r\n                                container.events[t].map(listennerParams => {\r\n                                    container.service.removeEventListener(t, listennerParams[0]);\r\n                                    // container.service.addEventListener(t, listennerParams[0], listennerParams[1])\r\n\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    for (const key in container.events) {\r\n                        if (Object.prototype.hasOwnProperty.call(container.events, key)) {\r\n                            const list = container.events[key];\r\n                            list.map(listennerParams => {\r\n                                container.service.removeEventListener(key, listennerParams[0]);\r\n                                // container.service.addEventListener(key, listennerParams[0], listennerParams[1])\r\n\r\n                            });\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    deregisterEventService(service: EventManagerService | any, type?: any, listenner?: Listenner) {\r\n        this.eventServiceContainers.map((container, index) => {\r\n            if (container.service == service) {\r\n                if (type) {\r\n                    if (isString(type)) {\r\n                        if (isArray(container.events[type])) {\r\n                            container.events[type].map((listennerParams, i) => {\r\n                                if (listenner) {\r\n                                    if (listenner == listennerParams[0]) {\r\n                                        container.service.removeEventListener(type, listennerParams[0]);\r\n                                        container.events[type].splice(i, 1);\r\n                                    }\r\n                                } else {\r\n                                    container.service.removeEventListener(type, listennerParams[0]);\r\n                                    container.events[type].splice(i, 1);\r\n                                }\r\n\r\n                            })\r\n                        }\r\n                    } else if (isArray(type)) {\r\n                        type.map((t) => {\r\n                            if (isArray(container.events[t])) {\r\n                                container.events[t].map(listennerParams => {\r\n                                    container.service.removeEventListener(t, listennerParams[0]);\r\n                                });\r\n                                container.events[t].splice(0);\r\n                                delete container.events[t];\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    for (const key in container.events) {\r\n                        if (Object.prototype.hasOwnProperty.call(container.events, key)) {\r\n                            const list = container.events[key];\r\n                            list.map(listennerParams => {\r\n                                container.service.removeEventListener(key, listennerParams[0]);\r\n                                // container.service.addEventListener(key, listennerParams[0], listennerParams[1])\r\n\r\n                            });\r\n                            container.events[key].splice(0);\r\n                            delete container.events[key];\r\n\r\n                        }\r\n                    }\r\n                    this.eventServiceContainers.splice(index, 1);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    deregisterAllEventService(service?: EventManagerService | any) {\r\n        this.eventServiceContainers.map((container, index) => {\r\n            if (!service || service === container.service) {\r\n                for (const key in container.events) {\r\n                    if (Object.prototype.hasOwnProperty.call(container.events, key)) {\r\n                        const list = container.events[key];\r\n                        list.map(listennerParams => {\r\n                            container.service.removeEventListener(key, listennerParams[0]);\r\n                        });\r\n                        container.events[key].splice(0);\r\n                        delete container.events[key];\r\n\r\n                    }\r\n                }\r\n                this.eventServiceContainers.splice(index, 1);\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * chuẩn hóa hàn lắng nghe sự kiện\r\n     * @param {string|function} handler tên phương thức hoạc hàm handler\r\n     * @returns function\r\n     */\r\n\r\n    protected __parseEventHandler(handler: any): (...args: any[]) => any {\r\n        var self = this;\r\n        if (typeof handler == \"function\") {\r\n            return handler;\r\n        }\r\n        var fnt = handler ? handler : function (e) {\r\n            console.log(e);\r\n        };\r\n\r\n        if (typeof handler == \"string\") {\r\n            var params = [];\r\n            var handleParams = handler.split(\":\");\r\n            if (handleParams.length == 2) {\r\n                handler = handleParams[0];\r\n                params = handleParams[1].split(\",\").map(function (s) { return s.trim(); });\r\n\r\n            }\r\n\r\n            fnt = function (e) {\r\n                var args = [e];\r\n                params.map(function (p) { args.push(p); });\r\n\r\n                if (typeof self[handler] == \"function\") {\r\n                    return self[handler].apply(self, args);\r\n                }\r\n            };\r\n\r\n\r\n        }\r\n        return fnt;\r\n    }\r\n\r\n    /**\r\n     * lắng nghe sự kiện\r\n     * @param {string} type loại hoạc tên sự kiện\r\n     * @param {function|string} handler hàm hoặc tên phương thức xử lý sự kiện\r\n     * @param {boolean} dispatch Thực thi trên tất cả các sự kiện trước đó\r\n     * @returns this\r\n     */\r\n    protected __addEventListener(type: string, handler?: Listener, dispatch?: boolean) {\r\n        var self = this;\r\n        var listener = this.__parseEventHandler(handler);\r\n\r\n        if (this._listeners === undefined || this._listeners === null) this._listeners = {};\r\n\r\n        type = String(type).toLowerCase();\r\n\r\n\r\n\r\n        // if (isDomEvent(type)) return this.addDomEvent(type, listener, DEFAULT_VALUE);\r\n        const listeners = this._listeners;\r\n\r\n        if (listeners[type] === undefined) {\r\n\r\n            listeners[type] = [];\r\n\r\n        }\r\n        if (dispatch === true) {\r\n            this.__handleDispatchedEvents(type, listener);\r\n        }\r\n\r\n        if (listeners[type].indexOf(listener) === - 1) {\r\n            listeners[type].push(listener);\r\n        }\r\n        return listener;\r\n    }\r\n\r\n    /**\r\n     * Kiểm tra sự kiện có tồn tại hay không\r\n     * @param {string} type tên sự kiện\r\n     * @param {function} listener hàm xử lý\r\n     * @returns {boolean}\r\n     */\r\n    protected __hasEventListener(type: string, listener?: Listener): boolean {\r\n\r\n        if (this._listeners === undefined || this._listeners === null) return false;\r\n\r\n        const listeners = this._listeners;\r\n        type = String(type).toLowerCase();\r\n        return listeners[type] !== undefined && (listener ? listeners[type].indexOf(listener) !== - 1 : true);\r\n\r\n    }\r\n\r\n    /**\r\n     * Xóa / Gỡ sự kiện\r\n     * @param {string} type tên sự kiện\r\n     * @param {function} listener hàm xử lý\r\n     * @returns {boolean}\r\n     */\r\n    protected __removeEventListener(type: string, listener?: Listener): boolean {\r\n        if (this._listeners === undefined || this._listeners === null) return false;\r\n        type = String(type).toLowerCase();\r\n        const listeners = this._listeners;\r\n        const listenerArray = listeners[type];\r\n        if (listenerArray !== undefined) {\r\n            if (!listener) {\r\n                this._listeners[type].splice(0, this._listeners[type].length);\r\n                return true;\r\n            }\r\n            const index = listenerArray.indexOf(listener);\r\n            if (index !== - 1) {\r\n                listenerArray.splice(index, 1);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Tạo, gọi ra một sự kiện\r\n     * @param {string|object} event Tên hoặc sự kiện\r\n     * @param {*} data dữ liệu\r\n     * @param {boolean} log lưu lại du lieu khi emit\r\n     * @returns {boolean}\r\n     */\r\n    protected __dispatchEvent(event: (EventEmit | String), data?: any, log?: boolean): boolean {\r\n        if (this._listeners === undefined || this._listeners === null || !event) return null;\r\n\r\n        var e: any = {};\r\n        if (isString(event)) {\r\n            e.type = event;\r\n            if (data) {\r\n                e.data = data;\r\n            }\r\n            // console.log(event, data);\r\n        } else if (isObject(event)) {\r\n            e = event;\r\n            if (!e.type) return false;\r\n            if (!e.data && data) {\r\n                e.data = data;\r\n            }\r\n            if (isBoolean(data) && typeof log == \"undefined\") {\r\n                log = data;\r\n            }\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n        if (e.constructor === Object) e.type = String(e.type).toLowerCase();\r\n        const listeners = this._listeners;\r\n        const listenerArray = listeners[e.type];\r\n        var s = true;\r\n        if (!e.target) {\r\n            e.target = this;\r\n        }\r\n\r\n        if (!e.stopImmediatePropagation)\r\n            e.stopImmediatePropagation = function () {\r\n                s = false;\r\n            };\r\n\r\n        if (log === true) {\r\n            this.__addDispatchedEvent(e);\r\n        }\r\n\r\n\r\n        if (listenerArray !== undefined) {\r\n            // Make a copy, in case listeners are removed while iterating.\r\n            const array1 = listenerArray.slice(0);\r\n            var rs: any[] = [];\r\n            for (var i = 0, l = array1.length; i < l; i++) {\r\n                let a = array1[i].call(this, e);\r\n                if (!s) break;\r\n                if (a !== undefined) {\r\n                    rs.push(a)\r\n                }\r\n\r\n            }\r\n            if (s && rs.length) {\r\n                return rs.length == 1 && array1.length == 1 ? rs[0] : rs;\r\n            }\r\n            return s;\r\n        }\r\n\r\n    }\r\n    /**\r\n     * lắng nghe sự kiện\r\n     * @param {string} type loại hoạc tên sự kiện\r\n     * @param {function|string} listener hàm hoặc tên phương thức xử lý sự kiện\r\n     * @param {boolean} dispatch có cần cần gọi ham voi cac su kien truoc do hay ko\r\n     * @returns this\r\n     */\r\n    on(type: (OnEventListener | string), listener?: Listener | boolean, dispatch?: boolean) {\r\n        if (isObject(type)) {\r\n            var listeners = {};\r\n            const events: OnEventListener = type as OnEventListener;\r\n            var d: boolean = isBoolean(listener) ? listener as boolean : (isBoolean(dispatch) ? dispatch : false);\r\n            for (const key in events) {\r\n                if (Object.hasOwnProperty.call(events, key)) {\r\n                    const fn = type[key];\r\n                    if (isFunction(fn) || isString(fn)) {\r\n                        const fnAdded = this.__addEventListener(key, fn, d);\r\n                        if (fnAdded) {\r\n                            listeners[key] = fnAdded;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return listeners;\r\n        }\r\n        return this.__addEventListener(type as string, listener as Listener, dispatch);\r\n    }\r\n\r\n    off(type?: any, listener?: Listener) {\r\n        return this.__removeEventListener(type, listener);\r\n    }\r\n    __addDispatchedEvent(event: EventEmit) {\r\n        if (this._dispatchedEvents[event.type] === undefined) this._dispatchedEvents[event.type] = [];\r\n        this._dispatchedEvents[event.type].push(event);\r\n        // console.log(event.type, this._pendingListeners[event.type])\r\n        return this\r\n    }\r\n\r\n    __handleDispatchedEvents(type: string, handler: Listener) {\r\n        var listenerArray = this._dispatchedEvents[type];\r\n        // console.log(type, this._pendingListeners[type], this);\r\n        if (listenerArray !== undefined) {\r\n\r\n\r\n            // console.log(type)\r\n            // Make a copy, in case listeners are removed while iterating.\r\n            const array = listenerArray.slice(0);\r\n\r\n            for (var i = 0, l = array.length; i < l; i++) {\r\n                // array[i].call(this, e);\r\n                var s = handler.call(this, array[i]);\r\n                if (s === false) {\r\n                    return s;\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    listen(event: EventEmit) {\r\n        var a = this.__dispatchEvent(event);\r\n        var b = true;\r\n        if (typeof this.eventHandler == \"function\") {\r\n            b = this.eventHandler(event);\r\n        }\r\n        if (a !== false && b !== false) {\r\n            this.emit(event);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Tạo, gọi ra một sự kiện\r\n     * @param {string|object} event Tên hoặc sự kiện\r\n     * @param {*} data dữ liệu\r\n     * @returns {boolean}\r\n     */\r\n    emit(event: any, data?: any, log?: boolean): boolean {\r\n        var e: any = {};\r\n        if (isString(event)) {\r\n            e.type = event;\r\n            if (data) {\r\n                e.data = data;\r\n            }\r\n            // console.log(event, data);\r\n        } else if (isObject(event)) {\r\n            e = event;\r\n            if (!e.type) return false;\r\n            if (!e.data && data) {\r\n                e.data = data;\r\n            }\r\n            if (isBoolean(data) && typeof log == \"undefined\") {\r\n                log = data;\r\n            }\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n        if (e.constructor === Object) e.type = String(e.type).toLowerCase();\r\n        this.emitter.emit(e);\r\n    }\r\n\r\n\r\n}\r\n","import { ThreeMesh } from \"@app/_3D/store/data.type\";\r\n\r\nexport enum EItemStatus {\r\n    draft = 'draft',\r\n    protected = \"protected\",\r\n    published = 'published',\r\n}\r\n\r\nexport interface ItemMeshSettings {\r\n    name?: string,\r\n    sid?: string,\r\n    index?: number,\r\n    title?: string, \r\n    data?: {\r\n        material?: any,\r\n\r\n    },\r\n    editable?: Array<string>,\r\n    __ref__?:ThreeMesh\r\n    __inputs__?:any[],\r\n    __secret_key__?:string,\r\n    __parent_key__?:string\r\n}\r\n\r\n\r\nexport interface ItemSettings {\r\n    props?: {\r\n        castShadow?: boolean,\r\n        receiveShadow?: boolean,\r\n        position?: {\r\n            x?: number,\r\n            y?: number,\r\n            z?: number\r\n        },\r\n        rotation?: {\r\n            x?: number,\r\n            y?: number,\r\n            z?: number\r\n        }\r\n        scale: {\r\n            x?: number,\r\n            y?: number,\r\n            z?: number\r\n        }\r\n    },\r\n    options?: {\r\n        [x: string]: any\r\n    },\r\n    meshes?: Array<ItemMeshSettings>\r\n}\r\n\r\nexport interface ItemModel {\r\n\r\n    id: number,\r\n    name: string,\r\n    category_id?: number,\r\n    description?: string,\r\n    status?: string,\r\n    type?: string,\r\n    path?: string,\r\n    file?: string,\r\n    download_source_url?: string,\r\n    thumbnail?: string,\r\n    load_options?: {\r\n        useRoughnessMipmapper?: boolean,\r\n        materialNeedsUpdate?: boolean\r\n    },\r\n    settings?: ItemSettings,\r\n    size?: {\r\n        x?:number,\r\n        y?:number\r\n        z?:number\r\n    }\r\n}\r\n\r\nexport const ItemDefaultData: ItemModel = {\r\n    id: 0,\r\n    name: \"\",\r\n    category_id: 0,\r\n    description: \"\",\r\n    status: EItemStatus.draft,\r\n    type: \"gltf\",\r\n    path: \"https://threejs.vcc.vn/models/gltf/set21/\",\r\n    file: \"scene.gltf\",\r\n    download_source_url: \"https://threejs.vcc.vn/zip/set21.zip\",\r\n    thumbnail: \"\",\r\n    load_options: {\r\n        useRoughnessMipmapper: true,\r\n        materialNeedsUpdate: true\r\n    },\r\n    settings: {\r\n        \r\n    },\r\n    size: {\r\n        x:0,\r\n        y:0,\r\n        z:0\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate } from '@angular/router';\r\n\r\nimport { AuthenticationService } from '../../auth/services';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class UnAuthGuard implements CanActivate {\r\n  constructor(private authenticationService: AuthenticationService) {}\r\n\r\n  canActivate() {\r\n    // this.authenticationService.logout();\r\n    return true;\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-image-library-item',\n    templateUrl: './image-library-item.component.html',\n    styleUrls: ['./image-library-item.component.scss']\n})\nexport class ImageLibraryItemComponent implements OnInit {\n\n    data: any = {};\n    thumbnail: string = '';\n    constructor() { }\n\n    ngOnInit(): void {\n\n    }\n\n}\n","<div class=\"dj-preview dj-processing dj-image-preview\">\n    <div class=\"dj-image\">\n        <img src=\"{{thumbnail}}\" alt=\"{{data.filename}}\">\n    </div>\n    <div class=\"dj-details\">\n        <div class=\"dj-size\">\n            <span>\n                <strong>{{data.size}}</strong> {{data.size_unit}}\n            </span>\n        </div>\n        <div class=\"dj-filename\">\n            {{data.filename}}\n        </div>\n    </div>\n    <div class=\"dj-success-mark\">\n        <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\"><title>Check</title><defs></defs><g id=\"Page-1\" stroke=\"none\" stroke-width=\"4\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\"><path d=\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" stroke-opacity=\"0.198794158\" stroke=\"#ffffff\" fill-opacity=\"0.816519475\" fill=\"#00bc00\" sketch:type=\"MSShapeGroup\"></path></g></svg>\n    </div>\n    <a href=\"javascript:void(0);\" class=\"dj-remove btn-remove-image-file\">\n        <svg width=\"54px\" height=\"54px\" viewBox=\"0 0 54 54\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\"><title>Xóa</title><defs></defs><g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" sketch:type=\"MSPage\"><g id=\"Check-+-Oval-2\" sketch:type=\"MSLayerGroup\" stroke=\"#747474\" stroke-opacity=\"0.198794158\" fill=\"#FF0000\" fill-opacity=\"0.816519475\"><path d=\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\" id=\"Oval-2\" sketch:type=\"MSShapeGroup\"></path></g></g></svg>\n    </a>\n    <div class=\"dj-outer-filename\">\n        <span>\n            {{data.filename}}\n        </span>\n    </div>\n</div>","import {assignWithout, isArray, isObject} from '@app/_core/helpers/utils';\r\nimport * as THREE from 'three';\r\nimport Props from '../libs/props';\r\n\r\nconst GridHelper = {\r\n    addGrid: function (options?:any) {\r\n        var self = this;\r\n        var opt = typeof options == \"object\" ? options : {};\r\n        var params:any = {};\r\n        var t = String(opt.type || \"\").toLowerCase();\r\n        var grid = null;\r\n        if(t == \"polar\"){\r\n            params = Props.parseParams(opt.params || opt, {\r\n                radius : 10, radials : 16, circles : 8, divisions : 64, color1 : undefined, color2 : undefined\r\n            });\r\n            \r\n            grid = new THREE.PolarGridHelper( params.radius, params.radials, params.circles, params.divisionsl, params.color1, params.color2 );\r\n\r\n        }\r\n        else{\r\n            params = Props.parseParams(opt.params || opt, {\r\n                size : 16, divisions : 10, colorCenterLine : undefined, colorGrid : undefined\r\n            });\r\n            \r\n            grid = new THREE.GridHelper( params.size, params.divisions , params.colorCenterLine, params.colorGrid);\r\n        }\r\n        if(grid){\r\n            assignWithout(grid, opt.props || opt, ['parama', 'props', 'type'], params);\r\n            this.addToScene(grid, opt.handler || opt.updateHandler || opt.handlerData || opt.updateHandlerData);\r\n        }\r\n\r\n    },\r\n    addGrids: function addGrids(grids?:any) {\r\n        if (isArray(grids)) {\r\n            for (let index = 0; index < grids.length; index++) {\r\n                const grid = grids[index];\r\n                if (isObject(grid)) {\r\n                    this.addGrid(grid);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n};\r\n\r\n\r\nexport default GridHelper;\r\n","import { Component, Output, EventEmitter, OnDestroy, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { assignValue, copyByList, isArray } from '@app/_core/helpers/utils';\nimport { PriVacyStatusOptions } from '@app/_store/form';\n\n\nimport { CategoryModel, CategoryService } from '@app/_store/category';\nimport { AppEditorStorageService } from '@app/_3D/services/app-editor-storage.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { InpEvent } from '@app/_shared/shared.type';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\n\n@Component({\n    selector: 'app-tab-project-info',\n    templateUrl: './tab-project-info.component.html',\n    styleUrls: ['./tab-project-info.component.scss']\n})\nexport class TabProjectInfoComponent extends BaseComponent implements OnInit, OnDestroy {\n    info: any = {};\n    categories: CategoryModel[];\n    asyncForm: boolean = true;\n    mode: string = 'create';\n    categoryOptions: Array<{ label: string, value: any }> = [];\n    privacyStatusOptions: any = PriVacyStatusOptions.map(stt => ({ label: stt.label, value: stt.value }))\n    app: AppEditorService = null;\n    constructor(private storage: AppEditorStorageService, private events: AppEditorEventService, private cd: ChangeDetectorRef) {\n        super();\n        this.storage.onChange(\"info\", (data) => {\n            this.syncInfo(data);\n        }, true);\n\n\n        this.storage.onChange('categories', (categories) => {\n            this.updateCategories(categories);\n        }, true);\n\n        this.storage.onChange('editorMode', (mode) => {\n            this.mode = mode;\n        }, true);\n\n    }\n    \n    initOnce(){\n        this.app = this.events.app;\n     \n    }\n    init() {\n        if(this.isChangeSubEvents){\n            this.app = this.subEvents.app;\n        \n        }\n    \n        this.cd.detectChanges();\n    }\n    onDestroy(){\n        \n    }\n\n\n    updateCategories(categories: CategoryModel[] = []) {\n        this.categories = categories;\n        let a: any[] = []\n        for (let index = 0; index < categories.length; index++) {\n            const cat = categories[index];\n            a.push({ label: cat.name, value: cat.id })\n        }\n        this.categoryOptions = a;\n    }\n\n    syncInfo(data: any) {\n        this.info = copyByList(data, ['name', 'description', 'category_id', 'status', 'allow_custom']);\n    }\n    onInpChange(event: InpEvent) {\n        this.info[event.name] = event.value;\n        this.storage.info[event.name] = event.value;\n        this.app.updateInfo(this.info);\n    }\n}\n","<div class=\"tab-inner\">\n    <h2>{{ 'Info' | translate }}</h2>\n    <div class=\"store info-form\">\n        <ng-container *ngIf=\"asyncForm; then formTemplate; else waitTemplate\"></ng-container>\n        <ng-template #formTemplate>\n            <div class=\"inputs\">\n                <inp-text-group name=\"name\" label=\"Project Name\" [(value)]=\"info.name\" placeholder=\"Enter Name\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item-first\"></inp-text-group>\n                <inp-select-group name=\"category_id\" [(value)]=\"info.category_id\" [options]=\"categoryOptions\" label=\"Category\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-select-group>\n                <inp-textarea-group name=\"description\" [(value)]=\"info.description\" label=\"Description\" placeholder=\"Enter Description\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-textarea-group>\n                <inp-radio-group name=\"status\" [(value)]=\"info.status\" [options]=\"privacyStatusOptions\" label=\"Status\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-radio-group>\n                <inp-switch-group name=\"allow_custom\" [(value)]=\"info.allow_custom\" label=\"Allow Custom in View\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-switch-group>\n                \n            </div>\n        </ng-template>\n        <ng-template #waitTemplate>\n            <div class=\"sys-alert\">\n                <h2>Vui lòng chờ...</h2>\n            </div>\n        </ng-template>\n\n    </div>\n\n</div>","import {\r\n\tMathUtils,\r\n\tSpherical,\r\n\tVector3\r\n} from 'three';\r\n\r\nconst _lookDirection = new Vector3();\r\nconst _spherical = new Spherical();\r\nconst _target = new Vector3();\r\n\r\nclass FirstPersonControls {\r\n\r\n\tconstructor( object, domElement ) {\r\n\r\n\t\tif ( domElement === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.FirstPersonControls: The second parameter \"domElement\" is now mandatory.' );\r\n\t\t\tdomElement = document;\r\n\r\n\t\t}\r\n\r\n\t\tthis.object = object;\r\n\t\tthis.domElement = domElement;\r\n\r\n\t\t// API\r\n\r\n\t\tthis.enabled = true;\r\n\r\n\t\tthis.movementSpeed = 1.0;\r\n\t\tthis.lookSpeed = 0.005;\r\n\r\n\t\tthis.lookVertical = true;\r\n\t\tthis.autoForward = false;\r\n\r\n\t\tthis.activeLook = true;\r\n\r\n\t\tthis.heightSpeed = false;\r\n\t\tthis.heightCoef = 1.0;\r\n\t\tthis.heightMin = 0.0;\r\n\t\tthis.heightMax = 1.0;\r\n\r\n\t\tthis.constrainVertical = false;\r\n\t\tthis.verticalMin = 0;\r\n\t\tthis.verticalMax = Math.PI;\r\n\r\n\t\tthis.mouseDragOn = false;\r\n\r\n\t\t// internals\r\n\r\n\t\tthis.autoSpeedFactor = 0.0;\r\n\r\n\t\tthis.mouseX = 0;\r\n\t\tthis.mouseY = 0;\r\n\r\n\t\tthis.moveForward = false;\r\n\t\tthis.moveBackward = false;\r\n\t\tthis.moveLeft = false;\r\n\t\tthis.moveRight = false;\r\n\r\n\t\tthis.viewHalfX = 0;\r\n\t\tthis.viewHalfY = 0;\r\n\r\n\t\t// private variables\r\n\r\n\t\tlet lat = 0;\r\n\t\tlet lon = 0;\r\n\r\n\t\t//\r\n\r\n\t\tthis.handleResize = function () {\r\n\r\n\t\t\tif ( this.domElement === document ) {\r\n\r\n\t\t\t\tthis.viewHalfX = window.innerWidth / 2;\r\n\t\t\t\tthis.viewHalfY = window.innerHeight / 2;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.viewHalfX = this.domElement.offsetWidth / 2;\r\n\t\t\t\tthis.viewHalfY = this.domElement.offsetHeight / 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.onMouseDown = function ( event ) {\r\n\r\n\t\t\tif ( this.domElement !== document ) {\r\n\r\n\t\t\t\tthis.domElement.focus();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.activeLook ) {\r\n\r\n\t\t\t\tswitch ( event.button ) {\r\n\r\n\t\t\t\t\tcase 0: this.moveForward = true; break;\r\n\t\t\t\t\tcase 2: this.moveBackward = true; break;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.mouseDragOn = true;\r\n\r\n\t\t};\r\n\r\n\t\tthis.onMouseUp = function ( event ) {\r\n\r\n\t\t\tif ( this.activeLook ) {\r\n\r\n\t\t\t\tswitch ( event.button ) {\r\n\r\n\t\t\t\t\tcase 0: this.moveForward = false; break;\r\n\t\t\t\t\tcase 2: this.moveBackward = false; break;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.mouseDragOn = false;\r\n\r\n\t\t};\r\n\r\n\t\tthis.onMouseMove = function ( event ) {\r\n\r\n\t\t\tif ( this.domElement === document ) {\r\n\r\n\t\t\t\tthis.mouseX = event.pageX - this.viewHalfX;\r\n\t\t\t\tthis.mouseY = event.pageY - this.viewHalfY;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.mouseX = event.pageX - this.domElement.offsetLeft - this.viewHalfX;\r\n\t\t\t\tthis.mouseY = event.pageY - this.domElement.offsetTop - this.viewHalfY;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.onKeyDown = function ( event ) {\r\n\r\n\t\t\tswitch ( event.code ) {\r\n\r\n\t\t\t\tcase 'ArrowUp':\r\n\t\t\t\tcase 'KeyW': this.moveForward = true; break;\r\n\r\n\t\t\t\tcase 'ArrowLeft':\r\n\t\t\t\tcase 'KeyA': this.moveLeft = true; break;\r\n\r\n\t\t\t\tcase 'ArrowDown':\r\n\t\t\t\tcase 'KeyS': this.moveBackward = true; break;\r\n\r\n\t\t\t\tcase 'ArrowRight':\r\n\t\t\t\tcase 'KeyD': this.moveRight = true; break;\r\n\r\n\t\t\t\tcase 'KeyR': this.moveUp = true; break;\r\n\t\t\t\tcase 'KeyF': this.moveDown = true; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.onKeyUp = function ( event ) {\r\n\r\n\t\t\tswitch ( event.code ) {\r\n\r\n\t\t\t\tcase 'ArrowUp':\r\n\t\t\t\tcase 'KeyW': this.moveForward = false; break;\r\n\r\n\t\t\t\tcase 'ArrowLeft':\r\n\t\t\t\tcase 'KeyA': this.moveLeft = false; break;\r\n\r\n\t\t\t\tcase 'ArrowDown':\r\n\t\t\t\tcase 'KeyS': this.moveBackward = false; break;\r\n\r\n\t\t\t\tcase 'ArrowRight':\r\n\t\t\t\tcase 'KeyD': this.moveRight = false; break;\r\n\r\n\t\t\t\tcase 'KeyR': this.moveUp = false; break;\r\n\t\t\t\tcase 'KeyF': this.moveDown = false; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.lookAt = function ( x, y, z ) {\r\n\r\n\t\t\tif ( x.isVector3 ) {\r\n\r\n\t\t\t\t_target.copy( x );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_target.set( x, y, z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.object.lookAt( _target );\r\n\r\n\t\t\tsetOrientation( this );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t\tthis.update = function () {\r\n\r\n\t\t\tconst targetPosition = new Vector3();\r\n\r\n\t\t\treturn function update( delta ) {\r\n\r\n\t\t\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t\t\tif ( this.heightSpeed ) {\r\n\r\n\t\t\t\t\tconst y = MathUtils.clamp( this.object.position.y, this.heightMin, this.heightMax );\r\n\t\t\t\t\tconst heightDelta = y - this.heightMin;\r\n\r\n\t\t\t\t\tthis.autoSpeedFactor = delta * ( heightDelta * this.heightCoef );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.autoSpeedFactor = 0.0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst actualMoveSpeed = delta * this.movementSpeed;\r\n\r\n\t\t\t\tif ( this.moveForward || ( this.autoForward && ! this.moveBackward ) ) this.object.translateZ( - ( actualMoveSpeed + this.autoSpeedFactor ) );\r\n\t\t\t\tif ( this.moveBackward ) this.object.translateZ( actualMoveSpeed );\r\n\r\n\t\t\t\tif ( this.moveLeft ) this.object.translateX( - actualMoveSpeed );\r\n\t\t\t\tif ( this.moveRight ) this.object.translateX( actualMoveSpeed );\r\n\r\n\t\t\t\tif ( this.moveUp ) this.object.translateY( actualMoveSpeed );\r\n\t\t\t\tif ( this.moveDown ) this.object.translateY( - actualMoveSpeed );\r\n\r\n\t\t\t\tlet actualLookSpeed = delta * this.lookSpeed;\r\n\r\n\t\t\t\tif ( ! this.activeLook ) {\r\n\r\n\t\t\t\t\tactualLookSpeed = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet verticalLookRatio = 1;\r\n\r\n\t\t\t\tif ( this.constrainVertical ) {\r\n\r\n\t\t\t\t\tverticalLookRatio = Math.PI / ( this.verticalMax - this.verticalMin );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlon -= this.mouseX * actualLookSpeed;\r\n\t\t\t\tif ( this.lookVertical ) lat -= this.mouseY * actualLookSpeed * verticalLookRatio;\r\n\r\n\t\t\t\tlat = Math.max( - 85, Math.min( 85, lat ) );\r\n\r\n\t\t\t\tlet phi = MathUtils.degToRad( 90 - lat );\r\n\t\t\t\tconst theta = MathUtils.degToRad( lon );\r\n\r\n\t\t\t\tif ( this.constrainVertical ) {\r\n\r\n\t\t\t\t\tphi = MathUtils.mapLinear( phi, 0, Math.PI, this.verticalMin, this.verticalMax );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst position = this.object.position;\r\n\r\n\t\t\t\ttargetPosition.setFromSphericalCoords( 1, phi, theta ).add( position );\r\n\r\n\t\t\t\tthis.object.lookAt( targetPosition );\r\n\r\n\t\t\t};\r\n\r\n\t\t}();\r\n\r\n\t\tthis.dispose = function () {\r\n\r\n\t\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu );\r\n\t\t\tthis.domElement.removeEventListener( 'mousedown', _onMouseDown );\r\n\t\t\tthis.domElement.removeEventListener( 'mousemove', _onMouseMove );\r\n\t\t\tthis.domElement.removeEventListener( 'mouseup', _onMouseUp );\r\n\r\n\t\t\twindow.removeEventListener( 'keydown', _onKeyDown );\r\n\t\t\twindow.removeEventListener( 'keyup', _onKeyUp );\r\n\r\n\t\t};\r\n\r\n\t\tconst _onMouseMove = this.onMouseMove.bind( this );\r\n\t\tconst _onMouseDown = this.onMouseDown.bind( this );\r\n\t\tconst _onMouseUp = this.onMouseUp.bind( this );\r\n\t\tconst _onKeyDown = this.onKeyDown.bind( this );\r\n\t\tconst _onKeyUp = this.onKeyUp.bind( this );\r\n\r\n\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu );\r\n\t\tthis.domElement.addEventListener( 'mousemove', _onMouseMove );\r\n\t\tthis.domElement.addEventListener( 'mousedown', _onMouseDown );\r\n\t\tthis.domElement.addEventListener( 'mouseup', _onMouseUp );\r\n\r\n\t\twindow.addEventListener( 'keydown', _onKeyDown );\r\n\t\twindow.addEventListener( 'keyup', _onKeyUp );\r\n\r\n\t\tfunction setOrientation( controls ) {\r\n\r\n\t\t\tconst quaternion = controls.object.quaternion;\r\n\r\n\t\t\t_lookDirection.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\t\t\t_spherical.setFromVector3( _lookDirection );\r\n\r\n\t\t\tlat = 90 - MathUtils.radToDeg( _spherical.phi );\r\n\t\t\tlon = MathUtils.radToDeg( _spherical.theta );\r\n\r\n\t\t}\r\n\r\n\t\tthis.handleResize();\r\n\r\n\t\tsetOrientation( this );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction contextmenu( event ) {\r\n\r\n\tevent.preventDefault();\r\n\r\n}\r\n\r\nexport { FirstPersonControls };\r\n","import { Component, Output, EventEmitter, OnDestroy, OnInit } from '@angular/core';\r\nimport { assignValue, copyByList, isArray } from '@app/_core/helpers/utils';\r\nimport { PriVacyStatusOptions } from '@app/_store/form';\r\n\r\n\r\nimport { CategoryModel, CategoryService } from '@app/_store/category';\r\nimport { AppEditorStorageService } from '@app/_3D/services/app-editor-storage.service';\r\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\r\nimport { InpEvent } from '@app/_shared/shared.type';\r\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\r\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\r\n\r\n@Component({\r\n    selector: 'app-tab-editor-info',\r\n    templateUrl: './tab-info.component.html',\r\n    styleUrls: ['./tab-info.component.scss'],\r\n})\r\nexport class TabEditorInfoComponent extends BaseComponent implements OnInit, OnDestroy {\r\n    info: any = {};\r\n    categories: CategoryModel[];\r\n    asyncForm: boolean = true;\r\n    mode: string = 'create';\r\n    categoryOptions: Array<{label:string, value: any}> = [];\r\n    privacyStatusOptions: any = PriVacyStatusOptions.map(stt => ({label:stt.label, value:stt.value}))\r\n    app: AppEditorService = null;\r\n    constructor(private storage: AppEditorStorageService, private events: AppEditorEventService) {\r\n        super();\r\n        this.storage.onChange(\"info\", (data) => {\r\n            this.syncInfo(data);\r\n        }, true);\r\n        \r\n\r\n        this.storage.onChange('categories', (categories) => {\r\n            this.updateCategories(categories);\r\n        }, true);\r\n\r\n        this.storage.onChange('editorMode', (mode) => {\r\n            this.mode = mode;\r\n        }, true);\r\n\r\n    }\r\n\r\n    \r\n    initOnce(){\r\n        this.app = this.events.app;\r\n     \r\n    }\r\n    init() {\r\n        if(this.isChangeSubEvents){\r\n            this.app = this.subEvents.app;\r\n        }\r\n    }\r\n    destroy(){\r\n        \r\n    }\r\n\r\n\r\n    \r\n    \r\n    \r\n    updateCategories(categories: CategoryModel[] = []) {\r\n        this.categories = categories;\r\n        let a : any[] = []\r\n        for (let index = 0; index < categories.length; index++) {\r\n            const cat = categories[index];\r\n            a.push({label: cat.name, value: cat.id})\r\n        }\r\n        this.categoryOptions = a;\r\n    }\r\n\r\n    syncInfo(data: any) {\r\n        this.info = copyByList(data, ['name', 'description', 'category_id', 'status']);\r\n    }\r\n    onInpChange(event: InpEvent){\r\n        this.info[event.name] = event.value;\r\n        this.app.updateInfo(this.info);\r\n    }\r\n}\r\n","<div class=\"tab-inner\">\r\n    <h2>{{ 'Info' | translate }}</h2>\r\n    <div class=\"store info-form\">\r\n        <ng-container *ngIf=\"asyncForm; then formTemplate; else waitTemplate\"></ng-container>\r\n        <ng-template #formTemplate>\r\n            <div class=\"inputs\">\r\n                <inp-text-group name=\"name\" label=\"Item Name\" [(value)]=\"info.name\" placeholder=\"Enter Name\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item-first\"></inp-text-group>\r\n                <inp-select-group name=\"category_id\" [(value)]=\"info.category_id\" [options]=\"categoryOptions\" label=\"Category\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-select-group>\r\n                <inp-radio-group name=\"status\" [(value)]=\"info.status\" [options]=\"privacyStatusOptions\" label=\"Status\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-radio-group>\r\n                <inp-textarea-group name=\"description\" [(value)]=\"info.description\" label=\"Description\" placeholder=\"Enter Description\" (subcribe)=\"onInpChange($event)\" class=\"inp-group-item\"></inp-textarea-group>\r\n            </div>\r\n        </ng-template>\r\n        <ng-template #waitTemplate>\r\n            <div class=\"sys-alert\">\r\n                <h2>Vui lòng chờ...</h2>\r\n            </div>\r\n        </ng-template>\r\n\r\n    </div>\r\n\r\n</div>","import { Injectable } from '@angular/core';\r\nimport { Router, CanActivate } from '@angular/router';\r\n\r\nimport { SettingService } from '../services';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(private router: Router, private settingService: SettingService) {}\r\n\r\n  canActivate() {\r\n    const auth = this.settingService.auth;\r\n    if (auth && typeof auth.accessToken === 'string') {\r\n      return true;\r\n    }\r\n\r\n    this.router.navigate(['/auth/login']);\r\n    return false;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { App, Layout, SettingsNotify } from './setting.model';\r\nimport { User } from '@app/auth/models';\r\n\r\nexport const LAYOUT = 'layout';\r\n\r\nexport const USER = 'user';\r\n\r\nexport const APP = 'app';\r\n\r\nexport const ROLES = 'roles';\r\n\r\nexport const PATHS = 'paths';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class SettingService {\r\n  private notify$ = new Subject<SettingsNotify>();\r\n\r\n  private appIn: App;\r\n  private userIn: { user: User; accessToken: string; expiresIn: string };\r\n\r\n  private layoutIn: Layout;\r\n  \r\n  private rolesIn: Array<string>;\r\n  private pathsIn: Set<string>;\r\n\r\n  urls = {\r\n    login: '/auth/login',\r\n  };\r\n\r\n  constructor() {}\r\n\r\n  private get(key: string) {\r\n    return JSON.parse(localStorage.getItem(key) || 'null') || null;\r\n  }\r\n\r\n  private set(key: string, value: any) {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  }\r\n\r\n  private remove(key: string) {\r\n    localStorage.removeItem(key);\r\n  }\r\n\r\n  get layout(): Layout {\r\n    if (!this.layoutIn) {\r\n      this.layoutIn = {\r\n        fixed: true,\r\n        collapsed: false,\r\n        boxed: false,\r\n        lang: null,\r\n        ...this.get(LAYOUT),\r\n      };\r\n      this.set(LAYOUT, this.layoutIn);\r\n    }\r\n    return this.layoutIn as Layout;\r\n  }\r\n\r\n  get roles(): Array<string> {\r\n    if (!this.rolesIn) {\r\n      this.rolesIn = this.get(ROLES);\r\n      this.set(ROLES, this.rolesIn);\r\n    }\r\n    return this.rolesIn;\r\n  }\r\n\r\n  get paths(): Set<string> {\r\n    if (!this.pathsIn) {\r\n      this.pathsIn = new Set(this.get(PATHS));\r\n      this.set(PATHS, this.pathsIn);\r\n    }\r\n    return this.pathsIn;\r\n  }\r\n\r\n  get app(): App {\r\n    if (!this.appIn) {\r\n      this.appIn = {\r\n        year: new Date().getFullYear(),\r\n        ...this.get(APP),\r\n      };\r\n      this.set(APP, this.appIn);\r\n    }\r\n    return this.appIn as App;\r\n  }\r\n\r\n  get user(): User {\r\n    if (!this.userIn) {\r\n      this.userIn = { ...this.get(USER) };\r\n      this.set(USER, this.userIn);\r\n    }\r\n    return this.userIn.user as User;\r\n  }\r\n\r\n  get auth(): { accessToken: string; refeshToken: string; expiresIn: string } {\r\n    if (!this.userIn) {\r\n      this.userIn = { ...this.get(USER) };\r\n      this.set(USER, this.userIn);\r\n    }\r\n    return {\r\n      accessToken: this.userIn.accessToken,\r\n      refeshToken: this.userIn.accessToken,\r\n      expiresIn: this.userIn.expiresIn,\r\n    };\r\n  }\r\n\r\n  get notify(): Observable<SettingsNotify> {\r\n    return this.notify$.asObservable();\r\n  }\r\n\r\n  setLayout(name: string | Layout, value?: any): boolean {\r\n    if (typeof name === 'string') {\r\n      this.layout[name] = value;\r\n    } else {\r\n      this.layoutIn = name;\r\n    }\r\n    this.set(LAYOUT, this.layoutIn);\r\n    this.notify$.next({ type: 'layout', name, value } as any);\r\n    return true;\r\n  }\r\n\r\n  setApp(value: App) {\r\n    this.appIn = value;\r\n    this.set(APP, value);\r\n    this.notify$.next({ type: 'app', value });\r\n    return true;\r\n  }\r\n\r\n  setUser(value: any) {\r\n    if (value === null) {\r\n      this.remove(USER);\r\n      return true;\r\n    }\r\n\r\n    this.userIn = value;\r\n    this.set(USER, value);\r\n    this.notify$.next({ type: 'user', value });\r\n    return true;\r\n  }\r\n\r\n  setRoles(value: Array<string>) {\r\n    if (value === null) {\r\n      this.remove(ROLES);\r\n      return true;\r\n    }\r\n\r\n    this.rolesIn = value;\r\n    this.set(ROLES, value);\r\n    this.notify$.next({ type: ROLES, value });\r\n    return true;\r\n  }\r\n\r\n  setPaths(value: Array<string>) {\r\n    if (value === null) {\r\n      this.remove(PATHS);\r\n      return true;\r\n    }\r\n\r\n    this.pathsIn = new Set(value);\r\n    this.set(PATHS, value);\r\n    this.notify$.next({ type: PATHS, value });\r\n    return true;\r\n  }\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\n\n@Component({\n  selector: 'app-tab-controls',\n  templateUrl: './tab-controls.component.html',\n  styleUrls: ['./tab-controls.component.scss']\n})\nexport class TabControlsComponent extends BaseComponent implements OnInit {\n  \n  constructor(\n  ) {\n    super();\n  }\n\n  \n}\n","<div class=\"tab-inner\">\n    <h2>{{ 'Camera & Controls' | translate }}</h2>\n    <nz-tabset nzTabPosition=\"top\" nzType=\"line\" class=\"sub-tab\">\n\n        <nz-tab [nzTitle]=\"iconCamera\">\n          <ng-template #iconCamera>\n            <img src=\"/assets/icons/new-design/tab-sub/camera.svg\" alt=\"Camera\" />\n            <div>Camera</div>\n          </ng-template>\n          <app-tab-camera class=\"tab-camera\"></app-tab-camera>\n        </nz-tab>\n    \n        <nz-tab [nzTitle]=\"iconControl\">\n          <ng-template #iconControl>\n            <img src=\"/assets/icons/new-design/tab-sub/control.svg\" alt=\"Controls\" />\n            <div>Controls</div>\n          </ng-template>\n          <ng-template nz-tab>\n            <app-tab-control></app-tab-control>\n          </ng-template>\n        </nz-tab>\n\n      </nz-tabset>\n\n</div>","import {\r\n\tEventDispatcher,\r\n\tMOUSE,\r\n\tQuaternion,\r\n\tSpherical,\r\n\tTOUCH,\r\n\tVector2,\r\n\tVector3\r\n} from 'three';\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\r\n\r\nconst _changeEvent = { type: 'change' };\r\nconst _startEvent = { type: 'start' };\r\nconst _endEvent = { type: 'end' };\r\n\r\nclass OrbitControls extends EventDispatcher {\r\n\r\n\tconstructor( object, domElement ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\r\n\t\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\r\n\r\n\t\tthis.object = object;\r\n\t\tthis.domElement = domElement;\r\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\r\n\r\n\t\t// Set to false to disable this control\r\n\t\tthis.enabled = true;\r\n\r\n\t\t// \"target\" sets the location of focus, where the object orbits around\r\n\t\tthis.target = new Vector3();\r\n\r\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\t\tthis.minDistance = 0;\r\n\t\tthis.maxDistance = Infinity;\r\n\r\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\t\tthis.minZoom = 0;\r\n\t\tthis.maxZoom = Infinity;\r\n\r\n\t\t// How far you can orbit vertically, upper and lower limits.\r\n\t\t// Range is 0 to Math.PI radians.\r\n\t\tthis.minPolarAngle = 0; // radians\r\n\t\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t\t// How far you can orbit horizontally, upper and lower limits.\r\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\r\n\t\tthis.minAzimuthAngle = - Infinity; // radians\r\n\t\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t\t// Set to true to enable damping (inertia)\r\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\t\tthis.enableDamping = false;\r\n\t\tthis.dampingFactor = 0.05;\r\n\r\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t\t// Set to false to disable zooming\r\n\t\tthis.enableZoom = true;\r\n\t\tthis.zoomSpeed = 1.0;\r\n\r\n\t\t// Set to false to disable rotating\r\n\t\tthis.enableRotate = true;\r\n\t\tthis.rotateSpeed = 1.0;\r\n\r\n\t\t// Set to false to disable panning\r\n\t\tthis.enablePan = true;\r\n\t\tthis.panSpeed = 1.0;\r\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\r\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t\t// Set to true to automatically rotate around the target\r\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\t\tthis.autoRotate = false;\r\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\r\n\r\n\t\t// The four arrow keys\r\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\r\n\r\n\t\t// Mouse buttons\r\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\r\n\r\n\t\t// Touch fingers\r\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\r\n\r\n\t\t// for reset\r\n\t\tthis.target0 = this.target.clone();\r\n\t\tthis.position0 = this.object.position.clone();\r\n\t\tthis.zoom0 = this.object.zoom;\r\n\r\n\t\t// the target DOM element for key events\r\n\t\tthis._domElementKeyEvents = null;\r\n\r\n\t\t//\r\n\t\t// public methods\r\n\t\t//\r\n\r\n\t\tthis.getPolarAngle = function () {\r\n\r\n\t\t\treturn spherical.phi;\r\n\r\n\t\t};\r\n\r\n\t\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\t\treturn spherical.theta;\r\n\r\n\t\t};\r\n\r\n\t\tthis.getDistance = function () {\r\n\r\n\t\t\treturn this.object.position.distanceTo( this.target );\r\n\r\n\t\t};\r\n\r\n\t\tthis.listenToKeyEvents = function ( domElement ) {\r\n\r\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\r\n\t\t\tthis._domElementKeyEvents = domElement;\r\n\r\n\t\t};\r\n\r\n\t\tthis.saveState = function () {\r\n\r\n\t\t\tscope.target0.copy( scope.target );\r\n\t\t\tscope.position0.copy( scope.object.position );\r\n\t\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t\t};\r\n\r\n\t\tthis.reset = function () {\r\n\r\n\t\t\tscope.target.copy( scope.target0 );\r\n\t\t\tscope.object.position.copy( scope.position0 );\r\n\t\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tscope.dispatchEvent( _changeEvent );\r\n\r\n\t\t\tscope.update();\r\n\r\n\t\t\tstate = STATE.NONE;\r\n\r\n\t\t};\r\n\r\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\t\tthis.update = function () {\r\n\r\n\t\t\tconst offset = new Vector3();\r\n\r\n\t\t\t// so camera.up is the orbit axis\r\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\r\n\t\t\tconst quatInverse = quat.clone().invert();\r\n\r\n\t\t\tconst lastPosition = new Vector3();\r\n\t\t\tconst lastQuaternion = new Quaternion();\r\n\r\n\t\t\tconst twoPI = 2 * Math.PI;\r\n\r\n\t\t\treturn function update() {\r\n\r\n\t\t\t\tconst position = scope.object.position;\r\n\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t\t// angle from z-axis around y-axis\r\n\t\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( scope.enableDamping ) {\r\n\r\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\r\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// restrict theta to be between desired limits\r\n\r\n\t\t\t\tlet min = scope.minAzimuthAngle;\r\n\t\t\t\tlet max = scope.maxAzimuthAngle;\r\n\r\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\r\n\r\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\r\n\r\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\r\n\r\n\t\t\t\t\tif ( min <= max ) {\r\n\r\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\r\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\r\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// restrict phi to be between desired limits\r\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t\t// restrict radius to be between desired limits\r\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t\t// move target to panned location\r\n\r\n\t\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscale = 1;\r\n\r\n\t\t\t\t// update condition is:\r\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\t\tif ( zoomChanged ||\r\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\r\n\r\n\t\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t};\r\n\r\n\t\t}();\r\n\r\n\t\tthis.dispose = function () {\r\n\r\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\r\n\r\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\r\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\r\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\r\n\r\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\r\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\r\n\r\n\r\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\r\n\r\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t\t};\r\n\r\n\t\t//\r\n\t\t// internals\r\n\t\t//\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst STATE = {\r\n\t\t\tNONE: - 1,\r\n\t\t\tROTATE: 0,\r\n\t\t\tDOLLY: 1,\r\n\t\t\tPAN: 2,\r\n\t\t\tTOUCH_ROTATE: 3,\r\n\t\t\tTOUCH_PAN: 4,\r\n\t\t\tTOUCH_DOLLY_PAN: 5,\r\n\t\t\tTOUCH_DOLLY_ROTATE: 6\r\n\t\t};\r\n\r\n\t\tlet state = STATE.NONE;\r\n\r\n\t\tconst EPS = 0.000001;\r\n\r\n\t\t// current position in spherical coordinates\r\n\t\tconst spherical = new Spherical();\r\n\t\tconst sphericalDelta = new Spherical();\r\n\r\n\t\tlet scale = 1;\r\n\t\tconst panOffset = new Vector3();\r\n\t\tlet zoomChanged = false;\r\n\r\n\t\tconst rotateStart = new Vector2();\r\n\t\tconst rotateEnd = new Vector2();\r\n\t\tconst rotateDelta = new Vector2();\r\n\r\n\t\tconst panStart = new Vector2();\r\n\t\tconst panEnd = new Vector2();\r\n\t\tconst panDelta = new Vector2();\r\n\r\n\t\tconst dollyStart = new Vector2();\r\n\t\tconst dollyEnd = new Vector2();\r\n\t\tconst dollyDelta = new Vector2();\r\n\r\n\t\tconst pointers = [];\r\n\t\tconst pointerPositions = {};\r\n\r\n\t\tfunction getAutoRotationAngle() {\r\n\r\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getZoomScale() {\r\n\r\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t\t}\r\n\r\n\t\tfunction rotateLeft( angle ) {\r\n\r\n\t\t\tsphericalDelta.theta -= angle;\r\n\r\n\t\t}\r\n\r\n\t\tfunction rotateUp( angle ) {\r\n\r\n\t\t\tsphericalDelta.phi -= angle;\r\n\r\n\t\t}\r\n\r\n\t\tconst panLeft = function () {\r\n\r\n\t\t\tconst v = new Vector3();\r\n\r\n\t\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\t\tpanOffset.add( v );\r\n\r\n\t\t\t};\r\n\r\n\t\t}();\r\n\r\n\t\tconst panUp = function () {\r\n\r\n\t\t\tconst v = new Vector3();\r\n\r\n\t\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\r\n\r\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\r\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\t\tpanOffset.add( v );\r\n\r\n\t\t\t};\r\n\r\n\t\t}();\r\n\r\n\t\t// deltaX and deltaY are in pixels; right and down are positive\r\n\t\tconst pan = function () {\r\n\r\n\t\t\tconst offset = new Vector3();\r\n\r\n\t\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\t\tconst element = scope.domElement;\r\n\r\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t\t// perspective\r\n\t\t\t\t\tconst position = scope.object.position;\r\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\t\tlet targetDistance = offset.length();\r\n\r\n\t\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\r\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t\t// orthographic\r\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}();\r\n\r\n\t\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\tscale /= dollyScale;\r\n\r\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\t\tzoomChanged = true;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\t\tscope.enableZoom = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\tscale *= dollyScale;\r\n\r\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\t\tzoomChanged = true;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\t\tscope.enableZoom = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\t\t// event callbacks - update the object state\r\n\t\t//\r\n\r\n\t\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t\trotateEnd.set( event.clientX, event.clientY );\r\n\r\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\t\tconst element = scope.domElement;\r\n\r\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\t\tscope.update();\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\t\tscope.update();\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\t\tpanStart.copy( panEnd );\r\n\r\n\t\t\tscope.update();\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleMouseUp( /*event*/ ) {\r\n\r\n\t\t\t// no-op\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscope.update();\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleKeyDown( event ) {\r\n\r\n\t\t\tlet needsUpdate = false;\r\n\r\n\t\t\tswitch ( event.code ) {\r\n\r\n\t\t\t\tcase scope.keys.UP:\r\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\t\tneedsUpdate = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\t\tneedsUpdate = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\t\tneedsUpdate = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\t\tneedsUpdate = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( needsUpdate ) {\r\n\r\n\t\t\t\t// prevent the browser from scrolling on cursor keys\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchStartRotate() {\r\n\r\n\t\t\tif ( pointers.length === 1 ) {\r\n\r\n\t\t\t\trotateStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\r\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\r\n\r\n\t\t\t\trotateStart.set( x, y );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchStartPan() {\r\n\r\n\t\t\tif ( pointers.length === 1 ) {\r\n\r\n\t\t\t\tpanStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\r\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\r\n\r\n\t\t\t\tpanStart.set( x, y );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchStartDolly() {\r\n\r\n\t\t\tconst dx = pointers[ 0 ].pageX - pointers[ 1 ].pageX;\r\n\t\t\tconst dy = pointers[ 0 ].pageY - pointers[ 1 ].pageY;\r\n\r\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\tdollyStart.set( 0, distance );\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchStartDollyPan() {\r\n\r\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\r\n\r\n\t\t\tif ( scope.enablePan ) handleTouchStartPan();\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchStartDollyRotate() {\r\n\r\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\r\n\r\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate();\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t\tif ( pointers.length == 1 ) {\r\n\r\n\t\t\t\trotateEnd.set( event.pageX, event.pageY );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst position = getSecondPointerPosition( event );\r\n\r\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\r\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\r\n\r\n\t\t\t\trotateEnd.set( x, y );\r\n\r\n\t\t\t}\r\n\r\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\t\tconst element = scope.domElement;\r\n\r\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\t\tif ( pointers.length === 1 ) {\r\n\r\n\t\t\t\tpanEnd.set( event.pageX, event.pageY );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst position = getSecondPointerPosition( event );\r\n\r\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\r\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\r\n\r\n\t\t\t\tpanEnd.set( x, y );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\t\tpanStart.copy( panEnd );\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\t\tconst position = getSecondPointerPosition( event );\r\n\r\n\t\t\tconst dx = event.pageX - position.x;\r\n\t\t\tconst dy = event.pageY - position.y;\r\n\r\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n\t\t\tdollyOut( dollyDelta.y );\r\n\r\n\t\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchMoveDollyPan( event ) {\r\n\r\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchMoveDollyRotate( event ) {\r\n\r\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\r\n\r\n\t\t}\r\n\r\n\t\tfunction handleTouchEnd( /*event*/ ) {\r\n\r\n\t\t\t// no-op\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\t\t// event handlers - FSM: listen for events and reset state\r\n\t\t//\r\n\r\n\t\tfunction onPointerDown( event ) {\r\n\r\n\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\tif ( pointers.length === 0 ) {\r\n\r\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\r\n\r\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\r\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\r\n\t\t\taddPointer( event );\r\n\r\n\t\t\tif ( event.pointerType === 'touch' ) {\r\n\r\n\t\t\t\tonTouchStart( event );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tonMouseDown( event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerMove( event ) {\r\n\r\n\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\tif ( event.pointerType === 'touch' ) {\r\n\r\n\t\t\t\tonTouchMove( event );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tonMouseMove( event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerUp( event ) {\r\n\r\n\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\tif ( event.pointerType === 'touch' ) {\r\n\r\n\t\t\t\tonTouchEnd();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tonMouseUp( event );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tremovePointer( event );\r\n\r\n\t\t\t//\r\n\r\n\t\t\tif ( pointers.length === 0 ) {\r\n\r\n\t\t\t\tscope.domElement.releasePointerCapture( event.pointerId );\r\n\r\n\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\r\n\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onPointerCancel( event ) {\r\n\r\n\t\t\tremovePointer( event );\r\n\r\n\t\t}\r\n\r\n\t\tfunction onMouseDown( event ) {\r\n\r\n\t\t\tlet mouseAction;\r\n\r\n\t\t\tswitch ( event.button ) {\r\n\r\n\t\t\t\tcase 0:\r\n\r\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 1:\r\n\r\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 2:\r\n\r\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tmouseAction = - 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( mouseAction ) {\r\n\r\n\t\t\t\tcase MOUSE.DOLLY:\r\n\r\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase MOUSE.ROTATE:\r\n\r\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase MOUSE.PAN:\r\n\r\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( _startEvent );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove( event ) {\r\n\r\n\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\tswitch ( state ) {\r\n\r\n\t\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onMouseUp( event ) {\r\n\r\n\t\t\thandleMouseUp( event );\r\n\r\n\t\t\tscope.dispatchEvent( _endEvent );\r\n\r\n\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tfunction onMouseWheel( event ) {\r\n\r\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\r\n\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tscope.dispatchEvent( _startEvent );\r\n\r\n\t\t\thandleMouseWheel( event );\r\n\r\n\t\t\tscope.dispatchEvent( _endEvent );\r\n\r\n\t\t}\r\n\r\n\t\tfunction onKeyDown( event ) {\r\n\r\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\r\n\r\n\t\t\thandleKeyDown( event );\r\n\r\n\t\t}\r\n\r\n\t\tfunction onTouchStart( event ) {\r\n\r\n\t\t\ttrackPointer( event );\r\n\r\n\t\t\tswitch ( pointers.length ) {\r\n\r\n\t\t\t\tcase 1:\r\n\r\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\r\n\r\n\t\t\t\t\t\tcase TOUCH.ROTATE:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleTouchStartRotate();\r\n\r\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase TOUCH.PAN:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleTouchStartPan();\r\n\r\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 2:\r\n\r\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\r\n\r\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleTouchStartDollyPan();\r\n\r\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleTouchStartDollyRotate();\r\n\r\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( _startEvent );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onTouchMove( event ) {\r\n\r\n\t\t\ttrackPointer( event );\r\n\r\n\t\t\tswitch ( state ) {\r\n\r\n\t\t\t\tcase STATE.TOUCH_ROTATE:\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase STATE.TOUCH_PAN:\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\r\n\r\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleTouchMoveDollyPan( event );\r\n\r\n\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\r\n\r\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\r\n\r\n\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction onTouchEnd( event ) {\r\n\r\n\t\t\thandleTouchEnd( event );\r\n\r\n\t\t\tscope.dispatchEvent( _endEvent );\r\n\r\n\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu( event ) {\r\n\r\n\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t}\r\n\r\n\t\tfunction addPointer( event ) {\r\n\r\n\t\t\tpointers.push( event );\r\n\r\n\t\t}\r\n\r\n\t\tfunction removePointer( event ) {\r\n\r\n\t\t\tdelete pointerPositions[ event.pointerId ];\r\n\r\n\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\r\n\r\n\t\t\t\tif ( pointers[ i ].pointerId == event.pointerId ) {\r\n\r\n\t\t\t\t\tpointers.splice( i, 1 );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction trackPointer( event ) {\r\n\r\n\t\t\tlet position = pointerPositions[ event.pointerId ];\r\n\r\n\t\t\tif ( position === undefined ) {\r\n\r\n\t\t\t\tposition = new Vector2();\r\n\t\t\t\tpointerPositions[ event.pointerId ] = position;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tposition.set( event.pageX, event.pageY );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getSecondPointerPosition( event ) {\r\n\r\n\t\t\tconst pointer = ( event.pointerId === pointers[ 0 ].pointerId ) ? pointers[ 1 ] : pointers[ 0 ];\r\n\r\n\t\t\treturn pointerPositions[ pointer.pointerId ];\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\r\n\r\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\r\n\t\tscope.domElement.addEventListener( 'pointercancel', onPointerCancel );\r\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\r\n\r\n\t\t\r\n\t\t/**\r\n\t\t * Truyền một sự kiện vào control\r\n\t\t * @param {string} name tên sự kiện\r\n\t\t * @param {Event} event Sự kiện\r\n\t\t */\r\n\t\t this.transferEventListenner = function (name, event) {\r\n\r\n\t\t\tif (typeof name == \"string\") {\r\n\t\t\t\tvar ev = name.toLowerCase();\r\n\t\t\t\tswitch (ev) {\r\n\t\t\t\t\tcase 'contextmenu':\r\n\t\t\t\t\t\tonContextMenu(event);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'pointerdown':\r\n\t\t\t\t\t\tonPointerDown(event);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'pointerup':\r\n\t\t\t\t\t\tonPointerUp(event);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'wheel':\r\n\t\t\t\t\t\tonMouseWheel(event);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'touchstart':\r\n\t\t\t\t\t\tonTouchStart(event);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'touchend':\r\n\t\t\t\t\t\tonTouchEnd(event);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'touchmove':\r\n\t\t\t\t\t\tonTouchMove(event);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'keydown':\r\n\t\t\t\t\t\tonKeyDown(event);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t// console.warn(name + \" event is not define\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.getEventList = () => [\r\n\t\t\t'contextmenu',\r\n\t\t\t'pointerdown',\r\n\t\t\t'pointerup',\r\n\t\t\t'wheel',\r\n\t\t\t'touchstart',\r\n\t\t\t'touchend',\r\n\t\t\t'touchmove',\r\n\t\t\t'keydown'\r\n\t\t];\r\n\t\t// force an update at start\r\n\r\n\t\tthis.update();\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n// This is very similar to OrbitControls, another set of touch behavior\r\n//\r\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - left mouse, or arrow keys / touch: one-finger move\r\n\r\nclass MapControls extends OrbitControls {\r\n\r\n\tconstructor( object, domElement ) {\r\n\r\n\t\tsuper( object, domElement );\r\n\r\n\t\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\r\n\r\n\t\tthis.mouseButtons.LEFT = MOUSE.PAN;\r\n\t\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\r\n\r\n\t\tthis.touches.ONE = TOUCH.PAN;\r\n\t\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { OrbitControls, MapControls };\r\n","import createClass from '@app/_core/helpers/es5.class';\r\nimport { isArray, isEmpty, isNumber, isObject, isString } from '@app/_core/helpers/utils';\r\n\r\n\r\nimport Scene from '../traits/scene';\r\nimport Camera from '../traits/camera';\r\nimport Renderer from '../traits/renderer';\r\nimport Controls from '../traits/controls';\r\nimport GridHelper from '../traits/grid-helper';\r\nimport Lights from '../traits/lights';\r\nimport ObjectManager from '../traits/object-manager';\r\nimport {EventDispatcher} from '../libs/event-dispatcher';\r\n\r\nimport { Geometries, LightLib, LoaderLib, Materials, Meshes } from '../libs/three.libs';\r\nimport Loader from '../modules/loader'\r\nimport Composer from '../modules/composer'\r\nimport DynamicShadows from '../modules/dynamic-shadows'\r\nimport Models from '../libs/models';\r\nimport { EngineClass } from './engine.doc';\r\nimport { Floor } from '../traits/floor';\r\n\r\n\r\n\r\nconst AppEngine:EngineClass = createClass(\"AppEngine\").uses(Scene, Camera, Renderer, Controls, Models, Lights, ObjectManager, Floor, EventDispatcher, GridHelper)({\r\n    /**\r\n     * @property {object} data\r\n     */\r\n    data: {},\r\n    /**\r\n     * @property {object} options\r\n     */\r\n    options: {},\r\n\r\n    /**\r\n     * \r\n     * @property {Mesh} Mesh \r\n     */\r\n    Mesh: {},\r\n    /**\r\n     * @property {Geometry} Geometry\r\n     */\r\n    Geometry: {},\r\n    /**\r\n     * @property {Material} Material\r\n     */\r\n    Material: {},\r\n    /**\r\n     * @property {Light} Light\r\n     */\r\n    Light: {},\r\n    /**\r\n     * @property {Composer} Composer\r\n     */\r\n    Composer: {},\r\n    /**\r\n     * @property {Custom}\r\n     */\r\n    // Custom: {},\r\n\r\n    /**\r\n     * \r\n     * @property {Shadows} options \r\n     */\r\n    Shadows: {},\r\n\r\n    inited: false,\r\n\r\n    /**\r\n     * Hàm khởi tạo\r\n     * @param {Dom.Query} viewport \r\n     * @param {*} options \r\n     */\r\n    constructor: function (options?:any) {\r\n        if (options && isObject(options)) this.setOptions(options);\r\n    },\r\n    setOptions: function (options?:any) {\r\n        if (isObject(options)) this.options = options;\r\n        if (this.options.data && isObject(this.options.data)) {\r\n            this.data = this.options.data;\r\n        }\r\n    },\r\n    startup: function startup(options?:any) {\r\n        if (this.inited) return this;\r\n        this.inited = true;\r\n\r\n\r\n        if (options && isObject(options)) this.setOptions(options);\r\n        this.emit('startup', this.options);\r\n\r\n        this.createScene(this.data.scene || {});\r\n        this.setMainCamera(this.data.camera || {});\r\n        this.createRenderer(this.data.renderer || {});\r\n\r\n\r\n        if (this.data.composer) {\r\n            this.composer = new Composer(this, this.data.composer);\r\n        }\r\n        \r\n        this.Shadows = new DynamicShadows(this, this.data.shadow || this.data.shadows || {});\r\n        this.Geometry = Geometries;\r\n        this.Material = Materials;\r\n        this.Mesh = Meshes;\r\n        this.Light = LightLib;\r\n        this.Loader = new Loader(this);\r\n        this.viewport.setCanvas(this.getCanvas());\r\n        this.camera.updateProjectionMatrix();\r\n        this.setMainControl(this.data.control || {});\r\n\r\n        var self = this;\r\n\r\n\r\n        if (this.data.lights && isArray(this.data.lights)) {\r\n            this.addLights(this.data.lights);\r\n        }\r\n        if (this.data.models && isArray(this.data.models)) {\r\n            this.addModels(this.data.models);\r\n        }\r\n        if (this.data.meshes && isArray(this.data.meshes)) {\r\n            this.addMeshes(this.data.meshes);\r\n        }\r\n        if (this.data.objects && (isArray(this.data.objects) || isObject(this.data.objects))) {\r\n            this.addObjects(this.data.objects);\r\n        }\r\n        if (this.data.grids && isArray(this.data.grids)) {\r\n            this.addGrids(this.data.grids);\r\n        }\r\n        if (this.data.cameras && isArray(this.data.cameras)) {\r\n            this.addCameras(this.data.cameras);\r\n        }\r\n        if (this.data.foregrounds && isArray(this.data.foregrounds)) {\r\n            this.addForegrounds(this.data.foregrounds);\r\n        }\r\n        if (this.data.floor && isArray(this.data.floor)) {\r\n            this.addFloor(this.data.floor);\r\n        }\r\n        if (this.data.controls && isArray(this.data.controls)) {\r\n            this.addControls(this.data.controls);\r\n        }\r\n\r\n\r\n        // this.Shadows = new Shadows(this, this.data.shadow || this.data.shadows || {});\r\n        // this.Shadows.init();\r\n        self.ready();\r\n        if (!this.autoRenderStatus) {\r\n            setTimeout(function () {\r\n                self.render();\r\n            }, 500);\r\n        }\r\n        return this;\r\n\r\n    }\r\n}) as EngineClass;\r\nexport default AppEngine;\r\nexport {AppEngine};\r\n","import { Directive, EmbeddedViewRef, Input, TemplateRef, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n  // tslint:disable-next-line: directive-selector\r\n  selector: '[stringTemplateOutlet]',\r\n})\r\nexport class StringTemplateOutletDirective {\r\n  private isTemplate: boolean;\r\n  private inputTemplate: TemplateRef<void> | null = null;\r\n  private inputViewRef: EmbeddedViewRef<void> | null = null;\r\n  private defaultViewRef: EmbeddedViewRef<void> | null = null;\r\n\r\n  constructor(private viewContainer: ViewContainerRef, private defaultTemplate: TemplateRef<void>) {}\r\n\r\n  @Input()\r\n  set stringTemplateOutlet(value: string | TemplateRef<void>) {\r\n    if (value instanceof TemplateRef) {\r\n      this.isTemplate = true;\r\n      this.inputTemplate = value;\r\n    } else {\r\n      this.isTemplate = false;\r\n    }\r\n    this.updateView();\r\n  }\r\n\r\n  updateView(): void {\r\n    if (!this.isTemplate) {\r\n      // use default template when input is string\r\n      if (!this.defaultViewRef) {\r\n        this.viewContainer.clear();\r\n        this.inputViewRef = null;\r\n        this.defaultViewRef = this.viewContainer.createEmbeddedView(this.defaultTemplate);\r\n      }\r\n    } else {\r\n      // clear previous view if any.\r\n      if (this.inputViewRef) {\r\n        this.inputViewRef = null;\r\n      }\r\n      // use input template when input is templateRef\r\n      this.viewContainer.clear();\r\n      this.defaultViewRef = null;\r\n      this.inputViewRef = this.viewContainer.createEmbeddedView(this.inputTemplate);\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { PreloadAllModules } from '@angular/router';\r\nimport { AuthGuard } from './_core/guards';\r\n\r\nconst routes: Routes = [\r\n  // {\r\n  //   path: '',\r\n  //   pathMatch: 'full',\r\n  //   redirectTo: 'project/list',\r\n  // },\r\n  // {\r\n  //   path: '',\r\n  //   loadChildren: () => import('./base-page/page.module').then((m) => m.PageModule),\r\n  //   canActivate: [AuthGuard],\r\n  // },\r\n  {\r\n    path: 'auth',\r\n    loadChildren: () => import('./auth/auth.module').then((m) => m.AuthModule),\r\n  },\r\n  {\r\n    path: 'admin/3d/items',\r\n    loadChildren: () => import('./item-page/item.module').then((m) => m.ItemModule),\r\n    // canActivate: [AuthGuard],\r\n  },\r\n  {\r\n    path: 'admin/3d/templates',\r\n    loadChildren: () => import('./template-page/template.module').then((m) => m.TemplateModule),\r\n    // canActivate: [AuthGuard],\r\n  },\r\n  {\r\n    path: 'admin/3d/projects',\r\n    loadChildren: () => import('./project-page/project.module').then((m) => m.ProjectModule),\r\n    // canActivate: [AuthGuard],\r\n  },\r\n  // {\r\n  //   path: 'view',\r\n  //   loadChildren: () => import('./viewer-page/viewer.module').then((m) => m.ViewerModule),\r\n  //   canActivate: [AuthGuard],\r\n  // },\r\n  {\r\n    path: '**',\r\n    redirectTo: 'admin/3d/items/0/edit',\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forRoot(routes, {\r\n      enableTracing: false,\r\n      relativeLinkResolution: 'legacy',\r\n      preloadingStrategy: PreloadAllModules,\r\n    }),\r\n  ],\r\n  exports: [RouterModule],\r\n})\r\nexport class AppRoutingModule {}\r\n","import {\r\n    assignValue,\r\n    assignWithout,\r\n    getObjectPropDepth,\r\n    inArray,\r\n    isArray,\r\n    isInteger,\r\n    isNumber,\r\n    isObject,\r\n    isString,\r\n    newObj,\r\n    _defineProperties\r\n} from '@app/_core/helpers/utils';\r\nimport * as THREEjs from 'three';\r\nimport { Geometries, LoaderLib, Materials, Meshes } from './three.libs';\r\nconst THREE = THREEjs;\r\n\r\ninterface AnyObject {\r\n    [x:string]:any\r\n}\r\n\r\nvar checkedValues = [];\r\nfunction addCheckedItem(item) {\r\n    if (inArray(checkedValues, item, true)) checkedValues.push(item);\r\n}\r\n/**\r\n * chuẩn hóa đối tượng và các giá trị của three js\r\n * @param {object} obj doi tuomg dau vao\r\n * @returns {object}\r\n */\r\nconst parseObject = function parseObject(obj:any, success:any=undefined):AnyObject {\r\n    if (typeof obj != \"object\") return obj;\r\n    if (inArray(checkedValues, obj, true) || obj.uuid || obj.isMesh || obj.isColor || obj.isGeometry || obj.isMaterial) return obj;\r\n\r\n    if (isObject(obj)) {\r\n        if (obj.$three) {\r\n            var newObj = {};\r\n            let params = parseObject(assignWithout({}, obj.data || obj, ['$three']));\r\n            var t = obj.$three.toLowerCase();\r\n            switch (t) {\r\n                case 'geometry':\r\n                    newObj = Geometries.get(params);\r\n                    break;\r\n                case 'material':\r\n                    newObj = Materials.get(params);\r\n                    break;\r\n                case 'mesh':\r\n                    newObj = Meshes.get(params);\r\n                    break;\r\n                case 'texture':\r\n\r\n                    newObj = LoaderLib.load(t, params, success);\r\n                    break;\r\n                case 'cubetexture':\r\n                    newObj = LoaderLib.load(t, params, success);\r\n                    break;\r\n\r\n                case 'color':\r\n                    newObj = createColor(params.hex || params.rgb || params.hsl || params.color);\r\n                    break;\r\n\r\n\r\n                default:\r\n                    break;\r\n            }\r\n            return newObj;\r\n        }\r\n        else {\r\n            for (const key in obj) {\r\n                if (obj.hasOwnProperty(key)) {\r\n                    let element = obj[key];\r\n\r\n                    var s = String(key).substr(0, 1);\r\n                    if (s == '@') {\r\n                        let n = String(key).substr(1);\r\n                        let k = n.toLowerCase();\r\n                        let params = parseObject(element, success);\r\n                        if (k == 'geometry') {\r\n                            let geo = Geometries.get(params);\r\n                            delete obj[key];\r\n                            obj[n] = geo;\r\n                        } else if (k == 'material') {\r\n                            let mesh = Materials.get(params);\r\n                            delete obj[key];\r\n                            obj[n] = mesh;\r\n                        } else if (k == 'mesh') {\r\n                            let mesh = Meshes.get(params);\r\n                            delete obj[key];\r\n                            obj[n] = mesh;\r\n                        } else if (k == 'coler') {\r\n                            let color = createColor(element);\r\n                            delete obj[key];\r\n                            obj[n] = color;\r\n                        }\r\n                        else if (isArray(element)) {\r\n                            parse(obj[key], success);\r\n                            addCheckedItem(obj[key]);\r\n                        }\r\n\r\n                    }\r\n                    else if (isNumber(element)) {\r\n                        obj[key] = Number(element);\r\n                    }\r\n                    else if (isString(element)) {\r\n                        obj[key] = parseString(element);\r\n                    }\r\n                    else if (isObject(element)) {\r\n                        if (Object.hasOwnProperty.call(element, '$three')) {\r\n                            obj[key] = parseObject(element, success);\r\n\r\n                        } else {\r\n                            parseObject(obj[key], success);\r\n                            addCheckedItem(obj[key]);\r\n                        }\r\n                    } else if (isArray(element)) {\r\n                        parse(obj[key], success);\r\n                        addCheckedItem(obj[key]);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n    addCheckedItem(obj);\r\n    return obj;\r\n};\r\n\r\n\r\n/**\r\n * chuẩn hóa đối tượng và các giá trị của three js\r\n * @param {array} obj doi tuomg dau vao\r\n * @returns {object}\r\n */\r\nconst parseArray = function parseArray(obj:any=undefined, success:any=undefined) {\r\n    if (isArray(obj)) {\r\n        for (let index = 0; index < obj.length; index++) {\r\n            const element = obj[index];\r\n            if (isObject(element)) {\r\n                if (typeof element.$three != \"undefined\") {\r\n                    obj[index] = parseObject(element, success);\r\n                } else {\r\n                    parseObject(element, success);\r\n                }\r\n            }\r\n            else if (isArray(element)) {\r\n                parseArray(element, success);\r\n            } else if (isString(element)) {\r\n                obj[index] = parseString(element);\r\n            }\r\n        }\r\n        // if(typeof success == \"function\") success(obj);\r\n    }\r\n    return obj;\r\n\r\n};\r\n\r\n\r\n\r\n\r\nconst parseThree = (key:string) => getObjectPropDepth(THREE, key);\r\n\r\n\r\n/**\r\n * chuẩn hóa chuỗi thành giá trị trong js\r\n * @param {string} str chuoi dau vao\r\n * @returns {string}\r\n */\r\nconst parseString = function parseString(str:any=undefined) {\r\n    var e = String(str);\r\n    // console.log(e);\r\n    if (e.substr(0, 1) == '{' && e.substr(e.length - 1) == '}') {\r\n        var f = e.substr(1, e.length - 2);\r\n        var fp = f.split(\".\");\r\n        var t = fp.shift();\r\n        if(t=='THREE') return parseThree(fp.join(\".\"));\r\n        var vl = null;\r\n        var exp = \"vl = \" + f + \";\";\r\n        try {\r\n            eval(exp);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        if (vl !== null) {\r\n            str = vl;\r\n        }\r\n    }\r\n    return str;\r\n};\r\n\r\n\r\n/**\r\n * chuẩn hóa đối tượng và các giá trị của three js\r\n * @param {object|array|string} obj doi tuomg dau vao\r\n * @returns {object|array|string}\r\n */\r\n\r\nconst parse = function parse(obj:any=undefined, success:any=undefined):AnyObject {\r\n    if (isObject(obj)) return parseObject(obj, success);\r\n    else if (isArray(obj)) return parseArray(obj, success);\r\n    else if (isString(obj)) return parseString(obj);\r\n    return obj;\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * lấy các tham số chứa trong phầm thông tin thiết lập đối tượng\r\n * @param {object|array} argms tham so cau hinh\r\n * @param {object|array} list tham so cau hinh\r\n * @param {array|object} opt danh sachs cac key trong constructor\r\n * @returns {object}\r\n */\r\nconst parseParams = function parseParams(argms:any=undefined, list:any=undefined, opt:any=undefined):AnyObject {\r\n    var params = newObj();\r\n    opt = typeof opt == \"object\" ? opt : {};\r\n    var args = argms && (isArray(argms) || isObject(argms)) ? argms : [];\r\n    // nếu list đầu vào là một màng tên các tham số\r\n    if (isArray(list)) {\r\n        // và tham số cũng là 1 mảng\r\n        if (isArray(args)) {\r\n            for (let i = 0; i < list.length; i++) {\r\n                const p = list[i];\r\n                if (typeof args[i] != \"undefined\") {\r\n                    params[p] = args[i];\r\n                } else {\r\n                    params[p] = typeof opt[p] != \"undefined\" ? opt[p] : undefined\r\n                }\r\n            }\r\n        }\r\n        // nếu tham số là object\r\n        else {\r\n            for (let i = 0; i < list.length; i++) {\r\n                const p = list[i];\r\n                if (typeof args[p] != \"undefined\") {\r\n                    params[p] = args[p];\r\n                } else {\r\n                    params[p] = typeof opt[p] != \"undefined\" ? opt[p] : undefined\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    // nếu list là một object có dạng key là tên tham số còn value gla giá trị mặc định\r\n    else if (isObject(list)) {\r\n        // duyệt list với các giá trị mặc định\r\n        if (isArray(args)) {\r\n            // biến đếm để lấy giá trị tham số theo thứ tự\r\n            var i = 0;\r\n            for (const key in list) {\r\n                if (list.hasOwnProperty(key)) {\r\n                    const defVal = list[key];\r\n                    // opt là mảng giá trị mặc định không cần thứ tự\r\n                    // lấy giá trị opt trước\r\n                    params[key] = typeof opt[key] != 'undefined' ? opt[key] : (\r\n                        // không có sẽ lấy trong args. không có nữa sẽ lấy bên list cũng là default\r\n                        args && typeof args[i] != \"undefined\" ? args[i] : defVal\r\n                    )\r\n                    i++;\r\n                }\r\n            }\r\n        } else {\r\n            for (const key in list) {\r\n                if (list.hasOwnProperty(key)) {\r\n                    const defVal = list[key];\r\n                    params[key] = args && typeof args[key] != \"undefined\" ? args[key] : (\r\n                        typeof opt[key] != 'undefined' ? opt[key] : defVal\r\n                    );\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    if (params.color && (isString(params.color) || isNumber(params.color) || (isObject(params.color) && !params.color.isColor))) {\r\n        params.color = createColor(params.color);\r\n    }\r\n    return parse(params);\r\n};\r\n\r\nconst createColor = function createColor(color:any=undefined) {\r\n    var c = new THREE.Color(0xffffff).convertSRGBToLinear();\r\n    if (isColor(color)) {\r\n        if (isObject(color)) {\r\n            c = new THREE.Color(color.r, color.g, color.b);\r\n            c.convertSRGBToLinear();\r\n        } else {\r\n            c = new THREE.Color(parseColorIntVal(color));\r\n            c.convertSRGBToLinear();\r\n        }\r\n    }\r\n    return c;\r\n}\r\n\r\n/**\r\n * \r\n * @param {THREE.Color} val \r\n * @returns \r\n */\r\nconst parseColor = (val) => {\r\n    // console.log(val);\r\n    return (isObject(val) && val.isColor) ? (val.totalSRGBToLinear?val:val.convertSRGBToLinear() ) : createColor(val);\r\n}\r\n\r\nconst parseColorIntVal = function (val) {\r\n    if (!isColor(val)) return 0;\r\n    if (typeof val == \"string\") {\r\n        if (val.substr(0, 1) == \"#\") {\r\n            var b = parseInt(val.substr(1), 16);\r\n            if (!isNaN(b) && isNumber(b)) {\r\n                return b;\r\n            }\r\n        } else {\r\n            var b = parseInt(val, 16);\r\n            if (!isNaN(b) && isNumber(b)) {\r\n                return b;\r\n            }\r\n        }\r\n    } else if (isNumber(val)) {\r\n        return val;\r\n    }\r\n\r\n    return 0;\r\n};\r\n\r\nconst isColor = function isColor(obj:any):boolean {\r\n    if (isInteger(obj)) return true;\r\n    if (isString(obj)) {\r\n        var re = /[0-9A-Fa-f]{6}/g;\r\n        var re2 = /[0-9A-Fa-f]{3}/g;\r\n\r\n        if (obj.substr(0, 1) == \"#\") {\r\n            var hex = obj.substr(1);\r\n            if (re.test(hex) || re2.test(hex)) return true;\r\n        }\r\n        else if (re.test(obj) || re2.test(obj)) return true;\r\n    } else if (isObject(obj) && obj.isColor) return true;\r\n\r\n    return false;\r\n}\r\n\r\n\r\nfunction getObjectAnimateHandler(options:any=undefined):any {\r\n    if (!isObject(options)) return null;\r\n    var keys = [\r\n        \"updateHhndler\",\r\n        \"handler\",\r\n        \"animate\",\r\n        \"animatehandler\",\r\n        \"handlerdata\",\r\n        \"updatehandlerdata\",\r\n        \"animatedata\",\r\n        \"updateanimatedata\",\r\n        \"updateanimatehandlerdata\"\r\n    ];\r\n    if (isObject(options.props)) {\r\n        for (const key in options.props) {\r\n            if (options.props.hasOwnProperty(key)) {\r\n                const d = options.props[key];\r\n                if (inArray(keys, key)) {\r\n                    return d;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    for (const key in options) {\r\n        if (options.hasOwnProperty(key)) {\r\n            const d = options[key];\r\n            if (inArray(keys, key)) {\r\n                return d;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction Props(params:any=undefined) {\r\n    this.origin = params;\r\n    this.parseData = parse(params);\r\n}\r\nObject.assign(Props.prototype, {\r\n    constructor: Props,\r\n    parse: parse,\r\n    parseArray: parseArray,\r\n    parseObject: parseObject,\r\n    parseString: parseString,\r\n    parseParams: parseParams,\r\n    parseColorIntVal: parseColorIntVal,\r\n    parseColor: parseColor,\r\n    isColor: isColor,\r\n    createColor: createColor,\r\n    getObjectAnimateHandler: getObjectAnimateHandler,\r\n    toString: function () {\r\n        return this.toJSON();\r\n    }\r\n});\r\nProps.parse = parse;\r\nProps.parseArray = parseArray;\r\nProps.parseObject = parseObject;\r\nProps.parseString = parseString;\r\nProps.createColor = createColor;\r\nProps.isColor = isColor;\r\nProps.parseColorIntVal = parseColorIntVal;\r\nProps.parseColor = parseColor;\r\nProps.parseParams = parseParams;\r\nProps.getObjectAnimateHandler = getObjectAnimateHandler;\r\nexport default Props;\r\nexport { Props, parse, parseArray, parseObject, parseString, createColor, isColor, parseColorIntVal, parseParams, parseColor };","import { Injectable } from '@angular/core';\nimport { isFunction, isObject } from '@app/_core/helpers/utils';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\nexport interface ApiParams {\n    search?: string\n    page?: number\n    perPage?: number\n    orderBy?: string\n    orderType?: string\n    [x: string]: (string | number)\n}\n\nexport type LibraryOpenParams = {\n    \n    title?: string,\n    listType?: string,\n    url?: string\n    params?: ApiParams\n    mode?: string,\n    done?: (image: (any | any[])) => any,\n    cancel?: () => any,\n    \n    [x: string]: any\n}\n\ntype libParam = (((...args:any[]) => any) | LibraryOpenParams);\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ImageLibraryService extends EventManagerService {\n\n    constructor() {\n        super();\n    }\n\n    /**\n     * \n     * @param params tham so thu vien\n     * @param callback ham khi chon anh xong\n     * @returns \n     */\n    open(params?: libParam, callback?: (image?: any) => any, cancel?: (...args:any[]) => any): ImageLibraryService {\n\n        var pars: any = {};\n        var callb: any;\n        if (isFunction(params)) {\n            callb = params;\n            if (isObject(callback) && callback) pars = callback;\n            else if(isFunction(callback)){\n                cancel = callback;\n            }\n        }\n        else {\n            if (isObject(params)) {\n                pars = params;\n                if (isFunction(pars.done)) {\n                    callb = pars.done;\n                }\n                if (isFunction(pars.cancel)) {\n                    cancel = pars.cancel;\n                }\n                \n            }\n            if (!isFunction(callb) && isFunction(callback)) {\n                callb = callback;\n            }\n        }\n        this.emit({\n            type: \"open\",\n            config: pars,\n            callback: callb,\n            cancel\n        })\n        return this;\n    }\n}\n","export * from './input.data';","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, Input, OnInit } from '@angular/core';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { BaseComponent } from '../base/base.component';\nimport { ClientEditToolbarService } from './client-edit-toolbar/client-edit-toolbar.service';\nimport { ObjectToolbarService } from './object-toolbar/object-toolbar.service';\nimport { ViewportService } from './viewport.service';\n\n@Component({\n    selector: 'app-item-viewport',\n    templateUrl: './client-viewport.component.html',\n    styleUrls: ['./client-viewport.component.scss']\n})\nexport class ItemViewportComponent extends BaseComponent implements OnInit {\n    @Input() app: any;\n    app3D: AppEditorService = null;\n    canvas: Element = null;\n    droppable: boolean = false;\n    isLoad: boolean = false;\n    appTem: AppEditorService = null;\n    subToolbar: ObjectToolbarService = null;\n    constructor(\n        private elemRef: ElementRef,\n        private events: ViewportService,\n        private toolbar: ObjectToolbarService,\n        private cd: ChangeDetectorRef\n    ) {\n        super();\n        \n    }\n\n    onChangeSubEvents(){\n        // this.service.on(, true);\n\n        this.registerEventService(this.subEvents, {\n            'app.set|dispatch': e => {\n                this.appTem = e.app;\n            }\n        })\n        this.registerEventService(document, {\n            pointerup: e => this.transferEvent(e),\n        })\n    }\n\n    onInit(): void {\n        const st = this.toolbar.sub(this.moduleKey);\n        if(this.subToolbar != st){\n            this.subToolbar = st;\n        }\n        this.hasChangeApp = false;\n        if (this.app) {\n            this.setApp(this.app);\n        }else if(!this.app3D){\n            if(this.appTem) this.setApp(this.appTem);\n            else this.subEvents.on('app.set', e => this.setApp(e.app), true);\n        }\n\n        if(!this.hasChangeApp && this.app3D){\n            this.activeEventServiceRegistered(this.app3D);\n        }\n        this.hasChangeApp = false;\n        this.cd.detectChanges();\n        this.activeEventServiceRegistered(document)\n    }\n\n    onDestroy(){\n        this.deactiveEventServiceRegistered(this.app3D);\n        this.deregisterAllEventService(document)\n    }\n\n    initCanvas() {\n        this.canvas = this.app3D.engine.getCanvas();\n    }\n\n    setApp(app) {\n        if(app == this.app3D) return this.initCanvas();\n        if(this.app3D){\n            this.deactiveEventServiceRegistered(this.app3D);\n            this.deregisterAllEventService(this.app3D);\n        }\n\n        this.app3D = app;\n        this.registerEventService(this.app3D, {\n            'viewport.show:loading': () => {\n                this.isLoad = true;\n                this.subEvents.emit(\"show:loading\");\n            },\n            'viewport.hide:loading': () => {\n                this.isLoad = false;\n                this.subEvents.emit(\"hide:loading\");\n            },\n            \n            \"control.mode.change\": e => this.subToolbar.changeMode(e.node),\n            \"init\": () => this.subEvents.emit(\"resetcanvas\")    \n        });\n\n        this.activeEventServiceRegistered(this.app3D);\n        this.hasChangeApp = true;\n        this.initCanvas();\n        \n    }\n\n    transferEvent(event){\n        if(this.app3D){\n            this.app3D.transferEventListenner(event)\n        }\n    }\n\n}\n","\r\n// localStorage\r\n\r\nimport { EventEmit, EventManager } from \"./event-manager\";\r\nimport { date, getArguments, inArray, isArray, isBoolean, isEmpty, isFunction, isObject, isString, Str } from \"./utils\";\r\nconst DEFAULT_VALUE = Str.rand(Str.rand(date('ms')));\r\nvar ignoreKeys = ['__data', '__namespace', '__version', '_listeners', '_dispatchedEvents'];\r\n\r\nclass LocalStorageEngine extends EventManager {\r\n    __namespace: string = \"__crushjs__\";\r\n    __verison = \"1.0\";\r\n    __data: any = {};\r\n\r\n    constructor(namespace: string, data?: any, verison?: any) {\r\n        super();\r\n        if (!namespace) throw new Error(\"param 0: Namespace is required\");\r\n        this.__namespace = namespace ? namespace : \"__crushjs__\";\r\n        this.__verison = verison ? verison : \"1.0\";\r\n        this.__data = isObject(data) ? data : {};\r\n        this.__init();\r\n    }\r\n\r\n    __init() {\r\n        var data = this.__getNamespaceData();\r\n        if (data) {\r\n            this.__data = data;\r\n            for (var key in data) {\r\n                if (Object.hasOwnProperty.call(data, key)) {\r\n                    this.__addAccessors(key);\r\n                }\r\n            }\r\n        } else {\r\n            if (!isEmpty(this.__data)) {\r\n                for (var key in this.__data) {\r\n                    if (Object.hasOwnProperty.call(this.__data, key)) {\r\n                        this.__addAccessors(key);\r\n                    }\r\n                }\r\n            }\r\n            this.__setNamespaceData(this.__data);\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    __addAccessors(key): void {\r\n        Object.defineProperty(this, key, {\r\n            configurable: true,\r\n            enumerable: true,\r\n            set: function (val) {\r\n                this.set(key, val);\r\n            },\r\n            get: function () {\r\n                return this.get(key);\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    set(key: string, value: any) {\r\n        var old = this.__data[key];\r\n        if (!inArray(ignoreKeys, key) && Str.objectKey(key) == key && (typeof this.__data[key] == \"undefined\" || !Object.prototype.hasOwnProperty.call(this.__data, key))) {\r\n            this.__addAccessors(key);\r\n        }\r\n        this.__data[key] = value;\r\n        this.__updateNamespaceData();\r\n        this.dispatchEvent({\r\n            key: key + \".set\",\r\n            value: value,\r\n            old: old\r\n        });\r\n        this.dispatchEvent({\r\n            key: key,\r\n            value: value,\r\n            old: old\r\n        })\r\n    }\r\n\r\n    get(key: string, defaultValue?: any): any {\r\n        var value = typeof this.__data[key] !== \"undefined\" ? this.__data[key] : defaultValue;\r\n        this.dispatchEvent({\r\n            key: key + \".get\",\r\n            value: value\r\n        })\r\n        return value;\r\n    }\r\n\r\n    remove(key: string): boolean {\r\n        var value = typeof this.__data[key] !== \"undefined\" ? this.__data[key] : undefined;\r\n        if (value !== undefined) {\r\n            this.__data[key] = undefined;\r\n            delete this.__data[key];\r\n            this.__updateNamespaceData();\r\n            this.dispatchEvent({\r\n                key: key + \".remove\",\r\n                value: value\r\n            })\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * set gia tri vao storage\r\n     * @param {*} value gia tri\r\n     * @returns {this}\r\n     */\r\n    __setNamespaceData(value: any) {\r\n        if (!this.__support()) return false;\r\n        if (isObject(value) || isArray(value)) {\r\n            value = JSON.stringify(value);\r\n        }\r\n        localStorage.setItem(this.__namespace, value);\r\n        return true;\r\n    }\r\n\r\n    __updateNamespaceData(): void {\r\n        localStorage.setItem(this.__namespace, JSON.stringify(this.__data));\r\n    }\r\n\r\n    /**\r\n     * Lấy giá trị từ storage\r\n     * @param {string} key chuoi khoa de truy cap\r\n     * @returns {*}\r\n     */\r\n    __getNamespaceData(): any {\r\n        if (!this.__support()) return null;\r\n        var val = localStorage.getItem(this.__namespace);\r\n        if (val) {\r\n            try {\r\n                val = JSON.parse(val);\r\n            } catch (error) {\r\n\r\n            }\r\n        }\r\n        return val;\r\n    }\r\n\r\n    /**\r\n     * Xóa giá trị\r\n     * @param {string} key \r\n     */\r\n    __removeNamespace(): boolean {\r\n        if (!this.__support()) return false;\r\n        // this.removeInObjectList(key);\r\n\r\n        localStorage.removeItem(this.__namespace);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * kiểm tra trình duyệt có hỗ trợ hay ko\r\n     */\r\n    __support(): boolean {\r\n\r\n        if (typeof (Storage) !== \"undefined\") {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Tạo, gọi ra một sự kiện\r\n     * @param {string|object} event Tên hoặc sự kiện\r\n     * @param {*} data dữ liệu\r\n     * @returns {boolean}\r\n     */\r\n\r\n    dispatchEvent(event: (EventEmit | String), value?: any, log?: boolean): boolean {\r\n        if (this._listeners === undefined || this._listeners === null || !event) return null;\r\n\r\n        var e: any = {};\r\n        if (isString(event)) {\r\n            e.key = event;\r\n            if (value!=undefined) {\r\n                e.value = value;\r\n            }\r\n            // console.log(event, data);\r\n        } else if (isObject(event)) {\r\n            e = event;\r\n            if (!e.key) return false;\r\n            if (!e.data && value) {\r\n                e.value = value;\r\n            }\r\n            if (isBoolean(value) && typeof log == \"undefined\") {\r\n                log = value;\r\n            }\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n\r\n        const listeners = this._listeners;\r\n        const listenerArray = listeners[e.value];\r\n        var s = true;\r\n        if (!e.target) {\r\n            e.target = this;\r\n        }\r\n\r\n        if (!e.stopImmediatePropagation)\r\n            e.stopImmediatePropagation = function () {\r\n                s = false;\r\n            };\r\n\r\n        if (log !== false) {\r\n            this.addDispatchedEvent(e);\r\n        }\r\n\r\n\r\n        if (listenerArray !== undefined) {\r\n            // Make a copy, in case listeners are removed while iterating.\r\n            const array1 = listenerArray.slice(0);\r\n            var rs: any[] = [];\r\n            for (var i = 0, l = array1.length; i < l; i++) {\r\n                let a = array1[i].call(this, e);\r\n                if (!s) break;\r\n                if (a !== undefined) {\r\n                    rs.push(a)\r\n                }\r\n\r\n            }\r\n            if (s && rs.length) {\r\n                return rs.length == 1 && array1.length == 1 ? rs[0] : rs;\r\n            }\r\n            return s;\r\n        }\r\n\r\n    }\r\n}\r\n\r\nfor (var key in LocalStorageEngine.prototype) {\r\n    if (Object.hasOwnProperty.call(LocalStorageEngine.prototype, key)) {\r\n        ignoreKeys.push(LocalStorageEngine.prototype[key]);\r\n    }\r\n}\r\nconst LS = new LocalStorageEngine('crushjs', {}, \"1.0\");\r\n\r\nexport default LocalStorageEngine;\r\nexport { LS, LocalStorageEngine };","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { InpEvent } from '@app/_shared/shared.type';\nimport { BaseComponent } from '../../base/base.component';\n\n@Component({\n  template: ''\n})\nexport abstract class CollapseBaseComponent extends BaseComponent {\n\n  @Input() show: boolean = false;\n  @Output() subcribe = new EventEmitter<InpEvent>();\n  @Input() title: string = '';\n  \n  toggle(){\n    this.show = !!!this.show;\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { BaseComponent } from '../../base/base.component';\nimport { ViewportService } from '../viewport.service';\n\n@Component({\n  selector: 'mask-layer',\n  templateUrl: './mask-layer.component.html',\n  styleUrls: ['./mask-layer.component.scss']\n})\nexport class MaskLayerComponent extends BaseComponent implements OnInit {\n\n  constructor(private service: ViewportService) {\n    super()\n  }\n\n  onInit(): void {\n  }\n\n}\n","import { Component, Output, EventEmitter, OnDestroy, OnInit } from '@angular/core';\r\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\r\nimport { EditorIO, EditorMethods } from '../../base/editor-io';\r\n\r\n@Component({\r\n    selector: 'app-tab-editor-setting',\r\n    templateUrl: './tab-setting.component.html',\r\n    styleUrls: ['./tab-setting.component.scss'],\r\n})\r\nexport class TabEditorSettingComponent extends BaseComponent implements OnInit, OnDestroy {\r\n    \r\n\r\n\r\n}\r\n","<div class=\"tab-inner\">\r\n    <h2>{{ 'Settings' | translate }}</h2>\r\n    <nz-tabset nzTabPosition=\"top\" nzType=\"line\" class=\"sub-tab\">\r\n\r\n        <nz-tab [nzTitle]=\"iconInfo\">\r\n            <ng-template #iconInfo>\r\n                <img src=\"/assets/icons/new-design/tab-sub/info.svg\" alt=\"Info\" />\r\n                <div>Info</div>\r\n            </ng-template>\r\n            <app-tab-editor-info class=\"tab-info\"></app-tab-editor-info>\r\n        </nz-tab>\r\n\r\n        <!-- <nz-tab [nzTitle]=\"iconForeground\">\r\n          <ng-template #iconForeground>\r\n            <img src=\"/assets/icons/new-design/tab-sub/foreground.svg\" alt=\"Foreground\" />\r\n            <div>Foreground</div>\r\n          </ng-template>\r\n          <ng-template nz-tab>\r\n            <app-tab-foreground></app-tab-foreground>\r\n          </ng-template>\r\n        </nz-tab> -->\r\n\r\n    </nz-tabset>\r\n\r\n</div>","import createClass from '@app/_core/helpers/es5.class';\r\nimport { assignValue, assignWithout, isArray, isEmpty, isNumber, isObject, isString } from '@app/_core/helpers/utils';\r\n\r\n\r\nimport Scene from '../traits/scene';\r\nimport Camera from '../traits/camera';\r\nimport Renderer from '../traits/renderer';\r\nimport Controls from '../traits/controls';\r\nimport GridHelper from '../traits/grid-helper';\r\nimport Lights from '../traits/lights';\r\nimport ObjectManager from '../traits/object-manager';\r\nimport {EventDispatcher} from '../libs/event-dispatcher';\r\n\r\nimport { Geometries, LightLib, LoaderLib, Materials, Meshes } from '../libs/three.libs';\r\n\r\nimport Models from '../libs/models';\r\n\r\n\r\nimport Loader from '../modules/loader'\r\nimport Composer from '../modules/composer'\r\nimport DynamicShadows from '../modules/dynamic-shadows'\r\nimport { EngineClass, EngineInstance } from './engine.doc';\r\nimport { Floor } from '../traits/floor';\r\nimport { BlankData } from '../store/data.type';\r\nimport { i } from '@app/_core/helpers/html-elements';\r\n\r\nexport interface EditorEngineInstance extends EngineInstance {\r\n    setData(data:any): any\r\n\r\n}\r\nexport interface EditorEngineClass extends EngineClass {\r\n    setData(data:any): any\r\n    new(data: any): EditorEngineInstance\r\n    (data:any): EditorEngineInstance\r\n}\r\n\r\n\r\nconst MovingEngine = createClass(\"MovingEngine\").uses(\r\n    Scene, \r\n    Camera, \r\n    Renderer, \r\n    Controls, \r\n    Models, \r\n    Lights, \r\n    ObjectManager, \r\n    Floor,\r\n    EventDispatcher, \r\n    GridHelper\r\n)({\r\n    data: {},\r\n    options: {},\r\n\r\n    Mesh: {},\r\n    Geometry: {},\r\n    Material: {},\r\n    Light: {},\r\n    Composer: {},\r\n    Shadows: {},\r\n    inited: false,\r\n    $mainEngine: null,\r\n\r\n    setData: function(data?:any){\r\n        if (data.composer && !isEmpty(data.composer)) {\r\n            this.composer = new Composer(this, data.composer);\r\n        }\r\n        if (data.meshes && isArray(data.meshes)) {\r\n            this.addMeshes(data.meshes);\r\n        }\r\n\r\n        this.updateSettings();\r\n        this.emit('setdata', data);\r\n        \r\n        \r\n    },\r\n\r\n    /**\r\n     * Hàm khởi tạo\r\n     * @param {Dom} viewport \r\n     * @param {*} data \r\n     */\r\n    constructor: function (data?:any) {\r\n        if (data && isObject(data)) {\r\n            this.data = data;\r\n        }\r\n        \r\n        \r\n        this.startup();\r\n    },\r\n\r\n    renew: function(data){\r\n        this.data = assignValue({}, data);\r\n        this.inited = false;\r\n        this.emit({\r\n            type: \"renew\"\r\n        })\r\n    },\r\n\r\n    updateSettings: function(){\r\n        if (this.data) {\r\n            var data = this.data;\r\n            if (isObject(data.scene)) {\r\n                var scene = data.scene;\r\n                this.updateSceneSettings(scene);\r\n                if (isObject(scene.background) && !isEmpty(scene.background))\r\n                    this.setBackground(scene.background);\r\n                if (isObject(scene.floor) && !isEmpty(scene.floor))\r\n                    this.updateSceneFloorSetting(scene.floor);\r\n                if (isObject(scene.size) && !isEmpty(scene.size))\r\n                    this.updateSceneSettings(scene.size);\r\n            }\r\n            if(isObject(data.shadow))\r\n                this.updateShadowSettings(data.shadow);\r\n            if(isObject(data.control))\r\n                this.updateControlSettings(data.control);\r\n            if(isObject(data.camera))\r\n                this.updateMainCameraSettings(data.camera, true);\r\n        }\r\n\r\n    },\r\n\r\n\r\n\r\n    startup: function startup( data?:any) {\r\n        if (this.inited) return this;\r\n\r\n\r\n        if (data && isObject(data)) {\r\n            this.data = data;\r\n        }\r\n        this.emit('startup', this.data);\r\n\r\n        this.initScene(this.data.scene || {});\r\n        this.setMainCamera(this.data.camera || {});\r\n        this.createRenderer(this.data.renderer || {}, this.data.shadow?this.data.shadow.enabled:true);\r\n        \r\n        this.camera.updateProjectionMatrix();\r\n\r\n        var self = this;\r\n        this.inited = true;\r\n        // this.Shadows.init();\r\n        self.ready();\r\n        if (!this.autoRenderStatus) {\r\n            setTimeout(function () {\r\n                self.render();\r\n            }, 500);\r\n        }\r\n    \r\n        \r\n        return this;\r\n\r\n    },\r\n    \r\n    canChangeCamera: true,\r\n\r\n    setMainEngine: function(mainEngine){\r\n        if(!isObject(mainEngine)||this.mainEngine == mainEngine) return false;\r\n        this.mainEngine = mainEngine;\r\n        var scope = this;\r\n        this.setSize(mainEngine.width, mainEngine.height);\r\n        this.updateCamera(mainEngine.camera);\r\n        mainEngine.on(\"controls.change.camera.end\", function(){\r\n            scope.updateCamera(mainEngine.camera);\r\n        });\r\n        mainEngine.on(\"controls.change.camera.animate.end\", function(){\r\n            scope.updateCamera(mainEngine.camera);\r\n        });\r\n\r\n        mainEngine.on(\"resize\", function (e) {\r\n            scope.setSize(mainEngine.width, mainEngine.height);\r\n        });\r\n        mainEngine.on(\"canvas.size.update\", function (e) {\r\n            scope.setSize(mainEngine.width, mainEngine.height);\r\n        });\r\n        mainEngine.on(\"camera.settings.updated\", function (e) {\r\n            scope.updateCamera(mainEngine.camera);\r\n        });\r\n        mainEngine.on(\"setdata\", function (e) {\r\n            scope.updateCamera(mainEngine.camera);\r\n        });\r\n        mainEngine.on(\"object.load.completed\", function (e) {\r\n            scope.updateCamera(mainEngine.camera);\r\n        });\r\n        \r\n        \r\n        if (mainEngine.inited) {\r\n            scope.updateCamera(mainEngine.camera);\r\n        } else {\r\n            mainEngine.on('ready', function () {\r\n                scope.updateCamera(scope.engine.camera);\r\n            });\r\n\r\n        }\r\n\r\n\r\n    },\r\n    updateCamera: function(camera){\r\n        let propKeys = {\r\n            position: ['x', 'y', 'z'],\r\n            rotation: ['x', 'y', 'z'],\r\n            up: ['x', 'y', 'z'],\r\n            quaternion: ['x', 'y', 'z', 'z']\r\n            \r\n        }\r\n        for (const key in propKeys) {\r\n            if (Object.prototype.hasOwnProperty.call(propKeys, key)) {\r\n                const arrKeys = propKeys[key];\r\n                // arrKeys.map(s => this.camera[key][s]=camera[key][s]);\r\n                this.camera[key].copy(camera[key], true);\r\n            }\r\n        }\r\n        if(this.camera.fov != camera.fov || this.camera.aspect != camera.aspect || this.camera.near != camera.near || this.camera.far != camera.far){\r\n            this.camera.fov = camera.fov;\r\n            this.camera.aspect = camera.aspect;\r\n            this.camera.near = camera.near;\r\n            this.camera.far = camera.far;\r\n            this.camera.updateProjectionMatrix();\r\n        }\r\n        this.refresh();\r\n        \r\n    },\r\n    checkCamera: function(){\r\n        this.updateCamera(this.mainEngine.camera);\r\n    },\r\n    add: function(){\r\n        if(arguments.length){\r\n            for (let index = 0; index < arguments.length; index++) {\r\n                const arg = arguments[index];\r\n                this.scene.add(arg);\r\n            }\r\n        }\r\n    },\r\n    remove: function(){\r\n        if(arguments.length){\r\n            for (let index = 0; index < arguments.length; index++) {\r\n                const arg = arguments[index];\r\n                this.scene.remove(arg);\r\n            }\r\n        }\r\n    }\r\n}) as EditorEngineClass\r\nexport default MovingEngine;\r\nexport {MovingEngine};\r\nexport const getMovingEngine = (mainEngine?:any) => {\r\n    const engine = new MovingEngine(assignWithout({}, BlankData, 'lights'));\r\n    engine.startup();\r\n    if(mainEngine){\r\n        engine.setMainEngine(mainEngine);\r\n    }\r\n    return engine;\r\n};\r\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { TemplateEventsService } from '@app/template-page/_store/events.service';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { CameraDefaultSettings, CameraSetting } from '@app/_3D/store/data.type';\nimport { checkFacePos } from '@app/_3D/traits/camera';\nimport { assignValue, isObject } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { EditorToolbarService } from '@app/_shared/components/viewport/editor-toolbar/editor-toolbar.service';\nimport { InpEvent } from '@app/_shared/shared.type';\n\ninterface PosOpt {\n    label: string,\n    type: string,\n    value: any,\n    selected: boolean,\n    [c: string]: any\n}\ntype PosOpts = PosOpt[];\n\n\n@Component({\n    selector: 'app-tab-camera',\n    templateUrl: './tab-camera.component.html',\n    styleUrls: ['./tab-camera.component.scss']\n})\nexport class TabCameraComponent extends BaseComponent implements OnInit {\n\n    camera: CameraSetting = {};\n    posOptions: PosOpts = [\n        {\n            label: \"Mặc định\",\n            type: \"default\",\n            value: null,\n            selected: true\n        },\n        {\n            label: \"Vị trí theo các mặt\",\n            type: \"face\",\n            value: \"front\",\n            selected: false\n        },\n        {\n            label: \"Vị trí Tùy biến\",\n            type: \"custom\",\n            value: {\n                x: 0,\n                y: 0,\n                z: 2\n            },\n            selected: false\n        }\n    ];\n    faceMatrix = [\n        [null, 'Top', null, null],\n        ['Left', 'Front', 'Right', 'Back'],\n        [null, 'Bottom', null, null]\n    ];\n\n    app: AppEditorService = null;\n    constructor(\n        private cd: ChangeDetectorRef,\n        private editorToolbar: EditorToolbarService,\n        private events: AppEditorEventService\n    ) {\n        super();\n\n        \n    }\n    onChangeSubEvents(){\n        this.app = this.subEvents.app;\n        this.editorToolbar = this.editorToolbar.sub(this.moduleKey);\n        this.registerEventService(this.editorToolbar, {\n            \"saveview\": e => this.saveCurrentCameraPosition()\n        });\n        this.registerEventService(this.app, {\n            \"camera.position.save\": e => {\n                setTimeout(() => {\n                    this.saveCurrentCameraPosition()\n                }, 1);\n            }\n        });\n    }\n    onInit() {\n        this.activeEventServiceRegistered(this.editorToolbar);\n        this.activeEventServiceRegistered(this.app);\n\n        let cam = this.app.engine.camera.position;\n        assignValue(this.camera, CameraDefaultSettings);\n        assignValue(this.camera, {\n            settings: {\n                position: {\n                    costom: {\n                        x: cam.x,\n                        y: cam.y,\n                        z: cam.z\n                    }\n                }\n            }\n        })\n        assignValue(this.camera, this.app.getCameraSetting());\n        this.initCamera();\n        \n        this.cd.detectChanges();\n    }\n    onDestroy(){\n        \n        this.deactiveEventServiceRegistered(this.editorToolbar);\n        this.deactiveEventServiceRegistered(this.app);\n    }\n    \n\n\n    initCamera() {\n        if (isObject(this.camera.settings) && isObject(this.camera.settings.position)) {\n            let cps = this.camera.settings.position;\n            this.posOptions.map(opt => {\n                opt.selected = opt.type == cps.type;\n                opt.value = cps[opt.type];\n            });\n\n        }\n    }\n    emitUpdateSettings(updateEngine?: boolean) {\n        this.app.updateCameraSetting({\n            settings: this.camera.settings\n        }, updateEngine);\n    }\n    updateCameraProperties(event: InpEvent) {\n        let update: any = {}\n        update[event.name] = event.value;\n        this.camera[event.name] = event.value;\n\n        this.app.updateCameraSetting(update);\n    }\n    changeFace(face: string) {\n        let f = face.toLowerCase();\n        if (checkFacePos(f)) {\n            this.posOptions[0].value = f;\n            this.camera.settings.position.face = f;\n            this.emitUpdateSettings(true);\n        }\n    }\n    isFaceActive(face: string) {\n        return face.toLowerCase() == this.camera.settings.position.face;\n    }\n    changeType(type) {\n        assignValue(this.camera.settings, {\n            position: {\n                type\n            }\n        });\n        this.posOptions.map(opt => opt.selected = opt.type == type);\n        this.emitUpdateSettings(true);\n    }\n    updateCustomPos(event) {\n        assignValue(this.camera.settings.position.custom, event.value);\n        this.emitUpdateSettings(true);\n    }\n\n    saveCurrentCameraPosition() {\n        let cam = this.app.engine.camera.position;\n        assignValue(this.camera.settings, {\n            position: {\n                type: \"custom\",\n                costom: {\n                    x: cam.x,\n                    y: cam.y,\n                    z: cam.z\n                }\n            }\n        });\n        this.posOptions.map(opt => {\n            opt.selected = opt.type == 'custom';\n            if (opt.selected) {\n                assignValue(opt.value, {\n                    x: cam.x,\n                    y: cam.y,\n                    z: cam.z\n                });\n            }\n        });\n        this.emitUpdateSettings(false);\n        this.cd.detectChanges();\n    }\n\n}\n","<div class=\"tab-inner\">\n    <div class=\"tab-header\">\n        <h3>Camera</h3>\n    </div>\n    <div class=\"store\">\n        <!-- props -->\n        <div class=\"props group\">\n            <h4>Properties</h4>\n            <inp-range-group class=\"inp-group-item\" name=\"fov\" [(value)]=\"camera.fov\" label=\"Field Of View\" (subcribe)=\"updateCameraProperties($event)\" [min]=\"10\" [max]=\"172\" [step]=\"1\"></inp-range-group>\n            <inp-number-group class=\"inp-group-item\" name=\"near\" [(value)]=\"camera.near\" label=\"Near (Macro)\" (subcribe)=\"updateCameraProperties($event)\" [min]=\"0.1\" [max]=\"10\" [step]=\"0.1\"></inp-number-group>\n            <inp-number-group class=\"inp-group-item\" name=\"far\" [(value)]=\"camera.far\" label=\"Far (Tele)\" (subcribe)=\"updateCameraProperties($event)\" [min]=\"10\" [max]=\"4096\" [step]=\"0.1\"></inp-number-group>\n        </div>\n        <div class=\"settings group inp-group-item\">\n            <h4>Position</h4>\n            <div class=\"pos-item\" *ngFor=\"let option of posOptions; let i=index\" [class.active]=\"option.selected\">\n                <div class=\"item-header\" (click)=\"changeType(option.type)\">\n                    <span class=\"icon\">\n                        <ng-container *ngIf=\"option.selected; then selectedTemplate; else notSelectedTemplate\"></ng-container>\n                        <ng-template #selectedTemplate>\n                            <i nz-icon [nzType]=\"'check-circle'\" [nzTheme]=\"'twotone'\" [nzTwotoneColor]=\"'#52c41a'\"></i>\n                        </ng-template>\n                        <ng-template #notSelectedTemplate>\n                            <i nz-icon [nzType]=\"'check-circle'\"></i>\n                        </ng-template>\n\n                    </span>\n                    <span class=\"label\">\n                        {{option.label}}\n                    </span>\n                </div>\n                <div class=\"item-body\" *ngIf=\"option.selected && option.type!='default'\">\n                    <div class=\"pos-group\" *ngIf=\"option.type == 'face'\">\n                        <div class=\"row\" *ngFor=\"let faceRow of faceMatrix; let i=index\">\n                            <div class=\"col\" *ngFor=\"let face of faceRow; let i=index\">\n                                <div class=\"face-item\" *ngIf=\"face != null\" [class.active]=\"isFaceActive(face)\" (click)=\"changeFace(face)\">{{face}}</div>\n                            </div>\n                        </div>\n                    </div>\n                    <inp-vector3-group name=\"custom\" [(value)]=\"option.value\" label=\"Vị trí\" (subcribe)=\"updateCustomPos($event)\" *ngIf=\"option.type=='custom'\"></inp-vector3-group>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { BaseComponent } from '../../base/base.component';\nimport { ViewportService } from '../viewport.service';\n\n@Component({\n  selector: 'droppable-layer',\n  templateUrl: './droppable-layer.component.html',\n  styleUrls: ['./droppable-layer.component.scss']\n})\nexport class DroppableLayerComponent extends BaseComponent implements OnInit {\n\n  constructor(private service: ViewportService) {\n    super();\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"message\">\r\n    <div class=\"message-body\">\r\n        <H3 class=\"message-title\">Drop Here</H3>\r\n        <p class=\"message-content\">Thả vào đây!</p>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\nimport { assignValue, inArray } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '../../base/base.component';\nimport { ClientEditToolbarService } from './client-edit-toolbar.service';\n\ninterface MenuBtn {\n    name: string,\n    text: string,\n    title?: string,\n    icon?: string,\n    isActive?: boolean\n}\n\nlet menuButtons: MenuBtn[] = [\n    { name: \"translate\", text: \"Di chuyển\", icon: \"fullscreen\", isActive: false },\n    { name: \"rotate\", text: \"Xoay\", icon: \"transaction\", isActive: false },\n    { name: \"scale\", text: \"Kéo giãn\", icon: \"expand\", isActive: false },\n    { name: \"download\", text: \"Tải tài nguyên\", icon: \"download\", isActive: false },\n    { name: \"edit\", text: \"Chỉnh sửa\", icon: \"edit\", isActive: false },\n    { name: \"delete\", text: \"Xóa\", icon: \"delete\", isActive: false },\n    { name: \"more\", text: \"Thêm\", icon: \"more\", isActive: false },\n]\n\n\n@Component({\n    selector: 'client-viewport-edit-toolbar',\n    templateUrl: './client-edit-toolbar.component.html',\n    styleUrls: ['./client-edit-toolbar.component.scss']\n})\nexport class ClientEditToolbarComponent extends BaseComponent implements OnInit {\n\n    title: string = '';\n    currentMode: string = '';\n    show: boolean = false;\n\n    buttons: MenuBtn[] = [];\n    moreMenu: MenuBtn[] = [];\n    btnList = {\n        light: [\"translate\", \"rotate\", \"edit\", \"delete\"],\n        object: ['download', \"edit\", \"delete\"],\n        mesh: [\"edit\", \"delete\"],\n        more: [\"translate\", \"rotate\", \"scale\"],\n\n    }\n    secret_key: string = \"\";\n\n    currentType: string = \"\";\n\n    constructor(private events: ClientEditToolbarService) {\n        super();\n        \n    }\n    onChangeSubEvents(){\n        this.registerEventService(this.subEvents, {\n            \"show\": e => this.isFocus && this.showMenu(e.data.secret_key, e.data.type, e.data.mode),\n            \"hide\": e => this.isFocus && this.reset(),\n            \"mode.change\": e => this.isFocus && this.changeMode(e.mode)\n        });\n    }\n\n    onInit(): void {\n\n\n    }\n\n    showMenu(key: string, type: string, mode?: string) {\n        \n        this.reset();\n        this.secret_key = key;\n        this.currentType = type;\n        if (typeof this.btnList[type] != \"undefined\") {\n            this.show = true;\n            if (mode && inArray([\"translate\", \"rotate\", \"scale\"], mode)) {\n                this.currentMode = mode;\n            }\n            this.setButtons();\n        }\n    }\n\n    changeMode(mode: string) {\n        this.currentMode = mode;\n        this.setButtons();\n    }\n    setButtons() {\n        this.buttons = menuButtons.slice(0)\n            .filter(btn => this.btnList[this.currentType].indexOf(btn.name) !== -1)\n            .map(btn => {\n                var a: MenuBtn = assignValue({}, btn);\n                if (a.name == this.currentMode) {\n                    a.isActive = true;\n                }\n                return a;\n            });\n\n        this.moreMenu = [];\n        if (inArray(['object', 'mesh'], this.currentType)) {\n            this.moreMenu = menuButtons.slice(0)\n                .filter(btn => this.btnList.more.indexOf(btn.name) !== -1)\n                .map(btn => {\n                    var a: MenuBtn = assignValue({}, btn);\n                    return a;\n                });\n\n        }\n\n    }\n\n    reset() {\n        this.show = false;\n        this.buttons = [];\n        this.secret_key = \"\";\n    }\n\n    onBtnClick(mode) {\n        if (inArray([\"translate\", \"rotate\", \"scale\"], mode)) {\n            this.currentMode = mode;\n            this.buttons.map(btn => btn.isActive = btn.name == mode);\n            this.subEvents.emit({\n                type: \"mode.select\",\n                mode: mode\n            })\n        }\n        else {\n            this.subEvents.emit({\n                type: \"action\",\n                data: {\n                    action: mode,\n                    type: this.currentType,\n                    secret_key: this.secret_key\n                }\n\n            })\n        }\n    }\n\n}\n","<div class=\"menu-buttons\" *ngIf=\"show\">\n    <div class=\"btn\" *ngFor=\"let btn of buttons; let i=index\" title=\"{{btn.text}}\" [class.active]=\"btn.isActive\" (click)=\"onBtnClick(btn.name)\">\n        <i nz-icon nzType=\"{{btn.icon}}\" nzTheme=\"outline\"></i>\n    </div>\n    <a class=\"btn\" nz-dropdown nzTrigger=\"click\" [nzDropdownMenu]=\"menu\" nzPlacement=\"bottomRight\" *ngIf=\"currentType != 'light'\">\n        <i nz-icon nzType=\"more\" nzTheme=\"outline\"></i>\n    </a>\n</div>\n\n\n<nz-dropdown-menu #menu=\"nzDropdownMenu\">\n    <ul nz-menu>\n        <li nz-menu-item *ngFor=\"let btn of moreMenu\" (click)=\"onBtnClick(btn.name)\">\n            <i nz-icon nzType=\"{{btn.icon}}\" nzTheme=\"outline\"></i>\n            {{btn.label}}\n        </li>\n    </ul>\n</nz-dropdown-menu>","import { Component, Input, OnInit } from '@angular/core';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { MeshGeometryService } from '@app/_shared/components/panels/mesh-geometry/mesh-geometry.service';\n\n@Component({\n    selector: 'geometry-item',\n    templateUrl: './geometry-item.component.html',\n    styleUrls: ['./geometry-item.component.scss']\n})\nexport class GeometryItemComponent extends BaseComponent implements OnInit {\n    @Input() geometry: any;\n    constructor(\n        private geoService: MeshGeometryService,\n        private events: AppEditorEventService\n    ) {\n        super()\n    }\n\n\n\n\n    dragStart(event) {\n        event.preventDefault();\n        this.subEvents.emit({\n            type: \"geometry.dragstart\",\n            geometryType: this.geometry.type\n        })\n\n    }\n}\n","<div class=\"text text-subheading\" (pointerdown)=\"dragStart($event)\">\n    <div class=\"item-text\">\n        <div class=\"text-content\">\n            <div class=\"img-icon\">\n                <img src=\"/assets/icons/geometries/{{geometry.type}}.svg\" alt=\"{{geometry.label}}\" style=\"height: 24px; max-width: 100%;\" />\n            </div>\n            {{geometry.label}}\n        </div>\n    </div>\n</div>","import { AfterViewInit, Component, ElementRef, Input, OnInit } from '@angular/core';\nimport { TransparentBase64Image } from '@app/_3D/libs/three.libs';\nimport { AppEditorEventService } from '@app/_3D/services/app-editor-event.service';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { Vector3 } from '@app/_3D/store/data.type';\nimport { assignValue, Str } from '@app/_core/helpers/utils';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\nimport { ViewportService } from '@app/_shared/components/viewport/viewport.service';\nimport { ModalConfirmService } from '@app/_shared/services/modal-confirm.service';\n// import { Div, Img } from '@app/_core/helpers/html-elements';\nimport { ItemModel } from '@app/_store/item';\n\ninterface mousePosition {\n    x: number,\n    y: number\n}\n\n@Component({\n    selector: 'dragging-item',\n    templateUrl: './dragging-item.component.html',\n    styleUrls: ['./dragging-item.component.scss']\n})\nexport class DraggingItemComponent extends BaseComponent implements OnInit, AfterViewInit {\n\n    item: ItemModel = {\n        name: \"No Name\",\n        id: 0,\n        thumbnail: TransparentBase64Image\n    };\n    canMove: boolean = true;\n    dragingItem: any;\n    show: boolean = false;\n    dragElement: HTMLElement;\n    draggingStyle: string = '';\n    isDragging: boolean = false;\n    droppable: boolean = false;\n    isLoading: boolean = false;\n    cssEffect: boolean = false;\n    pointer: mousePosition = {\n        x: 0,\n        y: 0\n    };\n    mousePosition: mousePosition = {\n        x: 0,\n        y: 0\n    };\n\n    viewportPointerPosition: mousePosition = {\n        x: 0,\n        y: 0\n    }\n\n    viewportBounding: any = {\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0\n    };\n\n\n    size = {\n        width: 100,\n        height: 100\n    }\n    constructor(\n        private elemRef: ElementRef,\n        private cfm: ModalConfirmService,\n        private events: AppEditorEventService,\n        private viewport: ViewportService\n    ) {\n        super();\n\n    }\n\n    initEvents() {\n        this.registerEventService(this.subEvents, {\n            'item.dragstart': e => {\n                if (this.isLoading) return false;\n                this.dragStart(e.data);\n                this.updateDropElem(e);\n            },\n\n            'item.dropcenter': e => {\n                if (this.isLoading) return false;\n                if (this.isDragging) {\n                    // e.preventDefault();\n                    this.dropCenter();\n                }\n            },\n            'pointerup': e => {\n                if (this.isLoading) return false;\n                if (this.isDragging) {\n                    e.preventDefault();\n                    this.dragEnd(e);\n                }\n            },\n\n            'pointermove': e => {\n                if (this.isLoading) return false;\n                if (this.isDragging) {\n                    this.onMove(e);\n                }\n            },\n\n            'item.draghover': e => {\n                if (this.isLoading || !this.isDragging) return false;\n\n                // nếu dang kéo\n                this.viewportBounding = e.pos.rect;\n                if (!this.droppable) {\n                    this.updateViewportPointerPosition();\n                    // nếu chưa cho thả thì thêm vùng thả\n                    this.subEvents.emit({\n                        type: \"droppable.areas.add\",\n                        item: this.item,\n                        position: this.mousePosition\n                    });\n                }\n                this.droppable = true;\n            },\n            'item.dragout': e => {\n                // if(this.isLoading) return false;\n                this.droppable = false;\n                this.subEvents.emit({\n                    type: \"droppable.areas.remove\"\n                });\n            }\n\n        });\n    }\n    onInit() {\n        if (this.isChangeSubEvents) {\n            this.initEvents();\n        }\n        this.activeEventServiceRegistered(this.subEvents);\n    }\n    onDestroy() {\n        this.deactiveEventServiceRegistered(this.subEvents);\n    }\n\n    ngAfterViewInit(): void {\n        this.dragElement = this.elemRef.nativeElement.querySelector('.model-item');\n    }\n\n    dragStart(item) {\n        this.item = item;\n        this.isDragging = true;\n    }\n\n\n    onMove(event) {\n        if (!this.canMove) return false;\n        this.updatePoistion(event);\n        this.mousePosition.x = event.clientX;\n        this.mousePosition.y = event.clientY;\n\n        if (this.droppable) {\n            this.updateViewportPointerPosition();\n\n        }\n        this.subEvents.emit({\n            type: \"item.dragmove\",\n            clientX: event.clientX,\n            clientY: event.clientY,\n            checkArea: this.droppable,\n            position: this.mousePosition\n        });\n\n    }\n\n\n    dragEnd(e) {\n        if (this.isDragging) {\n            e.preventDefault();\n            if (!this.droppable) {\n\n                this.hideDraggingIten();\n            } else {\n                this.dropItem();\n\n\n            }\n        }\n    }\n\n    hideDraggingIten() {\n        this.isDragging = false;\n        this.item = {\n            name: \"No Name\",\n            id: 0,\n            thumbnail: TransparentBase64Image\n        };\n        this.cssEffect = false;\n        this.draggingStyle = '';\n        this.droppable = false;\n        this.isLoading = false;\n        this.canMove = true;\n    }\n\n    addMode: string = \"auto\";\n    addPosition: Vector3 = {\n        x: 0,\n        y: 0,\n        z: 0\n    }\n\n    dropItem() {\n        this.canMove = false;\n        let app = this.subEvents.app;\n        this.addMode = app.addItemMode;\n        assignValue(this.addPosition, app.addItemPosition);\n        this.subEvents.emit({\n            type: \"droppable.areas.remove\"\n        });\n        if (app.addItemMode == \"auto\") {\n            if (app.data.scene.size.width < this.item.size.x || app.data.scene.size.depth < this.item.size.z || app.data.scene.size.height < this.item.size.y) {\n                this.subEvents.emit({\n                    type: \"modelitem.drop.confirm\",\n                    data: {\n                        mode: this.addMode,\n                        position: assignValue({}, this.addPosition),\n                        item: assignValue({}, this.item)\n                    }\n                });\n                this.hideDraggingIten();\n                return false;\n\n            } else {\n                this.dropItemAnimate();\n            }\n            \n        }\n        else if (app.addItemMode == \"lock\") {\n            this.hideDraggingIten();\n        }\n        else if (app.addItemMode == \"custom\") {\n            this.dropItemAnimate();\n        }\n\n\n    }\n\n\n\n    dropCenter() {\n        this.canMove = false;\n        let app = this.subEvents.app;\n        this.addMode = app.addItemMode;\n        app.addItemMode = \"auto\";\n        this.addMode = \"custom\";\n        assignValue(this.addPosition, {\n            x: 0,\n            y: app.data.scene.floor.props.position.y + this.item.size.y / 2,\n            z: 0\n        });\n\n        this.subEvents.emit({\n            type: \"droppable.areas.remove\"\n        });\n        if (app.addItemMode == \"auto\") {\n            if (app.data.scene.size.width < this.item.size.x || app.data.scene.size.depth < this.item.size.z || app.data.scene.size.height < this.item.size.y) {\n                this.subEvents.emit({\n                    type: \"modelitem.drop.confirm\",\n                    data: {\n                        mode: this.addMode,\n                        position: assignValue({}, this.addPosition),\n                        item: assignValue({}, this.item)\n                    }\n                });\n                this.hideDraggingIten();\n                return false;\n\n            } else {\n                this.subEvents.emit('app.loading.show');\n                this.addModelTiem();\n                this.cssEffect = false;\n                this.draggingStyle = '';\n            }\n        }\n        else if (app.addItemMode == \"lock\") {\n            this.hideDraggingIten();\n        }\n        else if (app.addItemMode == \"custom\") {\n            this.subEvents.emit('app.loading.show');\n            this.addModelTiem();\n            this.cssEffect = false;\n            this.draggingStyle = '';\n        }\n\n        \n\n    }\n\n\n    dropItemAnimate() {\n        if (this.viewportBounding && this.viewportBounding.width) {\n            this.isLoading = true;\n            var t = this.draggingStyle;\n\n            var size = `height: ${this.size.height}px; width: ${this.size.width}px; `;\n            this.draggingStyle = size + this.draggingStyle;\n            this.cssEffect = true;\n            var left = this.viewportBounding.left + this.viewportBounding.width / 2;\n            var top = this.viewportBounding.top + this.viewportBounding.height / 2;\n            setTimeout(() => {\n                this.draggingStyle = Str.replace(this.draggingStyle, [t, size], [`left: ${left}px; top: ${top}px; `, 'width:0; height:0;']);\n                setTimeout(() => {\n                    this.subEvents.emit('app.loading.show');\n                    this.addModelTiem();\n                    this.cssEffect = false;\n                    setTimeout(() => {\n                        this.draggingStyle = '';\n                    }, 20);\n                }, 320);\n            }, 50);\n        } else {\n            this.hideDraggingIten();\n            this.subEvents.emit('app.loading.hide');\n        }\n    }\n\n    addModelTiem() {\n        var self = this;\n        let app: AppEditorService = this.subEvents.app;\n        console.log(this.addPosition)\n        this.subEvents.emit({\n            type: 'item.dropped',\n            item: this.item,\n            success: function (data) {\n                self.subEvents.emit('app.loading.hide');\n                if (self.addMode == \"custom\") {\n                    var size = data.data.size;\n                    if (app.data.scene.floor.above) {\n                        self.addPosition.y = app.data.scene.floor.props.position.y + size.y / 2;\n                    } else {\n                        self.addPosition.y = size.y / 2;\n                    }\n                    app.updateObjectSettingDataAndScene(data.secret_key, {\n                        props: {\n                            position: self.addPosition\n                        }\n                    }, { props: true })\n                    console.log(self.addPosition)\n                }\n                self.hideDraggingIten();\n                \n            }\n        })\n    }\n\n    updateDropElem(event) {\n        if (this.isLoading) return false;\n        var itemElement = this.elemRef.nativeElement.querySelector('.model-item');\n        if (itemElement) {\n            var rect = itemElement.getBoundingClientRect();\n            var width = rect.width, height = rect.height;\n\n            if (Object.prototype.hasOwnProperty.call(event, 'width') && Object.prototype.hasOwnProperty.call(event, 'height')) {\n                width = event.width;\n                height = event.height;\n            }\n            this.pointer.x = event.clientX - width / 2;\n            this.pointer.y = event.clientY - height / 2;\n            if (this.droppable) {\n                this.pointer.x = event.clientX + width * 0.5;\n                this.pointer.y = event.clientY - height * 1.5;\n\n            }\n\n            this.draggingStyle = `left: -100px; top: -100px;`;\n\n        }\n    }\n\n    updatePoistion(event) {\n        if (this.isLoading) return false;\n        var itemElement = this.elemRef.nativeElement.querySelector('.model-item');\n        if (itemElement) {\n            var rect = itemElement.getBoundingClientRect();\n            var width = rect.width, height = rect.height;\n\n            if (event.type == 'item.dragstart' && Object.prototype.hasOwnProperty.call(event, 'width') && Object.prototype.hasOwnProperty.call(event, 'height')) {\n                width = event.width;\n                height = event.height;\n            }\n            this.pointer.x = event.clientX - width / 2;\n            this.pointer.y = event.clientY - height / 2;\n            if (this.droppable) {\n                this.pointer.x = event.clientX + width * 0.5;\n                this.pointer.y = event.clientY - height * 1.5;\n\n            }\n\n            this.draggingStyle = `left: ${this.pointer.x}px; top: ${this.pointer.y}px;`;\n\n        }\n    }\n\n    updateViewportPointerPosition() {\n        this.viewportPointerPosition.x = ((this.mousePosition.x - this.viewportBounding.left) / this.viewportBounding.width) * 2 - 1;\n        this.viewportPointerPosition.y = ((this.mousePosition.y - this.viewportBounding.top) / this.viewportBounding.height) * 2 + 1;\n\n    }\n}\n","<div class=\"model-item\" [style]=\"draggingStyle\" [class.effect]=\"cssEffect\" [class.droppable]=\"droppable\">\n    <div class=\"thumbnail\">\n        <img src=\"{{item.thumbnail}}\" alt=\"{{item.name}}\">\n    </div>\n    <div class=\"name\">\n        {{item.name}}\n    </div>\n</div>","import { Injectable } from '@angular/core';\nimport { isObject } from '@app/_core/helpers/utils';\n\nimport { NzModalService } from 'ng-zorro-antd/modal';\nimport { CallbackFunction } from '@app/_shared/shared.type';\nimport { EventManagerService } from '@app/_core/services/event-manager.service';\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ModalConfirmService extends EventManagerService {\n    onOkHandle: CallbackFunction = null;\n    onCancelHandle: CallbackFunction = null;\n    defaultTexts = {\n        del: {\n            ok: \"Yes\",\n            cancel: \"No\",\n            title: \"Are you sure delete this\",\n            description: \"\"\n        },\n        conf: {\n            cancel: \"Cancel\",\n            no: \"No\",\n            title: \"Do yeu want to do this action?\",\n            description: \"\"\n\n        }\n    };\n\n    constructor(private modal: NzModalService) {\n        super();\n    }\n\n    open(type: string, message: any, onOk?: CallbackFunction, onCancel?: CallbackFunction): any {\n        this.onOkHandle = null;\n        this.onCancelHandle = null;\n        let options: any = {};\n        if (typeof onOk == \"function\") {\n            this.onOkHandle = onOk;\n        }\n        if (typeof onCancel == \"function\") {\n            this.onCancelHandle = onCancel;\n        }\n\n        if (isObject(message)) {\n            options.nzTitle = message.title || message.message || this.defaultTexts[type].title;\n            if (message.content || message.description)\n                options.nzContent = message.content || message.description;\n            if (message.btnOkType) {\n                options.nzOkType = message.btnOkType;\n            } else if (type == \"del\") {\n                options.nzOkType = \"primary\";\n            }\n            options.nzOkText = message.btnOkText || this.defaultTexts[type].ok;\n            if (type == \"del\") {\n                if (typeof message.isDanger == \"boolean\") {\n                    options.nzOkDanger = message.isDanger;\n                } else {\n                    options.nzOkDanger = true;\n                }\n            }\n\n            options.nzCancelText = message.btnCancelText || this.defaultTexts[type].cancel;\n            ['ok', 'onOk', 'onOk', 'OK', 'onOkClick', \"onDone\", 'onYes', 'onDoneClick', 'onYesClick', 'yes'].map(s => {\n                if (typeof message[s] == \"function\") {\n                    this.onOkHandle = message[s];\n                }\n            });\n            ['cancel', 'onCancel', 'onCancelClick', 'no', 'onNoClick', \"onNo\"].map(s => {\n                if (typeof message[s] == \"function\") {\n                    this.onCancelHandle = message[s];\n                }\n            })\n\n\n        }\n        else{\n            options.nzTitle = message || this.defaultTexts[type].title;\n            options.nzOkText = this.defaultTexts[type].ok;\n            if (type == \"del\") {\n                options.nzOkDanger = true;\n            }\n\n            options.nzCancelText = this.defaultTexts[type].cancel;\n\n        }\n        options.nzOnOk = () => this.onclickOk();\n        options.nzOnCancel = () => this.onClickCancel();\n        this.modal.confirm(options);\n    }\n\n\n    showConfirm(message: any, onOk?: CallbackFunction, onCancel?: CallbackFunction): void {\n        this.open(\"conf\", message, onOk, onCancel);\n    }\n\n    showDeleteConfirm(message: any, onOk?: CallbackFunction, onCancel?: CallbackFunction): void {\n        this.open(\"del\", message, onOk, onCancel);\n    }\n\n    onclickOk() {\n        if(typeof this.onOkHandle == \"function\"){\n            this.onOkHandle();\n        }\n        \n        this.emit(\"close\");\n    }\n    onClickCancel() {\n        if(typeof this.onCancelHandle == \"function\"){\n            this.onCancelHandle();\n        }\n        this.emit(\"close\");\n    }\n}\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { AppEditorService } from '@app/_3D/services/app-editor.service';\nimport { FG_ITEM } from '@app/_shared/shared.type';\nimport { BaseComponent } from '../../base/base.component';\nimport { ViewportService } from '../viewport.service';\n\n@Component({\n    selector: 'foreground-layer',\n    templateUrl: './foreground-layer.component.html',\n    styleUrls: ['./foreground-layer.component.scss']\n})\nexport class ForegroundLayerComponent extends BaseComponent implements OnInit {\n    @Input() app: AppEditorService;\n    app3D: AppEditorService = null;\n    foregrounds: FG_ITEM[] = [];\n    service: ViewportService;\n    constructor(private _service: ViewportService, private cd: ChangeDetectorRef) {\n        super();\n    }\n\n    onInit(): void {\n        const s = this._service.sub(this.moduleKey);\n        if(s && s!== this.service){\n            this.service = s;\n        }\n        if (this.app) {\n            this.setApp(this.app);\n        } else {\n            this.service.on('app.set', e => this.setApp(e.app), true);\n        }\n        \n\n    }\n\n    setApp(app) {\n        this.app3D = app;\n        const f = () => this.loadForegrounds() ;\n        this.app3D.on({\n            \"scene.foregrounds.added\": f,\n            \"scene.foregrounds.deleted\": f,\n            \"scene.foregrounds.updated\": f,\n            \"data.imported\": f,\n            \"data.renew\": f,\n            \"data.resetted\": f\n        });\n        f();\n    }\n\n    loadForegrounds(){\n        this.foregrounds = this.app3D.getForegrounds();\n        this.cd.detectChanges();\n    }\n}\n","<div class=\"foregrounds\">\r\n    <foreground-layer-item *ngFor=\"let f of foregrounds; let i=index\" [data]=\"f\" [index]=\"i\"></foreground-layer-item>\r\n</div>","import { ChangeDetectorRef, Component, OnInit, SimpleChanges } from '@angular/core';\nimport { assignValue } from '@app/_core/helpers/utils';\nimport { BaseInputComponent } from '../base-input/base-input.component';\n\n@Component({\n  selector: 'inp-vector3',\n  templateUrl: './vector3.component.html',\n  styleUrls: ['./vector3.component.scss']\n})\nexport class Vector3Component extends BaseInputComponent implements OnInit {\n  degreSymbol : string = \"°\";\n  _value:any = {\n    x:0,\n    y:0,\n    z:0\n  };\n\n  canSync: boolean = false;\n\n  constructor(private cd: ChangeDetectorRef) {\n    super();\n  }\n\n\n\n  ngOnInit(): void {\n    this.syncFromParent();\n    this.canSync = true;\n\n  }\n\n\n  syncFromParent(){\n    // this._value = {\n    //   x: this.value.x,\n    //   y: this.value.y,\n    //   z: this.value.z\n    // }\n    this.cd.detectChanges()\n  }\n\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if(this.canSync){\n      if(changes.value){\n        this.syncFromParent();\n      }\n    }\n    \n  }\n\n  updateVector(vector, event){\n    this.canSync = false;\n    // assignValue(this.value, {\n    //   x: this._value.x,\n    //   y: this._value.y,\n    //   z: this._value.z,\n      \n    // });\n    \n    this.emit();\n    this.canSync = true;\n  }\n\n  formatterX = (value: number) => `x: ${value}`;\n  parserX = (value: string) => value.replace('x: ', '');\n  formatterY = (value: number) => `y: ${value}`;\n  parserY = (value: string) => value.replace('y: ', '');\n  formatterZ = (value: number) => `z: ${value}`;\n  parserZ = (value: string) => value.replace('z: ', '');\n\n}\n","<div nz-row [nzGutter]=\"{ xs: 8, sm: 16, md: 24, lg: 32 }\">\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n        <div class=\"inner-box\">\n            <nz-input-number \n                [(ngModel)]=\"value.x\" \n                name=\"x\" \n                [nzStep]=\"0.001\" \n                (ngModelChange)=\"updateVector('x', $event)\" \n                [nzFormatter]=\"formatterX\"\n                [nzParser]=\"parserX\">\n            </nz-input-number>\n        </div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n        <div class=\"inner-box\">\n            <nz-input-number \n                [(ngModel)]=\"value.y\" \n                name=\"y\" \n                [nzStep]=\"0.001\" \n                (ngModelChange)=\"updateVector('y', $event)\"\n                [nzFormatter]=\"formatterY\"\n                [nzParser]=\"parserY\">\n            </nz-input-number>\n        </div>\n    </div>\n    <div nz-col class=\"gutter-row\" [nzSpan]=\"8\">\n        <div class=\"inner-box\">\n            <nz-input-number \n                [(ngModel)]=\"value.z\" \n                name=\"z\" \n                [nzStep]=\"0.001\" \n                (ngModelChange)=\"updateVector('z', $event)\"\n                [nzFormatter]=\"formatterZ\"\n                [nzParser]=\"parserZ\">\n            </nz-input-number>\n        </div>\n    </div>\n</div>","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { InpEvent } from '@app/_shared/shared.type';\n\n@Component({\n  selector: 'panel-light-tab-params',\n  templateUrl: './panel-light-tab-params.component.html',\n  styleUrls: ['./panel-light-tab-params.component.scss']\n})\nexport class PanelLightTabParamsComponent implements OnInit {\n\n  @Input() inputs: any;\n  @Output() subcribe = new EventEmitter<InpEvent>();\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  changeHandle(event:InpEvent){\n    this.subcribe.emit(event)\n  }\n}\n","<div class=\"tab-inner\">\n    <div class=\"inputs store\">\n        <div *ngFor=\"let inp of inputs; let i=index\">\n            <div class=\"input-item\" [ngSwitch]=\"inp.type\" [class.item-first]=\"i==0\">\n                <inp-switch-group *ngSwitchCase=\"'checkbox'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-switch-group>\n                <inp-texture-group *ngSwitchCase=\"'texture'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-texture-group>\n                <inp-color-group *ngSwitchCase=\"'color'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-color-group>\n                <inp-select-group *ngSwitchCase=\"'select'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-select-group>\n                <inp-range-group *ngSwitchCase=\"'range'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-range-group>\n                <inp-number-group *ngSwitchCase=\"'number'\" [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-number-group>\n                <inp-text-group *ngSwitchDefault [config]=\"inp\" (subcribe)=\"changeHandle($event)\" class=\"input-group\"></inp-text-group>\n            </div>\n        </div>\n    </div>\n</div>","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { BaseComponent } from '@app/_shared/components/base/base.component';\n\n@Component({\n  selector: 'app-tab-viewer-scene',\n  templateUrl: './tab-viewer-scene.component.html',\n  styleUrls: ['./tab-viewer-scene.component.scss']\n})\nexport class TabViewerSceneComponent extends BaseComponent implements OnInit {\n  @Input() loaded: EventEmitter<any> = new EventEmitter();\n\n  @Output() loadedChange: EventEmitter<any> = new EventEmitter();\n\n  loadedForeground = false;\n  loadedBackground = false;\n  height50: boolean = false;\n\n  constructor(private cd: ChangeDetectorRef) {\n      super();\n  }\n  onInit(): void {\n      this.loadedChange.emit(true);\n      \n  }\n}\n","<div class=\"tab-inner\" [class.height-50]=\"height50\">\n    <h2>{{\"Scene\"|translate}}</h2>\n    <nz-tabset nzTabPosition=\"top\" nzType=\"line\" class=\"sub-tab\">\n  \n      <nz-tab [nzTitle]=\"iconBackground\">\n        <ng-template #iconBackground>\n          <img src=\"/assets/icons/new-design/tab-sub/background.svg\" alt=\"Background\" />\n          <div>Background</div>\n        </ng-template>\n        <app-tab-background class=\"tab-background\"></app-tab-background>\n      </nz-tab>\n  \n      <nz-tab [nzTitle]=\"iconForeground\">\n        <ng-template #iconForeground>\n          <img src=\"/assets/icons/new-design/tab-sub/foreground.svg\" alt=\"Foreground\" />\n          <div>Foreground</div>\n        </ng-template>\n        <ng-template nz-tab>\n          <app-tab-foreground></app-tab-foreground>\n        </ng-template>\n      </nz-tab>\n      \n      \n    </nz-tabset>\n  </div>"]}