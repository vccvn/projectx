"use strict";(self.webpackChunkcretip_3dwebapp=self.webpackChunkcretip_3dwebapp||[]).push([[267],{77310:function(t,e,n){n.d(e,{_t:function(){return Q}});var i=n(37716),s=n(38583),o=n(91604),r=n(80521),a=n(39490),c=n(79765),l=n(75319),h=n(20945),p=n(61927),d=(n(67574),n(66682),n(46782));function g(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function u(t,e){const n=e?"":"none";g(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function f(t,e){const n=t.style;n.position=e?"":"fixed",n.top=n.opacity=e?"":"0",n.left=e?"":"-999em"}function m(t){const e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function v(t,e){return t.getPropertyValue(e).split(",").map(t=>t.trim())}function _(t){const e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function b(t,e,n){const{top:i,bottom:s,left:o,right:r}=t;return n>=i&&n<=s&&e>=o&&e<=r}function w(t,e,n){t.top+=e,t.bottom=t.top+t.height,t.left+=n,t.right=t.left+t.width}function y(t,e,n,i){const{top:s,right:o,bottom:r,left:a,width:c,height:l}=t,h=c*e,p=l*e;return i>s-p&&i<r+p&&n>a-h&&n<o+h}n(39761),n(88002),n(15257),n(68307),n(43190),n(70946);class x{constructor(t,e){this._document=t,this._viewportRuler=e,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:_(t)})})}handleScroll(t){const e=t.target,n=this.positions.get(e);if(!n)return null;const i=e===this._document?e.documentElement:e,s=n.scrollPosition;let o,r;if(e===this._document){const t=this._viewportRuler.getViewportScrollPosition();o=t.top,r=t.left}else o=e.scrollTop,r=e.scrollLeft;const a=s.top-o,c=s.left-r;return this.positions.forEach((t,n)=>{t.clientRect&&e!==n&&i.contains(n)&&w(t.clientRect,a,c)}),s.top=o,s.left=r,{top:a,left:c}}}function C(t){const e=t.cloneNode(!0),n=e.querySelectorAll("[id]"),i=t.nodeName.toLowerCase();e.removeAttribute("id");for(let s=0;s<n.length;s++)n[s].removeAttribute("id");return"canvas"===i?S(t,e):("input"===i||"select"===i||"textarea"===i)&&k(t,e),O("canvas",t,e,S),O("input, textarea, select",t,e,k),e}function O(t,e,n,i){const s=e.querySelectorAll(t);if(s.length){const e=n.querySelectorAll(t);for(let t=0;t<s.length;t++)i(s[t],e[t])}}let P=0;function k(t,e){"file"!==e.type&&(e.value=t.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${P++}`)}function S(t,e){const n=e.getContext("2d");if(n)try{n.drawImage(t,0,0)}catch(i){}}const M=(0,r.i$)({passive:!0}),z=(0,r.i$)({passive:!1});class E{constructor(t,e,n,i,s,o){this._config=e,this._document=n,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new c.xQ,this._pointerMoveSubscription=l.w.EMPTY,this._pointerUpSubscription=l.w.EMPTY,this._scrollSubscription=l.w.EMPTY,this._resizeSubscription=l.w.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new c.xQ,this.started=new c.xQ,this.released=new c.xQ,this.ended=new c.xQ,this.entered=new c.xQ,this.exited=new c.xQ,this.dropped=new c.xQ,this.moved=this._moveEvents,this._pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){const e=this._handles.find(e=>{const n=t.target;return!!n&&(n===e||e.contains(n))});e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)},this._pointerMove=t=>{const e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging){if(Math.abs(e.x-this._pickupPositionOnPage.x)+Math.abs(e.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const e=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),n=this._dropContainer;if(!e)return void this._endDragSequence(t);(!n||!n.isDragging()&&!n.isReceiving())&&(t.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(t)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),t.preventDefault();const n=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(n),this._dropContainer)this._updateActiveDropContainer(n,e);else{const t=this._activeTransform;t.x=n.x-this._pickupPositionOnPage.x+this._passiveTransform.x,t.y=n.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(t.x,t.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${t.x} ${t.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:n,event:t,distance:this._getDragDistance(n),delta:this._pointerDirectionDelta})})},this._pointerUp=t=>{this._endDragSequence(t)},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new x(n,s),o.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=(0,a.Ig)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>u(t,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(t=>(0,a.fI)(t)),this._handles.forEach(t=>u(t,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=(0,a.fI)(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,z),e.addEventListener("touchstart",this._pointerDown,M)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?(0,a.fI)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&L(this._rootElement),L(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),u(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),u(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&L(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&L(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){!this._dragDropRegistry.isDragging(this)||(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(t))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(t){Z(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const t=this._rootElement,n=t.parentNode,i=this._preview=this._createPreviewElement(),s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),r=this._getShadowRoot();n.insertBefore(o,t),f(t,!1),this._document.body.appendChild(n.replaceChild(s,t)),function(t,e){return e||t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||t.body}(this._document,r).appendChild(i),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const n=this.isDragging(),i=Z(e),s=!i&&0!==e.button,o=this._rootElement,r=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),n||s||r)return;this._handles.length&&(this._rootElementTapHighlight=o.style.webkitTapHighlightColor||"",o.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(t=>{this._updateOnScroll(t)}),this._boundaryElement&&(this._boundaryRect=_(this._boundaryElement));const a=this._previewTemplate;this._pickupPositionInElement=a&&a.template&&!a.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const c=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:c.x,y:c.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){f(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const e=this._dropContainer,n=e.getItemIndex(this),i=this._getPointerPositionOnPage(t),s=this._getDragDistance(this._getPointerPositionOnPage(t)),o=e._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s}),e.drop(this,n,this._initialIndex,this._initialContainer,o,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:n,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(n,i),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._preview.style.transform=D(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y)}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,n=t?t.template:null;let i;if(n&&t){const e=t.matchSize?this._rootElement.getBoundingClientRect():null,s=t.viewContainer.createEmbeddedView(n,t.context);s.detectChanges(),i=I(s,this._document),this._previewRef=s,t.matchSize?A(i,e):i.style.transform=D(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const t=this._rootElement;i=C(t),A(i,t.getBoundingClientRect())}return g(i.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:`${this._config.zIndex||1e3}`}),u(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(t=>i.classList.add(t)):i.classList.add(e)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=D(t.left,t.top);const e=function(t){const e=getComputedStyle(t),n=v(e,"transition-property"),i=n.find(t=>"transform"===t||"all"===t);if(!i)return 0;const s=n.indexOf(i),o=v(e,"transition-duration"),r=v(e,"transition-delay");return m(o[s])+m(r[s])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const n=e=>{(!e||e.target===this._preview&&"transform"===e.propertyName)&&(this._preview.removeEventListener("transitionend",n),t(),clearTimeout(i))},i=setTimeout(n,1.5*e);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let n;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),n=I(this._placeholderRef,this._document)):n=C(this._rootElement),n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(t,e){const n=this._rootElement.getBoundingClientRect(),i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():n,o=Z(e)?e.targetTouches[0]:e,r=this._getViewportScrollPosition();return{x:s.left-n.left+(o.pageX-s.left-r.left),y:s.top-n.top+(o.pageY-s.top-r.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),n=Z(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,i=n.pageX-e.left,s=n.pageY-e.top;if(this._ownerSVGElement){const t=this._ownerSVGElement.getScreenCTM();if(t){const e=this._ownerSVGElement.createSVGPoint();return e.x=i,e.y=s,e.matrixTransform(t.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:i}=this.constrainPosition?this.constrainPosition(t,this):t;if("x"===this.lockAxis||"x"===e?i=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:t,y:e}=this._pickupPositionInElement,s=this._boundaryRect,o=this._previewRect,r=s.top+e,a=s.bottom-(o.height-e);n=T(n,s.left+t,s.right-(o.width-t)),i=T(i,r,a)}return{x:n,y:i}}_updatePointerDirectionDelta(t){const{x:e,y:n}=t,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-s.x),r=Math.abs(n-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=e>s.x?1:-1,s.x=e),r>this._config.pointerDirectionChangeThreshold&&(i.y=n>s.y?1:-1,s.y=n),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,u(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,z),t.removeEventListener("touchstart",this._pointerDown,M)}_applyRootElementTransform(t,e){const n=D(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const n=this._boundaryElement.getBoundingClientRect(),i=this._rootElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===i.width&&0===i.height)return;const s=n.left-i.left,o=i.right-n.right,r=n.top-i.top,a=i.bottom-n.bottom;n.width>i.width?(s>0&&(t+=s),o>0&&(t-=o)):t=0,n.height>i.height?(r>0&&(e+=r),a>0&&(e-=a)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:Z(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const n=t.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&w(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,r.kV)(this._rootElement)),this._cachedShadowRoot}}function D(t,e){return`translate3d(${Math.round(t)}px, ${Math.round(e)}px, 0)`}function T(t,e,n){return Math.max(e,Math.min(n,t))}function L(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Z(t){return"t"===t.type[0]}function I(t,e){const n=t.rootNodes;if(1===n.length&&n[0].nodeType===e.ELEMENT_NODE)return n[0];const i=e.createElement("div");return n.forEach(t=>i.appendChild(t)),i}function A(t,e){t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.transform=D(e.left,e.top)}function j(t,e){return Math.max(0,Math.min(e,t))}class R{constructor(t,e,n,i,s){this._dragDropRegistry=e,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new c.xQ,this.entered=new c.xQ,this.exited=new c.xQ,this.dropped=new c.xQ,this.sorted=new c.xQ,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=l.w.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new c.xQ,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,h.F)(0,p.Z).pipe((0,d.R)(this._stopScrollTimers)).subscribe(()=>{const t=this._scrollNode,e=this.autoScrollStep;1===this._verticalScrollDirection?F(t,-e):2===this._verticalScrollDirection&&F(t,e),1===this._horizontalScrollDirection?H(t,-e):2===this._horizontalScrollDirection&&H(t,e)})},this.element=(0,a.fI)(t),this._document=n,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new x(n,s)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,n,i){let s;this._draggingStarted(),null==i?(s=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===s&&(s=this._getItemIndexFromPointerPosition(t,e,n))):s=i;const o=this._activeDraggables,r=o.indexOf(t),c=t.getPlaceholderElement();let l=o[s];if(l===t&&(l=o[s+1]),r>-1&&o.splice(r,1),l&&!this._dragDropRegistry.isDragging(l)){const e=l.getRootElement();e.parentElement.insertBefore(c,e),o.splice(s,0,t)}else if(this._shouldEnterAsFirstChild(e,n)){const e=o[0].getRootElement();e.parentNode.insertBefore(c,e),o.unshift(t)}else(0,a.fI)(this.element).appendChild(c),o.push(t);c.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,n,i,s,o){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n,container:this,previousContainer:i,isPointerOverContainer:s,distance:o})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(t=>t.isDragging()).every(e=>-1===t.indexOf(e))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=(0,a.fI)(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?q("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,e=>e.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,n,i){if(this.sortingDisabled||!this._clientRect||!y(this._clientRect,.05,e,n))return;const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,n,i);if(-1===o&&s.length>0)return;const r="horizontal"===this._orientation,a=q(s,e=>e.drag===t),c=s[o],l=c.clientRect,h=a>o?1:-1,p=this._getItemOffsetPx(s[a].clientRect,l,h),d=this._getSiblingOffsetPx(a,s,h),g=s.slice();(function(t,e,n){const i=j(e,t.length-1),s=j(n,t.length-1);if(i===s)return;const o=t[i],r=s<i?-1:1;for(let a=i;a!==s;a+=r)t[a]=t[a+r];t[s]=o})(s,a,o),this.sorted.next({previousIndex:a,currentIndex:o,container:this,item:t}),s.forEach((e,n)=>{if(g[n]===e)return;const i=e.drag===t,s=i?p:d,o=i?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=s,r?(o.style.transform=`translate3d(${Math.round(e.offset)}px, 0, 0)`,w(e.clientRect,0,s)):(o.style.transform=`translate3d(0, ${Math.round(e.offset)}px, 0)`,w(e.clientRect,s,0))}),this._previousSwap.overlaps=b(l,e,n),this._previousSwap.drag=c.drag,this._previousSwap.delta=r?i.x:i.y}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let n,i=0,s=0;if(this._parentPositions.positions.forEach((o,r)=>{r===this._document||!o.clientRect||n||y(o.clientRect,.05,t,e)&&([i,s]=function(t,e,n,i){const s=J(e,i),o=$(e,n);let r=0,a=0;if(s){const e=t.scrollTop;1===s?e>0&&(r=1):t.scrollHeight-e>t.clientHeight&&(r=2)}if(o){const e=t.scrollLeft;1===o?e>0&&(a=1):t.scrollWidth-e>t.clientWidth&&(a=2)}return[r,a]}(r,o.clientRect,t,e),(i||s)&&(n=r))}),!i&&!s){const{width:o,height:r}=this._viewportRuler.getViewportSize(),a={width:o,height:r,top:0,right:o,bottom:r,left:0};i=J(a,e),s=$(a,t),n=window}n&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=n,(i||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=(0,a.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=(0,a.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const e=t.getVisibleElement();return{drag:t,offset:0,clientRect:_(e)}}).sort((e,n)=>t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1;const t=(0,a.fI)(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=>{const e=t.getRootElement();e&&(e.style.transform="")}),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,n){const i="horizontal"===this._orientation,s=e[t].clientRect,o=e[t+-1*n];let r=s[i?"width":"height"]*n;if(o){const t=i?"left":"top",e=i?"right":"bottom";-1===n?r-=o.clientRect[t]-s[e]:r+=s[t]-o.clientRect[e]}return r}_getItemOffsetPx(t,e,n){const i="horizontal"===this._orientation;let s=i?e.left-t.left:e.top-t.top;return-1===n&&(s+=i?e.width-t.width:e.height-t.height),s}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){const s=n[n.length-1].clientRect;return i?t>=s.right:e>=s.bottom}{const s=n[0].clientRect;return i?t<=s.left:e<=s.top}}_getItemIndexFromPointerPosition(t,e,n,i){const s="horizontal"===this._orientation,o=q(this._itemPositions,({drag:o,clientRect:r},a,c)=>{if(o===t)return c.length<2;if(i){const t=s?i.x:i.y;if(o===this._previousSwap.drag&&this._previousSwap.overlaps&&t===this._previousSwap.delta)return!1}return s?e>=Math.floor(r.left)&&e<Math.floor(r.right):n>=Math.floor(r.top)&&n<Math.floor(r.bottom)});return-1!==o&&this.sortPredicate(o,t,this)?o:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return null!=this._clientRect&&b(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,n){return this._siblings.find(i=>i._canReceive(t,e,n))}_canReceive(t,e,n){if(!this._clientRect||!b(this._clientRect,e,n)||!this.enterPredicate(t,this))return!1;const i=this._getShadowRoot().elementFromPoint(e,n);if(!i)return!1;const s=(0,a.fI)(this.element);return i===s||s.contains(i)}_startReceiving(t,e){const n=this._activeSiblings;!n.has(t)&&e.every(t=>this.enterPredicate(t,this)||this._draggables.indexOf(t)>-1)&&(n.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&(this._itemPositions.forEach(({clientRect:t})=>{w(t,e.top,e.left)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=(0,r.kV)((0,a.fI)(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._activeDraggables.filter(t=>t.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function q(t,e){for(let n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}function F(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function H(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function J(t,e){const{top:n,bottom:i,height:s}=t,o=.05*s;return e>=n-o&&e<=n+o?1:e>=i-o&&e<=i+o?2:0}function $(t,e){const{left:n,right:i,width:s}=t,o=.05*s;return e>=n-o&&e<=n+o?1:e>=i-o&&e<=i+o?2:0}const V=(0,r.i$)({passive:!1,capture:!0});let B=(()=>{class t{constructor(t,e){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=t=>t.isDragging(),this.pointerMove=new c.xQ,this.pointerUp=new c.xQ,this.scroll=new c.xQ,this._preventDefaultWhileDragging=t=>{this._activeDragInstances.length>0&&t.preventDefault()},this._persistentTouchmoveListener=t=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))},this._document=e}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,V)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,V)}startDragging(t,e){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const t=e.type.startsWith("touch");this._globalListeners.set(t?"touchend":"mouseup",{handler:t=>this.pointerUp.next(t),options:!0}).set("scroll",{handler:t=>this.scroll.next(t),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:V}),t||this._globalListeners.set("mousemove",{handler:t=>this.pointerMove.next(t),options:V}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((t,e)=>{this._document.addEventListener(e,t.handler,t.options)})})}}stopDragging(t){const e=this._activeDragInstances.indexOf(t);e>-1&&(this._activeDragInstances.splice(e,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,e)=>{this._document.removeEventListener(e,t.handler,t.options)}),this._globalListeners.clear()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(i.R0b),i.LFG(s.K0))},t.\u0275prov=(0,i.Yz7)({factory:function(){return new t((0,i.LFG)(i.R0b),(0,i.LFG)(s.K0))},token:t,providedIn:"root"}),t})();const N={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Y=(()=>{class t{constructor(t,e,n,i){this._document=t,this._ngZone=e,this._viewportRuler=n,this._dragDropRegistry=i}createDrag(t,e=N){return new E(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new R(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(s.K0),i.LFG(i.R0b),i.LFG(o.rL),i.LFG(B))},t.\u0275prov=(0,i.Yz7)({factory:function(){return new t((0,i.LFG)(s.K0),(0,i.LFG)(i.R0b),(0,i.LFG)(o.rL),(0,i.LFG)(B))},token:t,providedIn:"root"}),t})(),Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[Y],imports:[o.ZD]}),t})()},34812:function(t,e,n){n.d(e,{yH:function(){return x},cD:function(){return P},Zv:function(){return O}});var i=n(64762),s=n(37716),o=n(47070),r=n(32729),a=n(90641),c=n(96182),l=n(79765),h=n(46782),p=n(70946),d=n(38583),g=n(68178),u=n(60945);const f=["*"];function m(t,e){if(1&t&&(s.ynx(0),s._UZ(1,"i",6),s.BQk()),2&t){const t=e.$implicit,n=s.oxw(2);s.xp6(1),s.Q6J("nzType",t||"right")("nzRotate",n.nzActive?90:0)}}function v(t,e){if(1&t&&(s.ynx(0),s.YNc(1,m,2,2,"ng-container",2),s.BQk()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("nzStringTemplateOutlet",t.nzExpandedIcon)}}function _(t,e){if(1&t&&(s.ynx(0),s._uU(1),s.BQk()),2&t){const t=s.oxw();s.xp6(1),s.Oqu(t.nzHeader)}}function b(t,e){if(1&t&&(s.ynx(0),s._uU(1),s.BQk()),2&t){const t=s.oxw(2);s.xp6(1),s.Oqu(t.nzExtra)}}function w(t,e){if(1&t&&(s.TgZ(0,"div",7),s.YNc(1,b,2,1,"ng-container",2),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("nzStringTemplateOutlet",t.nzExtra)}}const y="collapse";let x=(()=>{class t{constructor(t,e,n,i){this.nzConfigService=t,this.cdr=e,this.elementRef=n,this.directionality=i,this._nzModuleName=y,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.destroy$=new l.xQ,this.elementRef.nativeElement.classList.add("ant-collapse"),this.nzConfigService.getConfigChangeEventForComponent(y).pipe((0,h.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){var t;null===(t=this.directionality.change)||void 0===t||t.pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(t){this.listOfNzCollapsePanelComponent.push(t)}removePanel(t){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(t),1)}click(t){this.nzAccordion&&!t.nzActive&&this.listOfNzCollapsePanelComponent.filter(e=>e!==t).forEach(t=>{t.nzActive&&(t.nzActive=!1,t.nzActiveChange.emit(t.nzActive),t.markForCheck())}),t.nzActive=!t.nzActive,t.nzActiveChange.emit(t.nzActive)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(r.jY),s.Y36(s.sBO),s.Y36(s.SBq),s.Y36(p.Is,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["nz-collapse"]],hostVars:10,hostBindings:function(t,e){2&t&&s.ekj("ant-collapse-icon-position-left","left"===e.nzExpandIconPosition)("ant-collapse-icon-position-right","right"===e.nzExpandIconPosition)("ant-collapse-ghost",e.nzGhost)("ant-collapse-borderless",!e.nzBordered)("ant-collapse-rtl","rtl"===e.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],ngContentSelectors:f,decls:1,vars:0,template:function(t,e){1&t&&(s.F$t(),s.Hsn(0))},encapsulation:2,changeDetection:0}),(0,i.gn)([(0,r.oS)(),(0,c.yF)(),(0,i.w6)("design:type",Boolean)],t.prototype,"nzAccordion",void 0),(0,i.gn)([(0,r.oS)(),(0,c.yF)(),(0,i.w6)("design:type",Boolean)],t.prototype,"nzBordered",void 0),(0,i.gn)([(0,r.oS)(),(0,c.yF)(),(0,i.w6)("design:type",Boolean)],t.prototype,"nzGhost",void 0),t})();const C="collapsePanel";let O=(()=>{class t{constructor(t,e,n,i,o){this.nzConfigService=t,this.cdr=e,this.nzCollapseComponent=n,this.elementRef=i,this.noAnimation=o,this._nzModuleName=C,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new s.vpe,this.destroy$=new l.xQ,this.elementRef.nativeElement.classList.add("ant-collapse-item"),this.nzConfigService.getConfigChangeEventForComponent(C).pipe((0,h.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}clickHeader(){this.nzDisabled||this.nzCollapseComponent.click(this)}markForCheck(){this.cdr.markForCheck()}ngOnInit(){this.nzCollapseComponent.addPanel(this)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.nzCollapseComponent.removePanel(this)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(r.jY),s.Y36(s.sBO),s.Y36(x,1),s.Y36(s.SBq),s.Y36(a.P,8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["nz-collapse-panel"]],hostVars:6,hostBindings:function(t,e){2&t&&s.ekj("ant-collapse-no-arrow",!e.nzShowArrow)("ant-collapse-item-active",e.nzActive)("ant-collapse-item-disabled",e.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],ngContentSelectors:f,decls:7,vars:8,consts:[["role","tab",1,"ant-collapse-header",3,"click"],[4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-collapse-extra",4,"ngIf"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"],[1,"ant-collapse-extra"]],template:function(t,e){1&t&&(s.F$t(),s.TgZ(0,"div",0),s.NdJ("click",function(){return e.clickHeader()}),s.YNc(1,v,2,1,"ng-container",1),s.YNc(2,_,2,1,"ng-container",2),s.YNc(3,w,2,1,"div",3),s.qZA(),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.Hsn(6),s.qZA(),s.qZA()),2&t&&(s.uIk("aria-expanded",e.nzActive),s.xp6(1),s.Q6J("ngIf",e.nzShowArrow),s.xp6(1),s.Q6J("nzStringTemplateOutlet",e.nzHeader),s.xp6(1),s.Q6J("ngIf",e.nzExtra),s.xp6(1),s.ekj("ant-collapse-content-active",e.nzActive),s.Q6J("@.disabled",null==e.noAnimation?null:e.noAnimation.nzNoAnimation)("@collapseMotion",e.nzActive?"expanded":"hidden"))},directives:[d.O5,g.f,u.Ls],encapsulation:2,data:{animation:[o.J_]},changeDetection:0}),(0,i.gn)([(0,c.yF)(),(0,i.w6)("design:type",Object)],t.prototype,"nzActive",void 0),(0,i.gn)([(0,c.yF)(),(0,i.w6)("design:type",Object)],t.prototype,"nzDisabled",void 0),(0,i.gn)([(0,r.oS)(),(0,c.yF)(),(0,i.w6)("design:type",Boolean)],t.prototype,"nzShowArrow",void 0),t})(),P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[p.vT,d.ez,u.PV,g.T,a.g]]}),t})()},46885:function(t,e,n){var i=n(83586),s=n(28301),o=n(66139),r=n(57845);const a=(0,o.nN)("ClientEditor").extends(r.Z)({transformMode:"basic",hasSelectedObject:!1,constructor:function(t,e){this.setup(t,e)},startup:function(){var t=this;this.on("pointerdown",function(e){t.poiterDowsStatus=!0;var n=t.engine.wrapper.getBoundingClientRect();if(t.onDownPosition.x=e.clientX-n.left,t.onDownPosition.y=e.clientY-n.top,!t.selected||"basic"!=t.transformMode||t.selected.isLight||t.currentTargetControl&&t.currentTargetControl==t.control.object)return;const i=new s.Vector2;i.x=t.onDownPosition.x/n.width*2-1,i.y=-t.onDownPosition.y/n.height*2+1;const o=t.selectObjectByPointer(i);o&&o==t.selected&&!o.isLight?(e.preventDefault(),t.engine.control.enabled=!1,t.control.enabled=!1,t.hasSelectedObject=!0,t.setObjectMovable(t.selected)):(t.engine.control.enabled=!0,t.control.enabled=!0,t.hasSelectedObject=!1)}),this.on("pointerup",function(e){if(t.poiterDowsStatus){if(t.hasSelectedObject)return this.emit({type:"object.changed",data:t.selected,mode:"translate"}),t.engine.control.enabled=!0,t.control.enabled=!0,t.hasSelectedObject=!1,void t.removeObjectMovable();var n=t.engine.wrapper.getBoundingClientRect();if(t.onUpPosition.x=e.clientX-n.left,t.onUpPosition.y=e.clientY-n.top,t.onUpPosition.x<0||t.onUpPosition.y<0)return;0===t.onDownPosition.distanceTo(t.onUpPosition)&&(t.pointer.x=t.onUpPosition.x/n.width*2-1,t.pointer.y=-t.onUpPosition.y/n.height*2+1,t.setCurrentObjectByPointer(t.pointer))}t.poiterDowsStatus=!1}),this.on("pointermove",function(e){if(t.hasSelectedObject){const n=new s.Vector2;return n.x=e.clientX,n.y=e.clientY,void t.checkObjectMovablePosition(n)}}),window.addEventListener("keydown",function(e){switch(e.keyCode){case 81:t.executeCommand("space");break;case 16:t.executeCommand("snap");break;case 46:t.deleteAttach()}}),this.ready(),this.setEngineData(),this.emit({type:"startup",data:(0,i.dg)()})},updateHelperByObject:function(t){if(void 0!==t){var e=this.helpers[t.id];void 0!==e&&!0!==e.isSkeletonHelper&&(t.position&&e.position.copy(t.position),t.rotation&&e.rotation.copy(t.rotation),t.scale&&e.scale.copy(t.scale),e.update())}},addObject:function(t){this.objects.push(t),this.setCurrentObject(t)},addLight:function(t){if((0,i.Kn)(t)&&t.isLight){var e=this.getHelper(t);if(e&&(e.position.copy(t.position),this.scene.add(e),e.visible=!1,e.children))for(let t=0;t<e.children.length;t++){const n=e.children[t];-1==this.pickers.indexOf(n)&&this.pickers.push(n)}t.target&&(t.target.position.y=this.engine.dropbyPositionY,this.scene.add(t.target)),this.lights.push(t)}},setCurrent:function(t){if(!t)return this.selected&&(this.selected.isTargetControlObject?this.detactLightTargetControl():this.currentLightt?this.unsetCurrentLight():this.unsetCurrentObject()),this.control.detach(),this.engine.refresh(),this;this.selected!==t&&(this.selected=t,t.isLight?this.setCurrentLight(t):this.setCurrentObject(t),this.engine.refresh())},setCurrentObject:function(t){this.currentLight&&this.unsetCurrentLight(),this.currentObject&&this.unsetCurrentObject(),this.currentObject=t,this.selected=t;var e=this.getHelper(t);return this.helper=e,this.scene.remove(e),this.scene.add(e),this.dispatchEvent({type:"object.set-current",object:t,mode:this.transformMode}),this.engine.refresh(),!1},setCurrentLight:function(t){if(t){if(this.currentLight&&this.unsetCurrentLight(),this.currentObject&&this.unsetCurrentObject(),this.currentLight=t,this.control.detach(),this.control.attach(t),this.selected=t,!t.targetControlObject){var e=this.getLightTargetControlObject(t);e&&(t.targetControlObject=e,this.scene.remove(e),this.scene.add(e))}this.dispatchEvent({type:"light.set-current",light:t,mode:this.control.mode})}else console.warn("L\u1ed7i kkho c\xf3 ligh")},unsetCurrentLight:function(){this.detachLight(),this.dispatchEvent({type:"light.unset-current",mode:this.control.mode})},unsetCurrentObject:function(){this.detachObject(),this.dispatchEvent({type:"object.unset-current",mode:this.control.mode})},selectObjectByPointer:function(t){this.raycaster.setFromCamera(t,this.engine.camera);const e=this.raycaster.intersectObjects(this.objects,!0);if(e.length>0){const t=this.closestObjectInScene(e[0].object);if(t)return t}const n=this.raycaster.intersectObjects(this.targets,!0);if(n.length){const t=this.closestLightTargetControlInScene(n[0].object);if(t)return t}const i=this.raycaster.intersectObjects(this.lights,!0);if(i.length>0){const t=this.closestLightInScene(i[0].object);if(t)return t}const s=this.raycaster.intersectObjects(this.pickers,!0);if(s.length>0){const t=this.closestLightInScene(s[0].object);if(t)return t}return null},setCurrentObjectByPointer:function(t){if(this.raycaster.setFromCamera(t,this.engine.camera),this.lightHelperStatus){const t=this.raycaster.intersectObjects(this.targets,!0);if(t.length){const e=this.closestLightTargetControlInScene(t[0].object);if(e)return this.transformMode="basic",void this.attachLightTargetControl(e)}this.currentLight&&this.currentTargetControl&&this.currentTargetControl.light==this.currentLight?(this.detactLightTargetControl(),this.transformMode="basic",this.control.attach(this.currentLight)):this.detactLightTargetControl();const e=this.raycaster.intersectObjects(this.lights,!0);if(e.length>0){const t=this.closestLightInScene(e[0].object);if(t)return void(t!=this.control.object&&(this.currentLight&&this.currentLight!=t&&this.setCurrent(null),this.setCurrent(t),this.transformMode="basic"))}const n=this.raycaster.intersectObjects(this.pickers,!0);if(n.length>0){const t=this.closestLightInScene(n[0].object);if(t)return void(t!=this.control.object&&(this.currentLight&&this.currentLight!=t&&this.setCurrent(null),this.setCurrent(t),this.transformMode="basic"))}}else{const t=this.raycaster.intersectObjects(this.objects,!0);if(t.length>0){const e=this.closestObjectInScene(t[0].object);if(e)return void(e!==this.selected&&(this.currentObject&&this.currentObject!=e&&this.setCurrent(null),this.transformMode="basic",this.setCurrent(e)))}}this.currentLight&&this.detachLight(),this.currentObject&&this.detachObject(),this.currentTargetControl&&this.scene.remove(this.currentTargetControl),this.transformMode="basic",this.control.detach(),this.setCurrent(null),this.select(null),this.selected=null},unselect:function(){this.transformMode="basic",this.control.detach(),this.setCurrent(null),this.select(null),this.selected=null},closestLightTargetControlInScene:function(t){if((0,i.Kn)(t)&&!t.isScene&&this.currentLight){var e=this.currentLight;for(let n=0;n<this.targets.length;n++){const i=this.targets[n];if(t==i&&i.light==e)return i}if(t.parent)return this.closestLightInScene(t.parent)}return null},setObjectMovable:function(t,e){this.hasDroppablePosition=!0;var n=(new s.Box3).setFromObject(t);const i=new s.Vector3;var o=n.getSize(i);this.itemSize=o,this.dropPreviewCustomObject=!0,this.itemShadowObject=t,this.areaObjects.map(function(e){e.position.y=t.position.y}),this.turnOffShadow(1e3),e&&this.checkObjectMovablePosition(e)},removeObjectMovable:function(){if(!this.hasDroppablePosition)return!1;this.itemShadowObject=null,this.hasDroppablePosition=!1;var t=this.dropPosY;this.areaObjects.map(function(e){e.position.y=t})},checkObjectMovablePosition:function(t){if(!this.hasDroppablePosition)return!1;var e=this.engine.wrapper.getBoundingClientRect(),n=t.x-e.left,s=t.y-e.top;if(n<0||s<0)return;t.x=n/e.width*2-1,t.y=-s/e.height*2+1,this.raycaster.setFromCamera(t,this.engine.camera);const o=this.raycaster.intersectObjects(this.areaObjects,!0);if(o.length>0){const t=this.closestAreaScene(o[0].object);if(t){if(this.itemShadowObject){let e={x:this.itemShadowObject.position.x,z:this.itemShadowObject.position.z},n={x:t.position.x,z:t.position.z};if((e.x!=n.x||e.z!=n.z)&&n.x>=-(this.sceneSize.width-this.itemSize.x)/2&&n.x<=(this.sceneSize.width-this.itemSize.x)/2&&n.z>=-(this.sceneSize.depth-this.itemSize.z)/2&&n.z<=(this.sceneSize.depth-this.itemSize.z)/2){let t={x:n.x,y:this.itemShadowObject.position.y,z:n.z};(0,i.MP)(this.itemShadowObject.position,n),this.emit({type:"object.position.move",position:t}),this.updateHelperByObject(this.itemShadowObject),this.turnOffShadow(1e3),this.refresh()}}}else this.turnOffShadow(1e3),this.refresh()}},isSelected:function(t){return t==this.selected||!(t.isScene||!t.parent)&&this.isSelected(t.parent)},attachObject:function(t){this.currentLight&&this.detachLight(),this.currentObject&&this.detachObject(),this.currentObject=t;var e=this.getHelper(t);return this.helper=e,this.control.attach(t),this.scene.remove(e),this.scene.add(e),!1},detachObject:function(){this.control.detach(),this.helper&&(this.helper.position.set(0,0,0),this.helper.rotation.set(0,0,0),this.helper.scale.set(1,1,1),this.scene.remove(this.helper)),this.currentObject=null,this.engine.refresh()},attachLight:function(t){if(t){this.currentObject&&this.detachObject(),this.currentLight&&this.detachLight(),this.currentLight=t,this.control.attach(t);var e=this.getLightTargetControlObject(t);e&&(this.scene.remove(e),this.scene.add(e))}else console.warn("L\u1ed7i kkho c\xf3 ligh")},detachLight:function(){this.control.detach();var t=this.getLightTargetControlObject(this.currentLight);t&&this.scene.remove(t),this.currentLight=null,this.selected=null},executeCommand:function(t){switch(this.control.object||this.selected&&(this.selected.isLight?this.attachLight(this.selected):this.attachObject(this.selected),this.transformMode=t),this.control.object&&this.control.object.isTargetControlObject&&(t="translate"),t){case"space":this.control.setSpace("local"===this.control.space?"world":"local");break;case"snap":this.control.setTranslationSnap(100),this.control.setRotationSnap(s.MathUtils.degToRad(15)),this.control.setScaleSnap(.25);break;case"unsnap":this.control.setTranslationSnap(null),this.control.setRotationSnap(null),this.control.setScaleSnap(null);break;case"translate":this.control.setMode("translate");break;case"rotate":this.control.setMode("rotate");break;case"scale":this.control.setMode("scale");break;case"upsize":this.control.setSize(this.control.size+.1);break;case"downsize":this.control.setSize(Math.max(this.control.size-.1,.1));break;case"toggle:x":this.control.showX=!this.control.showX;break;case"toggle:y":this.control.showY=!this.control.showY;break;case"toggle:z":this.control.showZ=!this.control.showZ;break;case"enable":this.control.enabled=!this.control.enabled}this.engine.refresh()},updateDropAreaAreas:function(t,e,n){var s=this;this.checkMovingEngine(),this.areaObjects.length&&this.areaObjects.map(function(t){s.moving.remove(t)});var o=-t.width/2,r=t.width/2,a=-t.depth/2,c=t.depth/2,l=t.width/101,h=t.depth/101,p=(h<l?h:l)/5;o+=l/2,r-=l/2,a+=h/2,c-=h/2;var d=n&&(0,i.hj)(e)?e:0;this.dropPosY=d;let g=o,u=a,f=this.engine.Mesh.get({geometry:{type:"box",width:l,height:p,depth:h},material:{type:"basic",params:{opacity:0},props:{transparent:!0,visible:!1}},props:{visible:!1}});for(;g<=r;){let t=u;for(;t<=c;){let e=f.clone(!0);e.position.x=g,e.position.y=d,e.position.z=t,this.areaObjects.push(e),t+=h}g+=l}this.areaObjects.map(function(t){s.moving.add(t)})}});e.Z=a},91660:function(t,e,n){n.d(e,{by:function(){return o}});var i=n(83586);i.W3.rand();const s=void 0!==window.__3DHubTaskManager__&&(0,i.Kn)(window.__3DHubTaskManager__)?window.__3DHubTaskManager__:{tasks:{},add:function(t,e){return(0,i.aX)(this.tasks,t)||(this.tasks[t]=[]),!(!(0,i.GV)(e)||!this.tasks[t].push(e))},has:function(t,e){return!(!(0,i.aX)(this.tasks,t)||!this.tasks[t].length||e&&-1==this.tasks[t].indexOf(e))},remove:function(t,e){return!(!(0,i.aX)(this.tasks,t)||!this.tasks[t].length||(e?-1==this.tasks[t].indexOf(e)||(this.tasks[t].splice(e,1),0):(this.tasks[t].splice(0),delete this.tasks[t],0)))},run:function(t,e){if(!(0,i.aX)(this.tasks,t)||!this.tasks[t].length)return!1;let n=e&&(0,i.kJ)(e)?e:[];if(1==this.tasks[t].length)return(0,i.GV)(this.tasks[t][0])?this.tasks[t][0](...n):null;let s=[];for(let o=0;o<this.tasks[t].length;o++){const e=this.tasks[t][o];(0,i.GV)(e)&&s.push(e(...n))}return s}},o=(t,e)=>s.run(t,e)},76610:function(t,e,n){n.d(e,{H:function(){return o}});var i=n(37716),s=n(83586);let o=(()=>{class t{constructor(){this.moduleKey="",this.eventService=null,this.emitter=new i.vpe,this.eventServiceContainers=[],this.isFocus=!1,this.isInited=!1,this.subEvents=null,this.isChangeSubEvents=!1,Object.defineProperty(this,"_listeners",{configurable:!1,enumerable:!1,value:{}}),Object.defineProperty(this,"_dispatchedEvents",{configurable:!1,enumerable:!1,value:{}}),"function"==typeof this.boot&&this.boot(),"function"==typeof this.onBoot&&this.onBoot()}ngOnInit(){if(this.isFocus=!0,this.isChangeSubEvents=!1,(0,s.aX)(this,"events")&&this.events&&this.moduleKey){const t=this.events.sub(this.moduleKey);t&&t!==this.subEvents&&(this.subEvents=t,this.deactiveEventServiceRegistered(this.subEvents),this.deregisterAllEventService(this.subEvents),this.isChangeSubEvents=!0,"function"==typeof this.onChangeSubEvents&&(this.onChangeSubEvents(),this.activeEventServiceRegistered(this.subEvents)))}this.isInited||("function"==typeof this.initOnce?this.initOnce():"function"==typeof this.initFirst&&this.initFirst()),"function"==typeof this.init&&this.init(),"function"==typeof this.onInit&&this.onInit(),this.isChangeSubEvents=!1}ngOnDestroy(){this.isFocus=!1,"function"==typeof this.destroy&&this.destroy(),"function"==typeof this.onDestroy&&this.onDestroy(),"function"==typeof this.onChangeSubEvents&&this.deactiveEventServiceRegistered(this.subEvents)}registerEventService(t,e,n,i){let o={};if((0,s.Kn)(e)){let t=(0,s.jn)(n)?n:i;for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if("function"==typeof i){let e=n.split("|");o[e[0]]=[[i,e.length>1&&"dispatch"==e[1]||t]]}}}else(0,s.HD)(e)&&(0,s.GV)(n)&&(o[e]=[[n,i]]);let r=-1;for(let s=0;s<this.eventServiceContainers.length;s++){const e=this.eventServiceContainers[s];if(e.service==t){r=s;for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)){const n=o[t][0];void 0===e.events[t]?e.events[t]=[n]:e.events[t].push(n)}break}}-1==r&&this.eventServiceContainers.push({service:t,events:o})}activeEventServiceRegistered(t,e){this.eventServiceContainers.map(n=>{if(n.service==t)if(e)(0,s.HD)(e)?(0,s.kJ)(n.events[e])&&n.events[e].map(t=>{n.service.removeEventListener(e,t[0]),n.service.addEventListener(e,t[0],t[1])}):(0,s.kJ)(e)&&e.map(t=>{(0,s.kJ)(n.events[t])&&n.events[t].map(e=>{n.service.removeEventListener(t,e[0]),n.service.addEventListener(t,e[0],e[1])})});else for(const t in n.events)Object.prototype.hasOwnProperty.call(n.events,t)&&n.events[t].map(e=>{n.service.removeEventListener(t,e[0]),n.service.addEventListener(t,e[0],e[1])})})}deactiveEventServiceRegistered(t,e){this.eventServiceContainers.map(n=>{if(n.service==t)if(e)(0,s.HD)(e)?(0,s.kJ)(n.events[e])&&n.events[e].map(t=>{n.service.removeEventListener(e,t[0])}):(0,s.kJ)(e)&&e.map(t=>{(0,s.kJ)(n.events[t])&&n.events[t].map(e=>{n.service.removeEventListener(t,e[0])})});else for(const t in n.events)Object.prototype.hasOwnProperty.call(n.events,t)&&n.events[t].map(e=>{n.service.removeEventListener(t,e[0])})})}deregisterEventService(t,e,n){this.eventServiceContainers.map((i,o)=>{if(i.service==t)if(e)(0,s.HD)(e)?(0,s.kJ)(i.events[e])&&i.events[e].map((t,s)=>{n?n==t[0]&&(i.service.removeEventListener(e,t[0]),i.events[e].splice(s,1)):(i.service.removeEventListener(e,t[0]),i.events[e].splice(s,1))}):(0,s.kJ)(e)&&e.map(t=>{(0,s.kJ)(i.events[t])&&(i.events[t].map(e=>{i.service.removeEventListener(t,e[0])}),i.events[t].splice(0),delete i.events[t])});else{for(const t in i.events)Object.prototype.hasOwnProperty.call(i.events,t)&&(i.events[t].map(e=>{i.service.removeEventListener(t,e[0])}),i.events[t].splice(0),delete i.events[t]);this.eventServiceContainers.splice(o,1)}})}deregisterAllEventService(t){this.eventServiceContainers.map((e,n)=>{if(!t||t===e.service){for(const t in e.events)Object.prototype.hasOwnProperty.call(e.events,t)&&(e.events[t].map(n=>{e.service.removeEventListener(t,n[0])}),e.events[t].splice(0),delete e.events[t]);this.eventServiceContainers.splice(n,1)}})}__parseEventHandler(t){var e=this;if("function"==typeof t)return t;var n=t||function(t){console.log(t)};if("string"==typeof t){var i=[],s=t.split(":");2==s.length&&(t=s[0],i=s[1].split(",").map(function(t){return t.trim()})),n=function(n){var s=[n];if(i.map(function(t){s.push(t)}),"function"==typeof e[t])return e[t].apply(e,s)}}return n}__addEventListener(t,e,n){var i=this.__parseEventHandler(e);null==this._listeners&&(this._listeners={}),t=String(t).toLowerCase();const s=this._listeners;return void 0===s[t]&&(s[t]=[]),!0===n&&this.__handleDispatchedEvents(t,i),-1===s[t].indexOf(i)&&s[t].push(i),i}__hasEventListener(t,e){if(null==this._listeners)return!1;const n=this._listeners;return void 0!==n[t=String(t).toLowerCase()]&&(!e||-1!==n[t].indexOf(e))}__removeEventListener(t,e){if(null==this._listeners)return!1;t=String(t).toLowerCase();const n=this._listeners[t];if(void 0!==n){if(!e)return this._listeners[t].splice(0,this._listeners[t].length),!0;const i=n.indexOf(e);if(-1!==i)return n.splice(i,1),!0}return!1}__dispatchEvent(t,e,n){if(null==this._listeners||!t)return null;var i={};if((0,s.HD)(t))i.type=t,e&&(i.data=e);else{if(!(0,s.Kn)(t))return!1;if(!(i=t).type)return!1;!i.data&&e&&(i.data=e),(0,s.jn)(e)&&void 0===n&&(n=e)}i.constructor===Object&&(i.type=String(i.type).toLowerCase());const o=this._listeners[i.type];var r=!0;if(i.target||(i.target=this),i.stopImmediatePropagation||(i.stopImmediatePropagation=function(){r=!1}),!0===n&&this.__addDispatchedEvent(i),void 0!==o){const t=o.slice(0);for(var a=[],c=0,l=t.length;c<l;c++){let e=t[c].call(this,i);if(!r)break;void 0!==e&&a.push(e)}return r&&a.length?1==a.length&&1==t.length?a[0]:a:r}}on(t,e,n){if((0,s.Kn)(t)){var i={};const r=t;var o=(0,s.jn)(e)?e:!!(0,s.jn)(n)&&n;for(const e in r)if(Object.hasOwnProperty.call(r,e)){const n=t[e];if((0,s.mf)(n)||(0,s.HD)(n)){const t=this.__addEventListener(e,n,o);t&&(i[e]=t)}}return i}return this.__addEventListener(t,e,n)}off(t,e){return this.__removeEventListener(t,e)}__addDispatchedEvent(t){return void 0===this._dispatchedEvents[t.type]&&(this._dispatchedEvents[t.type]=[]),this._dispatchedEvents[t.type].push(t),this}__handleDispatchedEvents(t,e){var n=this._dispatchedEvents[t];if(void 0!==n){const t=n.slice(0);for(var i=0,s=t.length;i<s;i++){var o=e.call(this,t[i]);if(!1===o)return o}}}listen(t){var e=this.__dispatchEvent(t),n=!0;"function"==typeof this.eventHandler&&(n=this.eventHandler(t)),!1!==e&&!1!==n&&this.emit(t)}emit(t,e,n){var i={};if((0,s.HD)(t))i.type=t,e&&(i.data=e);else{if(!(0,s.Kn)(t))return!1;if(!(i=t).type)return!1;!i.data&&e&&(i.data=e),(0,s.jn)(e)&&void 0===n&&(n=e)}i.constructor===Object&&(i.type=String(i.type).toLowerCase()),this.emitter.emit(i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["ng-component"]],inputs:{moduleKey:"moduleKey",eventService:"eventService"},outputs:{emitter:"emitter"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})()},29813:function(t,e,n){n.d(e,{Q:function(){return o}});var i=n(37716),s=n(83586);let o=(()=>{class t{constructor(){this.name="",this.value="",this.label="",this.placeholder="",this.valueType=null,this.config=null,this.attach=null,this.hasAttach=!1,this.old="",this.subcribe=new i.vpe,this.defaultValues={name:"",label:"",value:"",placeholder:""}}onChange(t){(0,s.Kn)(t)&&Object.prototype.hasOwnProperty.call(t,"value")&&(this.value=t.value),(0,s.Kn)(this.old)&&(0,s.Kn)(this.value)?JSON.stringify(this.old)!==JSON.stringify(this.value)&&this.emit():this.old!==this.value&&this.emit()}onAttachChange(t){this.subcribe.emit({name:t.name,value:t.value})}emit(){var t=(0,s.Kn)(this.value)?(0,s.MP)({},this.value):this.value;"function"==typeof this.onInpValChange&&this.onInpValChange(t),this.subcribe.emit({name:this.name,value:t,old:this.old}),this.old=t}set val(t){this.value=t,this.onChange({type:"change",value:t})}inpInit(){var t=this,e=["name","label","value","placeholder","valueType"];this.config&&(0,s.Kn)(this.config)&&!(0,s.xb)(this.config)&&(void 0!==t.configProps&&(0,s.kJ)(t.configProps)&&t.configProps.map(t=>-1==e.indexOf(t)?e.push(t):t),e.map(e=>{Object.prototype.hasOwnProperty.call(t,e)&&Object.prototype.hasOwnProperty.call(this.config,e)&&t[e]===this.defaultValues[e]&&(t[e]=this.config[e])}),this.label||(this.label=this.name),this.config.attach&&(0,s.Kn)(this.config.attach)&&!(0,s.xb)(this.config.attach))&&((0,s.Kn)(this.attach)||(this.attach={}),["name","label","value","placeholder","min","max","step"].map(t=>{Object.prototype.hasOwnProperty.call(this.attach,t)?Object.prototype.hasOwnProperty.call(this.config.attach,t)&&this.attach[t]===this.defaultValues[t]&&(this.attach[t]=this.config.attach[t]):Object.prototype.hasOwnProperty.call(this.config.attach,t)&&(this.attach[t]=this.config.attach[t])})),(0,s.xb)(this.attach)||(this.hasAttach=!0)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["ng-component"]],inputs:{name:"name",value:"value",label:"label",placeholder:"placeholder",valueType:"valueType",config:"config",attach:"attach"},outputs:{subcribe:"subcribe"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})()},72477:function(t,e,n){n.d(e,{J:function(){return p}});var i=n(83586),s=n(29813),o=n(37716),r=n(16704),a=n(90343),c=n(3679),l=n(29790);const h=function(){return{xs:8,sm:16,md:24,lg:32}};let p=(()=>{class t extends s.Q{constructor(t){super(),this.cd=t,this.degreSymbol="\xb0",this._value={x:0,y:0,z:0},this.canSync=!1,this.formatterX=t=>`x: ${t} ${this.degreSymbol}`,this.parserX=t=>i.W3.replace(t,["x",":",this.degreSymbol," "],""),this.formatterY=t=>`y: ${t} ${this.degreSymbol}`,this.parserY=t=>i.W3.replace(t,["y",":",this.degreSymbol," "],""),this.formatterZ=t=>`z: ${t} ${this.degreSymbol}`,this.parserZ=t=>i.W3.replace(t,["z",":",this.degreSymbol," "],"")}ngOnInit(){this.inpInit(),this.syncFromParent(),this.canSync=!0,this.events&&this.events.on("props.rotation.change",t=>{t.value&&(this.value=t.value),this.syncFromParent()})}syncFromParent(){this._value={x:(0,i.DR)(this.value.x),y:(0,i.DR)(this.value.y),z:(0,i.DR)(this.value.z)},this.cd.detectChanges()}ngOnChanges(t){this.canSync&&t.value&&this.syncFromParent()}updateVector(t,e){this.canSync=!1,(0,i.MP)(this.value,{x:(0,i.S3)(this._value.x),y:(0,i.S3)(this._value.y),z:(0,i.S3)(this._value.z)}),this.emit(),this.canSync=!0}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.sBO))},t.\u0275cmp=o.Xpm({type:t,selectors:[["inp-rotation-group"]],inputs:{events:"events"},features:[o.qOj,o.TTD],decls:13,vars:20,consts:[[1,"label"],["nz-row","",3,"nzGutter"],["nz-col","",1,"gutter-row",3,"nzSpan"],[1,"inner-box"],["name","x",3,"ngModel","nzStep","nzFormatter","nzParser","ngModelChange"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o._uU(1),o.ALo(2,"translate"),o.qZA(),o.TgZ(3,"div",1),o.TgZ(4,"div",2),o.TgZ(5,"div",3),o.TgZ(6,"nz-input-number",4),o.NdJ("ngModelChange",function(t){return e._value.x=t})("ngModelChange",function(t){return e.updateVector("x",t)}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"div",2),o.TgZ(8,"div",3),o.TgZ(9,"nz-input-number",4),o.NdJ("ngModelChange",function(t){return e._value.y=t})("ngModelChange",function(t){return e.updateVector("y",t)}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"div",2),o.TgZ(11,"div",3),o.TgZ(12,"nz-input-number",4),o.NdJ("ngModelChange",function(t){return e._value.z=t})("ngModelChange",function(t){return e.updateVector("z",t)}),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(1),o.Oqu(o.lcZ(2,17,e.label)),o.xp6(2),o.Q6J("nzGutter",o.DdM(19,h)),o.xp6(1),o.Q6J("nzSpan",8),o.xp6(2),o.Q6J("ngModel",e._value.x)("nzStep",.01)("nzFormatter",e.formatterX)("nzParser",e.parserX),o.xp6(1),o.Q6J("nzSpan",8),o.xp6(2),o.Q6J("ngModel",e._value.y)("nzStep",.01)("nzFormatter",e.formatterY)("nzParser",e.parserY),o.xp6(1),o.Q6J("nzSpan",8),o.xp6(2),o.Q6J("ngModel",e._value.z)("nzStep",.01)("nzFormatter",e.formatterZ)("nzParser",e.parserZ))},directives:[r.SK,r.t3,a._,c.JJ,c.On],pipes:[l.X$],styles:["[_nghost-%COMP%]{display:block;margin-top:10px;margin-bottom:15px}.label[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:10px;padding-left:10px}"]}),t})()},31573:function(t,e,n){n.d(e,{i:function(){return h}});var i=n(83586),s=n(29813),o=n(37716),r=n(16704),a=n(12099),c=n(29790);const l=function(){return{xs:8,sm:16,md:24,lg:32}};let h=(()=>{class t extends s.Q{constructor(t){super(),this.cd=t,this.options=null,this.configProps=["options"]}ngOnInit(){(0,i.MP)(this.defaultValues,{options:null}),this.inpInit(),this.cd.detectChanges()}ngOnChanges(t){t.options&&this.cd.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.sBO))},t.\u0275cmp=o.Xpm({type:t,selectors:[["inp-select-group"]],inputs:{options:"options"},features:[o.qOj,o.TTD],decls:8,vars:11,consts:[["nz-row","",1,"input-group",3,"nzGutter"],["nz-col","",1,"gutter-row",3,"nzSpan"],[1,"inner-box"],[1,"inner-box","text-right"],[3,"name","value","options","valueType","valueChange","subcribe"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA(),o.TgZ(5,"div",1),o.TgZ(6,"div",3),o.TgZ(7,"inp-select",4),o.NdJ("valueChange",function(t){return e.value=t})("subcribe",function(t){return e.onChange(t)}),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.Q6J("nzGutter",o.DdM(10,l)),o.xp6(1),o.Q6J("nzSpan",10),o.xp6(2),o.Oqu(e.label?e.label:o.lcZ(4,8,e.name)),o.xp6(2),o.Q6J("nzSpan",14),o.xp6(2),o.Q6J("name",e.name)("value",e.value)("options",e.options)("valueType",e.valueType))},directives:[r.SK,r.t3,a.Q],pipes:[c.X$],styles:["[_nghost-%COMP%]{display:block;margin-top:10px;margin-bottom:15px}.text-right[_ngcontent-%COMP%]{text-align:right}"]}),t})()},51131:function(t,e,n){n.d(e,{d:function(){return f}});var i=n(29813),s=n(37716),o=n(16704),r=n(48453),a=n(3679),c=n(84514),l=n(60945);function h(t,e){1&t&&s._UZ(0,"i",3)}function p(t,e){1&t&&s._UZ(0,"i",4)}let d=(()=>{class t{constructor(){this.name="checked",this.value=!1,this.label="",this.old=!1,this.subcribe=new s.vpe}ngOnInit(){}onChangeState(t){this.emit()}emit(){this.subcribe.emit({name:this.name,value:this.value,old:this.old}),this.old=this.value}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["inp-switch"]],inputs:{name:"name",value:"value",label:"label"},outputs:{subcribe:"subcribe"},decls:5,vars:3,consts:[[3,"ngModel","nzCheckedChildren","nzUnCheckedChildren","ngModelChange"],["checkedTemplate",""],["unCheckedTemplate",""],["nz-icon","","nzType","check"],["nz-icon","","nzType","close"]],template:function(t,e){if(1&t&&(s.TgZ(0,"nz-switch",0),s.NdJ("ngModelChange",function(t){return e.value=t})("ngModelChange",function(t){return e.onChangeState(t)}),s.qZA(),s.YNc(1,h,1,0,"ng-template",null,1,s.W1O),s.YNc(3,p,1,0,"ng-template",null,2,s.W1O)),2&t){const t=s.MAs(2),n=s.MAs(4);s.Q6J("ngModel",e.value)("nzCheckedChildren",t)("nzUnCheckedChildren",n)}},directives:[r.i,a.JJ,a.On,c.w,l.Ls],styles:[".input-group[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}"]}),t})();var g=n(29790);const u=function(){return{xs:8,sm:16,md:24,lg:32}};let f=(()=>{class t extends i.Q{constructor(){super()}ngOnInit(){this.inpInit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["inp-switch-group"]],features:[s.qOj],decls:8,vars:9,consts:[["nz-row","",1,"input-group",3,"nzGutter"],["nz-col","",1,"gutter-row",3,"nzSpan"],[1,"inner-box"],[1,"inner-box","text-right"],[3,"name","value","valueChange","subcribe"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"div",1),s.TgZ(6,"div",3),s.TgZ(7,"inp-switch",4),s.NdJ("valueChange",function(t){return e.value=t})("subcribe",function(t){return e.onChange(t)}),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.Q6J("nzGutter",s.DdM(8,u)),s.xp6(1),s.Q6J("nzSpan",18),s.xp6(2),s.Oqu(s.lcZ(4,6,e.label)),s.xp6(2),s.Q6J("nzSpan",6),s.xp6(2),s.Q6J("name",e.name)("value",e.value))},directives:[o.SK,o.t3,d],pipes:[g.X$],styles:["[_nghost-%COMP%]{display:block;margin-top:10px;margin-bottom:15px}.text-right[_ngcontent-%COMP%]{text-align:right}"]}),t})()},78950:function(t,e,n){n.d(e,{z:function(){return c}});var i=n(29813),s=n(37716),o=n(57674),r=n(3679),a=n(29790);let c=(()=>{class t extends i.Q{constructor(){super()}ngOnInit(){this.inpInit(),this.old=this.value}onChangeValue(t){this.old!==this.value&&this.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["inp-text-group"]],features:[s.qOj],decls:6,vars:7,consts:[[1,"inner-box"],[1,"input-wrapper"],["nz-input","",3,"placeholder","ngModel","ngModelChange","input","change"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s._uU(1),s.ALo(2,"translate"),s.qZA(),s.TgZ(3,"div",1),s.TgZ(4,"input",2),s.NdJ("ngModelChange",function(t){return e.value=t})("input",function(t){return e.onChangeValue(t)})("change",function(t){return e.onChangeValue(t)}),s.ALo(5,"translate"),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.Oqu(e.label?e.label:s.lcZ(2,3,e.name)),s.xp6(3),s.s9C("placeholder",e.placeholder?e.placeholder:s.lcZ(5,5,e.name)),s.Q6J("ngModel",e.value))},directives:[o.Zp,r.Fj,r.JJ,r.On],pipes:[a.X$],styles:["[_nghost-%COMP%]{display:block;margin-top:10px;margin-bottom:15px}"]}),t})()},50416:function(t,e,n){n.d(e,{I:function(){return w}});var i=n(29813),s=n(37716),o=n(38583),r=n(74192),a=n(16704),c=n(90343),l=n(3679);const h=function(){return{xs:8,sm:16,md:24,lg:32}};let p=(()=>{class t extends r.H{constructor(){super(),this.formatterX=t=>`x: ${t}`,this.parserX=t=>t.replace("x: ",""),this.formatterY=t=>`y: ${t}`,this.parserY=t=>t.replace("y: ",""),this.formatterZ=t=>`z: ${t}`,this.parserZ=t=>t.replace("z: ","")}ngOnInit(){}updateVector(t,e){this.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["inp-vector3"]],features:[s.qOj],decls:10,vars:17,consts:[["nz-row","",3,"nzGutter"],["nz-col","",1,"gutter-row",3,"nzSpan"],[1,"inner-box"],["name","x",3,"ngModel","nzStep","nzFormatter","nzParser","ngModelChange"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"nz-input-number",3),s.NdJ("ngModelChange",function(t){return e.value.x=t})("ngModelChange",function(t){return e.updateVector("x",t)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(4,"div",1),s.TgZ(5,"div",2),s.TgZ(6,"nz-input-number",3),s.NdJ("ngModelChange",function(t){return e.value.y=t})("ngModelChange",function(t){return e.updateVector("y",t)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"div",1),s.TgZ(8,"div",2),s.TgZ(9,"nz-input-number",3),s.NdJ("ngModelChange",function(t){return e.value.z=t})("ngModelChange",function(t){return e.updateVector("z",t)}),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.Q6J("nzGutter",s.DdM(16,h)),s.xp6(1),s.Q6J("nzSpan",8),s.xp6(2),s.Q6J("ngModel",e.value.x)("nzStep",.001)("nzFormatter",e.formatterX)("nzParser",e.parserX),s.xp6(1),s.Q6J("nzSpan",8),s.xp6(2),s.Q6J("ngModel",e.value.y)("nzStep",.001)("nzFormatter",e.formatterY)("nzParser",e.parserY),s.xp6(1),s.Q6J("nzSpan",8),s.xp6(2),s.Q6J("ngModel",e.value.z)("nzStep",.001)("nzFormatter",e.formatterZ)("nzParser",e.parserZ))},directives:[a.SK,a.t3,c._,l.JJ,l.On],styles:[""]}),t})();var d=n(14453),g=n(29374),u=n(84514),f=n(29790);function m(t,e){1&t&&s.GkF(0)}const v=function(){return{xs:8,sm:16,md:24,lg:32}};function _(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",4),s.TgZ(1,"div",5),s.TgZ(2,"div",6),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"div",5),s.TgZ(6,"div",7),s.TgZ(7,"button",8),s.NdJ("click",function(){return s.CHM(t),s.oxw().setCenter()}),s._uU(8,"Center"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("nzGutter",s.DdM(7,v)),s.xp6(1),s.Q6J("nzSpan",16),s.xp6(2),s.Oqu(s.lcZ(4,5,t.label)),s.xp6(2),s.Q6J("nzSpan",8),s.xp6(2),s.Q6J("nzSize","small")}}function b(t,e){if(1&t&&(s.TgZ(0,"div",6),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Oqu(s.lcZ(2,1,t.label))}}let w=(()=>{class t extends i.Q{constructor(t){super(),this.cd=t,this.btnCenter=!1,this.canSync=!1}ngOnInit(){this.inpInit(),this.canSync=!0}setCenter(){this.value.x=0,this.value.z=0,this.emit(),this.cd.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.sBO))},t.\u0275cmp=s.Xpm({type:t,selectors:[["inp-vector3-group"]],inputs:{btnCenter:"btnCenter"},features:[s.qOj],decls:6,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["centerTemplate",""],["labelTemplate",""],[3,"name","value","valueChange","subcribe"],["nz-row","",3,"nzGutter"],["nz-col","",1,"gutter-row",3,"nzSpan"],[1,"label"],[1,"text-right"],["nz-button","","nzType","default",3,"nzSize","click"]],template:function(t,e){if(1&t&&(s.YNc(0,m,1,0,"ng-container",0),s.YNc(1,_,9,8,"ng-template",null,1,s.W1O),s.YNc(3,b,3,3,"ng-template",null,2,s.W1O),s.TgZ(5,"inp-vector3",3),s.NdJ("valueChange",function(t){return e.value=t})("subcribe",function(t){return e.onChange(t)}),s.qZA()),2&t){const t=s.MAs(2),n=s.MAs(4);s.Q6J("ngIf",e.btnCenter)("ngIfThen",t)("ngIfElse",n),s.xp6(5),s.Q6J("name",e.name)("value",e.value)}},directives:[o.O5,p,a.SK,a.t3,d.ix,g.dQ,u.w],pipes:[f.X$],styles:["[_nghost-%COMP%]{display:block;margin-top:10px;margin-bottom:15px}.label[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:10px;padding-left:10px}.text-right[_ngcontent-%COMP%]{text-align:right}"]}),t})()},74192:function(t,e,n){n.d(e,{H:function(){return o}});var i=n(37716),s=n(83586);let o=(()=>{class t{constructor(){this.name="input",this.value="",this.label="",this.placeholder="",this.old="",this.subcribe=new i.vpe}parseValue(t){switch(this.valueType){case"number":return Number(t);case"boolean":return(0,s.jn)(t)?t:Boolean(t)}return t}onChange(t){(0,s.Kn)(t)&&Object.prototype.hasOwnProperty.call(t,"value")&&(this.value=t.value),(0,s.Kn)(this.old)&&(0,s.Kn)(this.value)?JSON.stringify(this.old)!==JSON.stringify(this.value)&&this.emit():this.old!==this.value&&this.emit()}emit(){var t=(0,s.Kn)(this.value)?(0,s.MP)({},this.value):this.value;this.subcribe.emit({name:this.name,value:t,old:this.old}),this.old=t}set val(t){this.value=t,this.onChange({type:"change",value:t})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["ng-component"]],inputs:{name:"name",value:"value",label:"label",placeholder:"placeholder",valueType:"valueType"},outputs:{subcribe:"subcribe"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})()},57133:function(t,e,n){n.d(e,{y:function(){return C}});var i=n(74192),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(c){s=!0,o=c}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var n=this;n.length<t;)n=e+n;return n};var a={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return n||"0"}var l=function(){function t(e,n,i,o){s(this,t);var a=this;if(void 0!==e)if(Array.isArray(e))this.rgba=e;else if(void 0===i){var c=e&&""+e;c&&function(e){if(e.startsWith("hsl")){var n=e.match(/([\-\d\.e]+)/g).map(Number),i=r(n,4),s=i[0],o=i[1],c=i[2],l=i[3];void 0===l&&(l=1),a.hsla=[s/=360,o/=100,c/=100,l]}else if(e.startsWith("rgb")){var h=e.match(/([\-\d\.e]+)/g).map(Number),p=r(h,4),d=p[3];void 0===d&&(d=1),a.rgba=[p[0],p[1],p[2],d]}else a.rgba=e.startsWith("#")?t.hexToRgb(e):t.nameToRgb(e)||t.hexToRgb(e)}(c.toLowerCase())}else this.rgba=[e,n,i,void 0===o?1:o]}return o(t,[{key:"printRGB",value:function(t){var e=(t?this.rgba:this.rgba.slice(0,3)).map(function(t,e){return c(t,3===e?3:0)});return t?"rgba("+e+")":"rgb("+e+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],n=["","%","%",""],i=(t?this.hsla:this.hsla.slice(0,3)).map(function(t,i){return c(t*e[i],3===i?3:1)+n[i]});return t?"hsla("+i+")":"hsl("+i+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map(function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)}).map(function(t){return t.padStart(2,"0")}).join("")},set:function(e){this.rgba=t.hexToRgb(e)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var n=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(t){return parseInt(t,16)});return n[3]=n[3]/255,n}},{key:"nameToRgb",value:function(e){var n=e.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),i=a[n];return void 0===i?i:t.hexToRgb(i.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=r(t,4),n=e[0],i=e[1],s=e[2],o=e[3];n/=255,i/=255,s/=255;var a=Math.max(n,i,s),c=Math.min(n,i,s),l=void 0,h=void 0,p=(a+c)/2;if(a===c)l=h=0;else{var d=a-c;switch(h=p>.5?d/(2-a-c):d/(a+c),a){case n:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-n)/d+2;break;case s:l=(n-i)/d+4}l/=6}return[l,h,p,o]}},{key:"hslToRgb",value:function(t){var e=r(t,4),n=e[0],i=e[1],s=e[2],o=e[3],a=void 0,c=void 0,l=void 0;if(0===i)a=c=l=s;else{var h=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},p=s<.5?s*(1+i):s+i-s*i,d=2*s-p;a=h(d,p,n+1/3),c=h(d,p,n),l=h(d,p,n-1/3)}var g=[255*a,255*c,255*l].map(Math.round);return g[3]=o,g}}]),t}(),h=function(){function t(){s(this,t),this._events=[]}return o(t,[{key:"add",value:function(t,e,n){t.addEventListener(e,n,!1),this._events.push({target:t,type:e,handler:n})}},{key:"remove",value:function(e,n,i){this._events=this._events.filter(function(s){var o=!0;return e&&e!==s.target&&(o=!1),n&&n!==s.type&&(o=!1),i&&i!==s.handler&&(o=!1),o&&t._doRemove(s.target,s.type,s.handler),!o})}},{key:"destroy",value:function(){this._events.forEach(function(e){return t._doRemove(e.target,e.type,e.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(t,e,n){t.removeEventListener(e,n,!1)}}]),t}();function p(t,e,n){var i=!1;function s(t,e,n){return Math.max(e,Math.min(t,n))}function o(t,o,r){if(r&&(i=!0),i){t.preventDefault();var a=e.getBoundingClientRect(),c=a.width,l=a.height,h=o.clientY,p=s(o.clientX-a.left,0,c),d=s(h-a.top,0,l);n(p/c,d/l)}}function r(t,e){1===(void 0===t.buttons?t.which:t.buttons)?o(t,t,e):i=!1}function a(t,e){1===t.touches.length?o(t,t.touches[0],e):i=!1}t.add(e,"mousedown",function(t){r(t,!0)}),t.add(e,"touchstart",function(t){a(t,!0)}),t.add(window,"mousemove",r),t.add(e,"touchmove",a),t.add(window,"mouseup",function(t){i=!1}),t.add(e,"touchend",function(t){i=!1}),t.add(e,"touchcancel",function(t){i=!1})}var d="keydown",g="mousedown",u="focusin";function f(t,e){return(e||document).querySelector(t)}function m(t){t.preventDefault(),t.stopPropagation()}function v(t,e,n,i,s){t.add(e,d,function(t){n.indexOf(t.key)>=0&&(s&&m(t),i(t))})}var _=document.createElement("style");_.textContent=".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}",document.documentElement.firstElementChild.appendChild(_);var b=function(){function t(e){s(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new h,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return o(t,[{key:"setOptions",value:function(t){var e=this;if(t){var n=this.settings;if(t instanceof HTMLElement)n.parent=t;else{n.parent&&t.parent&&n.parent!==t.parent&&(this._events.remove(n.parent),this._popupInited=!1),function(t,e,n){for(var i in t)e[i]=t[i]}(t,n),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var i=t.color||t.colour;i&&this._setColor(i)}var s=n.parent;if(s&&n.popup&&!this._popupInited){var o=function(t){return e.openHandler(t)};this._events.add(s,"click",o),v(this._events,s,[" ","Spacebar","Enter"],o),this._popupInited=!0}else t.parent&&!n.popup&&this.show()}}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&t.type===d?this._domEdit:this.domElement;setTimeout(function(){return e.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var e=t&&t.type,n=!1;t?e===g||e===u?t.timeStamp>(this.__containedEvent||0)+100&&(n=!0):(m(t),n=!0):n=!0,n&&this.hide()&&(this.settings.parent.style.pointerEvents="",e!==g&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"==typeof t&&(t=t.trim()),t){e=e||{};var n=void 0;try{n=new l(t)}catch(s){if(e.failSilently)return;throw s}if(!this.settings.alpha){var i=n.hsla;i[3]=1,n.hsla=i}this.colour=this.color=n,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var t=this._toggleDOM(!0);return this._setPosition(),t}var e=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}(this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>');return this.domElement=e,this._domH=f(".picker_hue",e),this._domSL=f(".picker_sl",e),this._domA=f(".picker_alpha",e),this._domEdit=f(".picker_editor input",e),this._domSample=f(".picker_sample",e),this._domOkay=f(".picker_done button",e),this._domCancel=f(".picker_cancel button",e),e.classList.add("layout_"+this.settings.layout),this.settings.alpha||e.classList.add("no_alpha"),this.settings.editor||e.classList.add("no_editor"),this.settings.cancelButton||e.classList.add("no_cancel"),this._ifPopup(function(){return e.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,n=this.domElement,i=this._events;function s(t,e,n){i.add(t,e,n)}s(n,"click",function(t){return t.preventDefault()}),p(i,this._domH,function(t,n){return e._setHSLA(t)}),p(i,this._domSL,function(t,n){return e._setHSLA(null,t,1-n)}),this.settings.alpha&&p(i,this._domA,function(t,n){return e._setHSLA(null,null,null,1-n)});var o=this._domEdit;s(o,"input",function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})}),s(o,"focus",function(t){var e=this;e.selectionStart===e.selectionEnd&&e.select()}),this._ifPopup(function(){var e=function(e){return t.closeHandler(e)};s(window,g,e),s(window,u,e),v(i,n,["Esc","Escape"],e);var o=function(e){t.__containedEvent=e.timeStamp};s(n,g,o),s(n,u,o),s(t._domCancel,"click",e)});var r=function(e){t._ifPopup(function(){return t.closeHandler(e)}),t.onDone&&t.onDone(t.colour)};s(this._domOkay,"click",r),v(i,n,["Enter"],r)}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup(function(n){"static"===getComputedStyle(t).position&&(t.style.position="relative");var i=!0===n?"popup_right":"popup_"+n;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(t){t===i?e.classList.add(t):e.classList.remove(t)}),e.classList.add(i)})}},{key:"_setHSLA",value:function(t,e,n,i,s){s=s||{};var o=this.colour,r=o.hsla;[t,e,n,i].forEach(function(t,e){(t||0===t)&&(r[e]=t)}),o.hsla=r,this._updateUI(s),this.onChange&&!s.silent&&this.onChange(o)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,n=e.hsla,i="hsl("+360*n[0]+", 100%, 50%)",s=e.hslString,o=e.hslaString,r=this._domSL,a=this._domA,c=f(".picker_selector",this._domH),l=f(".picker_selector",r),h=f(".picker_selector",a);m(0,c,n[0]),this._domSL.style.backgroundColor=this._domH.style.color=i,m(0,l,n[1]),v(0,l,1-n[2]),r.style.color=s,v(0,h,1-n[3]);var p=s,d=p.replace("hsl","hsla").replace(")",", 0)");if(this._domA.style.backgroundImage="linear-gradient("+[p,d]+"), url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",!t.fromEditor){var g=this.settings.alpha,u=void 0;switch(this.settings.editorFormat){case"rgb":u=e.printRGB(g);break;case"hsl":u=e.printHSL(g);break;default:u=e.printHex(g)}this._domEdit.value=u}this._domSample.style.color=o}function m(t,e,n){e.style.left=100*n+"%"}function v(t,e,n){e.style.top=100*n+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var n=t?"":"none",i=e.style.display!==n;return i&&(e.style.display=n),i}}],[{key:"StyleElement",get:function(){return _}}]),t}(),w=n(83586),y=n(49335),x=n(37716);let C=(()=>{class t extends i.H{constructor(t){super(),this.elemRef=t,this.transparentBase64Image=y.lY}ngOnInit(){}ngAfterViewInit(){this.value=this.value&&(0,w.Kn)(this.value)?this.value.isColor?"#"+this.value.getHexString():"color"==this.value.$three?this.value.color:"#000":this.value;var t=this;new b({parent:this.elemRef.nativeElement.querySelector(".output-color"),color:this.value,alpha:!1,editor:!0,layout:"default",popup:"bottom",editorFormat:"hex",cancelButton:!1,onChange:function(t){},onDone:function(e){var n=e.hex.substr(0,7);t.value=n,t.emit()},onOpen:function(t){},onClose:function(t){}})}}return t.\u0275fac=function(e){return new(e||t)(x.Y36(x.SBq))},t.\u0275cmp=x.Xpm({type:t,selectors:[["inp-color"]],features:[x.qOj],decls:2,vars:4,consts:[[1,"output","output-color"],[1,"thumb",3,"src","alt"]],template:function(t,e){1&t&&(x.TgZ(0,"div",0),x._UZ(1,"img",1),x.qZA()),2&t&&(x.Udp("background",e.value),x.xp6(1),x.s9C("src",e.transparentBase64Image,x.LSH),x.s9C("alt",e.value))},styles:[".output-color[_ngcontent-%COMP%]{width:40px;height:40px;display:inline-block;border:.5px solid #dadada;border-radius:5px}.output-color[_ngcontent-%COMP%]   img.thumb[_ngcontent-%COMP%]{width:38px;height:38px;cursor:pointer}"]}),t})()},12099:function(t,e,n){n.d(e,{Q:function(){return h}});var i=n(83586),s=n(74192),o=n(37716),r=n(80269),a=n(3679),c=n(38583);function l(t,e){if(1&t&&o._UZ(0,"nz-option",2),2&t){const t=e.$implicit;o.Q6J("nzValue",t.value)("nzLabel",t.label)}}let h=(()=>{class t extends s.H{constructor(t){super(),this.cd=t,this.fullwidth=!1,this._options=[]}ngOnChanges(t){t.options&&this.syncFromParent()}ngOnInit(){this.syncFromParent()}syncFromParent(){let t=!1;if((0,i.kJ)(this.options))this._options=[],this.options.map(t=>{(0,i.Kn)(t)?Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"label")&&this._options.push(t):((0,i.HD)(t)||(0,i.hj)(t))&&this._options.push({value:t,label:t})});else if((0,i.Kn)(this.options)){let t=!1;this._options.splice(0);for(const e in this.options)if(Object.prototype.hasOwnProperty.call(this.options,e)){const n=this.options[e];(0,i.Kn)(n)?Object.prototype.hasOwnProperty.call(n,"value")&&Object.prototype.hasOwnProperty.call(n,"label")&&this._options.push(n):(0,i.HD)(n)&&(t=!0,this._options.push({value:e,label:n}))}t&&(this.value=String(this.value))}this._options.length&&(this._options.map(e=>{e.value==this.value&&(t=!0)}),t||(this.value=this._options[0].value))}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.sBO))},t.\u0275cmp=o.Xpm({type:t,selectors:[["inp-select"]],inputs:{fullwidth:"fullwidth",options:"options"},features:[o.qOj,o.TTD],decls:2,vars:4,consts:[[3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(t,e){1&t&&(o.TgZ(0,"nz-select",0),o.NdJ("ngModelChange",function(t){return e.value=t})("ngModelChange",function(t){return e.onChange(t)}),o.YNc(1,l,1,2,"nz-option",1),o.qZA()),2&t&&(o.ekj("width-100",e.fullwidth),o.Q6J("ngModel",e.value),o.xp6(1),o.Q6J("ngForOf",e._options))},directives:[r.Vq,a.JJ,a.On,c.sg,r.Ip],styles:["nz-select.width-100[_ngcontent-%COMP%]{width:100%}"]}),t})()},73074:function(t,e,n){n.d(e,{r:function(){return l}});var i=n(37716),s=n(74192),o=n(49335),r=n(83586),a=n(21464),c=n(483);let l=(()=>{class t extends s.H{constructor(t,e){super(),this.libraryService=t,this.cd=e,this.outputImage=o.lY,this.listType="list",this.modalCancelSelect=new i.vpe,this.onCloseLibrary=new i.vpe}ngOnInit(){this.value&&(this.image=this.value)}set image(t){if((0,r.HD)(t))this.outputImage=t;else if((0,r.Kn)(t))if(t.image){var e=a.Z.get2DMap(t,100,100);e&&(this.outputImage=e)}else{var n=this;if(null!=t&&(0,r.Kn)(t)&&t.file){var i="";t.path?(i="/"==t.substr(t.path.length-1,1)?t.path:t.path+"/","/"==t.file.substr(0,1)?i+=t.file.substr(1):i+=t.file):i=t.file,"hdr"!=t.format&&"hdr"!=t.extension?(0,r.tg)(i,60,60,function(t){n.outputImage=t}):o.$o.LoadEnv({format:"hdr",file:i},(t,e)=>{var n=a.Z.get2DMap(e,240,120);n&&(this.outputImage=n,this.cd.detectChanges())})}}}chooseTexture(){this.libraryService.open({title:this.name,mode:"simple",listType:this.listType},t=>{this.onSelectImage(t),this.onCloseLibrary.emit(!0)},()=>{this.modalCancelSelect.emit(!0),this.onCloseLibrary.emit(!0)})}onSelectImage(t){this.outputImage=t.thumbnail,this.value=t.source,this.subcribe.emit({name:this.name,value:this.value,old:this.old,file:t}),this.old=this.value,"hdr"==t.extension&&(this.image={file:t.source,format:"hdr"})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(c.P),i.Y36(i.sBO))},t.\u0275cmp=i.Xpm({type:t,selectors:[["inp-texture"]],inputs:{listType:"listType"},outputs:{modalCancelSelect:"modalCancelSelect",onCloseLibrary:"onCloseLibrary"},features:[i.qOj],decls:2,vars:1,consts:[[1,"output","output-texture",3,"click"],["alt","Texture",1,"thumb",3,"src"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.NdJ("click",function(){return e.chooseTexture()}),i._UZ(1,"img",1),i.qZA()),2&t&&(i.xp6(1),i.s9C("src",e.outputImage,i.LSH))},styles:[".output-texture[_ngcontent-%COMP%]{width:40px;height:40px;display:inline-block;border:.5px solid #dadada;border-radius:5px}.output-texture[_ngcontent-%COMP%]   img.thumb[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:5px;cursor:pointer}"]}),t})()},4388:function(t,e,n){n.d(e,{O:function(){return O}});var i=n(49335),s=n(21464),o=n(83586),r=n(25917),a=n(37716),c=n(4782);const l="images",h=["images","list","foreground","background"];let p=(()=>{class t{constructor(t){this.httpService=t}getAll(t){return this.httpService.get(l+"/list.json",t)}getImageFromUrl(t,e){return this.httpService.get(l+"/list.json",e)}getImages(t,e){return(0,o.d3)(h,t)?("image"==t&&(t="list"),this.httpService.get(l+"/"+t+".json",e)):(0,r.of)({data:[],pageCount:0,total:0,page:1,count:0,message:"image list not found",status:0})}getBackgrounds(t){return this.httpService.get(l+"/background.json",t)}getForegrounds(t){return this.httpService.get(l+"/foreground.json",t)}get(t){return this.httpService.get(`${l}/${t}.json`)}create(t){return this.httpService.post(l+"/actions.json",t)}update(t){return this.httpService.patch(`${l}/actions.json`,t)}delete(t){return this.httpService.delete(`${l}/actions.json`)}search(t){return this.httpService.get(`${l}/list.json`,t)}searchNounProject(t){return this.httpService.get(`${l}/search/nounproject`,t)}render(t){return this.httpService.download("Images/render",t)}getImageData(t){return this.httpService.getOut(t)}useImage(t){return this.httpService.post(`${l}/${t}/use`,{},!1)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(c.O))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=n(76610),g=n(483),u=n(26214),f=n(38583),m=n(14453),v=n(29374),_=n(84514),b=n(29790);function w(t,e){if(1&t&&a._uU(0),2&t){const t=a.oxw();a.Oqu(t.title)}}function y(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",6),a.NdJ("click",function(){a.CHM(t);const n=e.$implicit;return a.oxw(2).selectImage(n.id)}),a.TgZ(1,"div",7),a._UZ(2,"img",8),a.qZA(),a.TgZ(3,"div",9),a.TgZ(4,"div",10),a.TgZ(5,"span"),a.TgZ(6,"strong"),a._uU(7),a.qZA(),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"div",11),a._uU(10),a.qZA(),a.qZA(),a.TgZ(11,"div",12),a.O4$(),a.TgZ(12,"svg",13),a.TgZ(13,"title"),a._uU(14,"Check"),a.qZA(),a._UZ(15,"defs"),a.TgZ(16,"g",14),a._UZ(17,"path",15),a.qZA(),a.qZA(),a.qZA(),a.kcU(),a.TgZ(18,"a",16),a.O4$(),a.TgZ(19,"svg",13),a.TgZ(20,"title"),a._uU(21,"X\xf3a"),a.qZA(),a._UZ(22,"defs"),a.TgZ(23,"g",17),a.TgZ(24,"g",18),a._UZ(25,"path",19),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.kcU(),a.TgZ(26,"div",20),a.TgZ(27,"span"),a._uU(28),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.ekj("selected",t.selected),a.xp6(2),a.s9C("src",t.thumbnail,a.LSH),a.s9C("alt",t.filename),a.xp6(5),a.Oqu(t.size),a.xp6(1),a.hij(" ",t.size_unit," "),a.xp6(2),a.hij(" ",t.filename," "),a.xp6(18),a.hij(" ",t.filename," ")}}function x(t,e){if(1&t&&(a.TgZ(0,"div",4),a.YNc(1,y,29,8,"div",5),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.images)}}function C(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",21),a.NdJ("click",function(){return a.CHM(t),a.oxw().handleOk()}),a._uU(1),a.ALo(2,"translate"),a.qZA(),a.TgZ(3,"button",22),a.NdJ("click",function(){return a.CHM(t),a.oxw().handleCancel()}),a._uU(4),a.ALo(5,"translate"),a.qZA()}if(2&t){const t=a.oxw();a.Q6J("nzLoading",t.isConfirmLoading),a.xp6(1),a.Oqu(a.lcZ(2,3,"Choose")),a.xp6(3),a.Oqu(a.lcZ(5,5,"Cancel"))}}let O=(()=>{class t extends d.H{constructor(t,e,n){super(),this.events=t,this.imageService=e,this.cd=n,this.title="Image Library",this.oldTitle="Image Library",this.url="",this.params={},this.lastUrl="",this.lastParams={},this.mode="single",this.images=[],this.isVisible=!1,this.isConfirmLoading=!1,this.onDone=null,this.onCancel=null,this.listType="list",this.oldListType="list",this.registerEventService(t,{open:t=>this.show(t.config,t.callback,t.cancel)})}onInit(){this.activeEventServiceRegistered(this.events)}onDestroy(){this.deactiveEventServiceRegistered(this.events)}show(t,e,n){this.onDone=null,this.onCancel=null,(0,o.Kn)(t)&&(t.title&&(this.title=t.title),t.url&&(this.url=t.url),t.mode&&(0,o.d3)(["single","simple","many","one"],String(t.mode).toLowerCase())&&(this.mode=t.mode),(0,o.Kn)(t.params)&&(0,o.MP)(this.params,t.params),this.listType=t.listType&&(0,o.d3)(h,t.listType)?t.listType:"list","function"==typeof e?this.onDone=e:"function"==typeof t.done&&(this.onDone=t.done),"function"==typeof n?this.onCancel=n:"function"==typeof t.cancel&&(this.onCancel=t.cancel)),this.showModal()}showModal(){this.isVisible=!0,0==this.images.length?this.firstLoad():this.listType!=this.oldListType&&(this.images=[],this.firstLoad())}firstLoad(){this.imageService.getImages(this.listType,this.params).subscribe(t=>{t.status&&t.data&&t.data.length&&this.appendImageFiles(t.data)})}appendImageFiles(t){t.map(t=>{t.selected=!1,this.images.push(t),"hdr"==t.extension&&this.proccessHDRThumbnail(t)})}proccessHDRThumbnail(t){t.thumbnail=i.lY,this.app&&this.app.engine.Loader.LoadEnv({format:"hdr",file:t.source||t.url||t.file},function(e,n){var i=s.Z.get2DMap(n,240,120);i&&(t.thumbnail=i)})}selectImage(t){"many"!=this.mode&&this.images.map((e,n,i)=>{e.selected=e.id==t})}handleOk(){let t=null;if("many"!=this.mode){if(this.images.map((e,n,i)=>{e.selected&&(t=e,e.selected=!1)}),!t)return window.alert("Vui l\xf2ng ch\u1ecdn \u1ea3nh")}else if(t=[],this.images.map((e,n,i)=>{e.selected&&(t.push(e),e.selected=!1)}),!t.length)return window.alert("Vui l\xf2ng ch\u1ecdn \u1ea3nh");this.isConfirmLoading=!0,setTimeout(()=>{"function"==typeof this.onDone&&this.onDone(t),this.isVisible=!1,this.oldListType=this.listType,this.isConfirmLoading=!1},1e3)}handleCancel(){this.isVisible=!1,this.oldListType=this.listType,"function"==typeof this.onCancel&&this.onCancel()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(g.P),a.Y36(p),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["modal-image-library"]],inputs:{app:"app"},features:[a.qOj],decls:7,vars:5,consts:[[3,"nzVisible","nzTitle","nzContent","nzFooter","nzWidth","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],["modalFooter",""],[1,"images","image-results"],["class","img-preview img-processing img-image-preview",3,"selected","click",4,"ngFor","ngForOf"],[1,"img-preview","img-processing","img-image-preview",3,"click"],[1,"img-image"],[3,"src","alt"],[1,"img-details"],[1,"img-size"],[1,"img-filename"],[1,"img-success-mark"],["width","54px","height","54px","viewBox","0 0 54 54","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xmlns","sketch","http://www.bohemiancoding.com/sketch/ns"],["id","Page-1","stroke","none","stroke-width","4","fill","none","fill-rule","evenodd",0,"sketch","type","MSPage"],["d","M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z","id","Oval-2","stroke-opacity","0.198794158","stroke","#ffffff","fill-opacity","0.816519475","fill","#00bc00",0,"sketch","type","MSShapeGroup"],["href","javascript:void(0);",1,"img-remove","btn-remove-image-file"],["id","Page-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd",0,"sketch","type","MSPage"],["id","Check-+-Oval-2",0,"sketch","type","MSLayerGroup","stroke","#747474","stroke-opacity","0.198794158","fill","#FF0000","fill-opacity","0.816519475"],["d","M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z","id","Oval-2",0,"sketch","type","MSShapeGroup"],[1,"img-outer-filename"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(t,e){if(1&t&&(a.TgZ(0,"nz-modal",0),a.NdJ("nzVisibleChange",function(t){return e.isVisible=t})("nzOnCancel",function(){return e.handleCancel()}),a.YNc(1,w,1,1,"ng-template",null,1,a.W1O),a.YNc(3,x,2,1,"ng-template",null,2,a.W1O),a.YNc(5,C,6,7,"ng-template",null,3,a.W1O),a.qZA()),2&t){const t=a.MAs(2),n=a.MAs(4),i=a.MAs(6);a.Q6J("nzVisible",e.isVisible)("nzTitle",t)("nzContent",n)("nzFooter",i)("nzWidth",1200)}},directives:[u.du,f.sg,m.ix,v.dQ,_.w],pipes:[b.X$],styles:['.image-item[_ngcontent-%COMP%], gallery-image-item[_ngcontent-%COMP%]{display:inline-block;width:80px;margin:10px}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], gallery-image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;-o-object-fit:cover;object-fit:cover}image-results[_ngcontent-%COMP%]{box-sizing:border-box}image-results[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]{max-height:450px;overflow-y:auto}.img-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;vertical-align:top;margin:16px 14px;min-height:100px}.img-preview[_ngcontent-%COMP%]:hover{z-index:1000}.img-preview[_ngcontent-%COMP%]:hover   .img-details[_ngcontent-%COMP%]{opacity:1}.img-preview.img-file-preview[_ngcontent-%COMP%]   .img-image[_ngcontent-%COMP%]{border-radius:20px;background:#999;background:linear-gradient(to bottom,#eee,#ddd)}.img-preview.img-file-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]{opacity:1}.img-preview.img-file-preview[_ngcontent-%COMP%], .img-preview.img-image-preview[_ngcontent-%COMP%]{background:#fff}.img-preview.img-image-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]{transition:opacity .2s linear}.img-preview[_ngcontent-%COMP%]   .img-remove[_ngcontent-%COMP%]{font-size:14px;text-align:center;display:block;cursor:pointer;border:none}.img-preview[_ngcontent-%COMP%]   .img-remove[_ngcontent-%COMP%]:hover{text-decoration:underline}.img-preview[_ngcontent-%COMP%]:hover   .img-details[_ngcontent-%COMP%]{opacity:1}.img-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]{cursor:pointer;z-index:20;position:absolute;top:0;left:0;opacity:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;color:#000000e6;line-height:150%}.img-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]   .img-size[_ngcontent-%COMP%]{margin-bottom:1em;font-size:16px}.img-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]   .img-filename[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{border:1px solid rgba(200,200,200,.8);background-color:#fffc}.img-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]   .img-filename[_ngcontent-%COMP%]:not(:hover){overflow:hidden;text-overflow:ellipsis}.img-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]   .img-filename[_ngcontent-%COMP%]:not(:hover)   span[_ngcontent-%COMP%]{border:1px solid transparent}.img-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]   .img-size[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .img-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]   .img-filename[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#fff6;padding:0 .4em;border-radius:3px}.img-preview[_ngcontent-%COMP%]:hover   .img-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05);filter:blur(8px)}.img-preview[_ngcontent-%COMP%]   .img-image[_ngcontent-%COMP%]{border-radius:20px;overflow:hidden;width:120px;height:120px;position:relative;display:block;z-index:10}.img-preview[_ngcontent-%COMP%]   .img-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;-o-object-fit:cover;object-fit:cover;width:120px;height:120px}.img-preview.img-success[_ngcontent-%COMP%]   .img-success-mark[_ngcontent-%COMP%]{-webkit-animation:passing-through 3s cubic-bezier(.77,0,.175,1);animation:passing-through 3s cubic-bezier(.77,0,.175,1)}.img-preview.img-error[_ngcontent-%COMP%]   .img-error-mark[_ngcontent-%COMP%]{opacity:1;-webkit-animation:slide-in 3s cubic-bezier(.77,0,.175,1);animation:slide-in 3s cubic-bezier(.77,0,.175,1)}.img-preview.img-error[_ngcontent-%COMP%]   .img-error-message[_ngcontent-%COMP%]{display:block}.img-preview.img-error[_ngcontent-%COMP%]:hover   .img-error-message[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.img-preview[_ngcontent-%COMP%]   .img-error-mark[_ngcontent-%COMP%], .img-preview[_ngcontent-%COMP%]   .img-success-mark[_ngcontent-%COMP%]{pointer-events:none;opacity:0;z-index:500;position:absolute;display:block;top:60px;left:60px;margin-left:-27px;margin-top:-27px}.img-preview[_ngcontent-%COMP%]   .img-error-mark[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .img-preview[_ngcontent-%COMP%]   .img-success-mark[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;width:54px;height:54px}.img-preview.img-processing[_ngcontent-%COMP%]   .img-progress[_ngcontent-%COMP%]{opacity:1;transition:all .2s linear}.img-preview.img-complete[_ngcontent-%COMP%]   .img-progress[_ngcontent-%COMP%]{opacity:0;transition:opacity .4s ease-in}.img-preview[_ngcontent-%COMP%]:not(.img-processing)   .img-progress[_ngcontent-%COMP%]{-webkit-animation:pulse 6s ease infinite;animation:pulse 6s ease infinite}.img-preview[_ngcontent-%COMP%]   .img-progress[_ngcontent-%COMP%]{opacity:1;z-index:1000;pointer-events:none;position:absolute;height:16px;left:50%;top:50%;margin-top:-8px;width:80px;margin-left:-40px;background:rgba(255,255,255,.9);-webkit-transform:scale(1);border-radius:8px;overflow:hidden}.img-preview[_ngcontent-%COMP%]   .img-progress[_ngcontent-%COMP%]   .img-upload[_ngcontent-%COMP%]{background:#333;background:linear-gradient(to bottom,#666,#444);position:absolute;top:0;left:0;bottom:0;width:0;transition:width .3s ease-in-out}.img-preview[_ngcontent-%COMP%]   .img-error-message[_ngcontent-%COMP%]{pointer-events:none;z-index:1000;position:absolute;display:block;display:none;opacity:0;transition:opacity .3s ease;border-radius:8px;font-size:13px;bottom:130px;left:-10px;width:140px;background:#be2626;background:linear-gradient(to bottom,#be2626,#a92222);padding:.5em 1.2em;color:#fff}.img-preview[_ngcontent-%COMP%]   .img-error-message[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-6px;left:64px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #be2626}.img-preview[_ngcontent-%COMP%]   .img-outer-filename[_ngcontent-%COMP%]{width:120px;overflow:hidden;word-wrap:break-word}.img-preview[_ngcontent-%COMP%]   .btn-remove-image-file[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;display:block;z-index:100;opacity:.3}.img-preview[_ngcontent-%COMP%]   .btn-remove-image-file[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.img-preview[_ngcontent-%COMP%]   .img-success-mark[_ngcontent-%COMP%]{cursor:pointer}.img-preview[_ngcontent-%COMP%]:hover   .btn-remove-image-file[_ngcontent-%COMP%]{opacity:.7}.img-preview[_ngcontent-%COMP%]:hover   .btn-remove-image-file[_ngcontent-%COMP%]:hover{opacity:1}.img-preview.selected[_ngcontent-%COMP%]   .img-success-mark[_ngcontent-%COMP%]{opacity:1;z-index:100;cursor:pointer}.img-preview.selected[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%], .img-preview.selected[_ngcontent-%COMP%]:hover   .img-details[_ngcontent-%COMP%]{opacity:0}.img-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]   .img-filename[_ngcontent-%COMP%]{white-space:nowrap}.img-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]   .img-filename[_ngcontent-%COMP%]:hover{overflow:hidden;text-overflow:ellipsis}.img-preview[_ngcontent-%COMP%]   .img-details[_ngcontent-%COMP%]   .img-filename[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{background-color:#fff6;padding:0 .4em;border-radius:3px;border:1px solid transparent}.image-results[_ngcontent-%COMP%]{min-height:150px;background:#fff;color:#000;padding:20px 0;max-height:450px;overflow-y:auto}']}),t})()},483:function(t,e,n){n.d(e,{P:function(){return r}});var i=n(83586),s=n(39540),o=n(37716);let r=(()=>{class t extends s.O{constructor(){super()}open(t,e,n){var s,o={};return(0,i.mf)(t)?(s=t,(0,i.Kn)(e)&&e?o=e:(0,i.mf)(e)&&(n=e)):((0,i.Kn)(t)&&((0,i.mf)((o=t).done)&&(s=o.done),(0,i.mf)(o.cancel)&&(n=o.cancel)),!(0,i.mf)(s)&&(0,i.mf)(e)&&(s=e)),this.emit({type:"open",config:o,callback:s,cancel:n}),this}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},62802:function(t,e,n){n.d(e,{e:function(){return r}});var i=n(76610),s=n(37716),o=n(58252);let r=(()=>{class t extends i.H{constructor(t,e){super(),this.elemRef=t,this.events=e,this.app3D=null,this.canvas3D=null,this.appStatus=!1,this.elementStatus=!1}onChangeSubEvents(){this.registerEventService(this.subEvents,"resetcanvas",()=>{let t=!0;const e=()=>{t||(t=!this.initCanvas()),t&&setTimeout(e,1e3)};e()})}initFirst(){this.registerEventService(window,"resize",t=>this.updateCanvasSize(t))}onInit(){let t={};t.canvas=this.canvas?this.setCanvas(this.canvas):this.subEvents.on("canvas.set",t=>this.setCanvas(t.canvas),!0),t.app=this.app?this.setApp(this.app):this.subEvents.on("app.set",t=>this.setApp(t.app),!0),t=null,this.activeEventServiceRegistered(window)}onDestroy(){this.deactiveEventServiceRegistered(window)}ngAfterViewInit(){this.elementStatus=!0,this.initCanvas()}updateCanvasSize(t){this.app3D&&this.app3D.engine.updateCanvasSize(t)}initCanvas(){if(this.app3D&&this.canvas3D&&this.elementStatus){var t=this.elemRef.nativeElement;return t.innerHTML="",this.app3D.engine.setWrapper(t),setTimeout(()=>{this.updateCanvasSize()},10),!0}return!1}setApp(t){this.app3D=t,this.canvas3D||(this.canvas3D=this.app3D.engine.getCanvas()),this.initCanvas()}setCanvas(t){this.canvas3D=t,this.initCanvas()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(o.v))},t.\u0275cmp=s.Xpm({type:t,selectors:[["canvas-layer"]],inputs:{canvas:"canvas",app:"app"},features:[s.qOj],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]{height:100%}"]}),t})()},3462:function(t,e,n){n.d(e,{z:function(){return r}});var i=n(76610),s=n(37716),o=n(58252);let r=(()=>{class t extends i.H{constructor(t){super(),this.service=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.v))},t.\u0275cmp=s.Xpm({type:t,selectors:[["droppable-layer"]],features:[s.qOj],decls:6,vars:0,consts:[[1,"message"],[1,"message-body"],[1,"message-title"],[1,"message-content"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"H3",2),s._uU(3,"Drop Here"),s.qZA(),s.TgZ(4,"p",3),s._uU(5,"Th\u1ea3 v\xe0o \u0111\xe2y!"),s.qZA(),s.qZA(),s.qZA())},styles:['[_nghost-%COMP%]{position:absolute;z-index:1100;top:100%;left:50%;height:0;width:0;display:flex;align-content:center;align-items:center;background:rgba(255,255,255,.4);overflow:hidden;border-radius:50%;-webkit-animation-name:dragelementhover;-webkit-animation-duration:.15s;animation-name:dragelementhover;animation-duration:.15s}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{align-items:center;align-content:center;text-align:center;width:0px;height:0px;margin:auto;border-radius:50%;background:#fff;box-shadow:0 0 20px 20px #10b3d6;display:flex;overflow:hidden;transition:all .4s ease-in-out}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{text-align:center;display:block;width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-title[_ngcontent-%COMP%]{font-weight:700;font-size:25px;margin-bottom:20px}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{margin-bottom:5px}.active[_nghost-%COMP%]{display:flex;border-radius:0;top:0;left:0;opacity:1;width:100%;height:100%}.active[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{width:248px;height:248px}[_nghost-%COMP%]   .ctn-preloader[_ngcontent-%COMP%]{display:none}.is-loading[_nghost-%COMP%]{display:flex;border-radius:0;top:0;left:0;opacity:1;width:100%;height:100%}.is-loading[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{display:none}.is-loading[_nghost-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;margin:auto}.is-loading[_nghost-%COMP%]   .ctn-preloader[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;display:block;margin:auto}.is-loading[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]{-webkit-animation:spinner 3s infinite linear;animation:spinner 3s infinite linear;border-radius:50%;border:3px solid #f1f6f8;border-left-color:#10b3d6;border-top-color:#10b3d6;margin:0 auto;position:absolute;left:-10px;right:-10px;bottom:-10px;top:-10px}.is-loading[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]:before{box-sizing:border-box;content:"";width:20px;height:20px;border:6px solid #fff;box-shadow:0 0 20px #042e3833;background:#10b3d6;position:absolute;right:22px;top:35px;border-radius:50%}@media (max-width: 576px){.is-loading[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]:before{top:18px}}.is-loading[_nghost-%COMP%]   .round_spinner[_ngcontent-%COMP%]{border-width:1px;border-color:#eef3f4;border-style:solid;border-radius:50%;background-color:#fdfdfd;box-shadow:0 0 100px #042e3824;width:248px;height:248px;display:flex;align-items:center;justify-content:center;position:relative}@media (max-width: 576px){.is-loading[_nghost-%COMP%]   .round_spinner[_ngcontent-%COMP%]{width:155px;height:155px}}.is-loading[_nghost-%COMP%]   .round_spinner[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:30px;font-weight:400;margin-bottom:0;color:#1d2746}.is-loading[_nghost-%COMP%]   .round_spinner[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.is-loading[_nghost-%COMP%]   .head[_ngcontent-%COMP%]{color:#1d2746;display:block;font-size:26px;font-weight:700;letter-spacing:5.2px;text-transform:uppercase;text-align:center;font-family:"Roboto",sans-serif;margin:5% 0 1%;padding:0}@-webkit-keyframes dragelementhover{0%{top:100%;left:50%;opacity:0;width:0;height:0}50%{top:calc(50%-50px);left:calc(50%-50px);opacity:.4;width:100px;height:100px}to{top:0;left:50%;opacity:1;width:100%;height:100%}}@keyframes dragelementhover{0%{top:100%;left:50%;opacity:0;width:0;height:0}50%{top:calc(50%-50px);left:calc(50%-50px);opacity:.4;width:100px;height:100px}to{top:0;left:50%;opacity:1;width:100%;height:100%}}@-webkit-keyframes dropimgzoomout{0%{width:100%;height:50px}to{width:1%;height:1px}}@keyframes dropimgzoomout{0%{width:100%;height:50px}to{width:1%;height:1px}}@-webkit-keyframes dragelementout{0%{top:0;left:50%;opacity:1;width:100%;height:100%}to{top:100%;left:0;opacity:0;width:0;height:0}}@keyframes dragelementout{0%{top:0;left:50%;opacity:1;width:100%;height:100%}to{top:100%;left:50%;opacity:0;width:0;height:0}}@-webkit-keyframes spinner{to{transform:rotate(360deg)}}@keyframes spinner{to{transform:rotate(360deg)}}']}),t})()},83064:function(t,e,n){n.d(e,{m:function(){return u}});var i=n(83586),s=n(76610),o=n(37716),r=n(66210),a=n(38583),c=n(14453),l=n(29374),h=n(84514),p=n(29790);function d(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"button",3),o.NdJ("click",function(){o.CHM(t);const n=e.$implicit;return o.oxw(2).onClick(n.key)}),o._uU(1),o.ALo(2,"translate"),o.qZA()}if(2&t){const t=e.$implicit;o.xp6(1),o.hij(" ",o.lcZ(2,1,t.text)," ")}}function g(t,e){if(1&t&&(o.TgZ(0,"div",1),o.YNc(1,d,3,3,"button",2),o.qZA()),2&t){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.showBtns)}}let u=(()=>{class t extends s.H{constructor(t){super(),this.events=t,this.buttons=[{key:"saveView",text:"Save View"},{key:"saveThumbnail",text:"Save Thumbnail"},{key:"exportImage",text:"Export Image"}],this.showBtns=[],this.show=!1}onChangeSubEvents(){this.registerEventService(this.subEvents,{"show|dispatch":t=>this.showButtons(...t.buttons),"hide|dispatch":t=>this.hideButtons()})}onInit(){}showButtons(...t){if(0==t.length)return this.hideButtons();this.showBtns=[];let e=[],n=!1;for(let s=0;s<t.length;s++){const n=t[s];(0,i.kJ)(n)?n.map(t=>e.push(t)):e.push(n)}e.map(t=>{this.buttons.map(e=>{e.key==t&&(this.showBtns.push(e),n=!0)})}),this.show=n}hideButtons(){this.show=!1,this.showBtns=[]}onClick(t){this.subEvents.emit({type:"click",key:t})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(r.B))},t.\u0275cmp=o.Xpm({type:t,selectors:[["viewport-editor-toolbar"]],features:[o.qOj],decls:1,vars:1,consts:[["class","menu",4,"ngIf"],[1,"menu"],["nz-button","",3,"click",4,"ngFor","ngForOf"],["nz-button","",3,"click"]],template:function(t,e){1&t&&o.YNc(0,g,2,1,"div",0),2&t&&o.Q6J("ngIf",e.show)},directives:[a.O5,a.sg,c.ix,l.dQ,h.w],pipes:[p.X$],styles:["[_nghost-%COMP%]{position:absolute;top:10px;left:10px;display:block}"]}),t})()},89458:function(t,e,n){n.d(e,{D:function(){return p}});var i=n(76610),s=n(37716),o=n(58252),r=n(38583),a=n(83586),c=n(49672);let l=(()=>{class t extends i.H{constructor(t,e){super(),this.events=t,this.cd=e,this.data=null,this.index=0,this.update=new s.vpe,this.clickDelete=new s.vpe,this.zIndex=0,this.app=null,this.updateEvent=t=>{t.data.secret_key==this.data.secret_key&&(this.data=t.data,this.setStyle())}}onChangeSubEvents(){this.registerEventService(this.subEvents,"app.set",t=>this.setApp(t.app),!0)}onInit(){this.setStyle()}onDestroy(){this.app&&this.app.off("scene.foregrounds.updated",this.updateEvent)}setStyle(){let t=(0,a.MP)({},c.wN);this.data=(0,a.MP)(t,this.data),this.bgImageUrl="url("+this.data.url+")",this.zIndex=1+this.index,this.cd.detectChanges()}setApp(t){this.app=t,t.on("scene.foregrounds.updated",this.updateEvent)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.v),s.Y36(s.sBO))},t.\u0275cmp=s.Xpm({type:t,selectors:[["foreground-layer-item"]],inputs:{data:"data",index:"index"},outputs:{update:"update",clickDelete:"clickDelete"},features:[s.qOj],decls:1,vars:10,consts:[[1,"foreground-item"]],template:function(t,e){1&t&&s._UZ(0,"div",0),2&t&&(s.Udp("background-image",e.bgImageUrl)("z-index",e.zIndex)("opacity",e.data.opacity),s.uIk("data-repeat",e.data.repeat)("data-bg-size",e.data.size)("data-pos-x",e.data.position.x)("data-pos-y",e.data.position.y))},styles:[".foreground-item[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:100;background-position:center center;background-repeat:no-repeat}.foreground-item.repeat[_ngcontent-%COMP%], .foreground-item[data-repeat=repeat][_ngcontent-%COMP%], .foreground-item[data-repeat=auto][_ngcontent-%COMP%]{background-repeat:repeat}.foreground-item.repeat-x[_ngcontent-%COMP%], .foreground-item[data-repeat=x][_ngcontent-%COMP%], .foreground-item[data-repeat=repeat-x][_ngcontent-%COMP%]{background-repeat:repeat-x}.foreground-item.repeat-y[_ngcontent-%COMP%], .foreground-item[data-repeat=y][_ngcontent-%COMP%], .foreground-item[data-repeat=repeat-y][_ngcontent-%COMP%]{background-repeat:repeat-y}.foreground-item.repeat-no[_ngcontent-%COMP%], .foreground-item.no-repeat[_ngcontent-%COMP%], .foreground-item[data-repeat=no-repeat][_ngcontent-%COMP%], .foreground-item[data-repeat=no][_ngcontent-%COMP%]{background-repeat:no-repeat}.foreground-item.pos-x-left[_ngcontent-%COMP%], .foreground-item.pos-left[_ngcontent-%COMP%], .foreground-item[data-pos-x=left][_ngcontent-%COMP%]{background-position-x:left}.foreground-item.pos-x-center[_ngcontent-%COMP%], .foreground-item[data-pos-x=center][_ngcontent-%COMP%]{background-position-x:center}.foreground-item.pos-x-right[_ngcontent-%COMP%], .foreground-item.pos-right[_ngcontent-%COMP%], .foreground-item[data-pos-x=right][_ngcontent-%COMP%]{background-position-x:right}.foreground-item.pos-y-top[_ngcontent-%COMP%], .foreground-item.pos-top[_ngcontent-%COMP%], .foreground-item[data-pos-y=top][_ngcontent-%COMP%]{background-position-y:top}.foreground-item.pos-y-center[_ngcontent-%COMP%], .foreground-item[data-pos-y=center][_ngcontent-%COMP%]{background-position-y:center}.foreground-item.pos-y-bottom[_ngcontent-%COMP%], .foreground-item.pos-bottom[_ngcontent-%COMP%], .foreground-item[data-pos-y=bottom][_ngcontent-%COMP%]{background-position-y:bottom}.foreground-item.pos-left-top[_ngcontent-%COMP%], .foreground-item[data-pos=left-top][_ngcontent-%COMP%]{background-position:left top}.foreground-item.pos-left-center[_ngcontent-%COMP%], .foreground-item[data-pos=left-center][_ngcontent-%COMP%]{background-position:left center}.foreground-item.pos-left-bottom[_ngcontent-%COMP%], .foreground-item[data-pos=left-bottom][_ngcontent-%COMP%]{background-position:left bottom}.foreground-item.pos-center-top[_ngcontent-%COMP%], .foreground-item[data-pos=center-top][_ngcontent-%COMP%]{background-position:center top}.foreground-item.pos-center-center[_ngcontent-%COMP%], .foreground-item[data-pos=center-center][_ngcontent-%COMP%]{background-position:center center}.foreground-item.pos-center-bottom[_ngcontent-%COMP%], .foreground-item[data-pos=center-bottom][_ngcontent-%COMP%]{background-position:center bottom}.foreground-item.pos-right-top[_ngcontent-%COMP%], .foreground-item[data-pos=right-top][_ngcontent-%COMP%]{background-position:right top}.foreground-item.pos-right-center[_ngcontent-%COMP%], .foreground-item[data-pos=right-center][_ngcontent-%COMP%]{background-position:right center}.foreground-item.pos-right-bottom[_ngcontent-%COMP%], .foreground-item[data-pos=right-bottom][_ngcontent-%COMP%]{background-position:right bottom}.foreground-item.bg-size-contain[_ngcontent-%COMP%], .foreground-item[data-bg-size=contain][_ngcontent-%COMP%]{background-size:contain}.foreground-item.bg-size-cover[_ngcontent-%COMP%], .foreground-item[data-bg-size=cover][_ngcontent-%COMP%]{background-size:cover}.foreground-item.d-none[_ngcontent-%COMP%], .foreground-item.hide[_ngcontent-%COMP%]{display:none}"]}),t})();function h(t,e){if(1&t&&s._UZ(0,"foreground-layer-item",2),2&t){const t=e.$implicit,n=e.index,i=s.oxw();s.Q6J("moduleKey",i.moduleKey)("data",t)("index",n)}}let p=(()=>{class t extends i.H{constructor(t,e){super(),this._service=t,this.cd=e,this.app3D=null,this.foregrounds=[]}onInit(){const t=this._service.sub(this.moduleKey);t&&t!==this.service&&(this.service=t),this.app?this.setApp(this.app):this.service.on("app.set",t=>this.setApp(t.app),!0)}setApp(t){this.app3D=t;const e=()=>this.loadForegrounds();this.app3D.on({"scene.foregrounds.added":e,"scene.foregrounds.deleted":e,"scene.foregrounds.updated":e,"data.imported":e,"data.renew":e,"data.resetted":e}),e()}loadForegrounds(){this.foregrounds=this.app3D.getForegrounds(),this.cd.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.v),s.Y36(s.sBO))},t.\u0275cmp=s.Xpm({type:t,selectors:[["foreground-layer"]],inputs:{app:"app"},features:[s.qOj],decls:2,vars:1,consts:[[1,"foregrounds"],[3,"moduleKey","data","index",4,"ngFor","ngForOf"],[3,"moduleKey","data","index"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.YNc(1,h,1,3,"foreground-layer-item",1),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngForOf",e.foregrounds))},directives:[r.sg,l],styles:[".foregrounds[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}"]}),t})()},72050:function(t,e,n){n.d(e,{n:function(){return r}});var i=n(76610),s=n(37716),o=n(58252);let r=(()=>{class t extends i.H{constructor(t,e){super(),this.events=t,this.cd=e,this.isActive=!1,this.isInited=!1}onChangeSubEvents(){this.registerEventService(this.subEvents,{"show:loading|dispatch":()=>{this.isActive=!0},"hide:loading|dispatch":()=>{this.isActive=!1}})}onInit(){}onDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.v),s.Y36(s.sBO))},t.\u0275cmp=s.Xpm({type:t,selectors:[["viewport-loading-layer"]],features:[s.qOj],decls:7,vars:2,consts:[[1,"loading-wrapper"],["id","ctn-preloader",1,"ctn-preloader"],[1,"round_spinner"],[1,"spinner"],[1,"text"],[1,"title"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s._UZ(3,"Div",3),s.TgZ(4,"Div",4),s.TgZ(5,"H4",5),s._uU(6,"\u0110ang T\u1ea3i..."),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&s.ekj("active",e.isActive)},styles:['.loading-wrapper[_ngcontent-%COMP%]{display:none;position:absolute;z-index:600;top:0;left:0;height:100%;width:100%;align-content:center;align-items:center;background:rgba(255,255,255,.4);overflow:hidden}.loading-wrapper[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;margin:auto}.loading-wrapper[_ngcontent-%COMP%]   .ctn-preloader[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;display:block;margin:auto}.loading-wrapper[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{-webkit-animation:spinner 3s infinite linear;animation:spinner 3s infinite linear;border-radius:50%;border:3px solid #f1f6f8;border-left-color:#10b3d6;border-top-color:#10b3d6;margin:0 auto;position:absolute;left:-10px;right:-10px;bottom:-10px;top:-10px}.loading-wrapper[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]:before{box-sizing:border-box;content:"";width:20px;height:20px;border:6px solid #fff;box-shadow:0 0 20px #042e3833;background:#10b3d6;position:absolute;right:22px;top:35px;border-radius:50%}@media (max-width: 576px){.loading-wrapper[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]:before{top:18px}}.loading-wrapper[_ngcontent-%COMP%]   .round_spinner[_ngcontent-%COMP%]{border-width:1px;border-color:#eef3f4;border-style:solid;border-radius:50%;background-color:#fdfdfd;box-shadow:0 0 100px #042e3824;width:248px;height:248px;display:flex;align-items:center;justify-content:center;position:relative}@media (max-width: 576px){.loading-wrapper[_ngcontent-%COMP%]   .round_spinner[_ngcontent-%COMP%]{width:155px;height:155px}}.loading-wrapper[_ngcontent-%COMP%]   .round_spinner[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:30px;font-weight:400;margin-bottom:0;color:#1d2746}.loading-wrapper[_ngcontent-%COMP%]   .round_spinner[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.loading-wrapper[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{color:#1d2746;display:block;font-size:26px;font-weight:700;letter-spacing:5.2px;text-transform:uppercase;text-align:center;font-family:"Roboto",sans-serif;margin:5% 0 1%;padding:0}.loading-wrapper.active[_ngcontent-%COMP%]{display:flex}@-webkit-keyframes spinner{to{transform:rotate(360deg)}}@keyframes spinner{to{transform:rotate(360deg)}}']}),t})()},61354:function(t,e,n){n.d(e,{$:function(){return g}});var i=n(23894),s=n(1855),o=n(83586),r=n(76610),a=n(37716),c=n(82280),l=n(38583),h=n(12099);function p(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"div",2),a.TgZ(2,"inp-select",3),a.NdJ("valueChange",function(e){return a.CHM(t),a.oxw().currentFace=e})("subcribe",function(e){return a.CHM(t),a.oxw().changeFace(e.value)}),a.qZA(),a.qZA(),a._UZ(3,"div",4),a.qZA()}if(2&t){const t=a.oxw();a.xp6(2),a.Q6J("value",t.currentFace)("options",t.faceOptions)("fullwidth",!0)}}const d=[{value:"custom",label:"Custom"}];i.Ct.map(t=>d.push(t));let g=(()=>{class t extends r.H{constructor(t,e){super(),this.events=t,this.elemRef=e,this.isShow=!1,this.canvas=null,this.css="",this.faceOptions=d,this.currentFace="custom",this.registerEventService(window,"resize",t=>this.updateCanvasSize(t))}onChangeSubEvents(){this.registerEventService(this.subEvents,{"show|dispatch":t=>{this.isShow=!(0,o.aX)(t,"value")||t.value},"hide|dispatch":t=>this.isShow=!1})}onInit(){this.activeEventServiceRegistered(window)}onDestroy(){this.deactiveEventServiceRegistered(window)}changeFace(t){let e=t.toLowerCase();(0,s.ex)(e)&&this.subEvents.emit({type:"changeface",face:e})}ngAfterViewInit(){this.initCanvas()}updateCanvasSize(t){}initCanvas(){setTimeout(()=>{var t=this.elemRef.nativeElement.querySelector(".canvas-wrapper");t&&(t.innerHTML="",this.subEvents.setCanvasWrapper(t))},5)}setApp(t){this.initCanvas()}setCanvas(t){this.initCanvas()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c.n),a.Y36(a.SBq))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-vector-controls"]],features:[a.qOj],decls:1,vars:1,consts:[["class","fs",4,"ngIf"],[1,"fs"],[1,"face-selection"],["name","face",3,"value","options","fullwidth","valueChange","subcribe"],[1,"canvas-wrapper"]],template:function(t,e){1&t&&a.YNc(0,p,4,3,"div",0),2&t&&a.Q6J("ngIf",e.isShow)},directives:[l.O5,h.Q],styles:[".canvas-wrapper[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;width:100px;height:100px;z-index:350}.face-selection[_ngcontent-%COMP%]{position:absolute;bottom:25px;left:25px;z-index:350;width:150px}.face-selection[_ngcontent-%COMP%]   inp-select[_ngcontent-%COMP%]{display:block;width:100%}.face-matrix[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px;z-index:350;width:200px}.face-matrix[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;margin-left:-2.5px;margin-right:-2.5px;align-items:center;align-content:center}.face-matrix[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:2.5px;flex:0 0 25%;max-width:25%}.face-matrix[_ngcontent-%COMP%]   .face-item[_ngcontent-%COMP%]{height:25px;line-height:25px;background-color:#20242d;cursor:pointer;text-align:center;color:#fafafa;font-size:13px}.face-matrix[_ngcontent-%COMP%]   .face-item[_ngcontent-%COMP%]:hover{background-color:#345eca;color:#fff}.face-matrix[_ngcontent-%COMP%]   .face-item.active[_ngcontent-%COMP%], .face-matrix[_ngcontent-%COMP%]   .face-item[_ngcontent-%COMP%]:active{background-color:#1d47af}"]}),t})()},49672:function(t,e,n){n.d(e,{wF:function(){return i},p2:function(){return s},gi:function(){return o},wN:function(){return r}});const i={x:["left","center","right"],y:["top","center","bottom"],xy:["left-top","center-top","right-top","left-center","center-center","right-center","left-bottom","center-bottom","right-bottom"]},s={repeat:"Auto",no:"no-repeat",x:"repeat-x",y:"repeat-y"},o={auto:"Auto",contain:"Contain",cover:"Cover"},r={name:"foreground",url:"",position:{x:"center",y:"center"},repeat:"no",opacity:1,size:"contain"}},51676:function(t,e,n){n.d(e,{HE:function(){return r}});var i=n(37716),s=n(4782);const o="categories";let r=(()=>{class t{constructor(t){this.httpService=t}getAll(t){return this.httpService.get(o+"/list",t)}get(t){return this.httpService.get(`${o}/${t}`)}create(t){return this.httpService.post(o+"/create",t)}update(t){return this.httpService.patch(`${o}/update`,t)}delete(t){return this.httpService.delete(`${o}/${t}`)}search(t){return this.httpService.get(`${o}/list`,t)}searchNounProject(t){return this.httpService.get(`${o}/search/nounproject`,t)}render(t){return this.httpService.download(o+"/render",t)}getCategoryData(t){return this.httpService.getOut(t)}useCategory(t){return this.httpService.post(`${o}/${t}/use`,{},!1)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(s.O))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},74437:function(t,e,n){n.d(e,{en:function(){return r},op:function(){return l}});var i=n(37716),s=n(4782);const o="items";let r=(()=>{class t{constructor(t){this.httpService=t}getAll(t){return this.httpService.get(o+"/list",t)}getByCategories(t){return this.httpService.get(o+"/category",t)}get(t){return this.httpService.get(`${o}/${t}`)}create(t){return this.httpService.post(o+"/create",t)}update(t){return this.httpService.put(`${o}/update/${t.id}`,t)}updateSize(t){return this.httpService.put(`${o}/size/${t.id}`,t)}updateThumbnail(t){return this.httpService.put(`${o}/thumbnail/${t.id}`,t)}delete(t){return this.httpService.delete(`${o}/${t}`)}search(t){return this.httpService.get(`${o}/list`,t)}searchNounProject(t){return this.httpService.get(`${o}/search/nounproject`,t)}render(t){return this.httpService.download(o+"/render",t)}getItemData(t){return this.httpService.getOut(t)}useItem(t){return this.httpService.post(`${o}/${t}/use`,{},!1)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(s.O))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var a=n(93893),c=n(69037);let l=(()=>{class t extends a._{constructor(t){super(t),this.dbService=t,this.name="items",this.columns={id:{type:"number",autoIncrement:!0},name:{type:"string",required:!0},category_id:{type:"number",defVal:0},description:{type:"string",defVal:""},status:{type:"string",defVal:"draft"},type:{type:"string",defVal:"gltf"},path:{type:"string",defVal:""},file:{type:"string",defVal:""},download_source_url:{type:"string",defVal:""},thumbnail:{type:"string",defVal:""},load_options:{type:"object",defVal:{useRoughnessMipmapper:!0,materialNeedsUpdate:!0}},settings:{type:"object",defVal:{}},size:{type:"object",defVal:{x:0,y:0,z:0}}},this.init()}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(c.H))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);